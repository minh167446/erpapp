var requirejs,require,define;!function(ba){function G(e){return"[object Function]"===K.call(e)}function H(e){return"[object Array]"===K.call(e)}function v(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function T(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function t(e,t){return fa.call(e,t)}function n(e,n){return t(e,n)&&e[n]}function B(e,n){for(var a in e)if(t(e,a)&&n(e[a],a))break}function U(e,n,a,i){return n&&B(n,function(n,r){(a||!t(e,r))&&(!i||"object"!=typeof n||!n||H(n)||G(n)||n instanceof RegExp?e[r]=n:(e[r]||(e[r]={}),U(e[r],n,a,i)))}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ca(e){throw e}function da(e){if(!e)return e;var t=ba;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,n,a){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=a,n&&(t.originalError=n),t}function ga(a){function i(e,t,a){var i,r,o,s,l,c,d,u,t=t&&t.split("/"),m=S.map,p=m&&m["*"];if(e){for(e=e.split("/"),r=e.length-1,S.nodeIdCompat&&Q.test(e[r])&&(e[r]=e[r].replace(Q,"")),"."===e[0].charAt(0)&&t&&(r=t.slice(0,t.length-1),e=r.concat(e)),r=e,o=0;o<r.length;o++)s=r[o],"."===s?(r.splice(o,1),o-=1):".."===s&&0!==o&&(1!==o||".."!==r[2])&&".."!==r[o-1]&&o>0&&(r.splice(o-1,2),o-=2);e=e.join("/")}if(a&&m&&(t||p)){r=e.split("/"),o=r.length;e:for(;o>0;o-=1){if(l=r.slice(0,o).join("/"),t)for(s=t.length;s>0;s-=1)if((a=n(m,t.slice(0,s).join("/")))&&(a=n(a,l))){i=a,c=o;break e}!d&&p&&n(p,l)&&(d=n(p,l),u=o)}!i&&d&&(i=d,c=u),i&&(r.splice(0,c,i),e=r.join("/"))}return(i=n(S.pkgs,e))?i:e}function r(e){z&&v(document.getElementsByTagName("script"),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===k.contextName?(t.parentNode.removeChild(t),!0):void 0})}function o(e){var t=n(S.paths,e);return t&&H(t)&&1<t.length?(t.shift(),k.require.undef(e),k.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function l(e,t,a,r){var o,l,c=null,d=t?t.name:null,u=e,m=!0,p="";return e||(m=!1,e="_@r"+(j+=1)),e=s(e),c=e[0],e=e[1],c&&(c=i(c,d,r),l=n(P,c)),e&&(c?p=l&&l.normalize?l.normalize(e,function(e){return i(e,d,r)}):-1===e.indexOf("!")?i(e,d,r):e:(p=i(e,d,r),e=s(p),c=e[0],p=e[1],a=!0,o=k.nameToUrl(p))),a=!c||l||a?"":"_unnormalized"+(F+=1),{prefix:c,name:p,parentMap:t,unnormalized:!!a,url:o,originalName:u,isDefine:m,id:(c?c+"!"+p:p)+a}}function c(e){var t=e.id,a=n(O,t);return a||(a=O[t]=new k.Module(e)),a}function d(e,a,i){var r=e.id,o=n(O,r);!t(P,r)||o&&!o.defineEmitComplete?(o=c(e),o.error&&"error"===a?i(o.error):o.on(a,i)):"defined"===a&&i(P[r])}function m(t,a){var i=t.requireModules,r=!1;a?a(t):(v(i,function(e){(e=n(O,e))&&(e.error=t,e.events.error&&(r=!0,e.emit("error",t)))}),r||e.onError(t))}function p(){R.length&&(ha.apply(A,[A.length,0].concat(R)),R=[])}function h(e){delete O[e],delete I[e]}function f(e,t,a){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,v(e.depMaps,function(i,r){var o=i.id,s=n(O,o);s&&!e.depMatched[r]&&!a[o]&&(n(t,o)?(e.defineDep(r,P[o]),e.check()):f(s,t,a))}),a[i]=!0)}function g(){var e,t,n=(e=1e3*S.waitSeconds)&&k.startTime+e<(new Date).getTime(),a=[],i=[],s=!1,l=!0;if(!b){if(b=!0,B(I,function(e){var c=e.map,d=c.id;if(e.enabled&&(c.isDefine||i.push(e),!e.error))if(!e.inited&&n)o(d)?s=t=!0:(a.push(d),r(d));else if(!e.inited&&e.fetched&&c.isDefine&&(s=!0,!c.prefix))return l=!1}),n&&a.length)return e=C("timeout","Load timeout for modules: "+a,null,a),e.contextName=k.contextName,m(e);l&&v(i,function(e){f(e,{},{})}),n&&!t||!s||!z&&!ea||x||(x=setTimeout(function(){x=0,g()},50)),b=!1}}function _(e){t(P,e[0])||c(l(e[0],null,!0)).init(e[1],e[2])}function y(e){var e=e.currentTarget||e.srcElement,t=k.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=k.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function E(){var e;for(p();A.length;){if(e=A.shift(),null===e[0])return m(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));_(e)}}var b,w,k,D,x,S={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},O={},I={},$={},A=[],P={},L={},q={},j=1,F=1;return D={require:function(e){return e.require?e.require:e.require=k.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?P[e.map.id]=e.exports:e.exports=P[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return n(S.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},w=function(e){this.events=n($,e.id)||{},this.map=e,this.shim=n(S.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},w.prototype={init:function(e,t,n,a){a=a||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=a.ignore,a.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,k.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();k.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;L[e]||(L[e]=!0,k.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var t,n,a=this.map.id;n=this.depExports;var i=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(G(r)){if(this.events.error&&this.map.isDefine||e.onError!==ca)try{i=k.execCb(a,r,n,i)}catch(e){t=e}else i=k.execCb(a,r,n,i);if(this.map.isDefine&&void 0===i&&((n=this.module)?i=n.exports:this.usingExports&&(i=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",m(this.error=t)}else i=r;this.exports=i,this.map.isDefine&&!this.ignore&&(P[a]=i,e.onResourceLoad)&&e.onResourceLoad(k,this.map,this.depMaps),h(a),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,r=a.id,o=l(a.prefix);this.depMaps.push(o),d(o,"defined",u(this,function(o){var s,p;p=n(q,this.map.id);var f=this.map.name,g=this.map.parentMap?this.map.parentMap.name:null,_=k.makeRequire(a.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(o.normalize&&(f=o.normalize(f,function(e){return i(e,g,!0)})||""),o=l(a.prefix+"!"+f,this.map.parentMap),d(o,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),(p=n(O,o.id))&&(this.depMaps.push(o),this.events.error&&p.on("error",u(this,function(e){this.emit("error",e)})),p.enable())):p?(this.map.url=k.nameToUrl(p),this.load()):(s=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),s.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[r],B(O,function(e){0===e.map.id.indexOf(r+"_unnormalized")&&h(e.map.id)}),m(e)}),s.fromText=u(this,function(n,i){var o=a.name,d=l(o),u=M;i&&(n=i),u&&(M=!1),c(d),t(S.config,r)&&(S.config[o]=S.config[r]);try{e.exec(n)}catch(e){return m(C("fromtexteval","fromText eval for "+r+" failed: "+e,e,[r]))}u&&(M=!0),this.depMaps.push(d),k.completeLoad(o),_([o],s)}),o.load(a.name,_,s,S))})),k.enable(o,this),this.pluginMaps[o.id]=o},enable:function(){I[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,a){var i,r;if("string"==typeof e){if(e=l(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[a]=e,i=n(D,e.id))return void(this.depExports[a]=i(this));this.depCount+=1,d(e,"defined",u(this,function(e){this.undefed||(this.defineDep(a,e),this.check())})),this.errback?d(e,"error",u(this,this.errback)):this.events.error&&d(e,"error",u(this,function(e){this.emit("error",e)}))}i=e.id,r=O[i],!t(D,i)&&r&&!r.enabled&&k.enable(e,this)})),B(this.pluginMaps,u(this,function(e){var t=n(O,e.id);t&&!t.enabled&&k.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},k={config:S,contextName:a,registry:O,defined:P,urlFetched:L,defQueue:A,Module:w,makeModuleMap:l,nextTick:e.nextTick,onError:m,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=S.shim,n={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){n[t]?(S[t]||(S[t]={}),U(S[t],e,!0,!0)):S[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&(q[e]=t)})}),e.shim&&(B(e.shim,function(e,n){H(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=k.makeShimExports(e)),t[n]=e}),S.shim=t),e.packages&&v(e.packages,function(e){var t,e="string"==typeof e?{name:e}:e;t=e.name,e.location&&(S.paths[t]=e.location),S.pkgs[t]=e.name+"/"+(e.main||"main").replace(ia,"").replace(Q,"")}),B(O,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=l(t,null,!0))}),(e.deps||e.callback)&&k.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ba,arguments)),t||e.exports&&da(e.exports)}},makeRequire:function(o,s){function d(n,i,r){var u,p;return s.enableBuildCallback&&i&&G(i)&&(i.__requireJsBuild=!0),"string"==typeof n?G(i)?m(C("requireargs","Invalid require call"),r):o&&t(D,n)?D[n](O[o.id]):e.get?e.get(k,n,o,d):(u=l(n,o,!1,!0),u=u.id,t(P,u)?P[u]:m(C("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+a+(o?"":". Use require([])")))):(E(),k.nextTick(function(){E(),p=c(l(null,o)),p.skipMap=s.skipMap,p.init(n,i,r,{enabled:!0}),g()}),d)}return s=s||{},U(d,{isBrowser:z,toUrl:function(e){var t,n=e.lastIndexOf("."),a=e.split("/")[0];return-1!==n&&("."!==a&&".."!==a||n>1)&&(t=e.substring(n,e.length),e=e.substring(0,n)),k.nameToUrl(i(e,o&&o.id,!0),t,!0)},defined:function(e){return t(P,l(e,o,!1,!0).id)},specified:function(e){return e=l(e,o,!1,!0).id,t(P,e)||t(O,e)}}),o||(d.undef=function(e){p();var t=l(e,o,!0),a=n(O,e);a.undefed=!0,r(e),delete P[e],delete L[t.url],delete $[e],T(A,function(t,n){t[0]===e&&A.splice(n,1)}),a&&(a.events.defined&&($[e]=a.events),h(e))}),d},enable:function(e){n(O,e.id)&&c(e).enable()},completeLoad:function(e){var a,i,r=n(S.shim,e)||{},s=r.exports;for(p();A.length;){if(i=A.shift(),null===i[0]){if(i[0]=e,a)break;a=!0}else i[0]===e&&(a=!0);_(i)}if(i=n(O,e),!a&&!t(P,e)&&i&&!i.inited){if(S.enforceDefine&&(!s||!da(s)))return o(e)?void 0:m(C("nodefine","No define call for "+e,null,[e]));_([e,r.deps||[],r.exportsFn])}g()},nameToUrl:function(t,a,i){var r,o,s;if((r=n(S.pkgs,t))&&(t=r),r=n(q,t))return k.nameToUrl(r,a,i);if(e.jsExtRegExp.test(t))r=t+(a||"");else{for(r=S.paths,t=t.split("/"),o=t.length;o>0;o-=1)if(s=t.slice(0,o).join("/"),s=n(r,s)){H(s)&&(s=s[0]),t.splice(0,o,s);break}r=t.join("/"),r+=a||(/^data\:|\?/.test(r)||i?"":".js"),r=("/"===r.charAt(0)||r.match(/^[\w\+\.\-]+:/)?"":S.baseUrl)+r}return S.urlArgs?r+((-1===r.indexOf("?")?"?":"&")+S.urlArgs):r},load:function(t,n){e.load(k,t,n)},execCb:function(e,t,n,a){return t.apply(a,n)},onScriptLoad:function(e){("load"===e.type||ja.test((e.currentTarget||e.srcElement).readyState))&&(N=null,e=y(e),k.completeLoad(e.id))},onScriptError:function(e){var t=y(e);return o(t.id)?void 0:m(C("scripterror","Script error for: "+t.id,e,[t.id]))}},k.require=k.makeRequire(),k}var e,x,y,D,I,E,N,J,r,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},s={},R=[],M=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(G(requirejs))return;s=requirejs,requirejs=void 0}"undefined"!=typeof require&&!G(require)&&(s=require,require=void 0),e=requirejs=function(t,a,i,r){var o,s="_";return!H(t)&&"string"!=typeof t&&(o=t,H(a)?(t=a,a=i,i=r):t=[]),o&&o.context&&(s=o.context),(r=n(F,s))||(r=F[s]=e.s.newContext(s)),o&&r.configure(o),r.require(t,a,i)},e.config=function(t){return e(t)},e.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=e),e.version="2.1.19",e.jsExtRegExp=/^\/|:|\?|\.js$/,e.isBrowser=z,x=e.s={contexts:F,newContext:ga},e({}),v(["toUrl","undef","defined","specified"],function(t){e[t]=function(){var e=F._;return e.require[t].apply(e,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),e.onError=ca,e.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},e.load=function(t,n,a){var i,r=t&&t.config||{};if(z)return i=e.createNode(r,n,a),r.onNodeCreated&&r.onNodeCreated(i,r,n,a),i.setAttribute("data-requirecontext",t.contextName),i.setAttribute("data-requiremodule",n),!i.attachEvent||i.attachEvent.toString&&0>i.attachEvent.toString().indexOf("[native code")||Y?(i.addEventListener("load",t.onScriptLoad,!1),i.addEventListener("error",t.onScriptError,!1)):(M=!0,i.attachEvent("onreadystatechange",t.onScriptLoad)),i.src=a,J=i,D?y.insertBefore(i,D):y.appendChild(i),J=null,i;if(ea)try{importScripts(a),t.completeLoad(n)}catch(e){t.onError(C("importscripts","importScripts failed for "+n+" at "+a,e,[n]))}},z&&!s.skipDataMain&&T(document.getElementsByTagName("script"),function(t){return y||(y=t.parentNode),(I=t.getAttribute("data-main"))?(r=I,s.baseUrl||(E=r.split("/"),r=E.pop(),O=E.length?E.join("/")+"/":"./",s.baseUrl=O),r=r.replace(Q,""),e.jsExtRegExp.test(r)&&(r=I),s.deps=s.deps?s.deps.concat(r):[r],!0):void 0}),define=function(e,t,n){var a,i;"string"!=typeof e&&(n=t,t=e,e=null),H(t)||(n=t,t=null),!t&&G(n)&&(t=[],n.length&&(n.toString().replace(ka,"").replace(la,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),M&&((a=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(e){return"interactive"===e.readyState?N=e:void 0}),a=N),a&&(e||(e=a.getAttribute("data-requiremodule")),i=F[a.getAttribute("data-requirecontext")])),(i?i.defQueue:R).push([e,t,n])},define.amd={jQuery:!0},e.exec=function(b){return eval(b)},e(s)}}(this),define("requireLib",function(){}),function(){function e(e){function t(t,n,a,i,r,o){for(;r>=0&&o>r;r+=e){var s=i?i[r]:r;a=n(a,t[s],s,t)}return a}return function(n,a,i,r){a=y(a,r,4);var o=!T(n)&&v.keys(n),s=(o||n).length,l=e>0?0:s-1;return arguments.length<3&&(i=n[o?o[l]:l],l+=e),t(n,a,i,o,l,s)}}function t(e){return function(t,n,a){n=E(n,a);for(var i=D(t),r=e>0?0:i-1;r>=0&&i>r;r+=e)if(n(t[r],r,t))return r;return-1}}function n(e,t,n){return function(a,i,r){var o=0,s=D(a);if("number"==typeof r)e>0?o=r>=0?r:Math.max(r+s,o):s=r>=0?Math.min(r+1,s):r+s+1;else if(n&&r&&s)return r=n(a,i),a[r]===i?r:-1;if(i!==i)return r=t(d.call(a,o,s),v.isNaN),r>=0?r+o:-1;for(r=e>0?o:s-1;r>=0&&s>r;r+=e)if(a[r]===i)return r;return-1}}function a(e,t){var n=O.length,a=e.constructor,i=v.isFunction(a)&&a.prototype||s,r="constructor";for(v.has(e,r)&&!v.contains(t,r)&&t.push(r);n--;)r=O[n],r in e&&e[r]!==i[r]&&!v.contains(t,r)&&t.push(r)}var i=this,r=i._,o=Array.prototype,s=Object.prototype,l=Function.prototype,c=o.push,d=o.slice,u=s.toString,m=s.hasOwnProperty,p=Array.isArray,h=Object.keys,f=l.bind,g=Object.create,_=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):i._=v,v.VERSION="1.8.3";var y=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,i){return e.call(t,n,a,i)};case 4:return function(n,a,i,r){return e.call(t,n,a,i,r)}}return function(){return e.apply(t,arguments)}},E=function(e,t,n){return null==e?v.identity:v.isFunction(e)?y(e,t,n):v.isObject(e)?v.matcher(e):v.property(e)};v.iteratee=function(e,t){return E(e,t,1/0)};var b=function(e,t){return function(n){var a=arguments.length;if(2>a||null==n)return n;for(var i=1;a>i;i++)for(var r=arguments[i],o=e(r),s=o.length,l=0;s>l;l++){var c=o[l];t&&void 0!==n[c]||(n[c]=r[c])}return n}},N=function(e){if(!v.isObject(e))return{};if(g)return g(e);_.prototype=e;var t=new _;return _.prototype=null,t},w=function(e){return function(t){return null==t?void 0:t[e]}},k=Math.pow(2,53)-1,D=w("length"),T=function(e){var t=D(e);return"number"==typeof t&&t>=0&&k>=t};v.each=v.forEach=function(e,t,n){t=y(t,n);var a,i;if(T(e))for(a=0,i=e.length;i>a;a++)t(e[a],a,e);else{var r=v.keys(e);for(a=0,i=r.length;i>a;a++)t(e[r[a]],r[a],e)}return e},v.map=v.collect=function(e,t,n){t=E(t,n);for(var a=!T(e)&&v.keys(e),i=(a||e).length,r=Array(i),o=0;i>o;o++){var s=a?a[o]:o;r[o]=t(e[s],s,e)}return r},v.reduce=v.foldl=v.inject=e(1),v.reduceRight=v.foldr=e(-1),v.find=v.detect=function(e,t,n){var a;return a=T(e)?v.findIndex(e,t,n):v.findKey(e,t,n),void 0!==a&&-1!==a?e[a]:void 0},v.filter=v.select=function(e,t,n){var a=[];return t=E(t,n),v.each(e,function(e,n,i){t(e,n,i)&&a.push(e)}),a},v.reject=function(e,t,n){return v.filter(e,v.negate(E(t)),n)},v.every=v.all=function(e,t,n){t=E(t,n);for(var a=!T(e)&&v.keys(e),i=(a||e).length,r=0;i>r;r++){var o=a?a[r]:r;if(!t(e[o],o,e))return!1}return!0},v.some=v.any=function(e,t,n){t=E(t,n);for(var a=!T(e)&&v.keys(e),i=(a||e).length,r=0;i>r;r++){var o=a?a[r]:r;if(t(e[o],o,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,n,a){return T(e)||(e=v.values(e)),("number"!=typeof n||a)&&(n=0),v.indexOf(e,t,n)>=0},v.invoke=function(e,t){var n=d.call(arguments,2),a=v.isFunction(t);return v.map(e,function(e){var i=a?t:e[t];return null==i?i:i.apply(e,n)})},v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,n){var a,i,r=-1/0,o=-1/0;if(null==t&&null!=e){e=T(e)?e:v.values(e);for(var s=0,l=e.length;l>s;s++)a=e[s],a>r&&(r=a)}else t=E(t,n),v.each(e,function(e,n,a){i=t(e,n,a),(i>o||i===-1/0&&r===-1/0)&&(r=e,o=i)});return r},v.min=function(e,t,n){var a,i,r=1/0,o=1/0;if(null==t&&null!=e){e=T(e)?e:v.values(e);for(var s=0,l=e.length;l>s;s++)a=e[s],r>a&&(r=a)}else t=E(t,n),v.each(e,function(e,n,a){i=t(e,n,a),(o>i||1/0===i&&1/0===r)&&(r=e,o=i)});return r},v.shuffle=function(e){for(var t,n=T(e)?e:v.values(e),a=n.length,i=Array(a),r=0;a>r;r++)t=v.random(0,r),t!==r&&(i[r]=i[t]),i[t]=n[r];return i},v.sample=function(e,t,n){return null==t||n?(T(e)||(e=v.values(e)),e[v.random(e.length-1)]):v.shuffle(e).slice(0,Math.max(0,t))},v.sortBy=function(e,t,n){return t=E(t,n),v.pluck(v.map(e,function(e,n,a){return{value:e,index:n,criteria:t(e,n,a)}}).sort(function(e,t){var n=e.criteria,a=t.criteria;if(n!==a){if(n>a||void 0===n)return 1;if(a>n||void 0===a)return-1}return e.index-t.index}),"value")};var x=function(e){return function(t,n,a){var i={};return n=E(n,a),v.each(t,function(a,r){var o=n(a,r,t);e(i,a,o)}),i}};v.groupBy=x(function(e,t,n){v.has(e,n)?e[n].push(t):e[n]=[t]}),v.indexBy=x(function(e,t,n){e[n]=t}),v.countBy=x(function(e,t,n){v.has(e,n)?e[n]++:e[n]=1}),v.toArray=function(e){return e?v.isArray(e)?d.call(e):T(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:T(e)?e.length:v.keys(e).length},v.partition=function(e,t,n){t=E(t,n);var a=[],i=[];return v.each(e,function(e,n,r){(t(e,n,r)?a:i).push(e)}),[a,i]},v.first=v.head=v.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},v.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},v.compact=function(e){return v.filter(e,v.identity)};var C=function(e,t,n,a){for(var i=[],r=0,o=a||0,s=D(e);s>o;o++){var l=e[o];if(T(l)&&(v.isArray(l)||v.isArguments(l))){t||(l=C(l,t,n));var c=0,d=l.length;for(i.length+=d;d>c;)i[r++]=l[c++]}else n||(i[r++]=l)}return i};v.flatten=function(e,t){return C(e,t,!1)},v.without=function(e){return v.difference(e,d.call(arguments,1))},v.uniq=v.unique=function(e,t,n,a){v.isBoolean(t)||(a=n,n=t,t=!1),null!=n&&(n=E(n,a));for(var i=[],r=[],o=0,s=D(e);s>o;o++){var l=e[o],c=n?n(l,o,e):l;t?(o&&r===c||i.push(l),r=c):n?v.contains(r,c)||(r.push(c),i.push(l)):v.contains(i,l)||i.push(l)}return i},v.union=function(){return v.uniq(C(arguments,!0,!0))},v.intersection=function(e){for(var t=[],n=arguments.length,a=0,i=D(e);i>a;a++){var r=e[a];if(!v.contains(t,r)){for(var o=1;n>o&&v.contains(arguments[o],r);o++);o===n&&t.push(r)}}return t},v.difference=function(e){var t=C(arguments,!0,!0,1);return v.filter(e,function(e){return!v.contains(t,e)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(e){for(var t=e&&v.max(e,D).length||0,n=Array(t),a=0;t>a;a++)n[a]=v.pluck(e,a);return n},v.object=function(e,t){for(var n={},a=0,i=D(e);i>a;a++)t?n[e[a]]=t[a]:n[e[a][0]]=e[a][1];return n},v.findIndex=t(1),v.findLastIndex=t(-1),v.sortedIndex=function(e,t,n,a){n=E(n,a,1);for(var i=n(t),r=0,o=D(e);o>r;){var s=Math.floor((r+o)/2);n(e[s])<i?r=s+1:o=s}return r},v.indexOf=n(1,v.findIndex,v.sortedIndex),v.lastIndexOf=n(-1,v.findLastIndex),v.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var a=Math.max(Math.ceil((t-e)/n),0),i=Array(a),r=0;a>r;r++,e+=n)i[r]=e;return i};var M=function(e,t,n,a,i){if(!(a instanceof t))return e.apply(n,i);var r=N(e.prototype),o=e.apply(r,i);return v.isObject(o)?o:r};v.bind=function(e,t){if(f&&e.bind===f)return f.apply(e,d.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),a=function(){return M(e,a,t,this,n.concat(d.call(arguments)))};return a},v.partial=function(e){var t=d.call(arguments,1),n=function(){for(var a=0,i=t.length,r=Array(i),o=0;i>o;o++)r[o]=t[o]===v?arguments[a++]:t[o];for(;a<arguments.length;)r.push(arguments[a++]);return M(e,n,this,this,r)};return n},v.bindAll=function(e){var t,n,a=arguments.length;if(1>=a)throw new Error("bindAll must be passed function names");for(t=1;a>t;t++)n=arguments[t],e[n]=v.bind(e[n],e);return e},v.memoize=function(e,t){var n=function(a){var i=n.cache,r=""+(t?t.apply(this,arguments):a);return v.has(i,r)||(i[r]=e.apply(this,arguments)),i[r]};return n.cache={},n},v.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,n){var a,i,r,o=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:v.now(),o=null,r=e.apply(a,i),o||(a=i=null)};return function(){var c=v.now();s||n.leading!==!1||(s=c);var d=t-(c-s);return a=this,i=arguments,0>=d||d>t?(o&&(clearTimeout(o),o=null),s=c,r=e.apply(a,i),o||(a=i=null)):o||n.trailing===!1||(o=setTimeout(l,d)),r}},v.debounce=function(e,t,n){var a,i,r,o,s,l=function(){var c=v.now()-o;t>c&&c>=0?a=setTimeout(l,t-c):(a=null,n||(s=e.apply(r,i),a||(r=i=null)))};return function(){r=this,i=arguments,o=v.now();var c=n&&!a;return a||(a=setTimeout(l,t)),c&&(s=e.apply(r,i),r=i=null),s}},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,a=e[t].apply(this,arguments);n--;)a=e[n].call(this,a);return a}},v.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},v.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},v.once=v.partial(v.before,2);var S=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(e){if(!v.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)v.has(e,n)&&t.push(n);return S&&a(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var n in e)t.push(n);return S&&a(e,t),t},v.values=function(e){for(var t=v.keys(e),n=t.length,a=Array(n),i=0;n>i;i++)a[i]=e[t[i]];return a},v.mapObject=function(e,t,n){t=E(t,n);for(var a,i=v.keys(e),r=i.length,o={},s=0;r>s;s++)a=i[s],o[a]=t(e[a],a,e);return o},v.pairs=function(e){for(var t=v.keys(e),n=t.length,a=Array(n),i=0;n>i;i++)a[i]=[t[i],e[t[i]]];return a},v.invert=function(e){for(var t={},n=v.keys(e),a=0,i=n.length;i>a;a++)t[e[n[a]]]=n[a];return t},v.functions=v.methods=function(e){var t=[];for(var n in e)v.isFunction(e[n])&&t.push(n);return t.sort()},v.extend=b(v.allKeys),v.extendOwn=v.assign=b(v.keys),v.findKey=function(e,t,n){t=E(t,n);for(var a,i=v.keys(e),r=0,o=i.length;o>r;r++)if(a=i[r],t(e[a],a,e))return a},v.pick=function(e,t,n){var a,i,r={},o=e;if(null==o)return r;v.isFunction(t)?(i=v.allKeys(o),a=y(t,n)):(i=C(arguments,!1,!1,1),a=function(e,t,n){return t in n},o=Object(o));for(var s=0,l=i.length;l>s;s++){var c=i[s],d=o[c];a(d,c,o)&&(r[c]=d)}return r},v.omit=function(e,t,n){if(v.isFunction(t))t=v.negate(t);else{var a=v.map(C(arguments,!1,!1,1),String);t=function(e,t){return!v.contains(a,t)}}return v.pick(e,t,n)},v.defaults=b(v.allKeys,!0),v.create=function(e,t){var n=N(e);return t&&v.extendOwn(n,t),n},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var n=v.keys(t),a=n.length;if(null==e)return!a;for(var i=Object(e),r=0;a>r;r++){var o=n[r];if(t[o]!==i[o]||!(o in i))return!1}return!0};var I=function(e,t,n,a){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var i=u.call(e);if(i!==u.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var r="[object Array]"===i;if(!r){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(v.isFunction(o)&&o instanceof o&&v.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],a=a||[];for(var l=n.length;l--;)if(n[l]===e)return a[l]===t;if(n.push(e),a.push(t),r){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!I(e[l],t[l],n,a))return!1}else{var c,d=v.keys(e);if(l=d.length,v.keys(t).length!==l)return!1;for(;l--;)if(c=d[l],!v.has(t,c)||!I(e[c],t[c],n,a))return!1}return n.pop(),a.pop(),!0};v.isEqual=function(e,t){return I(e,t)},v.isEmpty=function(e){return null==e||(T(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length)},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=p||function(e){return"[object Array]"===u.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return v.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&e!==+e},v.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===u.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){return null!=e&&m.call(e,t)},v.noConflict=function(){return i._=r,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=w,v.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,n){var a=Array(Math.max(0,e));t=y(t,n,1);for(var i=0;e>i;i++)a[i]=t(i);return a},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var $={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},A=v.invert($),P=function(e){var t=function(t){return e[t]},n="(?:"+v.keys(e).join("|")+")",a=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,a.test(e)?e.replace(i,t):e}};v.escape=P($),v.unescape=P(A),v.result=function(e,t,n){var a=null==e?void 0:e[t];return void 0===a&&(a=n),v.isFunction(a)?a.call(e):a};var L=0;v.uniqueId=function(e){var t=++L+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,j=function(e){return"\\"+U[e]};v.template=function(e,t,n){!t&&n&&(t=n),t=v.defaults({},t,v.templateSettings);var a=RegExp([(t.escape||R).source,(t.interpolate||R).source,(t.evaluate||R).source].join("|")+"|$","g"),i=0,r="__p+='";e.replace(a,function(t,n,a,o,s){return r+=e.slice(i,s).replace(q,j),i=s+t.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":a?r+="'+\n((__t=("+a+"))==null?'':__t)+\n'":o&&(r+="';\n"+o+"\n__p+='"),t}),r+="';\n",t.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var o=new Function(t.variable||"obj","_",r)}catch(e){throw e.source=r,e}var s=function(e){return o.call(this,e,v)},l=t.variable||"obj";return s.source="function("+l+"){\n"+r+"}",s},v.chain=function(e){var t=v(e);return t._chain=!0,t};var H=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var n=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),H(this,n.apply(v,e))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];v.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],H(this,n)}}),v.each(["concat","join","slice"],function(e){var t=o[e];v.prototype[e]=function(){return H(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}.call(this),!function(e){var t="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,a,i){t.Backbone=e(t,i,n,a)});else if("undefined"!=typeof exports){var n,a=require("underscore");try{n=require("jquery")}catch(e){}e(t,exports,a,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(function(e,t,n,a){var i=e.Backbone,r=[].slice;t.VERSION="1.2.1",t.$=a,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=function(e,t,a){switch(e){case 1:return function(){return n[t](this[a])};case 2:return function(e){return n[t](this[a],e)};case 3:
return function(e,i){return n[t](this[a],e,i)};case 4:return function(e,i,r){return n[t](this[a],e,i,r)};default:return function(){var e=r.call(arguments);return e.unshift(this[a]),n[t].apply(n,e)}}},s=function(e,t,a){n.each(t,function(t,i){n[i]&&(e.prototype[i]=o(t,i,a))})},l=t.Events={},c=/\s+/,d=function(e,t,a,i,r){var o,s=0;if(a&&"object"==typeof a){void 0!==i&&"context"in r&&void 0===r.context&&(r.context=i);for(o=n.keys(a);s<o.length;s++)t=e(t,o[s],a[o[s]],r)}else if(a&&c.test(a))for(o=a.split(c);s<o.length;s++)t=e(t,o[s],i,r);else t=e(t,a,i,r);return t};l.on=function(e,t,n){return u(this,e,t,n)};var u=function(e,t,n,a,i){if(e._events=d(m,e._events||{},t,n,{context:a,ctx:e,listening:i}),i){var r=e._listeners||(e._listeners={});r[i.id]=i}return e};l.listenTo=function(e,t,a){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),o=r[i];if(!o){var s=this._listenId||(this._listenId=n.uniqueId("l"));o=r[i]={obj:e,objId:i,id:s,listeningTo:r,count:0}}return u(e,t,a,this,o),this};var m=function(e,t,n,a){if(n){var i=e[t]||(e[t]=[]),r=a.context,o=a.ctx,s=a.listening;s&&s.count++,i.push({callback:n,context:r,ctx:r||o,listening:s})}return e};l.off=function(e,t,n){return this._events?(this._events=d(p,this._events,e,t,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(e,t,a){var i=this._listeningTo;if(!i)return this;for(var r=e?[e._listenId]:n.keys(i),o=0;o<r.length;o++){var s=i[r[o]];if(!s)break;s.obj.off(t,a,this)}return n.isEmpty(i)&&(this._listeningTo=void 0),this};var p=function(e,t,a,i){if(e){var r,o=0,s=i.context,l=i.listeners;if(t||a||s){for(var c=t?[t]:n.keys(e);o<c.length;o++){t=c[o];var d=e[t];if(!d)break;for(var u=[],m=0;m<d.length;m++){var p=d[m];a&&a!==p.callback&&a!==p.callback._callback||s&&s!==p.context?u.push(p):(r=p.listening,r&&0===--r.count&&(delete l[r.id],delete r.listeningTo[r.objId]))}u.length?e[t]=u:delete e[t]}return n.size(e)?e:void 0}for(var h=n.keys(l);o<h.length;o++)r=l[h[o]],delete l[r.id],delete r.listeningTo[r.objId]}};l.once=function(e,t,a){var i=d(h,{},e,t,n.bind(this.off,this));return this.on(i,void 0,a)},l.listenToOnce=function(e,t,a){var i=d(h,{},t,a,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var h=function(e,t,a,i){if(a){var r=e[t]=n.once(function(){i(t,r),a.apply(this,arguments)});r._callback=a}return e};l.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),a=0;t>a;a++)n[a]=arguments[a+1];return d(f,this._events,e,void 0,n),this};var f=function(e,t,n,a){if(e){var i=e[t],r=e.all;i&&r&&(r=r.slice()),i&&g(i,a),r&&g(r,[t].concat(a))}return e},g=function(e,t){var n,a=-1,i=e.length,r=t[0],o=t[1],s=t[2];switch(t.length){case 0:for(;++a<i;)(n=e[a]).callback.call(n.ctx);return;case 1:for(;++a<i;)(n=e[a]).callback.call(n.ctx,r);return;case 2:for(;++a<i;)(n=e[a]).callback.call(n.ctx,r,o);return;case 3:for(;++a<i;)(n=e[a]).callback.call(n.ctx,r,o,s);return;default:for(;++a<i;)(n=e[a]).callback.apply(n.ctx,t);return}};l.bind=l.on,l.unbind=l.off,n.extend(t,l);var _=t.Model=function(e,t){var a=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(a=this.parse(a,t)||{}),a=n.defaults({},a,n.result(this,"defaults")),this.set(a,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(_.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,a){if(null==e)return this;var i;if("object"==typeof e?(i=e,a=t):(i={})[e]=t,a||(a={}),!this._validate(i,a))return!1;var r=a.unset,o=a.silent,s=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,d=this.changed,u=this._previousAttributes;this.idAttribute in i&&(this.id=i[this.idAttribute]);for(var m in i)t=i[m],n.isEqual(c[m],t)||s.push(m),n.isEqual(u[m],t)?delete d[m]:d[m]=t,r?delete c[m]:c[m]=t;if(!o){s.length&&(this._pending=a);for(var p=0;p<s.length;p++)this.trigger("change:"+s[p],this,c[s[p]],a)}if(l)return this;if(!o)for(;this._pending;)a=this._pending,this._pending=!1,this.trigger("change",this,a);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var a in this.attributes)t[a]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,a={};for(var i in e){var r=e[i];n.isEqual(t[i],r)||(a[i]=r)}return!!n.size(a)&&a},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,a=e.success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;return!!t.set(i,e)&&(a&&a.call(e.context,t,n,e),void t.trigger("sync",t,n,e))},q(this,e),this.sync("read",this,e)},save:function(e,t,a){var i;null==e||"object"==typeof e?(i=e,a=t):(i={})[e]=t,a=n.extend({validate:!0,parse:!0},a);var r=a.wait;if(i&&!r){if(!this.set(i,a))return!1}else if(!this._validate(i,a))return!1;var o=this,s=a.success,l=this.attributes;a.success=function(e){o.attributes=l;var t=a.parse?o.parse(e,a):e;return r&&(t=n.extend({},i,t)),!(t&&!o.set(t,a))&&(s&&s.call(a.context,o,e,a),void o.trigger("sync",o,e,a))},q(this,a),i&&r&&(this.attributes=n.extend({},l,i));var c=this.isNew()?"create":a.patch?"patch":"update";"patch"!==c||a.attrs||(a.attrs=i);var d=this.sync(c,this,a);return this.attributes=l,d},destroy:function(e){e=e?n.clone(e):{};var t=this,a=e.success,i=e.wait,r=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&r(),a&&a.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var o=!1;return this.isNew()?n.defer(e.success):(q(this,e),o=this.sync("delete",this,e)),i||r(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||U();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.defaults({validate:!0},e))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var a=this.validationError=this.validate(e,t)||null;return!a||(this.trigger("invalid",this,a,n.extend(t,{validationError:a})),!1)}});var v={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};s(_,v,"attributes");var y=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},E={add:!0,remove:!0,merge:!0},b={add:!0,remove:!1};n.extend(y.prototype,l,{model:_,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,b))},remove:function(e,t){t=n.extend({},t);var a=!n.isArray(e);e=a?[e]:n.clone(e);var i=this._removeModels(e,t);return!t.silent&&i&&this.trigger("update",this,t),a?i[0]:i},set:function(e,t){t=n.defaults({},t,E),t.parse&&!this._isModel(e)&&(e=this.parse(e,t));var a=!n.isArray(e);e=a?e?[e]:[]:e.slice();var i,r,o,s,l,c=t.at;null!=c&&(c=+c),0>c&&(c+=this.length+1);for(var d=this.comparator&&null==c&&t.sort!==!1,u=n.isString(this.comparator)?this.comparator:null,m=[],p=[],h={},f=t.add,g=t.merge,_=t.remove,v=!(d||!f||!_)&&[],y=!1,b=0;b<e.length;b++){if(o=e[b],s=this.get(o))_&&(h[s.cid]=!0),g&&o!==s&&(o=this._isModel(o)?o.attributes:o,t.parse&&(o=s.parse(o,t)),s.set(o,t),d&&!l&&s.hasChanged(u)&&(l=!0)),e[b]=s;else if(f){if(r=e[b]=this._prepareModel(o,t),!r)continue;m.push(r),this._addReference(r,t)}r=s||r,r&&(i=this.modelId(r.attributes),!v||!r.isNew()&&h[i]||(v.push(r),y=y||!this.models[b]||r.cid!==this.models[b].cid),h[i]=!0)}if(_){for(var b=0;b<this.length;b++)h[(r=this.models[b]).cid]||p.push(r);p.length&&this._removeModels(p,t)}if(m.length||y)if(d&&(l=!0),this.length+=m.length,null!=c)for(var b=0;b<m.length;b++)this.models.splice(c+b,0,m[b]);else{v&&(this.models.length=0);for(var N=v||m,b=0;b<N.length;b++)this.models.push(N[b])}if(l&&this.sort({silent:!0}),!t.silent){for(var w=null!=c?n.clone(t):t,b=0;b<m.length;b++)null!=c&&(w.index=c+b),(r=m[b]).trigger("add",r,this,w);(l||y)&&this.trigger("sort",this,t),(m.length||p.length)&&this.trigger("update",this,t)}return a?e[0]:e},reset:function(e,t){t=t?n.clone(t):{};for(var a=0;a<this.models.length;a++)this._removeReference(this.models[a],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return r.apply(this.models,arguments)},get:function(e){if(null!=e){var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]}},at:function(e){return 0>e&&(e+=this.length),this.models[e]},where:function(e,t){var a=n.matches(e);return this[t?"find":"filter"](function(e){return a(e.attributes)})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,a=this;return e.success=function(n){var i=e.reset?"reset":"set";a[i](n,e),t&&t.call(e.context,a,n,e),a.trigger("sync",a,n,e)},q(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var a=t.wait;if(e=this._prepareModel(e,t),!e)return!1;a||this.add(e,t);var i=this,r=t.success;return t.success=function(e,t,n){a&&i.add(e,n),r&&r.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var a=new this.model(e,t);return a.validationError?(this.trigger("invalid",this,a.validationError,t),!1):a},_removeModels:function(e,t){for(var n=[],a=0;a<e.length;a++){var i=this.get(e[a]);if(i){var r=this.indexOf(i);this.models.splice(r,1),this.length--,t.silent||(t.index=r,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}}return!!n.length&&n},_isModel:function(e){return e instanceof _},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,a){if("add"!==e&&"remove"!==e||n===this){if("destroy"===e&&this.remove(t,a),"change"===e){var i=this.modelId(t.previousAttributes()),r=this.modelId(t.attributes);i!==r&&(null!=i&&delete this._byId[i],null!=r&&(this._byId[r]=t))}this.trigger.apply(this,arguments)}}});var N={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};s(y,N,"models");var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){n[e]&&(y.prototype[e]=function(t,a){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,a)})});var k=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,T)),this._ensureElement(),this.initialize.apply(this,arguments)},D=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];n.extend(k.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var a=e[t];if(n.isFunction(a)||(a=this[a]),a){var i=t.match(D);this.delegate(i[1],i[2],n.bind(a,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,a,i){var r=x[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:r,dataType:"json"};if(i.url||(o.url=n.result(a,"url")||U()),null!=i.data||!a||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||a.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",i.emulateJSON&&(o.data._method=r);var s=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1);var l=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,l&&l.call(i.context,e,t,n)};var c=i.xhr=t.ajax(n.extend(o,i));return a.trigger("request",a,c,i),c};var x={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,O=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,l,{initialize:function(){},route:function(e,a,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(a)&&(i=a,a=""),i||(i=this[a]);var r=this;return t.history.route(e,function(n){var o=r._extractParameters(e,n);r.execute(i,o,a)!==!1&&(r.trigger.apply(r,["route:"+a].concat(o)),r.trigger("route",a,o),t.history.trigger("route",r,a,o))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(I,"\\$&").replace(M,"(?:$1)?").replace(S,function(e,t){return t?e:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var a=e.exec(t).slice(1);return n.map(a,function(e,t){return t===a.length-1?e||null:e?decodeURIComponent(e):null})}});var $=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,L=/#.*$/;$.started=!1,n.extend($.prototype,l,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(A,"")},start:function(e){if($.started)throw new Error("Backbone.history has already been started");if($.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(P,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var a=document.body,i=a.insertBefore(this.iframe,a.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var r=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};return this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),$.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t!==this.fragment&&(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0}))},navigate:function(e,t){if(!$.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;(""===e||"?"===e.charAt(0))&&(n=n.slice(0,-1)||"/");var a=n+e;if(e=this.decodeFragment(e.replace(L,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,a);else{if(!this._wantsHashChange)return this.location.assign(a);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var a=e.href.replace(/(javascript:|#).*$/,"");e.replace(a+"#"+t)}else e.hash="#"+t}}),t.history=new $;var R=function(e,t){var a,i=this;a=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(a,i,t);var r=function(){this.constructor=a};return r.prototype=i.prototype,a.prototype=new r,e&&n.extend(a.prototype,e),a.__super__=i.prototype,a};_.extend=y.extend=C.extend=k.extend=$.extend=R;var U=function(){throw new Error('A "url" property or function must be specified')},q=function(e,t){var n=t.error;t.error=function(a){n&&n.call(t.context,e,a,t),e.trigger("error",e,a,t)}};return t}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("react",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.React=e()}}(function(){return function e(t,n,a){function i(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return i(n?n:e)},d,d.exports,e,t,n,a)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<a.length;o++)i(a[o]);return i}({1:[function(e,t,n){"use strict";var a=e(25),i=e(31),r=e(42),o=e(34),s=e(69),l=e(98),c=e(100),d=e(127),u=e(122),m=e(170);i.addons={CSSTransitionGroup:o,LinkedStateMixin:a,PureRenderMixin:r,TransitionGroup:l,batchedUpdates:c.batchedUpdates,classSet:d,cloneWithProps:u,createFragment:s.create,update:m},i.addons.Perf=e(61),i.addons.TestUtils=e(95),t.exports=i},{100:100,122:122,127:127,170:170,25:25,31:31,34:34,42:42,61:61,69:69,95:95,98:98}],2:[function(e,t,n){"use strict";var a=e(134),i={componentDidMount:function(){this.props.autoFocus&&a(this.getDOMNode())}};t.exports=i},{134:134}],3:[function(e,t,n){"use strict";function a(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function i(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function r(e){switch(e){case C.topCompositionStart:return M.compositionStart;case C.topCompositionEnd:return M.compositionEnd;case C.topCompositionUpdate:return M.compositionUpdate}}function o(e,t){return e===C.topKeyDown&&t.keyCode===b}function s(e,t){switch(e){case C.topKeyUp:return-1!==E.indexOf(t.keyCode);case C.topKeyDown:return t.keyCode!==b;case C.topKeyPress:case C.topMouseDown:case C.topBlur:return!0;default:return!1}}function l(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function c(e,t,n,a){var i,c;if(N?i=r(e):O?s(e,a)&&(i=M.compositionEnd):o(e,a)&&(i=M.compositionStart),!i)return null;D&&(O||i!==M.compositionStart?i===M.compositionEnd&&O&&(c=O.getData()):O=g.getPooled(t));var d=_.getPooled(i,n,a);if(c)d.data=c;else{var u=l(a);null!==u&&(d.data=u)}return h.accumulateTwoPhaseDispatches(d),d}function d(e,t){switch(e){case C.topCompositionEnd:return l(t);case C.topKeyPress:var n=t.which;return n!==T?null:(S=!0,x);case C.topTextInput:var a=t.data;return a===x&&S?null:a;default:return null}}function u(e,t){if(O){if(e===C.topCompositionEnd||s(e,t)){var n=O.getData();return g.release(O),O=null,n}return null}switch(e){case C.topPaste:return null;case C.topKeyPress:return t.which&&!i(t)?String.fromCharCode(t.which):null;case C.topCompositionEnd:return D?null:t.data;default:return null}}function m(e,t,n,a){var i;if(i=k?d(e,a):u(e,a),!i)return null;var r=v.getPooled(M.beforeInput,n,a);return r.data=i,h.accumulateTwoPhaseDispatches(r),r}var p=e(16),h=e(21),f=e(22),g=e(23),_=e(106),v=e(110),y=e(157),E=[9,13,27,32],b=229,N=f.canUseDOM&&"CompositionEvent"in window,w=null;f.canUseDOM&&"documentMode"in document&&(w=document.documentMode);var k=f.canUseDOM&&"TextEvent"in window&&!w&&!a(),D=f.canUseDOM&&(!N||w&&w>8&&11>=w),T=32,x=String.fromCharCode(T),C=p.topLevelTypes,M={beforeInput:{phasedRegistrationNames:{bubbled:y({onBeforeInput:null}),captured:y({onBeforeInputCapture:null})},dependencies:[C.topCompositionEnd,C.topKeyPress,C.topTextInput,C.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:y({onCompositionEnd:null}),captured:y({onCompositionEndCapture:null})},dependencies:[C.topBlur,C.topCompositionEnd,C.topKeyDown,C.topKeyPress,C.topKeyUp,C.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:y({onCompositionStart:null}),captured:y({onCompositionStartCapture:null})},dependencies:[C.topBlur,C.topCompositionStart,C.topKeyDown,C.topKeyPress,C.topKeyUp,C.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:y({onCompositionUpdate:null}),captured:y({onCompositionUpdateCapture:null})},dependencies:[C.topBlur,C.topCompositionUpdate,C.topKeyDown,C.topKeyPress,C.topKeyUp,C.topMouseDown]}},S=!1,O=null,I={eventTypes:M,extractEvents:function(e,t,n,a){return[c(e,t,n,a),m(e,t,n,a)]}};t.exports=I},{106:106,110:110,157:157,16:16,21:21,22:22,23:23}],4:[function(e,t,n){var a=e(150),i={addClass:function(e,t){return a(!/\s/.test(t),'CSSCore.addClass takes only a single class name. "%s" contains multiple classes.',t),t&&(e.classList?e.classList.add(t):i.hasClass(e,t)||(e.className=e.className+" "+t)),e},removeClass:function(e,t){return a(!/\s/.test(t),'CSSCore.removeClass takes only a single class name. "%s" contains multiple classes.',t),t&&(e.classList?e.classList.remove(t):i.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,n){return(n?i.addClass:i.removeClass)(e,t)},hasClass:function(e,t){return a(!/\s/.test(t),"CSS.hasClass takes only a single class name."),e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}};t.exports=i},{150:150}],5:[function(e,t,n){"use strict";function a(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var i={boxFlex:!0,boxFlexGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},r=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(e){r.forEach(function(t){i[a(t,e)]=i[e]})});var o={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},s={isUnitlessNumber:i,shorthandPropertyExpansions:o};t.exports=s},{}],6:[function(e,t,n){"use strict";var a=e(5),i=e(22),r=e(121),o=e(128),s=e(148),l=e(159),c=e(171),d=l(function(e){return s(e)}),u="cssFloat";i.canUseDOM&&void 0===document.documentElement.style.cssFloat&&(u="styleFloat");var m=/^(?:webkit|moz|o)[A-Z]/,p=/;\s*$/,h={},f={},g=function(e){h.hasOwnProperty(e)&&h[e]||(h[e]=!0,c(!1,"Unsupported style property %s. Did you mean %s?",e,r(e)))},_=function(e){h.hasOwnProperty(e)&&h[e]||(h[e]=!0,c(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?",e,e.charAt(0).toUpperCase()+e.slice(1)))},v=function(e,t){f.hasOwnProperty(t)&&f[t]||(f[t]=!0,c(!1,'Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.',e,t.replace(p,"")))},y=function(e,t){e.indexOf("-")>-1?g(e):m.test(e)?_(e):p.test(t)&&v(e,t)},E={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];y(n,a),null!=a&&(t+=d(n)+":",t+=o(n,a)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var i in t)if(t.hasOwnProperty(i)){y(i,t[i]);var r=o(i,t[i]);if("float"===i&&(i=u),r)n[i]=r;else{var s=a.shorthandPropertyExpansions[i];if(s)for(var l in s)n[l]="";else n[i]=""}}}};t.exports=E},{121:121,128:128,148:148,159:159,171:171,22:22,5:5}],7:[function(e,t,n){"use strict";function a(){this._callbacks=null,this._contexts=null}var i=e(30),r=e(29),o=e(150);r(a.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){o(e.length===t.length,"Mismatched list of contexts in callback queue"),this._callbacks=null,this._contexts=null;for(var n=0,a=e.length;a>n;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),i.addPoolingTo(a),t.exports=a},{150:150,29:29,30:30}],8:[function(e,t,n){"use strict";function a(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function i(e){var t=w.getPooled(C.change,S,e);E.accumulateTwoPhaseDispatches(t),N.batchedUpdates(r,t)}function r(e){y.enqueueEvents(e),y.processEventQueue()}function o(e,t){M=e,S=t,M.attachEvent("onchange",i)}function s(){M&&(M.detachEvent("onchange",i),M=null,S=null)}function l(e,t,n){return e===x.topChange?n:void 0}function c(e,t,n){e===x.topFocus?(s(),o(t,n)):e===x.topBlur&&s()}function d(e,t){M=e,S=t,O=e.value,I=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(M,"value",P),M.attachEvent("onpropertychange",m)}function u(){M&&(delete M.value,M.detachEvent("onpropertychange",m),M=null,S=null,O=null,I=null)}function m(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==O&&(O=t,i(e))}}function p(e,t,n){return e===x.topInput?n:void 0}function h(e,t,n){e===x.topFocus?(u(),d(t,n)):e===x.topBlur&&u()}function f(e,t,n){return e!==x.topSelectionChange&&e!==x.topKeyUp&&e!==x.topKeyDown||!M||M.value===O?void 0:(O=M.value,S)}function g(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function _(e,t,n){return e===x.topClick?n:void 0}var v=e(16),y=e(18),E=e(21),b=e(22),N=e(100),w=e(108),k=e(151),D=e(153),T=e(157),x=v.topLevelTypes,C={change:{phasedRegistrationNames:{bubbled:T({onChange:null}),captured:T({onChangeCapture:null})},dependencies:[x.topBlur,x.topChange,x.topClick,x.topFocus,x.topInput,x.topKeyDown,x.topKeyUp,x.topSelectionChange]}},M=null,S=null,O=null,I=null,$=!1;b.canUseDOM&&($=k("change")&&(!("documentMode"in document)||document.documentMode>8));var A=!1;b.canUseDOM&&(A=k("input")&&(!("documentMode"in document)||document.documentMode>9));var P={get:function(){return I.get.call(this)},set:function(e){O=""+e,I.set.call(this,e)}},L={eventTypes:C,extractEvents:function(e,t,n,i){var r,o;if(a(t)?$?r=l:o=c:D(t)?A?r=p:(r=f,o=h):g(t)&&(r=_),r){var s=r(e,t,n);if(s){var d=w.getPooled(C.change,s,i);return E.accumulateTwoPhaseDispatches(d),d}}o&&o(e,t,n)}};t.exports=L},{100:100,108:108,151:151,153:153,157:157,16:16,18:18,21:21,22:22}],9:[function(e,t,n){"use strict";var a=0,i={createReactRootIndex:function(){return a++}};t.exports=i},{}],10:[function(e,t,n){"use strict";function a(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var i=e(13),r=e(79),o=e(165),s=e(150),l={dangerouslyReplaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup,updateTextContent:o,
processUpdates:function(e,t){for(var n,l=null,c=null,d=0;d<e.length;d++)if(n=e[d],n.type===r.MOVE_EXISTING||n.type===r.REMOVE_NODE){var u=n.fromIndex,m=n.parentNode.childNodes[u],p=n.parentID;s(m,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",u,p),l=l||{},l[p]=l[p]||[],l[p][u]=m,c=c||[],c.push(m)}var h=i.dangerouslyRenderMarkup(t);if(c)for(var f=0;f<c.length;f++)c[f].parentNode.removeChild(c[f]);for(var g=0;g<e.length;g++)switch(n=e[g],n.type){case r.INSERT_MARKUP:a(n.parentNode,h[n.markupIndex],n.toIndex);break;case r.MOVE_EXISTING:a(n.parentNode,l[n.parentID][n.fromIndex],n.toIndex);break;case r.TEXT_CONTENT:o(n.parentNode,n.textContent);break;case r.REMOVE_NODE:}}};t.exports=l},{13:13,150:150,165:165,79:79}],11:[function(e,t,n){"use strict";function a(e,t){return(e&t)===t}var i=e(150),r={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},n=e.DOMAttributeNames||{},o=e.DOMPropertyNames||{},l=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var c in t){i(!s.isStandardName.hasOwnProperty(c),"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",c),s.isStandardName[c]=!0;var d=c.toLowerCase();if(s.getPossibleStandardName[d]=c,n.hasOwnProperty(c)){var u=n[c];s.getPossibleStandardName[u]=c,s.getAttributeName[c]=u}else s.getAttributeName[c]=d;s.getPropertyName[c]=o.hasOwnProperty(c)?o[c]:c,l.hasOwnProperty(c)?s.getMutationMethod[c]=l[c]:s.getMutationMethod[c]=null;var m=t[c];s.mustUseAttribute[c]=a(m,r.MUST_USE_ATTRIBUTE),s.mustUseProperty[c]=a(m,r.MUST_USE_PROPERTY),s.hasSideEffects[c]=a(m,r.HAS_SIDE_EFFECTS),s.hasBooleanValue[c]=a(m,r.HAS_BOOLEAN_VALUE),s.hasNumericValue[c]=a(m,r.HAS_NUMERIC_VALUE),s.hasPositiveNumericValue[c]=a(m,r.HAS_POSITIVE_NUMERIC_VALUE),s.hasOverloadedBooleanValue[c]=a(m,r.HAS_OVERLOADED_BOOLEAN_VALUE),i(!s.mustUseAttribute[c]||!s.mustUseProperty[c],"DOMProperty: Cannot require using both attribute and property: %s",c),i(s.mustUseProperty[c]||!s.hasSideEffects[c],"DOMProperty: Properties that have side effects must use property: %s",c),i(!!s.hasBooleanValue[c]+!!s.hasNumericValue[c]+!!s.hasOverloadedBooleanValue[c]<=1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",c)}}},o={},s={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,a=o[e];return a||(o[e]=a={}),t in a||(n=document.createElement(e),a[t]=n[t]),a[t]},injection:r};t.exports=s},{150:150}],12:[function(e,t,n){"use strict";function a(e,t){return null==t||i.hasBooleanValue[e]&&!t||i.hasNumericValue[e]&&isNaN(t)||i.hasPositiveNumericValue[e]&&1>t||i.hasOverloadedBooleanValue[e]&&t===!1}var i=e(11),r=e(163),o=e(171),s={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},l={},c=function(e){if(!(s.hasOwnProperty(e)&&s[e]||l.hasOwnProperty(e)&&l[e])){l[e]=!0;var t=e.toLowerCase(),n=i.isCustomAttribute(t)?t:i.getPossibleStandardName.hasOwnProperty(t)?i.getPossibleStandardName[t]:null;o(null==n,"Unknown DOM property %s. Did you mean %s?",e,n)}},d={createMarkupForID:function(e){return i.ID_ATTRIBUTE_NAME+"="+r(e)},createMarkupForProperty:function(e,t){if(i.isStandardName.hasOwnProperty(e)&&i.isStandardName[e]){if(a(e,t))return"";var n=i.getAttributeName[e];return i.hasBooleanValue[e]||i.hasOverloadedBooleanValue[e]&&t===!0?n:n+"="+r(t)}return i.isCustomAttribute(e)?null==t?"":e+"="+r(t):(c(e),null)},setValueForProperty:function(e,t,n){if(i.isStandardName.hasOwnProperty(t)&&i.isStandardName[t]){var r=i.getMutationMethod[t];if(r)r(e,n);else if(a(t,n))this.deleteValueForProperty(e,t);else if(i.mustUseAttribute[t])e.setAttribute(i.getAttributeName[t],""+n);else{var o=i.getPropertyName[t];i.hasSideEffects[t]&&""+e[o]==""+n||(e[o]=n)}}else i.isCustomAttribute(t)?null==n?e.removeAttribute(t):e.setAttribute(t,""+n):c(t)},deleteValueForProperty:function(e,t){if(i.isStandardName.hasOwnProperty(t)&&i.isStandardName[t]){var n=i.getMutationMethod[t];if(n)n(e,void 0);else if(i.mustUseAttribute[t])e.removeAttribute(i.getAttributeName[t]);else{var a=i.getPropertyName[t],r=i.getDefaultValueForProperty(e.nodeName,a);i.hasSideEffects[t]&&""+e[a]===r||(e[a]=r)}}else i.isCustomAttribute(t)?e.removeAttribute(t):c(t)}};t.exports=d},{11:11,163:163,171:171}],13:[function(e,t,n){"use strict";function a(e){return e.substring(1,e.indexOf(" "))}var i=e(22),r=e(126),o=e(129),s=e(142),l=e(150),c=/^(<[^ \/>]+)/,d="data-danger-index",u={dangerouslyRenderMarkup:function(e){l(i.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering.");for(var t,n={},u=0;u<e.length;u++)l(e[u],"dangerouslyRenderMarkup(...): Missing markup."),t=a(e[u]),t=s(t)?t:"*",n[t]=n[t]||[],n[t][u]=e[u];var m=[],p=0;for(t in n)if(n.hasOwnProperty(t)){var h,f=n[t];for(h in f)if(f.hasOwnProperty(h)){var g=f[h];f[h]=g.replace(c,"$1 "+d+'="'+h+'" ')}for(var _=r(f.join(""),o),v=0;v<_.length;++v){var y=_[v];y.hasAttribute&&y.hasAttribute(d)?(h=+y.getAttribute(d),y.removeAttribute(d),l(!m.hasOwnProperty(h),"Danger: Assigning to an already-occupied result index."),m[h]=y,p+=1):console.error("Danger: Discarding unexpected node:",y)}}return l(p===m.length,"Danger: Did not assign to every index of resultList."),l(m.length===e.length,"Danger: Expected markup to render %s nodes, but rendered %s.",e.length,m.length),m},dangerouslyReplaceNodeWithMarkup:function(e,t){l(i.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering."),l(t,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."),l("html"!==e.tagName.toLowerCase(),"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See React.renderToString().");var n=r(t,o)[0];e.parentNode.replaceChild(n,e)}};t.exports=u},{126:126,129:129,142:142,150:150,22:22}],14:[function(e,t,n){"use strict";var a=e(157),i=[a({ResponderEventPlugin:null}),a({SimpleEventPlugin:null}),a({TapEventPlugin:null}),a({EnterLeaveEventPlugin:null}),a({ChangeEventPlugin:null}),a({SelectEventPlugin:null}),a({BeforeInputEventPlugin:null}),a({AnalyticsEventPlugin:null}),a({MobileSafariClickEventPlugin:null})];t.exports=i},{157:157}],15:[function(e,t,n){"use strict";var a=e(16),i=e(21),r=e(112),o=e(77),s=e(157),l=a.topLevelTypes,c=o.getFirstReactDOM,d={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},u=[null,null],m={eventTypes:d,extractEvents:function(e,t,n,a){if(e===l.topMouseOver&&(a.relatedTarget||a.fromElement))return null;if(e!==l.topMouseOut&&e!==l.topMouseOver)return null;var s;if(t.window===t)s=t;else{var m=t.ownerDocument;s=m?m.defaultView||m.parentWindow:window}var p,h;if(e===l.topMouseOut?(p=t,h=c(a.relatedTarget||a.toElement)||s):(p=s,h=t),p===h)return null;var f=p?o.getID(p):"",g=h?o.getID(h):"",_=r.getPooled(d.mouseLeave,f,a);_.type="mouseleave",_.target=p,_.relatedTarget=h;var v=r.getPooled(d.mouseEnter,g,a);return v.type="mouseenter",v.target=h,v.relatedTarget=p,i.accumulateEnterLeaveDispatches(_,v,f,g),u[0]=_,u[1]=v,u}};t.exports=m},{112:112,157:157,16:16,21:21,77:77}],16:[function(e,t,n){"use strict";var a=e(156),i=a({bubbled:null,captured:null}),r=a({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),o={topLevelTypes:r,PropagationPhases:i};t.exports=o},{156:156}],17:[function(e,t,n){var a=e(129),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):(console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:a})},registerDefault:function(){}};t.exports=i},{129:129}],18:[function(e,t,n){"use strict";function a(){var e=m&&m.traverseTwoPhase&&m.traverseEnterLeave;l(e,"InstanceHandle not injected before use!")}var i=e(19),r=e(20),o=e(118),s=e(135),l=e(150),c={},d=null,u=function(e){if(e){var t=r.executeDispatch,n=i.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),r.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},m=null,p={injection:{injectMount:r.injection.injectMount,injectInstanceHandle:function(e){m=e,a()},getInstanceHandle:function(){return a(),m},injectEventPluginOrder:i.injectEventPluginOrder,injectEventPluginsByName:i.injectEventPluginsByName},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:function(e,t,n){l(!n||"function"==typeof n,"Expected %s listener to be a function, instead got type %s",t,typeof n);var a=c[t]||(c[t]={});a[e]=n},getListener:function(e,t){var n=c[t];return n&&n[e]},deleteListener:function(e,t){var n=c[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in c)delete c[t][e]},extractEvents:function(e,t,n,a){for(var r,s=i.plugins,l=0,c=s.length;c>l;l++){var d=s[l];if(d){var u=d.extractEvents(e,t,n,a);u&&(r=o(r,u))}}return r},enqueueEvents:function(e){e&&(d=o(d,e))},processEventQueue:function(){var e=d;d=null,s(e,u),l(!d,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented.")},__purge:function(){c={}},__getListenerBank:function(){return c}};t.exports=p},{118:118,135:135,150:150,19:19,20:20}],19:[function(e,t,n){"use strict";function a(){if(s)for(var e in l){var t=l[e],n=s.indexOf(e);if(o(n>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e),!c.plugins[n]){o(t.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e),c.plugins[n]=t;var a=t.eventTypes;for(var r in a)o(i(a[r],t,r),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",r,e)}}}function i(e,t,n){o(!c.eventNameDispatchConfigs.hasOwnProperty(n),"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",n),c.eventNameDispatchConfigs[n]=e;var a=e.phasedRegistrationNames;if(a){for(var i in a)if(a.hasOwnProperty(i)){var s=a[i];r(s,t,n)}return!0}return!!e.registrationName&&(r(e.registrationName,t,n),!0)}function r(e,t,n){o(!c.registrationNameModules[e],"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e),c.registrationNameModules[e]=t,c.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var o=e(150),s=null,l={},c={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){o(!s,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."),s=Array.prototype.slice.call(e),a()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];l.hasOwnProperty(n)&&l[n]===i||(o(!l[n],"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",n),l[n]=i,t=!0)}t&&a()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return c.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var a=c.registrationNameModules[t.phasedRegistrationNames[n]];if(a)return a}return null},_resetEventPlugins:function(){s=null;for(var e in l)l.hasOwnProperty(e)&&delete l[e];c.plugins.length=0;var t=c.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var a=c.registrationNameModules;for(var i in a)a.hasOwnProperty(i)&&delete a[i]}};t.exports=c},{150:150}],20:[function(e,t,n){"use strict";function a(e){return e===_.topMouseUp||e===_.topTouchEnd||e===_.topTouchCancel}function i(e){return e===_.topMouseMove||e===_.topTouchMove}function r(e){return e===_.topMouseDown||e===_.topTouchStart}function o(e,t){var n=e._dispatchListeners,a=e._dispatchIDs;if(p(e),Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)t(e,n[i],a[i]);else n&&t(e,n,a)}function s(e,t,n){e.currentTarget=g.Mount.getNode(n);var a=t(e,n);return e.currentTarget=null,a}function l(e,t){o(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function c(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(p(e),Array.isArray(t)){for(var a=0;a<t.length&&!e.isPropagationStopped();a++)if(t[a](e,n[a]))return n[a]}else if(t&&t(e,n))return n;return null}function d(e){var t=c(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function u(e){p(e);var t=e._dispatchListeners,n=e._dispatchIDs;f(!Array.isArray(t),"executeDirectDispatch(...): Invalid `event`.");var a=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,a}function m(e){return!!e._dispatchListeners}var p,h=e(16),f=e(150),g={Mount:null,injectMount:function(e){g.Mount=e,f(e&&e.getNode,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode.")}},_=h.topLevelTypes;p=function(e){var t=e._dispatchListeners,n=e._dispatchIDs,a=Array.isArray(t),i=Array.isArray(n),r=i?n.length:n?1:0,o=a?t.length:t?1:0;f(i===a&&r===o,"EventPluginUtils: Invalid `event`.")};var v={isEndish:a,isMoveish:i,isStartish:r,executeDirectDispatch:u,executeDispatch:s,executeDispatchesInOrder:l,executeDispatchesInOrderStopAtTrue:d,hasDispatches:m,injection:g,useTouchEvents:!1};t.exports=v},{150:150,16:16}],21:[function(e,t,n){"use strict";function a(e,t,n){var a=t.dispatchConfig.phasedRegistrationNames[n];return g(e,a)}function i(e,t,n){if(!e)throw new Error("Dispatching id must not be null");var i=t?f.bubbled:f.captured,r=a(e,n,i);r&&(n._dispatchListeners=p(n._dispatchListeners,r),n._dispatchIDs=p(n._dispatchIDs,e))}function r(e){e&&e.dispatchConfig.phasedRegistrationNames&&m.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,i,e)}function o(e,t,n){if(n&&n.dispatchConfig.registrationName){var a=n.dispatchConfig.registrationName,i=g(e,a);i&&(n._dispatchListeners=p(n._dispatchListeners,i),n._dispatchIDs=p(n._dispatchIDs,e))}}function s(e){e&&e.dispatchConfig.registrationName&&o(e.dispatchMarker,null,e)}function l(e){h(e,r)}function c(e,t,n,a){m.injection.getInstanceHandle().traverseEnterLeave(n,a,o,e,t)}function d(e){h(e,s)}var u=e(16),m=e(18),p=e(118),h=e(135),f=u.PropagationPhases,g=m.getListener,_={accumulateTwoPhaseDispatches:l,accumulateDirectDispatches:d,accumulateEnterLeaveDispatches:c};t.exports=_},{118:118,135:135,16:16,18:18}],22:[function(e,t,n){"use strict";var a=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:a,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:a&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:a&&!!window.screen,isInWorker:!a};t.exports=i},{}],23:[function(e,t,n){"use strict";function a(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var i=e(30),r=e(29),o=e(145);r(a.prototype,{getText:function(){return"value"in this._root?this._root.value:this._root[o()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,a=n.length,i=this.getText(),r=i.length;for(e=0;a>e&&n[e]===i[e];e++);var o=a-e;for(t=1;o>=t&&n[a-t]===i[r-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=i.slice(e,s),this._fallbackText}}),i.addPoolingTo(a),t.exports=a},{145:145,29:29,30:30}],24:[function(e,t,n){"use strict";var a,i=e(11),r=e(22),o=i.injection.MUST_USE_ATTRIBUTE,s=i.injection.MUST_USE_PROPERTY,l=i.injection.HAS_BOOLEAN_VALUE,c=i.injection.HAS_SIDE_EFFECTS,d=i.injection.HAS_NUMERIC_VALUE,u=i.injection.HAS_POSITIVE_NUMERIC_VALUE,m=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(r.canUseDOM){var p=document.implementation;a=p&&p.hasFeature&&p.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var h={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:o|l,allowTransparency:o,alt:null,async:l,autoComplete:null,autoPlay:l,cellPadding:null,cellSpacing:null,charSet:o,checked:s|l,classID:o,className:a?o:s,cols:o|u,colSpan:null,content:null,contentEditable:null,contextMenu:o,controls:s|l,coords:null,crossOrigin:null,data:null,dateTime:o,defer:l,dir:null,disabled:o|l,download:m,draggable:null,encType:null,form:o,formAction:o,formEncType:o,formMethod:o,formNoValidate:l,formTarget:o,frameBorder:o,headers:null,height:o,hidden:o|l,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:s,label:null,lang:null,list:o,loop:s|l,low:null,manifest:o,marginHeight:null,marginWidth:null,max:null,maxLength:o,media:o,mediaGroup:null,method:null,min:null,multiple:s|l,muted:s|l,name:null,noValidate:l,open:l,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:s|l,rel:null,required:l,role:o,rows:o|u,rowSpan:null,sandbox:null,scope:null,scoped:l,scrolling:null,seamless:o|l,selected:s|l,shape:null,size:o|u,sizes:o,span:u,spellCheck:null,src:null,srcDoc:s,srcSet:o,start:d,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:s|c,width:o,wmode:o,autoCapitalize:null,autoCorrect:null,itemProp:o,itemScope:o|l,itemType:o,itemID:o,itemRef:o,property:null,unselectable:o},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=h},{11:11,22:22}],25:[function(e,t,n){"use strict";var a=e(75),i=e(94),r={linkState:function(e){return new a(this.state[e],i.createStateKeySetter(this,e))}};t.exports=r},{75:75,94:94}],26:[function(e,t,n){"use strict";function a(e){c(null==e.props.checkedLink||null==e.props.valueLink,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa.")}function i(e){a(e),c(null==e.props.value&&null==e.props.onChange,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink.")}function r(e){a(e),c(null==e.props.checked&&null==e.props.onChange,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink")}function o(e){this.props.valueLink.requestChange(e.target.value)}function s(e){this.props.checkedLink.requestChange(e.target.checked)}var l=e(86),c=e(150),d={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},u={Mixin:{propTypes:{value:function(e,t,n){return!e[t]||d[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:l.func}},getValue:function(e){return e.props.valueLink?(i(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(r(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(i(e),o):e.props.checkedLink?(r(e),s):e.props.onChange}};t.exports=u},{150:150,86:86}],27:[function(e,t,n){"use strict";function a(e){e.remove()}var i=e(33),r=e(118),o=e(135),s=e(150),l={trapBubbledEvent:function(e,t){s(this.isMounted(),"Must be mounted to trap events");var n=this.getDOMNode();s(n,"LocalEventTrapMixin.trapBubbledEvent(...): Requires node to be rendered.");var a=i.trapBubbledEvent(e,t,n);this._localEventListeners=r(this._localEventListeners,a)},componentWillUnmount:function(){this._localEventListeners&&o(this._localEventListeners,a)}};t.exports=l},{118:118,135:135,150:150,33:33}],28:[function(e,t,n){"use strict";var a=e(16),i=e(129),r=a.topLevelTypes,o={eventTypes:null,extractEvents:function(e,t,n,a){if(e===r.topTouchStart){var o=a.target;o&&!o.onclick&&(o.onclick=i)}}};t.exports=o},{129:129,16:16}],29:[function(e,t,n){"use strict";function a(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),a=Object.prototype.hasOwnProperty,i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r){var o=Object(r);for(var s in o)a.call(o,s)&&(n[s]=o[s])}}return n}t.exports=a},{}],30:[function(e,t,n){"use strict";var a=e(150),i=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},r=function(e,t){var n=this;if(n.instancePool.length){var a=n.instancePool.pop();return n.call(a,e,t),a}return new n(e,t)},o=function(e,t,n){var a=this;if(a.instancePool.length){var i=a.instancePool.pop();return a.call(i,e,t,n),i}return new a(e,t,n)},s=function(e,t,n,a,i){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n,a,i),o}return new r(e,t,n,a,i)},l=function(e){var t=this;a(e instanceof t,"Trying to release an instance into a pool of a different type."),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=10,d=i,u=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||d,n.poolSize||(n.poolSize=c),n.release=l,n},m={addPoolingTo:u,oneArgumentPooler:i,twoArgumentPooler:r,threeArgumentPooler:o,fiveArgumentPooler:s};t.exports=m},{150:150}],31:[function(e,t,n){"use strict";var a=e(20),i=e(37),r=e(39),o=e(38),s=e(44),l=e(45),c=e(63),d=e(64),u=e(46),m=e(57),p=e(60),h=e(72),f=e(77),g=e(82),_=e(86),v=e(89),y=e(92),E=e(29),b=e(132),N=e(160);p.inject();var w=c.createElement,k=c.createFactory,D=c.cloneElement;w=d.createElement,k=d.createFactory,D=d.cloneElement;var T=g.measure("React","render",f.render),x={Children:{map:i.map,forEach:i.forEach,count:i.count,only:N},Component:r,DOM:u,PropTypes:_,initializeTouchEvents:function(e){a.useTouchEvents=e},createClass:o.createClass,createElement:w,cloneElement:D,createFactory:k,createMixin:function(e){return e},constructAndRenderComponent:f.constructAndRenderComponent,constructAndRenderComponentByID:f.constructAndRenderComponentByID,findDOMNode:b,render:T,renderToString:y.renderToString,renderToStaticMarkup:y.renderToStaticMarkup,unmountComponentAtNode:f.unmountComponentAtNode,isValidElement:c.isValidElement,withContext:s.withContext,__spread:E};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:l,InstanceHandles:h,Mount:f,Reconciler:v,TextComponent:m});var C=e(22);if(C.canUseDOM&&window.top===window.self){navigator.userAgent.indexOf("Chrome")>-1&&"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&console.debug("Download the React DevTools for a better development experience: https://fb.me/react-devtools");for(var M=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze],S=0;S<M.length;S++)if(!M[S]){console.error("One or more ES5 shim/shams expected by React are not available: https://fb.me/react-warning-polyfills");break}}x.version="0.13.3",t.exports=x},{132:132,160:160,20:20,22:22,29:29,37:37,38:38,39:39,44:44,45:45,46:46,57:57,60:60,63:63,64:64,72:72,77:77,82:82,86:86,89:89,92:92}],32:[function(e,t,n){"use strict";var a=e(132),i={getDOMNode:function(){return a(this)}};t.exports=i},{132:132}],33:[function(e,t,n){"use strict";function a(e){return Object.prototype.hasOwnProperty.call(e,f)||(e[f]=p++,u[e[f]]={}),u[e[f]]}var i=e(16),r=e(18),o=e(19),s=e(67),l=e(117),c=e(29),d=e(151),u={},m=!1,p=0,h={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},f="_reactListenersID"+String(Math.random()).slice(2),g=c({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=e}},setEnabled:function(e){g.ReactEventListener&&g.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,r=a(n),s=o.registrationNameDependencies[e],l=i.topLevelTypes,c=0,u=s.length;u>c;c++){var m=s[c];r.hasOwnProperty(m)&&r[m]||(m===l.topWheel?d("wheel")?g.ReactEventListener.trapBubbledEvent(l.topWheel,"wheel",n):d("mousewheel")?g.ReactEventListener.trapBubbledEvent(l.topWheel,"mousewheel",n):g.ReactEventListener.trapBubbledEvent(l.topWheel,"DOMMouseScroll",n):m===l.topScroll?d("scroll",!0)?g.ReactEventListener.trapCapturedEvent(l.topScroll,"scroll",n):g.ReactEventListener.trapBubbledEvent(l.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):m===l.topFocus||m===l.topBlur?(d("focus",!0)?(g.ReactEventListener.trapCapturedEvent(l.topFocus,"focus",n),g.ReactEventListener.trapCapturedEvent(l.topBlur,"blur",n)):d("focusin")&&(g.ReactEventListener.trapBubbledEvent(l.topFocus,"focusin",n),g.ReactEventListener.trapBubbledEvent(l.topBlur,"focusout",n)),r[l.topBlur]=!0,r[l.topFocus]=!0):h.hasOwnProperty(m)&&g.ReactEventListener.trapBubbledEvent(m,h[m],n),r[m]=!0)}},trapBubbledEvent:function(e,t,n){return g.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return g.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!m){var e=l.refreshScrollValues;g.ReactEventListener.monitorScrollValue(e),m=!0}},eventNameDispatchConfigs:r.eventNameDispatchConfigs,registrationNameModules:r.registrationNameModules,putListener:r.putListener,getListener:r.getListener,deleteListener:r.deleteListener,deleteAllListeners:r.deleteAllListeners});t.exports=g},{117:117,151:151,16:16,18:18,19:19,29:29,67:67}],34:[function(e,t,n){"use strict";var a=e(31),i=e(29),r=a.createFactory(e(98)),o=a.createFactory(e(35)),s=a.createClass({displayName:"ReactCSSTransitionGroup",propTypes:{transitionName:a.PropTypes.string.isRequired,transitionAppear:a.PropTypes.bool,transitionEnter:a.PropTypes.bool,transitionLeave:a.PropTypes.bool},getDefaultProps:function(){return{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}},_wrapChild:function(e){return o({name:this.props.transitionName,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave},e)},render:function(){return r(i({},this.props,{childFactory:this._wrapChild}))}});t.exports=s},{29:29,31:31,35:35,98:98}],35:[function(e,t,n){"use strict";var a=e(31),i=e(4),r=e(97),o=e(160),s=e(171),l=17,c=5e3,d=null;d=function(){s(!1,"transition(): tried to perform an animation without an animationend or transitionend event after timeout (%sms). You should either disable this transition in JS or add a CSS animation/transition.",c)};var u=a.createClass({displayName:"ReactCSSTransitionGroupChild",transition:function(e,t){var n=this.getDOMNode(),a=this.props.name+"-"+e,o=a+"-active",s=null,l=function(e){e&&e.target!==n||(clearTimeout(s),i.removeClass(n,a),i.removeClass(n,o),r.removeEndEventListener(n,l),t&&t())};r.addEndEventListener(n,l),i.addClass(n,a),this.queueClass(o),s=setTimeout(d,c)},queueClass:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,l))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(i.addClass.bind(i,this.getDOMNode())),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout)},componentWillAppear:function(e){this.props.appear?this.transition("appear",e):e()},componentWillEnter:function(e){this.props.enter?this.transition("enter",e):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e):e()},render:function(){return o(this.props.children)}});t.exports=u},{160:160,171:171,31:31,4:4,97:97}],36:[function(e,t,n){"use strict";var a=e(89),i=e(133),r=e(149),o=e(167),s={instantiateChildren:function(e,t,n){var a=i(e);for(var o in a)if(a.hasOwnProperty(o)){var s=a[o],l=r(s,null);a[o]=l}return a},updateChildren:function(e,t,n,s){var l=i(t);if(!l&&!e)return null;var c;for(c in l)if(l.hasOwnProperty(c)){var d=e&&e[c],u=d&&d._currentElement,m=l[c];if(o(u,m))a.receiveComponent(d,m,n,s),l[c]=d;else{d&&a.unmountComponent(d,c);var p=r(m,null);l[c]=p}}for(c in e)!e.hasOwnProperty(c)||l&&l.hasOwnProperty(c)||a.unmountComponent(e[c]);return l},unmountChildren:function(e){for(var t in e){var n=e[t];a.unmountComponent(n)}}};t.exports=s},{133:133,149:149,167:167,89:89}],37:[function(e,t,n){"use strict";function a(e,t){this.forEachFunction=e,
this.forEachContext=t}function i(e,t,n,a){var i=e;i.forEachFunction.call(i.forEachContext,t,a)}function r(e,t,n){if(null==e)return e;var r=a.getPooled(t,n);p(e,i,r),a.release(r)}function o(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function s(e,t,n,a){var i=e,r=i.mapResult,o=!r.hasOwnProperty(n);if(h(o,"ReactChildren.map(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n),o){var s=i.mapFunction.call(i.mapContext,t,a);r[n]=s}}function l(e,t,n){if(null==e)return e;var a={},i=o.getPooled(a,t,n);return p(e,s,i),o.release(i),m.create(a)}function c(e,t,n,a){return null}function d(e,t){return p(e,c,null)}var u=e(30),m=e(69),p=e(169),h=e(171),f=u.twoArgumentPooler,g=u.threeArgumentPooler;u.addPoolingTo(a,f),u.addPoolingTo(o,g);var _={forEach:r,map:l,count:d};t.exports=_},{169:169,171:171,30:30,69:69}],38:[function(e,t,n){"use strict";function a(e,t,n){for(var a in t)t.hasOwnProperty(a)&&D("function"==typeof t[a],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e.displayName||"ReactClass",y[n],a)}function i(e,t){var n=M.hasOwnProperty(t)?M[t]:null;I.hasOwnProperty(t)&&N(n===x.OVERRIDE_BASE,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e.hasOwnProperty(t)&&N(n===x.DEFINE_MANY||n===x.DEFINE_MANY_MERGED,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function r(e,t){if(t){N("function"!=typeof t,"ReactClass: You're attempting to use a component class as a mixin. Instead, just use a regular object."),N(!h.isValidElement(t),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.prototype;t.hasOwnProperty(T)&&S.mixins(e,t.mixins);for(var a in t)if(t.hasOwnProperty(a)&&a!==T){var r=t[a];if(i(n,a),S.hasOwnProperty(a))S[a](e,r);else{var o=M.hasOwnProperty(a),s=n.hasOwnProperty(a),d=r&&r.__reactDontBind,u="function"==typeof r,m=u&&!o&&!s&&!d;if(m)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[a]=r,n[a]=r;else if(s){var p=M[a];N(o&&(p===x.DEFINE_MANY_MERGED||p===x.DEFINE_MANY),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",p,a),p===x.DEFINE_MANY_MERGED?n[a]=l(n[a],r):p===x.DEFINE_MANY&&(n[a]=c(n[a],r))}else n[a]=r,"function"==typeof r&&t.displayName&&(n[a].displayName=t.displayName+"_"+a)}}}}function o(e,t){if(t)for(var n in t){var a=t[n];if(t.hasOwnProperty(n)){var i=n in S;N(!i,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var r=n in e;N(!r,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),e[n]=a}}}function s(e,t){N(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(N(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function l(e,t){return function(){var n=e.apply(this,arguments),a=t.apply(this,arguments);if(null==n)return a;if(null==a)return n;var i={};return s(i,n),s(i,a),i}}function c(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function d(e,t){var n=t.bind(e);n.__reactBoundContext=e,n.__reactBoundMethod=t,n.__reactBoundArguments=null;var a=e.constructor.displayName,i=n.bind;return n.bind=function(r){for(var o=[],s=1,l=arguments.length;l>s;s++)o.push(arguments[s]);if(r!==e&&null!==r)D(!1,"bind(): React component methods may only be bound to the component instance. See %s",a);else if(!o.length)return D(!1,"bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See %s",a),n;var c=i.apply(n,arguments);return c.__reactBoundContext=e,c.__reactBoundMethod=t,c.__reactBoundArguments=o,c},n}function u(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=d(e,f.guard(n,e.constructor.displayName+"."+t))}}var m=e(39),p=e(45),h=e(63),f=e(66),g=e(73),_=e(74),v=e(85),y=e(84),E=e(99),b=e(29),N=e(150),w=e(156),k=e(157),D=e(171),T=k({mixins:null}),x=w({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),C=[],M={mixins:x.DEFINE_MANY,statics:x.DEFINE_MANY,propTypes:x.DEFINE_MANY,contextTypes:x.DEFINE_MANY,childContextTypes:x.DEFINE_MANY,getDefaultProps:x.DEFINE_MANY_MERGED,getInitialState:x.DEFINE_MANY_MERGED,getChildContext:x.DEFINE_MANY_MERGED,render:x.DEFINE_ONCE,componentWillMount:x.DEFINE_MANY,componentDidMount:x.DEFINE_MANY,componentWillReceiveProps:x.DEFINE_MANY,shouldComponentUpdate:x.DEFINE_ONCE,componentWillUpdate:x.DEFINE_MANY,componentDidUpdate:x.DEFINE_MANY,componentWillUnmount:x.DEFINE_MANY,updateComponent:x.OVERRIDE_BASE},S={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)r(e,t[n])},childContextTypes:function(e,t){a(e,t,v.childContext),e.childContextTypes=b({},e.childContextTypes,t)},contextTypes:function(e,t){a(e,t,v.context),e.contextTypes=b({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=l(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){a(e,t,v.prop),e.propTypes=b({},e.propTypes,t)},statics:function(e,t){o(e,t)}},O={enumerable:!1,get:function(){var e=this.displayName||this.name||"Component";return D(!1,"%s.type is deprecated. Use %s directly to access the class.",e,e),Object.defineProperty(this,"type",{value:this}),this}},I={replaceState:function(e,t){E.enqueueReplaceState(this,e),t&&E.enqueueCallback(this,t)},isMounted:function(){var e=p.current;null!==e&&(D(e._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",e.getName()||"A component"),e._warnedAboutRefsInRender=!0);var t=g.get(this);return t&&t!==_.currentlyMountingInstance},setProps:function(e,t){E.enqueueSetProps(this,e),t&&E.enqueueCallback(this,t)},replaceProps:function(e,t){E.enqueueReplaceProps(this,e),t&&E.enqueueCallback(this,t)}},$=function(){};b($.prototype,m.prototype,I);var A={createClass:function(e){var t=function(e,n){D(this instanceof t,"Something is calling a React component directly. Use a factory or JSX instead. See: https://fb.me/react-legacyfactory"),this.__reactAutoBindMap&&u(this),this.props=e,this.context=n,this.state=null;var a=this.getInitialState?this.getInitialState():null;"undefined"==typeof a&&this.getInitialState._isMockFunction&&(a=null),N("object"==typeof a&&!Array.isArray(a),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=a};t.prototype=new $,t.prototype.constructor=t,C.forEach(r.bind(null,t)),r(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.getDefaultProps&&(t.getDefaultProps.isReactClassApproved={}),t.prototype.getInitialState&&(t.prototype.getInitialState.isReactClassApproved={}),N(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),D(!t.prototype.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",e.displayName||"A component");for(var n in M)t.prototype[n]||(t.prototype[n]=null);t.type=t;try{Object.defineProperty(t,"type",O)}catch(e){}return t},injection:{injectMixin:function(e){C.push(e)}}};t.exports=A},{150:150,156:156,157:157,171:171,29:29,39:39,45:45,63:63,66:66,73:73,74:74,84:84,85:85,99:99}],39:[function(e,t,n){"use strict";function a(e,t){this.props=e,this.context=t}var i=e(99),r=e(150),o=e(171);a.prototype.setState=function(e,t){r("object"==typeof e||"function"==typeof e||null==e,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."),o(null!=e,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."),i.enqueueSetState(this,e),t&&i.enqueueCallback(this,t)},a.prototype.forceUpdate=function(e){i.enqueueForceUpdate(this),e&&i.enqueueCallback(this,e)};var s={getDOMNode:["getDOMNode","Use React.findDOMNode(component) instead."],isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceProps:["replaceProps","Instead call React.render again at the top level."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."],setProps:["setProps","Instead call React.render again at the top level."]},l=function(e,t){try{Object.defineProperty(a.prototype,e,{get:function(){return void o(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",t[0],t[1])}})}catch(e){}};for(var c in s)s.hasOwnProperty(c)&&l(c,s[c]);t.exports=a},{150:150,171:171,99:99}],40:[function(e,t,n){"use strict";var a=e(50),i=e(77),r={processChildrenUpdates:a.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:a.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){i.purgeID(e)}};t.exports=r},{50:50,77:77}],41:[function(e,t,n){"use strict";var a=e(150),i=!1,r={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){a(!i,"ReactCompositeComponent: injectEnvironment() can only be called once."),r.unmountIDFromEnvironment=e.unmountIDFromEnvironment,r.replaceNodeWithMarkupByID=e.replaceNodeWithMarkupByID,r.processChildrenUpdates=e.processChildrenUpdates,i=!0}}};t.exports=r},{150:150}],42:[function(e,t,n){"use strict";var a=e(166),i={shouldComponentUpdate:function(e,t){return!a(this.props,e)||!a(this.state,t)}};t.exports=i},{166:166}],43:[function(e,t,n){"use strict";function a(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}var i=e(41),r=e(44),o=e(45),s=e(63),l=e(64),c=e(73),d=e(74),u=e(80),m=e(82),p=e(85),h=e(84),f=e(89),g=e(100),_=e(29),v=e(130),y=e(150),E=e(167),b=e(171),N=1,w={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._isTopLevel=!1,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=N++,this._rootNodeID=e;var a=this._processProps(this._currentElement.props),i=this._processContext(this._currentElement._context),r=u.getComponentClassForElement(this._currentElement),o=new r(a,i);b(null!=o.render,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render` in your component or you may have accidentally tried to render an element whose type is a function that isn't a React component.",r.displayName||r.name||"Component"),o.props=a,o.context=i,o.refs=v,this._instance=o,c.set(o,this),this._warnIfContextsDiffer(this._currentElement._context,n),b(!o.getInitialState||o.getInitialState.isReactClassApproved,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",this.getName()||"a component"),b(!o.getDefaultProps||o.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",this.getName()||"a component"),b(!o.propTypes,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",this.getName()||"a component"),b(!o.contextTypes,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",this.getName()||"a component"),b("function"!=typeof o.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",this.getName()||"A component");var s=o.state;void 0===s&&(o.state=s=null),y("object"==typeof s&&!Array.isArray(s),"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var l,m,p=d.currentlyMountingInstance;d.currentlyMountingInstance=this;try{o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),l=this._getValidatedChildContext(n),m=this._renderValidatedComponent(l)}finally{d.currentlyMountingInstance=p}this._renderedComponent=this._instantiateReactComponent(m,this._currentElement.type);var h=f.mountComponent(this._renderedComponent,e,t,this._mergeChildContext(n,l));return o.componentDidMount&&t.getReactMountReady().enqueue(o.componentDidMount,o),h},unmountComponent:function(){var e=this._instance;if(e.componentWillUnmount){var t=d.currentlyUnmountingInstance;d.currentlyUnmountingInstance=this;try{e.componentWillUnmount()}finally{d.currentlyUnmountingInstance=t}}f.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,c.remove(e)},_setPropsInternal:function(e,t){var n=this._pendingElement||this._currentElement;this._pendingElement=s.cloneAndReplaceProps(n,_({},n.props,e)),g.enqueueUpdate(this,t)},_maskContext:function(e){var t=null;if("string"==typeof this._currentElement.type)return v;var n=this._currentElement.type.contextTypes;if(!n)return v;t={};for(var a in n)t[a]=e[a];return t},_processContext:function(e){var t=this._maskContext(e),n=u.getComponentClassForElement(this._currentElement);return n.contextTypes&&this._checkPropTypes(n.contextTypes,t,p.context),t},_getValidatedChildContext:function(e){var t=this._instance,n=t.getChildContext&&t.getChildContext();if(n){y("object"==typeof t.constructor.childContextTypes,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"),this._checkPropTypes(t.constructor.childContextTypes,n,p.childContext);for(var a in n)y(a in t.constructor.childContextTypes,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",a);return n}return null},_mergeChildContext:function(e,t){return t?_({},e,t):e},_processProps:function(e){var t=u.getComponentClassForElement(this._currentElement);return t.propTypes&&this._checkPropTypes(t.propTypes,e,p.prop),e},_checkPropTypes:function(e,t,n){var i=this.getName();for(var r in e)if(e.hasOwnProperty(r)){var o;try{y("function"==typeof e[r],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",i||"React class",h[n],r),o=e[r](t,r,i,n)}catch(e){o=e}if(o instanceof Error){var s=a(this);n===p.prop?b(!1,"Failed Composite propType: %s%s",o.message,s):b(!1,"Failed Context Types: %s%s",o.message,s)}}},receiveComponent:function(e,t,n){var a=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,a,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&f.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&(l.checkAndWarnForMutatedProps(this._currentElement),this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context))},_warnIfContextsDiffer:function(e,t){e=this._maskContext(e),t=this._maskContext(t);for(var n=Object.keys(t).sort(),a=this.getName()||"ReactCompositeComponent",i=0;i<n.length;i++){var r=n[i];b(e[r]===t[r],"owner-based and parent-based contexts differ (values: `%s` vs `%s`) for key (%s) while mounting %s (see: http://fb.me/react-context-by-parent)",e[r],t[r],r,a)}},updateComponent:function(e,t,n,a,i){var r=this._instance,o=r.context,s=r.props;t!==n&&(o=this._processContext(n._context),s=this._processProps(n.props),null!=i&&this._warnIfContextsDiffer(n._context,i),r.componentWillReceiveProps&&r.componentWillReceiveProps(s,o));var l=this._processPendingState(s,o),c=this._pendingForceUpdate||!r.shouldComponentUpdate||r.shouldComponentUpdate(s,l,o);b("undefined"!=typeof c,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"),c?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,s,l,o,e,i)):(this._currentElement=n,this._context=i,r.props=s,r.state=l,r.context=o)},_processPendingState:function(e,t){var n=this._instance,a=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!a)return n.state;if(i&&1===a.length)return a[0];for(var r=_({},i?a[0]:n.state),o=i?1:0;o<a.length;o++){var s=a[o];_(r,"function"==typeof s?s.call(n,r,e,t):s)}return r},_performComponentUpdate:function(e,t,n,a,i,r){var o=this._instance,s=o.props,l=o.state,c=o.context;o.componentWillUpdate&&o.componentWillUpdate(t,n,a),this._currentElement=e,this._context=r,o.props=t,o.state=n,o.context=a,this._updateRenderedComponent(i,r),o.componentDidUpdate&&i.getReactMountReady().enqueue(o.componentDidUpdate.bind(o,s,l,c),o)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,a=n._currentElement,i=this._getValidatedChildContext(),r=this._renderValidatedComponent(i);if(E(a,r))f.receiveComponent(n,r,e,this._mergeChildContext(t,i));else{var o=this._rootNodeID,s=n._rootNodeID;f.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(r,this._currentElement.type);var l=f.mountComponent(this._renderedComponent,o,e,this._mergeChildContext(t,i));this._replaceNodeWithMarkupByID(s,l)}},_replaceNodeWithMarkupByID:function(e,t){i.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return"undefined"==typeof t&&e.render._isMockFunction&&(t=null),t},_renderValidatedComponent:function(e){var t,n=r.current;r.current=this._mergeChildContext(this._currentElement._context,e),o.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{r.current=n,o.current=null}return y(null===t||t===!1||s.isValidElement(t),"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"),t},attachRef:function(e,t){var n=this.getPublicInstance(),a=n.refs===v?n.refs={}:n.refs;a[e]=t.getPublicInstance()},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){return this._instance},_instantiateReactComponent:null};m.measureMethods(w,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var k={Mixin:w};t.exports=k},{100:100,130:130,150:150,167:167,171:171,29:29,41:41,44:44,45:45,63:63,64:64,73:73,74:74,80:80,82:82,84:84,85:85,89:89}],44:[function(e,t,n){"use strict";var a=e(29),i=e(130),r=e(171),o=!1,s={current:i,withContext:function(e,t){r(o,"withContext is deprecated and will be removed in a future version. Use a wrapper component with getChildContext instead."),o=!0;var n,i=s.current;s.current=a({},i,e);try{n=t()}finally{s.current=i}return n}};t.exports=s},{130:130,171:171,29:29}],45:[function(e,t,n){"use strict";var a={current:null};t.exports=a},{}],46:[function(e,t,n){"use strict";function a(e){return i.createFactory(e)}var i=(e(63),e(64)),r=e(158),o=r({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul",var:"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},a);t.exports=o},{158:158,63:63,64:64}],47:[function(e,t,n){"use strict";var a=e(2),i=e(32),r=e(38),o=e(63),s=e(156),l=o.createFactory("button"),c=s({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),d=r.createClass({displayName:"ReactDOMButton",tagName:"BUTTON",mixins:[a,i],render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&c[t]||(e[t]=this.props[t]);return l(e,this.props.children)}});t.exports=d},{156:156,2:2,32:32,38:38,63:63}],48:[function(e,t,n){"use strict";function a(e){e&&(null!=e.dangerouslySetInnerHTML&&(_(null==e.children,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."),_("object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information.")),E(null==e.innerHTML,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),E(!e.contentEditable||null==e.children,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),_(null==e.style||"object"==typeof e.style,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX."))}function i(e,t,n,a){E("onScroll"!==t||v("scroll",!0),"This browser doesn't support the `onScroll` event");var i=m.findReactContainerForID(e);if(i){var r=i.nodeType===T?i.ownerDocument:i;N(t,r)}a.getPutListenerQueue().enqueuePutListener(e,t,n)}function r(e){O.call(S,e)||(_(M.test(e),"Invalid tag: %s",e),S[e]=!0)}function o(e){r(e),this._tag=e,this._renderedChildren=null,this._previousStyleCopy=null,this._rootNodeID=null}var s=e(6),l=e(11),c=e(12),d=e(33),u=e(40),m=e(77),p=e(78),h=e(82),f=e(29),g=e(131),_=e(150),v=e(151),y=e(157),E=e(171),b=d.deleteListener,N=d.listenTo,w=d.registrationNameModules,k={string:!0,number:!0},D=y({style:null}),T=1,x=null,C={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},M=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,S={},O={}.hasOwnProperty;o.displayName="ReactDOMComponent",o.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,n){this._rootNodeID=e,a(this._currentElement.props);var i=C[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t,n)+i},_createOpenTagMarkupAndPutListeners:function(e){var t=this._currentElement.props,n="<"+this._tag;for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];if(null!=r)if(w.hasOwnProperty(a))i(this._rootNodeID,a,r,e);else{a===D&&(r&&(r=this._previousStyleCopy=f({},t.style)),r=s.createMarkupForStyles(r));var o=c.createMarkupForProperty(a,r);o&&(n+=" "+o)}}if(e.renderToStaticMarkup)return n+">";var l=c.createMarkupForID(this._rootNodeID);return n+" "+l+">"},_createContentMarkup:function(e,t){var n="";("listing"===this._tag||"pre"===this._tag||"textarea"===this._tag)&&(n="\n");var a=this._currentElement.props,i=a.dangerouslySetInnerHTML;if(null!=i){if(null!=i.__html)return n+i.__html}else{var r=k[typeof a.children]?a.children:null,o=null!=r?null:a.children;if(null!=r)return n+g(r);if(null!=o){var s=this.mountChildren(o,e,t);return n+s.join("")}}return n},receiveComponent:function(e,t,n){var a=this._currentElement;this._currentElement=e,this.updateComponent(t,a,e,n)},updateComponent:function(e,t,n,i){a(this._currentElement.props),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e,i)},_updateDOMProperties:function(e,t){var n,a,r,o=this._currentElement.props;for(n in e)if(!o.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===D){var s=this._previousStyleCopy;for(a in s)s.hasOwnProperty(a)&&(r=r||{},r[a]="");this._previousStyleCopy=null}else w.hasOwnProperty(n)?b(this._rootNodeID,n):(l.isStandardName[n]||l.isCustomAttribute(n))&&x.deletePropertyByID(this._rootNodeID,n);for(n in o){var c=o[n],d=n===D?this._previousStyleCopy:e[n];if(o.hasOwnProperty(n)&&c!==d)if(n===D)if(c?c=this._previousStyleCopy=f({},c):this._previousStyleCopy=null,d){for(a in d)!d.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r=r||{},r[a]="");for(a in c)c.hasOwnProperty(a)&&d[a]!==c[a]&&(r=r||{},r[a]=c[a])}else r=c;else w.hasOwnProperty(n)?i(this._rootNodeID,n,c,t):(l.isStandardName[n]||l.isCustomAttribute(n))&&x.updatePropertyByID(this._rootNodeID,n,c)}r&&x.updateStylesByID(this._rootNodeID,r)},_updateDOMChildren:function(e,t,n){var a=this._currentElement.props,i=k[typeof e.children]?e.children:null,r=k[typeof a.children]?a.children:null,o=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=a.dangerouslySetInnerHTML&&a.dangerouslySetInnerHTML.__html,l=null!=i?null:e.children,c=null!=r?null:a.children,d=null!=i||null!=o,u=null!=r||null!=s;null!=l&&null==c?this.updateChildren(null,t,n):d&&!u&&this.updateTextContent(""),null!=r?i!==r&&this.updateTextContent(""+r):null!=s?o!==s&&x.updateInnerHTMLByID(this._rootNodeID,s):null!=c&&this.updateChildren(c,t,n)},unmountComponent:function(){this.unmountChildren(),d.deleteAllListeners(this._rootNodeID),u.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null}},h.measureMethods(o,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),f(o.prototype,o.Mixin,p.Mixin),o.injection={injectIDOperations:function(e){o.BackendIDOperations=x=e}},t.exports=o},{11:11,12:12,131:131,150:150,151:151,157:157,171:171,29:29,33:33,40:40,6:6,77:77,78:78,82:82}],49:[function(e,t,n){"use strict";var a=e(16),i=e(27),r=e(32),o=e(38),s=e(63),l=s.createFactory("form"),c=o.createClass({displayName:"ReactDOMForm",tagName:"FORM",mixins:[r,i],render:function(){return l(this.props)},componentDidMount:function(){this.trapBubbledEvent(a.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(a.topLevelTypes.topSubmit,"submit")}});t.exports=c},{16:16,27:27,32:32,38:38,63:63}],50:[function(e,t,n){"use strict";var a=e(6),i=e(10),r=e(12),o=e(77),s=e(82),l=e(150),c=e(164),d={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},u={updatePropertyByID:function(e,t,n){var a=o.getNode(e);l(!d.hasOwnProperty(t),"updatePropertyByID(...): %s",d[t]),null!=n?r.setValueForProperty(a,t,n):r.deleteValueForProperty(a,t)},deletePropertyByID:function(e,t,n){var a=o.getNode(e);l(!d.hasOwnProperty(t),"updatePropertyByID(...): %s",d[t]),r.deleteValueForProperty(a,t,n)},updateStylesByID:function(e,t){var n=o.getNode(e);a.setValueForStyles(n,t)},updateInnerHTMLByID:function(e,t){var n=o.getNode(e);c(n,t)},updateTextContentByID:function(e,t){var n=o.getNode(e);i.updateTextContent(n,t)},dangerouslyReplaceNodeWithMarkupByID:function(e,t){var n=o.getNode(e);i.dangerouslyReplaceNodeWithMarkup(n,t)},dangerouslyProcessChildrenUpdates:function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=o.getNode(e[n].parentID);i.processUpdates(e,t)}};s.measureMethods(u,"ReactDOMIDOperations",{updatePropertyByID:"updatePropertyByID",deletePropertyByID:"deletePropertyByID",updateStylesByID:"updateStylesByID",updateInnerHTMLByID:"updateInnerHTMLByID",updateTextContentByID:"updateTextContentByID",dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),t.exports=u},{10:10,12:12,150:150,164:164,6:6,77:77,82:82}],51:[function(e,t,n){"use strict";var a=e(16),i=e(27),r=e(32),o=e(38),s=e(63),l=s.createFactory("iframe"),c=o.createClass({displayName:"ReactDOMIframe",tagName:"IFRAME",mixins:[r,i],render:function(){return l(this.props)},componentDidMount:function(){this.trapBubbledEvent(a.topLevelTypes.topLoad,"load")}});t.exports=c},{16:16,27:27,32:32,38:38,63:63}],52:[function(e,t,n){"use strict";var a=e(16),i=e(27),r=e(32),o=e(38),s=e(63),l=s.createFactory("img"),c=o.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[r,i],render:function(){return l(this.props)},componentDidMount:function(){this.trapBubbledEvent(a.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(a.topLevelTypes.topError,"error")}});t.exports=c},{16:16,27:27,32:32,38:38,63:63}],53:[function(e,t,n){"use strict";function a(){this.isMounted()&&this.forceUpdate()}var i=e(2),r=e(12),o=e(26),s=e(32),l=e(38),c=e(63),d=e(77),u=e(100),m=e(29),p=e(150),h=c.createFactory("input"),f={},g=l.createClass({displayName:"ReactDOMInput",tagName:"INPUT",mixins:[i,o.Mixin,s],getInitialState:function(){var e=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||!1,initialValue:null!=e?e:null}},render:function(){var e=m({},this.props);e.defaultChecked=null,e.defaultValue=null;var t=o.getValue(this);e.value=null!=t?t:this.state.initialValue;var n=o.getChecked(this);return e.checked=null!=n?n:this.state.initialChecked,e.onChange=this._handleChange,h(e,this.props.children)},componentDidMount:function(){var e=d.getID(this.getDOMNode());f[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=d.getID(e);delete f[t]},componentDidUpdate:function(e,t,n){var a=this.getDOMNode();null!=this.props.checked&&r.setValueForProperty(a,"checked",this.props.checked||!1);var i=o.getValue(this);null!=i&&r.setValueForProperty(a,"value",""+i)},_handleChange:function(e){var t,n=o.getOnChange(this);n&&(t=n.call(this,e)),u.asap(a,this);var i=this.props.name;
if("radio"===this.props.type&&null!=i){for(var r=this.getDOMNode(),s=r;s.parentNode;)s=s.parentNode;for(var l=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),c=0,m=l.length;m>c;c++){var h=l[c];if(h!==r&&h.form===r.form){var g=d.getID(h);p(g,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");var _=f[g];p(_,"ReactDOMInput: Unknown radio button ID %s.",g),u.asap(a,_)}}}return t}});t.exports=g},{100:100,12:12,150:150,2:2,26:26,29:29,32:32,38:38,63:63,77:77}],54:[function(e,t,n){"use strict";var a=e(32),i=e(38),r=e(63),o=e(171),s=r.createFactory("option"),l=i.createClass({displayName:"ReactDOMOption",tagName:"OPTION",mixins:[a],componentWillMount:function(){o(null==this.props.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>.")},render:function(){return s(this.props,this.props.children)}});t.exports=l},{171:171,32:32,38:38,63:63}],55:[function(e,t,n){"use strict";function a(){if(this._pendingUpdate){this._pendingUpdate=!1;var e=s.getValue(this);null!=e&&this.isMounted()&&r(this,e)}}function i(e,t,n){if(null==e[t])return null;if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function r(e,t){var n,a,i,r=e.getDOMNode().options;if(e.props.multiple){for(n={},a=0,i=t.length;i>a;a++)n[""+t[a]]=!0;for(a=0,i=r.length;i>a;a++){var o=n.hasOwnProperty(r[a].value);r[a].selected!==o&&(r[a].selected=o)}}else{for(n=""+t,a=0,i=r.length;i>a;a++)if(r[a].value===n)return void(r[a].selected=!0);r.length&&(r[0].selected=!0)}}var o=e(2),s=e(26),l=e(32),c=e(38),d=e(63),u=e(100),m=e(29),p=d.createFactory("select"),h=c.createClass({displayName:"ReactDOMSelect",tagName:"SELECT",mixins:[o,s.Mixin,l],propTypes:{defaultValue:i,value:i},render:function(){var e=m({},this.props);return e.onChange=this._handleChange,e.value=null,p(e,this.props.children)},componentWillMount:function(){this._pendingUpdate=!1},componentDidMount:function(){var e=s.getValue(this);null!=e?r(this,e):null!=this.props.defaultValue&&r(this,this.props.defaultValue)},componentDidUpdate:function(e){var t=s.getValue(this);null!=t?(this._pendingUpdate=!1,r(this,t)):!e.multiple!=!this.props.multiple&&(null!=this.props.defaultValue?r(this,this.props.defaultValue):r(this,this.props.multiple?[]:""))},_handleChange:function(e){var t,n=s.getOnChange(this);return n&&(t=n.call(this,e)),this._pendingUpdate=!0,u.asap(a,this),t}});t.exports=h},{100:100,2:2,26:26,29:29,32:32,38:38,63:63}],56:[function(e,t,n){"use strict";function a(e,t,n,a){return e===n&&t===a}function i(e){var t=document.selection,n=t.createRange(),a=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var r=i.text.length,o=r+a;return{start:r,end:o}}function r(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,i=t.anchorOffset,r=t.focusNode,o=t.focusOffset,s=t.getRangeAt(0),l=a(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=l?0:s.toString().length,d=s.cloneRange();d.selectNodeContents(e),d.setEnd(s.startContainer,s.startOffset);var u=a(d.startContainer,d.startOffset,d.endContainer,d.endOffset),m=u?0:d.toString().length,p=m+c,h=document.createRange();h.setStart(n,i),h.setEnd(r,o);var f=h.collapsed;return{start:f?p:m,end:f?m:p}}function o(e,t){var n,a,i=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,a=n):t.start>t.end?(n=t.end,a=t.start):(n=t.start,a=t.end),i.moveToElementText(e),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",a-n),i.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),a=e[d()].length,i=Math.min(t.start,a),r="undefined"==typeof t.end?i:Math.min(t.end,a);if(!n.extend&&i>r){var o=r;r=i,i=o}var s=c(e,i),l=c(e,r);if(s&&l){var u=document.createRange();u.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(u),n.extend(l.node,l.offset)):(u.setEnd(l.node,l.offset),n.addRange(u))}}}var l=e(22),c=e(143),d=e(145),u=l.canUseDOM&&"selection"in document&&!("getSelection"in window),m={getOffsets:u?i:r,setOffsets:u?o:s};t.exports=m},{143:143,145:145,22:22}],57:[function(e,t,n){"use strict";var a=e(12),i=e(40),r=e(48),o=e(29),s=e(131),l=function(e){};o(l.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){this._rootNodeID=e;var i=s(this._stringText);return t.renderToStaticMarkup?i:"<span "+a.createMarkupForID(e)+">"+i+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;n!==this._stringText&&(this._stringText=n,r.BackendIDOperations.updateTextContentByID(this._rootNodeID,n))}},unmountComponent:function(){i.unmountIDFromEnvironment(this._rootNodeID)}}),t.exports=l},{12:12,131:131,29:29,40:40,48:48}],58:[function(e,t,n){"use strict";function a(){this.isMounted()&&this.forceUpdate()}var i=e(2),r=e(12),o=e(26),s=e(32),l=e(38),c=e(63),d=e(100),u=e(29),m=e(150),p=e(171),h=c.createFactory("textarea"),f=l.createClass({displayName:"ReactDOMTextarea",tagName:"TEXTAREA",mixins:[i,o.Mixin,s],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;null!=t&&(p(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),m(null==e,"If you supply `defaultValue` on a <textarea>, do not pass children."),Array.isArray(t)&&(m(t.length<=1,"<textarea> can only have at most one child."),t=t[0]),e=""+t),null==e&&(e="");var n=o.getValue(this);return{initialValue:""+(null!=n?n:e)}},render:function(){var e=u({},this.props);return m(null==e.dangerouslySetInnerHTML,"`dangerouslySetInnerHTML` does not make sense on <textarea>."),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,h(e,this.state.initialValue)},componentDidUpdate:function(e,t,n){var a=o.getValue(this);if(null!=a){var i=this.getDOMNode();r.setValueForProperty(i,"value",""+a)}},_handleChange:function(e){var t,n=o.getOnChange(this);return n&&(t=n.call(this,e)),d.asap(a,this),t}});t.exports=f},{100:100,12:12,150:150,171:171,2:2,26:26,29:29,32:32,38:38,63:63}],59:[function(e,t,n){"use strict";function a(){this.reinitializeTransaction()}var i=e(100),r=e(116),o=e(29),s=e(129),l={initialize:s,close:function(){m.isBatchingUpdates=!1}},c={initialize:s,close:i.flushBatchedUpdates.bind(i)},d=[c,l];o(a.prototype,r.Mixin,{getTransactionWrappers:function(){return d}});var u=new a,m={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,a,i){var r=m.isBatchingUpdates;m.isBatchingUpdates=!0,r?e(t,n,a,i):u.perform(e,null,t,n,a,i)}};t.exports=m},{100:100,116:116,129:129,29:29}],60:[function(e,t,n){"use strict";function a(e){return h.createClass({tagName:e.toUpperCase(),render:function(){return new C(e,null,null,null,null,this.props)}})}function i(){S.EventEmitter.injectReactEventListener(M),S.EventPluginHub.injectEventPluginOrder(l),S.EventPluginHub.injectInstanceHandle(O),S.EventPluginHub.injectMount(I),S.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:L,EnterLeaveEventPlugin:c,ChangeEventPlugin:o,MobileSafariClickEventPlugin:m,SelectEventPlugin:A,BeforeInputEventPlugin:r}),S.NativeComponent.injectGenericComponentClass(_),S.NativeComponent.injectTextComponentClass(x),S.NativeComponent.injectAutoWrapper(a),S.Class.injectMixin(p),S.NativeComponent.injectComponentClasses({button:v,form:y,iframe:N,img:E,input:w,option:k,select:D,textarea:T,html:U("html"),head:U("head"),body:U("body")}),S.DOMProperty.injectDOMPropertyConfig(u),S.DOMProperty.injectDOMPropertyConfig(R),S.EmptyComponent.injectEmptyComponent("noscript"),S.Updates.injectReconcileTransaction($),S.Updates.injectBatchingStrategy(g),S.RootIndex.injectCreateReactRootIndex(d.canUseDOM?s.createReactRootIndex:P.createReactRootIndex),S.Component.injectEnvironment(f),S.DOMComponent.injectIDOperations(b);var t=d.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(t)){var n=e(61);n.start()}}var r=e(3),o=e(8),s=e(9),l=e(14),c=e(15),d=e(22),u=e(24),m=e(28),p=e(32),h=e(38),f=e(40),g=e(59),_=e(48),v=e(47),y=e(49),E=e(52),b=e(50),N=e(51),w=e(53),k=e(54),D=e(55),T=e(58),x=e(57),C=e(63),M=e(68),S=e(70),O=e(72),I=e(77),$=e(88),A=e(102),P=e(103),L=e(104),R=e(101),U=e(125);t.exports={inject:i}},{101:101,102:102,103:103,104:104,125:125,14:14,15:15,22:22,24:24,28:28,3:3,32:32,38:38,40:40,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,57:57,58:58,59:59,61:61,63:63,68:68,70:70,72:72,77:77,8:8,88:88,9:9}],61:[function(e,t,n){"use strict";function a(e){return Math.floor(100*e)/100}function i(e,t,n){e[t]=(e[t]||0)+n}var r=e(11),o=e(62),s=e(77),l=e(82),c=e(162),d={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){d._injected||l.injection.injectMeasure(d.measure),d._allMeasurements.length=0,l.enableMeasure=!0},stop:function(){l.enableMeasure=!1},getLastMeasurements:function(){return d._allMeasurements},printExclusive:function(e){e=e||d._allMeasurements;var t=o.getExclusiveSummary(e);console.table(t.map(function(e){return{"Component class name":e.componentName,"Total inclusive time (ms)":a(e.inclusive),"Exclusive mount time (ms)":a(e.exclusive),"Exclusive render time (ms)":a(e.render),"Mount time per instance (ms)":a(e.exclusive/e.count),"Render time per instance (ms)":a(e.render/e.count),Instances:e.count}}))},printInclusive:function(e){e=e||d._allMeasurements;var t=o.getInclusiveSummary(e);console.table(t.map(function(e){return{"Owner > component":e.componentName,"Inclusive time (ms)":a(e.time),Instances:e.count}})),console.log("Total time:",o.getTotalTime(e).toFixed(2)+" ms")},getMeasurementsSummaryMap:function(e){var t=o.getInclusiveSummary(e,!0);return t.map(function(e){return{"Owner > component":e.componentName,"Wasted time (ms)":e.time,Instances:e.count}})},printWasted:function(e){e=e||d._allMeasurements,console.table(d.getMeasurementsSummaryMap(e)),console.log("Total time:",o.getTotalTime(e).toFixed(2)+" ms")},printDOM:function(e){e=e||d._allMeasurements;var t=o.getDOMSummary(e);console.table(t.map(function(e){var t={};return t[r.ID_ATTRIBUTE_NAME]=e.id,t.type=e.type,t.args=JSON.stringify(e.args),t})),console.log("Total time:",o.getTotalTime(e).toFixed(2)+" ms")},_recordWrite:function(e,t,n,a){var i=d._allMeasurements[d._allMeasurements.length-1].writes;i[e]=i[e]||[],i[e].push({type:t,time:n,args:a})},measure:function(e,t,n){return function(){for(var a=[],r=0,o=arguments.length;o>r;r++)a.push(arguments[r]);var l,u,m;if("_renderNewRootComponent"===t||"flushBatchedUpdates"===t)return d._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0}),m=c(),u=n.apply(this,a),d._allMeasurements[d._allMeasurements.length-1].totalTime=c()-m,u;if("_mountImageIntoNode"===t||"ReactDOMIDOperations"===e){if(m=c(),u=n.apply(this,a),l=c()-m,"_mountImageIntoNode"===t){var p=s.getID(a[1]);d._recordWrite(p,t,l,a[0])}else"dangerouslyProcessChildrenUpdates"===t?a[0].forEach(function(e){var t={};null!==e.fromIndex&&(t.fromIndex=e.fromIndex),null!==e.toIndex&&(t.toIndex=e.toIndex),null!==e.textContent&&(t.textContent=e.textContent),null!==e.markupIndex&&(t.markup=a[1][e.markupIndex]),d._recordWrite(e.parentID,e.type,l,t)}):d._recordWrite(a[0],t,l,Array.prototype.slice.call(a,1));return u}if("ReactCompositeComponent"!==e||"mountComponent"!==t&&"updateComponent"!==t&&"_renderValidatedComponent"!==t)return n.apply(this,a);if("string"==typeof this._currentElement.type)return n.apply(this,a);var h="mountComponent"===t?a[0]:this._rootNodeID,f="_renderValidatedComponent"===t,g="mountComponent"===t,_=d._mountStack,v=d._allMeasurements[d._allMeasurements.length-1];if(f?i(v.counts,h,1):g&&_.push(0),m=c(),u=n.apply(this,a),l=c()-m,f)i(v.render,h,l);else if(g){var y=_.pop();_[_.length-1]+=l,i(v.exclusive,h,l-y),i(v.inclusive,h,l)}else i(v.inclusive,h,l);return v.displayNames[h]={current:this.getName(),owner:this._currentElement._owner?this._currentElement._owner.getName():"<root>"},u}}};t.exports=d},{11:11,162:162,62:62,77:77,82:82}],62:[function(e,t,n){function a(e){for(var t=0,n=0;n<e.length;n++){var a=e[n];t+=a.totalTime}return t}function i(e){for(var t=[],n=0;n<e.length;n++){var a,i=e[n];for(a in i.writes)i.writes[a].forEach(function(e){t.push({id:a,type:d[e.type]||e.type,args:e.args})})}return t}function r(e){for(var t,n={},a=0;a<e.length;a++){var i=e[a],r=l({},i.exclusive,i.inclusive);for(var o in r)t=i.displayNames[o].current,n[t]=n[t]||{componentName:t,inclusive:0,exclusive:0,render:0,count:0},i.render[o]&&(n[t].render+=i.render[o]),i.exclusive[o]&&(n[t].exclusive+=i.exclusive[o]),i.inclusive[o]&&(n[t].inclusive+=i.inclusive[o]),i.counts[o]&&(n[t].count+=i.counts[o])}var s=[];for(t in n)n[t].exclusive>=c&&s.push(n[t]);return s.sort(function(e,t){return t.exclusive-e.exclusive}),s}function o(e,t){for(var n,a={},i=0;i<e.length;i++){var r,o=e[i],d=l({},o.exclusive,o.inclusive);t&&(r=s(o));for(var u in d)if(!t||r[u]){var m=o.displayNames[u];n=m.owner+" > "+m.current,a[n]=a[n]||{componentName:n,time:0,count:0},o.inclusive[u]&&(a[n].time+=o.inclusive[u]),o.counts[u]&&(a[n].count+=o.counts[u])}}var p=[];for(n in a)a[n].time>=c&&p.push(a[n]);return p.sort(function(e,t){return t.time-e.time}),p}function s(e){var t={},n=Object.keys(e.writes),a=l({},e.exclusive,e.inclusive);for(var i in a){for(var r=!1,o=0;o<n.length;o++)if(0===n[o].indexOf(i)){r=!0;break}!r&&e.counts[i]>0&&(t[i]=!0)}return t}var l=e(29),c=1.2,d={_mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",TEXT_CONTENT:"set textContent",updatePropertyByID:"update attribute",deletePropertyByID:"delete attribute",updateStylesByID:"update styles",updateInnerHTMLByID:"set innerHTML",dangerouslyReplaceNodeWithMarkupByID:"replace"},u={getExclusiveSummary:r,getInclusiveSummary:o,getDOMSummary:i,getTotalTime:a};t.exports=u},{29:29}],63:[function(e,t,n){"use strict";function a(e,t){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:function(){return this._store?this._store[t]:null},set:function(e){l(!1,"Don't set the %s property of the React element. Instead, specify the correct value when initially creating the element.",t),this._store[t]=e}})}function i(e){try{var t={props:!0};for(var n in t)a(e,n);d=!0}catch(e){}}var r=e(44),o=e(45),s=e(29),l=e(171),c={key:!0,ref:!0},d=!1,u=function(e,t,n,a,i,r){this.type=e,this.key=t,this.ref=n,this._owner=a,this._context=i,this._store={props:r,originalProps:s({},r)};try{Object.defineProperty(this._store,"validated",{configurable:!1,enumerable:!1,writable:!0})}catch(e){}return this._store.validated=!1,d?void Object.freeze(this):void(this.props=r)};u.prototype={_isReactElement:!0},i(u.prototype),u.createElement=function(e,t,n){var a,i={},s=null,l=null;if(null!=t){l=void 0===t.ref?null:t.ref,s=void 0===t.key?null:""+t.key;for(a in t)t.hasOwnProperty(a)&&!c.hasOwnProperty(a)&&(i[a]=t[a])}var d=arguments.length-2;if(1===d)i.children=n;else if(d>1){for(var m=Array(d),p=0;d>p;p++)m[p]=arguments[p+2];i.children=m}if(e&&e.defaultProps){var h=e.defaultProps;for(a in h)"undefined"==typeof i[a]&&(i[a]=h[a])}return new u(e,s,l,o.current,r.current,i)},u.createFactory=function(e){var t=u.createElement.bind(null,e);return t.type=e,t},u.cloneAndReplaceProps=function(e,t){var n=new u(e.type,e.key,e.ref,e._owner,e._context,t);return n._store.validated=e._store.validated,n},u.cloneElement=function(e,t,n){var a,i=s({},e.props),r=e.key,l=e.ref,d=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,d=o.current),void 0!==t.key&&(r=""+t.key);for(a in t)t.hasOwnProperty(a)&&!c.hasOwnProperty(a)&&(i[a]=t[a])}var m=arguments.length-2;if(1===m)i.children=n;else if(m>1){for(var p=Array(m),h=0;m>h;h++)p[h]=arguments[h+2];i.children=p}return new u(e.type,r,l,d,e._context,i)},u.isValidElement=function(e){var t=!(!e||!e._isReactElement);return t},t.exports=u},{171:171,29:29,44:44,45:45}],64:[function(e,t,n){"use strict";function a(){if(y.current){var e=y.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function i(e){var t=e&&e.getPublicInstance();if(t){var n=t.constructor;return n?n.displayName||n.name||void 0:void 0}}function r(){var e=y.current;return e&&i(e)||void 0}function o(e,t){e._store.validated||null!=e.key||(e._store.validated=!0,l('Each child in an array or iterator should have a unique "key" prop.',e,t))}function s(e,t,n){T.test(e)&&l("Child objects should have non-numeric keys so ordering is preserved.",t,n)}function l(e,t,n){var a=r(),o="string"==typeof n?n:n.displayName||n.name,s=a||o,l=k[e]||(k[e]={});if(!l.hasOwnProperty(s)){l[s]=!0;var c=a?" Check the render method of "+a+".":o?" Check the React.render call using <"+o+">.":"",d="";if(t&&t._owner&&t._owner!==y.current){var u=i(t._owner);d=" It was passed a child from "+u+"."}w(!1,e+"%s%s See https://fb.me/react-warning-keys for more information.",c,d)}}function c(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var a=e[n];f.isValidElement(a)&&o(a,t)}else if(f.isValidElement(e))e._store.validated=!0;else if(e){var i=b(e);if(i){if(i!==e.entries)for(var r,l=i.call(e);!(r=l.next()).done;)f.isValidElement(r.value)&&o(r.value,t)}else if("object"==typeof e){var c=g.extractIfFragment(e);for(var d in c)c.hasOwnProperty(d)&&s(d,c[d],t)}}}function d(e,t,n,i){for(var r in t)if(t.hasOwnProperty(r)){var o;try{N("function"==typeof t[r],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e||"React class",v[i],r),o=t[r](n,r,e,i)}catch(e){o=e}if(o instanceof Error&&!(o.message in D)){D[o.message]=!0;var s=a(this);w(!1,"Failed propType: %s%s",o.message,s)}}}function u(e,t){var n=t.type,a="string"==typeof n?n:n.displayName,i=t._owner?t._owner.getPublicInstance().constructor.displayName:null,r=e+"|"+a+"|"+i;if(!x.hasOwnProperty(r)){x[r]=!0;var o="";a&&(o=" <"+a+" />");var s="";i&&(s=" The element was created by "+i+"."),w(!1,"Don't set .props.%s of the React component%s. Instead, specify the correct value when initially creating the element or use React.cloneElement to make a new element with updated props.%s",e,o,s)}}function m(e,t){return e!==e?t!==t:0===e&&0===t?1/e===1/t:e===t}function p(e){if(e._store){var t=e._store.originalProps,n=e.props;for(var a in n)n.hasOwnProperty(a)&&(t.hasOwnProperty(a)&&m(t[a],n[a])||(u(a,e),t[a]=n[a]))}}function h(e){if(null!=e.type){var t=E.getComponentClassForElement(e),n=t.displayName||t.name;t.propTypes&&d(n,t.propTypes,e.props,_.prop),"function"==typeof t.getDefaultProps&&w(t.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var f=e(63),g=e(69),_=e(85),v=e(84),y=e(45),E=e(80),b=e(141),N=e(150),w=e(171),k={},D={},T=/^\d+$/,x={},C={checkAndWarnForMutatedProps:p,createElement:function(e,t,n){w(null!=e,"React.createElement: type should not be null or undefined. It should be a string (for DOM elements) or a ReactClass (for composite components).");var a=f.createElement.apply(this,arguments);if(null==a)return a;for(var i=2;i<arguments.length;i++)c(arguments[i],e);return h(a),a},createFactory:function(e){var t=C.createElement.bind(null,e);t.type=e;try{Object.defineProperty(t,"type",{enumerable:!1,get:function(){return w(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:e}),e}})}catch(e){}return t},cloneElement:function(e,t,n){for(var a=f.cloneElement.apply(this,arguments),i=2;i<arguments.length;i++)c(arguments[i],a.type);return h(a),a}};t.exports=C},{141:141,150:150,171:171,45:45,63:63,69:69,80:80,84:84,85:85}],65:[function(e,t,n){"use strict";function a(e){d[e]=!0}function i(e){delete d[e]}function r(e){return!!d[e]}var o,s=e(63),l=e(73),c=e(150),d={},u={injectEmptyComponent:function(e){o=s.createFactory(e)}},m=function(){};m.prototype.componentDidMount=function(){var e=l.get(this);e&&a(e._rootNodeID)},m.prototype.componentWillUnmount=function(){var e=l.get(this);e&&i(e._rootNodeID)},m.prototype.render=function(){return c(o,"Trying to return null from a render, but no null placeholder component was injected."),o()};var p=s.createElement(m),h={emptyElement:p,injection:u,isNullComponentID:r};t.exports=h},{150:150,63:63,73:73}],66:[function(e,t,n){"use strict";var a={guard:function(e,t){return e}};t.exports=a},{}],67:[function(e,t,n){"use strict";function a(e){i.enqueueEvents(e),i.processEventQueue()}var i=e(18),r={handleTopLevel:function(e,t,n,r){var o=i.extractEvents(e,t,n,r);a(o)}};t.exports=r},{18:18}],68:[function(e,t,n){"use strict";function a(e){var t=u.getID(e),n=d.getReactRootIDFromNodeID(t),a=u.findReactContainerForID(n),i=u.getFirstReactDOM(a);return i}function i(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function r(e){for(var t=u.getFirstReactDOM(h(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=a(n);for(var i=0,r=e.ancestors.length;r>i;i++){t=e.ancestors[i];var o=u.getID(t)||"";g._handleTopLevel(e.topLevelType,t,o,e.nativeEvent)}}function o(e){var t=f(window);e(t)}var s=e(17),l=e(22),c=e(30),d=e(72),u=e(77),m=e(100),p=e(29),h=e(140),f=e(146);p(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(i,c.twoArgumentPooler);var g={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(e){g._handleTopLevel=e},setEnabled:function(e){g._enabled=!!e},isEnabled:function(){return g._enabled},trapBubbledEvent:function(e,t,n){var a=n;return a?s.listen(a,t,g.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var a=n;return a?s.capture(a,t,g.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=o.bind(null,e);s.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(g._enabled){var n=i.getPooled(e,t);try{m.batchedUpdates(r,n)}finally{i.release(n)}}}};t.exports=g},{100:100,140:140,146:146,17:17,22:22,29:29,30:30,72:72,77:77}],69:[function(e,t,n){"use strict";var a=e(63),i=e(171),r="_reactFragment",o="_reactDidWarn",s=!1;try{var l=function(){return 1};Object.defineProperty({},r,{enumerable:!1,value:!0}),Object.defineProperty({},"key",{enumerable:!0,get:l}),s=!0}catch(e){}var c=function(e,t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return i(this[o],"A ReactFragment is an opaque type. Accessing any of its properties is deprecated. Pass it to one of the React.Children helpers."),this[o]=!0,this[r][t]},set:function(e){i(this[o],"A ReactFragment is an immutable opaque type. Mutating its properties is deprecated."),this[o]=!0,this[r][t]=e}})},d={},u=function(e){var t="";for(var n in e)t+=n+":"+typeof e[n]+",";var a=!!d[t];return d[t]=!0,a},m={create:function(e){if("object"!=typeof e||!e||Array.isArray(e))return i(!1,"React.addons.createFragment only accepts a single object.",e),e;if(a.isValidElement(e))return i(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."),e;if(s){var t={};Object.defineProperty(t,r,{enumerable:!1,value:e}),Object.defineProperty(t,o,{writable:!0,enumerable:!1,value:!1});for(var n in e)c(t,n);return Object.preventExtensions(t),t}return e},extract:function(e){return s?e[r]?e[r]:(i(u(e),"Any use of a keyed object should be wrapped in React.addons.createFragment(object) before being passed as a child."),e):e},extractIfFragment:function(e){if(s){if(e[r])return e[r];for(var t in e)if(e.hasOwnProperty(t)&&a.isValidElement(e[t]))return m.extract(e)}return e}};t.exports=m},{171:171,63:63}],70:[function(e,t,n){"use strict";var a=e(11),i=e(18),r=e(41),o=e(38),s=e(65),l=e(33),c=e(80),d=e(48),u=e(82),m=e(91),p=e(100),h={Component:r.injection,Class:o.injection,DOMComponent:d.injection,DOMProperty:a.injection,EmptyComponent:s.injection,EventPluginHub:i.injection,EventEmitter:l.injection,NativeComponent:c.injection,Perf:u.injection,RootIndex:m.injection,Updates:p.injection};t.exports=h},{100:100,11:11,18:18,33:33,38:38,41:41,48:48,65:65,80:80,82:82,91:91}],71:[function(e,t,n){"use strict";function a(e){return r(document.documentElement,e)}var i=e(56),r=e(123),o=e(134),s=e(136),l={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:l.hasSelectionCapabilities(e)?l.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,i=e.selectionRange;t!==n&&a(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,i),o(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=i.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,a=t.end;if("undefined"==typeof a&&(a=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(a,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",n),r.moveEnd("character",a-n),r.select()}else i.setOffsets(e,t)}};t.exports=l},{123:123,134:134,136:136,56:56}],72:[function(e,t,n){"use strict";function a(e){return p+e.toString(36)}function i(e,t){return e.charAt(t)===p||t===e.length}function r(e){return""===e||e.charAt(0)===p&&e.charAt(e.length-1)!==p}function o(e,t){return 0===t.indexOf(e)&&i(t,e.length)}function s(e){return e?e.substr(0,e.lastIndexOf(p)):""}function l(e,t){if(m(r(e)&&r(t),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",e,t),m(o(e,t),"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",e,t),e===t)return e;var n,a=e.length+h;for(n=a;n<t.length&&!i(t,n);n++);return t.substr(0,n)}function c(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var a=0,o=0;n>=o;o++)if(i(e,o)&&i(t,o))a=o;else if(e.charAt(o)!==t.charAt(o))break;var s=e.substr(0,a);return m(r(s),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",e,t,s),s}function d(e,t,n,a,i,r){e=e||"",t=t||"",m(e!==t,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",e);var c=o(t,e);m(c||o(e,t),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",e,t);for(var d=0,u=c?s:l,p=e;;p=u(p,t)){var h;if(i&&p===e||r&&p===t||(h=n(p,c,a)),h===!1||p===t)break;m(d++<f,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",e,t)}}var u=e(91),m=e(150),p=".",h=p.length,f=100,g={createReactRootID:function(){return a(u.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===p&&e.length>1){var t=e.indexOf(p,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,a,i){var r=c(e,t);r!==e&&d(e,r,n,a,!1,!0),r!==t&&d(r,t,n,i,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(d("",e,t,n,!0,!1),d(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){d("",e,t,n,!0,!1)},_getFirstCommonAncestorID:c,_getNextDescendantID:l,isAncestorIDOf:o,SEPARATOR:p};t.exports=g},{150:150,91:91}],73:[function(e,t,n){"use strict";var a={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};t.exports=a},{}],74:[function(e,t,n){"use strict";var a={currentlyMountingInstance:null,currentlyUnmountingInstance:null};t.exports=a},{}],75:[function(e,t,n){"use strict";function a(e,t){this.value=e,this.requestChange=t}function i(e){var t={value:"undefined"==typeof e?r.PropTypes.any.isRequired:e.isRequired,requestChange:r.PropTypes.func.isRequired};return r.PropTypes.shape(t)}var r=e(31);a.PropTypes={link:i},t.exports=a},{31:31}],76:[function(e,t,n){"use strict";var a=e(119),i={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=a(e);return e.replace(">"," "+i.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var n=t.getAttribute(i.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var r=a(e);return r===n}};t.exports=i},{119:119}],77:[function(e,t,n){"use strict";function a(e,t){for(var n=Math.min(e.length,t.length),a=0;n>a;a++)if(e.charAt(a)!==t.charAt(a))return a;return e.length===t.length?-1:n}function i(e){var t=O(e);return t&&z.getID(t)}function r(e){var t=o(e);if(t)if(q.hasOwnProperty(t)){var n=q[t];n!==e&&($(!d(n,t),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",U,t),q[t]=e)}else q[t]=e;return t}function o(e){return e&&e.getAttribute&&e.getAttribute(U)||""}function s(e,t){var n=o(e);n!==t&&delete q[n],e.setAttribute(U,t),q[t]=e}function l(e){return q.hasOwnProperty(e)&&d(q[e],e)||(q[e]=z.findReactNodeByID(e)),q[e]}function c(e){var t=w.get(e)._rootNodeID;return b.isNullComponentID(t)?null:(q.hasOwnProperty(t)&&d(q[t],t)||(q[t]=z.findReactNodeByID(t)),q[t])}function d(e,t){if(e){$(o(e)===t,"ReactMount: Unexpected modification of `%s`",U);var n=z.findReactContainerForID(t);if(n&&S(n,e))return!0}return!1}function u(e){delete q[e]}function m(e){var t=q[e];return!(!t||!d(t,e))&&void(W=t)}function p(e){W=null,N.traverseAncestors(e,m);var t=W;return W=null,t}function h(e,t,n,a,i){var r=T.mountComponent(e,t,a,M);e._isTopLevel=!0,z._mountImageIntoNode(r,n,i)}function f(e,t,n,a){var i=C.ReactReconcileTransaction.getPooled();i.perform(h,null,e,t,n,i,a),C.ReactReconcileTransaction.release(i)}var g=e(11),_=e(33),v=e(45),y=e(63),E=e(64),b=e(65),N=e(72),w=e(73),k=e(76),D=e(82),T=e(89),x=e(99),C=e(100),M=e(130),S=e(123),O=e(144),I=e(149),$=e(150),A=e(164),P=e(167),L=e(171),R=N.SEPARATOR,U=g.ID_ATTRIBUTE_NAME,q={},j=1,H=9,F={},B={},Y={},V=[],W=null,z={_instancesByReactRootID:F,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,a){return E.checkAndWarnForMutatedProps(t),z.scrollMonitor(n,function(){x.enqueueElementInternal(e,t),a&&x.enqueueCallbackInternal(e,a)}),Y[i(n)]=O(n),e},_registerComponent:function(e,t){$(t&&(t.nodeType===j||t.nodeType===H),"_registerComponent(...): Target container is not a DOM element."),_.ensureScrollValueMonitoring();var n=z.registerContainer(t);return F[n]=e,n},_renderNewRootComponent:function(e,t,n){L(null==v.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");var a=I(e,null),i=z._registerComponent(a,t);return C.batchedUpdates(f,a,i,t,n),Y[i]=O(t),a},render:function(e,t,n){$(y.isValidElement(e),"React.render(): Invalid component element.%s","string"==typeof e?" Instead of passing an element string, make sure to instantiate it by passing it to React.createElement.":"function"==typeof e?" Instead of passing a component class, make sure to instantiate it by passing it to React.createElement.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a=F[i(t)];if(a){var r=a._currentElement;if(P(r,e))return z._updateRootComponent(a,e,t,n).getPublicInstance();z.unmountComponentAtNode(t)}var o=O(t),s=o&&z.isRenderedByReact(o);if(!s||o.nextSibling)for(var l=o;l;){if(z.isRenderedByReact(l)){L(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup.");break}l=l.nextSibling}var c=s&&!a,d=z._renderNewRootComponent(e,t,c).getPublicInstance();return n&&n.call(d),d},constructAndRenderComponent:function(e,t,n){var a=y.createElement(e,t);return z.render(a,n)},constructAndRenderComponentByID:function(e,t,n){var a=document.getElementById(n);
return $(a,'Tried to get element with id of "%s" but it is not present on the page.',n),z.constructAndRenderComponent(e,t,a)},registerContainer:function(e){var t=i(e);return t&&(t=N.getReactRootIDFromNodeID(t)),t||(t=N.createReactRootID()),B[t]=e,t},unmountComponentAtNode:function(e){L(null==v.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."),$(e&&(e.nodeType===j||e.nodeType===H),"unmountComponentAtNode(...): Target container is not a DOM element.");var t=i(e),n=F[t];return!!n&&(z.unmountComponentFromNode(n,e),delete F[t],delete B[t],delete Y[t],!0)},unmountComponentFromNode:function(e,t){for(T.unmountComponent(e),t.nodeType===H&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=N.getReactRootIDFromNodeID(e),n=B[t],a=Y[t];if(a&&a.parentNode!==n){$(o(a)===t,"ReactMount: Root element ID differed from reactRootID.");var i=n.firstChild;i&&t===o(i)?Y[t]=i:L(!1,"ReactMount: Root element has been removed from its original container. New container:",a.parentNode)}return n},findReactNodeByID:function(e){var t=z.findReactContainerForID(e);return z.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=z.getID(e);return!!t&&t.charAt(0)===R},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(z.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=V,a=0,i=p(t)||e;for(n[0]=i.firstChild,n.length=1;a<n.length;){for(var r,o=n[a++];o;){var s=z.getID(o);s?t===s?r=o:N.isAncestorIDOf(s,t)&&(n.length=a=0,n.push(o.firstChild)):n.push(o.firstChild),o=o.nextSibling}if(r)return n.length=0,r}n.length=0,$(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",t,z.getID(e))},_mountImageIntoNode:function(e,t,n){if($(t&&(t.nodeType===j||t.nodeType===H),"mountComponentIntoNode(...): Target container is not valid."),n){var i=O(t);if(k.canReuseMarkup(e,i))return;var r=i.getAttribute(k.CHECKSUM_ATTR_NAME);i.removeAttribute(k.CHECKSUM_ATTR_NAME);var o=i.outerHTML;i.setAttribute(k.CHECKSUM_ATTR_NAME,r);var s=a(e,o),l=" (client) "+e.substring(s-20,s+20)+"\n (server) "+o.substring(s-20,s+20);$(t.nodeType!==H,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",l),L(!1,"React attempted to reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server:\n%s",l)}$(t.nodeType!==H,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See React.renderToString() for server rendering."),A(t,e)},getReactRootID:i,getID:r,setID:s,getNode:l,getNodeFromInstance:c,purgeID:u};D.measureMethods(z,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),t.exports=z},{100:100,11:11,123:123,130:130,144:144,149:149,150:150,164:164,167:167,171:171,33:33,45:45,63:63,64:64,65:65,72:72,73:73,76:76,82:82,89:89,99:99}],78:[function(e,t,n){"use strict";function a(e,t,n){h.push({parentID:e,parentNode:null,type:d.INSERT_MARKUP,markupIndex:f.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function i(e,t,n){h.push({parentID:e,parentNode:null,type:d.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function r(e,t){h.push({parentID:e,parentNode:null,type:d.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function o(e,t){h.push({parentID:e,parentNode:null,type:d.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function s(){h.length&&(c.processChildrenUpdates(h,f),l())}function l(){h.length=0,f.length=0}var c=e(41),d=e(79),u=e(89),m=e(36),p=0,h=[],f=[],g={Mixin:{mountChildren:function(e,t,n){var a=m.instantiateChildren(e,t,n);this._renderedChildren=a;var i=[],r=0;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o],l=this._rootNodeID+o,c=u.mountComponent(s,l,t,n);s._mountIndex=r,i.push(c),r++}return i},updateTextContent:function(e){p++;var t=!0;try{var n=this._renderedChildren;m.unmountChildren(n);for(var a in n)n.hasOwnProperty(a)&&this._unmountChildByName(n[a],a);this.setTextContent(e),t=!1}finally{p--,p||(t?l():s())}},updateChildren:function(e,t,n){p++;var a=!0;try{this._updateChildren(e,t,n),a=!1}finally{p--,p||(a?l():s())}},_updateChildren:function(e,t,n){var a=this._renderedChildren,i=m.updateChildren(a,e,t,n);if(this._renderedChildren=i,i||a){var r,o=0,s=0;for(r in i)if(i.hasOwnProperty(r)){var l=a&&a[r],c=i[r];l===c?(this.moveChild(l,s,o),o=Math.max(l._mountIndex,o),l._mountIndex=s):(l&&(o=Math.max(l._mountIndex,o),this._unmountChildByName(l,r)),this._mountChildByNameAtIndex(c,r,s,t,n)),s++}for(r in a)!a.hasOwnProperty(r)||i&&i.hasOwnProperty(r)||this._unmountChildByName(a[r],r)}},unmountChildren:function(){var e=this._renderedChildren;m.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&i(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){a(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){r(this._rootNodeID,e._mountIndex)},setTextContent:function(e){o(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,a,i){var r=this._rootNodeID+t,o=u.mountComponent(e,r,a,i);e._mountIndex=n,this.createChild(e,o)},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null}}};t.exports=g},{36:36,41:41,79:79,89:89}],79:[function(e,t,n){"use strict";var a=e(156),i=a({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=i},{156:156}],80:[function(e,t,n){"use strict";function a(e){if("function"==typeof e.type)return e.type;var t=e.type,n=u[t];return null==n&&(u[t]=n=c(t)),n}function i(e){return l(d,"There is no registered component for the tag %s",e.type),new d(e.type,e.props)}function r(e){return new m(e)}function o(e){return e instanceof m}var s=e(29),l=e(150),c=null,d=null,u={},m=null,p={injectGenericComponentClass:function(e){d=e},injectTextComponentClass:function(e){m=e},injectComponentClasses:function(e){s(u,e)},injectAutoWrapper:function(e){c=e}},h={getComponentClassForElement:a,createInternalComponent:i,createInstanceForText:r,isTextComponent:o,injection:p};t.exports=h},{150:150,29:29}],81:[function(e,t,n){"use strict";var a=e(150),i={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){a(i.isValidOwner(n),"addComponentAsRefTo(...): Only a ReactOwner can have refs. This usually means that you're trying to add a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){a(i.isValidOwner(n),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. This usually means that you're trying to remove a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.getPublicInstance().refs[t]===e.getPublicInstance()&&n.detachRef(t)}};t.exports=i},{150:150}],82:[function(e,t,n){"use strict";function a(e,t,n){return n}var i={enableMeasure:!1,storedMeasure:a,measureMethods:function(e,t,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=i.measure(t,n[a],e[a]))},measure:function(e,t,n){var a=null,r=function(){return i.enableMeasure?(a||(a=i.storedMeasure(e,t,n)),a.apply(this,arguments)):n.apply(this,arguments)};return r.displayName=e+"_"+t,r},injection:{injectMeasure:function(e){i.storedMeasure=e}}};t.exports=i},{}],83:[function(e,t,n){"use strict";function a(e){return function(t,n,a){t.hasOwnProperty(n)?t[n]=e(t[n],a):t[n]=a}}function i(e,t){for(var n in t)if(t.hasOwnProperty(n)){var a=c[n];a&&c.hasOwnProperty(n)?a(e,n,t[n]):e.hasOwnProperty(n)||(e[n]=t[n])}return e}var r=e(29),o=e(129),s=e(155),l=a(function(e,t){return r({},t,e)}),c={children:o,className:a(s),style:l},d={mergeProps:function(e,t){return i(r({},e),t)}};t.exports=d},{129:129,155:155,29:29}],84:[function(e,t,n){"use strict";var a={};a={prop:"prop",context:"context",childContext:"child context"},t.exports=a},{}],85:[function(e,t,n){"use strict";var a=e(156),i=a({prop:null,context:null,childContext:null});t.exports=i},{156:156}],86:[function(e,t,n){"use strict";function a(e){function t(t,n,a,i,r){if(i=i||b,null==n[a]){var o=y[r];return t?new Error("Required "+o+" `"+a+"` was not specified in "+("`"+i+"`.")):null}return e(n,a,i,r)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function i(e){function t(t,n,a,i){var r=t[n],o=f(r);if(o!==e){var s=y[i],l=g(r);return new Error("Invalid "+s+" `"+n+"` of type `"+l+"` "+("supplied to `"+a+"`, expected `"+e+"`."))}return null}return a(t)}function r(){return a(E.thatReturns(null))}function o(e){function t(t,n,a,i){var r=t[n];if(!Array.isArray(r)){var o=y[i],s=f(r);return new Error("Invalid "+o+" `"+n+"` of type "+("`"+s+"` supplied to `"+a+"`, expected an array."))}for(var l=0;l<r.length;l++){var c=e(r,l,a,i);if(c instanceof Error)return c}return null}return a(t)}function s(){function e(e,t,n,a){if(!_.isValidElement(e[t])){var i=y[a];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactElement."))}return null}return a(e)}function l(e){function t(t,n,a,i){if(!(t[n]instanceof e)){var r=y[i],o=e.name||b;return new Error("Invalid "+r+" `"+n+"` supplied to "+("`"+a+"`, expected instance of `"+o+"`."))}return null}return a(t)}function c(e){function t(t,n,a,i){for(var r=t[n],o=0;o<e.length;o++)if(r===e[o])return null;var s=y[i],l=JSON.stringify(e);return new Error("Invalid "+s+" `"+n+"` of value `"+r+"` "+("supplied to `"+a+"`, expected one of "+l+"."))}return a(t)}function d(e){function t(t,n,a,i){var r=t[n],o=f(r);if("object"!==o){var s=y[i];return new Error("Invalid "+s+" `"+n+"` of type "+("`"+o+"` supplied to `"+a+"`, expected an object."))}for(var l in r)if(r.hasOwnProperty(l)){var c=e(r,l,a,i);if(c instanceof Error)return c}return null}return a(t)}function u(e){function t(t,n,a,i){for(var r=0;r<e.length;r++){var o=e[r];if(null==o(t,n,a,i))return null}var s=y[i];return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+a+"`."))}return a(t)}function m(){function e(e,t,n,a){if(!h(e[t])){var i=y[a];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return a(e)}function p(e){function t(t,n,a,i){var r=t[n],o=f(r);if("object"!==o){var s=y[i];return new Error("Invalid "+s+" `"+n+"` of type `"+o+"` "+("supplied to `"+a+"`, expected `object`."))}for(var l in e){var c=e[l];if(c){var d=c(r,l,a,i);if(d)return d}}return null}return a(t)}function h(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(h);if(null===e||_.isValidElement(e))return!0;e=v.extractIfFragment(e);for(var t in e)if(!h(e[t]))return!1;return!0;default:return!1}}function f(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function g(e){var t=f(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var _=e(63),v=e(69),y=e(84),E=e(129),b="<<anonymous>>",N=s(),w=m(),k={array:i("array"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),any:r(),arrayOf:o,element:N,instanceOf:l,node:w,objectOf:d,oneOf:c,oneOfType:u,shape:p};t.exports=k},{129:129,63:63,69:69,84:84}],87:[function(e,t,n){"use strict";function a(){this.listenersToPut=[]}var i=e(30),r=e(33),o=e(29);o(a.prototype,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];r.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),i.addPoolingTo(a),t.exports=a},{29:29,30:30,33:33}],88:[function(e,t,n){"use strict";function a(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.putListenerQueue=l.getPooled()}var i=e(7),r=e(30),o=e(33),s=e(71),l=e(87),c=e(116),d=e(29),u={initialize:s.getSelectionInformation,close:s.restoreSelection},m={initialize:function(){var e=o.isEnabled();return o.setEnabled(!1),e},close:function(e){o.setEnabled(e)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},h={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},f=[h,u,m,p],g={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null,l.release(this.putListenerQueue),this.putListenerQueue=null}};d(a.prototype,c.Mixin,g),r.addPoolingTo(a),t.exports=a},{116:116,29:29,30:30,33:33,7:7,71:71,87:87}],89:[function(e,t,n){"use strict";function a(){i.attachRefs(this,this._currentElement)}var i=e(90),r=e(64),o={mountComponent:function(e,t,n,i){var o=e.mountComponent(t,n,i);return r.checkAndWarnForMutatedProps(e._currentElement),n.getReactMountReady().enqueue(a,e),o},unmountComponent:function(e){i.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,o){var s=e._currentElement;if(t!==s||null==t._owner){r.checkAndWarnForMutatedProps(t);var l=i.shouldUpdateRefs(s,t);l&&i.detachRefs(e,s),e.receiveComponent(t,n,o),l&&n.getReactMountReady().enqueue(a,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}};t.exports=o},{64:64,90:90}],90:[function(e,t,n){"use strict";function a(e,t,n){"function"==typeof e?e(t.getPublicInstance()):r.addComponentAsRefTo(t,e,n)}function i(e,t,n){"function"==typeof e?e(null):r.removeComponentAsRefFrom(t,e,n)}var r=e(81),o={};o.attachRefs=function(e,t){var n=t.ref;null!=n&&a(n,e,t._owner)},o.shouldUpdateRefs=function(e,t){return t._owner!==e._owner||t.ref!==e.ref},o.detachRefs=function(e,t){var n=t.ref;null!=n&&i(n,e,t._owner)},t.exports=o},{81:81}],91:[function(e,t,n){"use strict";var a={injectCreateReactRootIndex:function(e){i.createReactRootIndex=e}},i={createReactRootIndex:null,injection:a};t.exports=i},{}],92:[function(e,t,n){"use strict";function a(e){u(r.isValidElement(e),"renderToString(): You must pass a valid ReactElement.");var t;try{var n=o.createReactRootID();return t=l.getPooled(!1),t.perform(function(){var a=d(e,null),i=a.mountComponent(n,t,c);return s.addChecksumToMarkup(i)},null)}finally{l.release(t)}}function i(e){u(r.isValidElement(e),"renderToStaticMarkup(): You must pass a valid ReactElement.");var t;try{var n=o.createReactRootID();return t=l.getPooled(!0),t.perform(function(){var a=d(e,null);return a.mountComponent(n,t,c)},null)}finally{l.release(t)}}var r=e(63),o=e(72),s=e(76),l=e(93),c=e(130),d=e(149),u=e(150);t.exports={renderToString:a,renderToStaticMarkup:i}},{130:130,149:149,150:150,63:63,72:72,76:76,93:93}],93:[function(e,t,n){"use strict";function a(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=r.getPooled(null),this.putListenerQueue=o.getPooled()}var i=e(30),r=e(7),o=e(87),s=e(116),l=e(29),c=e(129),d={initialize:function(){this.reactMountReady.reset()},close:c},u={initialize:function(){this.putListenerQueue.reset()},close:c},m=[u,d],p={getTransactionWrappers:function(){return m},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null,o.release(this.putListenerQueue),this.putListenerQueue=null}};l(a.prototype,s.Mixin,p),i.addPoolingTo(a),t.exports=a},{116:116,129:129,29:29,30:30,7:7,87:87}],94:[function(e,t,n){"use strict";function a(e,t){var n={};return function(a){n[t]=a,e.setState(n)}}var i={createStateSetter:function(e,t){return function(n,a,i,r,o,s){var l=t.call(e,n,a,i,r,o,s);l&&e.setState(l)}},createStateKeySetter:function(e,t){var n=e.__keySetters||(e.__keySetters={});return n[t]||(n[t]=a(e,t))}};i.Mixin={createStateSetter:function(e){return i.createStateSetter(this,e)},createStateKeySetter:function(e){return i.createStateKeySetter(this,e)}},t.exports=i},{}],95:[function(e,t,n){"use strict";function a(e){}function i(e){return function(t,n){var i;w.isDOMComponent(t)?i=t.getDOMNode():t.tagName&&(i=t);var r=new a;r.target=i;var o=new y(p.eventNameDispatchConfigs[e],_.getID(i),r);E(o,n),c.accumulateTwoPhaseDispatches(o),v.batchedUpdates(function(){l.enqueueEvents(o),l.processEventQueue()})}}function r(){w.Simulate={};var e;for(e in p.eventNameDispatchConfigs)w.Simulate[e]=i(e)}function o(e){return function(t,n){var i=new a(e);E(i,n),w.isDOMComponent(t)?w.simulateNativeEventOnDOMComponent(e,t,i):t.tagName&&w.simulateNativeEventOnNode(e,t,i)}}var s=e(16),l=e(18),c=e(21),d=e(31),u=e(63),m=e(65),p=e(33),h=e(43),f=e(72),g=e(73),_=e(77),v=e(100),y=e(108),E=e(29),b=e(130),N=s.topLevelTypes,w={renderIntoDocument:function(e){var t=document.createElement("div");return d.render(e,t)},isElement:function(e){return u.isValidElement(e)},isElementOfType:function(e,t){return u.isValidElement(e)&&e.type===t},isDOMComponent:function(e){return!!(e&&e.tagName&&e.getDOMNode)},isDOMComponentElement:function(e){return!!(e&&u.isValidElement(e)&&e.tagName)},isCompositeComponent:function(e){return"function"==typeof e.render&&"function"==typeof e.setState},isCompositeComponentWithType:function(e,t){return!(!w.isCompositeComponent(e)||e.constructor!==t)},isCompositeComponentElement:function(e){if(!u.isValidElement(e))return!1;var t=e.type.prototype;return"function"==typeof t.render&&"function"==typeof t.setState},isCompositeComponentElementWithType:function(e,t){return!(!w.isCompositeComponentElement(e)||e.constructor!==t)},getRenderedChildOfCompositeComponent:function(e){if(!w.isCompositeComponent(e))return null;var t=g.get(e);return t._renderedComponent.getPublicInstance()},findAllInRenderedTree:function(e,t){if(!e)return[];var n=t(e)?[e]:[];if(w.isDOMComponent(e)){var a,i=g.get(e),r=i._renderedComponent._renderedChildren;for(a in r)r.hasOwnProperty(a)&&r[a].getPublicInstance&&(n=n.concat(w.findAllInRenderedTree(r[a].getPublicInstance(),t)))}else w.isCompositeComponent(e)&&(n=n.concat(w.findAllInRenderedTree(w.getRenderedChildOfCompositeComponent(e),t)));return n},scryRenderedDOMComponentsWithClass:function(e,t){return w.findAllInRenderedTree(e,function(e){var n=e.props.className;return w.isDOMComponent(e)&&n&&-1!==(" "+n+" ").indexOf(" "+t+" ")})},findRenderedDOMComponentWithClass:function(e,t){var n=w.scryRenderedDOMComponentsWithClass(e,t);if(1!==n.length)throw new Error("Did not find exactly one match (found: "+n.length+") for class:"+t);return n[0]},scryRenderedDOMComponentsWithTag:function(e,t){return w.findAllInRenderedTree(e,function(e){return w.isDOMComponent(e)&&e.tagName===t.toUpperCase()})},findRenderedDOMComponentWithTag:function(e,t){var n=w.scryRenderedDOMComponentsWithTag(e,t);if(1!==n.length)throw new Error("Did not find exactly one match for tag:"+t);return n[0]},scryRenderedComponentsWithType:function(e,t){return w.findAllInRenderedTree(e,function(e){return w.isCompositeComponentWithType(e,t)})},findRenderedComponentWithType:function(e,t){var n=w.scryRenderedComponentsWithType(e,t);if(1!==n.length)throw new Error("Did not find exactly one match for componentType:"+t);return n[0]},mockComponent:function(e,t){return t=t||e.mockTagName||"div",e.prototype.render.mockImplementation(function(){return d.createElement(t,null,this.props.children)}),this},simulateNativeEventOnNode:function(e,t,n){n.target=t,p.ReactEventListener.dispatchEvent(e,n)},simulateNativeEventOnDOMComponent:function(e,t,n){w.simulateNativeEventOnNode(e,t.getDOMNode(),n)},nativeTouchData:function(e,t){return{touches:[{pageX:e,pageY:t}]}},createRenderer:function(){return new k},Simulate:null,SimulateNative:{}},k=function(){this._instance=null};k.prototype.getRenderOutput=function(){return this._instance&&this._instance._renderedComponent&&this._instance._renderedComponent._renderedOutput||null};var D=function(e){this._renderedOutput=e,this._currentElement=null===e||e===!1?m.emptyElement:e};D.prototype={mountComponent:function(){},receiveComponent:function(e){this._renderedOutput=e,this._currentElement=null===e||e===!1?m.emptyElement:e},unmountComponent:function(){}};var T=function(){};E(T.prototype,h.Mixin,{_instantiateReactComponent:function(e){return new D(e)},_replaceNodeWithMarkupByID:function(){},_renderValidatedComponent:h.Mixin._renderValidatedComponentWithoutOwnerOrContext}),k.prototype.render=function(e,t){t||(t=b);var n=v.ReactReconcileTransaction.getPooled();this._render(e,n,t),v.ReactReconcileTransaction.release(n)},k.prototype.unmount=function(){this._instance&&this._instance.unmountComponent()},k.prototype._render=function(e,t,n){if(this._instance)this._instance.receiveComponent(e,t,n);else{var a=f.createReactRootID(),i=new T(e.type);i.construct(e),i.mountComponent(a,t,n),this._instance=i}};var x=l.injection.injectEventPluginOrder;l.injection.injectEventPluginOrder=function(){x.apply(this,arguments),r()};var C=l.injection.injectEventPluginsByName;l.injection.injectEventPluginsByName=function(){C.apply(this,arguments),r()},r();var M;for(M in N){var S=0===M.indexOf("top")?M.charAt(3).toLowerCase()+M.substr(4):M;w.SimulateNative[S]=o(M)}t.exports=w},{100:100,108:108,130:130,16:16,18:18,21:21,29:29,31:31,33:33,43:43,63:63,65:65,72:72,73:73,77:77}],96:[function(e,t,n){"use strict";var a=e(37),i=e(69),r={getChildMapping:function(e){return e?i.extract(a.map(e,function(e){return e})):e},mergeChildMappings:function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var a={},i=[];for(var r in e)t.hasOwnProperty(r)?i.length&&(a[r]=i,i=[]):i.push(r);var o,s={};for(var l in t){if(a.hasOwnProperty(l))for(o=0;o<a[l].length;o++){var c=a[l][o];s[a[l][o]]=n(c)}s[l]=n(l)}for(o=0;o<i.length;o++)s[i[o]]=n(i[o]);return s}};t.exports=r},{37:37,69:69}],97:[function(e,t,n){"use strict";function a(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete s.animationend.animation,"TransitionEvent"in window||delete s.transitionend.transition;for(var n in s){var a=s[n];for(var i in a)if(i in t){l.push(a[i]);break}}}function i(e,t,n){e.addEventListener(t,n,!1)}function r(e,t,n){e.removeEventListener(t,n,!1)}var o=e(22),s={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},l=[];o.canUseDOM&&a();var c={addEndEventListener:function(e,t){return 0===l.length?void window.setTimeout(t,0):void l.forEach(function(n){i(e,n,t)})},removeEndEventListener:function(e,t){0!==l.length&&l.forEach(function(n){r(e,n,t)})}};t.exports=c},{22:22}],98:[function(e,t,n){"use strict";var a=e(31),i=e(96),r=e(29),o=e(122),s=e(129),l=a.createClass({displayName:"ReactTransitionGroup",propTypes:{component:a.PropTypes.any,childFactory:a.PropTypes.func},getDefaultProps:function(){return{component:"span",childFactory:s.thatReturnsArgument}},getInitialState:function(){return{children:i.getChildMapping(this.props.children)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidMount:function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},componentWillReceiveProps:function(e){var t=i.getChildMapping(e.children),n=this.state.children;this.setState({children:i.mergeChildMappings(n,t)});var a;for(a in t){var r=n&&n.hasOwnProperty(a);!t[a]||r||this.currentlyTransitioningKeys[a]||this.keysToEnter.push(a)}for(a in n){var o=t&&t.hasOwnProperty(a);!n[a]||o||this.currentlyTransitioningKeys[a]||this.keysToLeave.push(a)}},componentDidUpdate:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},performAppear:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)},_handleDoneAppearing:function(e){var t=this.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e];var n=i.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)||this.performLeave(e)},performEnter:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)},_handleDoneEntering:function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var n=i.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)||this.performLeave(e)},performLeave:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)},_handleDoneLeaving:function(e){var t=this.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var n=i.getChildMapping(this.props.children);if(n&&n.hasOwnProperty(e))this.performEnter(e);else{var a=r({},this.state.children);delete a[e],this.setState({children:a})}},render:function(){var e=[];for(var t in this.state.children){var n=this.state.children[t];n&&e.push(o(this.props.childFactory(n),{ref:t,key:t}))}return a.createElement(this.props.component,this.props,e)}});t.exports=l},{122:122,129:129,29:29,31:31,96:96}],99:[function(e,t,n){"use strict";function a(e){e!==r.currentlyMountingInstance&&c.enqueueUpdate(e)}function i(e,t){u(null==o.current,"%s(...): Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state.",t);var n=l.get(e);return n?n===r.currentlyUnmountingInstance?null:n:(m(!t,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op.",t,t),null)}var r=e(74),o=e(45),s=e(63),l=e(73),c=e(100),d=e(29),u=e(150),m=e(171),p={enqueueCallback:function(e,t){u("function"==typeof t,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable.");var n=i(e);return n&&n!==r.currentlyMountingInstance?(n._pendingCallbacks?n._pendingCallbacks.push(t):n._pendingCallbacks=[t],void a(n)):null},enqueueCallbackInternal:function(e,t){u("function"==typeof t,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."),e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],a(e)},enqueueForceUpdate:function(e){var t=i(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,a(t))},enqueueReplaceState:function(e,t){var n=i(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,a(n))},enqueueSetState:function(e,t){var n=i(e,"setState");if(n){var r=n._pendingStateQueue||(n._pendingStateQueue=[]);r.push(t),a(n)}},enqueueSetProps:function(e,t){var n=i(e,"setProps");if(n){u(n._isTopLevel,"setProps(...): You called `setProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created.");var r=n._pendingElement||n._currentElement,o=d({},r.props,t);n._pendingElement=s.cloneAndReplaceProps(r,o),a(n)}},enqueueReplaceProps:function(e,t){var n=i(e,"replaceProps");if(n){u(n._isTopLevel,"replaceProps(...): You called `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created.");var r=n._pendingElement||n._currentElement;n._pendingElement=s.cloneAndReplaceProps(r,t),a(n)}},enqueueElementInternal:function(e,t){e._pendingElement=t,a(e)}};t.exports=p},{100:100,150:150,171:171,29:29,45:45,63:63,73:73,74:74}],100:[function(e,t,n){"use strict";function a(){_(C.ReactReconcileTransaction&&N,"ReactUpdates: must inject a reconcile transaction class and batching strategy")}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=d.getPooled(),this.reconcileTransaction=C.ReactReconcileTransaction.getPooled()}function r(e,t,n,i,r){a(),N.batchedUpdates(e,t,n,i,r)}function o(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;_(t===y.length,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",t,y.length),y.sort(o);for(var n=0;t>n;n++){var a=y[n],i=a._pendingCallbacks;if(a._pendingCallbacks=null,h.performUpdateIfNecessary(a,e.reconcileTransaction),i)for(var r=0;r<i.length;r++)e.callbackQueue.enqueue(i[r],a.getPublicInstance())}}function l(e){return a(),v(null==m.current,"enqueueUpdate(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."),N.isBatchingUpdates?void y.push(e):void N.batchedUpdates(l,e)}function c(e,t){_(N.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),E.enqueue(e,t),b=!0}var d=e(7),u=e(30),m=e(45),p=e(82),h=e(89),f=e(116),g=e(29),_=e(150),v=e(171),y=[],E=d.getPooled(),b=!1,N=null,w={initialize:function(){this.dirtyComponentsLength=y.length},close:function(){this.dirtyComponentsLength!==y.length?(y.splice(0,this.dirtyComponentsLength),T()):y.length=0}},k={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},D=[w,k];g(i.prototype,f.Mixin,{getTransactionWrappers:function(){return D},destructor:function(){this.dirtyComponentsLength=null,d.release(this.callbackQueue),this.callbackQueue=null,C.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return f.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),u.addPoolingTo(i);var T=function(){for(;y.length||b;){if(y.length){var e=i.getPooled();e.perform(s,null,e),i.release(e)}if(b){b=!1;var t=E;E=d.getPooled(),t.notifyAll(),d.release(t)}}};T=p.measure("ReactUpdates","flushBatchedUpdates",T);var x={injectReconcileTransaction:function(e){
_(e,"ReactUpdates: must provide a reconcile transaction class"),C.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){_(e,"ReactUpdates: must provide a batching strategy"),_("function"==typeof e.batchedUpdates,"ReactUpdates: must provide a batchedUpdates() function"),_("boolean"==typeof e.isBatchingUpdates,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"),N=e}},C={ReactReconcileTransaction:null,batchedUpdates:r,enqueueUpdate:l,flushBatchedUpdates:T,injection:x,asap:c};t.exports=C},{116:116,150:150,171:171,29:29,30:30,45:45,7:7,82:82,89:89}],101:[function(e,t,n){"use strict";var a=e(11),i=a.injection.MUST_USE_ATTRIBUTE,r={Properties:{clipPath:i,cx:i,cy:i,d:i,dx:i,dy:i,fill:i,fillOpacity:i,fontFamily:i,fontSize:i,fx:i,fy:i,gradientTransform:i,gradientUnits:i,markerEnd:i,markerMid:i,markerStart:i,offset:i,opacity:i,patternContentUnits:i,patternUnits:i,points:i,preserveAspectRatio:i,r:i,rx:i,ry:i,spreadMethod:i,stopColor:i,stopOpacity:i,stroke:i,strokeDasharray:i,strokeLinecap:i,strokeOpacity:i,strokeWidth:i,textAnchor:i,transform:i,version:i,viewBox:i,x1:i,x2:i,x:i,y1:i,y2:i,y:i},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=r},{11:11}],102:[function(e,t,n){"use strict";function a(e){if("selectionStart"in e&&s.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(e){if(v||null==f||f!==c())return null;var t=a(f);if(!_||!m(_,t)){_=t;var n=l.getPooled(h.select,g,e);return n.type="select",n.target=f,o.accumulateTwoPhaseDispatches(n),n}}var r=e(16),o=e(21),s=e(71),l=e(108),c=e(136),d=e(153),u=e(157),m=e(166),p=r.topLevelTypes,h={select:{phasedRegistrationNames:{bubbled:u({onSelect:null}),captured:u({onSelectCapture:null})},dependencies:[p.topBlur,p.topContextMenu,p.topFocus,p.topKeyDown,p.topMouseDown,p.topMouseUp,p.topSelectionChange]}},f=null,g=null,_=null,v=!1,y={eventTypes:h,extractEvents:function(e,t,n,a){switch(e){case p.topFocus:(d(t)||"true"===t.contentEditable)&&(f=t,g=n,_=null);break;case p.topBlur:f=null,g=null,_=null;break;case p.topMouseDown:v=!0;break;case p.topContextMenu:case p.topMouseUp:return v=!1,i(a);case p.topSelectionChange:case p.topKeyDown:case p.topKeyUp:return i(a)}}};t.exports=y},{108:108,136:136,153:153,157:157,16:16,166:166,21:21,71:71}],103:[function(e,t,n){"use strict";var a=Math.pow(2,53),i={createReactRootIndex:function(){return Math.ceil(Math.random()*a)}};t.exports=i},{}],104:[function(e,t,n){"use strict";var a=e(16),i=e(20),r=e(21),o=e(105),s=e(108),l=e(109),c=e(111),d=e(112),u=e(107),m=e(113),p=e(114),h=e(115),f=e(137),g=e(150),_=e(157),v=e(171),y=a.topLevelTypes,E={blur:{phasedRegistrationNames:{bubbled:_({onBlur:!0}),captured:_({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:_({onClick:!0}),captured:_({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:_({onContextMenu:!0}),captured:_({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:_({onCopy:!0}),captured:_({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:_({onCut:!0}),captured:_({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:_({onDoubleClick:!0}),captured:_({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:_({onDrag:!0}),captured:_({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:_({onDragEnd:!0}),captured:_({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:_({onDragEnter:!0}),captured:_({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:_({onDragExit:!0}),captured:_({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:_({onDragLeave:!0}),captured:_({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:_({onDragOver:!0}),captured:_({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:_({onDragStart:!0}),captured:_({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:_({onDrop:!0}),captured:_({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:_({onFocus:!0}),captured:_({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:_({onInput:!0}),captured:_({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:_({onKeyDown:!0}),captured:_({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:_({onKeyPress:!0}),captured:_({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:_({onKeyUp:!0}),captured:_({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:_({onLoad:!0}),captured:_({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:_({onError:!0}),captured:_({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:_({onMouseDown:!0}),captured:_({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:_({onMouseMove:!0}),captured:_({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:_({onMouseOut:!0}),captured:_({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:_({onMouseOver:!0}),captured:_({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:_({onMouseUp:!0}),captured:_({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:_({onPaste:!0}),captured:_({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:_({onReset:!0}),captured:_({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:_({onScroll:!0}),captured:_({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:_({onSubmit:!0}),captured:_({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:_({onTouchCancel:!0}),captured:_({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:_({onTouchEnd:!0}),captured:_({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:_({onTouchMove:!0}),captured:_({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:_({onTouchStart:!0}),captured:_({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:_({onWheel:!0}),captured:_({onWheelCapture:!0})}}},b={topBlur:E.blur,topClick:E.click,topContextMenu:E.contextMenu,topCopy:E.copy,topCut:E.cut,topDoubleClick:E.doubleClick,topDrag:E.drag,topDragEnd:E.dragEnd,topDragEnter:E.dragEnter,topDragExit:E.dragExit,topDragLeave:E.dragLeave,topDragOver:E.dragOver,topDragStart:E.dragStart,topDrop:E.drop,topError:E.error,topFocus:E.focus,topInput:E.input,topKeyDown:E.keyDown,topKeyPress:E.keyPress,topKeyUp:E.keyUp,topLoad:E.load,topMouseDown:E.mouseDown,topMouseMove:E.mouseMove,topMouseOut:E.mouseOut,topMouseOver:E.mouseOver,topMouseUp:E.mouseUp,topPaste:E.paste,topReset:E.reset,topScroll:E.scroll,topSubmit:E.submit,topTouchCancel:E.touchCancel,topTouchEnd:E.touchEnd,topTouchMove:E.touchMove,topTouchStart:E.touchStart,topWheel:E.wheel};for(var N in b)b[N].dependencies=[N];var w={eventTypes:E,executeDispatch:function(e,t,n){var a=i.executeDispatch(e,t,n);v("boolean"!=typeof a,"Returning `false` from an event handler is deprecated and will be ignored in a future release. Instead, manually call e.stopPropagation() or e.preventDefault(), as appropriate."),a===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,a){var i=b[e];if(!i)return null;var _;switch(e){case y.topInput:case y.topLoad:case y.topError:case y.topReset:case y.topSubmit:_=s;break;case y.topKeyPress:if(0===f(a))return null;case y.topKeyDown:case y.topKeyUp:_=c;break;case y.topBlur:case y.topFocus:_=l;break;case y.topClick:if(2===a.button)return null;case y.topContextMenu:case y.topDoubleClick:case y.topMouseDown:case y.topMouseMove:case y.topMouseOut:case y.topMouseOver:case y.topMouseUp:_=d;break;case y.topDrag:case y.topDragEnd:case y.topDragEnter:case y.topDragExit:case y.topDragLeave:case y.topDragOver:case y.topDragStart:case y.topDrop:_=u;break;case y.topTouchCancel:case y.topTouchEnd:case y.topTouchMove:case y.topTouchStart:_=m;break;case y.topScroll:_=p;break;case y.topWheel:_=h;break;case y.topCopy:case y.topCut:case y.topPaste:_=o}g(_,"SimpleEventPlugin: Unhandled event type, `%s`.",e);var v=_.getPooled(i,n,a);return r.accumulateTwoPhaseDispatches(v),v}};t.exports=w},{105:105,107:107,108:108,109:109,111:111,112:112,113:113,114:114,115:115,137:137,150:150,157:157,16:16,171:171,20:20,21:21}],105:[function(e,t,n){"use strict";function a(e,t,n){i.call(this,e,t,n)}var i=e(108),r={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};i.augmentClass(a,r),t.exports=a},{108:108}],106:[function(e,t,n){"use strict";function a(e,t,n){i.call(this,e,t,n)}var i=e(108),r={data:null};i.augmentClass(a,r),t.exports=a},{108:108}],107:[function(e,t,n){"use strict";function a(e,t,n){i.call(this,e,t,n)}var i=e(112),r={dataTransfer:null};i.augmentClass(a,r),t.exports=a},{112:112}],108:[function(e,t,n){"use strict";function a(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var a=this.constructor.Interface;for(var i in a)if(a.hasOwnProperty(i)){var r=a[i];r?this[i]=r(n):this[i]=n[i]}var s=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;s?this.isDefaultPrevented=o.thatReturnsTrue:this.isDefaultPrevented=o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse}var i=e(30),r=e(29),o=e(129),s=e(140),l={type:null,target:s,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};r(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=o.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=o.thatReturnsTrue},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),a.Interface=l,a.augmentClass=function(e,t){var n=this,a=Object.create(n.prototype);r(a,e.prototype),e.prototype=a,e.prototype.constructor=e,e.Interface=r({},n.Interface,t),e.augmentClass=n.augmentClass,i.addPoolingTo(e,i.threeArgumentPooler)},i.addPoolingTo(a,i.threeArgumentPooler),t.exports=a},{129:129,140:140,29:29,30:30}],109:[function(e,t,n){"use strict";function a(e,t,n){i.call(this,e,t,n)}var i=e(114),r={relatedTarget:null};i.augmentClass(a,r),t.exports=a},{114:114}],110:[function(e,t,n){"use strict";function a(e,t,n){i.call(this,e,t,n)}var i=e(108),r={data:null};i.augmentClass(a,r),t.exports=a},{108:108}],111:[function(e,t,n){"use strict";function a(e,t,n){i.call(this,e,t,n)}var i=e(114),r=e(137),o=e(138),s=e(139),l={key:o,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?r(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?r(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};i.augmentClass(a,l),t.exports=a},{114:114,137:137,138:138,139:139}],112:[function(e,t,n){"use strict";function a(e,t,n){i.call(this,e,t,n)}var i=e(114),r=e(117),o=e(139),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:o,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+r.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+r.currentScrollTop}};i.augmentClass(a,s),t.exports=a},{114:114,117:117,139:139}],113:[function(e,t,n){"use strict";function a(e,t,n){i.call(this,e,t,n)}var i=e(114),r=e(139),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:r};i.augmentClass(a,o),t.exports=a},{114:114,139:139}],114:[function(e,t,n){"use strict";function a(e,t,n){i.call(this,e,t,n)}var i=e(108),r=e(140),o={view:function(e){if(e.view)return e.view;var t=r(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};i.augmentClass(a,o),t.exports=a},{108:108,140:140}],115:[function(e,t,n){"use strict";function a(e,t,n){i.call(this,e,t,n)}var i=e(112),r={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(a,r),t.exports=a},{112:112}],116:[function(e,t,n){"use strict";var a=e(150),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,i,r,o,s,l){a(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction.");var c,d;try{this._isInTransaction=!0,c=!0,this.initializeAll(0),d=e.call(t,n,i,r,o,s,l),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return d},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var a=t[n];try{this.wrapperInitData[n]=r.OBSERVED_ERROR,this.wrapperInitData[n]=a.initialize?a.initialize.call(this):null}finally{if(this.wrapperInitData[n]===r.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){a(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open.");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i,o=t[n],s=this.wrapperInitData[n];try{i=!0,s!==r.OBSERVED_ERROR&&o.close&&o.close.call(this,s),i=!1}finally{if(i)try{this.closeAll(n+1)}catch(e){}}}this.wrapperInitData.length=0}},r={Mixin:i,OBSERVED_ERROR:{}};t.exports=r},{150:150}],117:[function(e,t,n){"use strict";var a={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){a.currentScrollLeft=e.x,a.currentScrollTop=e.y}};t.exports=a},{}],118:[function(e,t,n){"use strict";function a(e,t){if(i(null!=t,"accumulateInto(...): Accumulated items must not be null or undefined."),null==e)return t;var n=Array.isArray(e),a=Array.isArray(t);return n&&a?(e.push.apply(e,t),e):n?(e.push(t),e):a?[e].concat(t):[e,t]}var i=e(150);t.exports=a},{150:150}],119:[function(e,t,n){"use strict";function a(e){for(var t=1,n=0,a=0;a<e.length;a++)t=(t+e.charCodeAt(a))%i,n=(n+t)%i;return t|n<<16}var i=65521;t.exports=a},{}],120:[function(e,t,n){function a(e){return e.replace(i,function(e,t){return t.toUpperCase()})}var i=/-(.)/g;t.exports=a},{}],121:[function(e,t,n){"use strict";function a(e){return i(e.replace(r,"ms-"))}var i=e(120),r=/^-ms-/;t.exports=a},{120:120}],122:[function(e,t,n){"use strict";function a(e,t){s(!e.ref,"You are calling cloneWithProps() on a child with a ref. This is dangerous because you're creating a new child which will not be added as a ref to its parent.");var n=r.mergeProps(t,e.props);return!n.hasOwnProperty(l)&&e.props.hasOwnProperty(l)&&(n.children=e.props.children),i.createElement(e.type,n)}var i=e(63),r=e(83),o=e(157),s=e(171),l=o({children:null});t.exports=a},{157:157,171:171,63:63,83:83}],123:[function(e,t,n){function a(e,t){return!(!e||!t)&&(e===t||!i(e)&&(i(t)?a(e,t.parentNode):e.contains?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var i=e(154);t.exports=a},{154:154}],124:[function(e,t,n){function a(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function i(e){return a(e)?Array.isArray(e)?e.slice():r(e):[e]}var r=e(168);t.exports=i},{168:168}],125:[function(e,t,n){"use strict";function a(e){var t=r.createFactory(e),n=i.createClass({tagName:e.toUpperCase(),displayName:"ReactFullPageComponent"+e,componentWillUnmount:function(){o(!1,"%s tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this.constructor.displayName)},render:function(){return t(this.props)}});return n}var i=e(38),r=e(63),o=e(150);t.exports=a},{150:150,38:38,63:63}],126:[function(e,t,n){function a(e){var t=e.match(d);return t&&t[1].toLowerCase()}function i(e,t){var n=c;l(!!c,"createNodesFromMarkup dummy not initialized");var i=a(e),r=i&&s(i);if(r){n.innerHTML=r[1]+e+r[2];for(var d=r[0];d--;)n=n.lastChild}else n.innerHTML=e;var u=n.getElementsByTagName("script");u.length&&(l(t,"createNodesFromMarkup(...): Unexpected <script> element rendered."),o(u).forEach(t));for(var m=o(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return m}var r=e(22),o=e(124),s=e(142),l=e(150),c=r.canUseDOM?document.createElement("div"):null,d=/^\s*<(\w+)/;t.exports=i},{124:124,142:142,150:150,22:22}],127:[function(e,t,n){"use strict";function a(e){return i(r,"React.addons.classSet will be deprecated in a future version. See http://fb.me/react-addons-classset"),r=!0,"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}).join(" "):Array.prototype.join.call(arguments," ")}var i=e(171),r=!1;t.exports=a},{171:171}],128:[function(e,t,n){"use strict";function a(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var a=isNaN(t);return a||0===t||r.hasOwnProperty(e)&&r[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var i=e(5),r=i.isUnitlessNumber;t.exports=a},{5:5}],129:[function(e,t,n){function a(e){return function(){return e}}function i(){}i.thatReturns=a,i.thatReturnsFalse=a(!1),i.thatReturnsTrue=a(!0),i.thatReturnsNull=a(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},t.exports=i},{}],130:[function(e,t,n){"use strict";var a={};Object.freeze(a),t.exports=a},{}],131:[function(e,t,n){"use strict";function a(e){return r[e]}function i(e){return(""+e).replace(o,a)}var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;t.exports=i},{}],132:[function(e,t,n){"use strict";function a(e){var t=i.current;return null!==t&&(c(t._warnedAboutRefsInRender,"%s is accessing getDOMNode or findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",t.getName()||"A component"),t._warnedAboutRefsInRender=!0),null==e?null:l(e)?e:r.has(e)?o.getNodeFromInstance(e):(s(null==e.render||"function"!=typeof e.render,"Component (with keys: %s) contains `render` method but is not mounted in the DOM",Object.keys(e)),void s(!1,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(e)))}var i=e(45),r=e(73),o=e(77),s=e(150),l=e(152),c=e(171);t.exports=a},{150:150,152:152,171:171,45:45,73:73,77:77}],133:[function(e,t,n){"use strict";function a(e,t,n){var a=e,i=!a.hasOwnProperty(n);o(i,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n),i&&null!=t&&(a[n]=t)}function i(e){if(null==e)return e;var t={};return r(e,a,t),t}var r=e(169),o=e(171);t.exports=i},{169:169,171:171}],134:[function(e,t,n){"use strict";function a(e){try{e.focus()}catch(e){}}t.exports=a},{}],135:[function(e,t,n){"use strict";var a=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=a},{}],136:[function(e,t,n){function a(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=a},{}],137:[function(e,t,n){"use strict";function a(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}t.exports=a},{}],138:[function(e,t,n){"use strict";function a(e){if(e.key){var t=r[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=i(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?o[e.keyCode]||"Unidentified":""}var i=e(137),r={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=a},{137:137}],139:[function(e,t,n){"use strict";function a(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var a=r[e];return!!a&&!!n[a]}function i(e){return a}var r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=i},{}],140:[function(e,t,n){"use strict";function a(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}t.exports=a},{}],141:[function(e,t,n){"use strict";function a(e){var t=e&&(i&&e[i]||e[r]);return"function"==typeof t?t:void 0}var i="function"==typeof Symbol&&Symbol.iterator,r="@@iterator";t.exports=a},{}],142:[function(e,t,n){function a(e){return r(!!o,"Markup wrapping node not initialized"),m.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||("*"===e?o.innerHTML="<link />":o.innerHTML="<"+e+"></"+e+">",s[e]=!o.firstChild),s[e]?m[e]:null}var i=e(22),r=e(150),o=i.canUseDOM?document.createElement("div"):null,s={circle:!0,clipPath:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},l=[1,'<select multiple="true">',"</select>"],c=[1,"<table>","</table>"],d=[3,"<table><tbody><tr>","</tr></tbody></table>"],u=[1,"<svg>","</svg>"],m={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:c,colgroup:c,tbody:c,tfoot:c,thead:c,td:d,th:d,circle:u,clipPath:u,defs:u,ellipse:u,g:u,line:u,linearGradient:u,path:u,polygon:u,polyline:u,radialGradient:u,rect:u,stop:u,text:u};t.exports=a},{150:150,22:22}],143:[function(e,t,n){"use strict";function a(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function r(e,t){for(var n=a(e),r=0,o=0;n;){if(3===n.nodeType){if(o=r+n.textContent.length,t>=r&&o>=t)return{node:n,offset:t-r};r=o}n=a(i(n))}}t.exports=r},{}],144:[function(e,t,n){"use strict";function a(e){return e?e.nodeType===i?e.documentElement:e.firstChild:null}var i=9;t.exports=a},{}],145:[function(e,t,n){"use strict";function a(){return!r&&i.canUseDOM&&(r="textContent"in document.documentElement?"textContent":"innerText"),r}var i=e(22),r=null;t.exports=a},{22:22}],146:[function(e,t,n){"use strict";function a(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=a},{}],147:[function(e,t,n){function a(e){return e.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;t.exports=a},{}],148:[function(e,t,n){"use strict";function a(e){return i(e).replace(r,"-ms-")}var i=e(147),r=/^ms-/;t.exports=a},{147:147}],149:[function(e,t,n){"use strict";function a(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function i(e,t){var n;if((null===e||e===!1)&&(e=o.emptyElement),"object"==typeof e){var i=e;d(i&&("function"==typeof i.type||"string"==typeof i.type),"Only functions or strings can be mounted as React components."),n=t===i.type&&"string"==typeof i.type?s.createInternalComponent(i):a(i.type)?new i.type(i):new u}else"string"==typeof e||"number"==typeof e?n=s.createInstanceForText(e):c(!1,"Encountered invalid React node of type %s",typeof e);return d("function"==typeof n.construct&&"function"==typeof n.mountComponent&&"function"==typeof n.receiveComponent&&"function"==typeof n.unmountComponent,"Only React Components can be mounted."),n.construct(e),n._mountIndex=0,n._mountImage=null,n._isOwnerNecessary=!1,n._warnedAboutRefsInRender=!1,Object.preventExtensions&&Object.preventExtensions(n),n}var r=e(43),o=e(65),s=e(80),l=e(29),c=e(150),d=e(171),u=function(){};l(u.prototype,r.Mixin,{_instantiateReactComponent:i}),t.exports=i},{150:150,171:171,29:29,43:43,65:65,80:80}],150:[function(e,t,n){"use strict";var a=function(e,t,n,a,i,r,o,s){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,a,i,r,o,s],d=0;l=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return c[d++]}))}throw l.framesToPop=1,l}};t.exports=a},{}],151:[function(e,t,n){"use strict";function a(e,t){if(!r.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,a=n in document;if(!a){var o=document.createElement("div");o.setAttribute(n,"return;"),a="function"==typeof o[n]}return!a&&i&&"wheel"===e&&(a=document.implementation.hasFeature("Events.wheel","3.0")),a}var i,r=e(22);r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=a},{22:22}],152:[function(e,t,n){function a(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}t.exports=a},{}],153:[function(e,t,n){"use strict";function a(e){return e&&("INPUT"===e.nodeName&&i[e.type]||"TEXTAREA"===e.nodeName)}var i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=a},{}],154:[function(e,t,n){function a(e){return i(e)&&3==e.nodeType}var i=e(152);t.exports=a},{152:152}],155:[function(e,t,n){"use strict";function a(e){e||(e="");var t,n=arguments.length;if(n>1)for(var a=1;n>a;a++)t=arguments[a],t&&(e=(e?e+" ":"")+t);return e}t.exports=a},{}],156:[function(e,t,n){"use strict";var a=e(150),i=function(e){var t,n={};a(e instanceof Object&&!Array.isArray(e),"keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};t.exports=i},{150:150}],157:[function(e,t,n){var a=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=a},{}],158:[function(e,t,n){"use strict";function a(e,t,n){if(!e)return null;var a={};for(var r in e)i.call(e,r)&&(a[r]=t.call(n,e[r],r,e));return a}var i=Object.prototype.hasOwnProperty;t.exports=a},{}],159:[function(e,t,n){"use strict";function a(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}t.exports=a},{}],160:[function(e,t,n){"use strict";function a(e){return r(i.isValidElement(e),"onlyChild must be passed a children with exactly one child."),e}var i=e(63),r=e(150);t.exports=a},{150:150,63:63}],161:[function(e,t,n){"use strict";var a,i=e(22);i.canUseDOM&&(a=window.performance||window.msPerformance||window.webkitPerformance),t.exports=a||{}},{22:22}],162:[function(e,t,n){var a=e(161);a&&a.now||(a=Date);var i=a.now.bind(a);t.exports=i},{161:161}],163:[function(e,t,n){"use strict";function a(e){return'"'+i(e)+'"'}var i=e(131);t.exports=a},{131:131}],164:[function(e,t,n){"use strict";var a=e(22),i=/^[ \r\n\t\f]/,r=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,o=function(e,t){e.innerHTML=t};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(o=function(e,t){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=t})}),a.canUseDOM){var s=document.createElement("div");s.innerHTML=" ",""===s.innerHTML&&(o=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),i.test(t)||"<"===t[0]&&r.test(t)){e.innerHTML="\ufeff"+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}t.exports=o},{22:22}],165:[function(e,t,n){"use strict";var a=e(22),i=e(131),r=e(164),o=function(e,t){e.textContent=t};a.canUseDOM&&("textContent"in document.documentElement||(o=function(e,t){r(e,i(t))})),t.exports=o},{131:131,164:164,22:22}],166:[function(e,t,n){"use strict";function a(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=a},{}],167:[function(e,t,n){"use strict";function a(e,t){if(null!=e&&null!=t){var n=typeof e,a=typeof t;if("string"===n||"number"===n)return"string"===a||"number"===a;if("object"===a&&e.type===t.type&&e.key===t.key){var r=e._owner===t._owner,o=null,s=null,l=null;return r||(null!=e._owner&&null!=e._owner.getPublicInstance()&&null!=e._owner.getPublicInstance().constructor&&(o=e._owner.getPublicInstance().constructor.displayName),null!=t._owner&&null!=t._owner.getPublicInstance()&&null!=t._owner.getPublicInstance().constructor&&(s=t._owner.getPublicInstance().constructor.displayName),null!=t.type&&null!=t.type.displayName&&(l=t.type.displayName),null!=t.type&&"string"==typeof t.type&&(l=t.type),("string"!=typeof t.type||"input"===t.type||"textarea"===t.type)&&(null!=e._owner&&e._owner._isOwnerNecessary===!1||null!=t._owner&&t._owner._isOwnerNecessary===!1)&&(null!=e._owner&&(e._owner._isOwnerNecessary=!0),null!=t._owner&&(t._owner._isOwnerNecessary=!0),i(!1,"<%s /> is being rendered by both %s and %s using the same key (%s) in the same place. Currently, this means that they don't preserve state. This behavior should be very rare so we're considering deprecating it. Please contact the React team and explain your use case so that we can take that into consideration.",l||"Unknown Component",o||"[Unknown]",s||"[Unknown]",e.key))),r}}return!1}var i=e(171);t.exports=a},{171:171}],168:[function(e,t,n){function a(e){var t=e.length;if(i(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e),"toArray: Array-like object expected"),i("number"==typeof t,"toArray: Object needs a length property"),i(0===t||t-1 in e,"toArray: Object should have keys for indices"),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),a=0;t>a;a++)n[a]=e[a];return n}var i=e(150);t.exports=a},{150:150}],169:[function(e,t,n){"use strict";function a(e){return _[e]}function i(e,t){return e&&null!=e.key?o(e.key):t.toString(36)}function r(e){return(""+e).replace(v,a)}function o(e){return"$"+r(e)}function s(e,t,n,a,r){var l=typeof e;if(("undefined"===l||"boolean"===l)&&(e=null),null===e||"string"===l||"number"===l||c.isValidElement(e))return a(r,e,""===t?f+i(e,0):t,n),
1;var u,_,v,E=0;if(Array.isArray(e))for(var b=0;b<e.length;b++)u=e[b],_=(""!==t?t+g:f)+i(u,b),v=n+E,E+=s(u,_,v,a,r);else{var N=m(e);if(N){var w,k=N.call(e);if(N!==e.entries)for(var D=0;!(w=k.next()).done;)u=w.value,_=(""!==t?t+g:f)+i(u,D++),v=n+E,E+=s(u,_,v,a,r);else for(h(y,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead."),y=!0;!(w=k.next()).done;){var T=w.value;T&&(u=T[1],_=(""!==t?t+g:f)+o(T[0])+g+i(u,0),v=n+E,E+=s(u,_,v,a,r))}}else if("object"===l){p(1!==e.nodeType,"traverseAllChildren(...): Encountered an invalid child; DOM elements are not valid children of React components.");var x=d.extract(e);for(var C in x)x.hasOwnProperty(C)&&(u=x[C],_=(""!==t?t+g:f)+o(C)+g+i(u,0),v=n+E,E+=s(u,_,v,a,r))}}return E}function l(e,t,n){return null==e?0:s(e,"",0,t,n)}var c=e(63),d=e(69),u=e(72),m=e(141),p=e(150),h=e(171),f=u.SEPARATOR,g=":",_={"=":"=0",".":"=1",":":"=2"},v=/[=.:]/g,y=!1;t.exports=l},{141:141,150:150,171:171,63:63,69:69,72:72}],170:[function(e,t,n){"use strict";function a(e){return Array.isArray(e)?e.concat():e&&"object"==typeof e?o(new e.constructor,e):e}function i(e,t,n){l(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e);var a=t[n];l(Array.isArray(a),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",n,a)}function r(e,t){if(l("object"==typeof t,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",g.join(", "),p),c.call(t,p))return l(1===Object.keys(t).length,"Cannot have more than one key in an object with %s",p),t[p];var n=a(e);if(c.call(t,h)){var s=t[h];l(s&&"object"==typeof s,"update(): %s expects a spec of type 'object'; got %s",h,s),l(n&&"object"==typeof n,"update(): %s expects a target of type 'object'; got %s",h,n),o(n,t[h])}c.call(t,d)&&(i(e,t,d),t[d].forEach(function(e){n.push(e)})),c.call(t,u)&&(i(e,t,u),t[u].forEach(function(e){n.unshift(e)})),c.call(t,m)&&(l(Array.isArray(e),"Expected %s target to be an array; got %s",m,e),l(Array.isArray(t[m]),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",m,t[m]),t[m].forEach(function(e){l(Array.isArray(e),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",m,t[m]),n.splice.apply(n,e)})),c.call(t,f)&&(l("function"==typeof t[f],"update(): expected spec of %s to be a function; got %s.",f,t[f]),n=t[f](n));for(var v in t)_.hasOwnProperty(v)&&_[v]||(n[v]=r(e[v],t[v]));return n}var o=e(29),s=e(157),l=e(150),c={}.hasOwnProperty,d=s({$push:null}),u=s({$unshift:null}),m=s({$splice:null}),p=s({$set:null}),h=s({$merge:null}),f=s({$apply:null}),g=[d,u,m,p,h,f],_={};g.forEach(function(e){_[e]=!0}),t.exports=r},{150:150,157:157,29:29}],171:[function(e,t,n){"use strict";var a=e(129),i=a;i=function(e,t){for(var n=[],a=2,i=arguments.length;i>a;a++)n.push(arguments[a]);if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(0!==t.indexOf("Failed Composite propType: ")&&!e){var r=0,o="Warning: "+t.replace(/%s/g,function(){return n[r++]});console.warn(o);try{throw new Error(o)}catch(e){}}},t.exports=i},{129:129}]},{},[1])(1)}),define("pref",[],function(){return{get:function(e){var t=localStorage.getItem(e);return null==t&&(t=""),t},has:function(e){var t=localStorage.getItem(e);return"undefined"!=typeof t&&null!==t},set:function(e,t){return localStorage.setItem(e,t)},remove:function(e){return localStorage.removeItem(e)}}}),define("eventbus",["underscore","backbone"],function(e,t){return e.extend({},t.Events)}),define("querystring",["eventbus"],function(e){return{datastore:{},get:function(e,t){t="undefined"==typeof t?"":t;var n=t;return this.datastore.hasOwnProperty(e)&&(n=this.datastore[e]),n},getPath:function(e,t){var n="";for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];("undefined"==typeof i||null===i)&&(i=""),i.toString().length>0&&(n+="/"+a+"/"+encodeURIComponent(e[a]))}t="undefined"==typeof t?"":t;var r=t;if(""==t){var o=this.get("_controller").split("/");r=o[0],"index"!=o[1]&&(r+="/"+o[1])}return n.length>0&&(r=r+"/_s"+n),r},getPathWithPage:function(e,t){var n=this.getPath(e,t);return n.indexOf("/_s")<0&&(n+="/_s"),n+="/page/##PAGE##"},initFilter:function(e){for(var t in e)e.hasOwnProperty(t)&&(this.get(t),e[t]=this.get(t))},requestFilterQueryTag:function(t,n,a,i,r){if(i="undefined"!=typeof i?i:"name",r="undefined"!=typeof r&&r){var o=n[a].split(",");e.trigger("querytag:resetmultipleitem",{field:a}),$.each(o,function(n,r){t.set("id",r).fetch({success:function(t,n){e.trigger("querytag:updatemultipleitem",{field:a,text:n[i]})}})})}else t.set("id",n[a]).fetch({success:function(t,n){e.trigger("querytag:updatetext",{field:a,text:n[i]})}})},reset:function(){this.datastore={}},has:function(e){var t=this.datastore[e];return"undefined"!=typeof t},set:function(e,t){return this.datastore[e]=t},remove:function(e){return!0}}}),define("initquerystring",[],function(){return{datastore:{},get:function(e){var t="";return null==e||""==e?(t=this.datastore,null==t&&(t="")):t=this.datastore[e],t},reset:function(){this.datastore={}},has:function(e){var t=this.datastore[e];return"undefined"!=typeof t},set:function(e,t){return this.datastore[e]=t},init:function(e){this.datastore=e},remove:function(e){return!0}}}),define("setting",[],function(){var e="https://www.basecrop.com",t="https://api.teamcrop.com/",n="http://betaws.teamcrop.com/",a="https://assets.teamcrop.com/uploads/avatar/",i="http://betaassets.qly.vn:8090/uploads/avatar/",r={key:"4ef3e2406fff4cfc7a86"},o={key:"c8e1acae55a109105c6b"},s="teamcropbot",l="teamcropbetabot",c="production";""==APP_ENV?("localhost"==window.location.host||window.location.host.lastIndexOf("beta")>=0)&&(c="beta"):"beta"==APP_ENV||"production"==APP_ENV?c=APP_ENV:alert("APP_ENV is not valid in index.html. (Current value: "+APP_ENV+")");var d="basecrop",u="https://www.basecrop.com/",m="support@teamcrop.com",p="Basecrop",h="https://www.facebook.com/teamcroperp/";return"beta"==c&&(t=n,r=o,a=i,s=l),{pusher:r,telegrambot:s,image_path:"imgs/",homepageurl:e,rooturl:t,avatar_rootpath:a,wlName:d,wlLandingRooturl:u,wlEmailSupport:m,wlTeamcropText:p,wlFullPageSupportChat:h}}),define("cacheddata",[],function(){return{datastore:{},version:{},get:function(e){var t=this.datastore[e];return t},getversion:function(e){var t=this.version[e];return t},reset:function(){this.datastore={}},has:function(e){var t=this.datastore[e];return"undefined"!=typeof t},set:function(e,t){return this.datastore[e]=t},setversion:function(e,t){return this.version[e]=t},remove:function(e){return delete this.datastore[e],delete this.version[e],!0},init:function(){}}}),define("basemodel",["backbone","setting","cacheddata"],function(e,t,n){return CachedModel=e.Model.extend({urlRoot:"",cacheName:"",cacheObject:null,fetch:function(t){if(t=t||{},t.hasOwnProperty("nocache")&&t.nocache||!this.cacheObject)return e.Model.prototype.fetch.call(this,t);var n=t.success,a=this.cacheObject({id:parseInt(this.get("id"))}).get();if(a.length>0){var i=a[0];for(var r in i)this.set(r,i[r]);return n&&n(this,i,t),$.Deferred().resolve()}return t.success=function(e,t,a){n&&n(e,t,a)},e.Model.prototype.fetch.call(this,t)},createRequest:function(e){return $.ajax({url:e.action?this.urlRoot+"/"+e.action:this.urlRoot,type:e.type||"get",contentType:e.contentType,data:e.data||{},success:e.success,error:e.error,complete:e.complete})},getDetailFromCache:function(e){var t=null;if(this.cacheObject){var n=this.cacheObject({id:parseInt(e)}).get();n.length>0&&(t=n[0])}return t},initialize:function(){0!=this.urlRoot.indexOf("http://")&&0!=this.urlRoot.indexOf("https://")&&(this.urlRoot=t.rooturl+this.urlRoot),this.cacheObject=n.get(this.cacheName)}}),CachedModel}),define("models/changelog",["basemodel","backbone","setting"],function(e,t,n){var a=e.extend({urlRoot:"v1/changelogs",CURRENT_VERSION:"1.8",getVersion:function(){return this.CURRENT_VERSION}});return a}),define("models/logusage",["basemodel","backbone","models/changelog","pref"],function(e,t,n,a){var i=e.extend({urlRoot:"v1/logusages",SOURCE_AUTO:1,SOURCE_CUSTOM:3,PLATFORM_WEB_DESKTOP:1,PLATFORM_WEB_MOBILE:3,pushNewRoute:function(e){if(a.get("cid")>0){if(i.pendingRoute.route.length>0){var t=Math.floor(Date.now()/1e3)-i.pendingRoute.date_created;this.saveRoute(i.pendingRoute.route,t,this.SOURCE_AUTO)}this.setNewRoute(e)}},saveRoute:function(e,t,i){$.ajax({url:this.urlRoot+"/add",data:{company_id:a.get("cid"),creator_id:a.get("uid"),session:a.get("sessionid"),version:(new n).CURRENT_VERSION,route:e,duration:t,source:i,platform:this.PLATFORM_WEB_DESKTOP,nonce:Date.now()},type:"GET",success:function(e){}})},setNewRoute:function(e){i.pendingRoute={route:e,date_created:Math.floor(Date.now()/1e3)}}},{pendingRoute:{route:"",date_created:0}});return i}),define("router",["react","backbone","pref","querystring","initquerystring","setting","eventbus","models/logusage"],function(e,t,n,a,i,r,o,s){var l=t.Router.extend({initialize:function(){this.bind("route",this.pageView)},pageView:function(){var e=t.history.getFragment();"undefined"!=typeof ga&&null!==ga&&ga("send","pageview","/"+e),(new s).pushNewRoute(e)},routes:{"":"index",":controller/_s/*searchparams":"loadWrapperControllerWithSearchParamNoAction",":controller/:action/_s/*searchparams":"loadWrapperControllerWithSearchParam",":controller/:action/:id/_s/*searchparams":"loadWrapperControllerWithIdAndSearchParam",":controller/:action/:id":"loadWrapperControllerWithId",":controller/:action":"loadWrapperControllerWithAction",":controller":"loadWrapperControllerWithoutAction",":controller/:action/:param/*moreparams":"loadWrapperControllerWithUrlParam"},loadWrapperControllerWithId:function(e,t,n){a.set("id",n),this._loadcontroller("controllers/"+e+"/"+t)},loadWrapperControllerWithIdAndSearchParam:function(e,t,n,i){a.set("id",n),this.loadWrapperControllerWithSearchParam(e,t,i)},loadWrapperControllerWithAction:function(e,t){this._loadcontroller("controllers/"+e+"/"+t)},loadWrapperControllerWithoutAction:function(e){this._loadcontroller("controllers/"+e+"/index")},loadWrapperControllerWithSearchParamNoAction:function(e,t){this.loadWrapperControllerWithSearchParam(e,"index",t)},loadWrapperControllerWithSearchParam:function(e,t,n){n=this.processRawUrlDataSearchParams();for(var i=n.split("/"),r=0;r<i.length;r++){var o=i[r],s="";if(void 0!=i[r+1])var s=i[r+1];o.length>0&&a.set(o,decodeURIComponent(s)),r++}this._loadcontroller("controllers/"+e+"/"+t,{})},loadWrapperControllerWithUrlParam:function(e,t,n,i){var r=i.split("/");r.unshift(n);for(var o=0;o<r.length;o++){var s=r[o],l="";if(void 0!=r[o+1])var l=r[o+1];a.set(s,l),o++}this._loadcontroller("controllers/"+e+"/"+t,{})},processRawUrlDataSearchParams:function(){for(var e=[],n=t.history.getFragment(),a=n.split("/"),i=!1,r=0;r<a.length;r++)"_s"!==a[r]?i&&e.push(a[r]):i=!0;return e.join("/")},index:function(){this._loadcontroller("controllers/index/index")},_loadcontroller:function(e,t){t="undefined"!=typeof t?t:{},a.set("_controller",e.replace("controllers/","")),o.trigger("sidebar:hide",!0),o.trigger("pageheader:setviewtitle",""),$("#body-loader").removeClass("active"),require([""+e],function(e){var n=new e;n.clearPageTitle(),n.run(t),n.setAutoPageTitle()})},execute:function(e,i,r){if(a.reset(),0==n.get("Authorization").length){var o=["user/login","user/forgotpass","user/resetpassword","company/create"];if(!($.inArray(t.history.getFragment(),o)>=0))return this._loadcontroller("controllers/user/login",{}),!1;e.apply(this,i)}else e&&e.apply(this,i)}}),c=function(){new l,t.history.start()};return{initialize:c}}),define("companysetting",["pref"],function(e){return{data:{},init:function(t){if("object"!=typeof t||$.isEmptyObject(t)){var n=e.get("companysetting");try{t=JSON.parse(n)}catch(e){t={},console.log("Company Setting Init Error")}}this.data=t},get:function(e){var t=null;return this.data&&this.data.hasOwnProperty(e)&&(t=this.data[e]),t},numberoption:function(){var e=this.get("currency_number_format");e=null==e?0:parseInt(e);var t={};switch(e){case 1:t={wEmpty:"zero",aDec:".",aSep:","};break;case 2:t={mDec:0,wEmpty:"zero",aSep:""};break;default:t={mDec:0,wEmpty:"zero",aSep:","}}return t}}}),define("baselanguage",["pref","backbone"],function(e,t){var n=t.Model.extend({t:function(t){var n=this.get("lang"),a=e.get("language");(""===a||null===a)&&(a="vn");var i=t;return n.hasOwnProperty(a)&&n[a].hasOwnProperty(t)&&(i=n[a][t],"en"==a&&(i="en_"+i)),i}});return n}),define("language/default",["baselanguage"],function(e){var t={vn:{page:"Trang",company:"Công ty",history:"Lịch sử",refresh:"Làm mới",loading:"Đang tải...",creator_id:"Người tạo",reset_btn:"Nhập lại",pipeline:"Pipeline",customer_order_history:"Lịch sử mua hàng",print_more:"In hàng loạt",relativeToday:"Hôm nay",relativeYesterday:"Hôm qua",relativeTomorrow:"Ngày mai",relFewSecond:"vài giây trước",relOneMinute:"1 phút trước",relMinuteAgo:"phút trước",relOneHour:"1 tiếng trước",relHourAgo:"tiếng trước",relOneDay:"1 ngày trước",rel7Day:"7 ngày trước",rel30Day:"30 ngày trước",relDayAgo:"ngày trước",relOneMonth:"1 tháng trước",relMonthAgo:"Tháng trước",relMonthNow:"Tháng này",relOneYear:"1 năm trước",relYearAgo:"năm trước",relYearMorethan:"cách đây ",hour:"Giờ",day:"Ngày",minute:"Phút",day_of_week:"ngày trong tuần",month:"Tháng",year:"Năm",time:"Thời gian",am:"AM",pm:"PM",prevweek:"Tuần trước",nextweek:"Tuần tới",monday:"Thứ hai",tuesday:"Thứ ba",wednesday:"Thứ tư",thursday:"Thứ năm",friday:"Thứ sáu",saturday:"Thứ bảy",sunday:"Chủ nhật",january:"Tháng 1",february:"Tháng 2",march:"Tháng 3",april:"Tháng 4",may:"Tháng 5",june:"Tháng 6",july:"Tháng 7",august:"Tháng 8",september:"Tháng 9",october:"Tháng 10",november:"Tháng 11",december:"Tháng 12",choose_period:"Chọn khoảng thời gian",send_mail:"Gửi email",what_do_address:"Làm gì với địa chỉ",select_customer_origin:"Chọn nguồn khách hàng",select_customer_type:"Chọn nhóm khách hàng",all:"Tất cả",required:"Bắt buộc",delete_title:"Bạn có chắc chắn muốn xóa?",delete_confirm:"Bạn có chắc chắn không?",delete_button:"Có",cancel_button:"Không",gender:"Giới tính",note:"Ghi chú",continue:"Tiếp tục",newer:"Mới hơn",older:"Cũ hơn",option:"Chọn",in_total:"Trong tổng số",error:"Đã xảy ra lỗi, vui lòng thử lại.",error_not_found:"Không tìm thấy thông tin bạn truy xuất.",error_not_permission:"Bạn không đủ quyền để thực hiện chức năng đã chọn.",group:"Nhóm",enabled:"Có hiệu lực",disabled:"Vô hiệu lực",STATUS_ENABLE:"Có hiệu lực",STATUS_DISABLE:"Vô hiệu lực",status:"Trạng thái",view_more:"Xem Thêm",view_detail:"Xem chi tiết",save:"Lưu",close:"Đóng",send:"Gửi",description:"Mô tả",create:"Tạo",by:"bởi",try_again:"Thử lại",added:"Đã thêm",add:"Thêm",output_excel:"Xuất excel",date_created:"Ngày tạo",tag:"Gắn thẻ",choose:"Chọn",choose_file:"Chọn file",cancel:"Hủy",clear:"Xóa",sync:"Đồng bộ",save_and_close:"Lưu & đóng",from:"Từ",to:"Đến",show:"Hiển thị",hide:"Ẩn",phone:"Số điện thoại",call:"Gọi điện",sms:"Nhắn tin (SMS)",event:"Sự kiện",readed:"Đã đọc",not_permission:"Bạn không có quyền vào chức năng này",update:"Cập nhật",update_success:"Cập nhật thành công!",update_fail:"Đã xảy ra lỗi. Vui lòng thử lại!",insert:"Thêm mới",insert_success:"Thêm mới thành công!",insert_fail:"Đã xảy ra lỗi. Vui lòng thử lại!",no_order:"STT",avg:"Trung bình",browser_is_not_support:"Trình duyệt không hỗ trợ!",delete:"Xóa",delete_success:"Đã xóa thành công!",delete_fail:"Đã xảy ra lỗi. Vui lòng thử lại!",detail:"Chi tiết",notfound:"Không tìm thấy kết quả.",total:"Tổng",view:"Xem",edit:"Sửa",click_here_to_complete:"Nhấn vào đây để hoàn tất",currency_vn:"VNĐ",export:"Export",import:"Import",max:"Tối đa",selections:"lựa chọn",print_preview:"Xem trước định dạng",print_paper_size:"Khổ giấy",print:"In",print_render_button:"Tạo mẫu in",error_paper_size_required:"Thông tin kích thước giấy không đúng",error_paper_content_required:"Chưa có nội dung cần tạo mẫu",print_btn:"Print this page",search:"Tìm kiếm...",search_customer:"Tìm khách hàng..",search_btn:"Tìm kiếm",searchplaceholder:"Nhập từ khóa..",searchbtn:"Tìm",search_toggle:"Bật / Tắt ô tìm kiếm",back:"Trở lại",filter_sort_by:"Sắp xếp",filter_sort_ASC:"Tăng dần",filter_sort_DESC:"Giảm dần",remove_filter:"Bỏ điều kiện này",filter_date_started:"Thời gian",edittitle:"Cập nhật thông tin dòng này",deletetitle:"Xóa thông tin dòng này",delete_this_field:"Xóa thông tin này",detailtitle:"Xem chi tiết",search_no_result:"Không tìm thấy kết quả.",date:"Ngày",filterOptionAll:"Tất cả",filterKeywordLabel:"Từ khóa",filterKeywordPlaceholder:"Từ khóa",filter_sidebar_heading:"Bộ lọc dữ liệu",filter_sidebar_date_picker_label:"Ngày tạo",filter_sidebar_hide_title:"Ẩn bộ lọc",filter_sidebar_show_title:"Hiển thị bộ lọc",filter_keyword_label:"Tìm kiếm",confirm_msg_default:"Bạn có chắc chắn không?",confirm_text_default:"Có",confirm_cancel_default:"Không",customer:"Khách hàng",employee:"Nhân viên",project:"Dự án",checkin:"Chấm công",mail_box:"Hộp thư",order:"Đơn hàng",variant:"Phiên bản",product:"Sản phẩm",app_initializing:"Đang khởi tạo ứng dụng...",loadindicator:"Đang tải dữ liệu..",zerodata_text:"Chưa có dữ liệu nào.",zerodata_subtext:"Nhấn nút bên dưới để tiến hành thêm dữ liệu đầu tiên.",zerodata_buttontext:"Thêm mới",customer_select:"Khách hàng đang được chọn: ",remain_day:"Còn %day% ngày",remain_day_ago:"Đã qua %day% ngày",select_date:"Chọn ngày",dropdown_max_selections:"Chỉ được chọn {maxCount} phần tử",gray:"Xám",green:"Xanh lá",blue:"Xanh dương",purple:"Tím",yellow:"Vàng",red:"Đỏ",fileidlist:"Chọn hình ảnh",information:"Thông tin",error_serial_number_is_required:"Vui lòng nhập serial number / IMEI cho sản phẩm",error_serial_number_is_exist:"Serial number / IMEI %serial_number% đã tồn tại",error_serial_number_is_max_limit:"Không nhập quá %number% serial number / IMEI",input_serial_placeholder:"Nhập serial number / IMEI",input_serial_description:"Nhập serial number / IMEI và nhấn enter",serial_empty:"Chưa có serial number / IMEI",home:"Trang chủ",viewed:"Đã xem",view_all:"Xem tất cả",upload:"Tải file lên",bulk_action_empty_text:"--Chọn hành động--",bulk_action_button:"Thực hiện",bulk_action_check_all_text:"Chọn tất cả",choosed:"Đã chọn",item:"Phần tử",has_not:"Không có",link_click_to_do:"Nhấp vào để",or:"Hoặc",notify_error_500:"Server có lỗi khi thực hiện yêu cầu của bạn, có thể là do mạng có vấn đề hoặc xử lý quá lâu.",next:"Tiếp theo",choose_active:"Đang chọn",in:"Trong",heading_filter_toggle:"Bộ lọc & tìm kiếm...",heading_filter_toggle_tooltip:"Bật / Tắt chức năng tìm kiếm",tab_all:"Tất cả",tab_all_search:"Kết quả tìm kiếm",click_here:"Nhấn vào đây",remove:"Xóa",export_to_excel:"Xuất dữ liệu",export_to_excel_button:"Tải về",export_to_excel_resume_button:"Tiếp tục tải dữ liệu",export_to_excel_status_pending:"",export_to_excel_status_downloading:"Đang tải dữ liệu...",export_to_excel_status_zipping:"Tải dữ liệu hoàn tất. Đang xử lý file excel...",export_to_excel_status_done:"File đã được download. Hoàn tất.",export_to_excel_status_error:"Có lỗi khi đang tải dữ liệu. Nhấn nút tải lại bên dưới để tiếp tục.",export_to_excel_help1:"Bạn đang muốn xuất",export_to_excel_help2:" từ hệ thống",export_to_excel_help3:"Bạn đang xuất khá nhiều dòng dữ liệu nên có thể sẽ mất thời gian. Để rút ngắn thời gian chờ, bạn có thể lọc kết quả tìm kiếm ở ngoài danh sách trước khi nhấn nút Xuất dữ liệu.",export_to_excel_help3_tooltip:"Bạn thấy thông báo này bởi vì bạn đang muốn xuất hơn ###NUMBER### dòng dữ liệu.",export_to_excel_unit_default:"dòng",error_while_load_cache_resource_heading:"Có lỗi trong quá trình khởi tạo.",error_while_load_cache_resource:"Lỗi khi tải dữ liệu",error_while_load_cache_resource_reload:"Tải lại trang",error_while_load_cache_resource_ignore:"Tiếp tục",error_while_load_cache_resource_help:"Hệ thống đang gặp sự cố hoặc Internet của bạn không ổn định. Nếu thử lại vẫn không được vui lòng liên hệ support@teamcrop.com.",search_product_placeholder:"Tìm sản phẩm, SKU...",pagi_go_to_prev:"Về trước",pagi_go_to_next:"Trang tiếp",current:"Hiện tại",datepicker_compareto:"So sánh với",button_edit:"SỬA",button_edit_tooltip:"Nhấn vào đây để cập nhật dữ liệu",button_delete:"XÓA",button_delete_tooltip:"Nhấn vào đây để xóa dòng dữ liệu này..",sid_tooltip:"System ID",button_detail:"CHI TIẾT",button_print:"IN",button_print_tooltip:"Xem định dạng và in đơn hàng",yes:"Có",no:"Không"},en:{page:"Trang",company:"Công ty",history:"Lịch sử",refresh:"Làm mới",loading:"Đang tải...",creator_id:"Người tạo",reset_btn:"Nhập lại",pipeline:"Pipeline",customer_order_history:"Lịch sử mua hàng",print_more:"In hàng loạt",relativeToday:"Hôm nay",relativeYesterday:"Hôm qua",relativeTomorrow:"Ngày mai",relFewSecond:"vài giây trước",relOneMinute:"1 phút trước",relMinuteAgo:"phút trước",relOneHour:"1 tiếng trước",relHourAgo:"tiếng trước",relOneDay:"1 ngày trước",rel7Day:"7 ngày trước",rel30Day:"30 ngày trước",relDayAgo:"ngày trước",relOneMonth:"1 tháng trước",relMonthAgo:"Tháng trước",relMonthNow:"Tháng này",relOneYear:"1 năm trước",relYearAgo:"năm trước",relYearMorethan:"cách đây ",hour:"Giờ",day:"Ngày",minute:"Phút",day_of_week:"ngày trong tuần",month:"Tháng",year:"Năm",time:"Thời gian",am:"AM",pm:"PM",prevweek:"Tuần trước",nextweek:"Tuần tới",monday:"Thứ hai",tuesday:"Thứ ba",wednesday:"Thứ tư",thursday:"Thứ năm",friday:"Thứ sáu",saturday:"Thứ bảy",sunday:"Chủ nhật",january:"Tháng 1",february:"Tháng 2",march:"Tháng 3",april:"Tháng 4",may:"Tháng 5",june:"Tháng 6",july:"Tháng 7",august:"Tháng 8",september:"Tháng 9",october:"Tháng 10",november:"Tháng 11",december:"Tháng 12",choose_period:"Chọn khoảng thời gian",send_mail:"Gửi email",what_do_address:"Làm gì với địa chỉ",select_customer_origin:"Chọn nguồn khách hàng",select_customer_type:"Chọn nhóm khách hàng",all:"Tất cả",required:"Bắt buộc",delete_title:"Bạn có chắc chắn muốn xóa?",delete_confirm:"Bạn có chắc chắn không?",delete_button:"Có",cancel_button:"Không",gender:"Giới tính",note:"Ghi chú",continue:"Tiếp tục",newer:"Mới hơn",older:"Cũ hơn",option:"Chọn",in_total:"Trong tổng số",error:"Đã xảy ra lỗi, vui lòng thử lại.",error_not_found:"Không tìm thấy thông tin bạn truy xuất.",error_not_permission:"Bạn không đủ quyền để thực hiện chức năng đã chọn.",group:"Nhóm",enabled:"Có hiệu lực",disabled:"Vô hiệu lực",STATUS_ENABLE:"Có hiệu lực",STATUS_DISABLE:"Vô hiệu lực",status:"Trạng thái",view_more:"Xem Thêm",view_detail:"Xem chi tiết",save:"Lưu",close:"Đóng",send:"Gửi",description:"Mô tả",create:"Tạo",by:"bởi",try_again:"Thử lại",added:"Đã thêm",add:"Thêm",output_excel:"Xuất excel",date_created:"Ngày tạo",tag:"Gắn thẻ",choose:"Chọn",choose_file:"Chọn file",cancel:"Hủy",clear:"Xóa",sync:"Đồng bộ",save_and_close:"Lưu & đóng",from:"Từ",to:"Đến",show:"Hiển thị",hide:"Ẩn",phone:"Số điện thoại",call:"Gọi điện",sms:"Nhắn tin (SMS)",event:"Sự kiện",readed:"Đã đọc",not_permission:"Bạn không có quyền vào chức năng này",update:"Cập nhật",update_success:"Cập nhật thành công!",update_fail:"Đã xảy ra lỗi. Vui lòng thử lại!",insert:"Thêm mới",insert_success:"Thêm mới thành công!",insert_fail:"Đã xảy ra lỗi. Vui lòng thử lại!",no_order:"STT",avg:"Trung bình",browser_is_not_support:"Trình duyệt không hỗ trợ!",delete:"Xóa",delete_success:"Đã xóa thành công!",delete_fail:"Đã xảy ra lỗi. Vui lòng thử lại!",detail:"Chi tiết",notfound:"Không tìm thấy kết quả.",total:"Tổng",view:"Xem",edit:"Sửa",click_here_to_complete:"Nhấn vào đây để hoàn tất",currency_vn:"VNĐ",export:"Export",import:"Import",max:"Tối đa",selections:"lựa chọn",print_preview:"Xem trước định dạng",print_paper_size:"Khổ giấy",print:"In",print_render_button:"Tạo mẫu in",error_paper_size_required:"Thông tin kích thước giấy không đúng",error_paper_content_required:"Chưa có nội dung cần tạo mẫu",print_btn:"Print this page",search:"Tìm kiếm...",search_customer:"Tìm khách hàng..",search_btn:"Tìm kiếm",searchplaceholder:"Nhập từ khóa..",searchbtn:"Tìm",search_toggle:"Bật / Tắt ô tìm kiếm",back:"Trở lại",filter_sort_by:"Sắp xếp",filter_sort_ASC:"Tăng dần",filter_sort_DESC:"Giảm dần",remove_filter:"Bỏ điều kiện này",filter_date_started:"Thời gian",edittitle:"Cập nhật thông tin dòng này",deletetitle:"Xóa thông tin dòng này",delete_this_field:"Xóa thông tin này",detailtitle:"Xem chi tiết",search_no_result:"Không tìm thấy kết quả.",date:"Ngày",filterOptionAll:"Tất cả",filterKeywordLabel:"Từ khóa",filterKeywordPlaceholder:"Từ khóa",filter_sidebar_heading:"Bộ lọc dữ liệu",filter_sidebar_date_picker_label:"Ngày tạo",filter_sidebar_hide_title:"Ẩn bộ lọc",filter_sidebar_show_title:"Hiển thị bộ lọc",filter_keyword_label:"Tìm kiếm",confirm_msg_default:"Bạn có chắc chắn không?",confirm_text_default:"Có",confirm_cancel_default:"Không",customer:"Khách hàng",employee:"Nhân viên",project:"Dự án",checkin:"Chấm công",mail_box:"Hộp thư",order:"Đơn hàng",variant:"Phiên bản",product:"Sản phẩm",app_initializing:"Đang khởi tạo ứng dụng...",loadindicator:"Đang tải dữ liệu..",zerodata_text:"Chưa có dữ liệu nào.",zerodata_subtext:"Nhấn nút bên dưới để tiến hành thêm dữ liệu đầu tiên.",zerodata_buttontext:"Thêm mới",customer_select:"Khách hàng đang được chọn: ",remain_day:"Còn %day% ngày",remain_day_ago:"Đã qua %day% ngày",select_date:"Chọn ngày",dropdown_max_selections:"Chỉ được chọn {maxCount} phần tử",gray:"Xám",green:"Xanh lá",blue:"Xanh dương",purple:"Tím",yellow:"Vàng",red:"Đỏ",fileidlist:"Chọn hình ảnh",information:"Thông tin",error_serial_number_is_required:"Vui lòng nhập serial number / IMEI cho sản phẩm",error_serial_number_is_exist:"Serial number / IMEI %serial_number% đã tồn tại",error_serial_number_is_max_limit:"Không nhập quá %number% serial number / IMEI",input_serial_placeholder:"Nhập serial number / IMEI",input_serial_description:"Nhập serial number / IMEI và nhấn enter",serial_empty:"Chưa có serial number / IMEI",home:"Trang chủ",viewed:"Đã xem",view_all:"Xem tất cả",upload:"Tải file lên",bulk_action_empty_text:"--Chọn hành động--",bulk_action_button:"Thực hiện",bulk_action_check_all_text:"Chọn tất cả",choosed:"Đã chọn",item:"Phần tử",has_not:"Không có",link_click_to_do:"Nhấp vào để",or:"Hoặc",notify_error_500:"Server có lỗi khi thực hiện yêu cầu của bạn, có thể là do mạng có vấn đề hoặc xử lý quá lâu.",next:"Tiếp theo",choose_active:"Đang chọn",in:"Trong",heading_filter_toggle:"Bộ lọc & tìm kiếm...",heading_filter_toggle_tooltip:"Bật / Tắt chức năng tìm kiếm",tab_all:"Tất cả",tab_all_search:"Kết quả tìm kiếm",click_here:"Nhấn vào đây",remove:"Xóa",export_to_excel:"Xuất dữ liệu",export_to_excel_button:"Tải về",export_to_excel_resume_button:"Tiếp tục tải dữ liệu",export_to_excel_status_pending:"",export_to_excel_status_downloading:"Đang tải dữ liệu...",export_to_excel_status_zipping:"Tải dữ liệu hoàn tất. Đang xử lý file excel...",export_to_excel_status_done:"File đã được download. Hoàn tất.",export_to_excel_status_error:"Có lỗi khi đang tải dữ liệu. Nhấn nút tải lại bên dưới để tiếp tục.",export_to_excel_help1:"Bạn đang muốn xuất",export_to_excel_help2:" từ hệ thống",export_to_excel_help3:"Bạn đang xuất khá nhiều dòng dữ liệu nên có thể sẽ mất thời gian. Để rút ngắn thời gian chờ, bạn có thể lọc kết quả tìm kiếm ở ngoài danh sách trước khi nhấn nút Xuất dữ liệu.",export_to_excel_help3_tooltip:"Bạn thấy thông báo này bởi vì bạn đang muốn xuất hơn ###NUMBER### dòng dữ liệu.",export_to_excel_unit_default:"dòng",error_while_load_cache_resource_heading:"Có lỗi trong quá trình khởi tạo.",error_while_load_cache_resource:"Lỗi khi tải dữ liệu",error_while_load_cache_resource_reload:"Tải lại trang",error_while_load_cache_resource_ignore:"Tiếp tục",error_while_load_cache_resource_help:"Hệ thống đang gặp sự cố hoặc Internet của bạn không ổn định. Nếu thử lại vẫn không được vui lòng liên hệ support@teamcrop.com.",search_product_placeholder:"Tìm sản phẩm, SKU...",pagi_go_to_prev:"Về trước",pagi_go_to_next:"Trang tiếp",current:"Hiện tại",datepicker_compareto:"So sánh với",button_edit:"SỬA",button_edit_tooltip:"Nhấn vào đây để cập nhật dữ liệu",button_delete:"XÓA",button_delete_tooltip:"Nhấn vào đây để xóa dòng dữ liệu này..",sid_tooltip:"System ID",button_detail:"CHI TIẾT",button_print:"IN",button_print_tooltip:"Xem định dạng và in đơn hàng",yes:"",no:""}};return new e({lang:t})}),define("components/mobile/action-sheet",["react","language/default"],function(e,t){var n=e.createClass({displayName:"MobileActionSheetComponent",getDefaultProps:function(){return{buttons:[]}},onClickProxy:function(t,n){$(".ui.modal",e.findDOMNode(this)).modal("hide"),"undefined"!=typeof t&&t(n)},componentWillUnmount:function(){$("body").css({overflow:""})},componentDidMount:function(){$(".ui.modal",e.findDOMNode(this)).modal({context:e.findDOMNode(this),closable:!0,duration:250,selector:{deny:".close-modal"},onShow:function(){$("body").css({overflow:"hidden"})},onHide:function(){$("body").css({overflow:""})}}).modal("show")},render:function(){var n=this;return e.createElement("div",null,e.createElement("div",{className:"ui modal action-sheet"},e.createElement("div",{style:{backgroundColor:"transparent"},className:"content"},e.createElement("div",{ref:"list",className:"ui large center aligned vertical fluid menu"},this.props.text?e.createElement("div",{style:{color:"#aaa",paddingTop:"1.25em",paddingBottom:"1.25em",textAlign:"center",fontStyle:"italic"},className:"item"},this.props.text):function(){return!1},this.props.buttons.map(function(t,a){if(a>=5)return!1;var i={color:t.color||"#3498db",background:t.background||"#fff",textAlign:"center"};return e.createElement("a",{style:i,onClick:n.onClickProxy.bind(n,t.onClick),key:a,className:"item",href:t.href},t.text)})),e.createElement("div",{className:"ui large center aligned vertical fluid teal item inverted menu"},e.createElement("a",{className:"item close-modal"},t.t("close"))))))}});return n}),define("helper",["setting","backbone","react","pref","eventbus","querystring","companysetting","language/default","components/mobile/action-sheet"],function(e,t,n,a,i,r,o,s,l){return{appendToken:function(e){return-1==e.indexOf("?")&&(e+="?"),e+="&__jwtAuthorization="+a.get("Authorization")},formatTimeEndWorkRange:function(e,t){var n=e.split(":"),a=parseInt(n[0]),i=a,r="";return a>23&&(i=a-24,r=" Hôm sau",(t||""==t)&&(r=t)),("0"+i).slice(-2)+":"+n[1]+r},getAvatarPath:function(t){return t=t||"",t=0==t.length?e.avatar_default:0!=t.indexOf("http")?e.avatar_rootpath+t:t.replace("180.jpg","40.jpg")},isDocumentIdle:function(){return __DOCUMENT_IS_IDLE},getPageTitleWithoutBadge:function(){var e=document.title;return 0==e.indexOf("(")&&(e=e.replace(/\(\d+\) /,"")),e},getTextBySetting:function(e,t,n){var a="",i=o.get(e);return n>0?(a=i,a||1!=n||(a=t)):a=t,a},calcDecimal:function(e,t,n,a){e=parseFloat(e),t=parseFloat(t);var i=0;if("number"==typeof e&&"number"==typeof t){switch(n){case"+":i=new BigNumber(e).plus(t);break;case"-":i=new BigNumber(e).minus(t);break;case"*":i=new BigNumber(e).times(t);break;case"/":i=new BigNumber(e).div(t)}i=i.toNumber(),"number"==typeof a&&(i=parseFloat(i).toFixed(a))}return i},setPageTitle:function(e){document.title=e},setPageTitleBadge:function(e){var t=this.getPageTitleWithoutBadge();0==e?document.title=t:document.title="("+e+") "+t},tableclass:function(e,t){return e="undefined"!=typeof e&&e,"tctable ui small unstackable very basic "+(e?"striped":"")+" selectable table scrollbar "+t},rowButtonClass:function(){return"ui noborder icon basic button"},isMobile:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},getStartWeek:function(e){return this.formatTime(e,!1,"E"),
7==e&&(e+=86400),e},isPhonegap:function(){return-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},relativeTime:function(e){e=parseInt(e);var t=Math.round((new Date).getTime()/1e3),n=t-e,a=Math.round(n/60);return 0>a&&(a=0),0==a?s.t("relFewSecond"):1==a?s.t("relOneMinute"):45>a?a+" "+s.t("relMinuteAgo"):90>a?s.t("relOneHour"):1440>a?Math.round(a/60)+" "+s.t("relHourAgo"):2880>a?s.t("relOneDay"):43200>a?Math.round(a/1440)+" "+s.t("relDayAgo"):86400>a?s.t("relOneMonth"):525960>a?Math.round(a/43200)+" "+s.t("relMonthAgo"):1051199>a?s.t("relOneYear"):s.t("relYearMorethan")+" "+Math.round(a/525960)+" "+s.t("relYearAgo")},addLoader:function(e,t,n){t="undefined"!=typeof t?t:"",n="undefined"==typeof n||n,$(e).append('<div style="margin-left: 5px;" class="ui mini '+(n?"inline":"")+' loader">'+t+"</div>")},removeLoader:function(e){$(e).find(".loader").remove()},trimEmptyParagraph:function(e){return e=e.replace("\n<p> </p>",""),e=e.replace("<p> </p>",""),e.trim(),e},nl2br:function(e,t){var n=t||"undefined"==typeof t?"<br />":"<br>";return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+n+"$2")},notifyError:function(e,t,n){var a=[],i=[];return e&&e.hasOwnProperty("responseJSON")&&e.responseJSON&&e.responseJSON.hasOwnProperty("error")&&$.each(e.responseJSON.error,function(e,n){var r=t.t(n);a.push(r),i[n]=r}),0==a.length&&("undefined"!=typeof defaulterrocode&&null!==n&&n.length>0?a.push(t.t(n)):a.push("Request Error.")),a.length>0&&this.showError(a.join("<br />")),i},notifyErrorAndForm:function(e,t,n,a,i){var r=this.notifyError(e,t,n),o=[];for(var s in i)$.each(i[s],function(e,t){o[t]=s});for(var l in r)o.hasOwnProperty(l)&&a.form("add prompt",o[l],r[l])},isSmallScreen:function(){var e=$(window).width();return 960>e&&-1==r.get("_controller").indexOf("widget")},isMobileScreen:function(){var e=$(window).width();return 768>e},getScreenname:function(){var e="",t=window.location.host.split(".");return 3==t.length&&(e=t[0].trim()),e},getShortName:function(e){var t="",n=e.split(" ");return t=n[n.length-1]},isPhonegap:function(){var e=!1,t=-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://");return t&&(e=!0),e},isPhonegapIos:function(){var e=!1;return this.isPhonegap()&&navigator.userAgent.match(/(iPhone|iPod|iPad)/)&&(e=!0),e},isIos:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},getNumberDecimals:function(){return 4},getNumberDecimalSeparator:function(){return"."},getNumberThousandSeparator:function(){return","},numberFormat:function(e,t,n){e=this.strToNumber(e),t=this.strToInt(t),n===!0&&e%1===0&&(t=0),t>this.getNumberDecimals()&&(t=this.getNumberDecimals());var a=this.getNumberDecimalSeparator(),i=this.getNumberThousandSeparator();e=e.toFixed(t).toString();var r=e.split("."),o=r[0],s=r.length>1?a+r[1]:"",l=/(\d+)(\d{3})/;if(i.length>0)for(;l.test(o);)o=o.replace(l,"$1"+i+"$2");return o+s},smartNumberFormat:function(e){e=this.strToNumber(e);var t="0",n=this.strToInt(o.get("currency_number_format"));switch(n){case 1:t=this.numberFormat(e,2);break;case 2:t=e.toFixed(0);break;default:t=this.numberFormat(e)}return t},strToNumber:function(e){$.isNumeric(e)||(e+="",e=e.replace(new RegExp("\\"+this.getNumberThousandSeparator(),"g"),""),e=e.replace(new RegExp("\\"+this.getNumberDecimalSeparator(),"g"),"."),e=e.replace(/[^0-9.]/gim,""));var t=parseFloat(e)||0;return t=t.toFixed(this.getNumberDecimals()),t=parseFloat(t)},strToInt:function(e){var t=this.strToNumber(e);return Math.round(t)},setTitle:function(e){var t=document.title;return document.title=e,t},getParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},parseQuerystring:function(e){e=e.substring(e.indexOf("?")+1).split("&");for(var t,n={},a=decodeURIComponent,i=e.length-1;i>=0;i--)t=e[i].split("="),n[a(t[0])]=a(t[1]);return n},getFullHeight:function(){var e=$(window).height();return e-=this.isSmallScreen()?50:40},cloneObjectData:function(e){return JSON.parse(JSON.stringify(e))},stripTags:function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,a=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(a,"").replace(n,function(e,n){return t.indexOf("<"+n.toLowerCase()+">")>-1?e:""})},showError:function(e,t){t="undefined"!=typeof t?t:3e3,$.notification({error:!0,content:e,timeout:t})},showSuccess:function(e,t){t="undefined"!=typeof t?t:3e3,$.notification({icon:"W",content:e,timeout:t})},desktopNotify:function(e,t,n,a,i){var r=null;if("Notification"in window)if("granted"===Notification.permission){var o={body:n,icon:e,dir:"ltr",data:a};r=new Notification(t,o)}else"denied"!==Notification.permission&&Notification.requestPermission(function(i){if("permission"in Notification||(Notification.permission=i),"granted"===i){var o={body:n,icon:e,dir:"ltr",data:a};r=new Notification(t,o)}});null!==r&&(r.onclick=i,r.onshow=function(){var e=this;setTimeout(function(){e.close()},4e3)})},formatFileSize:function(e){return e>=1073741824?e=Math.round(e/1073741824*10)/10+" GB":e>=1048576?e=Math.round(e/1048576*10)/10+" MB":e>=1024?e=Math.round(e/1024*10)/10+" KB":e>=1?e+=" bytes":e="-",e},sortBy:function(e,t,n){var a=n?function(t){return n(t[e])}:function(t){return t[e]};return t=t?-1:1,function(e,n){return e=a(e),n=a(n),t*((e>n)-(n>e))}},loaderAppend:function(e){$(e).append('<span class="ui active mini inline loader mydynamicloader" style="margin-left: 5px;"></span>')},loaderRemove:function(e){$(e).find(".mydynamicloader").remove()},isExpandId:function(e){return e+="",e.indexOf("-expand")>=0},isExpandIdExisted:function(e,t){var n=!1;return $.each(e,function(e,a){var i=a.id+"";i.indexOf(t+"-expand")>=0&&(n=!0)}),n},removeExpandItem:function(e,t){var n=[];return $.each(e,function(e,a){a.id!=t+"-expand"&&n.push(a)}),n},columnWidthNumberToText:function(e){var t="";switch(e){case 1:t="one";break;case 2:t="two";break;case 3:t="three";break;case 4:t="four";break;case 5:t="five";break;case 6:t="six";break;case 7:t="seven";break;case 8:t="eight";break;case 9:t="nine";break;case 10:t="ten";break;case 11:t="eleven";break;case 12:t="twelve";break;case 13:t="thirteen";break;case 14:t="fourteen";break;case 15:t="fifteen";break;case 16:t="sixteen"}return t},getHourList:function(e){var t=[];if(e)for(var n=1;24>=n;n++){var a={value:n,text:n+" "+s.t("hour")};t.push(a)}else{for(var n=1;12>=n;n++){var a={value:n,text:n+" "+s.t("AM")};t.push(a)}for(var n=1;12>=n;n++){var a={value:n,text:n+" "+s.t("PM")};t.push(a)}}return t},generateRandomNumber:function(e,t){for(var n=[],a=0,i=0;e>i;i++){switch(a=Math.random(),t){case"money":a=1e3*Math.floor(1e4*a);break;case"smallmoney":a=1e3*Math.floor(1e3*a);break;case"number":a=Math.floor(100*a);break;case"smallnumber":a=Math.floor(10*a)}n[i]=a}return n},getDataByColumn:function(e,t){var n=_.map(e,function(e){return e[t]});return n},getObjectKey:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},getObjectValue:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},strStripedUnicode:function(e){return e+="",e=e.replace(/a|à|á|ả|ã|ạ|ă|ằ|ắ|ẳ|ẵ|ặ|â|ầ|ấ|ẩ|ẫ|ậ/g,"a"),e=e.replace(/A|À|Á|Ả|Ã|Ạ|Ă|Ằ|Ắ|Ẳ|Ẵ|Ặ|Â|Ầ|Ấ|Ẩ|Ẫ|Ậ/g,"A"),e=e.replace(/e|è|é|ẻ|ẻ|ẹ|ê|ề|ế|ể|ễ|ệ/g,"e"),e=e.replace(/E|È|É|Ẻ|Ẽ|Ẹ|Ê|Ề|Ế|Ể|Ễ|Ệ/g,"E"),e=e.replace(/i|ì|í|ỉ|ĩ|ị/g,"i"),e=e.replace(/I|Ì|Í|Ỉ|Ĩ|Ị/g,"I"),e=e.replace(/o|ò|ó|ỏ|õ|ọ|ô|ồ|ố|ổ|ỗ|ộ|ơ|ờ|ớ|ở|ỡ|ợ/g,"o"),e=e.replace(/O|Ò|Ó|Ỏ|Õ|Ọ|Ô|Ồ|Ố|Ổ|Ỗ|Ộ|Ơ|Ờ|Ớ|Ở|Ỡ|Ợ/g,"O"),e=e.replace(/u|ù|ú|ủ|ũ|ụ|ư|ừ|ứ|ử|ữ|ự/g,"u"),e=e.replace(/U|Ù|Ú|Ủ|Ũ|Ụ|Ư|Ừ|Ứ|Ử|Ữ|Ự/g,"U"),e=e.replace(/y|ỳ|ý|ỷ|ỹ|ỵ/g,"y"),e=e.replace(/Y|Ỳ|Ý|Ỷ|Ỹ|Ỵ/g,"Y"),e=e.replace(/đ/g,"d"),e=e.replace(/Đ/g,"D")},strToAlias:function(e){return e+="",e=e.toLowerCase(),e=this.strStripedUnicode(e),e=e.replace(/!|@|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\;|\'| |\"|\&|\#|\[|\]|~|$|_/g,"-"),e=e.replace(/-+-/g,"-"),e=e.replace(/^\-+|\-+$/g,"")},compareString:function(e,t){return e+="",t+="",e=this.strToAlias(e),t=this.strToAlias(t),e.indexOf(t)>=0},phoneNumberFormat:function(){return{mDec:0,aSep:"",lZero:"keep"}},generateUUID:function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)});return t},getWeightedBarcodeFormat:function(e,t){var n=this;"undefined"==typeof e&&(e=""),e=$.trim(e),"undefined"==typeof t&&(t=""),t=$.trim(t);var a="",i=1;return t.length>0&&(t.split(","),$.each(t.split(","),function(t,r){if(r=$.trim(r),e.length==r.length){var o="",s="",l=n.strToInt(r)+"";if(0==e.indexOf(l)){var c=!1;return $.each(r.split(""),function(t,n){"S"==n?a+=e[t]:"G"==n?"0"!=e[t]?(o+=e[t],c=!0):c&&(o+=e[t]):"C"==n&&(s=e[t])}),i=n.strToNumber(o)/1e3,!1}}})),{barcode:a,quantity:i}},scrollTo:function(e){$("html, body").animate({scrollTop:e.offset().top-20},1e3)},exportToExcel:function(e,t,n){t=t||moment().unix(),n=n||"Sheet 1",e.table2excel({exclude:".noExl",name:n,filename:t})},showActionSheet:function(e){n.unmountComponentAtNode(document.getElementById("actionsheetwrapper")),n.render(n.createElement(l,e),document.getElementById("actionsheetwrapper"))},getWeekday:function(){return[{code:1,text:s.t("monday")},{code:2,text:s.t("tuesday")},{code:3,text:s.t("wednesday")},{code:4,text:s.t("thursday")},{code:5,text:s.t("friday")},{code:6,text:s.t("saturday")},{code:7,text:s.t("sunday")}]},getDayhour:function(){return[{code:0,text:"00"},{code:1,text:"01"},{code:2,text:"02"},{code:3,text:"03"},{code:4,text:"04"},{code:5,text:"05"},{code:6,text:"06"},{code:7,text:"07"},{code:8,text:"08"},{code:9,text:"09"},{code:10,text:"10"},{code:11,text:"11"},{code:12,text:"12"},{code:13,text:"13"},{code:14,text:"14"},{code:15,text:"15"},{code:16,text:"16"},{code:17,text:"17"},{code:18,text:"18"},{code:19,text:"19"},{code:20,text:"20"},{code:21,text:"21"},{code:22,text:"22"},{code:23,text:"23"}]},hashCode:function(e){return e.split("").reduce(function(e,t){return 2*e+t.charCodeAt(0)},0)},codau2khongdau:function(e){var t=e;return t=t.toLowerCase(),t=t.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"),t=t.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),t=t.replace(/ì|í|ị|ỉ|ĩ/g,"i"),t=t.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),t=t.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),t=t.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),t=t.replace(/đ/g,"d"),t=t.replace(/!|@|\$|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\'| |\"|\&|\#|\[|\]|~/g," ")},initMyTip:function(e,t,n,a){var i={position:{my:"bottom center",at:"top center"},style:{classes:"qtip-dark"}};n="undefined"!=typeof n?n:"top","bottom"==n?i.position={my:"top center",at:"bottom center"}:"left"==n?i.position={my:"right center",at:"left center"}:"right"==n?i.position={my:"left center",at:"right center"}:"topright"==n&&(i.position={my:"bottom right",at:"top right"}),"undefined"!=typeof t&&null!=t&&(i.content=t),a="undefined"==typeof a||a,e.qtip(i).bind("click",function(){a&&$(".qtip").remove()})},ucfirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},nFormatter:function(e){return isNegative=!1,0>e&&(isNegative=!0),e=Math.abs(e),e>=1e9?formattedNumber=(e/1e9).toFixed(1).replace(/\.0$/,"")+"G":e>=1e6?formattedNumber=(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?formattedNumber=(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":formattedNumber=e,isNegative&&(formattedNumber="-"+formattedNumber),formattedNumber},fileExtension:function(e){return e.split(".").pop()},showLoader:function(){},hideLoader:function(){},showContentLoader:function(e){"undefined"!=typeof e&&null!=e&&(e.hide(),e.before('<div class="dataloaderwrapper"><div class="ui active loader"></div></div>'))},hideContentLoader:function(e){"undefined"!=typeof e&&null!=e&&(e.parent().find(".dataloaderwrapper").remove(),e.show())},alert:function(e,t){var n=!0;(null==e||void 0===e||0==e.length)&&(n=!1),$.dialog({showTitle:n,contentHtml:t,buttonText:{ok:"OK"}})},isZeroData:function(e,n){return t.history.getFragment()==e&&0==n},secondsToHms:function(e){e=Number(e);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%3600%60);return(t>0?t+":"+(10>n?"0":""):"")+n+":"+(10>a?"0":"")+a},getDropdownMessage:function(){return{noResults:s.t("search_no_result"),maxSelections:s.t("dropdown_max_selections")}},getDropdownDefaultProps:function(){return{placeholder:"--"+s.t("choose")+"--",value:"",sortBy:"name",sortType:"ASC",className:"",hideEmptyOption:!1,emptyOptionValue:"",name:"",maxResults:10,minCharacters:1}},localforageCreateInstancePos:function(){return localforage.createInstance({name:"localforage",storeName:"posnew"})},replacePrintTemplateByObject:function(e,t){return e+="",$.isEmptyObject(t)&&(t={}),$.each(t,function(t,n){var a=new RegExp("\\[\\["+t+"\\]\\]","gim");e=e.replace(a,n)}),e},getPrintAreaOption:function(){return{mode:"iframe",popHt:500,popWd:400,popX:500,popY:600,popTitle:"Billing Detail for Printing",popClose:!0,strict:!1,extraHead:"<style>*{color: #000 !important; background-color: #fff !important}</style>",extraCss:""}},formatOnlyNumber:function(e){return parseInt(e)||(e=0),{lZero:"deny",aDec:",",aSep:".",mDec:e,vMin:"0"}},quantityDecimal:function(){var e=o.get("quantity_decimal");return this.strToInt(e)},countToText:function(e){var t=["zero","one","two","three","four","five","six","seven","eight","nine","ten"];return t[e]},extractHostname:function(e){var t;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0]},chatdataTemplateDefaultClickHandle:function(e){"web_url"==e.type?window.open(e.url,"_blank"):"postback"==e.type?alert("Information only. This is POSTBACK button, and payload is: "+e.payload):alert("Information only. This is "+e.type+" button, and data is: "+JSON.stringify(e))},validateUrl:function(e){e=$.trim(e);var t="^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$",n=new RegExp(t,"i");return n.test(e)},prettyJson:function(e){return json=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"})},compVersions:function(e,t){for(var n=0,a=e.split("."),i=t.split("."),r=Math.max(a.length,i.length),o=0;r>o;o++){var s=o<a.length?parseInt(a[o],10):0,l=o<i.length?parseInt(i[o],10):0;if(isNaN(s)&&(s=0),isNaN(l)&&(l=0),s!=l){n=s>l?1:-1;break}}return n},getRandomColor:function(){for(var e="0123456789ABCDEF",t="#",n=0;6>n;n++)t+=e[Math.floor(16*Math.random())];return t},getChartColors:function(){return["#0077cc","#ed7e17","#fbbd08","#b5cc18","#21ba45","#2185d0","#6435c9","#a333c8","#e03997","#a5673f","#767676"]},dateToMoment:function(e,t){return moment.isMoment(e)?e:moment.unix(e).isValid()?moment.unix(e):moment(e,t).isValid()?moment(e,t):moment(e).isValid()?moment(e):moment()},htmlescape:function(e){return e+="",e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},gotoBottom:function(){$("html, body").animate({scrollTop:$(document).height()},1e3)},updatePathWithViewSnippet:function(e,n,a){var i=t.history.getFragment(),r=i.split("/"),o="",s=!1,l=!1,c=[];$.each(r,function(t,n){0==t?o=n:(n==a&&(s=!0),"_s"==n&&(l=!0),-1==n.indexOf(e)&&c.push(n))}),l||s||c.unshift(a),c.unshift(o),c.push(e+n),t.history.navigate(c.join("/"),{trigger:!1})},getPathWithViewSnippet:function(e){var n=t.history.getFragment(),a=n.split("/"),i=-1;return $.each(a,function(t,n){-1!=n.indexOf(e)&&(i=parseInt(n.replace(e,"")))}),i},removePathWithViewSnippet:function(e){e="undefined"!=typeof e?e:"view_";var n=t.history.getFragment(),a=n.split("/"),i=[];$.each(a,function(t,n){-1==n.indexOf(e)&&i.push(n)}),t.history.navigate(i.join("/"),{trigger:!1})},countProperties:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&++t;return t},countNotEmptyProperties:function(e){var t=0;for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];("undefined"==typeof a||null===a)&&(a=""),a.toString().length>0&&t++}return t},round:function(e,t){var n=function(e,t){var n=(""+e).split("e");return+(n[0]+"e"+(n[1]?+n[1]+t:t))};return n(Math.round(n(e,+t)),-t)},shortenNumber:function(e){var t=e;if(e>=1e3||-1e3>=e){for(var n=["","K","M","B","T"],a=Math.floor((""+e).length/3),i="",r=2;r>=1;r--){i=parseFloat((0!=a?e/Math.pow(1e3,a):e).toPrecision(r));var o=(i+"").replace(/[^a-zA-Z 0-9]+/g,"");if(o.length<=2)break}i%1!=0&&(shortNum=i.toFixed(1)),t=i+n[a]}return t},getWindowTarget:function(){return this.isPhonegap()?"_system":"_blank"}}}),define("basecontroller",["backbone","pref","querystring","helper"],function(e,t,n,a){var i=e.View.extend({initialize:function(){a.isPhonegapIos()&&$("body").addClass("bodyphonegapios")},run:function(){console.log("Current controller is not implement this run() method. This text is returned from BaseController run() method.")},getFragment:function(){return e.history.getFragment()},redirect:function(t){e.history.loadUrl(t)},clearPageTitle:function(){document.title=""},setTcScrollMinHeight:function(){if(a.isSmallScreen()){var e=$(window).height()-108;$(".tc-scrolled").css("min-height",e+"px")}else{var e=$(window).height()-105;$(".tc-scrolled").css("min-height",e+"px")}},setAutoPageTitle:function(){if(0==document.title.length){var e=[];$(".heading .section, .pageheading .section, .pageheading h3 a").each(function(){var t=$(this).clone();t.find(".number").remove();var n=t.text();n=n.replace(/\(.*\)/,"").trim(),e.push(n)}),0==e.length&&e.push(t.get("company"));var n=e.join(" → ");a.setPageTitle(n)}}});return i}),!function(e,t){"function"==typeof define&&define.amd?define("backbonereactcomponent",["react","backbone","underscore"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("react"),require("backbone"),require("underscore")):t(e.React,e.Backbone,e._)}(this,function(e,t,n){"use strict";function a(e,t,n){this.state={},this.component=e;var a,i,r=n||e.props||{};a=e.overrideModel&&"function"==typeof e.overrideModel?e.overrideModel():r.model,i=e.overrideCollection&&"function"==typeof e.overrideCollection?e.overrideCollection():r.collection,this.setModels(a,t),this.setCollections(i,t)}t.React||(t.React={}),t.React.Component||(t.React.Component={});var i=t.React.Component.mixin={childContextTypes:{hasParentBackboneMixin:e.PropTypes.bool.isRequired,parentModel:e.PropTypes.any,parentCollection:e.PropTypes.any},contextTypes:{hasParentBackboneMixin:e.PropTypes.bool,parentModel:e.PropTypes.any,parentCollection:e.PropTypes.any},getChildContext:function(){return{hasParentBackboneMixin:!0,parentModel:this.getModel(),parentCollection:this.getCollection()}},componentDidMount:function(){this.setElement(e.findDOMNode(this))},componentDidUpdate:function(){this.setElement(e.findDOMNode(this))},getInitialState:function(){var e={};return this.wrapper||(this.wrapper=new a(this,e)),e},componentWillMount:function(){this.wrapper||(this.wrapper=new a(this))},componentWillUnmount:function(){this.wrapper&&(this.wrapper.stopListening(),delete this.wrapper)},componentWillReceiveProps:function(e){var t=e.model,n=e.collection;this.wrapper.model&&t?this.wrapper.model!==t&&(this.wrapper.stopListening(),this.wrapper=new a(this,void 0,e)):t&&(this.wrapper=new a(this,void 0,e)),this.wrapper.collection&&n?this.wrapper.collection!==n&&(this.wrapper.stopListening(),this.wrapper=new a(this,void 0,e)):n&&(this.wrapper=new a(this,void 0,e))},$:function(){var t;if(this.$el)t=this.$el.find.apply(this.$el,arguments);else{var n=e.findDOMNode(this);t=n.querySelector.apply(n,arguments)}return t},getCollection:function(){return this.wrapper.collection||this.context.parentCollection},getModel:function(){return this.wrapper.model||this.context.parentModel},setElement:function(e){if(e&&t.$&&e instanceof t.$){if(e.length>1)throw new Error("You can only assign one element to a component");this.el=e[0],this.$el=e}else e&&(this.el=e,t.$&&(this.$el=t.$(e)));return this}};return n.extend(a.prototype,t.Events,{onError:function(e,t,n){n.silent||this.component.setState({isRequesting:!1,hasError:!0,error:t})},onInvalid:function(e,t,n){n.silent||this.component.setState({isInvalid:!0})},onRequest:function(e,t,n){n.silent||this.component.setState({isRequesting:!0,hasError:!1,isInvalid:!1})},onSync:function(e,t,n){n.silent||this.component.setState({isRequesting:!1})},setModels:function(e,t,a){"undefined"!=typeof e&&(e.attributes||"object"==typeof e&&n.values(e)[0].attributes)&&(this.model=e,this.setStateBackbone(e,void 0,t,a),this.startModelListeners(e))},setCollections:function(e,t,a){"undefined"!=typeof e&&(e.models||"object"==typeof e&&n.values(e)[0].models)&&(this.collection=e,this.setStateBackbone(e,void 0,t,a),this.startCollectionListeners(e))},setStateBackbone:function(e,t,n,a){if(e.models||e.attributes)this.setState.apply(this,arguments);else for(t in e)this.setStateBackbone(e[t],t,n)},setState:function(e,t,a,i){var r={},o=e.toJSON?e.toJSON():e;t?r[t]=o:e.models?r.collection=o:r.model=o,a?n.extend(a,r):i?(this.nextState=n.extend(this.nextState||{},r),n.defer(n.bind(function(){this.nextState&&(this.component.setState(this.nextState),this.nextState=null)},this))):this.component.setState(r)},startCollectionListeners:function(e,t){if(e||(e=this.collection),e)if(e.models)this.listenTo(e,"add remove change sort reset",n.partial(this.setStateBackbone,e,t,void 0,!0)).listenTo(e,"error",this.onError).listenTo(e,"request",this.onRequest).listenTo(e,"sync",this.onSync);else if("object"==typeof e)for(t in e)e.hasOwnProperty(t)&&this.startCollectionListeners(e[t],t)},startModelListeners:function(e,t){if(e||(e=this.model),e)if(e.attributes)this.listenTo(e,"change",n.partial(this.setStateBackbone,e,t,void 0,!0)).listenTo(e,"error",this.onError).listenTo(e,"request",this.onRequest).listenTo(e,"sync",this.onSync).listenTo(e,"invalid",this.onInvalid);else if("object"==typeof e)for(t in e)this.startModelListeners(e[t],t)}}),i.on=function(e,t){var n;n=e.wrapper?e.wrapper:new a(e),t.models&&n.setModels(t.models),t.collections&&n.setCollections(t.collections),e.wrapper=n},i.onModel=function(e,t){i.on(e,{models:t})},i.onCollection=function(e,t){i.on(e,{collections:t})},i.off=function(e,t){2===arguments.length?e.wrapper&&e.wrapper.stopListening(t):i.componentWillUnmount.call(e)},i}),define("role",["pref"],function(e){return{role:[],isInit:!1,COMPANY_SETTING:231,REPORT_VIEW:252,REPORT_EXPLORER:253,EMPLOYEE_MANAGE:262,EMPLOYEE_ADD:307,EMPLOYEE_DETAIL:308,EMPLOYEE_MANAGE_WORKTIME:263,EMPLOYEE_MANAGE_POINT:264,EMPLOYEE_MANAGE_BONUS:265,EMPLOYEE_CHECKIN_TERMINAL:326,EMPLOYEE_CHECKIN_EDIT:327,PROJECT_MANAGE:266,FILE_MANAGE:268,WORKSCHEDULE_REVIEW:287,WORKSCHEDULE_CHANGE:306,CUSTOMERPOINT_VIEW:296,CUSTOMERPOINT_MANAGE:297,CUSTOMERPOINT_MANAGERULE:298,ELEARNING_MANAGE:301,BLOG_MANAGE_POST:320,BLOG_MANAGE_COMMENT:321,init:function(e){e.length>0?this.role=e.split(","):this.role=[]},hasById:function(e){var t=!1;return $.each(this.role,function(n,a){return a==e+""||0==a.indexOf(e+":")?void(t=!0):void 0}),t},getObjectById:function(e){var t=[];return $.each(this.role,function(n,a){if(-1!=a.indexOf(e+"")){var i=a.split(":");2==i.length&&(t=i[1].split("-"))}}),t},has:function(e){var t=!1,n=this.nameToNumber(e);return-1!=this.role.indexOf(n)&&(t=!0),t},nameToNumber:function(e){var t=0;switch(e){default:t=0}return t},hasPlanStore:function(){return null!=e.get("planstore")&e.get("planstore")>0}}}),define("license",["pref"],function(e){return{license:[],isInit:!1,init:function(){var t=e.get("license");t.length>0&&(this.license=t.split(",")),this.isInit=!0},has:function(e){var t=!1;this.isInit||this.init();var n=this.nameToNumber(e);return-1!=this.license.indexOf(n)&&(t=!0),t},nameToNumber:function(e){var t=0;switch(e){default:t=0}return t}}}),define("basecollection",["backbone","setting","helper","cacheddata","eventbus","pref","companysetting"],function(e,t,n,a,i,r,o){var s=e.Collection.extend({url:"",model:null,maxLimit:1e3,defaultLimit:50,parse:function(e){return this.total=e.total,this.currentpage=e.currentpage,this.limit=e.limit,e.items},initialize:function(e,n){0!=this.url.indexOf("http")&&(this.url=t.rooturl+this.url)},fetchFromCache:function(e){$.isEmptyObject(e)&&(e={});var t=$.extend({},e),i=$.trim(e.keyword);i=n.strStripedUnicode(i);var r={page:e.page,limit:e.limit,sort_by:e.sort_by,sort_type:e.sort_type};delete t.page,delete t.limit,delete t.sort_by,delete t.sort_type,delete t.keyword;var o=(new this.model).cacheName,s=a.get(o)||TAFFY([]),l=s();if(l.count()<=0)return this.paginatedCache(l,r);var c=l.first(),d=$.isArray(this.searchKeywordColumns)?this.searchKeywordColumns:[];if(i.length>0&&d.length>0){var u=[];$.each(d,function(e,t){if(c.hasOwnProperty(t)&&"string"==typeof c[t]){var n={};n[t]={likenocase:i},u.push(n)}}),l=l.filter(u)}var m={};return $.each(t,function(e,t){if(c.hasOwnProperty(e))switch(typeof c[e]){case"string":m[e]={isnocase:$.trim(t)};break;case"number":m[e]=parseFloat(t);break;default:m[e]=t}}),l=l.filter(m),this.paginatedCache(l,r)},paginatedCache:function(e,t){("object"!=typeof t||$.isEmptyObject(t))&&(t={});var a=n.strToInt(t.limit)>0?n.strToInt(t.limit):this.defaultLimit;a>this.maxLimit&&(a=this.maxLimit);var i=n.strToInt(t.page)>1?n.strToInt(t.page):1,r=a*(i-1)+1,o=void 0===t.sort_by?"id":t.sort_by;switch($.trim(t.sort_type).toUpperCase()){case"ASC":o+=" asec";break;default:o+=" desc"}var s={total:e.count(),items:e.order(o).start(r).limit(a).get(),limit:a,currentpage:i};return s},getJsDataUrl:function(e){var t=(new this.model).cacheName,n=0;return e.jsversion.hasOwnProperty(t)&&(n=e.jsversion[t]),this.url+"/data.js?cid="+r.get("cid")+"&rid="+e.id+"&hmac="+e.hmac+"&v="+n},getDataForCache:function(e){var t=(new this.model).cacheName,n=0;e.jsversion.hasOwnProperty(t)&&(n=e.jsversion[t]);var s=a.getversion(t);n!=s&&$.ajax({url:this.url+"/fulldata?company_id="+r.get("cid")+"&version="+n,success:function(e){if("companysetting"==t)r.set("companysetting",JSON.stringify(e[0])),o.init(e[0]),console.log("Update new company setting");else{var s=TAFFY(e);a.set(t,s)}a.setversion(t,n),i.trigger("companyresource.loaddone",{name:t,success:!0})},error:function(){var e=TAFFY([]);a.set(t,e),a.setversion(t,n),i.trigger("companyresource.loaddone",{name:t,success:!1})}})},clearCacheData:function(){var e=(new this.model).cacheName;a.remove(e),console.log("clear cache data",e)},getFromIdList:function(e){var t=[];return $.each(e.ids,function(e,n){n+="",n.length>0&&"0"!=n&&-1==$.inArray(n,t)&&t.push(n)}),$.ajax({url:this.url+"/ids?company_id="+r.get("cid")+"&ids="+t.join(","),success:e.success,error:e.error})}});return s}),define("models/companyresource",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/companyresources"});return t}),define("collections/companyresource",["basecollection","models/companyresource"],function(e,t){var n=e.extend({url:"v1/companyresources",model:t});return n}),define("language/user",["baselanguage"],function(e){var t={vn:{login_heading:"Đăng nhập",account:"Email / Mã nhân viên",email:"Email",password:"Mật khẩu",password2:"Xác nhận mật khẩu",rememberme:"Ghi nhớ đăng nhập",login_submit:"Đăng nhập",forgotpass:"Quên mật khẩu?",error_account_require:"Nhập tên tài khoản của bạn.",error_account_format_invalid:'Tên tài khoản không hợp lệ. Mã nhân viên có định dạng "MaNhanVien@ScreenName"',error_account_invalid:"Tài khoản không hợp lệ.",create_company:"Tạo công ty",create_company_title:"Tạo công ty của bạn",error_email_require:"Nhập Email của bạn.",error_email_format_invalid:"Định dạng email không hợp lệ.",error_email_invalid:"Tài khoản không hợp lệ.",error_activecode_invalid:"Mã kích hoạt không hợp lệ.",error_password_required:"Bạn chưa nhập mật khẩu",error_password_to_short:"Mật khẩu quá ngắn (ít nhất 7 ký tự).",error_password_require:"Nhập mật khẩu của bạn.",error_password2_invalid:"Xác nhận mật khẩu không hợp lệ.",login_error_header:"Lỗi",error_no_company:"Bạn chưa thuộc một công ty nào.",error_company_notfound:"Không tìm thấy công ty nào để tiếp tục truy cập.",selectcompany:"Chọn 1 công ty để tiếp tục:",forgotpass_heading:"Quên mật khẩu",resetpassword_heading:"Mật khẩu mới",forgotpass_submit:"Gởi mật khẩu cho tôi",forgotpass_success_header:"Gửi email thành công.",forgotpass_success_body:"Chúng tôi đã gởi một email kèm đường link khôi phục mật khẩu cho tài khoản của bạn. Bạn hãy mở email này ra và nhấn vào đường link gởi trong email để tiếp tục quá trình khôi phục mật khẩu.",success_resetpassword:"Đặt lại mật khẩu thành công.",login_in_success_form:"Đăng nhập vào tài khoản",forgotpass_error_header:"Lỗi",error_account_not_found:"Không tìm thấy tài khoản.",error_email_send:"Không thể gửi email đến địa chỉ của bạn",update:"Cập nhật",GENDER_MALE:"Nam",GENDER_FEMALE:"Nữ"},en:{login_heading:"Đăng nhập",account:"Email / Mã nhân viên",email:"Email",password:"Mật khẩu",password2:"Xác nhận mật khẩu",rememberme:"Ghi nhớ đăng nhập",login_submit:"Đăng nhập",forgotpass:"Quên mật khẩu?",error_account_require:"Nhập tên tài khoản của bạn.",error_account_format_invalid:'Tên tài khoản không hợp lệ. Mã nhân viên có định dạng "MaNhanVien@ScreenName"',error_account_invalid:"Tài khoản không hợp lệ.",create_company:"Tạo công ty",create_company_title:"Tạo công ty của bạn",error_email_require:"Nhập Email của bạn.",error_email_format_invalid:"Định dạng email không hợp lệ.",error_email_invalid:"Tài khoản không hợp lệ.",error_activecode_invalid:"Mã kích hoạt không hợp lệ.",error_password_required:"Bạn chưa nhập mật khẩu",error_password_to_short:"Mật khẩu quá ngắn (ít nhất 7 ký tự).",error_password_require:"Nhập mật khẩu của bạn.",error_password2_invalid:"Xác nhận mật khẩu không hợp lệ.",login_error_header:"Lỗi",error_no_company:"Bạn chưa thuộc một công ty nào.",error_company_notfound:"Không tìm thấy công ty nào để đăng nhập. Vui lòng tạo công ty mới!",selectcompany:"Chọn 1 công ty để tiếp tục:",forgotpass_heading:"Quên mật khẩu",resetpassword_heading:"Mật khẩu mới",forgotpass_submit:"Gởi mật khẩu cho tôi",forgotpass_success_header:"Gửi email thành công.",forgotpass_success_body:"Chúng tôi đã gởi một email kèm đường link khôi phục mật khẩu cho tài khoản của bạn. Bạn hãy mở email này ra và nhấn vào đường link gởi trong email để tiếp tục quá trình khôi phục mật khẩu.",success_resetpassword:"Đặt lại mật khẩu thành công.",login_in_success_form:"Đăng nhập vào tài khoản",forgotpass_error_header:"Lỗi",error_account_not_found:"Không tìm thấy tài khoản.",error_email_send:"Không thể gửi email đến địa chỉ của bạn",update:"Cập nhật",GENDER_MALE:"Nam",GENDER_FEMALE:"Nữ"}};return new e({lang:t})}),define("models/user",["basemodel","language/user"],function(e,t){var n=e.extend({urlRoot:"v1/users",cacheName:"user",GENDER_MALE:1,GENDER_FEMALE:2,getGenderList:function(){return[{code:this.GENDER_FEMALE,text:t.t("GENDER_FEMALE"),icon:"tc-female"},{code:this.GENDER_MALE,text:t.t("GENDER_MALE"),icon:"tc-male"}]},getGender:function(e){e=parseInt(e);var n={code:e,text:"",icon:""};switch(e){case this.GENDER_FEMALE:n.text=t.t("GENDER_FEMALE"),n.icon="tc-female";break;case this.GENDER_MALE:n.text=t.t("GENDER_MALE"),n.icon="tc-male"}return n},loginFromJwt:function(e,t,n,a){$.ajax({url:this.urlRoot+"/jwtlogin",type:"post",dataType:"json",headers:{Authorization:e},contentType:"application/json",data:JSON.stringify({jwt:e,employeetoken:t,employee:n}),success:a.success})},logout:function(e){$.ajax({url:this.urlRoot+"/logout",type:"post",dataType:"json",contentType:"application/json",success:e.success})}});return n}),define("collections/user",["basecollection","models/user"],function(e,t){
var n=e.extend({url:"v1/users",model:t});return n}),define("language/employee",["baselanguage"],function(e){var t={vn:{note_column_info_title:"Xem ghi chú cột dữ liệu cho file mẫu..",note_column_info_content:"Ghi chú giá trị cho một số cột dữ liệu xuất hiện trong file Excel cần import",heading:"Nhân viên",heading_sidebar:"Bộ lọc nhân viên",office:"Văn phòng làm việc",email:"Email",internalid:"Mã nội bộ",notification:"Thiết lập người nhận thông báo",tab_order:"Đơn hàng",tab_customer:"Khách hàng",tab_cashflow:"Phiếu thu/chi",tab_receipt:"Phiếu nhập/xuất",store:"Cửa hàng",store_all:"Tất cả cửa hàng",warehouse:"Kho",warehouse_all:"Tất cả kho",manage:"Quản lý",customerorigin:"Nguồn",customerorigin_all:"Tất cả nguồn",receiver:"Người nhận",save:"Lưu",choose_user:"Chọn người nhận",note_receiver_order:"Ngoài nhân viên bán hàng, các nhân viên được gán thêm ở đây sẻ được nhận thông báo khi có đơn hàng mới được tạo",note_continue_notification_order:"Chọn để  tiếp tục gửi thông báo khi có thao tác cập nhật đơn hàng",continue_notification_order:"Nhận thông báo khi cập nhật đơn hàng",note_receiver_cashflow:"Ngoài nhân viên tạo, các nhân viên được gán thêm ở đây sẻ được nhận thông báo khi có phiếu thu chi được tạo",note_continue_notification_cashflow:"Chọn để  tiếp tục gửi thông báo khi có thao tác cập nhật phiếu thu chi",continue_notification_cashflow:"Nhận thông báo khi cập nhật phiếu",note_receiver_receipt:"Ngoài nhân viên tạo, các nhân viên được gán thêm ở đây sẻ được nhận thông báo khi có phiếu nhập xuất kho được tạo",note_continue_notification_receipt:"Chọn để  tiếp tục gửi thông báo khi có thao tác cập nhật phiếu nhập xuất kho",continue_notification_receipt:"Nhận thông báo khi cập nhật phiếu",note_receiver_customer:"Ngoài nhân viên tạo và được gán ban đầu, các nhân viên được gán thêm ở đây sẻ được nhận thông báo khi có khách hàng mới được tạo",note_continue_notification_customer:"Chọn để  tiếp tục gửi thông báo khi có thao tác cập nhật khách hàng",continue_notification_customer:"Nhận thông báo khi cập nhật khách hàng",error_store_invalid:"Không tìm thấy cửa hàng trong hệ thống",error_listusers_invalid:"Không tìm thấy nhân viên trong hệ thống",error_warehouse_invalid:"Không tìm thấy kho trong hệ thống",error_customer_origin_invalid:"Không tìm thấy nguồn khách hàng trong hệ thống",date_created:"Ngày tạo",update_fail:"Đã xảy ra lỗi. Vui lòng thử lại!",jobtitle:"Chức vụ",time:"Thời gian",externalpartner:"Thành viên này chỉ là một đối tác bên ngoài.",discription:"'Đối tác bên ngoài chỉ có thể truy cập vào các dự án của mình, hoạt động & Chat)",discription2:"Nếu công ty của bạn / nhóm đang chạy (hoặc có) một hệ thống để quản lý tất cả các tài khoản, trường này sẽ lưu trữ ID người dùng của hệ thống hiện tại của bạn. (Cho phép A-Z, 0-9 ký tự). Vídụ: E16217, CE40128 ...",workspace:"Làm việc tại ",filterOffice:"Tìm theo văn phòng",filterOfficeAll:"Tất cả văn phòng",filterDepartment:"Tìm theo phòng ban",filterDepartmentAll:"Tất cả phòng ban",filterPosition:"Tìm theo chức vụ",filter_status:"Trạng thái",filterPositionAll:"Tất cả chức vụ",load_more_employee:"Xem thêm",filter_not_found:"Không tìm thấy kết quả.",empty_list:"Không có nhân viên nào.",import_group:"Import",import:"Import danh sách nhân viên",import_office:"Import chuyển công tác",password:"Mật khẩu",insert:"Thêm mới",import_profile:"Import sơ yếu lý lịch",ignore_ip_checkin:"Không giới hạn IP khi chấm công",filter_type:"Loại hình công việc",filter_office_id:"Văn phòng",filter_department_id:"Phòng ban",filter_position_id:"Cấp bậc",filter_keyword:"Từ khóa",STATUS_UNACTIVATED:"Chưa hiệu lực",STATUS_ENABLE:"Bật",STATUS_DISABLE:"Tắt",STATUS_DELETED:"Xóa",STATUS_ALL:"Trạng thái (Tất cả)",POSITION_INTERNSHIP:"Mới tốt nghiệp / Thực tập",POSITION_STAFF:"Nhân viên",POSITION_GROUP_LEAD:"Trưởng nhóm / Giám sát",POSITION_ASSISTANT_MANAGER:"Phó phòng",POSITION_MANAGER:"Trưởng phòng",POSITION_SUBDIRECTOR:"Phó giám đốc",POSITION_DIRECTOR:"Giám đốc",POSITION_CEO:"Giám đốc điều hành",POSITION_SUBCHAIRMAN:"Phó chủ tịch",POSITION_CHAIRMAN:"Chủ tịch",POSITION_STORE_ASSISTANT_MANAGER:"Trợ lý quản lý cửa hàng",POSITION_STORE_MANAGER:"Quản lý cửa hàng",TYPE_FULLTIME:"Nhân viên chính thức",TYPE_PARTTIME:"Bán thời gian",TYPE_PREFLIGHT:"Thử việc",TYPE_OVERTIME:"Làm thêm ngoài giờ",TYPE_SEASONAL:"Nhân viên thời vụ",TYPE_PROJECT:"Làm dự án",exportexcel:"Xuất Excel",user_info_title:"Tạo thành viên",user_info_content:"Không thể tìm thấy bất kỳ người dùng với email được chọn. Sử dụng mẫu sau để tạo người dùng mới với email được chọn.",employee_import_info_title:"Import tập tin Excel",employee_export_info_title:"Export tập tin Excel",employee_export_info_content:"Xuất thông tin nhân viên",GENDER_UNKNOWN:"Không xác định",GENDER_MALE:"Nam",GENDER_FEMALE:"Nữ",error_office_id_notfound:"Mã văn phòng không hợp lệ",error_employee_internal_id_not_valid:"Internal ID không hợp lệ",employee_import_info_content:'Upload tập tin Excel với định dạng sau:<br /><a href="/files/employee-import-format.xls">&raquo; Nhấn vào đây để tải file mẫu</a>',employee_import_office_info_content:'Upload tập tin Excel với định dạng sau:<br /><a href="/files/changeoffice-import-format.xls">&raquo; Nhấn vào đây để tải file mẫu</a>',search:"Tìm kiếm...",employee:"Nhân viên",Password:"Mật khẩu",fullname:"Họ tên",note:"Ghi chú",status:"Trạng thái",workTimeReport:"Tổng hợp giờ công",employee_info_title:"Thông tin nhân viên",employee_info_content:"Thông tin chi tiết nhân viên",no_import_data:"Không có dữ liệu",heading_import_data:"Import nhân viên",checkinHistory:"Lịch sử chấm công",checkInOut:"Chấm công",position:"Cấp bậc",name:"Tên",close:"Đóng",phone:"Điện thoại",department:"Phòng ban",type:"Loại hình công việc",import_finished:"Import hoàn tất",file_excel:"Tập tin excel",upload_file:"Upload tập tin",error_email_invalid:"Email sai định dạng",error_email_required:"Vui lòng nhập Email",error_phone_required:"Vui lòng nhập số điện thoại",error_user_id_required:"Email chưa được đăng ký",error_user_id_notfound:"Email chưa được đăng ký, Vui lòng điền thông tin bên dưới để đăng ký",error_department_id_notfound:"Phòng ban không tồn tại",error_company_id_invalid:"Công ty không tồn tại",error_user_id_existed:"thành viên đã là nhân viên",error_job_title_is_require:"Vui lòng nhập chức vụ",error_import:"Đã xảy ra lỗi. Vui lòng thử lại!",error_data_invalid:"Không đúng định dạng file!",error_file_invalid:"Không đúng định dạng file!",error_file_required:"Vui lòng chọn file!",error_file_size:"Dữ liệu file lớn hơn 100mb!",error_fullname_required:"Vui lòng nhập họ tên!",error_email_existed:"Email đã được đăng ký!",error_password_too_short:"Mật khẩu quá ngắn (ít nhất 6 ký tự)!",error_interal_id_exist:"Internal ID đã tồn tại!",error_interal_id_not_found:"Internal ID không tồn tại!",error_internal_id_require:"Vui lòng nhập Internal ID!",error_to_department_not_valid:"Phòng ban không hợp lệ",error_to_position_not_valid:"Cấp bậc không hợp lệ!",error_to_type_not_valid:"Loại hình công việc không hợp lệ!",error_to_office_not_valid:"Văn phòng làm việc không hợp lệ!",error_status_require:"Vui lòng chọn Trạng thái!",error_status_invalid:"Trạng thái không hợp lệ!",error_title_require:"Vui lòng nhập tiêu đề!",tab_syll:"Sơ yếu lý lịch",tab_hd:"Hợp đồng",tab_tk:"Tài khoản",tab_qtlav:"Quá trình làm việc",tab_cc:"Chấm công",tab_l:"Lương",tab_np:"Nghỉ phép",tab_ct:"Công tác",tab_ktkl:"Khen thưởng kỉ luật",profile_title:"Thông tin cá nhân",gender:"Giới tính",internal_id:"ID Nội bộ",detail_tooltip:"Xem thông tin chi tiết",edit_tooltip:"Cập nhật thông tin",delete_tooltip:"Xóa nhân viên này",exit_me_heading:"Yêu cầu không tham gia công ty này",exit_me_submit:"Hoàn tất",exit_me_warning_header:"Lưu ý",exit_me_warning:"Sau khi nhấn hoàn tất, bạn sẽ không thể tiếp tục đăng nhập vào công ty này. Hãy kiểm tra cẩn thận trước khi gửi yêu cầu.",error_owner_can_not_exit_when_still_has_employee:"Vì là người tạo công ty nên bạn phải xóa hết nhân viên khác trước khi tự xóa mình.",error_can_not_update_database:"Có lỗi khi cập nhật cơ sở dữ liệu",error_email_not_match:"Email tài khoản nhập không khớp. Hãy kiểm tra lại.",exit_success:"Đã xử lý thành công.",setting:"Cấu hình",add_button:"Thêm nhân viên mới",success_add:"Đã thêm thành công nhân viên. Chúng tôi đã gửi thông tin tài khoản kèm MẬT KHẨU đến email mà bạn đã nhập.",email_help:"Email phải hoạt động. Mật khẩu sẽ được gửi vào địa chỉ email này.",set_password:"Đổi mật khẩu",error_password_required:"Bạn chưa nhập mật khẩu"},en:{note_column_info_title:"Xem ghi chú cột dữ liệu cho file mẫu..",note_column_info_content:"Ghi chú giá trị cho một số cột dữ liệu xuất hiện trong file Excel cần import",heading:"Nhân viên",heading_sidebar:"Bộ lọc nhân viên",office:"Văn phòng làm việc",email:"Email",internalid:"Mã nội bộ",notification:"Thiết lập người nhận thông báo",tab_order:"Đơn hàng",tab_customer:"Khách hàng",tab_cashflow:"Phiếu thu/chi",tab_receipt:"Phiếu nhập/xuất",store:"Cửa hàng",store_all:"Tất cả cửa hàng",warehouse:"Kho",warehouse_all:"Tất cả kho",manage:"Quản lý",customerorigin:"Nguồn",customerorigin_all:"Tất cả nguồn",receiver:"Người nhận",save:"Lưu",choose_user:"Chọn người nhận",note_receiver_order:"Ngoài nhân viên bán hàng, các nhân viên được gán thêm ở đây sẻ được nhận thông báo khi có đơn hàng mới được tạo",note_continue_notification_order:"Chọn để  tiếp tục gửi thông báo khi có thao tác cập nhật đơn hàng",continue_notification_order:"Nhận thông báo khi cập nhật đơn hàng",note_receiver_cashflow:"Ngoài nhân viên tạo, các nhân viên được gán thêm ở đây sẻ được nhận thông báo khi có phiếu thu chi được tạo",note_continue_notification_cashflow:"Chọn để  tiếp tục gửi thông báo khi có thao tác cập nhật phiếu thu chi",continue_notification_cashflow:"Nhận thông báo khi cập nhật phiếu",note_receiver_receipt:"Ngoài nhân viên tạo, các nhân viên được gán thêm ở đây sẻ được nhận thông báo khi có phiếu nhập xuất kho được tạo",note_continue_notification_receipt:"Chọn để  tiếp tục gửi thông báo khi có thao tác cập nhật phiếu nhập xuất kho",continue_notification_receipt:"Nhận thông báo khi cập nhật phiếu",note_receiver_customer:"Ngoài nhân viên tạo và được gán ban đầu, các nhân viên được gán thêm ở đây sẻ được nhận thông báo khi có khách hàng mới được tạo",note_continue_notification_customer:"Chọn để  tiếp tục gửi thông báo khi có thao tác cập nhật khách hàng",continue_notification_customer:"Nhận thông báo khi cập nhật khách hàng",error_store_invalid:"Không tìm thấy cửa hàng trong hệ thống",error_listusers_invalid:"Không tìm thấy nhân viên trong hệ thống",error_warehouse_invalid:"Không tìm thấy kho trong hệ thống",error_customer_origin_invalid:"Không tìm thấy nguồn khách hàng trong hệ thống",date_created:"Ngày tạo",update_fail:"Đã xảy ra lỗi. Vui lòng thử lại!",jobtitle:"Chức vụ",time:"Thời gian",externalpartner:"Thành viên này chỉ là một đối tác bên ngoài.",discription:"'Đối tác bên ngoài chỉ có thể truy cập vào các dự án của mình, hoạt động & Chat)",discription2:"Nếu công ty của bạn / nhóm đang chạy (hoặc có) một hệ thống để quản lý tất cả các tài khoản, trường này sẽ lưu trữ ID người dùng của hệ thống hiện tại của bạn. (Cho phép A-Z, 0-9 ký tự). Vídụ: E16217, CE40128 ...",workspace:"Làm việc tại ",filterOffice:"Tìm theo văn phòng",filterOfficeAll:"Tất cả văn phòng",filterDepartment:"Tìm theo phòng ban",filterDepartmentAll:"Tất cả phòng ban",filterPosition:"Tìm theo chức vụ",filter_status:"Trạng thái",filterPositionAll:"Tất cả chức vụ",load_more_employee:"Xem thêm",filter_not_found:"Không tìm thấy kết quả.",empty_list:"Không có nhân viên nào.",import_group:"Import",import:"Import danh sách nhân viên",import_office:"Import chuyển công tác",password:"Mật khẩu",insert:"Thêm mới",import_profile:"Import sơ yếu lý lịch",ignore_ip_checkin:"Không giới hạn IP khi chấm công",filter_type:"Loại hình công việc",filter_office_id:"Văn phòng",filter_department_id:"Phòng ban",filter_position_id:"Cấp bậc",filter_keyword:"Từ khóa",STATUS_UNACTIVATED:"Chưa hiệu lực",STATUS_ENABLE:"Bật",STATUS_DISABLE:"Tắt",STATUS_DELETED:"Xóa",STATUS_ALL:"Trạng thái (Tất cả)",POSITION_INTERNSHIP:"Mới tốt nghiệp / Thực tập",POSITION_STAFF:"Nhân viên",POSITION_GROUP_LEAD:"Trưởng nhóm / Giám sát",POSITION_ASSISTANT_MANAGER:"Phó phòng",POSITION_MANAGER:"Trưởng phòng",POSITION_SUBDIRECTOR:"Phó giám đốc",POSITION_DIRECTOR:"Giám đốc",POSITION_CEO:"Giám đốc điều hành",POSITION_SUBCHAIRMAN:"Phó chủ tịch",POSITION_CHAIRMAN:"Chủ tịch",POSITION_STORE_ASSISTANT_MANAGER:"Trợ lý quản lý cửa hàng",POSITION_STORE_MANAGER:"Quản lý cửa hàng",TYPE_FULLTIME:"Nhân viên chính thức",TYPE_PARTTIME:"Bán thời gian",TYPE_PREFLIGHT:"Thử việc",TYPE_OVERTIME:"Làm thêm ngoài giờ",TYPE_SEASONAL:"Nhân viên thời vụ",TYPE_PROJECT:"Làm dự án",exportexcel:"Xuất Excel",user_info_title:"Tạo thành viên",user_info_content:"Không thể tìm thấy bất kỳ người dùng với email được chọn. Sử dụng mẫu sau để tạo người dùng mới với email được chọn.",employee_import_info_title:"Import tập tin Excel",employee_export_info_title:"Export tập tin Excel",employee_export_info_content:"Xuất thông tin nhân viên",GENDER_UNKNOWN:"Không xác định",GENDER_MALE:"Nam",GENDER_FEMALE:"Nữ",error_office_id_notfound:"Mã văn phòng không hợp lệ",error_employee_internal_id_not_valid:"Internal ID không hợp lệ",employee_import_info_content:'Upload tập tin Excel với định dạng sau:<br /><a href="/files/employee-import-format.xls">&raquo; Nhấn vào đây để tải file mẫu</a>',employee_import_office_info_content:'Upload tập tin Excel với định dạng sau:<br /><a href="/files/changeoffice-import-format.xls">&raquo; Nhấn vào đây để tải file mẫu</a>',search:"Tìm kiếm...",employee:"Nhân viên",Password:"Mật khẩu",fullname:"Họ tên",note:"Ghi chú",status:"Trạng thái",workTimeReport:"Tổng hợp giờ công",employee_info_title:"Thông tin nhân viên",employee_info_content:"Thông tin chi tiết nhân viên",no_import_data:"Không có dữ liệu",heading_import_data:"Import nhân viên",checkinHistory:"Lịch sử chấm công",checkInOut:"Chấm công",position:"Cấp bậc",name:"Tên",close:"Đóng",phone:"Điện thoại",department:"Phòng ban",type:"Loại hình công việc",import_finished:"Import hoàn tất",file_excel:"Tập tin excel",upload_file:"Upload tập tin",error_email_invalid:"Email sai định dạng",error_email_required:"Vui lòng nhập Email",error_phone_required:"Vui lòng nhập số điện thoại",error_user_id_required:"Email chưa được đăng ký",error_user_id_notfound:"Email chưa được đăng ký, Vui lòng điền thông tin bên dưới để đăng ký",error_department_id_notfound:"Phòng ban không tồn tại",error_company_id_invalid:"Công ty không tồn tại",error_user_id_existed:"thành viên đã là nhân viên",error_job_title_is_require:"Vui lòng nhập chức vụ",error_import:"Đã xảy ra lỗi. Vui lòng thử lại!",error_data_invalid:"Không đúng định dạng file!",error_file_invalid:"Không đúng định dạng file!",error_file_required:"Vui lòng chọn file!",error_file_size:"Dữ liệu file lớn hơn 100mb!",error_fullname_required:"Vui lòng nhập họ tên!",error_email_existed:"Email đã được đăng ký!",error_password_too_short:"Mật khẩu quá ngắn (ít nhất 6 ký tự)!",error_interal_id_exist:"Internal ID đã tồn tại!",error_interal_id_not_found:"Internal ID không tồn tại!",error_internal_id_require:"Vui lòng nhập Internal ID!",error_to_department_not_valid:"Phòng ban không hợp lệ",error_to_position_not_valid:"Cấp bậc không hợp lệ!",error_to_type_not_valid:"Loại hình công việc không hợp lệ!",error_to_office_not_valid:"Văn phòng làm việc không hợp lệ!",error_status_require:"Vui lòng chọn Trạng thái!",error_status_invalid:"Trạng thái không hợp lệ!",error_title_require:"Vui lòng nhập tiêu đề!",tab_syll:"Sơ yếu lý lịch",tab_hd:"Hợp đồng",tab_tk:"Tài khoản",tab_qtlav:"Quá trình làm việc",tab_cc:"Chấm công",tab_l:"Lương",tab_np:"Nghỉ phép",tab_ct:"Công tác",tab_ktkl:"Khen thưởng kỉ luật",profile_title:"Thông tin cá nhân",gender:"Giới tính",internal_id:"ID Nội bộ",detail_tooltip:"Xem thông tin chi tiết",edit_tooltip:"Cập nhật thông tin",delete_tooltip:"Xóa nhân viên này",exit_me_heading:"Yêu cầu không tham gia công ty này",exit_me_submit:"Hoàn tất",exit_me_warning_header:"Lưu ý",exit_me_warning:"Sau khi nhấn hoàn tất, bạn sẽ không thể tiếp tục đăng nhập vào công ty này. Hãy kiểm tra cẩn thận trước khi gửi yêu cầu.",error_owner_can_not_exit_when_still_has_employee:"Vì là người tạo công ty nên bạn phải xóa hết nhân viên khác trước khi tự xóa mình.",error_can_not_update_database:"Có lỗi khi cập nhật cơ sở dữ liệu",error_email_not_match:"Email tài khoản nhập không khớp. Hãy kiểm tra lại.",exit_success:"Đã xử lý thành công.",setting:"Cấu hình",add_button:"Thêm nhân viên mới",success_add:"Đã thêm thành công nhân viên. Chúng tôi đã gửi thông tin tài khoản kèm MẬT KHẨU đến email mà bạn đã nhập.",email_help:"Email phải hoạt động. Mật khẩu sẽ được gửi vào địa chỉ email này.",set_password:"Đổi mật khẩu",error_password_required:"Bạn chưa nhập mật khẩu"}};return new e({lang:t})}),define("models/employee",["basemodel","language/employee","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/employees",cacheName:"employee",STATUS_UNACTIVATED:0,STATUS_ENABLE:1,STATUS_DISABLED:3,STATUS_DELETED:5,POSITION_INTERNSHIP:100,POSITION_STAFF:0,POSITION_GROUP_LEAD:60,POSITION_STORE_ASSISTANT_MANAGER:51,POSITION_ASSISTANT_MANAGER:50,POSITION_STORE_MANAGER:11,POSITION_MANAGER:10,POSITION_SUBDIRECTOR:7,POSITION_DIRECTOR:5,POSITION_CEO:4,POSITION_SUBCHAIRMAN:2,POSITION_CHAIRMAN:1,TYPE_FULLTIME:0,TYPE_PARTTIME:1,TYPE_PREFLIGHT:3,TYPE_OVERTIME:5,TYPE_SEASONAL:7,TYPE_PROJECT:9,GENDER_UNKNOWN:0,GENDER_MALE:1,GENDER_FEMALE:2,getGenderList:function(){return[{code:this.GENDER_UNKNOWN,text:t.t("GENDER_UNKNOWN"),name:t.t("GENDER_UNKNOWN"),color:"1b1c1d",id:this.GENDER_UNKNOWN},{code:this.GENDER_MALE,text:t.t("GENDER_MALE"),name:t.t("GENDER_MALE"),color:"1b1c1d",id:this.GENDER_MALE},{code:this.GENDER_FEMALE,text:t.t("GENDER_FEMALE"),name:t.t("GENDER_FEMALE"),color:"1b1c1d",id:this.GENDER_FEMALE}]},getBulkActionList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE")},{code:this.STATUS_DISABLED,text:n.t("STATUS_DISABLE")},{code:this.STATUS_DELETED,text:n.t("delete")}]},getStatusList:function(){return[{code:this.STATUS_ENABLE,text:"ENABLE",color:"green",id:this.STATUS_ENABLE},{code:this.STATUS_DISABLED,text:"DISABLE",color:"red",id:this.STATUS_DISABLED}]},getStatus:function(e){e=parseInt(e);var t={code:e,text:"",color:""};switch(e){case this.STATUS_UNACTIVATED:t.text="UNACTIVATED",t.color="gray";break;case this.STATUS_ENABLE:t.text="ENABLE",t.color="green";break;case this.STATUS_DISABLED:t.text="DISABLE",t.color="red";break;case this.STATUS_DELETED:t.text="DELETED",t.color="orange"}return t},getTypeList:function(){return[{code:this.TYPE_FULLTIME,text:"FULLTIME"},{code:this.TYPE_PARTTIME,text:"PARTTIME"},{code:this.TYPE_PREFLIGHT,text:"PREFLIGHT"},{code:this.TYPE_OVERTIME,text:"OVERTIME"},{code:this.TYPE_SEASONAL,text:"SEASONAL"},{code:this.TYPE_PROJECT,text:"PROJECT"}]},getType:function(e){e=parseInt(e);var t={code:e,text:""};switch(e){case this.TYPE_FULLTIME:t.text="FULLTIME";break;case this.TYPE_PARTTIME:t.text="PARTTIME";break;case this.TYPE_PREFLIGHT:t.text="PREFLIGHT";break;case this.TYPE_OVERTIME:t.text="OVERTIME";break;case this.TYPE_SEASONAL:t.text="SEASONAL";break;case this.TYPE_PROJECT:t.text="PROJECT"}return t},getPositionList:function(){return[{code:this.POSITION_INTERNSHIP,text:t.t("POSITION_INTERNSHIP"),color:"orange"},{code:this.POSITION_STAFF,text:t.t("POSITION_STAFF"),color:"gray"},{code:this.POSITION_GROUP_LEAD,text:t.t("POSITION_GROUP_LEAD"),color:"gray"},{code:this.POSITION_ASSISTANT_MANAGER,text:t.t("POSITION_ASSISTANT_MANAGER"),color:"orange"},{code:this.POSITION_STORE_ASSISTANT_MANAGER,text:t.t("POSITION_STORE_ASSISTANT_MANAGER"),color:"orange"},{code:this.POSITION_MANAGER,text:t.t("POSITION_MANAGER"),color:"grey"},{code:this.POSITION_STORE_MANAGER,text:t.t("POSITION_STORE_MANAGER"),color:"grey"},{code:this.POSITION_SUBDIRECTOR,text:t.t("POSITION_SUBDIRECTOR"),color:"grey"},{code:this.POSITION_DIRECTOR,text:t.t("POSITION_DIRECTOR"),color:"grey"},{code:this.POSITION_CEO,text:t.t("POSITION_CEO"),color:"grey"},{code:this.POSITION_SUBCHAIRMAN,text:t.t("POSITION_SUBCHAIRMAN"),color:"grey"},{code:this.POSITION_CHAIRMAN,text:t.t("POSITION_CHAIRMAN"),color:"grey"}]},getPosition:function(e){e=parseInt(e);var n={code:e,text:"",color:""};switch(e){case this.POSITION_INTERNSHIP:n.text=t.t("POSITION_INTERNSHIP"),n.color="gray";break;case this.POSITION_STAFF:n.text=t.t("POSITION_STAFF"),n.color="gray";break;case this.POSITION_GROUP_LEAD:n.text=t.t("POSITION_GROUP_LEAD"),n.color="gray";break;case this.POSITION_ASSISTANT_MANAGER:n.text=t.t("POSITION_ASSISTANT_MANAGER"),n.color="gray";break;case this.POSITION_STORE_ASSISTANT_MANAGER:n.text=t.t("POSITION_STORE_ASSISTANT_MANAGER"),n.color="gray";break;case this.POSITION_MANAGER:n.text=t.t("POSITION_MANAGER"),n.color="gray";break;case this.POSITION_STORE_MANAGER:n.text=t.t("POSITION_STORE_MANAGER"),n.color="gray";break;case this.POSITION_SUBDIRECTOR:n.text=t.t("POSITION_SUBDIRECTOR"),n.color="gray";break;case this.POSITION_DIRECTOR:n.text=t.t("POSITION_DIRECTOR"),n.color="gray";break;case this.POSITION_CEO:n.text=t.t("POSITION_CEO"),n.color="gray";break;case this.POSITION_SUBCHAIRMAN:n.text=t.t("POSITION_SUBCHAIRMAN"),n.color="gray";break;case this.POSITION_CHAIRMAN:n.text=t.t("POSITION_CHAIRMAN"),n.color="gray"}return n},getDataFromEmployeeToken:function(e,t){$.ajax({url:this.urlRoot+"/token?token="+e,dataType:"json",success:t.success})},exitMe:function(e,t){$.ajax({url:this.urlRoot+"/exitme",method:"POST",dataType:"json",data:e,success:t.success,error:t.error,complete:t.complete})}});return a}),define("collections/employee",["basecollection","cacheddata","models/employee"],function(e,t,n){var a=e.extend({model:n,url:"v1/employees",fetchFromCache:function(e){("object"!=typeof e||$.isEmptyObject(e))&&(e={});var n=(new this.model).cacheName,a=t.get(n),i=a(function(){return void 0==e.user_id||this.user_id==e.user_id}),r={page:e.page,limit:e.limit,sort_by:e.sort_by,sort_type:e.sort_type};return this.paginatedCache(i,r)}});return a}),define("models/region",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/regions",cacheName:"region",STATUS_ENABLE:1,STATUS_DISABLE:3,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:"Enable",color:"green"},{code:this.STATUS_DISABLE,text:"Disable",color:"red"}]},getStatus:function(e){e=parseInt(e);var t={code:e,text:"",color:""};switch(e){case this.STATUS_ENABLE:t.text="Enable",t.color="green";break;case this.STATUS_DISABLE:t.text="Disable",t.color="red"}return t}});return t}),define("collections/region",["basecollection","models/region"],function(e,t){var n=e.extend({url:"v1/regions",model:t});return n}),define("models/department",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/departments",cacheName:"department",STATUS_ENABLE:1,STATUS_DISABLE:3,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:"Enable",color:"green"},{code:this.STATUS_DISABLE,text:"Disable",color:"red"}]},getStatus:function(e){e=parseInt(e);var t={code:e,text:"",color:""};switch(e){case this.STATUS_ENABLE:t.text="Enable",t.color="green";break;case this.STATUS_DISABLE:t.text="Disable",t.color="red"}return t}});return t}),define("collections/department",["basecollection","models/department"],function(e,t){var n=e.extend({url:"v1/departments",model:t});return n}),define("models/office",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/offices",cacheName:"companyoffice",STATUS_ENABLE:1,STATUS_DISABLE:3,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:"Enable",color:"green"},{code:this.STATUS_DISABLE,text:"Disable",color:"red"}]},getStatus:function(e){e=parseInt(e);var t={code:e,text:"",color:""};switch(e){case this.STATUS_ENABLE:t.text="Enable",t.color="green";break;case this.STATUS_DISABLE:t.text="Disable",t.color="red"}return t}});return t}),define("collections/office",["basecollection","models/office"],function(e,t){var n=e.extend({url:"v1/offices",model:t});return n}),define("models/worktrackingrange",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/worktrackingranges",cacheName:"worktrackingrange",STATUS_ENABLE:1,STATUS_DISABLE:3,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:"Enable",color:"green"},{code:this.STATUS_DISABLE,text:"Disable",color:"red"}]},getStatus:function(e){e=parseInt(e);var t={code:e,text:"",color:""};switch(e){case this.STATUS_ENABLE:t.text="Enable",t.color="green";break;case this.STATUS_DISABLE:t.text="Disable",t.color="red"}return t}});return t}),define("collections/worktrackingrange",["basecollection","models/worktrackingrange"],function(e,t){var n=e.extend({url:"v1/worktrackingranges",model:t});return n}),define("language/group",["baselanguage"],function(e){var t={vn:{heading:"Nhóm nhân viên",sidebar_heading:"Bộ lọc nhóm",code:"Mã",insert_button:"Tạo nhóm nhân viên",name:"Tên",color:"Màu",description:"Mô tả",count_user:"Số lượng nhân viên",sync_list:"ĐỒNG BỘ NHÂN VIÊN",date_created:"Ngày tạo",creator:"Người tạo",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",group_info_title:"Thông tin nhóm nhân viên",group_info_content:"Nhập tên và mô tả cho nhóm nhân viên",groupdetail_info_title:"Chi tiết nhóm nhân viên",groupdetail_info_content:"Tạo các điều kiện để filter nhân viên",success_add:"Thêm mới thành công!",success_update:"Cập nhật thành công!",success_delete:"Xóa thành công!",success_sync:"Đồng bộ thành công danh sách thành viên!",error_sync:"Đồng bộ danh sách thất bại. Vui lòng thử lại!",error_add:"Đã xảy ra lỗi. Vui lòng thử lại!",error_update:"Đã xảy ra lỗi. Vui lòng thử lại!",error_delete:"Đã xảy ra lỗi. Vui lòng thử lại!",error_name_required:"Vui lòng nhập tên!",error_code_exists:"Mã đã tồn tại!",error_code_invalid:"Mã không được có khoảng trắng và ký tự đặc biệt!",error_not_permission:"Bạn không có quyền!",error_not_found:"Không có nhóm nào!",required:"Bắt buộc",enabled:"Cho phép",disabled:"Vô hiệu hóa",delete:"Xóa",delete_link:"Xóa nhóm này",add:"Thêm mới",update:"Cập nhật",STATUS_ENABLE:"Enable",STATUS_DISABLED:"Disabled",zerodata_text:"Chưa có nhóm nào.",zerodata_subtext:"Tạo nhóm nhân viên đầu tiên bằng cách nhấn nút bên dưới."},en:{heading:"Nhóm nhân viên",sidebar_heading:"Bộ lọc nhóm",code:"Mã",insert_button:"Tạo nhóm nhân viên",name:"Tên",color:"Màu",description:"Mô tả",count_user:"Số lượng nhân viên",sync_list:"ĐỒNG BỘ NHÂN VIÊN",date_created:"Ngày tạo",creator:"Người tạo",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",group_info_title:"Thông tin nhóm nhân viên",group_info_content:"Nhập tên và mô tả cho nhóm nhân viên",groupdetail_info_title:"Chi tiết nhóm nhân viên",groupdetail_info_content:"Tạo các điều kiện để filter nhân viên",success_add:"Thêm mới thành công!",success_update:"Cập nhật thành công!",success_delete:"Xóa thành công!",success_sync:"Đồng bộ thành công danh sách thành viên!",error_sync:"Đồng bộ danh sách thất bại. Vui lòng thử lại!",error_add:"Đã xảy ra lỗi. Vui lòng thử lại!",error_update:"Đã xảy ra lỗi. Vui lòng thử lại!",error_delete:"Đã xảy ra lỗi. Vui lòng thử lại!",error_name_required:"Vui lòng nhập tên!",error_code_exists:"Mã đã tồn tại!",error_code_invalid:"Mã không được có khoảng trắng và ký tự đặc biệt!",error_not_permission:"Bạn không có quyền!",error_not_found:"Không có nhóm nào!",required:"Bắt buộc",enabled:"Cho phép",disabled:"Vô hiệu hóa",delete:"Xóa",delete_link:"Xóa nhóm này",add:"Thêm mới",update:"Cập nhật",STATUS_ENABLE:"Enable",STATUS_DISABLED:"Disabled",zerodata_text:"Chưa có nhóm nào.",zerodata_subtext:"Tạo nhóm nhân viên đầu tiên bằng cách nhấn nút bên dưới."}};return new e({lang:t})}),define("models/group",["basemodel","role","pref","language/group"],function(e,t,n,a){var i=e.extend({urlRoot:"v1/groups",cacheName:"group",STATUS_ENABLE:1,STATUS_DISABLED:3,syncMember:function(e){var t={company_id:n.get("cid"),creator_id:n.get("uid"),id:e.id};$.ajax({url:this.urlRoot+"/sync",type:"PUT",dataType:"json",data:t,success:e.success,error:e.error,complete:e.complete})},getStatusList:function(){return[{code:this.STATUS_ENABLE,text:a.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:a.t("STATUS_DISABLED"),color:"grey"}]},getStatus:function(e){e=parseInt(e);var t={code:e,text:"",color:""};switch(e){case this.STATUS_ENABLE:t.text=a.t("STATUS_ENABLE"),t.color="green";break;case this.STATUS_DISABLE:t.text=a.t("STATUS_DISABLED"),t.color="grey"}return t}});return i}),define("collections/group",["basecollection","models/group"],function(e,t){var n=e.extend({url:"v1/groups",model:t});return n}),define("language/company",["baselanguage"],function(e){var t={vn:{listing_heading:"Chọn công ty để tiếp tục",tab_info:"Thông tin chung",tab_cashflow:"Sổ quỹ",tab_order:"Đơn hàng",setting_custom_text_status_order:"Đổi tên trạng thái đơn hàng",setting_custom_text_attribute_product:"Đổi tên thuộc tính sản phẩm",default:"Mặc định",custom:"Tùy chỉnh",tab_inventory:"Tồn kho",tab_pos:"Point of Sale",tab_integration:"Tích hợp CMS",tab_role:"Quyền truy cập",add_role:"Thêm nhóm quyền",delete_role:"Xóa nhóm quyền này",order_vat:"Các mức thuế VAT(%)",order_vat_enable:"Sử dụng thuế VAT",reset_datecreated_on_complete:"Cập nhật ngày tạo là ngày hoàn thành đơn",setting_email:"Cấu hình gửi mail",setting_sms:"Cấu hình gửi sms",crm_email_enable:"Bật/tắt cấu hình",crm_sms_enable:"Bật/tắt cấu hình",fromname:"Tên",fromemail:"Email",type:"Loại",type_note:"",account:"Account",account_note:"API Key (in Amazon Ses) or Username (in SMTP)",password:"Password",password_note:"API Secret (in Amazon Ses) or Password (in SMTP)",smtphost:"SMTP Host",smtpport:"SMTP Port",smtpssl:"SMTP SSL",smtpssl_note:'Use or not use SSL in smtp. allows "1" or "0"',smtp:"SMTP",amazonses:"Amazon Ses",test_connect:"Kiểm tra kết nối",test_connect_success:"Kết nối thành công",test_connect_fail:"Kết nối thất bại",smtpssl_host_ex:"Cấu hình SMTP Host",smtpssl_host_ex_note:"Port cho một số dịch vụ email thông dụng",close:"Đóng",register:"Đăng ký",sms_provider:"Nhà cung cấp",esms:"ESMSVN",vht:"VHT",vietguys:"VietGuys",sms_send_type:"Cách gửi",brand_name:"Brand name",sms_account_note:"API Key or Username",sms_password_note:"API Secret or Password",api_key:"Api Key",api_secrect:"Api Secrect",error_edit_smssetting:"Cấu hình sms thất bại. Vui lòng thử lại!",IS_TRIAL:"Dùng thử",IS_NOT_TRIAL:"--",trial_readonly_heading:"Bạn đang sử dụng gói dùng thử",trial_readonly_summary:"Nếu muốn đăng ký dùng chính thức hoặc thay đổi gói dịch vụ, hãy liên hệ với bộ phận bán hàng của chúng tôi để được tư vấn và cập nhật.",trial_heading:"Chọn gói dịch vụ",trial_summary:"Các gói dịch vụ (có thu phí) sẽ có thời gian dùng thử là 14 ngày, và có hiệu lực ngay sau khi bạn nhấn nút Đăng ký.",free:"Miễn phí",less_10_employee:"Dưới 10 nhân viên",project_manager:"Quản lý dự án",employee_manager:"Quản lý nhân sự",document_manager:"Quản lý tài liệu",product_manager:"Quản lý hàng hóa",crm_manager:"Quản lý khách hàng (CRM)",cashflow_manager:"Quản lý sổ quỹ",connect_website:"Tích hợp website",mail_local:"Hộp thư nội bộ",saler:"Bán hàng",company:"Công ty",startup:"Startup",contact_now:"Xem báo giá tại trang chủ",no_limit_employee:"Không giới hạn nhân viên",function_startup:"Các tính năng gói Startup",function_company:"Các tính năng gói Công ty",checkin_online:"Chấm công online",chat_local:"Chat nội bộ",hrmleave_manager:"Quản lý nghỉ phép",current:"Hiện tại",view_help:"Xem mô tả",sync_success:"Đã đồng bộ thành công",sync_error:"Một số dòng xảy ra lỗi. Vui lòng thử lại!",update_package_success:"Cập nhật gói dịch vụ thành công. Đăng nhập lại để tiếp tục. Đang thoát khỏi hệ thống...",error_from_name_required:"Tên là bắt buộc",error_from_email_required:"Email là bắt buộc",error_account_required:"Account là bắt buộc",error_type_required:"Loại là bắt buộc",error_type_invalid:"Loại không hợp lệ",error_smtphost_required:"Smtp host là bắt buộc",error_smtpport_required:"Smtp port là bắt buộc",yes:"Có",no:"Không",show:"Hiện",hide:"Ẩn",day:"Ngày",monthly:"hàng tháng",custom_info:"Thông tin về tùy chỉnh",order:"Đơn hàng",order_info:"Thông tin đơn hàng",ordering:"Đặt hàng",ordering_info:"Cài đặt liên quan đến đặt hàng",
cashflow:"Quản lý sổ quỹ",cashflow_info:"Cấu hình liên quan đến tính năng sổ quỹ",menu_product:"Menu Sản phẩm",menu_product_info:"Cài đặt liên quan đến hiển thị danh sách sản phẩm",general_information:"Thông tin chung",general_information_info:"Cài đặt liên quan đến màn hình POS",order_information:"Thông tin đơn hàng",order_information_info:"Cài đặt liên quan đến đơn hàng từ POS",customer_information:"Thông tin khách hàng",customer_information_info:"Cài đặt liên quan đến khách hàng từ POS",cashflow_information:"Thông tin Phiếu thu",cashflow_information_info:"Cài đặt liên quan đến tạo phiếu thu tự động từ POS",cashflow_expense_information:"Thông tin Phiếu chi",cashflow_expense_information_info:"Cài đặt liên quan đến tạo phiếu chi tự động từ POS",promotion_information:"Thông tin Khuyến mãi",promotion_information_info:"Cài đặt liên quan đến khuyến mãi từ POS",print_order:"In Hóa đơn",print_order_info:"Cài đặt liên quan đến máy in receipt",integrated_haravan:"Tích hợp Haravan, Shopify",integrated_haravan_info:"Các thông tin cấu hình để tích hợp với cửa hàng của bạn trên website Haravan",app:"App",app_info:"Quyền của app",sale:"Sale",sale_info:"Quyền của Sale",erp:"Erp",erp_info:"Quyền của Erp",view_permission:"Xem quyền",view_permission_info:"Xem quyền của một nhân viên cụ thể",productreceipt_cost:"Phương pháp tính giá vốn",cost:"Giá vốn",cost_info:"Cài đặt liên quan đến giá vốn sản phẩm",cost_standard:"Giá vốn cố định theo sản phẩm",cost_average:"Bình quân",cost_fifo:"Nhập trước xuất trước",confirm_change_costing_method_text:"Tôi đã đọc và hiểu khái niệm này",error_comfirm_costing_method:"Bạn chưa check vào ô xác nhận",enable_costing_method:"Bật tắt phương pháp tính giá vốn",costting_empty:"'-Chọn phương pháp--",back:"Quay lại",choose:"Chọn",choose_warehouse:"Chọn Kho",choose_all:"Chọn tất cả",unchoose_all:"Bỏ chọn tất cả",choose_store:"Chọn cửa hàng",choose_office:"Chọn văn phòng làm việc",update_success:"Cập nhật thành công!",update_fail:"Đã xảy ra lỗi. Vui lòng thử lại!",error_subject_id_invalid:"Tính năng không hợp lệ. Vui lòng làm mới lại trang",error_list_ids_required:"Bạn cần chọn ít nhất một ô để giới hạn truy cập.",error_warehouse_id_list_invalid:"Danh sách kho không hợp lệ. Vui lòng làm mới lại trang",error_list_ids_store_required:"Bạn cần chọn ít nhất một cửa hàng để giới hạn truy cập.",error_list_ids_office_required:"Bạn cần chọn ít nhất một văn phòng để giới hạn truy cập.",error_list_ids_warehouse_required:"Bạn cần chọn ít nhất một kho để giới hạn truy cập.",error_name_required:"Vui lòng nhập tên",error_email_required:"Bạn chưa nhập email",error_email_invalid:"Email không hợp lệ!",error_password_required:"Bạn chưa nhập mật khẩu!",error_password_invalid:"Mật khẩu phải có ít nhất 7 ký tự!",error_password2_invalid:"Xác nhận mật khẩu không đúng!",error_fullname_required:"Bạn chưa nhập họ và tên!",error_full_name_required:"Bạn chưa nhập họ và tên!",error_company_name_required:"Bạn chưa nhập tên công ty",error_phone_required:"Bạn chưa nhập số điện thoại liên hệ!",error_phone_invalid:"Số điện thoại hợp lệ!",error_account_exists:"Tài khoản đã tồn tại. Bạn phải nhập đúng mật khẩu để tạo công ty mới!",delate_user_role:"Xóa bỏ giới hạn cho phân quyền",delate_user_role_warehouse_note:"Sau khi xóa bỏ giới hạn thì thành viên này có thể truy cập tất cả các kho dựa theo tính năng này.",delate_user_role_store_note:"Sau khi xóa bỏ giới hạn thì thành viên này có thể truy cập tất cả các cửa hàng dựa theo tính năng này.",delate_user_role_office_note:"Sau khi xóa bỏ giới hạn thì thành viên này có thể truy cập tất cả các văn phòng dựa theo tính năng này.",feature:"Tính năng",root_admin:"Root Admin",currency_number_format:"Định dạng hiển thị số tiền",currency_number_format_info:"Định dạng cho số tiền sẽ hiển thị.",currency_prefix:"Đơn vị tiền tố",currency_suffix:"Đơn vị hậu tố",currency_prefix_info:"Tiền tố: Trước chữ số",currency_suffix_info:"Hậu tố: Sau chữ số",default_weight_perunit:"KL mặc định mỗi SP",default_weight_perunit_note:"gram",input_name_employe:"Nhập tên nhân viên",view:"Xem",clear:"Xóa form",limit:"Giới hạn",all:"Tất cả",object_type_store:"Cửa hàng",object_type_office:"Văn phòng làm việc",object_type_warehouse:"Kho",object_type_product_category:"Danh mục sản phẩm",heading:"Cài đặt",name:"Tên",assign_user:"Gán nhân viên",display_bonus_summary:"Hiện tiền thưởng cho nhân viên",bonus_month_day_start:"Ngày bắt đầu tính thưởng",default_order_status:"Trạng thái mặc định",default_order_status_note:"Trong Admin",default_order_max_eta:"Thời gian xử lý tối đa / ĐH",default_order_max_eta_note:"Ngày",tag_default:"Tag mặc định",display_product:"Hiển thị hình sản phẩm",display_price:"Hiển thị giá",display_category:"Hiển thị danh mục",display_vat:"Hiện ô nhập Thuế VAT",product_perpage:"Số sản phẩm hiển thị /trang",product_search_only:"Chỉ hiện bằng tìm kiếm (?)",show_barcode:"Hiển thị barcode khi thêm SP(?)",select_warehouse:"Cho chọn kho xuất",show_table_index:"Cho chọn Số thứ tự",require_table_index_or_node:"Bắt buộc có STT",login_logo:"Icon trang đăng nhập",icon_login_restaurant:"Nhà hàng (Restaurant)",icon_login_store:"Cửa hàng (Store)",enable_reprint:"Cho phép in lại bill",unique_origin_id:"ID từ Nguồn khác không trùng (?)",check_inventory:"Kiểm tồn kho khi thêm SP",clear_before_add:"Phải clear trước khi tạo mới",select_status:"Cho chọn trạng thái từ POS",status_default:"Trạng thái mặc định từ POS",customer_type:"Gán nhóm mặc định cho KH",customer_status:"Gán trạng thái mặc định cho KH",customer_origin:"Gán nguồn mặc định cho KH",enable_pos_auto_cashflow:"Tạo phiếu thu tự động",cashflow_type:"Gán vào Danh mục phiếu thu",cashflow_account_id:"Tài khoản tiền mặt",cashflow_account_id_bank:"Tài khoản ATM / Online banking",pos_cashflow_account_id_gift_card:"Tài khoản Voucher / Giftcard",pos_cashflow_account_id_customer_point:"Tài khoản Điểm tích lũy",pos_cashflow_account_id_credit:"Tài khoản Debit / Credit card",pos_cashflow_account_id_cod:"Tài khoản COD",cashflow_expense_type:"Gán vào Danh mục phiếu chi",cashflow_expense_account_id:"Tài khoản tiền mặt",cashflow_expense_account_id_bank:"Tài khoản ATM / Online banking",pos_cashflow_expense_account_id_gift_card:"Tài khoản Voucher / Giftcard",pos_cashflow_expense_account_id_customer_point:"Tài khoản Điểm tích lũy",pos_cashflow_expense_account_id_credit:"Tài khoản Debit / Credit card",pos_cashflow_expense_account_id_cod:"Tài khoản COD",manual_promotion:"Cấm nhập KM bằng tay",receipt_template:"Mẫu Receipt để in",receipt_template_defalut:"Dùng template mặc định",receipt_template_view:"Xem trước",receipt_template_note:"Ghi chú một số code tự động thay thế giá trị khi in, tương ứng với từng đơn hàng..",receipt_template_note_order_invoice:"Invoice ID (Mã đơn hàng)",receipt_template_note_order_status:"Trạng thái đơn hàng",receipt_template_note_order_service_no:"Số thứ tự phục vụ",receipt_template_note_order_date:"Thời gian tạo đơn hàng (Ngày, giờ)",receipt_template_note_location:"Tên cửa hàng tạo đơn hàng",receipt_template_note_location_phone:"Số  điện thoại cửa hàng tạo đơn hàng",receipt_template_note_location_address:"Địa chỉ của cửa hàng",receipt_template_note_customer:"Họ Tên khách hàng",receipt_template_note_customer_name:"Họ Tên khách hàng",receipt_template_note_customer_fullname:"Họ Tên khách hàng",receipt_template_note_customer_code:"Mã khách hàng",receipt_template_note_customer_address:"Địa chỉ của khách hàng",receipt_template_note_customer_region:"Tỉnh / Thành phố của địa chỉ khách hàng",receipt_template_note_customer_sub_region:"Quận / Huyện của địa chỉ khách hàng",receipt_template_note_customer_sub_sub_region:"Phường / Xã của địa chỉ khách hàng",receipt_template_note_customer_email:"Email của khách hàng",receipt_template_note_customer_phone:"Số điện thoại của khách hàng",receipt_template_note_customer_gender:"Giới tính của khách hàng",receipt_template_note_employee:"Họ Tên nhân viên bán hàng",receipt_template_note_employee_id:"Mã nhân viên bán hàng",receipt_template_note_origin:"Nguồn đơn hàng",receipt_template_note_origin_id:"ID từ nguồn đơn hàng",receipt_template_note_order_item_row:"Thông tin các sản phẩm trong đơn hàng",receipt_template_note_order_item_row_with_barcode:"Thông tin các sản phẩm trong đơn hàng (có hiển thị hình mã vạch sản phẩm)",receipt_template_note_order_item_row_2_column:"Thông tin các sản phẩm trong đơn hàng dùng cho khổ giấy nhỏ (chỉ hiển thị 2 cột)",receipt_template_note_order_sub_total:"Thành tiền",receipt_template_note_order_note:"Ghi chú của đơn hàng",receipt_template_note_order_payment:"Phương thức thanh toán",receipt_template_note_order_shipping:"Phí giao hàng",receipt_template_note_order_total_amount:"Tổng khách hàng phải trả",receipt_template_note_order_cutomer_paid:"Tiền khách đưa",receipt_template_note_order_customer_return:"Tiền thối",receipt_template_note_order_tax_percent:"thuế",receipt_template_note_order_tax:"Tiền thuế",receipt_template_note_order_discount_percent:"khuyến mãi",receipt_template_note_order_discount:"Tiền khuyến mãi",receipt_template_note_shipping_method:"Phương thức giao hàng",receipt_template_tag:"Gắn thẻ",disable_print_after_checkout:"Không in đơn hàng sau khi tạo",order_template:"Mẫu đơn hàng để in",order_template_note:"Ghi chú một số code tự động thay thế giá trị khi in, tương ứng với từng đơn hàng:",cashflow_template_note:"Ghi chú một số code tự động thay thế giá trị khi in, tương ứng với từng phiếu:",order_template_note_order_time:"Thời gian tạo đơn hàng (Ngày, giờ)",order_template_note_shipping_trackingcode:"Mã vận đơn (lấy từ dịch vụ giao hàng)",order_template_note_total_quantity:"Tổng số lượng",order_template_note_tag:"Gắn thẻ cho đơn hàng",receipt_template_note_employee_sale:"Nhân viên bán hàng",receipt_template_note_shipping_address:"Địa chỉ giao hàng",receipt_template_note_shipping_region:"Tỉnh / Thành phố của địa chỉ giao hàng",receipt_template_note_shipping_region_sub:"Quận / Huyện của địa chỉ giao hàng",order_template_note_order_cod_amount:"Tiền thu khi giao hàng",order_template_note_order_deposit:"Tổng khách hàng trả trước",order_template_note_order_debbt:"Tổng khách hàng đang nợ",order_template_note_order_invoice_url:"Đường dẫn (URL) đến hình barcode của Invoice ID. Có dạng: http://...",order_template_note_order_shipping_tracking_url:"Đường dẫn (URL) đến hình barcode của Mã vận đơn. Có dạng: http://...",receipt_template_order_deposit:"Tiền đặt cọc",receipt_template_payment_watermark:"Hình dẫn đến 1 trong 3 hình tương ứng với 3 trạng thái: đặt cọc, trả công nợ và thanh toán hết. Tùy theo ngữ cảnh lúc tạo đơn hàng trong pos, hoàn tất cọc mà biến này sẽ có giá trị là đường dẫnhình của 1 trong 3 hình",print_cashflow_type:"Danh mục phiếu",print_cashflow_creator:"Nhân viên tạo phiếu",print_cashflow_out:"Mẫu PHIẾU CHI để in",print_cashflow_in:"Mẫu PHIẾU THU để in",print_cashflow_company_name:"Tên công ty",print_cashflow_company_address:"Địa chỉ công ty",print_cashflow_company_phone:"Điện thoại công ty",print_cashflow_code:"Mã phiếu",print_cashflow_location:"Cửa hàng",print_cashflow_partner_type:"Đối tượng tạo phiếu",print_cashflow_partner:"Người nộp (nhận) tiền",print_cashflow_title:"Tiêu đề phiếu (lý do)",print_cashflow_value:"Số tiền",print_cashflow_note:"Ghi chú",print_cashflow_date_created:"Ngày tạo phiếu",print_cashflow_payment_type:"Phương thức thanh toán",print_cashflow_account_type:"Loại tài khoản",print_cashflow_session:"Kỳ thanh toán",print_cashflow_account_number:"Số tài khoản (thanh toán qua ngân hàng)",print_cashflow_bankname:"Tên ngân hàng (thanh toán qua ngân hàng)",haravan_domain:"Đường dẫn MyHaravan (?)",enable_haravan:"Trạng thái",haravan_api_key:"API Key",haravan_shared_secret:"Shared Secret",haravan_password:"Password",haravan_slid:"Đơn hàng sẽ được lưu vào cửa hàng",haravan_output_type:"Lấy giá từ hình thức xuất",haravan_origin:"Đơn hàng sẽ được lưu vào nguồn",teamcrop_webhook_url:"Webhook URL",search_product_online:"Tìm kiếm sản phẩm từ server(Online)",search_product_online_note:"Dùng cho POS, tạo phiếu",haravan_webhook_secret:"Webhook Verify Code (?)",add_new_haravan:"'+] Thêm một cài đặt web Haravan",cashflow_default_income_cat:"Danh mục mặc định khi tạo PHIẾU THU tự động từ đơn hàng",cashflow_default_expense_cat:"Danh mục mặc định khi tạo PHIẾU CHI tự động từ đơn hàng trả",cashflow_default_income_tit:"Tiêu đề mặc định khi tạo PHIẾU THU tự động từ đơn hàng",cashflow_default_expense_tit:"Tiêu đề mặc định khi tạo PHIẾU CHI tự động từ đơn hàng trả",cashflow_not_allowed_cancel_after_completed:"Cấm hủy PHIẾU đã hoàn thành",enable_auto_product_receipt:"Tự động tạo hóa đơn XUẤT sản phẩm",productreceipt_not_allowed_cancel_after_completed:"Cấm hủy PHIẾU đã hoàn thành",error_cashflow_default_income_cat_required:"Vui lòng chọn danh mục mặc định",error_cashflow_default_income_cat_invalid:"Danh mục không hợp lệ",error_cashflow_default_expense_cat_required:"Vui lòng chọn danh mục mặc định",error_cashflow_default_expense_cat_invalid:"Danh mục không hợp lệ",error_pos_login_logo_invalid:"Icon trang đăng nhập không hợp lệ",error_pos_login_logo_required:"Vui lòng chọn icon trang đăng nhập",error_pos_status_default_required:"Vui lòng chọn trạng thái mặc định từ POS",error_pos_status_default_invalid:"Trạng thái mặc định từ POS không hợp lệ",error_pos_customer_type_invalid:"Nhóm mặc định cho KH không hợp lệ",pos_customer_status_invalid:"Trạng thái mặc định cho KH không hợp lệ",error_pos_customer_origin_invalid:"Nguồn mặc định cho KH hợp lệ",error_pos_cashflow_type_invalid:"Danh mục phiếu thu hợp lệ",error_pos_cashflow_account_id_invalid:"Gán vào tài khoản hợp lệ",weighted_barcode_product:"Thông tin Sản phẩm cân ký",weighted_barcode_product_note:"Cài đặt dành cho nhận dạng barcode sản phẩm cân ký",enable_weighted_barcode_item:"Cho phép sử dụng barcode cho sản phẩm cân ký",weighted_barcode_format:"Định dạng barcode",weighted_barcode_format_prefix:"Tiền tố",weighted_barcode_format_prefix_note:"1 hoặc 2 chữ số đầu tiên để phân biệt barcode dạng cân ký với các barcode khác trong hệ thống. (VD: 20, 2..)",weighted_barcode_format_s:"Các ký tự biểu thị SKU của sản phẩm",weighted_barcode_format_g:"Các ký tự biểu thị Khối lượng của sản phẩm, đơn vị gram (Weight)",weighted_barcode_format_c:"1 ký tự kiểm tra toàn vẹn dữ liệu (Check digit)",error_weighted_barcode_format_characters_started_invalid:"Tiền tố định dạng barcode phải là số nguyên dương lớn hơn 0",error_weighted_barcode_format_sgc_invalid:'Định dạng barcode phải là số và các ký tự "S", "G", "C"',error_weighted_barcode_format_c_invalid:'Định dạng barcode chỉ chứa duy nhất 1 ký tự "C"',error_weighted_barcode_format_c_ended_invalid:'Ký tự cuối của định dạng barcode phải là ký tự "C"',error_assign_user_required:"Vui lòng nhập tên",error_warehouse_invalid:"Tất cả các kho phải được gán vào cửa hàng mới có thể tạo phiếu xuất tự động",error_warehouse_store_invalid:"Tất cả các kho phải được gán vào cửa hàng mới có thể tạo phiếu xuất tự động",error_trial_existed:"Bạn không thể thay đổi gói dùng thử",error_email_require:"Bạn chưa nhập địa chỉ email.",error_password_require:"Bạn chưa nhập mật khẩu.",error_password_notmatch:"Mật khẩu nhập không giống nhau.",error_fullname_require:"Bạn chưa nhập tên của mình.",error_phone_require:"Bạn chưa nhập số điện thoại.",error_companyname_require:"Bạn chưa nhập tên công ty.",success_create:"Công ty đã được tạo thành công!",create_company_heading:"Tạo công ty",company_password:"Mật khẩu",company_password_confirm:"Xác nhận mật khẩu",company_fullname:"Họ tên",company_phone:"Điện thoại liên hệ",company_name:"Tên công ty",full_name:"Họ và tên",email:"Email",phone:"Số điện thoại",company_create_submit:"Hoàn tất",company_login:"Đăng nhập",cache_manager:"Quản lý Cache",cache_manager_text:"Xem thông tin",email_setting:"Cài đặt Email",which_status_send_email:"Bạn muốn email cho khách hàng khi đơn hàng chuyển sang trạng thái nào?",crm_email_setting:"Cấu hình gửi email",crm_email_on:"Công ty bạn đang được cấu hình gửi Email bằng",crm_email_off:"Công ty bạn chưa được cấu hình gửi Email",crm_sms_setting:"Cấu hình gửi SMS",sms_setting:"Cài đặt SMS",which_status_send_sms:"Bạn muốn nhắn tin cho khách hàng khi đơn hàng chuyển sang trạng thái nào?",crm_sms_on:"Công ty bạn đang được cấu hình gửi SMS bằng brandname",crm_sms_off:"Công ty bạn chưa được cấu hình gửi SMS. Vui lòng liên hệ với chúng tôi để biết thêm chi tiết",point:"Quy đổi điểm tích lũy",point_info:"Cài đặt liên quan đến quy đổi điểm tích lũy",point_convert:"Quy đổi 1 điểm tích lũy của khách hàng",receipt_information:"Thông tin phiếu nhập/xuất kho",receipt_information_info:"Cài đặt thông tin phiếu nhập/xuất kho",pos_allow_created_receipt_output:"Cho phép tạo phiếu xuất",error_quantity_decimal_between_0_and_4_only:"Số chữ số thập phân phải từ 0 đến 4.",inventory_method:"Phương pháp tồn kho",inventory_method_info:"Cài đặt liên quan đến phương pháp tồn kho",enable_inventory_by_serial_number:"Cho phép tồn kho theo Serial Number / IMEI",error_inventory_by_serial_not_available:"Công ty bạn chưa bật module quản lý tồn kho theo Serial Number/Imei nên không thể kích hoạt.",logaudit:"Xem Log toàn bộ hoạt động",only_pos:"Chỉ áp dụng tại POS",using_ssl:"Sử dụng SSL",using_ssl_yes:"Có",currency_number_format_des:"%number% chữ số thập phân",currency_number_format_none:"Không định dạng",inventory_quantity_decimal:"Số chữ số thập phân cho SL sản phẩm",inventory_quantity_decimal_description:"Mặc đình là 0",productreceipt_costing_method_empty_text:"--Chọn phương pháp--",filter_keyword:"Từ khóa"},en:{listing_heading:"Chọn công ty để tiếp tục",tab_info:"Thông tin chung",tab_cashflow:"Sổ quỹ",tab_order:"Đơn hàng",setting_custom_text_status_order:"Đổi tên trạng thái đơn hàng",setting_custom_text_attribute_product:"Đổi tên thuộc tính sản phẩm",default:"Mặc định",custom:"Tùy chỉnh",tab_inventory:"Tồn kho",tab_pos:"Point of Sale",tab_integration:"Tích hợp CMS",tab_role:"Quyền truy cập",add_role:"Thêm nhóm quyền",delete_role:"Xóa nhóm quyền này",order_vat:"Các mức thuế VAT(%)",order_vat_enable:"Sử dụng thuế VAT",reset_datecreated_on_complete:"Cập nhật ngày tạo là ngày hoàn thành đơn",setting_email:"Cấu hình gửi mail",setting_sms:"Cấu hình gửi sms",crm_email_enable:"Bật/tắt cấu hình",crm_sms_enable:"Bật/tắt cấu hình",fromname:"Tên",fromemail:"Email",type:"Loại",type_note:"",account:"Account",account_note:"API Key (in Amazon Ses) or Username (in SMTP)",password:"Password",password_note:"API Secret (in Amazon Ses) or Password (in SMTP)",smtphost:"SMTP Host",smtpport:"SMTP Port",smtpssl:"SMTP SSL",smtpssl_note:'Use or not use SSL in smtp. allows "1" or "0"',smtp:"SMTP",amazonses:"Amazon Ses",test_connect:"Kiểm tra kết nối",test_connect_success:"Kết nối thành công",test_connect_fail:"Kết nối thất bại",smtpssl_host_ex:"Cấu hình SMTP Host",smtpssl_host_ex_note:"Port cho một số dịch vụ email thông dụng",close:"Đóng",register:"Đăng ký",sms_provider:"Nhà cung cấp",esms:"ESMSVN",vht:"VHT",vietguys:"VietGuys",sms_send_type:"Cách gửi",brand_name:"Brand name",sms_account_note:"API Key or Username",sms_password_note:"API Secret or Password",api_key:"Api Key",api_secrect:"Api Secrect",error_edit_smssetting:"Cấu hình sms thất bại. Vui lòng thử lại!",IS_TRIAL:"Dùng thử",IS_NOT_TRIAL:"--",trial_readonly_heading:"Bạn đang sử dụng gói dùng thử",trial_readonly_summary:"Nếu muốn đăng ký dùng chính thức hoặc thay đổi gói dịch vụ, hãy liên hệ với bộ phận bán hàng của chúng tôi để được tư vấn và cập nhật.",trial_heading:"Chọn gói dịch vụ",trial_summary:"Các gói dịch vụ (có thu phí) sẽ có thời gian dùng thử là 14 ngày, và có hiệu lực ngay sau khi bạn nhấn nút Đăng ký.",free:"Miễn phí",less_10_employee:"Dưới 10 nhân viên",project_manager:"Quản lý dự án",employee_manager:"Quản lý nhân sự",document_manager:"Quản lý tài liệu",product_manager:"Quản lý hàng hóa",crm_manager:"Quản lý khách hàng (CRM)",cashflow_manager:"Quản lý sổ quỹ",connect_website:"Tích hợp website",mail_local:"Hộp thư nội bộ",saler:"Bán hàng",company:"Công ty",startup:"Startup",contact_now:"Xem báo giá tại trang chủ",no_limit_employee:"Không giới hạn nhân viên",function_startup:"Các tính năng gói Startup",function_company:"Các tính năng gói Công ty",checkin_online:"Chấm công online",chat_local:"Chat nội bộ",hrmleave_manager:"Quản lý nghỉ phép",current:"Hiện tại",view_help:"Xem mô tả",sync_success:"Đã đồng bộ thành công",sync_error:"Một số dòng xảy ra lỗi. Vui lòng thử lại!",update_package_success:"Cập nhật gói dịch vụ thành công. Đăng nhập lại để tiếp tục. Đang thoát khỏi hệ thống...",error_from_name_required:"Tên là bắt buộc",error_from_email_required:"Email là bắt buộc",error_account_required:"Account là bắt buộc",error_type_required:"Loại là bắt buộc",error_type_invalid:"Loại không hợp lệ",error_smtphost_required:"Smtp host là bắt buộc",error_smtpport_required:"Smtp port là bắt buộc",yes:"Có",no:"Không",show:"Hiện",hide:"Ẩn",day:"Ngày",monthly:"hàng tháng",custom_info:"Thông tin về tùy chỉnh",order:"Đơn hàng",order_info:"Thông tin đơn hàng",ordering:"Đặt hàng",ordering_info:"Cài đặt liên quan đến đặt hàng",cashflow:"Quản lý sổ quỹ",cashflow_info:"Cấu hình liên quan đến tính năng sổ quỹ",menu_product:"Menu Sản phẩm",menu_product_info:"Cài đặt liên quan đến hiển thị danh sách sản phẩm",general_information:"Thông tin chung",general_information_info:"Cài đặt liên quan đến màn hình POS",order_information:"Thông tin đơn hàng",order_information_info:"Cài đặt liên quan đến đơn hàng từ POS",customer_information:"Thông tin khách hàng",customer_information_info:"Cài đặt liên quan đến khách hàng từ POS",cashflow_information:"Thông tin Phiếu thu",cashflow_information_info:"Cài đặt liên quan đến tạo phiếu thu tự động từ POS",cashflow_expense_information:"Thông tin Phiếu chi",cashflow_expense_information_info:"Cài đặt liên quan đến tạo phiếu chi tự động từ POS",promotion_information:"Thông tin Khuyến mãi",promotion_information_info:"Cài đặt liên quan đến khuyến mãi từ POS",print_order:"In Hóa đơn",print_order_info:"Cài đặt liên quan đến máy in receipt",integrated_haravan:"Tích hợp Haravan, Shopify",integrated_haravan_info:"Các thông tin cấu hình để tích hợp với cửa hàng của bạn trên website Haravan",app:"App",app_info:"Quyền của app",sale:"Sale",sale_info:"Quyền của Sale",erp:"Erp",erp_info:"Quyền của Erp",view_permission:"Xem quyền",view_permission_info:"Xem quyền của một nhân viên cụ thể",productreceipt_cost:"Phương pháp tính giá vốn",cost:"Giá vốn",cost_info:"Cài đặt liên quan đến giá vốn sản phẩm",cost_standard:"Giá vốn cố định theo sản phẩm",cost_average:"Bình quân",cost_fifo:"Nhập trước xuất trước",confirm_change_costing_method_text:"Tôi đã đọc và hiểu khái niệm này",error_comfirm_costing_method:"Bạn chưa check vào ô xác nhận",enable_costing_method:"Bật tắt phương pháp tính giá vốn",costting_empty:"'-Chọn phương pháp--",back:"Quay lại",choose:"Chọn",choose_warehouse:"Chọn Kho",choose_all:"Chọn tất cả",unchoose_all:"Bỏ chọn tất cả",choose_store:"Chọn cửa hàng",choose_office:"Chọn văn phòng làm việc",update_success:"Cập nhật thành công!",update_fail:"Đã xảy ra lỗi. Vui lòng thử lại!",error_subject_id_invalid:"Tính năng không hợp lệ. Vui lòng làm mới lại trang",error_list_ids_required:"Bạn cần chọn ít nhất một ô để giới hạn truy cập.",error_warehouse_id_list_invalid:"Danh sách kho không hợp lệ. Vui lòng làm mới lại trang",error_list_ids_store_required:"Bạn cần chọn ít nhất một cửa hàng để giới hạn truy cập.",error_list_ids_office_required:"Bạn cần chọn ít nhất một văn phòng để giới hạn truy cập.",error_list_ids_warehouse_required:"Bạn cần chọn ít nhất một kho để giới hạn truy cập.",error_name_required:"Vui lòng nhập tên",error_email_required:"Bạn chưa nhập email",error_email_invalid:"Email không hợp lệ!",error_password_required:"Bạn chưa nhập mật khẩu!",error_password_invalid:"Mật khẩu phải có ít nhất 7 ký tự!",error_password2_invalid:"Xác nhận mật khẩu không đúng!",error_fullname_required:"Bạn chưa nhập họ và tên!",error_full_name_required:"Bạn chưa nhập họ và tên!",error_company_name_required:"Bạn chưa nhập tên công ty",error_phone_required:"Bạn chưa nhập số điện thoại liên hệ!",error_phone_invalid:"Số điện thoại hợp lệ!",error_account_exists:"Tài khoản đã tồn tại. Bạn phải nhập đúng mật khẩu để tạo công ty mới!",delate_user_role:"Xóa bỏ giới hạn cho phân quyền",delate_user_role_warehouse_note:"Sau khi xóa bỏ giới hạn thì thành viên này có thể truy cập tất cả các kho dựa theo tính năng này.",delate_user_role_store_note:"Sau khi xóa bỏ giới hạn thì thành viên này có thể truy cập tất cả các cửa hàng dựa theo tính năng này.",delate_user_role_office_note:"Sau khi xóa bỏ giới hạn thì thành viên này có thể truy cập tất cả các văn phòng dựa theo tính năng này.",feature:"Tính năng",root_admin:"Root Admin",currency_number_format:"Định dạng hiển thị số tiền",currency_number_format_info:"Định dạng cho số tiền sẽ hiển thị.",currency_prefix:"Đơn vị tiền tố",currency_suffix:"Đơn vị hậu tố",currency_prefix_info:"Tiền tố: Trước chữ số",currency_suffix_info:"Hậu tố: Sau chữ số",default_weight_perunit:"KL mặc định mỗi SP",default_weight_perunit_note:"gram",input_name_employe:"Nhập tên nhân viên",view:"Xem",clear:"Xóa form",limit:"Giới hạn",all:"Tất cả",object_type_store:"Cửa hàng",object_type_office:"Văn phòng làm việc",object_type_warehouse:"Kho",object_type_product_category:"Danh mục sản phẩm",heading:"Cài đặt",name:"Tên",assign_user:"Gán nhân viên",display_bonus_summary:"Hiện tiền thưởng cho nhân viên",bonus_month_day_start:"Ngày bắt đầu tính thưởng",default_order_status:"Trạng thái mặc định",default_order_status_note:"Trong Admin",default_order_max_eta:"Thời gian xử lý tối đa / ĐH",default_order_max_eta_note:"Ngày",tag_default:"Tag mặc định",display_product:"Hiển thị hình sản phẩm",display_price:"Hiển thị giá",display_category:"Hiển thị danh mục",display_vat:"Hiện ô nhập Thuế VAT",product_perpage:"Số sản phẩm hiển thị /trang",product_search_only:"Chỉ hiện bằng tìm kiếm (?)",show_barcode:"Hiển thị barcode khi thêm SP(?)",select_warehouse:"Cho chọn kho xuất",show_table_index:"Cho chọn Số thứ tự",require_table_index_or_node:"Bắt buộc có STT",login_logo:"Icon trang đăng nhập",icon_login_restaurant:"Nhà hàng (Restaurant)",icon_login_store:"Cửa hàng (Store)",enable_reprint:"Cho phép in lại bill",unique_origin_id:"ID từ Nguồn khác không trùng (?)",check_inventory:"Kiểm tồn kho khi thêm SP",clear_before_add:"Phải clear trước khi tạo mới",select_status:"Cho chọn trạng thái từ POS",status_default:"Trạng thái mặc định từ POS",customer_type:"Gán nhóm mặc định cho KH",customer_status:"Gán trạng thái mặc định cho KH",customer_origin:"Gán nguồn mặc định cho KH",enable_pos_auto_cashflow:"Tạo phiếu thu tự động",cashflow_type:"Gán vào Danh mục phiếu thu",cashflow_account_id:"Tài khoản tiền mặt",cashflow_account_id_bank:"Tài khoản ATM / Online banking",pos_cashflow_account_id_gift_card:"Tài khoản Voucher / Giftcard",pos_cashflow_account_id_customer_point:"Tài khoản Điểm tích lũy",pos_cashflow_account_id_credit:"Tài khoản Debit / Credit card",pos_cashflow_account_id_cod:"Tài khoản COD",cashflow_expense_type:"Gán vào Danh mục phiếu chi",cashflow_expense_account_id:"Tài khoản tiền mặt",cashflow_expense_account_id_bank:"Tài khoản ATM / Online banking",pos_cashflow_expense_account_id_gift_card:"Tài khoản Voucher / Giftcard",pos_cashflow_expense_account_id_customer_point:"Tài khoản Điểm tích lũy",pos_cashflow_expense_account_id_credit:"Tài khoản Debit / Credit card",pos_cashflow_expense_account_id_cod:"Tài khoản COD",manual_promotion:"Cấm nhập KM bằng tay",receipt_template:"Mẫu Receipt để in",receipt_template_defalut:"Dùng template mặc định",receipt_template_view:"Xem trước",receipt_template_note:"Ghi chú một số code tự động thay thế giá trị khi in, tương ứng với từng đơn hàng..",receipt_template_note_order_invoice:"Invoice ID (Mã đơn hàng)",receipt_template_note_order_status:"Trạng thái đơn hàng",receipt_template_note_order_service_no:"Số thứ tự phục vụ",receipt_template_note_order_date:"Thời gian tạo đơn hàng (Ngày, giờ)",receipt_template_note_location:"Tên cửa hàng tạo đơn hàng",receipt_template_note_location_phone:"Số  điện thoại cửa hàng tạo đơn hàng",receipt_template_note_location_address:"Địa chỉ của cửa hàng",receipt_template_note_customer:"Họ Tên khách hàng",receipt_template_note_customer_name:"Họ Tên khách hàng",receipt_template_note_customer_fullname:"Họ Tên khách hàng",receipt_template_note_customer_code:"Mã khách hàng",receipt_template_note_customer_address:"Địa chỉ của khách hàng",receipt_template_note_customer_region:"Tỉnh / Thành phố của địa chỉ khách hàng",receipt_template_note_customer_sub_region:"Quận / Huyện của địa chỉ khách hàng",receipt_template_note_customer_sub_sub_region:"Phường / Xã của địa chỉ khách hàng",receipt_template_note_customer_email:"Email của khách hàng",receipt_template_note_customer_phone:"Số điện thoại của khách hàng",receipt_template_note_customer_gender:"Giới tính của khách hàng",receipt_template_note_employee:"Họ Tên nhân viên bán hàng",receipt_template_note_employee_id:"Mã nhân viên bán hàng",receipt_template_note_origin:"Nguồn đơn hàng",receipt_template_note_origin_id:"ID từ nguồn đơn hàng",receipt_template_note_order_item_row:"Thông tin các sản phẩm trong đơn hàng",receipt_template_note_order_item_row_with_barcode:"Thông tin các sản phẩm trong đơn hàng (có hiển thị hình mã vạch sản phẩm)",receipt_template_note_order_item_row_2_column:"Thông tin các sản phẩm trong đơn hàng dùng cho khổ giấy nhỏ (chỉ hiển thị 2 cột)",receipt_template_note_order_sub_total:"Thành tiền",receipt_template_note_order_note:"Ghi chú của đơn hàng",receipt_template_note_order_payment:"Phương thức thanh toán",receipt_template_note_order_shipping:"Phí giao hàng",receipt_template_note_order_total_amount:"Tổng khách hàng phải trả",receipt_template_note_order_cutomer_paid:"Tiền khách đưa",receipt_template_note_order_customer_return:"Tiền thối",receipt_template_note_order_tax_percent:"thuế",receipt_template_note_order_tax:"Tiền thuế",receipt_template_note_order_discount_percent:"khuyến mãi",receipt_template_note_order_discount:"Tiền khuyến mãi",receipt_template_note_shipping_method:"Phương thức giao hàng",receipt_template_tag:"Gắn thẻ",disable_print_after_checkout:"Không in đơn hàng sau khi tạo",order_template:"Mẫu đơn hàng để in",order_template_note:"Ghi chú một số code tự động thay thế giá trị khi in, tương ứng với từng đơn hàng:",cashflow_template_note:"Ghi chú một số code tự động thay thế giá trị khi in, tương ứng với từng phiếu:",order_template_note_order_time:"Thời gian tạo đơn hàng (Ngày, giờ)",order_template_note_shipping_trackingcode:"Mã vận đơn (lấy từ dịch vụ giao hàng)",order_template_note_total_quantity:"Tổng số lượng",order_template_note_tag:"Gắn thẻ cho đơn hàng",receipt_template_note_employee_sale:"Nhân viên bán hàng",receipt_template_note_shipping_address:"Địa chỉ giao hàng",receipt_template_note_shipping_region:"Tỉnh / Thành phố của địa chỉ giao hàng",receipt_template_note_shipping_region_sub:"Quận / Huyện của địa chỉ giao hàng",order_template_note_order_cod_amount:"Tiền thu khi giao hàng",order_template_note_order_deposit:"Tổng khách hàng trả trước",order_template_note_order_debbt:"Tổng khách hàng đang nợ",order_template_note_order_invoice_url:"Đường dẫn (URL) đến hình barcode của Invoice ID. Có dạng: http://...",order_template_note_order_shipping_tracking_url:"Đường dẫn (URL) đến hình barcode của Mã vận đơn. Có dạng: http://...",receipt_template_order_deposit:"Tiền đặt cọc",receipt_template_payment_watermark:"Hình dẫn đến 1 trong 3 hình tương ứng với 3 trạng thái: đặt cọc, trả công nợ và thanh toán hết. Tùy theo ngữ cảnh lúc tạo đơn hàng trong pos, hoàn tất cọc mà biến này sẽ có giá trị là đường dẫnhình của 1 trong 3 hình",print_cashflow_type:"Danh mục phiếu",print_cashflow_creator:"Nhân viên tạo phiếu",print_cashflow_out:"Mẫu PHIẾU CHI để in",print_cashflow_in:"Mẫu PHIẾU THU để in",print_cashflow_company_name:"Tên công ty",print_cashflow_company_address:"Địa chỉ công ty",print_cashflow_company_phone:"Điện thoại công ty",print_cashflow_code:"Mã phiếu",print_cashflow_location:"Cửa hàng",print_cashflow_partner_type:"Đối tượng tạo phiếu",print_cashflow_partner:"Người nộp (nhận) tiền",
print_cashflow_title:"Tiêu đề phiếu (lý do)",print_cashflow_value:"Số tiền",print_cashflow_note:"Ghi chú",print_cashflow_date_created:"Ngày tạo phiếu",print_cashflow_payment_type:"Phương thức thanh toán",print_cashflow_account_type:"Loại tài khoản",print_cashflow_session:"Kỳ thanh toán",print_cashflow_account_number:"Số tài khoản (thanh toán qua ngân hàng)",print_cashflow_bankname:"Tên ngân hàng (thanh toán qua ngân hàng)",haravan_domain:"Đường dẫn MyHaravan (?)",enable_haravan:"Trạng thái",haravan_api_key:"API Key",haravan_shared_secret:"Shared Secret",haravan_password:"Password",haravan_slid:"Đơn hàng sẽ được lưu vào cửa hàng",haravan_output_type:"Lấy giá từ hình thức xuất",haravan_origin:"Đơn hàng sẽ được lưu vào nguồn",teamcrop_webhook_url:"Webhook URL",search_product_online:"Tìm kiếm sản phẩm từ server(Online)",search_product_online_note:"Dùng cho POS, tạo phiếu",haravan_webhook_secret:"Webhook Verify Code (?)",add_new_haravan:"'+] Thêm một cài đặt web Haravan",cashflow_default_income_cat:"Danh mục mặc định khi tạo PHIẾU THU tự động từ đơn hàng",cashflow_default_expense_cat:"Danh mục mặc định khi tạo PHIẾU CHI tự động từ đơn hàng trả",cashflow_default_income_tit:"Tiêu đề mặc định khi tạo PHIẾU THU tự động từ đơn hàng",cashflow_default_expense_tit:"Tiêu đề mặc định khi tạo PHIẾU CHI tự động từ đơn hàng trả",cashflow_not_allowed_cancel_after_completed:"Cấm hủy PHIẾU đã hoàn thành",enable_auto_product_receipt:"Tự động tạo hóa đơn XUẤT sản phẩm",productreceipt_not_allowed_cancel_after_completed:"Cấm hủy PHIẾU đã hoàn thành",error_cashflow_default_income_cat_required:"Vui lòng chọn danh mục mặc định",error_cashflow_default_income_cat_invalid:"Danh mục không hợp lệ",error_cashflow_default_expense_cat_required:"Vui lòng chọn danh mục mặc định",error_cashflow_default_expense_cat_invalid:"Danh mục không hợp lệ",error_pos_login_logo_invalid:"Icon trang đăng nhập không hợp lệ",error_pos_login_logo_required:"Vui lòng chọn icon trang đăng nhập",error_pos_status_default_required:"Vui lòng chọn trạng thái mặc định từ POS",error_pos_status_default_invalid:"Trạng thái mặc định từ POS không hợp lệ",error_pos_customer_type_invalid:"Nhóm mặc định cho KH không hợp lệ",pos_customer_status_invalid:"Trạng thái mặc định cho KH không hợp lệ",error_pos_customer_origin_invalid:"Nguồn mặc định cho KH hợp lệ",error_pos_cashflow_type_invalid:"Danh mục phiếu thu hợp lệ",error_pos_cashflow_account_id_invalid:"Gán vào tài khoản hợp lệ",weighted_barcode_product:"Thông tin Sản phẩm cân ký",weighted_barcode_product_note:"Cài đặt dành cho nhận dạng barcode sản phẩm cân ký",enable_weighted_barcode_item:"Cho phép sử dụng barcode cho sản phẩm cân ký",weighted_barcode_format:"Định dạng barcode",weighted_barcode_format_prefix:"Tiền tố",weighted_barcode_format_prefix_note:"1 hoặc 2 chữ số đầu tiên để phân biệt barcode dạng cân ký với các barcode khác trong hệ thống. (VD: 20, 2..)",weighted_barcode_format_s:"Các ký tự biểu thị SKU của sản phẩm",weighted_barcode_format_g:"Các ký tự biểu thị Khối lượng của sản phẩm, đơn vị gram (Weight)",weighted_barcode_format_c:"1 ký tự kiểm tra toàn vẹn dữ liệu (Check digit)",error_weighted_barcode_format_characters_started_invalid:"Tiền tố định dạng barcode phải là số nguyên dương lớn hơn 0",error_weighted_barcode_format_sgc_invalid:'Định dạng barcode phải là số và các ký tự "S", "G", "C"',error_weighted_barcode_format_c_invalid:'Định dạng barcode chỉ chứa duy nhất 1 ký tự "C"',error_weighted_barcode_format_c_ended_invalid:'Ký tự cuối của định dạng barcode phải là ký tự "C"',error_assign_user_required:"Vui lòng nhập tên",error_warehouse_invalid:"Tất cả các kho phải được gán vào cửa hàng mới có thể tạo phiếu xuất tự động",error_warehouse_store_invalid:"Tất cả các kho phải được gán vào cửa hàng mới có thể tạo phiếu xuất tự động",error_trial_existed:"Bạn không thể thay đổi gói dùng thử",error_email_require:"Bạn chưa nhập địa chỉ email.",error_password_require:"Bạn chưa nhập mật khẩu.",error_password_notmatch:"Mật khẩu nhập không giống nhau.",error_fullname_require:"Bạn chưa nhập tên của mình.",error_phone_require:"Bạn chưa nhập số điện thoại.",error_companyname_require:"Bạn chưa nhập tên công ty.",success_create:"Công ty đã được tạo thành công!",create_company_heading:"Tạo công ty",company_password:"Mật khẩu",company_password_confirm:"Xác nhận mật khẩu",company_fullname:"Họ tên",company_phone:"Điện thoại liên hệ",company_name:"Tên công ty",full_name:"Họ và tên",email:"Email",phone:"Số điện thoại",company_create_submit:"Hoàn tất",company_login:"Đăng nhập",cache_manager:"Quản lý Cache",cache_manager_text:"Xem thông tin",email_setting:"Cài đặt Email",which_status_send_email:"Bạn muốn email cho khách hàng khi đơn hàng chuyển sang trạng thái nào?",crm_email_setting:"Cấu hình gửi email",crm_email_on:"Công ty bạn đang được cấu hình gửi Email bằng",crm_email_off:"Công ty bạn chưa được cấu hình gửi Email",crm_sms_setting:"Cấu hình gửi SMS",sms_setting:"Cài đặt SMS",which_status_send_sms:"Bạn muốn nhắn tin cho khách hàng khi đơn hàng chuyển sang trạng thái nào?",crm_sms_on:"Công ty bạn đang được cấu hình gửi SMS bằng brandname",crm_sms_off:"Công ty bạn chưa được cấu hình gửi SMS. Vui lòng liên hệ với chúng tôi để biết thêm chi tiết",point:"Quy đổi điểm tích lũy",point_info:"Cài đặt liên quan đến quy đổi điểm tích lũy",point_convert:"Quy đổi 1 điểm tích lũy của khách hàng",receipt_information:"Thông tin phiếu nhập/xuất kho",receipt_information_info:"Cài đặt thông tin phiếu nhập/xuất kho",pos_allow_created_receipt_output:"Cho phép tạo phiếu xuất",error_quantity_decimal_between_0_and_4_only:"Số chữ số thập phân phải từ 0 đến 4.",inventory_method:"Phương pháp tồn kho",inventory_method_info:"Cài đặt liên quan đến phương pháp tồn kho",enable_inventory_by_serial_number:"Cho phép tồn kho theo Serial Number / IMEI",error_inventory_by_serial_not_available:"Công ty bạn chưa bật module quản lý tồn kho theo Serial Number/Imei nên không thể kích hoạt.",logaudit:"Xem Log toàn bộ hoạt động",only_pos:"Chỉ áp dụng tại POS",using_ssl:"Sử dụng SSL",using_ssl_yes:"Có",currency_number_format_des:"%number% chữ số thập phân",currency_number_format_none:"Không định dạng",inventory_quantity_decimal:"Số chữ số thập phân cho SL sản phẩm",inventory_quantity_decimal_description:"Mặc đình là 0",productreceipt_costing_method_empty_text:"--Chọn phương pháp--",filter_keyword:"Từ khóa"}};return new e({lang:t})}),define("models/companysetting",["basemodel","pref","companysetting","language/company"],function(e,t,n,a){var i=e.extend({urlRoot:"v1/companysettings",cacheName:"companysetting",getSetting:function(e,t){var n=this.urlRoot+"/setting";$.ajax({url:n,type:"GET",data:e,success:function(e){t(e)},error:function(e){}})},getData:function(e){var t=this.urlRoot+"/"+e.action;$.ajax({url:t,type:"GET",data:e.query,success:function(t,n,a){"function"==typeof e.success&&e.success(t,a)},error:function(t){"function"==typeof e.error&&e.error(t)},complete:function(t){"function"==typeof e.complete&&e.complete(t)}})},saveSetting:function(e,a,i){i.action="undefined"!=typeof i.action?"/"+i.action:"";var r=this.urlRoot+i.action;$.ajax({url:r,type:"POST",data:e,success:function(e,i,r){e.hasOwnProperty("general")&&(t.set("companysetting",JSON.stringify(e.general)),n.init(e.general)),"function"!=typeof a.success||201!=r.status&&200!=r.status||a.success(e,r),"function"!=typeof a.error||422!=r.status&&422!=r.status||a.error(e,r)},error:function(e,t,n){"function"==typeof a.error&&a.error(e)},complete:function(e){"function"==typeof a.complete&&a.complete(e)}})},getListIconLogin:function(){return[{code:this.ICON_LOGIN_RESTAURANT,text:a.t("icon_login_restaurant")},{code:this.ICON_LOGIN_STORE,text:a.t("icon_login_store")}]},getCostName:function(e){e=parseInt(e);var t=this.getListCost().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={code:e,text:"",disabled:""}),t},getListCost:function(){return[{code:this.COST_STANDARD,text:a.t("cost_standard"),disabled:!1},{code:this.COST_AVERAGE,text:a.t("cost_average")+" (NOT SUPPORT)",disabled:"disabled"},{code:this.COST_FIFO,text:a.t("cost_fifo")+" (NOT SUPPORT)",disabled:"disabled"}]},ICON_LOGIN_RESTAURANT:1,ICON_LOGIN_STORE:3,COST_STANDARD:1,COST_AVERAGE:3,COST_FIFO:5});return i}),define("collections/companysetting",["basecollection","models/companysetting"],function(e,t){var n=e.extend({url:"v1/companysettings",model:t});return n}),define("companyresource",["react","cacheddata","pref","eventbus","collections/companyresource","models/companyresource","collections/user","collections/employee","collections/region","collections/department","collections/office","collections/worktrackingrange","collections/group","collections/companysetting"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){return{getCacheableCollections:function(){var e=[new p,new l,new o,new s,new c,new d,new u,new m];return e},clearCache:function(){var e=this.getCacheableCollections();$.each(e,function(e,t){t.clearCacheData()})},loadData:function(t){var n=this,i=this.getCacheableCollections();$.each(i,function(e,n){n.getDataForCache(t)}),this.alreadyFirstInitialize||(this.alreadyFirstInitialize=!0,$("#appstartloader").show(),a.on("companyresource.loaddone",function(t){n.alreadyFirstInitializeFetchCount++,"user"==t.name||"region"==t.name,t.success||(console.log("Fail to load ",t.name),n.alreadyFirstInitializeFetchFailItems.push(t.name),a.trigger("appstartloader:loaderror",t.name));var i=n.getCacheableCollections().length;a.trigger("appstartloader:progress",parseInt(n.alreadyFirstInitializeFetchCount/i*100)),n.alreadyFirstInitializeFetchCount==i&&(0==n.alreadyFirstInitializeFetchFailItems.length?($("#appstartloader").fadeOut(100,function(){e.unmountComponentAtNode(document.getElementById("appstartloader"))}),a.trigger("app.start")):a.trigger("appstartloader:donewitherror"))}))},loadedResourceInit:[],alreadyFirstInitialize:!1,alreadyFirstInitializeFetchCount:0,alreadyFirstInitializeFetchFailItems:[],initializeLoadIsBusy:!1,initializeLoad:function(){var e=this;this.initializeLoadIsBusy||n.get("cid")>0&&(this.initializeLoadIsBusy=!0,(new i).fetch({data:{company_id:n.get("cid")},success:function(t,n){0==n.total?e.addcompanyresource():e.loadData(n.items[0])},complete:function(){e.initializeLoadIsBusy=!1}}))},initialize:function(){this.initializeLoad()},addcompanyresource:function(){var e={company_id:n.get("cid"),user_id:n.get("uid")},t=this;(new r).save(e,{success:function(e){e=e.toJSON(),t.loadData(e)},error:function(){console.log("Error add company resource")}})}}}),define("components/appstartloader",["react","eventbus","pref","helper","language/default","companyresource"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"AppStartLoaderComponent",getInitialState:function(){return{percent:0,errorItems:[],donewitherror:!1}},handlerProgress:function(e){this.setState({percent:e})},handlerError:function(e){this.state.errorItems.push(e),this.setState({errorItems:this.state.errorItems})},handlerDoneWithError:function(){this.setState({donewitherror:!0})},continueWithError:function(n){n.preventDefault(),$("#appstartloader").fadeOut(100,function(){e.unmountComponentAtNode(document.getElementById("appstartloader"))}),t.trigger("app.start")},reloadPage:function(e){e.preventDefault(),document.location.reload(!0)},componentWillUnmount:function(){t.off("appstartloader:progress",this.handlerProgress),t.off("appstartloader:loaderror",this.handlerError),t.off("appstartloader:donewitherror",this.handlerDoneWithError)},componentDidMount:function(){t.on("appstartloader:progress",this.handlerProgress),t.on("appstartloader:loaderror",this.handlerError),t.on("appstartloader:donewitherror",this.handlerDoneWithError)},render:function(){return e.createElement("div",{id:"appstartloaderwrapper"},e.createElement("div",{id:"appstartloaderinner"},this.state.donewitherror?"":e.createElement("div",{style:{marginBottom:10}},i.t("app_initializing")),this.state.donewitherror?e.createElement("div",null,i.t("error_while_load_cache_resource_heading")):e.createElement("div",{style:{margin:"auto",width:240,height:14,border:"1px solid #3498db",borderRadius:20}},e.createElement("div",{style:{width:this.state.percent+"%",background:"url(/imgs/progressbar.gif) #3498db",borderRadius:20,height:12,opacity:.7,fontSize:10,color:"#000",lineHeight:"12px"}},this.state.percent,"%")),this.state.errorItems.length>0?e.createElement("ul",{style:{paddingTop:15}},this.state.errorItems.map(function(t){return e.createElement("li",{key:t},e.createElement("small",null,e.createElement("span",{style:{color:"red"}},"×")," ",i.t("error_while_load_cache_resource")," ",e.createElement("code",null,t),"."))})):"",this.state.donewitherror?e.createElement("div",null,e.createElement("div",{className:"ui divider"}),e.createElement("a",{href:"#",className:"ui blue button mini",onClick:this.reloadPage},i.t("error_while_load_cache_resource_reload")),e.createElement("span",null," "),e.createElement("a",{href:"#",className:"ui basic orange button mini",onClick:this.continueWithError},i.t("error_while_load_cache_resource_ignore")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{lineHeight:"13px"}},e.createElement("small",{style:{color:"#aaa"}},i.t("error_while_load_cache_resource_help")))):""))}});return o}),define("components/globalloadindicator",["react","eventbus","pref","helper","language/default","companyresource"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"GlobalLoadIndicatorComponent",getInitialState:function(){return{}},beginHandler:function(){$(e.findDOMNode(this)).stop(!0,!0).slideDown(100)},endHandler:function(){$(e.findDOMNode(this)).stop(!0,!0).slideUp(100)},componentWillUnmount:function(){t.off("loader:begin",this.beginHandler),t.off("loader:end",this.endHandler)},componentDidMount:function(){t.on("loader:begin",this.beginHandler),t.on("loader:end",this.endHandler)},render:function(){return e.createElement("div",{style:{display:"none"}},e.createElement("div",{style:{margin:"auto",background:"#00E676 url(/imgs/progressbar.gif)",width:"100%",height:22,fontSize:12,border:"1px solid #3498db",borderRadius:"0 0 8px 8px"}},i.t("loadindicator")))}});return o}),define("language/notify",["baselanguage"],function(e){var t={vn:{heading:"Thông báo cho bạn",loadmorenotification:"Xem thêm",clearSuccess:"Đã đánh dấu đã đọc cho tất cả thông báo mới.",in_project:"trong dự án",in_room:"trong phòng",type_activitycommentadd:"bình luận cho trạng thái",type_activitylikeadd:"thích trạng thái",type_projectadd:"đã tạo dự án",type_projectassign:"đã thêm bạn vào dự án",type_projecttaskadd:"đã tạo công việc",type_projecttaskassign:"đã thêm bạn vào công việc",type_projecttaskupdatestatus:"đã cập nhật trạng thái của công việc",type_projecttaskcommentadd:"đã bình luận vào công việc",type_projectissueadd:"đã tạo vấn đề",type_projectissueassign:"đã thêm bạn vào vấn đề",type_projectissueupdatestatus:"đã cập nhật trạng thái của vấn đề",type_projectissuecommentadd:"đã bình luận vào vấn đề",type_chatroominvite:"đã mời bạn vào phòng chat",type_chatroomnewreply:"vừa chat",type_mailaddrecipient:"gửi cho bạn thư",order_add:"đã tạo đơn hàng",order_status_change:"đã đổi trạng thái",order_for:"cho đơn hàng",order_edit:"đã cập nhật thông tin cho đơn hàng",order_in:"trong đơn hàng",order_product_edit:"đã cập nhật sản phẩm",order_product_delete:"đã xóa sản phẩm",order_product_add:"đã thêm sản phẩm",todo_reminder:"Nhắc lịch",reminder_at:"vào lúc",tick_read_all:"Đánh dấu tất cả đã đọc",setting:"Cài đặt",dashboard:"Bảng tin",view_all:"Xem tât cả",leave_needreview:"đang chờ bạn duyệt nghỉ phép",leave_acceptpartial:"đã duyệt và bạn đang chờ duyệt vòng tiếp theo.",leave_accept:"đã được duyệt và hoàn tất đơn xin nghỉ phép của bạn",leave_reject:"đã từ chối đơn xin nghỉ của bạn",cashflow_add:"đã tạo phiếu",cashflow_statuschange:"đã thay đổi trạng thái sang",cashflow_edit:"đã cập nhật thông tin của phiếu",productreceipt_add:"đã tạo phiếu",productreceipt_status_change:"đã cập nhật trạng thái phiếu",productreceipt_product_change:"đã thay đổi sản phẩm trong phiếu",customer_add:"đã thêm khách hàng",customer_edit:"đã cập nhật thông tin khách hàng",customer_note_add:"đã tạo ghi chú",customer_task_add:"đã tạo công việc",customer_sms_add:"đã SMS cho khách hàng",customer_email_add:"đã email cho khách hàng",customer_event_add:"đã tạo sự kiện",customer_assign:"đã gán bạn vào theo dõi khách hàng",customer_for:"cho khách hàng",customer_with:"với khách hàng",shipping_add:"đã tạo vận đơn tại",shipping_order:"cho đơn hàng",order:"Đơn hàng",shipping_statuschange:"đã cập nhật trạng thái sang",shipping_delete:"đã xóa vận đơn cho đơn hàng",empty_list:"Không tìm thấy thông báo nào!"},en:{heading:"Thông báo cho bạn",loadmorenotification:"Xem thêm",clearSuccess:"Đã đánh dấu đã đọc cho tất cả thông báo mới.",in_project:"trong dự án",in_room:"trong phòng",type_activitycommentadd:"bình luận cho trạng thái",type_activitylikeadd:"thích trạng thái",type_projectadd:"đã tạo dự án",type_projectassign:"đã thêm bạn vào dự án",type_projecttaskadd:"đã tạo công việc",type_projecttaskassign:"đã thêm bạn vào công việc",type_projecttaskupdatestatus:"đã cập nhật trạng thái của công việc",type_projecttaskcommentadd:"đã bình luận vào công việc",type_projectissueadd:"đã tạo vấn đề",type_projectissueassign:"đã thêm bạn vào vấn đề",type_projectissueupdatestatus:"đã cập nhật trạng thái của vấn đề",type_projectissuecommentadd:"đã bình luận vào vấn đề",type_chatroominvite:"đã mời bạn vào phòng chat",type_chatroomnewreply:"vừa chat",type_mailaddrecipient:"gửi cho bạn thư",order_add:"đã tạo đơn hàng",order_status_change:"đã đổi trạng thái",order_for:"cho đơn hàng",order_edit:"đã cập nhật thông tin cho đơn hàng",order_in:"trong đơn hàng",order_product_edit:"đã cập nhật sản phẩm",order_product_delete:"đã xóa sản phẩm",order_product_add:"đã thêm sản phẩm",todo_reminder:"Nhắc lịch",reminder_at:"vào lúc",tick_read_all:"Đánh dấu tất cả đã đọc",setting:"Cài đặt",dashboard:"Bảng tin",view_all:"Xem tât cả",leave_needreview:"đang chờ bạn duyệt nghỉ phép",leave_acceptpartial:"đã duyệt và bạn đang chờ duyệt vòng tiếp theo.",leave_accept:"đã được duyệt và hoàn tất đơn xin nghỉ phép của bạn",leave_reject:"đã từ chối đơn xin nghỉ của bạn",cashflow_add:"đã tạo phiếu",cashflow_statuschange:"đã thay đổi trạng thái sang",cashflow_edit:"đã cập nhật thông tin của phiếu",productreceipt_add:"đã tạo phiếu",productreceipt_status_change:"đã cập nhật trạng thái phiếu",productreceipt_product_change:"đã thay đổi sản phẩm trong phiếu",customer_add:"đã thêm khách hàng",customer_edit:"đã cập nhật thông tin khách hàng",customer_note_add:"đã tạo ghi chú",customer_task_add:"đã tạo công việc",customer_sms_add:"đã SMS cho khách hàng",customer_email_add:"đã email cho khách hàng",customer_event_add:"đã tạo sự kiện",customer_assign:"đã gán bạn vào theo dõi khách hàng",customer_for:"cho khách hàng",customer_with:"với khách hàng",shipping_add:"đã tạo vận đơn tại",shipping_order:"cho đơn hàng",order:"Đơn hàng",shipping_statuschange:"đã cập nhật trạng thái sang",shipping_delete:"đã xóa vận đơn cho đơn hàng",empty_list:"Không tìm thấy thông báo nào!"}};return new e({lang:t})}),define("models/notify",["basemodel","backbone","helper","setting","eventbus","language/notify","pref"],function(e,t,n,a,i,r,o){var s=e.extend({urlRoot:"v1/notifies",parseInfo:function(e){var t={id:e.id,icon:"user",url:"",text:""};switch(e.type){case"activitylike.add":t.url="activity/detail/"+e.sub_object_id,t.text=r.t("type_activitylikeadd")+' "'+e.meta_summary+'"';break;case"activitycomment.add":t.icon="comments",t.url="activity/detail/"+e.sub_object_id,t.text=r.t("type_activitycommentadd")+' "'+e.meta_summary+'"';break;case"project.add":t.url="project/detail/"+e.object_id,t.text=r.t("type_projectadd")+' "'+e.meta_summary+'"';break;case"project.assign":t.url="project/detail/"+e.object_id,t.text=r.t("type_projectassign")+' "'+e.meta_summary+'"';break;case"projecttask.add":t.url="project/detail/_s/id/"+e.object_id+"/taskid/"+e.sub_object_id+"/keyword/"+e.sub_object_id,t.text=r.t("type_projecttaskadd")+' <strong>"'+e.meta_summary+'"</strong> '+r.t("in_project")+' <strong>"'+e.meta_from+'"</strong>';break;case"projecttask.assign":t.url="project/detail/_s/id/"+e.object_id+"/taskid/"+e.sub_object_id+"/keyword/"+e.sub_object_id,t.text=r.t("type_projecttaskassign")+' <strong>"'+e.meta_summary+'"</strong> '+r.t("in_project")+' <strong>"'+e.meta_from+'"</strong>';break;case"projecttask.updatestatus":t.url="project/detail/_s/id/"+e.object_id+"/taskid/"+e.sub_object_id+"/keyword/"+e.sub_object_id,t.text=r.t("type_projecttaskupdatestatus")+' <strong>"'+e.meta_summary+'"</strong> '+r.t("in_project")+' <strong>"'+e.meta_from+'"</strong>';break;case"projecttaskcomment.add":t.url="project/detail/_s/id/"+e.object_id+"/taskid/"+e.sub_object_id+"/keyword/"+e.sub_object_id,t.text=r.t("type_projecttaskcommentadd")+' <strong>"'+e.meta_summary+'"</strong> '+r.t("in_project")+' <strong>"'+e.meta_from+'"</strong>';break;case"projectissue.add":t.url="project/bug/_s/id/"+e.object_id+"/tab/buglist/issueid/"+e.sub_object_id+"/keyword/"+e.sub_object_id,t.text=r.t("type_projectissueadd")+' <strong>"'+e.meta_summary+'"</strong> '+r.t("in_project")+' <strong>"'+e.meta_from+'"</strong>';break;case"projectissue.assign":t.url="project/bug/_s/id/"+e.object_id+"/tab/buglist/issueid/"+e.sub_object_id+"/keyword/"+e.sub_object_id,t.text=r.t("type_projectissueassign")+' <strong>"'+e.meta_summary+'"</strong> '+r.t("in_project")+' <strong>"'+e.meta_from+'"</strong>';break;case"projectissue.updatestatus":t.url="project/bug/_s/id/"+e.object_id+"/tab/buglist/issueid/"+e.sub_object_id+"/keyword/"+e.sub_object_id,t.text=r.t("type_projectissueupdatestatus")+' <strong>"'+e.meta_summary+'"</strong> '+r.t("in_project")+' <strong>"'+e.meta_from+'"</strong>';break;case"projectissuecomment.add":t.url="project/bug/_s/id/"+e.object_id+"/tab/buglist/issueid/"+e.sub_object_id+"/keyword/"+e.sub_object_id,t.text=r.t("type_projectissuecommentadd")+' <strong>"'+e.meta_summary+'"</strong> '+r.t("in_project")+' <strong>"'+e.meta_from+'"</strong>';break;case"chatroom.newreply":t.url="chat/index/room/"+e.object_id+"/comment/"+e.sub_object_id,t.text=r.t("type_chatroomnewreply")+' <strong>"'+e.meta_summary+'"</strong>',""!=e.meta_from&&(t.text+=r.t("in_room")+' <strong>"'+e.meta_from+'"</strong>');break;case"mail.addrecipient":t.url="mail/index/mailbox/inbox/id/"+e.object_id,t.text=r.t("type_mailaddrecipient")+' <strong>"'+e.meta_summary+'"</strong>';break;case"leave.needreview":t.url="hrmleave/_s/id/"+e.object_id+"/keyword/"+e.object_id,t.text=r.t("leave_needreview");break;case"leave.acceptpartial":t.url="hrmleave/_s/id/"+e.object_id+"/keyword/"+e.object_id,t.text=r.t("leave_acceptpartial");break;case"leave.accept":t.url="hrmleave/_s/id/"+e.object_id+"/keyword/"+e.object_id,t.text=r.t("leave_accept");break;case"leave.reject":t.url="hrmleave/_s/id/"+e.object_id+"/keyword/"+e.object_id,t.text=r.t("leave_reject");break;case"order.add":t.url="order/_s/keyword/"+e.meta_summary,t.text=r.t("order_add")+" "+e.meta_summary+" ("+n.smartNumberFormat(e.meta_from)+")";break;case"order.statuschange":t.url="order/_s/keyword/"+e.meta_from,t.text=r.t("order_status_change")+' "'+e.meta_summary+'" '+r.t("order_for")+' "'+e.meta_from+'"';break;case"order.edit":t.url="order/_s/keyword/"+e.meta_from,t.text=r.t("order_edit")+' "'+e.meta_from+'"';break;case"order.productedit":t.url="order/_s/keyword/"+e.meta_from,t.text=r.t("order_product_edit")+' "'+e.meta_summary+'" '+r.t("order_in")+' "'+e.meta_from+'"';break;case"order.productdelete":t.url="order/_s/keyword/"+e.meta_from,t.text=r.t("order_product_delete")+' "'+e.meta_summary+'" '+r.t("order_in")+' "'+e.meta_from+'"';break;case"order.productadd":t.url="order/_s/keyword/"+e.meta_from,t.text=r.t("order_product_add")+' "'+e.meta_summary+'" '+r.t("order_in")+' "'+e.meta_from+'"';break;case"cashflow.add":t.url="cashflow/_s/keyword/"+e.object_id,t.text=r.t("cashflow_add")+" "+e.meta_summary+" ("+n.smartNumberFormat(e.meta_from)+")";break;case"cashflow.statuschange":t.url="cashflow/_s/keyword/"+e.object_id,t.text=r.t("cashflow_statuschange")+" "+e.meta_summary;break;case"cashflow.edit":t.url="cashflow/_s/keyword/"+e.object_id,t.text=r.t("cashflow_edit")+" "+e.meta_summary;break;case"productreceipt.add":t.url="receipt/_s/keyword/"+e.object_id,t.text=r.t("productreceipt_add")+" "+e.meta_summary;break;case"productreceipt.statuschange":t.url="receipt/_s/keyword/"+e.object_id,t.text=r.t("productreceipt_status_change")+" "+e.meta_summary;break;case"productreceipt.productchange":t.url="receipt/_s/keyword/"+e.object_id,t.text=r.t("productreceipt_product_change")+" "+e.meta_summary;break;case"customer.add":t.url="customer/detail/"+e.object_id,t.text=r.t("customer_add")+' "'+e.meta_from+'"';break;case"customer.edit":t.url="customer/detail/"+e.object_id,t.text=r.t("customer_edit")+' "'+e.meta_from+'"';break;case"customer.noteadd":t.url="customer/detail/"+e.object_id,t.text=r.t("customer_note_add")+' "'+e.meta_summary+'" '+r.t("customer_for")+' "'+e.meta_from+'"';break;case"customer.eventadd":t.url="customer/detail/"+e.object_id,t.text=r.t("customer_event_add")+' "'+e.meta_summary+'" '+r.t("customer_with")+' "'+e.meta_from+'"';break;case"customer.taskadd":t.url="customer/detail/"+e.object_id,t.text=r.t("customer_task_add")+' "'+e.meta_summary+'" '+r.t("customer_with")+' "'+e.meta_from+'"';break;case"customer.smsadd":t.url="customer/detail/"+e.object_id,t.text=r.t("customer_sms_add")+' "'+e.meta_from+'" - "'+e.meta_summary+'"';break;case"customer.emailadd":t.url="customer/detail/"+e.object_id,t.text=r.t("customer_email_add")+' "'+e.meta_from+'" - "'+e.meta_summary+'"';break;case"customer.assign":t.url="customer/detail/"+e.object_id,t.text=r.t("customer_assign")+' "'+e.meta_from+'"';break;case"shipping.add":t.url="order/_s/keyword/"+e.meta_from,t.text=r.t("shipping_add")+' "'+e.meta_summary+'" '+r.t("shipping_order")+' "'+e.meta_from+'"';break;case"shipping.statuschange":t.url="order/_s/keyword/"+e.meta_from,t.text=r.t("order")+' "'+e.meta_from+'" '+r.t("shipping_statuschange")+' "'+e.meta_summary+'"';break;case"shipping.delete":t.url="order/_s/keyword/"+e.meta_from,t.text=r.t("shipping_delete")+' "'+e.meta_from+'"';break;case"todo.reminder":var a=moment.unix(e.meta_from).format("HH:mm, DD/MM");t.url="customer/calendar/_s/id/"+e.object_id,t.text=r.t("todo_reminder")+": "+e.meta_summary+" "+r.t("reminder_at")+" "+a}return t},markAsRead:function(e,t){var a=this.READPLATFORM_DESKTOP;n.isPhonegap()?a=this.READPLATFORM_MOBILE_APP:n.isMobile()&&(a=this.READPLATFORM_MOBILE),$.ajax({type:"put",url:this.urlRoot+"/"+e.id+"/read",data:{company_id:o.get("cid"),owner_id:o.get("uid"),read_platform:a,read_section:t},success:function(e){i.trigger("notifypageheader:decreasebadgenumber")}})},redirect:function(e,n){t.history.navigate(e.url,{trigger:!0}),this.markAsRead(e,n)},READPLATFORM_DESKTOP:1,READPLATFORM_MOBILE:3,READPLATFORM_MOBILE_APP:5,READPLATFORM_DESKTOP_APP:7,READPLATFORM_API:9,READPLATFORM_OTHER:11,READSECTION_WIDGET:1,READSECTION_BEEPER:3,READSECTION_PUSH:5,READSECTION_AUTO:7,READSECTION_RESET:9,READSECTION_OTHER:11});return s}),define("components/beeper/item",["react","eventbus","pref","helper","models/notify"],function(e,t,n,a,i){var r=e.createClass({displayName:"BeeperItemComponent",getDefaultProps:function(){return{id:0,icon:"",subject:"",text:"",url:"",duration:5e3,fadeduration:2e3}},timeout:null,removeItem:function(){t.trigger("beeper:removeitem",this.props.id)},clickHandler:function(){(new i).redirect(this.props,(new i).READSECTION_BEEPER),this.removeItem()},closeHandler:function(e){this.removeItem(),e.stopPropagation()},autohideHandler:function(){var t=this;$(e.findDOMNode(this)).transition({animation:"fade",duration:t.props.fadeduration,onComplete:function(){t.removeItem()}})},startHideTimeout:function(){var e=this;this.timeout=setTimeout(function(){e.autohideHandler()},this.props.duration)},componentWillUnmount:function(){},componentDidMount:function(){var t=this;this.startHideTimeout(),$(e.findDOMNode(this)).hover(function(){clearTimeout(t.timeout),$(this).transition("reset")},function(){t.startHideTimeout()})},render:function(){return e.createElement("div",{className:"tcbeep",onClick:this.clickHandler},e.createElement("div",{className:"image"},e.createElement("i",{className:"icon tc-"+this.props.icon})),e.createElement("div",{className:"close",onClick:this.closeHandler},e.createElement("i",{className:"icon tc-cross"})),e.createElement("div",{className:"text"},e.createElement("strong",null,this.props.subject," "),this.props.text))}});return r}),define("components/beeper/list",["react","eventbus","pref","helper","components/beeper/item"],function(e,t,n,a,i){var r=e.createClass({displayName:"BeeperListComponent",getInitialState:function(){return{items:[]}},addItemHandler:function(e){this.state.items.push(e),this.setState({items:this.state.items})},removeItemHandler:function(e){var t=[];$.each(this.state.items,function(n,a){a.id!=e&&t.push(a)}),this.setState({items:t})},componentWillUnmount:function(){t.off("beeper:additem",this.addItemHandler),t.off("beeper:removeitem",this.removeItemHandler)},componentDidMount:function(){t.on("beeper:additem",this.addItemHandler),t.on("beeper:removeitem",this.removeItemHandler)},render:function(){return e.createElement("div",null,this.state.items.map(function(t){return e.createElement(i,{key:"beeper-"+t.id,id:t.id,icon:t.icon,url:t.url,subject:t.subject,text:t.text})}))}});return r}),define("language/pageheader",["baselanguage"],function(e){var t={vn:{company:"Công ty",profile_edit:"Chỉnh sửa tài khoản",notification_setting:"Cài đặt thông báo",vietnamese:"Tiếng Việt",english:"Tiếng Anh",logout:"Thoát",setting:"Cài đặt",editprofile:"Chỉnh sửa thông tin",account:"Tài khoản",logout_confirm:"Bạn có muốn thoát?",trial_text_1_mobile:"Trial Version",trial_text_1:"Dùng thử (",trial_text_2:"ngày)",tooltip_trial:"Thông báo này sẽ mất khi nâng cấp lên tài khoản trả phí",trial_upgrade:"Nâng cấp",expire_heading:"Thật tiếc quá!",expire_subheading:"Hiện tại, tài khoản công ty bạn đã hết hạn dùng thử. Hãy liên hệ với ban quản trị (support@teamcrop.com) để được hỗ trợ hoặc thanh toán để tiếp tục sử dụng.",expire_accountinfo:"Khi được yêu cầu, bạn hãy cung cấp các thông tin tài khoản bên dưới để được hỗ trợ nhanh chóng và chính xác.",expire_chat:"Chat",expire_pay:"Thanh toán",expire_logout:"Đăng xuất",session_timeout_header:"Phiên đăng nhập đã kết thúc",session_timeout_help:'Có thể bạn đã thoát tài khoản ở một cửa sổ hoặc tab khác. Bạn vui lòng <a href="javascript:void(0)" onclick="window.location.reload()">tải lại trang</a> để tiếp tục.',exit_company:"Xóa khỏi công ty",version:"Phiên bản phần mềm",employee:"Nhân viên",checkin:"Chấm công",mail:"Hộp thư",blog:"Blog",project:"Dự án",elearning:"Học trực tuyến"},en:{company:"Công ty",profile_edit:"Chỉnh sửa tài khoản",notification_setting:"Cài đặt thông báo",vietnamese:"Tiếng Việt",english:"Tiếng Anh",logout:"Thoát",setting:"Cài đặt",editprofile:"Chỉnh sửa thông tin",account:"Tài khoản",logout_confirm:"Bạn có muốn thoát?",trial_text_1_mobile:"Trial Version",trial_text_1:"Dùng thử (",trial_text_2:"ngày)",tooltip_trial:"Thông báo này sẽ mất khi nâng cấp lên tài khoản trả phí",trial_upgrade:"Nâng cấp",expire_heading:"Thật tiếc quá!",expire_subheading:"Hiện tại, tài khoản công ty bạn đã hết hạn dùng thử. Hãy liên hệ với ban quản trị (support@teamcrop.com) để được hỗ trợ hoặc thanh toán để tiếp tục sử dụng.",expire_accountinfo:"Khi được yêu cầu, bạn hãy cung cấp các thông tin tài khoản bên dưới để được hỗ trợ nhanh chóng và chính xác.",expire_chat:"Chat",expire_pay:"Thanh toán",expire_logout:"Đăng xuất",session_timeout_header:"Phiên đăng nhập đã kết thúc",session_timeout_help:'Có thể bạn đã thoát tài khoản ở một cửa sổ hoặc tab khác. Bạn vui lòng <a href="javascript:void(0)" onclick="window.location.reload()">tải lại trang</a> để tiếp tục.',exit_company:"Xóa khỏi công ty",version:"Phiên bản phần mềm",employee:"",checkin:"Chấm công",
mail:"",blog:"",project:"",elearning:""}};return new e({lang:t})}),define("language/setting",["baselanguage"],function(e){var t={vn:{heading:"Cài đặt và cấu hình",company:"Cài đặt nhân sự",company_short:"Nhân sự",product:"Cài đặt hàng hóa",integration_heading:"Tích hợp Haravan, Shopify",order_heading:"Cấu hình tạo đơn hàng",sale:"Cài đặt bán hàng",sale_short:"Bán hàng",cashflow:"Cài đặt sổ quỹ",cashflow_short:"Sổ quỹ",customer:"Cài đặt khách hàng",customer_short:"Khách hàng",moduletoggle:"Bật - Tắt tính năng",department:"Phòng ban",group:"Nhóm",office:"Văn phòng làm việc",store:"Cửa hàng",employeepointtopic:"Tiêu chí chấm điểm nhân viên",storechecklistitem:"Tiêu chí đánh giá cửa hàng",hrmleavesetting:"Cấu hình nghỉ phép",productitem:"Sản phẩm",productcategory:"Danh mục sản phẩm",promotion:"Cài đặt chương trình khuyến mãi",productunit:"Đơn vị tính của sản phẩm",vendor:"Thương hiệu",supplier:"Nhà cung cấp",stocklink:"Cấu hình combo",warehouse:"Nhà kho",shippingmethod:"Nhà vận chuyển",orderorigin:"Nguồn đơn hàng",cancelreason:"Lý do hủy đơn hàng",websiteintegration:"Tích hợp Haravan, Shopify",customertype:"Nhóm khách hàng",customerstatus:"Trạng thái khách hàng",customerorigin:"Nguồn khách hàng",customersegment:"Phân khúc khách hàng",customerpointrule:"Công thức tính điểm tích lũy",crmemail:"Lịch sử gửi email",crmsms:"Lịch sử nhắn tin SMS",cashflowaccount:"Tài khoản ngân hàng",cashflowtypein:"Loại phiếu thu",cashflowtypeout:"Loại phiếu chi",permission:"Quyền truy cập",general:"Cài đặt chung",ordergeneral:"Cấu hình tạo đơn hàng",webhook:"Webhook",pipeline:"Cài đặt cho phễu kinh doanh",cashflowgeneral:"Sổ quỹ",inventorysetting:"Cài đặt tồn kho",inventorysetting_short:"Tồn kho",inventory:"Cấu hình khác",inventory_monitor:"Cảnh báo hạng mức tồn kho",pos:"Point of Sale (POS)",cashflowtab:"Cấu hình thu chi",pointcustomer:"Cấu hình quy đổi điểm tích lũy",point_description:"Thiết lập quy đổi điểm tích lũy cho khách hàng",customerupgrade:"Cấu hình thăng hạng",customerupgrade_description:"Thiết lập điều kiện tự động thăng hạng cho khách hàng",menulink:"Menu Link",employeenotification:"Cài đặt nhân sự",employeenotification_description:"Cài đặt thông báo cho nhân viên khi thêm mới, cập nhật đơn hàng, khách hàng, phiếu nhập/xuất kho, phiếu thu/chi",status:"Trạng thái",module:"Module",about:"Giới thiệu",moduletoggle_description:"Tùy chọn bật tắt các tính năng (module) để tối ưu giao diện và chức năng phù hợp với doanh nghiệp của bạn.",department_description:"Xây dựng mô hình phòng ban phù hợp với từng doanh nghiệp và chức năng của từng phòng ban. Chẳng hạn: phòng kế toán, phòng nhân sự,...",group_description:"Nhóm các nhân viên theo tiêu chí nào đó như phòng ban, chức vụ, hình thức làm việc...",office_description:"Là trụ sở nơi để nhân viên làm việc gồm thông tin địa chỉ và thời gian làm việc (ca) tương ứng.",store_description:"Nơi diễn ra giao dịch mua bán hàng hóa gồm  thông tin địa chỉ cửa hàng và nhân viên bán hàng tại cửa hàng cùng với việc cấu hình kho xuất hàng khi bán.",employeepointtopic_description:"Tạo ra các tiêu chí chấm điểm nhân viên với từng thang điểm tương ứng gồm loại điểm cộng và loại điểm trừ cho từng nhân viên.",storechecklistitem_description:"Tạo ra các tiêu chí chấm điểm cửa hàng với từng thang điểm nhằm mục đích so sánh KPI giữa các cửa hàng với nhau.",hrmleavesetting_description:"Thiết lập thời gian nghỉ phép mặc định và người duyệt đơn xin nghỉ phép.",productitem_description:"Quản lý sản phẩm, hàng hóa bằng việc thêm mới hoặc chỉnh sửa sản phẩm đã có.",productcategory_description:"Thiết lập danh mục cho sản phẩm.",promotion_description:"Thiết lập chương trình khuyến mãi trong quá trình bán hàng với nhiều cách thức.",productunit_description:"Thiết lập đơn vị tính cho sản phẩm. Ví dụ: cái, đôi, chiếc...",vendor_description:"Thiết lập thương hiệu cho sản phẩm.",supplier_description:"Quản lý nhà cung cấp sản phẩm về thông tin liên hệ của nhà cung cấp.",stocklink_description:"Thiết lập combo bán hàng, một combo có thể có nhiều sản phẩm với số lượng tùy biến.",warehouse_description:"Thiết lập nhà kho để lưu trữ và theo dõi số lượng tồn của hàng hóa, sản phẩm.",shippingmethod_description:"Thiết lập kết nối với nhà vận chuyển giao hàng khi có đơn hàng phát sinh như Giao hàng nhanh, Bưu điện, Shipchung,...",orderorigin_description:"Thiết lập cấu hình nguồn đơn hàng khi có đơn hàng phát sinh.",cancelreason_description:"Thiết lập các lý do hủy để chọn khi một đơn hàng bị hủy.",websiteintegration_description:"Thiết lập các API  kết nối với các website của Haravan, Bizweb, Shopify, Woocommerce, Facebook,…để quản lý đơn hàng, tồn kho và sản phẩm.",customertype_description:"Là tập hợp các khách hàng có cùng tính cách, đặc tính riêng biệt để từ đó bạn tìm hiểu và đưa ra những phương pháp tiếp cận khách hàng phù hợp.",customerstatus_description:"Là tình trạng của khách hàng trong một khoảng thời gian hoạt động nhất định.",customerorigin_description:"Là nơi phân loại khách hàng theo từng nguồn khác nhau dựa trên đặc điểm chung khi mua hàng.",customersegment_description:"Phân loại và sắp xếp khách hàng vào từng nhóm dựa trên nhu cầu và hành vi của khách hàng nhằm để khuyến mãi và marketing.",customerpointrule_description:"Thiết lập công thức tính điểm tích lũy cho khác hàng xảy ra khi khách hàng giao dịch với công ty.",crmemail_description:"Xem lại tất cả lịch sử gửi email đến khách hàng.",crmsms_description:"Xem lại tất cả lịch sử gửi tin nhắn đến khách hàng.",cashflowaccount_description:"Thiết lập tài khoản ngân hàng để quản lý quá trình thu chi, các giao dịch xảy ra giữa các đối tác, khách hàng và công ty.",cashflowtypein_description:"Thiết lập một số loại phiếu chi nhằm mục đích gom nhóm tất cả các phiếu thu lại theo từng loại đã thiết lập trước.",cashflowtypeout_description:"Thiết lập một số loại phiếu thu nhằm mục đích gom nhóm tất cả các phiếu thu lại theo từng loại đã thiết lập trước,",permission_description:"Phân quyền để nhân viên truy cập vào hệ thống cũng như thao tác với từng chức năng khi thêm mới một nhân viên vào công ty.",general_description:"Thiết lập đơn vị tiền tố cho đơn hàng và khối lượng mặc định cho từng sản phẩm.",ordergeneral_description:"Thiết lập định dạng in đơn hàng và gắn tag ghi chú mặc định cho đơn hàng.",webhook_description:"Cài đặt webhook đến hệ thống của bạn cho các thay đổi dữ liệu như đơn hàng, khách hàng...",pipeline_description:"Cài đặt các phễu kinh doanh, các stage trong phễu để quản lý luồng thông tin, đơn hàng.",cashflowgeneral_description:"Thiết lập dđịnh dạng in phiếu thu và phiếu chi              ",inventory_description:"Thiết lập cấu hình cho phép xuất kho tự động hay không khi có đơn hàng mới phát sinh.",inventory_monitor_description:"Cài đặt các hạng mức tồn kho để thiết lập chế độ cảnh bảo tồn kho của sản phẩm.",pos_description:"Thiết lập các chức năng đối với bán hàng tại cửa hàng (POS).",menulink_description:"Tùy biến top menu công ty với các liên kết hoặc nhúng (iframe) website bên ngoài vào hệ thống này.",cashflowtab_description:"Thiết lập định dạng in phiếu thu và phiếu chi.",customerfailreason:"Lý do khách hàng hủy hợp tác",customerfailreason_description:"Thiết lập các lý do hủy hợp tác để chọn khi khách hàng hủy hợp tác",planbutton:"Tính năng & thanh toán",appandapi:"Quản lý API Key"},en:{heading:"Cài đặt và cấu hình",company:"Cài đặt nhân sự",company_short:"Nhân sự",product:"Cài đặt hàng hóa",integration_heading:"Tích hợp Haravan, Shopify",order_heading:"Cấu hình tạo đơn hàng",sale:"Cài đặt bán hàng",sale_short:"Bán hàng",cashflow:"Cài đặt sổ quỹ",cashflow_short:"Sổ quỹ",customer:"Cài đặt khách hàng",customer_short:"Khách hàng",moduletoggle:"Bật - Tắt tính năng",department:"Phòng ban",group:"Nhóm",office:"Văn phòng làm việc",store:"Cửa hàng",employeepointtopic:"Tiêu chí chấm điểm nhân viên",storechecklistitem:"Tiêu chí đánh giá cửa hàng",hrmleavesetting:"Cấu hình nghỉ phép",productitem:"Sản phẩm",productcategory:"Danh mục sản phẩm",promotion:"Cài đặt chương trình khuyến mãi",productunit:"Đơn vị tính của sản phẩm",vendor:"Thương hiệu",supplier:"Nhà cung cấp",stocklink:"Cấu hình combo",warehouse:"Nhà kho",shippingmethod:"Nhà vận chuyển",orderorigin:"Nguồn đơn hàng",cancelreason:"Lý do hủy đơn hàng",websiteintegration:"Tích hợp Haravan, Shopify",customertype:"Nhóm khách hàng",customerstatus:"Trạng thái khách hàng",customerorigin:"Nguồn khách hàng",customersegment:"Phân khúc khách hàng",customerpointrule:"Công thức tính điểm tích lũy",crmemail:"Lịch sử gửi email",crmsms:"Lịch sử nhắn tin SMS",cashflowaccount:"Tài khoản ngân hàng",cashflowtypein:"Loại phiếu thu",cashflowtypeout:"Loại phiếu chi",permission:"Quyền truy cập",general:"Cài đặt chung",ordergeneral:"Cấu hình tạo đơn hàng",webhook:"Webhook",pipeline:"Cài đặt cho phễu kinh doanh",cashflowgeneral:"Sổ quỹ",inventorysetting:"Cài đặt tồn kho",inventorysetting_short:"Tồn kho",inventory:"Cấu hình khác",inventory_monitor:"Cảnh báo hạng mức tồn kho",pos:"Point of Sale (POS)",cashflowtab:"Cấu hình thu chi",pointcustomer:"Cấu hình quy đổi điểm tích lũy",point_description:"Thiết lập quy đổi điểm tích lũy cho khách hàng",customerupgrade:"Cấu hình thăng hạng",customerupgrade_description:"Thiết lập điều kiện tự động thăng hạng cho khách hàng",menulink:"Menu Link",employeenotification:"Cài đặt nhân sự",employeenotification_description:"Cài đặt thông báo cho nhân viên khi thêm mới, cập nhật đơn hàng, khách hàng, phiếu nhập/xuất kho, phiếu thu/chi",status:"Trạng thái",module:"Module",about:"Giới thiệu",moduletoggle_description:"Tùy chọn bật tắt các tính năng (module) để tối ưu giao diện và chức năng phù hợp với doanh nghiệp của bạn.",department_description:"Xây dựng mô hình phòng ban phù hợp với từng doanh nghiệp và chức năng của từng phòng ban. Chẳng hạn: phòng kế toán, phòng nhân sự,...",group_description:"Nhóm các nhân viên theo tiêu chí nào đó như phòng ban, chức vụ, hình thức làm việc...",office_description:"Là trụ sở nơi để nhân viên làm việc gồm thông tin địa chỉ và thời gian làm việc (ca) tương ứng.",store_description:"Nơi diễn ra giao dịch mua bán hàng hóa gồm  thông tin địa chỉ cửa hàng và nhân viên bán hàng tại cửa hàng cùng với việc cấu hình kho xuất hàng khi bán.",employeepointtopic_description:"Tạo ra các tiêu chí chấm điểm nhân viên với từng thang điểm tương ứng gồm loại điểm cộng và loại điểm trừ cho từng nhân viên.",storechecklistitem_description:"Tạo ra các tiêu chí chấm điểm cửa hàng với từng thang điểm nhằm mục đích so sánh KPI giữa các cửa hàng với nhau.",hrmleavesetting_description:"Thiết lập thời gian nghỉ phép mặc định và người duyệt đơn xin nghỉ phép.",productitem_description:"Quản lý sản phẩm, hàng hóa bằng việc thêm mới hoặc chỉnh sửa sản phẩm đã có.",productcategory_description:"Thiết lập danh mục cho sản phẩm.",promotion_description:"Thiết lập chương trình khuyến mãi trong quá trình bán hàng với nhiều cách thức.",productunit_description:"Thiết lập đơn vị tính cho sản phẩm. Ví dụ: cái, đôi, chiếc...",vendor_description:"Thiết lập thương hiệu cho sản phẩm.",supplier_description:"Quản lý nhà cung cấp sản phẩm về thông tin liên hệ của nhà cung cấp.",stocklink_description:"Thiết lập combo bán hàng, một combo có thể có nhiều sản phẩm với số lượng tùy biến.",warehouse_description:"Thiết lập nhà kho để lưu trữ và theo dõi số lượng tồn của hàng hóa, sản phẩm.",shippingmethod_description:"Thiết lập kết nối với nhà vận chuyển giao hàng khi có đơn hàng phát sinh như Giao hàng nhanh, Bưu điện, Shipchung,...",orderorigin_description:"Thiết lập cấu hình nguồn đơn hàng khi có đơn hàng phát sinh.",cancelreason_description:"Thiết lập các lý do hủy để chọn khi một đơn hàng bị hủy.",websiteintegration_description:"Thiết lập các API  kết nối với các website của Haravan, Bizweb, Shopify, Woocommerce, Facebook,…để quản lý đơn hàng, tồn kho và sản phẩm.",customertype_description:"Là tập hợp các khách hàng có cùng tính cách, đặc tính riêng biệt để từ đó bạn tìm hiểu và đưa ra những phương pháp tiếp cận khách hàng phù hợp.",customerstatus_description:"Là tình trạng của khách hàng trong một khoảng thời gian hoạt động nhất định.",customerorigin_description:"Là nơi phân loại khách hàng theo từng nguồn khác nhau dựa trên đặc điểm chung khi mua hàng.",customersegment_description:"Phân loại và sắp xếp khách hàng vào từng nhóm dựa trên nhu cầu và hành vi của khách hàng nhằm để khuyến mãi và marketing.",customerpointrule_description:"Thiết lập công thức tính điểm tích lũy cho khác hàng xảy ra khi khách hàng giao dịch với công ty.",crmemail_description:"Xem lại tất cả lịch sử gửi email đến khách hàng.",crmsms_description:"Xem lại tất cả lịch sử gửi tin nhắn đến khách hàng.",cashflowaccount_description:"Thiết lập tài khoản ngân hàng để quản lý quá trình thu chi, các giao dịch xảy ra giữa các đối tác, khách hàng và công ty.",cashflowtypein_description:"Thiết lập một số loại phiếu chi nhằm mục đích gom nhóm tất cả các phiếu thu lại theo từng loại đã thiết lập trước.",cashflowtypeout_description:"Thiết lập một số loại phiếu thu nhằm mục đích gom nhóm tất cả các phiếu thu lại theo từng loại đã thiết lập trước,",permission_description:"Phân quyền để nhân viên truy cập vào hệ thống cũng như thao tác với từng chức năng khi thêm mới một nhân viên vào công ty.",general_description:"Thiết lập đơn vị tiền tố cho đơn hàng và khối lượng mặc định cho từng sản phẩm.",ordergeneral_description:"Thiết lập định dạng in đơn hàng và gắn tag ghi chú mặc định cho đơn hàng.",webhook_description:"Cài đặt webhook đến hệ thống của bạn cho các thay đổi dữ liệu như đơn hàng, khách hàng...",pipeline_description:"Cài đặt các phễu kinh doanh, các stage trong phễu để quản lý luồng thông tin, đơn hàng.",cashflowgeneral_description:"Thiết lập dđịnh dạng in phiếu thu và phiếu chi              ",inventory_description:"Thiết lập cấu hình cho phép xuất kho tự động hay không khi có đơn hàng mới phát sinh.",inventory_monitor_description:"Cài đặt các hạng mức tồn kho để thiết lập chế độ cảnh bảo tồn kho của sản phẩm.",pos_description:"Thiết lập các chức năng đối với bán hàng tại cửa hàng (POS).",menulink_description:"Tùy biến top menu công ty với các liên kết hoặc nhúng (iframe) website bên ngoài vào hệ thống này.",cashflowtab_description:"Thiết lập định dạng in phiếu thu và phiếu chi.",customerfailreason:"Lý do khách hàng hủy hợp tác",customerfailreason_description:"Thiết lập các lý do hủy hợp tác để chọn khi khách hàng hủy hợp tác",planbutton:"Tính năng & thanh toán",appandapi:"Quản lý API Key"}};return new e({lang:t})}),define("companymodule",["pref"],function(e){return{modules:[],modulegroupdisabled:[],MODULE_GROUP_TEAMWORK:1,MODULE_GROUP_HRM:3,MODULE_GROUP_SALE:5,MODULE_GROUP_CRM:7,MODULE_GROUP_INVENTORY:9,MODULE_GROUP_ACCOUNTING:11,MODULE_GROUP_ECOMMERCE:13,MODULE_GROUP_BOOKING:15,isInit:!1,moduleMapping:{mail:11,project:13,file:14,blog:15,salary:21,checkin:22,employeepoint:23,storechecklist:24,leave:25,workscheduling:26,elearning:27,order:31,pos:32,combo:33,promotion:34,couponvoucher:35,pipeline:38,customer:41,newsletter:42,sms:44,facebookinbox:46,facebookcomment:47,zaloshop:48,customerpoint:49,inventorytrack:51,inventorycheck:52,inventorytransfer:53,inventoryalert:54,purchaseorder:55,productcost:56,serialnumber:57,cashflow:61,ecomplatform:72,shippingservice:73,menulink:81,booking:82,ecommerce:91,landingpage:92},init:function(e,t){e.length>0?this.modules=e.split(","):this.modules=[],void 0!==t&&t.length>0?this.modulegroupdisabled=t.split(","):this.modulegroupdisabled=[]},has:function(t){var n=!1;return this.isInit||(this.init(e.get("companymodule")),this.isInit=!0),this.moduleMapping.hasOwnProperty(t)&&$.inArray(this.moduleMapping[t]+"",this.modules)>=0&&(n=!0),n},isGroupDisabled:function(t){var n=!1;return this.isInit||(this.init(e.get("companymodule"),e.get("companymodulegroupdisabled")),this.isInit=!0),$.inArray(t+"",this.modulegroupdisabled)>=0&&(n=!0),n}}}),define("models/company",["pref","basemodel","language/company"],function(e,t,n){var a=t.extend({urlRoot:"v1/companies",PAYING_TYPE_MOTHLY_CREDIT:0,PAYING_TYPE_CONTRACT:1,getSetting:function(e,t){var n=this.urlRoot+"/setting";$.ajax({url:n,type:"GET",data:e,success:function(e){t(e)},error:function(e){}})},geEmailSetting:function(e){var t=this.urlRoot+"/emailsetting";$.ajax({url:t,type:"GET",data:{},success:function(t){e(t)}})},getPriceFeature:function(e,t){var n=this.urlRoot+"/getprice?company_id="+t;$.ajax({url:n,type:"GET",data:{},success:function(t){e(t)}})},getInitInfo:function(e){var t=this.urlRoot+"/init";$.ajax({url:t,type:"GET",data:e.query,success:e.success,error:e.error})},saveSetting:function(e,t,n){n.action="undefined"!=typeof n.action?"/"+n.action:"";var a=this.urlRoot+n.action;$.ajax({url:a,type:"POST",data:e,success:function(e,n,a){"function"!=typeof t.success||201!=a.status&&200!=a.status||t.success(e,a),"function"!=typeof t.error||422!=a.status&&422!=a.status||t.error(e,a)},error:function(e,n,a){"function"==typeof t.error&&t.error(e)},complete:function(e){"function"==typeof t.complete&&t.complete(e)}})},putData:function(e){var t=this.urlRoot+e.action;$.ajax({url:t,type:"PUT",data:e.data,success:function(t,n,a){"function"==typeof e.success&&e.success(t,a)},error:function(t){"function"==typeof e.error&&e.error(t)},complete:function(t){"function"==typeof e.complete&&e.complete(t)}})},postData:function(e){var t=this.urlRoot+e.action;$.ajax({url:t,type:"POST",data:e.data,success:function(t,n,a){"function"==typeof e.success&&e.success(t,a)},error:function(t){"function"==typeof e.error&&e.error(t)},complete:function(t){"function"==typeof e.complete&&e.complete(t)}})},getListIconLogin:function(){return[{code:this.ICON_LOGIN_RESTAURANT,text:n.t("icon_login_restaurant")},{code:this.ICON_LOGIN_STORE,text:n.t("icon_login_store")}]},isNew:function(){return 0==parseInt(e.get("planoffice"))&&0==parseInt(e.get("planstore"))&&0==parseInt(e.get("istrial"))&&parseInt(e.get("uid"))==parseInt(e.get("owner"))},submitTrial:function(t){$.ajax({url:this.urlRoot+"/"+e.get("cid")+"/plan",type:"PUT",data:t.data,success:t.success,error:t.error,complete:t.complete})},ICON_LOGIN_RESTAURANT:1,ICON_LOGIN_STORE:3,getTypeSettingEmailList:function(){return[{code:this.SETTING_EMAIL_SMTP,text:n.t("smtp")},{code:this.SETTING_EMAIL_AMAZONSES,text:n.t("amazonses")}]},getTypeSettingEmailName:function(e){e=$.trim(e);var t=this.getTypeSettingEmailList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={code:e,text:"",color:""}),t},getSMSetting:function(e){var t=this.urlRoot+"/smssetting";$.ajax({url:t,type:"GET",data:{},success:function(t){e(t)}})},getSmsProviderlList:function(){return[{code:this.SMS_PROVIDER_ESMSVN,text:n.t("esms")},{code:this.SMS_PROVIDER_VHT,text:n.t("vht")},{code:this.SMS_PROVIDER_VIETGUYS,text:n.t("vietguys")}]},SETTING_EMAIL_SMTP:"smtp",SETTING_EMAIL_AMAZONSES:"amazonses",SMS_PROVIDER_ESMSVN:"esms",SMS_PROVIDER_VHT:"vht",SMS_PROVIDER_VIETGUYS:"vietguys"});return a}),define("models/companyonboard",["pref","basemodel"],function(e,t){var n=t.extend({urlRoot:"v1/companyonboards",STATUS_ENABLE:1,STATUS_DISABLED:3,STATUS_COMPLETED:5,PLAN_SALE:1,PLAN_HRM:2,PLAN_SALE_HRM:4,STEP_SALE_INIT:101,STEP_SALE_EMPLOYEE:103,STEP_SALE_PRODUCT:105,STEP_SALE_INVENTORY:107,STEP_SALE_CUSTOMER:109,STEP_SALE_CASHFLOW:111,STEP_SALE_ORDER:113,STEP_HRM_INIT:201,STEP_HRM_EMPLOYEE:203,STEP_HRM_FILE:205,STEP_HRM_CHECKIN:207,STEP_HRM_PROJECT:209,STEP_HRM_MAIL:211,STEP_HRM_POINT:213,getOnboard:function(e){var t=this.urlRoot+"/bycompany";$.ajax({url:t,type:"GET",data:e.query,success:e.success,error:e.error})},getStepStats:function(e){var t=this.urlRoot+"/stepstats";$.ajax({url:t,type:"GET",data:e.query,success:e.success,error:e.error,complete:e.complete})},commitStep:function(e){var t=this.urlRoot+"/commit";$.ajax({url:t,type:"POST",data:e.data,success:e.success,error:e.error})}});return n}),define("models/notifycount",["basemodel","backbone","setting","pref"],function(e,t,n,a){var i=e.extend({urlRoot:"v1/notifycounts",getUserCount:function(e){parseInt(a.get("cid"))>0&&parseInt(a.get("uid"))>0&&$.ajax({url:this.urlRoot+"?company_id="+a.get("cid")+"&user_id="+a.get("uid"),success:e.success,error:e.error,complete:e.complete})},resetCount:function(e){$.ajax({type:"put",url:this.urlRoot+"/resetcount",data:{company_id:a.get("cid"),user_id:a.get("uid"),type:e.type},success:e.success,error:e.error,complete:e.complete})}});return i}),define("collections/notify",["basecollection","models/notify"],function(e,t){var n=e.extend({url:"v1/notifies",model:t});return n}),define("components/notify/widgetitem",["react","helper","eventbus","models/notify","models/user","language/default","pref"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"NotifyWidgetItemComponent",notifyobj:{id:0,icon:"",url:"",text:""},clickHandler:function(t){n.trigger("notifywidget:hide"),(new a).redirect(this.notifyobj,(new a).READSECTION_WIDGET),$(e.findDOMNode(this)).addClass("read")},doDetailHandler:function(e){e.preventDefault(),n.trigger("notifypageheader:unmountwidget"),(new a).redirect(this.notifyobj,(new a).READSECTION_WIDGET)},markasReadHandler:function(t){t.preventDefault(),t.stopPropagation(),(new a).markAsRead(this.notifyobj,(new a).READSECTION_WIDGET),$(e.findDOMNode(this)).addClass("read")},componentWillUpdate:function(){},componentWillUnmount:function(){$(e.findDOMNode(this.refs.markasread)).unbind("click",this.markasReadHandler)},componentWillMount:function(){this.notifyobj=(new a).parseInfo(this.props.data)},componentDidMount:function(){var n=this;new i({id:this.props.data.creator_id}).fetch({success:function(a,i){$(e.findDOMNode(n.refs.avatar)).attr("src",t.getAvatarPath(i.avatar)),$(e.findDOMNode(n.refs.from)).text(i.fullname+" ")}}),$(e.findDOMNode(this.refs.markasread)).bind("click",this.markasReadHandler)},render:function(){return e.createElement("li",{className:"wigetitem "+(this.props.data.is_read?"read":""),"data-id":this.props.data.id,onClick:this.doDetailHandler},e.createElement("span",{title:r.t("readed"),className:"markasread hideonsmall",ref:"markasread"}),e.createElement("img",{ref:"avatar",src:t.getAvatarPath(""),className:"ui avatar"}),e.createElement("strong",{ref:"from"}),e.createElement("span",{ref:"summary",dangerouslySetInnerHTML:{__html:this.notifyobj.text}}),e.createElement("span",{className:"time"},t.relativeTime(this.props.data.date_created)))}});return s}),define("components/notify/widget",["react","backbone","helper","eventbus","collections/notify","language/notify","models/notify","models/notifycount","models/user","components/notify/widgetitem","pref"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"NotifyWidgetComponent",getInitialState:function(){return{items:[]}},idbefore:0,loadingDataLock:!1,needLoadDataFromShow:!0,lastScrollTop:0,showHandler:function(){$(e.findDOMNode(this)).show(),a.trigger("chatwidget:hide"),this.needLoadDataFromShow&&this.loadData()},hideHandler:function(){$(e.findDOMNode(this)).hide()},toggleHandler:function(){$(e.findDOMNode(this)).is(":visible")?this.hideHandler():this.showHandler()},loadData:function(){this.needLoadDataFromShow=!1;var t=this;this.loadingDataLock||(this.loadingDataLock=!0,n.loaderAppend($(e.findDOMNode(this.refs.header))),(new i).fetch({data:{company_id:d.get("cid"),owner_id:d.get("uid"),id_before:this.id_before,limit:10},success:function(e,n){$.each(n.items,function(e,n){t.id_before=n.id}),t.setState({items:t.state.items.concat(n.items)})},complete:function(){t.loadingDataLock=!1,n.loaderRemove($(e.findDOMNode(t.refs.header)))}}))},resetNotificationHandler:function(e){e.preventDefault(),a.trigger("notifywidget:hide"),(new s).resetCount({type:"notify",success:function(e){n.showSuccess(r.t("clearSuccess")),a.trigger("notifypageheader:clearbadgenumber")},error:function(){alert("error_reset_notification")}})},settingClickHandler:function(e){e.stopPropagation()},componentWillUpdate:function(){},componentWillUnmount:function(){a.off("notifywidget:show",this.showHandler),a.off("notifywidget:hide",this.hideHandler),a.off("notifywidget:toggle",this.toggleHandler)},componentDidMount:function(){this.hideHandler();var i=this;a.on("notifywidget:show",this.showHandler),a.on("notifywidget:hide",this.hideHandler),a.on("notifywidget:toggle",this.toggleHandler);var r=n.getFullHeight()/2;n.isSmallScreen()&&(r=n.getFullHeight(),$(e.findDOMNode(this)).width($(window).width())),$(e.findDOMNode(this.refs.notifywidgetbody)).height(r).niceScroll({autohidemode:!0,cursoropacitymax:.5,preservenativescrolling:!1,touchbehavior:!1,cursordragontouch:!0,preventmultitouchscrolling:!1}),$(e.findDOMNode(this.refs.notifywidgetbody)).bind("scroll",function(e){var t=$(this).scrollTop();t>i.lastScrollTop&&$(this).scrollTop()+$(this).innerHeight()+50>=$(this)[0].scrollHeight&&i.loadData(),i.lastScrollTop=t}),$(e.findDOMNode(this.refs.resetbutton)).fastClick(function(e){a.trigger("notifypageheader:unmountwidget"),i.resetNotificationHandler(e)}),$(e.findDOMNode(this.refs.configbutton)).fastClick(function(e){e.preventDefault(),i.hideHandler(),a.trigger("notifypageheader:unmountwidget"),t.history.navigate("profile/notification",{trigger:!0})}),$(e.findDOMNode(this.refs.listnotificationbutton)).fastClick(function(e){t.history.navigate("#notify",{trigger:!0}),i.hideHandler()}),this.showHandler()},render:function(){return e.createElement("div",{id:"notifywidget"},e.createElement("h3",{ref:"header"},r.t("dashboard"),e.createElement("a",{className:"item",href:"#profile/notification",ref:"configbutton"},r.t("setting")),e.createElement("span",{className:"item"}," · "),e.createElement("a",{className:"item",href:"#",ref:"resetbutton"},e.createElement("span",null,r.t("tick_read_all")))),e.createElement("ul",{ref:"notifywidgetbody"},this.state.items.map(function(t,n){return e.createElement(c,{key:t.id,data:t})})),e.createElement("a",{href:"#notify",id:"notifywidgetfooter",ref:"listnotificationbutton"},r.t("view_all")))}});return u}),define("components/notify/pageheader",["react","backbone","helper","eventbus","models/user","models/notify","models/notifycount","components/notify/widget","pref"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"NotifyPageHeaderComponent",loadNotificationCountInternal:5e3,isWidgetRenderred:!1,showDesktopNotification:function(e,t){var a=function(){(new r).redirect(t,(new r).READSECTION_PUSH),window.focus(),this.close()};n.desktopNotify(n.getAvatarPath(e.avatar),e.fullname,n.stripTags(t.text),{},a)},showBeeperNotification:function(e,t){var i={id:t.id,icon:t.icon,url:t.url,subject:e.fullname,text:n.stripTags(t.text)};a.trigger("beeper:additem",i)},newPushNotificationHandler:function(e){var t=this,n=(new r).parseInfo(e);n.url.length>0&&(this.increaseBadgeNumber(),new i({id:e.creator_id}).fetch({success:function(e,a){t.showDesktopNotification(a,n),t.showBeeperNotification(a,n)}}))},countNotificationHandler:function(e){this.loadNotificationCount()},updateBadgeNumber:function(t){if(a.trigger("notification:updatebadgenumber",t),t>0){var n=t;t>10&&(n="10+"),$(e.findDOMNode(this.refs.badge)).text(n).show()}else $(e.findDOMNode(this.refs.badge)).text(t).hide()},increaseBadgeNumber:function(){var t=parseInt($(e.findDOMNode(this.refs.badge)).text());t++,this.updateBadgeNumber(t)},decreaseBadgeNumber:function(){var t=parseInt($(e.findDOMNode(this.refs.badge)).text());t--,this.updateBadgeNumber(t)},clearBadgeNumber:function(){this.updateBadgeNumber(0)},unmountWidgetHandler:function(){this.isWidgetRenderred&&(this.isWidgetRenderred=!1,n.isSmallScreen()?e.unmountComponentAtNode(document.getElementById("notifywidgetexternal")):e.unmountComponentAtNode(e.findDOMNode(this.refs.notifywrapper)))},loadNotificationCountIsBusy:!1,loadNotificationCount:function(){var e=this;this.loadNotificationCountIsBusy||(this.loadNotificationCountIsBusy=!0,(new o).getUserCount({success:function(t){t.items.length>0&&e.updateBadgeNumber(t.items[0].new_notify)},complete:function(){e.loadNotificationCountIsBusy=!1}}))},componentWillUnmount:function(){a.off("notifypageheader:newpushnotification",this.newPushNotificationHandler),a.off("notifypageheader:countnotification",this.countNotificationHandler),a.off("notifypageheader:decreasebadgenumber",this.decreaseBadgeNumber),a.off("notifypageheader:clearbadgenumber",this.clearBadgeNumber),a.off("notifypageheader:unmountwidget",this.unmountWidgetHandler)},componentDidMount:function(){var t=this;this.loadNotificationCount(),$(document).click(function(e){a.trigger("notifywidget:hide")}),$(e.findDOMNode(this.refs.notificationtoggle)).fastClick(function(a){a.preventDefault(),a.stopPropagation(),t.isWidgetRenderred?(n.isSmallScreen()?e.unmountComponentAtNode(document.getElementById("notifywidgetexternal")):e.unmountComponentAtNode(e.findDOMNode(t.refs.notifywrapper)),t.isWidgetRenderred=!1):(n.isSmallScreen()?e.render(e.createElement(s,null),document.getElementById("notifywidgetexternal")):e.render(e.createElement(s,null),e.findDOMNode(t.refs.notifywrapper)),t.isWidgetRenderred=!0)}),a.on("notifypageheader:newpushnotification",this.newPushNotificationHandler),a.on("notifypageheader:countnotification",this.countNotificationHandler),a.on("notifypageheader:decreasebadgenumber",this.decreaseBadgeNumber),a.on("notifypageheader:clearbadgenumber",this.clearBadgeNumber),a.on("notifypageheader:unmountwidget",this.unmountWidgetHandler)},render:function(){return e.createElement("div",{id:"navnotification",ref:"navnotification",className:"ui top right pointing dropdown"},e.createElement("a",{className:"toggler",href:"#",ref:"notificationtoggle"},e.createElement("i",{className:"icon tc-bell"}),e.createElement("span",{className:"badge hide",ref:"badge"},"0")),e.createElement("div",{ref:"notifywrapper"}))}});return c}),define("components/headingbreadcrumb",["react","backbone","pref","helper","eventbus","language/default"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"HeadingBreadcrumbComponent",getDefaultProps:function(){return{rootlink:"",roottext:"",link:"",text:"",subtext:"",custom_subtext:null,enableReloadSameLink:!1,enableReloadSameLinkEvent:"list:reload",headingfull:!1,hidetotalinbreadcrumb:!0,total:"",breadcrumbMoreClass:""}},getInitialState:function(){return{}},formatNumberString:function(){var t=this.props.total+"";return t.length>0?e.createElement("span",{className:"number"},a.numberFormat(this.props.total)):""},componentDidMount:function(){var n=this;if(a.isSmallScreen()){var r=$(window).width()-100;this.props.headingfull&&(r-=50),$(e.findDOMNode(this)).width(r)}this.props.enableReloadSameLink&&$(e.findDOMNode(this.refs.link)).fastClick(function(e){var a=t.history.fragment,r=n.props.link.replace("#","");r==a&&(e.preventDefault(),i.trigger(n.props.enableReloadSameLinkEvent,{}))}),a.isSmallScreen()||a.initMyTip($(e.findDOMNode(this)).find(".mytip_onpage"),null,null,!1)},renderMobile:function(){return e.createElement("div",{className:"pull-left ui breadcrumb "+this.props.breadcrumbMoreClass},this.props.rootlink.length>0&&this.props.roottext.length>0?e.createElement("a",{ref:"rootlink",href:this.props.rootlink,className:"breadcrumb mobileback section",title:this.props.roottext},e.createElement("i",{className:"icon tc-left"})):"",e.createElement("a",{ref:"link",href:this.props.link,className:this.props.subtext.length>0?"section active":"section"},this.props.text," ",this.props.hidetotalinbreadcrumb||0!=this.props.subtext.length?"":this.formatNumberString()))},renderDesktop:function(){return e.createElement("div",{className:"pull-left ui breadcrumb "+this.props.breadcrumbMoreClass},this.props.rootlink.length>0&&this.props.roottext.length>0?e.createElement("a",{ref:"rootlink",href:this.props.rootlink,className:"section active"},this.props.roottext):"",this.props.rootlink.length>0&&this.props.roottext.length>0?e.createElement("i",{className:"right tc-right icon divider"}):"",e.createElement("a",{ref:"link",href:this.props.link,className:this.props.subtext.length>0?"section active":"section"},this.props.text," ",this.props.hidetotalinbreadcrumb||0!=this.props.subtext.length?"":this.formatNumberString()),null!=this.props.custom_subtext?e.createElement("i",{
className:"right tc-right icon divider"}):"",null!=this.props.custom_subtext?e.createElement("a",{className:"section"},this.props.custom_subtext," ",this.props.hidetotalinbreadcrumb?"":this.formatNumberString()):"")},render:function(){return a.isSmallScreen()?this.renderMobile():this.renderDesktop()}});return o}),define("language/daterangepicker",["baselanguage"],function(e){var t={vn:{applyLabel:"Chọn",cancelLabel:"Hủy",fromLabel:"Từ",toLabel:"Đến",customRangeLabel:"Tùy chọn",daysOfWeekSun:"CN",daysOfWeekMon:"T2",daysOfWeekTue:"T3",daysOfWeekWed:"T4",daysOfWeekThu:"T5",daysOfWeekFri:"T6",daysOfWeekSat:"T7",monthNamesJan:"Tháng 1",monthNamesFeb:"Tháng 2",monthNamesMar:"Tháng 3",monthNamesApr:"Tháng 4",monthNamesMay:"Tháng 5",monthNamesJun:"Tháng 6",monthNamesJul:"Tháng 7",monthNamesAug:"Tháng 8",monthNamesSep:"Tháng 9",monthNamesOct:"Tháng 10",monthNamesNov:"Tháng 11",monthNamesDec:"Tháng 12",rangesToday:"Hôm nay",rangesYesterday:"Hôm qua",rangesLastDay:"%number% ngày trước",rangesThisMonth:"Tháng này",rangesLastMonth:"Tháng trước"},en:{applyLabel:"Chọn",cancelLabel:"Hủy",fromLabel:"Từ",toLabel:"Đến",customRangeLabel:"Tùy chọn",daysOfWeekSun:"CN",daysOfWeekMon:"T2",daysOfWeekTue:"T3",daysOfWeekWed:"T4",daysOfWeekThu:"T5",daysOfWeekFri:"T6",daysOfWeekSat:"T7",monthNamesJan:"Tháng 1",monthNamesFeb:"Tháng 2",monthNamesMar:"Tháng 3",monthNamesApr:"Tháng 4",monthNamesMay:"Tháng 5",monthNamesJun:"Tháng 6",monthNamesJul:"Tháng 7",monthNamesAug:"Tháng 8",monthNamesSep:"Tháng 9",monthNamesOct:"Tháng 10",monthNamesNov:"Tháng 11",monthNamesDec:"Tháng 12",rangesToday:"Hôm nay",rangesYesterday:"Hôm qua",rangesLastDay:"%number% ngày trước",rangesThisMonth:"Tháng này",rangesLastMonth:"Tháng trước"}};return new e({lang:t})}),define("components/headingdatepicker",["react","language/daterangepicker","eventbus"],function(e,t,n){var a=e.createClass({displayName:"HeadingDatePickerComponent",options:{format:"DD/MM",timePicker:!0,timePicker24Hour:!0,timePicker12Hour:!1,timePickerIncrement:1,ranges:{},locale:{separator:" to ",applyLabel:t.t("applyLabel"),cancelLabel:t.t("cancelLabel"),fromLabel:t.t("fromLabel"),toLabel:t.t("toLabel"),customRangeLabel:t.t("customRangeLabel"),daysOfWeek:[t.t("daysOfWeekSun"),t.t("daysOfWeekMon"),t.t("daysOfWeekTue"),t.t("daysOfWeekWed"),t.t("daysOfWeekThu"),t.t("daysOfWeekFri"),t.t("daysOfWeekSat")],monthNames:[t.t("monthNamesJan"),t.t("monthNamesFeb"),t.t("monthNamesMar"),t.t("monthNamesApr"),t.t("monthNamesMay"),t.t("monthNamesJun"),t.t("monthNamesJul"),t.t("monthNamesAug"),t.t("monthNamesSep"),t.t("monthNamesOct"),t.t("monthNamesNov"),t.t("monthNamesDec")],firstDay:1},opens:"left",applyClass:"ui button green",cancelClass:"ui button secondary"},getDefaultProps:function(){return{start:(new Date).getTime()/1e3,end:(new Date).getTime()/1e3,onShow:function(){},onShowCalendar:function(){},callBack:function(){console.log("Daterange picker init but never using callback function!")}}},componentDidMount:function(){var n=this;this.options.ranges[t.t("rangesToday")]=[moment({h:0,m:0,s:0,ms:0}),moment({h:23,m:59,s:59,ms:999})],this.options.ranges[t.t("rangesYesterday")]=[moment({h:0,m:0,s:0,ms:0}).subtract(1,"days"),moment({h:23,m:59,s:59,ms:999}).subtract(1,"days")],this.options.ranges[t.t("rangesLastDay").replace("%number%",7)]=[moment({h:0,m:0,s:0,ms:0}).subtract(7,"days"),moment({h:23,m:59,s:59,ms:999}).subtract(1,"days")],this.options.ranges[t.t("rangesLastDay").replace("%number%",30)]=[moment({h:0,m:0,s:0,ms:0}).subtract(30,"days"),moment({h:23,m:59,s:59,ms:999}).subtract(1,"days")],this.options.ranges[t.t("rangesThisMonth")]=[moment({h:0,m:0,s:0,ms:0}).startOf("month"),moment().endOf("month")],this.options.ranges[t.t("rangesLastMonth")]=[moment({h:0,m:0,s:0,ms:0}).subtract(1,"month").startOf("month"),moment({h:23,m:59,s:59,ms:999}).subtract(1,"month").endOf("month")];var a=this.props.start,i=this.props.end;0==a.length&&(a=moment({h:0,m:0,s:0,ms:0}).unix()),0==i.length&&(i=moment({h:23,m:59,s:59,ms:999}).unix()),this.options.startDate=moment.unix(a),this.options.endDate=moment.unix(i);var r=$(e.findDOMNode(n.refs.bootstrap_datepicker_input)).daterangepicker(this.options,this.props.callBack).data("daterangepicker"),o=r.format,s=this.options.startDate.format(o),l=this.options.endDate.format(o),c=r.separator,d=this.options.singleDatePicker||!1;0==this.props.start&&(s=""),0==this.props.end&&(l="");var u="";d?u=s:s==l?""!=s&&(u=this.options.startDate.format("DD/MM/YYYY")):u=s+c+this.options.endDate.format("DD/MM/YYYY"),r.element.context.value=u,$(r.element.context).on("show.daterangepicker",this.props.onShow).on("showCalendar.daterangepicker",this.props.onShowCalendar)},getDatePicker:function(){return $(e.findDOMNode(this.refs.bootstrap_datepicker_input)).data("daterangepicker")},getDateStart:function(){return $(e.findDOMNode(this.refs.bootstrap_datepicker_input)).data("daterangepicker").startDate.unix()},getDateEnd:function(){return $(e.findDOMNode(this.refs.bootstrap_datepicker_input)).data("daterangepicker").endDate.unix()},show:function(){$(e.findDOMNode(this.refs.bootstrap_datepicker_input)).trigger("click")},render:function(){return e.createElement("div",{ref:"bootstrap_datepicker",className:"ui right icon input bootstrap_datepicker_wrapper"},e.createElement("input",{ref:"bootstrap_datepicker_input",type:"text"}),e.createElement("i",{className:"icon tc-calendar"}))}});return a}),define("components/mixin/listsearch",["react","backbone","helper","querystring"],function(e,t,n,a){return{sortableInit:!1,doFilter:function(e,n,i,r){i=i||"",r="undefined"==typeof r||r,this.filters[e]=n,t.history.navigate(a.getPath(this.filters,i),{trigger:r})},doFilters:function(e,n,i){n=n||"",i&&(this.filters={});for(var r in e)e.hasOwnProperty(r)&&(this.filters[r]=e[r]);t.history.navigate(a.getPath(this.filters,n),{trigger:!0})},doFilterDate:function(e,n){this.filters.date_started=e.unix(),this.filters.date_ended=n.unix(),t.history.navigate(a.getPath(this.filters),{trigger:!0})},doSort:function(e,n){this.filters.sort_by=e,this.filters.sort_type=n,t.history.navigate(a.getPath(this.filters),{trigger:!0})},doFilterKeyword:function(t){console.log(this.refs);var n=$(e.findDOMNode(this.refs[t])).val();this.doFilter(t,n)},removeFilter:function(e,n){n="undefined"==typeof n||n,this.filters[e]=null,"sort_by"==e?this.filters.sort_type=null:"date_started"==e&&this.filters.hasOwnProperty("date_ended")&&(this.filters.date_ended=null),t.history.navigate(a.getPath(this.filters),{trigger:n})},searchboxToggleHandler:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.searchbutton)).toggleClass("active"),$(e.findDOMNode(this.refs.searchbox)).toggle(),$(e.findDOMNode(this.refs.searchbox)).is(":visible")&&$(e.findDOMNode(this.refs.keyword)).focus()},keywordPressHandler:function(e,t){13==t.keyCode&&this.doFilterKeyword(e)},initSortable:function(){var t=!1;if("undefined"!=typeof this.url&&""!=this.url&&"undefined"!=typeof this.state.total&&(t=n.isZeroData(this.url,this.state.total)),!this.sortableInit&&!t){this.sortableInit=!0;var a=this.filters,i=this;$(e.findDOMNode(this)).on("click",".sortable",function(e){e.preventDefault();var t=$(this).attr("data-sortby");t==a.sort_by?""==a.sort_type||"DESC"==a.sort_type?i.doSort(t,"ASC"):i.doSort(t,"DESC"):i.doSort(t,"ASC")}),null!==a.sort_by&&$(e.findDOMNode(this)).find(".sortable").each(function(){var e=$(this).attr("data-sortby");if(e==a.sort_by){var t=a.sort_type,n="tc-sortdesc";"ASC"==t&&(n="tc-sortasc");var i='<i class="icon sorticon '+n+'"></i>';$(this).append(i)}})}}}}),define("components/querytag",["react","backbone","eventbus","language/default"],function(e,t,n,a){var i=e.createClass({displayName:"QueryTagComponent",getDefaultProps:function(){return{field:"",name:"",value:"",querytaghide:[]}},getInitialState:function(){return{multiple:!1,textItems:[],text:this.props.value,hover:!1}},clickHandler:function(e){e.preventDefault(),this.props.callback(this.props.field)},updateTextHandler:function(t){t.field==this.props.field&&($(e.findDOMNode(this.refs.text)).text(t.text),n.trigger("listsearch:updatesize"))},textItems:[],updateMultipleItemHandler:function(e){e.field==this.props.field&&(-1==$.inArray(e.text,this.textItems)&&this.textItems.push(e.text),this.setState({multiple:!0,textItems:this.textItems}),n.trigger("listsearch:updatesize"))},resetMultipleItemHandler:function(e){e.field==this.props.field&&(this.textItems=[])},mouseoverHandler:function(e){e.preventDefault(),e.stopPropagation()},mouseoutHandler:function(e){e.preventDefault(),e.stopPropagation()},componentWillUnmount:function(){n.off("querytag:updatetext",this.updateTextHandler),n.off("querytag:updatemultipleitem",this.updateMultipleItemHandler),n.off("querytag:resetmultipleitem",this.resetMultipleItemHandler)},componentDidMount:function(){n.on("querytag:updatetext",this.updateTextHandler),n.on("querytag:updatemultipleitem",this.updateMultipleItemHandler),n.on("querytag:resetmultipleitem",this.resetMultipleItemHandler),this.props.rendercallback(this.props.field)},render:function(){var t="";return $.inArray(this.props.field,this.props.querytaghide)>=0&&(t="hidden"),e.createElement("span",{className:"ui small orange label tcquerytag "+t},e.createElement("span",{className:"tcquerytext"},this.props.name,": ",e.createElement("strong",{ref:"text"},this.state.multiple?this.state.textItems.join(", "):this.state.text)),e.createElement("i",{className:"tc-cross icon",title:a.t("remove_filter"),onClick:this.clickHandler}))}});return i}),define("components/querytaglist",["react","helper","backbone","eventbus","language/default","components/querytag"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"QueryTagListComponent",getDefaultProps:function(){return{filters:{},lang:{},querytaghide:[]}},componentWillUnmount:function(){},componentDidMount:function(){},render:function(){var t=this,n=[],a=0;$.each(this.props.filters,function(o,s){if(null!=s&&(s+"").length>0&&"sort_type"!=o&&"date_ended"!=o){var l=t.props.lang.t("filter_"+o);if("sort_by"==o)s=t.props.lang.t("sort_"+s)+" ("+i.t("filter_sort_"+t.props.filters.sort_type)+")",l=i.t("filter_sort_by");else if("date_started"==o){l=i.t("filter_date_started");var c=moment.unix(t.props.filters.date_started),d="HH:mm, DD/MM";c.year()!=moment().year()&&(d+="/YYYY");var u=moment.unix(t.props.filters.date_ended),m="HH:mm, DD/MM";u.year()!=moment().year()&&(m+="/YYYY"),s=c.format(d)+"  - "+u.format(m)}a++,n.push(e.createElement(r,{key:o,ref:o,field:o,name:l,value:s,callback:t.props.callback,rendercallback:t.props.rendercallback,querytaghide:t.props.querytaghide}))}});var o={};return a>0&&(o.padding="0 15px 0 15px"),e.createElement("div",{className:"tcquerytaglist",style:o},n)}});return o}),define("components/floatpagination",["react","backbone","language/default"],function(e,t,n){var a=e.createClass({displayName:"FloatPagination",getDefaultProps:function(){return{pagemarker:"##PAGE##",url:"",currentPage:1,totalPage:1,callback:function(e){var n=this.url.replace(this.pagemarker,e);1==e&&(n=n.indexOf("/_s/page/1")>=0?n.replace("/_s/page/1",""):n.replace("/page/1","")),t.history.navigate(n,{trigger:!0})}}},getInitialState:function(){return{currentPage:"undefined"==typeof this.props.currentPage||isNaN(this.props.currentPage)||""==this.props.currentPage?1:this.props.currentPage}},triggerGoToPageAction:function(e){this.props.callback(e)},goToPage:function(e,t){t.preventDefault(),e>0&&e<=this.props.totalPage&&(this.triggerGoToPageAction(e),this.setState({currentPage:e}))},gotoPageShowHandler:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.pagestatus)).hide(),$(e.findDOMNode(this.refs.pagegoto)).show(),$(e.findDOMNode(this.refs.gotopage)).focus()},gotoPageHide:function(){$(e.findDOMNode(this.refs.pagegoto)).hide(),$(e.findDOMNode(this.refs.pagestatus)).show()},gotoInputBlurHandler:function(){var e=this;setTimeout(function(){e.gotoPageHide()},200)},gotoInputKeyUpHandler:function(e){13==e.keyCode&&this.gotoPageSubmitHandler(new $.Event("click"))},gotoPageSubmitHandler:function(t){t.preventDefault(),t.stopPropagation();var n=$(e.findDOMNode(this.refs.gotopage)).val();this.goToPage(n,new $.Event("click")),this.gotoPageHide()},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.gotopageprevious)).fastClick(function(e){t.goToPage($(this).attr("data-gotopage"),e)}),$(e.findDOMNode(this.refs.gotopagenext)).fastClick(function(e){t.goToPage($(this).attr("data-gotopage"),e)}),$(e.findDOMNode(this.refs.pagestatus)).fastClick(this.gotoPageShowHandler),$(e.findDOMNode(this.refs.gotopageSubmit)).fastClick(this.gotoPageSubmitHandler)},render:function(){var t="undefined"==typeof this.props.totalPage||isNaN(this.props.totalPage)?"-":this.props.totalPage,a="undefined"==typeof this.state.currentPage||isNaN(this.state.currentPage)?1:this.state.currentPage;return 0==t&&(a=0),e.createElement("div",{className:"ui pagination small menu"},e.createElement("a",{ref:"gotopageprevious","data-gotopage":parseInt(a)-1,href:"#",className:"item"+(1==a?" disabled":"")},e.createElement("i",{className:"tc-left icon"})),e.createElement("div",{className:"active item center aligned"},e.createElement("a",{ref:"pagestatus",href:"#"},e.createElement("span",null,n.t("page"),"  "),a,e.createElement("span",{className:"total"}," / ",t)),e.createElement("div",{ref:"pagegoto",className:"hide"},e.createElement("div",{className:"ui small action input"},e.createElement("input",{type:"text",ref:"gotopage",onBlur:this.gotoInputBlurHandler,onKeyUp:this.gotoInputKeyUpHandler,plageholder:this.state.currentPage,style:{width:40,borderWidth:0,paddingLeft:5,paddingRight:5,textAlign:"center"}}),e.createElement("button",{className:"ui small teal right labeled icon button",ref:"gotopageSubmit",style:{background:"#ddd",color:"#555",paddingLeft:"10px !important",paddingRight:"45px !important"}},e.createElement("i",{className:"tc-arrowright icon",style:{backgroundColor:"#3498db",color:"#fff",marginTop:"0 !important"}}),"/ ",this.props.totalPage)))),e.createElement("a",{href:"#",ref:"gotopagenext","data-gotopage":parseInt(a)+1,className:"item"+(a==t?" disabled":"")},e.createElement("i",{className:"tc-right icon"})))}});return a}),define("components/headingtab",["react","pref","helper","querystring","eventbus","language/default","components/headingdatepicker","components/mixin/listsearch","components/querytaglist","components/headingbreadcrumb","components/floatpagination"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"HeadingTabComponent",getDefaultProps:function(){return{data:{id:0,name:"",number:"",onClickHandler:function(e){e.preventDefault()}},hidefiltertoggle:!1}},getInitialState:function(){return{active:this.props.data.active,number:this.props.data.number,data:this.props.data}},getTotalString:function(t){var a=t+"";return a.length>0?e.createElement("span",{className:"number"},n.numberFormat(t)):""},toggleActiveHandler:function(e){this.props.data.id==e.id?this.setState({active:!0}):this.setState({active:!1})},onClick:function(e){e.preventDefault(),i.trigger("headingtab:activetoggle",this.props.data),$.isFunction(this.props.data.onClickHandler)&&this.props.data.onClickHandler(e)},componentDidUpdate:function(e,t){this.state.number!=this.props.data.number&&this.setState({number:this.props.data.number})},componentWillUnmount:function(){i.off("headingtab:activetoggle",this.toggleActiveHandler)},componentDidMount:function(){i.on("headingtab:activetoggle",this.toggleActiveHandler)},render:function(){return e.createElement("li",null,e.createElement("a",{href:"#",onClick:this.onClick,className:this.state.active?"active":""},e.createElement("span",null,this.state.data.name),"undefined"!=typeof this.state.number&&(this.state.number+"").length>0?this.getTotalString(this.state.number):""))}});return u}),define("components/heading",["react","pref","helper","language/default","components/headingbreadcrumb","components/headingtab"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"HeadingComponent",getDefaultProps:function(){return{rootlink:"",roottext:"",link:"",text:"",subtext:"",custom_subtext:null,enableReloadSameLink:!1,hidefiltertoggle:!0,hidetab:!1,nomarginbottom:!1,enableReloadSameLinkEvent:"list:reload"}},render:function(){var t=[];this.props.subtext.length>0?t.push({id:0,name:this.props.subtext,total:this.props.total,total:"",active:!0}):t.push({id:0,name:a.t("tab_all"),total:this.props.total,active:!0});var o=25;return this.props.nomarginbottom&&(o=0),e.createElement("div",{className:"heading nopagination"+(this.props.hidetab?" notab":""),style:{marginBottom:o}},e.createElement(i,{hidefiltertoggle:this.props.hidefiltertoggle,enableReloadSameLink:this.props.enableReloadSameLink,enableReloadSameLinkEvent:this.props.enableReloadSameLinkEvent,rootlink:this.props.rootlink,roottext:this.props.roottext,link:this.props.link,text:this.props.text,subtext:this.props.subtext,custom_subtext:this.props.custom_subtext,breadcrumbMoreClass:this.props.hidetab||n.isSmallScreen()?"":"large"}),this.props.hidetab?"":e.createElement("ul",{className:"headingtabs"},t.map(function(t){return e.createElement(r,{key:t.id,data:t})})),this.props.children,e.createElement("div",{style:{clear:"right"}}))}});return o}),define("components/setting/menu",["react","basecontroller","pref","role","querystring","language/setting","companymodule","setting","helper","eventbus","setting","components/heading"],function(e,t,n,a,i,r,o,s,l,c,s,d){var u=e.createClass({displayName:"SettingMenuComponent",menugroups:[{id:"other",text:r.t("company"),groups:[{icon:"map-marker",text:r.t("office"),description:r.t("office_description"),link:"office",roles:"231",modules:""},{icon:"sitemap",text:r.t("department"),description:r.t("department_description"),link:"department",roles:"231",modules:""},{icon:"lock",text:r.t("permission"),description:r.t("permission_description"),link:"setting/role",roles:"231",modules:""},{icon:"users",text:r.t("group"),description:r.t("group_description"),link:"group",roles:"231",modules:"mail"},{icon:"compose",text:r.t("employeepointtopic"),description:r.t("employeepointtopic_description"),link:"employeepointtopic",roles:"264",modules:"employeepoint"},{icon:"calendar-alt",text:r.t("hrmleavesetting"),description:r.t("hrmleavesetting_description"),link:"hrmleave/setting",roles:"231",modules:"leave"}]}],getDefaultProps:function(){return{id:""}},componentDidMount:function(){},render:function(){var t=this,n=[],i=!1,s=null;return $.each(this.menugroups,function(r,l){var c=0,d=[];l.id==t.props.id&&("other"==l.id||"other"!=l.id&&o.has("order"))&&($.each(l.groups,function(n,i){a.hasById(i.roles)&&(0==i.modules.length||o.has(i.modules))&&(d.push(e.createElement("li",{className:"item",key:i.link,id:"settingmenu_"+i.link.replace("/","_")},e.createElement("div",{className:"ui image"},e.createElement("i",{className:"icon tc-"+i.icon})),e.createElement("div",{className:"content"},e.createElement("a",{title:i.description,"data-roles":i.roles,onClick:t.itemClickHandler,href:"#"+i.link},i.text)))),c++)}),s=l),c>0&&(i=!0,n.push(e.createElement("div",{key:l.id,id:"settingmenu_"+l.id},e.createElement("ul",{className:"ui items setting-"+l.id},d))))}),i||n.push(e.createElement("div",{style:{padding:20}},"Công ty bạn không được phép vào chức năng này")),e.createElement("div",{id:"settingpage",className:"ui segments"},e.createElement(d,{text:r.t("heading"),hidefiltertoggle:!0,hidetab:!0}),e.createElement("div",{className:"ui segment"},e.createElement("div",{className:"ui small pointing teal secondary fluid menu pipeline-editmini-menu"},e.createElement("a",{className:"item"+("other"==s.id?" active":""),href:"#setting/menu/id/other"},e.createElement("i",{className:"icon tc-users"}),e.createElement("span",{className:"other"!=s.id?"hideonsmall":""}," ",r.t("company_short")))),e.createElement("br",null),n))}});return u}),define("components/company/trial-modal",["react","helper","backbone","eventbus","pref","models/company","language/company"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"TrialModalComponent",doSubmit:function(){var a=this,s=$(".ui.form",this.getDOMNode());s.addClass("loading");var l=$(e.findDOMNode(this.refs.submit));l.addClass("loading");var c=$(e.findDOMNode(this)).find("input[type='radio']:checked").val(),d=0,u=0;"1"==c?d=1:"2"==c&&(d=1,u=3);var m={company_id:i.get("cid"),creator_id:i.get("uid"),request_trial:1,plan_office:d,plan_store:u};(new r).submitTrial({data:m,success:function(i){t.showSuccess(o.t("update_package_success")),setTimeout(function(){n.history.navigate("user/logout",{trigger:!0})},3e3),$(e.findDOMNode(a.refs.trialmodal)).modal("hide")},error:function(e){t.notifyError(e,o,"Request Error")},complete:function(){}})},showPopup:function(){$(e.findDOMNode(this.refs.trialmodal)).modal({context:this.getDOMNode(),closable:!1,onVisible:function(){$(e.findDOMNode(this)).find(".checkbox").checkbox()},onHidden:function(){a.trigger("pageheader:unmounttrialmodal")}}).modal("show")},componentWillUpdate:function(){this.showPopup()},componentWillUnmount:function(){},componentDidMount:function(){this.showPopup()},render:function(){return e.createElement("div",{id:"chatroomadd-inner"},e.createElement("div",{className:"ui small modal",ref:"trialmodal"},e.createElement("div",{className:"header"},o.t("trial_heading")),e.createElement("div",{className:"content"},e.createElement("div",{className:"ui teal message"},o.t("trial_summary"))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui cancel close button"},o.t("close")),e.createElement("a",{className:"ui green button",href:"javascript: void(0)",ref:"submit",onClick:this.doSubmit},o.t("register")))))}});return s}),define("components/company/trial-modal-readonly",["react","helper","setting","backbone","eventbus","pref","models/company","language/company"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"TrialModalComponent",doSubmit:function(){var n=this,i=$(".ui.form",this.getDOMNode());i.addClass("loading");var l=$(e.findDOMNode(this.refs.submit));l.addClass("loading");var c=$(e.findDOMNode(this)).find("input[type='radio']:checked").val(),d=0,u=0;"1"==c?d=1:"2"==c&&(d=1,u=3);var m={company_id:r.get("cid"),creator_id:r.get("uid"),request_trial:1,plan_office:d,plan_store:u};(new o).submitTrial({data:m,success:function(i){t.showSuccess(s.t("update_package_success")),setTimeout(function(){a.history.navigate("user/logout",{trigger:!0})},3e3),$(e.findDOMNode(n.refs.trialmodal)).modal("hide")},error:function(e){t.notifyError(e,s,"Request Error")},complete:function(){}})},showPopup:function(){$(e.findDOMNode(this.refs.trialmodal)).modal({context:this.getDOMNode(),closable:!0,onVisible:function(){$(e.findDOMNode(this)).find(".checkbox").checkbox()},onHidden:function(){i.trigger("pageheader:unmounttrialmodal")}}).modal("show")},componentWillUpdate:function(){this.showPopup()},componentWillUnmount:function(){},componentDidMount:function(){t.isMobileScreen()&&$("#sidebar").hide(),this.showPopup()},render:function(){var a=s.t("startup"),i={borderWidth:1},o={borderWidth:1};return parseInt(r.get("planstore"))>0?(o.backgroundColor="#3498db",o.color="#fff",a=s.t("saler")):parseInt(r.get("planoffice"))>0&&(i.backgroundColor="#3498db",i.color="#fff",a=s.t("company")),e.createElement("div",{id:"chatroomadd-inner"},e.createElement("div",{className:"ui tiny modal",ref:"trialmodal"},e.createElement("div",{className:"header"},s.t("trial_readonly_heading")),e.createElement("div",{className:"content"},e.createElement("div",{className:"ui warning message"},s.t("trial_readonly_summary")),e.createElement("div",{className:"ui list"},e.createElement("div",{className:"item"},e.createElement("i",{className:"icon tc-tick"}),e.createElement("div",{className:"content"},"Company ID: ",r.get("cid"))),e.createElement("div",{className:"item"},e.createElement("i",{className:"icon tc-tick"}),e.createElement("div",{className:"content"},"User ID: ",r.get("uid"))),e.createElement("div",{className:"item"},e.createElement("i",{className:"icon tc-tick"}),e.createElement("div",{className:"content"},"Company Name: ",r.get("company"))))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic cancel close button"},s.t("close")),t.isPhonegapIos()?null:e.createElement("a",{className:"ui teal button",href:n.wlLandingRooturl+"bang-gia",target:"_blank"},s.t("contact_now")))))}});return l}),define("components/employee/exit",["react","backbone","helper","eventbus","pref","language/employee","language/default","models/employee"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"EmployeeExitComponent",doExitMe:function(){var a=this,o=$(".ui.form",this.getDOMNode());o.addClass("loading");var l=$(e.findDOMNode(this.refs.submit));l.addClass("loading"),(new s).exitMe({company_id:i.get("cid"),creator_id:i.get("uid"),email:$(e.findDOMNode(this.refs.email)).val()},{success:function(i,o){n.showSuccess(r.t("exit_success")),$(e.findDOMNode(a.refs.companyexit)).modal("hide"),t.history.navigate("user/logout",{trigger:!0})},error:function(e){n.notifyError(e,r)},complete:function(){l.removeClass("loading"),o.removeClass("loading")}})},formSubmit:function(){$(e.findDOMNode(this.refs.form)).submit()},showPopup:function(){var t=this;$(e.findDOMNode(this.refs.companyexit)).modal({context:this.getDOMNode(),closable:!0,onVisible:function(){setTimeout(function(){$(e.findDOMNode(t.refs.title)).focus()},200)},onHidden:function(){a.trigger("employee:unmountemployeeexit")}}).modal("show")},closeHandle:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.companyexit)).modal("hide")},componentWillUpdate:function(){this.showPopup()},componentWillUnmount:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.form)).form({fields:{title:{identifier:"email",rules:[{type:"empty",prompt:r.t("error_email_required")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.doExitMe()}}),this.showPopup()},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui small modal",ref:"companyexit"},e.createElement("div",{className:"header"},r.t("exit_me_heading")),e.createElement("div",{className:"content"},e.createElement("div",{className:"ui negative message"},e.createElement("i",{className:"close icon"}),e.createElement("div",{className:"header"},r.t("exit_me_warning_header")),e.createElement("p",null,r.t("exit_me_warning"))),e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"field"},e.createElement("label",null,r.t("email")),e.createElement("input",{type:"text",ref:"email",name:"email"})))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui button",onClick:this.closeHandle},o.t("close")),e.createElement("a",{className:"ui red button",href:"javascript: void(0)",ref:"submit",onClick:this.formSubmit},r.t("exit_me_submit")))))}});return l}),define("socket",["setting","pref","companyresource","eventbus"],function(e,t,n,a){return{alreadyInit:!1,pusher:null,onlinemembers:[],init:function(){var n=this;if(!this.alreadyInit&&parseInt(t.get("cid"))>0&&parseInt(t.get("uid"))>0){this.pusher=new Pusher(e.pusher.key,{encrypted:!0,auth:{headers:{Authorization:t.get("Authorization")}},authEndpoint:e.rooturl+"v1/users/socketchannelauth"});var a=this.pusher.subscribe("presence-c"+t.get("cid"));a.bind("pusher:subscription_succeeded",function(e){n.savePresenceMembers(a.members)}),a.bind("pusher:member_added",function(e){n.savePresenceMembers(a.members)}),a.bind("pusher:member_removed",function(e){n.savePresenceMembers(a.members)});var i=this.pusher.subscribe("private-c"+t.get("cid"));i.bind("event_fetchcompanyresource",this.eventFetchCompanyResource);var r=this.pusher.subscribe("private-c"+t.get("cid")+"-u"+t.get("uid"));r.bind("event_notification",this.eventNotificationData),r.bind("event_countnotification",this.eventCountNotificationData),r.bind("event_customercallpopup",this.eventCustomerCallPopup),this.alreadyInit=!0}},subscribeChannel:function(e){return this.alreadyInit?this.pusher.subscribe(e):null},unsubscribeChannel:function(e){return this.alreadyInit?this.pusher.unsubscribe(e):null},savePresenceMembers:function(e){var t=this;t.onlinemembers={},e.each(function(e){t.onlinemembers[e.id]=e.info}),a.trigger("presence:update",t.onlinemembers)},countPresenceMembers:function(){return _.size(this.onlinemembers)},getPresenceMembers:function(){return this.onlinemembers},checkPresenceMember:function(e){return this.onlinemembers.hasOwnProperty(e)},getPresenceMember:function(e){return this.onlinemembers[e]},eventFetchCompanyResource:function(e){n.initializeLoad()},eventNotificationData:function(e){a.trigger("notifypageheader:newpushnotification",e)},eventCountNotificationData:function(e){a.trigger("notifypageheader:countnotification",e)},eventCustomerCallPopup:function(e){a.trigger("customer:callpopup",e)},logout:function(){null!==this.pusher&&(this.pusher.disconnect(),this.alreadyInit=!1)}}}),define("language/companyonboard",["baselanguage"],function(e){var t={vn:{completed:"Đã hoàn thành",step:"bước",welcome:"BẮT ĐẦU VỚI BASECROP",welcome_tip:"Hướng dẫn này sẽ giúp bạn hiểu hơn về cách dùng phần mềm & các tính năng chính của ứng dụng.",step_init:"1. Tạo tài khoản & công ty",company_init_already_go_to_setting:"Dữ liệu cơ bản đã được khởi tạo. Bạn có thể tùy biến thông tin tại trang cài đặt, cấu hình.",plan_item_department:"Phòng ban",plan_item_office:"Văn phòng",plan_item_store:"Cửa hàng (thêm nhân viên hiện tại vào POS)",plan_item_product_unit:"Đơn vị tính",plan_item_warehouse:"Kho",plan_item_order_cancel_reason:"Lý do hủy đơn hàng",plan_item_customer_origin:"Nguồn khách hàng",plan_item_customer_status:"Trạng thái khách hàng",plan_item_customer_type:"Nhóm khách hàng",plan_item_order_origin:"Nguồn đơn hàng",plan_item_cashflow_account:"Tài khoản ngân hàng",plan_item_cashflow_type:"Loại phiếu thu/ chi",plan_item_order_print_template:"Định dạng in đơn hàng",init:"Khởi tạo",never_init_summary_done:"Khởi tạo thành công. Nhấn nút bên dưới để tiếp tục.",never_init_summary_done_with_error:"Khởi tạo hoàn tất. Phát hiện một số lỗi trong quá trình khởi tạo, có thể do dữ liệu đã tồn tại hoặc đã khởi tạo trước đó. Nhấn nút bên dưới để tiếp tục.",initContinue:"Tiếp tục sử dụng",default_store_code_1:"CH01",default_department_name_1:"Ban giám đốc",default_office_name_1:"Văn phòng chính",default_warehouse_nameprefix_1:"Kho ",default_warehouse_code_1:"KH01",default_productunit_name_1:"Cái",default_ordercancelreason_name_1:"Khách hàng hủy",default_ordercancelreason_name_2:"Không liên hệ được",default_ordercancelreason_name_3:"Khách hàng không nhận hàng",default_ordercancelreason_name_4:"Hết hàng trong kho",default_ordercancelreason_name_5:"Nhân viên làm sai",default_customerorigin_name_1:"Cửa hàng",default_customerorigin_code_1:"CO01",default_customerorigin_name_2:"Facebook",default_customerorigin_code_2:"CO02",default_customerorigin_name_3:"Website",default_customerorigin_code_3:"CO03",default_customerorigin_name_4:"Telesale",default_customerorigin_code_4:"CO04",default_customerstatus_name_1:"Chưa liên hệ",default_customerstatus_code_1:"CS01",default_customerstatus_name_2:"Đã liên hệ",default_customerstatus_code_2:"CS02",default_customerstatus_name_3:"Đã mua hàng",default_customerstatus_code_3:"CS03",default_customertype_name_1:"Khách hàng thường",default_customertype_code_1:"CT01",default_customertype_name_2:"Khách hàng thân thiết",default_customertype_code_2:"CT02",default_orderorigin_name_1:"Cửa hàng",default_orderorigin_code_1:"OO01",default_orderorigin_name_2:"Facebook",default_orderorigin_code_2:"OO02",default_orderorigin_name_3:"Website",default_orderorigin_code_3:"OO03",default_cashflowaccount_name_1:"Tài khoản chính",default_cashflowtype_income_name_1:"Bán hàng",default_cashflowtype_expense_name_1:"Mua hàng",default_cashflowtype_expense_name_2:"Hành chính văn phòng",step_checkingcompletestatus:"Đang kiểm tra...",
step_notcompleted:"Chưa hoàn thành",step_didcompleted:"Đã hoàn thành",step_complete_button:"Tôi đã hoàn thành bước này",success_commit:"Thông tin của bạn đã được lưu. Hãy tiếp tục.",step_error_not_completed_to_commit:"Vui lòng hoàn thành các điều kiện trong bước này.",step_begin_tooltip:"Nhấn để bắt đầu thực hiện",step_linkmore:"Tìm hiểu thêm...",step_linkmore_tooltip:"Tìm hiểu chi tiết hơn về tính năng này với bài viết hướng dẫn",congratulation_heading:"Chúc mừng bạn!",congratulation_done:"Bạn đã trải nghiệm hầu hết các tính năng chính của phần mềm. Nếu bạn thấy hữu ích, hãy cho Basecrop cơ hội được giúp bạn quản lý việc kinh doanh của bạn.",onboardpass_button_pricing:"Bảng giá",onboardpass_button_learnmore:"Hỗ trợ",stepproduct_heading:"Khởi tạo thông tin sản phẩm",stepproduct_category_header:"TẠO DANH MỤC",stepproduct_category_content:"Tạo ít nhất một danh mục sản phẩm",stepproduct_product_header:"TẠO SẢN PHẨM",stepproduct_product_content:"Tạo ít nhất một sản phẩm",stepproduct_variant_header:"TẠO CÁC KIỂU/SKU CHO SẢN PHẨM",stepproduct_variant_content:"Tạo ít nhất một sản phẩm có 2 kiểu (màu sắc, kích thước, ...)",stepinventory_heading:"Tạo thử dữ liệu cho hệ thống tồn kho",stepinventory_receipt_in_header:"TẠO PHIẾU NHẬP KHO",stepinventory_receipt_in_content:"Tự tạo ít nhất một phiếu nhập kho để nhập hàng vào kho",stepinventory_receipt_out_header:"TẠO PHIẾU XUẤT KHO",stepinventory_receipt_out_content:"Tự tạo ít nhất một phiếu xuất kho lấy hàng ra khỏi kho",stepcashflow_heading:"Tạo thử dữ liệu cho sổ quỹ",stepcashflow_cashflow_in_header:"TẠO PHIẾU THU",stepcashflow_cashflow_in_content:"Tự tạo ít nhất một phiếu thu tiền",stepcashflow_cashflow_out_header:"TẠO PHIẾU CHI",stepcashflow_cashflow_out_content:"Tự tạo ít nhất một phiếu chi tiền",stepcustomer_heading:"Tạo thử dữ liệu khách hàng",stepcustomer_customer_header:"TẠO KHÁCH HÀNG",stepcustomer_customer_content:"Tự tạo ít nhất một khách hàng và thông tin vào hệ thống",steporder_heading:"Thử bán hàng với máy bán hàng (POS)",steporder_order_header:"TẠO ĐƠN HÀNG",steporder_order_content:"Tự tạo một đơn hàng từ máy bán hàng",stepemployee_heading:"Cài đặt thêm nhân viên và phân quyền",stepemployee_employee_header:"TẠO THÊM NHÂN VIÊN",stepemployee_employee_content:"Thêm một nhân viên khác vào công ty của bạn",stepemployee_permission_header:"PHÂN QUYỀN CHO NHÂN VIÊN",stepemployee_permission_content:"Thêm một nhóm quyền mới và gán nhân viên vừa tạo vào",stepemployee_store_header:"CHO PHÉP NHÂN VIÊN BÁN HÀNG TẠI POS",stepemployee_store_content:"Thêm nhân viên vào cửa hàng với quyền bán hàng",stepfile_heading:"Quản lý tài liệu nội bộ",stepfile_directory_header:"TẠO THƯ MỤC",stepfile_directory_content:"Thêm một thư mục vào tài liệu nội bộ",stepfile_file_header:"UPLOAD TÀI LIỆU",stepfile_file_content:"Upload một file tài liệu/ hình ảnh vào tài liệu nội bộ",stepcheckin_heading:"Cài đặt văn phòng và chấm công thử nghiệm",stepcheckin_range_header:"TẠO CA LÀM VIỆC",stepcheckin_range_content:"Tạo một ca làm việc cho văn phòng",stepcheckin_reviewer_header:"GÁN NGƯỜI DUYỆT CHẤM CÔNG",stepcheckin_reviewer_content:"Gán bạn vào danh sách người duyệt chấm công trong văn phòng",stepcheckin_checkin_header:"CHẤM CÔNG VÀO",stepcheckin_checkin_content:"Chấm công vào ca làm việc tại văn phòng đã cấu hình",stepcheckin_checkout_header:"CHẤM CÔNG RA",stepcheckin_checkout_content:"Chấm công ra sau khi đã làm việc",stepcheckin_verify_header:"DUYỆT CHẤM CÔNG",stepcheckin_verify_content:"Duyệt thông tin chấm công gần nhất",stepproject_heading:"Quản lý dự án",stepproject_project_header:"TẠO DỰ ÁN",stepproject_project_content:"Tạo một dự án để quản lý",stepproject_task_header:"TẠO CÔNG VIỆC",stepproject_task_content:"Tạo một công việc trong dự án",stepmail_heading:"Gửi thư nội bộ công ty",stepmail_mail_header:"GỬI THƯ NỘI BỘ",stepmail_mail_content:"Gửi một thư nội bộ cho bạn hoặc nhân viên khác",steppoint_heading:"Thử cài đặt và đánh giá nhân viên",steppoint_topic_good_header:"TẠO TIÊU CHÍ TỐT",steppoint_topic_good_content:"Tạo một tiêu chí chấm điểm thuộc loại TỐT",steppoint_topic_bad_header:"TẠO TIÊU CHÍ XẤU",steppoint_topic_bad_content:"Tạo một tiếu chí chấm điểm thuộc loại XẤU",steppoint_point_header:"TẠO CHẤM ĐIỂM",steppoint_point_content:"Tạo một đánh giá, chấm điểm cho 1 nhân viên"},en:{completed:"Đã hoàn thành",step:"bước",welcome:"BẮT ĐẦU VỚI TEAMCROP",welcome_tip:"Hướng dẫn này sẽ giúp bạn hiểu hơn về cách dùng phần mềm & các tính năng chính của ứng dụng.",step_init:"1. Tạo tài khoản & công ty",company_init_already_go_to_setting:"Dữ liệu cơ bản đã được khởi tạo. Bạn có thể tùy biến thông tin tại trang cài đặt, cấu hình.",plan_item_department:"Phòng ban",plan_item_office:"Văn phòng",plan_item_store:"Cửa hàng (thêm nhân viên hiện tại vào POS)",plan_item_product_unit:"Đơn vị tính",plan_item_warehouse:"Kho",plan_item_order_cancel_reason:"Lý do hủy đơn hàng",plan_item_customer_origin:"Nguồn khách hàng",plan_item_customer_status:"Trạng thái khách hàng",plan_item_customer_type:"Nhóm khách hàng",plan_item_order_origin:"Nguồn đơn hàng",plan_item_cashflow_account:"Tài khoản ngân hàng",plan_item_cashflow_type:"Loại phiếu thu/ chi",plan_item_order_print_template:"Định dạng in đơn hàng",init:"Khởi tạo",never_init_summary_done:"Khởi tạo thành công. Nhấn nút bên dưới để tiếp tục.",never_init_summary_done_with_error:"Khởi tạo hoàn tất. Phát hiện một số lỗi trong quá trình khởi tạo, có thể do dữ liệu đã tồn tại hoặc đã khởi tạo trước đó. Nhấn nút bên dưới để tiếp tục.",initContinue:"Tiếp tục sử dụng",default_store_code_1:"CH01",default_department_name_1:"Ban giám đốc",default_office_name_1:"Văn phòng chính",default_warehouse_nameprefix_1:"Kho ",default_warehouse_code_1:"KH01",default_productunit_name_1:"Cái",default_ordercancelreason_name_1:"Khách hàng hủy",default_ordercancelreason_name_2:"Không liên hệ được",default_ordercancelreason_name_3:"Khách hàng không nhận hàng",default_ordercancelreason_name_4:"Hết hàng trong kho",default_ordercancelreason_name_5:"Nhân viên làm sai",default_customerorigin_name_1:"Cửa hàng",default_customerorigin_code_1:"CO01",default_customerorigin_name_2:"Facebook",default_customerorigin_code_2:"CO02",default_customerorigin_name_3:"Website",default_customerorigin_code_3:"CO03",default_customerorigin_name_4:"Telesale",default_customerorigin_code_4:"CO04",default_customerstatus_name_1:"Chưa liên hệ",default_customerstatus_code_1:"CS01",default_customerstatus_name_2:"Đã liên hệ",default_customerstatus_code_2:"CS02",default_customerstatus_name_3:"Đã mua hàng",default_customerstatus_code_3:"CS03",default_customertype_name_1:"Khách hàng thường",default_customertype_code_1:"CT01",default_customertype_name_2:"Khách hàng thân thiết",default_customertype_code_2:"CT02",default_orderorigin_name_1:"Cửa hàng",default_orderorigin_code_1:"OO01",default_orderorigin_name_2:"Facebook",default_orderorigin_code_2:"OO02",default_orderorigin_name_3:"Website",default_orderorigin_code_3:"OO03",default_cashflowaccount_name_1:"Tài khoản chính",default_cashflowtype_income_name_1:"Bán hàng",default_cashflowtype_expense_name_1:"Mua hàng",default_cashflowtype_expense_name_2:"Hành chính văn phòng",step_checkingcompletestatus:"Đang kiểm tra...",step_notcompleted:"Chưa hoàn thành",step_didcompleted:"Đã hoàn thành",step_complete_button:"Tôi đã hoàn thành bước này",success_commit:"Thông tin của bạn đã được lưu. Hãy tiếp tục.",step_error_not_completed_to_commit:"Vui lòng hoàn thành các điều kiện trong bước này.",step_begin_tooltip:"Nhấn để bắt đầu thực hiện",step_linkmore:"Tìm hiểu thêm...",step_linkmore_tooltip:"Tìm hiểu chi tiết hơn về tính năng này với bài viết hướng dẫn",congratulation_heading:"Chúc mừng bạn!",congratulation_done:"Bạn đã trải nghiệm hầu hết các tính năng chính của phần mềm. Nếu bạn thấy hữu ích, hãy cho Teamcrop cơ hội được giúp bạn quản lý việc kinh doanh của bạn.",onboardpass_button_pricing:"Bảng giá",onboardpass_button_learnmore:"Hỗ trợ",stepproduct_heading:"Khởi tạo thông tin sản phẩm",stepproduct_category_header:"TẠO DANH MỤC",stepproduct_category_content:"Tạo ít nhất một danh mục sản phẩm",stepproduct_product_header:"TẠO SẢN PHẨM",stepproduct_product_content:"Tạo ít nhất một sản phẩm",stepproduct_variant_header:"TẠO CÁC KIỂU/SKU CHO SẢN PHẨM",stepproduct_variant_content:"Tạo ít nhất một sản phẩm có 2 kiểu (màu sắc, kích thước, ...)",stepinventory_heading:"Tạo thử dữ liệu cho hệ thống tồn kho",stepinventory_receipt_in_header:"TẠO PHIẾU NHẬP KHO",stepinventory_receipt_in_content:"Tự tạo ít nhất một phiếu nhập kho để nhập hàng vào kho",stepinventory_receipt_out_header:"TẠO PHIẾU XUẤT KHO",stepinventory_receipt_out_content:"Tự tạo ít nhất một phiếu xuất kho lấy hàng ra khỏi kho",stepcashflow_heading:"Tạo thử dữ liệu cho sổ quỹ",stepcashflow_cashflow_in_header:"TẠO PHIẾU THU",stepcashflow_cashflow_in_content:"Tự tạo ít nhất một phiếu thu tiền",stepcashflow_cashflow_out_header:"TẠO PHIẾU CHI",stepcashflow_cashflow_out_content:"Tự tạo ít nhất một phiếu chi tiền",stepcustomer_heading:"Tạo thử dữ liệu khách hàng",stepcustomer_customer_header:"TẠO KHÁCH HÀNG",stepcustomer_customer_content:"Tự tạo ít nhất một khách hàng và thông tin vào hệ thống",steporder_heading:"Thử bán hàng với máy bán hàng (POS)",steporder_order_header:"TẠO ĐƠN HÀNG",steporder_order_content:"Tự tạo một đơn hàng từ máy bán hàng",stepemployee_heading:"Cài đặt thêm nhân viên và phân quyền",stepemployee_employee_header:"TẠO THÊM NHÂN VIÊN",stepemployee_employee_content:"Thêm một nhân viên khác vào công ty của bạn",stepemployee_permission_header:"PHÂN QUYỀN CHO NHÂN VIÊN",stepemployee_permission_content:"Thêm một nhóm quyền mới và gán nhân viên vừa tạo vào",stepemployee_store_header:"CHO PHÉP NHÂN VIÊN BÁN HÀNG TẠI POS",stepemployee_store_content:"Thêm nhân viên vào cửa hàng với quyền bán hàng",stepfile_heading:"Quản lý tài liệu nội bộ",stepfile_directory_header:"TẠO THƯ MỤC",stepfile_directory_content:"Thêm một thư mục vào tài liệu nội bộ",stepfile_file_header:"UPLOAD TÀI LIỆU",stepfile_file_content:"Upload một file tài liệu/ hình ảnh vào tài liệu nội bộ",stepcheckin_heading:"Cài đặt văn phòng và chấm công thử nghiệm",stepcheckin_range_header:"TẠO CA LÀM VIỆC",stepcheckin_range_content:"Tạo một ca làm việc cho văn phòng",stepcheckin_reviewer_header:"GÁN NGƯỜI DUYỆT CHẤM CÔNG",stepcheckin_reviewer_content:"Gán bạn vào danh sách người duyệt chấm công trong văn phòng",stepcheckin_checkin_header:"CHẤM CÔNG VÀO",stepcheckin_checkin_content:"Chấm công vào ca làm việc tại văn phòng đã cấu hình",stepcheckin_checkout_header:"CHẤM CÔNG RA",stepcheckin_checkout_content:"Chấm công ra sau khi đã làm việc",stepcheckin_verify_header:"DUYỆT CHẤM CÔNG",stepcheckin_verify_content:"Duyệt thông tin chấm công gần nhất",stepproject_heading:"Quản lý dự án",stepproject_project_header:"TẠO DỰ ÁN",stepproject_project_content:"Tạo một dự án để quản lý",stepproject_task_header:"TẠO CÔNG VIỆC",stepproject_task_content:"Tạo một công việc trong dự án",stepmail_heading:"Gửi thư nội bộ công ty",stepmail_mail_header:"GỬI THƯ NỘI BỘ",stepmail_mail_content:"Gửi một thư nội bộ cho bạn hoặc nhân viên khác",steppoint_heading:"Thử cài đặt và đánh giá nhân viên",steppoint_topic_good_header:"TẠO TIÊU CHÍ TỐT",steppoint_topic_good_content:"Tạo một tiêu chí chấm điểm thuộc loại TỐT",steppoint_topic_bad_header:"TẠO TIÊU CHÍ XẤU",steppoint_topic_bad_content:"Tạo một tiếu chí chấm điểm thuộc loại XẤU",steppoint_point_header:"TẠO CHẤM ĐIỂM",steppoint_point_content:"Tạo một đánh giá, chấm điểm cho 1 nhân viên"}};return new e({lang:t})}),define("components/company/onboard/step",["react","backbone","helper","eventbus"],function(e,t,n,a){var i=e.createClass({displayName:"CompanyOnboardStepComponent",getDefaultProps:function(){return{checked:!1,disable:!1,renderpopup:function(e){},index:0,data:{id:0,text:"",link:"",link_text:"",description:""}}},getInitialState:function(){return{checked:this.props.checked,disabled:this.props.disabled}},commitStepHandler:function(e){a.trigger("onboard:commitstep",e)},doStep:function(e){e.preventDefault(),this.isLinkEvent()?a.trigger(this.getNiceEventName(),this.props.data.id):this.props.data.link.length>0?t.history.navigate(this.props.data.link,{trigger:!0}):this.props.renderpopup(this.props.data.id)},isLinkEvent:function(){return 0==this.props.data.link.indexOf("event:")},getNiceEventName:function(){return this.props.data.link.replace("event:","")},handleCommitStep:function(e){this.props.data.id==e&&this.setState({checked:!0})},componentDidUpdate:function(e,t){e.disabled!=this.props.disabled&&this.setState({disabled:this.props.disabled})},componentWillUnmount:function(){this.isLinkEvent()&&a.off("onboardcommit:"+this.getNiceEventName(),this.commitStepHandler),a.off("onboard:commitstep",this.handleCommitStep)},componentDidMount:function(){this.isLinkEvent()&&a.on("onboardcommit:"+this.getNiceEventName(),this.commitStepHandler),a.on("onboard:commitstep",this.handleCommitStep)},render:function(){return e.createElement("div",{className:"item "+(this.state.checked?"onboardstepchecked":"")+(this.state.disabled?" disabled":"")},e.createElement("i",{className:"icon "+(this.state.checked?"tc-tick":"tc-checkboxsquareempty")}),e.createElement("div",{className:"content"},e.createElement("div",{className:"description"},e.createElement("a",{href:"#",onClick:this.doStep},this.props.index,". ",this.props.data.text))))}});return i}),define("components/company/initsubitem",["react","eventbus","setting","helper","language/companyonboard"],function(e,t,n,a,i){var r=e.createClass({displayName:"CompanyInitItemComponent",getDefaultProps:function(){return{id:"",checked:!1,loading:!1,header:"",text:"",link:"",linkmore:""}},getInitialState:function(){return{checked:this.props.checked,loading:this.props.loading}},getLinkMore:function(){var e=this.props.linkmore;return 0!=e.indexOf("http")&&(e=n.homepageurl+e),e},changeState:function(e){var t={loading:e.loading,checked:e.checked};this.setState(t)},showLoader:function(){this.setState({loading:!0})},onClick:function(e){e.preventDefault(),Backbone.history.navigate(this.props.link,{trigger:!0}),t.trigger("onboard:unmountpopup"),t.trigger("onboard:minimize")},componentWillUnmount:function(){t.off("onboardstepitem:loading",this.showLoader)},componentDidMount:function(){a.isSmallScreen()||a.initMyTip($(e.findDOMNode(this)).find(".mytip")),t.on("onboardstepitem:loading",this.showLoader)},render:function(){var t="tc-lock",n="black",a=i.t("step_notcompleted");if(this.state.loading){t="tc-refresh-alt loading",n="grey";var a=i.t("step_checkingcompletestatus")}else if(this.state.checked){t="tc-key",n="#3498db";var a=i.t("step_didcompleted")}return e.createElement("div",{className:"item"},e.createElement("div",{className:"pull-right right aligned"},this.state.checked?null:e.createElement("a",{onClick:this.onClick,title:i.t("step_begin_tooltip"),className:"mytip"},e.createElement("span",{className:"ui mini red label"},i.t("step_notcompleted"))),this.props.linkmore.length>0?e.createElement("div",{style:{textAlign:"right"}},e.createElement("small",null,e.createElement("a",{style:{display:"block",paddingTop:4},className:"",href:this.getLinkMore(),title:i.t("step_linkmore_tooltip"),target:"_blank"},i.t("step_linkmore")))):null),e.createElement("i",{className:"middle aligned icon "+t,title:a,style:{color:n}}),e.createElement("div",{className:"content"},e.createElement("a",{className:"header",href:"#",onClick:this.onClick},this.props.header),e.createElement("div",{className:"description"},this.props.text)))}});return r}),define("components/company/onboard/stepmixin",["react","helper","pref","eventbus","language/companyonboard","language/default","models/companyonboard"],function(e,t,n,a,i,r,o){return{getDefaultProps:function(){return{step_id:0}},getInitialState:function(){return{pass:!1}},commitStep:function(n){n.preventDefault(),this.state.pass?($(e.findDOMNode(this.refs.modal)).modal("hide"),a.trigger("onboard:commitstep",this.props.step_id)):t.showError(i.t("step_error_not_completed_to_commit"))},loadStats:function(e){var t=this;a.trigger("onboardstepitem:loading"),(new o).getStepStats({query:{company_id:n.get("cid"),creator_id:n.get("uid"),step_id:this.props.step_id},success:function(e){t.processStepStats(e)},error:function(e){a.trigger("onboardstepitem:loading")},complete:function(){}})},componentDidUpdate:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.modal)).modal({autofocus:!1,context:$(e.findDOMNode(this)),closable:!0,onVisible:function(){t.loadStats()},onHidden:function(){a.trigger("onboard:unmountpopup")}}).modal("show")},renderAction:function(){return e.createElement("div",{className:"actions",ref:"formaction"},e.createElement("a",{className:"ui noborder basic button cancel close"},r.t("close")),this.state.pass?e.createElement("a",{href:"#",onClick:this.commitStep,className:"ui teal button"},i.t("step_complete_button")):e.createElement("a",{href:"#",onClick:this.commitStep,className:"ui labeled teal icon button disabled"},e.createElement("i",{className:"icon tc-lock"})," ",i.t("step_complete_button")))}}}),define("components/company/onboard/stepemployeehrm",["react","language/companyonboard","components/company/initsubitem","components/company/onboard/stepmixin"],function(e,t,n,a){var i=e.createClass({displayName:"CompanyOnboardStepEmployeeHrmComponent",mixins:[a],processStepStats:function(e){this.refs.substep_employee.changeState({loading:!1,checked:e.pass_employee}),this.refs.substep_permission.changeState({loading:!1,checked:e.pass_permission}),this.setState({pass:e.pass_employee&&e.pass_permission})},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui small modal",ref:"modal"},e.createElement("div",{className:"content"},e.createElement("div",{className:"ui grid"},e.createElement("div",{className:"sixteen wide column"},e.createElement("h3",null,t.t("stepemployee_heading")),e.createElement("div",{className:"ui relaxed divided selection list onboardsubstep",ref:"onboardsubsteplist"},e.createElement(n,{ref:"substep_employee",id:"substep_employee",header:t.t("stepemployee_employee_header"),text:t.t("stepemployee_employee_content"),link:"employee/add",linkmore:"/ho-tro/them-moi-nhan-vien-vao-cong-ty"}),e.createElement(n,{ref:"substep_permission",id:"substep_permission",header:t.t("stepemployee_permission_header"),text:t.t("stepemployee_permission_content"),link:"setting/role",linkmore:"/ho-tro/phan-quyen-cho-nhan-vien"}))))),this.renderAction()))}});return i}),define("components/company/onboard/stepfile",["react","language/companyonboard","components/company/initsubitem","components/company/onboard/stepmixin"],function(e,t,n,a){var i=e.createClass({displayName:"CompanyOnboardStepFileComponent",mixins:[a],processStepStats:function(e){this.refs.substep_directory.changeState({loading:!1,checked:e.pass_directory}),this.refs.substep_file.changeState({loading:!1,checked:e.pass_file}),this.setState({pass:e.pass_directory&&e.pass_file})},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui small modal",ref:"modal"},e.createElement("div",{className:"content"},e.createElement("div",{className:"ui grid"},e.createElement("div",{className:"sixteen wide column"},e.createElement("h3",null,t.t("stepfile_heading")),e.createElement("div",{className:"ui relaxed divided selection list onboardsubstep",ref:"onboardsubsteplist"},e.createElement(n,{ref:"substep_directory",id:"substep_directory",header:t.t("stepfile_directory_header"),text:t.t("stepfile_directory_content"),link:"file",linkmore:"/ho-tro/lam-sao-de-chia-se-tap-tin-noi-bo"}),e.createElement(n,{ref:"substep_file",id:"substep_file",header:t.t("stepfile_file_header"),text:t.t("stepfile_file_content"),link:"file",linkmore:"/ho-tro/lam-sao-de-chia-se-tap-tin-noi-bo"}))))),this.renderAction()))}});return i}),define("components/company/onboard/stepcheckin",["react","language/companyonboard","components/company/initsubitem","components/company/onboard/stepmixin"],function(e,t,n,a){var i=e.createClass({displayName:"CompanyOnboardStepCheckinComponent",mixins:[a],processStepStats:function(e){this.refs.substep_range.changeState({loading:!1,checked:e.pass_range}),this.refs.substep_reviewer.changeState({loading:!1,checked:e.pass_reviewer}),this.refs.substep_checkin.changeState({loading:!1,checked:e.pass_checkin}),this.refs.substep_checkout.changeState({loading:!1,checked:e.pass_checkout}),this.refs.substep_verify.changeState({loading:!1,checked:e.pass_verify}),this.setState({pass:e.pass_range&&e.pass_reviewer&&e.pass_checkin&&e.pass_checkout&&e.pass_verify})},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui small modal",ref:"modal"},e.createElement("div",{className:"content"},e.createElement("div",{className:"ui grid"},e.createElement("div",{className:"sixteen wide column"},e.createElement("h3",null,t.t("stepcheckin_heading")),e.createElement("div",{className:"ui relaxed divided selection list onboardsubstep",ref:"onboardsubsteplist"},e.createElement(n,{ref:"substep_range",id:"substep_range",header:t.t("stepcheckin_range_header"),text:t.t("stepcheckin_range_content"),link:"office",linkmore:"/ho-tro/thiet-lap-ca-lam-viec-cho-van-phong"}),e.createElement(n,{ref:"substep_reviewer",id:"substep_reviewer",header:t.t("stepcheckin_reviewer_header"),text:t.t("stepcheckin_reviewer_content"),link:"office",linkmore:"/ho-tro/thiet-lap-ca-lam-viec-cho-van-phong"}),e.createElement(n,{ref:"substep_checkin",id:"substep_checkin",header:t.t("stepcheckin_checkin_header"),text:t.t("stepcheckin_checkin_content"),link:"checkin/add",linkmore:"/ho-tro/thuc-hien-cham-cong-vao-ra"}),e.createElement(n,{ref:"substep_checkout",id:"substep_checkout",header:t.t("stepcheckin_checkout_header"),text:t.t("stepcheckin_checkout_content"),link:"checkin/add",linkmore:"/ho-tro/thuc-hien-cham-cong-vao-ra"}),e.createElement(n,{ref:"substep_verify",id:"substep_verify",header:t.t("stepcheckin_verify_header"),text:t.t("stepcheckin_verify_content"),link:"checkin/review",linkmore:"/ho-tro/cach-duyet-gio-cong-cho-nhan-vien"}))))),this.renderAction()))}});return i}),define("components/company/onboard/stepproject",["react","language/companyonboard","components/company/initsubitem","components/company/onboard/stepmixin"],function(e,t,n,a){var i=e.createClass({displayName:"CompanyOnboardStepProjectComponent",mixins:[a],processStepStats:function(e){this.refs.substep_project.changeState({loading:!1,checked:e.pass_project}),this.refs.substep_task.changeState({loading:!1,checked:e.pass_task}),this.setState({pass:e.pass_project&&e.pass_task})},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui small modal",ref:"modal"},e.createElement("div",{className:"content"},e.createElement("div",{className:"ui grid"},e.createElement("div",{className:"sixteen wide column"},e.createElement("h3",null,t.t("stepproject_heading")),e.createElement("div",{className:"ui relaxed divided selection list onboardsubstep",ref:"onboardsubsteplist"},e.createElement(n,{ref:"substep_project",id:"substep_project",header:t.t("stepproject_project_header"),text:t.t("stepproject_project_content"),link:"project/add",linkmore:"/ho-tro/cach-quan-ly-du-an"}),e.createElement(n,{ref:"substep_task",id:"substep_task",header:t.t("stepproject_task_header"),text:t.t("stepproject_task_content"),link:"project",linkmore:"/ho-tro/tao-va-gan-viec-cho-nhan-vien"}))))),this.renderAction()))}});return i}),define("components/company/onboard/stepmail",["react","language/companyonboard","components/company/initsubitem","components/company/onboard/stepmixin"],function(e,t,n,a){var i=e.createClass({displayName:"CompanyOnboardStepMailComponent",mixins:[a],processStepStats:function(e){this.refs.substep_mail.changeState({loading:!1,checked:e.pass_mail}),this.setState({pass:e.pass_mail})},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui small modal",ref:"modal"},e.createElement("div",{className:"content"},e.createElement("div",{className:"ui grid"},e.createElement("div",{className:"sixteen wide column"},e.createElement("h3",null,t.t("stepmail_heading")),e.createElement("div",{className:"ui relaxed divided selection list onboardsubstep",ref:"onboardsubsteplist"},e.createElement(n,{ref:"substep_mail",id:"substep_mail",header:t.t("stepmail_mail_header"),text:t.t("stepmail_mail_content"),link:"mail",linkmore:"/ho-tro/soan-thu-gui-noi-bo"}))))),this.renderAction()))}});return i}),define("components/company/onboard/steppoint",["react","language/companyonboard","components/company/initsubitem","components/company/onboard/stepmixin"],function(e,t,n,a){var i=e.createClass({displayName:"CompanyOnboardStepPointComponent",mixins:[a],processStepStats:function(e){this.refs.substep_topic_good.changeState({loading:!1,checked:e.pass_topic_good}),this.refs.substep_topic_bad.changeState({loading:!1,checked:e.pass_topic_bad}),this.refs.substep_point.changeState({loading:!1,checked:e.pass_point}),this.setState({pass:e.pass_topic_good&&e.pass_topic_bad&&e.pass_point})},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui small modal",ref:"modal"},e.createElement("div",{className:"content"},e.createElement("div",{className:"ui grid"},e.createElement("div",{className:"sixteen wide column"},e.createElement("h3",null,t.t("steppoint_heading")),e.createElement("div",{className:"ui relaxed divided selection list onboardsubstep",ref:"onboardsubsteplist"},e.createElement(n,{ref:"substep_topic_good",id:"substep_topic_good",header:t.t("steppoint_topic_good_header"),text:t.t("steppoint_topic_good_content"),link:"employeepointtopic/add",linkmore:"/ho-tro/tieu-chi-cham-diem-nhan-vien"}),e.createElement(n,{ref:"substep_topic_bad",id:"substep_topic_bad",header:t.t("steppoint_topic_bad_header"),text:t.t("steppoint_topic_bad_content"),link:"employeepointtopic/add",linkmore:"/ho-tro/tieu-chi-cham-diem-nhan-vien"}),e.createElement(n,{ref:"substep_point",id:"substep_point",header:t.t("steppoint_point_header"),text:t.t("steppoint_point_content"),link:"employeepoint",linkmore:"/ho-tro/tieu-chi-cham-diem-nhan-vien"}))))),this.renderAction()))}});return i}),define("components/company/onboard",["react","backbone","socket","basecontroller","pref","role","setting","helper","eventbus","companymodule","language/companyonboard","models/companyonboard","components/company/onboard/step","components/company/onboard/stepemployeehrm","components/company/onboard/stepfile","components/company/onboard/stepcheckin","components/company/onboard/stepproject","components/company/onboard/stepmail","components/company/onboard/steppoint"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v){var y=e.createClass({displayName:"CompanyOnboardComponent",getDefaultProps:function(){return{doTrialHandler:function(e){},data:{id:0,current_step:1,detail:{commits:[]}}}},getInitialState:function(){return{current_step:this.props.data.current_step,done_step:this.props.data.detail.commits.length+1,total_step:this.props.data.steps.length+1,steps:this.props.data.steps,commits:this.props.data.detail.commits,new_commit_count:0}},removeStepPopup:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.step_popup_wrapper))},mountStepPopup:function(t,n){e.render(e.createElement(t,n),e.findDOMNode(this.refs.step_popup_wrapper))},renderStepPopup:function(e){this.removeStepPopup();var t=new u;switch(e){case t.STEP_HRM_EMPLOYEE:this.mountStepPopup(p,{step_id:e});break;case t.STEP_HRM_FILE:this.mountStepPopup(h,{step_id:e});break;case t.STEP_HRM_CHECKIN:this.mountStepPopup(f,{step_id:e});break;case t.STEP_HRM_PROJECT:this.mountStepPopup(g,{step_id:e});break;case t.STEP_HRM_MAIL:this.mountStepPopup(_,{step_id:e});break;case t.STEP_HRM_POINT:this.mountStepPopup(v,{step_id:e})}},doMinimizeContainer:function(){var e=this;setTimeout(function(){e.minimize()},300)},minimize:function(t){"undefined"!=typeof t&&t.preventDefault();var n=this,a=$(e.findDOMNode(n.refs.onboardcontent)),i=$(e.findDOMNode(n.refs.onboardtoggler)),r=a.clone();$(e.findDOMNode(n.refs.onboardcontent)).hide(),r.offset({top:a.css("top"),right:a.css("right")}).css({position:"fixed",padding:"10px",width:"320px",height:a.height()+"px","z-index":"1031","border-radius":"4px"}).appendTo($("body")).animate({top:i.css("top"),right:i.css("right"),width:200,height:40},200,function(){$(this).detach(),$(e.findDOMNode(n.refs.onboardtoggler)).show()})},maximize:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.onboardtoggler)).hide(),$(e.findDOMNode(this.refs.onboardcontent)).show()},handleCommitStep:function(e){var t=this;(new u).commitStep({data:{company_id:i.get("cid"),step_id:e},success:function(e){t.setState({done_step:t.state.done_step+1,commits:e.detail.commits,new_commit_count:t.state.new_commit_count+1}),s.showSuccess(d.t("success_commit"))},error:function(t){console.log("Error while commit your onboard step",e)}})},isPassAll:function(){var e=this,t=0;return this.state.steps.map(function(n,a){$.inArray(n.id,e.state.commits)>=0&&t++}),t==this.state.steps.length&&t>0},componentDidUpdate:function(t,n){n.done_step<this.state.done_step&&($(e.findDOMNode(this.refs.progress)).progress("increment"),$(e.findDOMNode(this.refs.progressmore)).progress("increment"))},componentWillUnmount:function(){l.off("onboard:commitstep",this.handleCommitStep),l.off("onboard:unmountpopup",this.removeStepPopup),l.off("onboard:minimize",this.doMinimizeContainer)},componentDidMount:function(){$(e.findDOMNode(this.refs.progress)).progress(),$(e.findDOMNode(this.refs.progressmore)).progress(),l.on("onboard:commitstep",this.handleCommitStep),l.on("onboard:unmountpopup",this.removeStepPopup),l.on("onboard:minimize",this.doMinimizeContainer)},render:function(){var t=this,n=!1,a=this.isPassAll();return e.createElement("div",{className:"onboardwrapper"},e.createElement("div",{className:"onboardtoggler",id:"onboardtoggler",ref:"onboardtoggler",onClick:this.maximize,style:{display:a&&0==this.state.new_commit_count?"":"none"}},a?e.createElement("span",{style:{color:"#21BA45"}},e.createElement("i",{className:"icon tc-trophy"})," ",d.t("completed")):e.createElement("span",null,d.t("completed"),": ",this.state.done_step," / ",this.state.total_step," ",d.t("step")),e.createElement("div",{className:"ui tiny green progress","data-value":this.state.done_step,"data-total":this.state.total_step,ref:"progress"},e.createElement("div",{className:"bar"}))),e.createElement("div",{className:"onboardcontent"+(a?" onboardcontentnotransparent":""),ref:"onboardcontent",style:{display:a&&0==this.state.new_commit_count?"none":""}},e.createElement("h3",null,d.t("welcome"),e.createElement("a",{href:"",className:"pull-right",onClick:this.minimize},e.createElement("i",{className:"icon tc-minus"}))),e.createElement("p",{className:"tip",style:{display:a?"none":""}},d.t("welcome_tip")),e.createElement("div",{className:"ui tiny green progress","data-value":this.state.done_step,"data-total":this.state.total_step,ref:"progressmore"},e.createElement("div",{className:"bar"})),e.createElement("div",{className:"onboardchecklist ui list"+(a?" hide":"")},e.createElement("div",{className:"item onboardstepchecked"},e.createElement("i",{className:"icon tc-tick"}),e.createElement("div",{className:"content"},e.createElement("div",{className:"description"},e.createElement("a",{href:"#",onClick:this.props.doTrialHandler},d.t("step_init"))))),this.state.steps.map(function(a,i){var r=!1,o=!0;return $.inArray(a.id,t.state.commits)>=0?r=!0:n||(o=!1,n=!0),e.createElement(m,{index:i+2,key:a.id,data:a,checked:r,disabled:o,renderpopup:t.renderStepPopup})})),a?e.createElement("div",{className:"onboardpass"},e.createElement("div",{className:"trophyphoto",style:{background:"url(/imgs/trophy.gif) no-repeat center",height:180}}),e.createElement("h3",null,d.t("congratulation_heading")),e.createElement("p",null,d.t("congratulation_done")),e.createElement("div",{style:{textAlign:"center"}},e.createElement("a",{href:o.homepageurl+"/bang-gia",target:"_blank",className:"ui tiny button"
},d.t("onboardpass_button_pricing")),e.createElement("a",{href:o.homepageurl+"/ho-tro",target:"_blank",className:"ui tiny button"},d.t("onboardpass_button_learnmore")))):null),e.createElement("div",{ref:"step_popup_wrapper"}))}});return y}),define("components/pageheader",["react","backbone","setting","pref","helper","role","querystring","language/pageheader","language/setting","eventbus","companymodule","models/company","models/companyonboard","models/changelog","components/notify/pageheader","components/setting/menu","components/company/trial-modal","components/company/trial-modal-readonly","components/employee/exit","components/company/onboard"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y){var E=e.createClass({displayName:"PageHeaderComponent",checkValidUserSessionTimeout:null,savedSessionUserId:0,savedSessionCompanyId:0,toggleLanguage:function(e){a.set("language",e),t.location.reload()},logout:function(e){e.stopPropagation();var n=confirm(s.t("logout_confirm"));1==n&&t.history.loadUrl("user/logout")},editProfile:function(e){t.history.navigate("profile",{trigger:!0}),e.stopPropagation()},hidemenu:function(){$(e.findDOMNode(this.refs.navmenu)).hide()},showItemHandler:function(t){$(e.findDOMNode(this)).find(".headermenu").each(function(){$(this).attr("href").replace("#","")==t&&$(this).show()})},hideItemHandler:function(t){$(e.findDOMNode(this)).find(".headermenu").each(function(){$(this).attr("href").replace("#","")==t&&$(this).hide()})},setViewTitle:function(t){$(e.findDOMNode(this.refs.viewtitle)).find("a").text(t)},setViewTitleLink:function(t){$(e.findDOMNode(this.refs.viewtitle)).find("a").attr("href",t)},setPageTitle:function(e){document.title=e},setActiveMenu:function(t,n){n="undefined"!=typeof n&&n;var a=t.replace("#","").split("/");t=a[0],n&&$(e.findDOMNode(this)).find(".headermenu").removeClass("activeinit"),$(e.findDOMNode(this.refs["menu_"+t])).addClass(n?"activeinit":"active")},getTrialRemain:function(){var e=14;if(parseInt(a.get("datetrialexpired"))>0){var t=parseInt(a.get("datetrialexpired")),n=moment.unix(t);e=n.diff(moment(),"days")}return e},checkProVersion:function(){var t=$(e.findDOMNode(this.refs.menu_teamcroppro));"1"==a.get("istrial")?i.isMobileScreen()?t.find("a").text(s.t("trial_text_1_mobile")):t.find("a").text(s.t("trial_text_1")+""+this.getTrialRemain()+" "+s.t("trial_text_2")):"0"==a.get("planoffice")&&"0"==a.get("planstore")?t.show():t.hide()},checkSettingVisibility:function(){var t=[233,232,235],n=!1;$.each(t,function(e,t){r.hasById(t)&&(n=!0)}),n?($(e.findDOMNode(this.refs.settingmenu)).show(),c.trigger("settingmenu:reload")):$(e.findDOMNode(this.refs.settingmenu)).hide(),this.checkProVersion()},toggleFullscreenHandler:function(t){var n=$(e.findDOMNode(this));null!=t?"show"==t?(n.show(),$("#body").removeClass("noheader")):(n.hide(),$("#body").addClass("noheader")):(c.trigger("sidebar:hide",!0),n.is(":hidden")?(n.show(),$("#body").removeClass("noheader")):(n.hide(),$("#body").addClass("noheader")))},doTrialHandler:function(t){t.preventDefault(),parseInt(a.get("istrial"))>0?e.render(e.createElement(_,null),e.findDOMNode(this.refs.teamcroppro_modal)):e.render(e.createElement(g,null),e.findDOMNode(this.refs.teamcroppro_modal))},showNavHeadingToggleHandler:function(){$(e.findDOMNode(this.refs.navheadingtoggle)).show()},hideNavHeadingToggleHandler:function(){$(e.findDOMNode(this.refs.navheadingtoggle)).hide()},toggleHeadingHandler:function(e){e.preventDefault(),c.trigger("headingfull:togglebuttons")},showLoaderHandler:function(){i.isSmallScreen()&&i.loaderAppend($(e.findDOMNode(this.refs.viewtitle)))},hideLoaderHandler:function(){i.isSmallScreen()&&i.loaderRemove($(e.findDOMNode(this.refs.viewtitle)))},viewtitleClickHandler:function(n){n.preventDefault(),t.history.navigate($(e.findDOMNode(this.refs.viewtitle)).find("a").attr("href"),{trigger:!0})},toggleBackOnHamburgerHandler:function(t){var n=$(e.findDOMNode(this.refs.hamburgertoggle)),a="tc-hamburger",i="tc-left";("undefined"==typeof t||""==t)&&(n.find(".icon").removeClass(i).addClass(a),n.attr("data-backurl",""))},logoutHandler:function(e){$("#trialexpired").modal("hide"),t.history.navigate("#user/logout",{trigger:!0})},checkLicense:function(){var e=this;a.get("cid")>0&&new u({id:a.get("cid")}).fetch({success:function(t,n){1==n.is_trial&&n.date_trial_expired<(new Date).getTime()/1e3&&($("#trialexpired").modal({context:e.getDOMNode(),allowMultiple:!0,closable:!1}),$("#trialexpired").modal("show"))},error:function(e){}})},checkOnboarding:function(){var t=this;a.get("cid")>0&&1==a.get("istrial")&&(new m).getOnboard({query:{company_id:a.get("cid")},success:function(n){n.id>0&&e.render(e.createElement(y,{data:n,doTrialHandler:t.doTrialHandler}),e.findDOMNode(t.refs.companyonboard))},error:function(e){}})},unmountTrialModalHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.teamcroppro_modal))},checkValidUserSession:function(){(this.savedSessionUserId!=a.get("uid")||this.savedSessionCompanyId!=a.get("cid"))&&($(e.findDOMNode(this.refs.sessiontimeout)).modal({closable:!1,context:e.findDOMNode(this)}),$(".ui.modal").not(e.findDOMNode(this.refs.sessiontimeout)).modal("hide"),$(e.findDOMNode(this.refs.sessiontimeout)).modal("show"))},exitHandler:function(t){t.preventDefault(),e.render(e.createElement(v,null),e.findDOMNode(this.refs.employeeexittrialexpired))},unmountEmployeeExitHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.employeeexittrialexpired))},componentWillMount:function(){this.savedSessionUserId=a.get("uid"),this.savedSessionCompanyId=a.get("cid")},componentWillUnmount:function(){i.isSmallScreen()&&(c.off("pageheader:hidemenu",this.hidemenu),c.off("pageheader:setviewtitle",this.setViewTitle),c.off("pageheader:setviewtitlelink",this.setViewTitleLink),c.off("pageheader:shownavheadingtoggle",this.showNavHeadingToggleHandler),c.off("pageheader:hidenavheadingtoggle",this.hideNavHeadingToggleHandler),c.off("pageheader:toggleback",this.toggleBackOnHamburgerHandler)),c.off("pageheader:setpagetitle",this.setPageTitle),c.off("pageheader:activemenu",this.setActiveMenu),c.off("pageheader:hideitem",this.hideItemHandler),c.off("pageheader:showitem",this.showItemHandler),c.off("pageheader:checksettingitem",this.checkSettingVisibility),c.off("pageheader:togglefullscreen",this.toggleFullscreenHandler),c.off("pageheader:unmounttrialmodal",this.unmountTrialModalHandler),c.off("pageheader:showloader",this.showLoaderHandler),c.off("pageheader:hideloader",this.hideLoaderHandler),c.off("employee:unmountemployeeexit",this.unmountEmployeeExitHandler),null!==this.checkValidUserSessionTimeout&&clearInterval(this.checkValidUserSessionTimeout),e.unmountComponentAtNode(e.findDOMNode(this.refs.companyonboard))},componentDidMount:function(){var t=this;if($("#headerwrapper .ui.dropdown").dropdown({action:"hide"}),$("#header .navmenu a.headermenu").fastClick(function(e){if(e.preventDefault(),i.isSmallScreen()){var t=$("#header .navmenu a.active").attr("href"),n=$(this).attr("href");$("#header .navmenu a").removeClass("active"),t==n&&$(this).hasClass("active")?c.trigger("sidebar:hide",!0):($(this).addClass("active"),c.trigger("sidebar:change",n,{}),c.trigger("pageheader:activemenu",n))}else{var t=$("#header .navmenu a.active").attr("href"),n=$(this).attr("href"),a=$(this).offset().left;t!=n?(c.trigger("sidebar:change",n,{menuleftpos:a}),$("#header .navmenu a").removeClass("active"),$(this).addClass("active"),c.trigger("pageheader:activemenu",n)):$(this).hasClass("active")&&$("#sidebar").is(":visible")>0?($(this).removeClass("active"),c.trigger("sidebar:hide",!0)):(c.trigger("pageheader:activemenu",n),c.trigger("sidebar:change",n,{menuleftpos:a}))}}),i.isSmallScreen()){var n=$(window).height()-$("#header").height();$(".navmenuinside").height(n),c.on("pageheader:hidemenu",this.hidemenu),c.on("pageheader:setviewtitle",this.setViewTitle),c.on("pageheader:setviewtitlelink",this.setViewTitleLink),c.on("pageheader:shownavheadingtoggle",this.showNavHeadingToggleHandler),c.on("pageheader:hidenavheadingtoggle",this.hideNavHeadingToggleHandler),c.on("pageheader:toggleback",this.toggleBackOnHamburgerHandler);var t=this;$(e.findDOMNode(this.refs.hamburgertoggle)).fastClick(function(e){t.hamburgerClick(e)});var a=$(window).width()-$(e.findDOMNode(t.refs.hamburger)).width()-100;$(e.findDOMNode(t.refs.viewtitle)).width(a),$(e.findDOMNode(this.refs.viewtitle)).find("a").fastClick(this.viewtitleClickHandler),$(e.findDOMNode(this.refs.navheadingtoggle)).find("a").fastClick(this.toggleHeadingHandler)}c.on("pageheader:setpagetitle",this.setPageTitle),c.on("pageheader:activemenu",this.setActiveMenu),c.on("pageheader:hideitem",this.hideItemHandler),c.on("pageheader:showitem",this.showItemHandler),c.on("pageheader:checksettingitem",this.checkSettingVisibility),c.on("pageheader:togglefullscreen",this.toggleFullscreenHandler),c.on("pageheader:unmounttrialmodal",this.unmountTrialModalHandler),c.on("pageheader:showloader",this.showLoaderHandler),c.on("pageheader:hideloader",this.hideLoaderHandler),c.on("employee:unmountemployeeexit",this.unmountEmployeeExitHandler),$(document).click(function(e){c.trigger("sidebar:toggle","hide"),$("#header .navmenu a").removeClass("active"),$(event.target).closest(".filtertoggle").length||$(event.target).closest(".filterbar").length||!$(".filtertogglewrapper.active").length||(c.trigger("filterbar:toggle"),c.trigger("headingtabfilter:unactive"))}),this.checkSettingVisibility(),this.checkLicense(),this.checkOnboarding(),$(e.findDOMNode(this.refs.logoutbutton)).bind("click",function(e){t.logoutHandler()}),this.checkValidUserSessionTimeout=setInterval(this.checkValidUserSession,5e3)},hamburgerClick:function(t){t.preventDefault();var n=$(e.findDOMNode(this.refs.hamburgertoggle));if(n.find(".icon").hasClass("tc-hamburger"))if($(e.findDOMNode(this.refs.navmenu)).toggle(),$(e.findDOMNode(this.refs.navmenu)).is(":visible")){var a="#";$("#header .navmenu a.active").length>0?a=$("#header .navmenu a.active").attr("href"):this.setActiveMenu(a),c.trigger("sidebar:change",a,{})}else c.trigger("sidebar:hide",!0);else window.history.back()},render:function(){return $("#body").removeClass("noheader"),0==window.location.hash.indexOf("#widget")?($("#body").addClass("noheader"),$("body").css("overflow-y","hidden"),this.renderWidget()):this.renderNormal()},renderWidget:function(){return e.createElement("span",null)},renderNormal:function(){var t={};return""!=a.get("from")&&(t.display="none"),e.createElement("div",{id:"headerwrapper",className:"box1200"},e.createElement("div",{className:"pull-left hamburger",ref:"hamburger"},e.createElement("a",{ref:"hamburgertoggle",href:"#"},e.createElement("i",{className:"icon tc-hamburger"}))),e.createElement("div",{className:"pull-right",id:"headerrightnav",style:t},e.createElement("div",{id:"navprofile",className:"ui top right pointing dropdown"},e.createElement("div",{className:"text",id:"headerfullname"},e.createElement("img",{src:i.getAvatarPath(a.get("avatar"))}),e.createElement("span",null,a.get("fullname"))),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item",style:{display:"none !important"}},e.createElement("a",{href:"",onClick:this.toggleLanguage.bind(this,"vn")},s.t("vietnamese"))),e.createElement("div",{className:"item",style:{display:"none !important"}},e.createElement("a",{href:"",onClick:this.toggleLanguage.bind(this,"en")},s.t("english"))),e.createElement("div",{className:"item",onClick:this.editProfile},e.createElement("a",{href:"javascript:void(0)"},s.t("editprofile"))),e.createElement("div",{className:"divider"}),e.createElement("div",{className:"item",onClick:this.logout},e.createElement("a",{href:"javascript:void(0)"},s.t("logout"))))),e.createElement(h,null),e.createElement("div",{id:"navheadingtoggle",ref:"navheadingtoggle"},e.createElement("a",{className:"toggle",href:"#",onClick:this.toggleHeadingHandler},e.createElement("i",{className:"icon tc-more"})))),e.createElement("div",{className:"pull-left",id:"viewtitle",ref:"viewtitle"},e.createElement("a",{href:"#"})),e.createElement("div",{className:"navmenu",ref:"navmenu"},e.createElement("div",{className:"navmenuinside",ref:"navmenuinside"},e.createElement("ul",null,e.createElement("li",null,e.createElement("a",{className:"headermenu",ref:"menu_",href:"#",id:"headercompanyname",title:s.t("version")+" "+(new p).CURRENT_VERSION},e.createElement("small",{className:"versionbadge"},"v",(new p).CURRENT_VERSION),e.createElement("span",null,a.get("company")))),e.createElement("li",null,e.createElement("a",{className:"headermenu",ref:"menu_checkin",href:"#checkin"},e.createElement("span",null,s.t("checkin")))),e.createElement("li",null,e.createElement("a",{className:"headermenu",ref:"menu_mail",href:"#mail"},e.createElement("span",null,s.t("mail")))),e.createElement("li",null,e.createElement("a",{className:"headermenu",ref:"menu_project",href:"#project"},e.createElement("span",null,s.t("project")))),e.createElement("li",null,e.createElement("a",{className:"headermenu",ref:"menu_blog",href:"#blog"},e.createElement("span",null,s.t("blog")))),e.createElement("li",null,e.createElement("a",{className:"headermenu",ref:"menu_elearning",href:"#elearning"},e.createElement("span",null,s.t("elearning")))),e.createElement("li",null,e.createElement("a",{className:"headermenu",ref:"menu_employee",href:"#employee"},e.createElement("span",null,s.t("employee")))),e.createElement("li",{id:"headermenu_profile",style:{display:"none"}},e.createElement("a",{className:"headermenu",href:"#account"},e.createElement("span",null,s.t("account")))),e.createElement("li",{ref:"menu_teamcroppro"},e.createElement("a",{title:s.t("tooltip_trial"),href:"#",onClick:this.doTrialHandler,style:{color:"#ff0"}},s.t("trial_upgrade")))))),e.createElement("div",{ref:"teamcroppro_modal"}),e.createElement("div",{id:"trialexpired",className:"ui modal"},e.createElement("div",{style:{padding:30,lineHeight:1.7}},e.createElement("div",{style:{lineHeight:0,textAlign:"center"}},e.createElement("i",{className:"icon tc-warning",style:{fontSize:104,color:"orange"}})),e.createElement("h1",{style:{paddingTop:0,paddingBottom:20,borderBottom:"1px solid #eee",textAlign:"center"}},s.t("expire_heading")),e.createElement("p",{style:{fontSize:16}},s.t("expire_subheading")),e.createElement("p",{style:{fontSize:16}},s.t("expire_accountinfo")),e.createElement("div",{style:{fontSize:16}},"- Company ID: ",a.get("cid"),e.createElement("br",null),"- User ID: ",a.get("uid"),e.createElement("br",null),"- Company Name: ",a.get("company"),e.createElement("br",null))),e.createElement("div",{className:"actions"},e.createElement("a",{href:"#",onClick:this.exitHandler,className:"pull-left red",style:{color:"red",paddingTop:13,fontSize:11}},s.t("exit_company")),e.createElement("a",{href:"#",ref:"logoutbutton",className:"ui left labeled icon button"},s.t("expire_logout"),e.createElement("i",{className:"icon right tc-turnoff"})),e.createElement("a",{href:"https://www.basecrop.com/bang-gia",target:"_blank",className:"ui pull-right right labeled icon teal button"},s.t("expire_pay"),e.createElement("i",{className:"icon right tc-money"}))),e.createElement("div",{ref:"employeeexittrialexpired"})),e.createElement("div",{ref:"sessiontimeout",className:"ui modal"},e.createElement("div",{className:"ui large message"},e.createElement("div",{className:"content"},e.createElement("div",{className:"ui large header",style:{marginBottom:".5em"}},s.t("session_timeout_header")),e.createElement("div",{dangerouslySetInnerHTML:{__html:s.t("session_timeout_help")}})))),e.createElement("div",{ref:"companyonboard"}))}});return E}),define("language/sidebar",["baselanguage"],function(e){var t={vn:{dashboard:"Dashboard",notify:"Bảng tin",mail_inbox:"Hộp thư đến",mail_sent:"Đã gửi",mail_add:"Soạn thư mới",file:"Tài liệu công ty",employee:"Nhân viên",salary:"Phiếu lương",checkin:"Lịch sử chấm công",checkin_add:"Chấm công",employeepoint:"Chấm điểm nhân viên",hrmleave:"Xin nghỉ phép",editprofile:"Cập nhật tài khoản",support:"Liên hệ & trợ giúp",logout:"Thoát",blog:"Blog công ty",blog_manage:"Quản lý blog",blog_add:"Viết blog mới",workschedule:"Lịch làm việc",workscheduleswap:"Đổi ca",workschedule_make:"Xếp lịch làm việc",checkin_report:"Báo cáo giờ công",checkin_review:"Duyệt công",project_list:"Danh sách dự án",project_add:"Tạo dự án mới",elearning:"Tất cả khóa học",course_manage:"Quản lý khóa học",courseteacher_manage:"Quản lý giáo viên",course_enroll:"Khóa học của tôi"},en:{dashboard:"Dashboard",notify:"Bảng tin",mail_inbox:"",mail_sent:"",mail_add:"",file:"Tài liệu",employee:"Nhân viên",salary:"Phiếu lương",checkin:"Chấm công",checkin_add:"",employeepoint:"Chấm điểm nhân viên",hrmleave:"Xin nghỉ phép",editprofile:"Cập nhật tài khoản",support:"Liên hệ & trợ giúp",logout:"Thoát",blog:"Blog công ty",blog_manage:"",blog_add:"",workschedule:"",workscheduleswap:"",workschedule_make:"",checkin_report:"",checkin_review:"",project_list:"",project_add:"",elearning:"Học trực tuyến",course_manage:"",courseteacher_manage:"",course_enroll:""}};return new e({lang:t})}),define("components/sidebar",["react","backbone","eventbus","language/setting","language/sidebar","companymodule","role","pref","helper"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"SidebarComponent",show:function(){$("#sidebar").show()},hide:function(e){e="undefined"!=typeof e&&e,e&&($("#sidebar").hide(),l.isSmallScreen()&&n.trigger("pageheader:hidemenu"))},toggle:function(e){l.isSmallScreen()||(this.removeSubmenu(),"hide"==e?($("#body").addClass("nosidebar"),$(".sidebargroup.open").removeClass("open")):"show"==e||""==e?$("#body").removeClass("nosidebar"):$("#body").hasClass("nosidebar")||!$("#sidebar").is(":visible")?this.change(e.menu,{menuleftpos:e.menuleftpos}):($("#body").addClass("nosidebar"),$(".sidebargroup.open").removeClass("open")))},updateSubMenu:function(e,t){if(!l.isSmallScreen()&&e.length>0){var n="";$.each(e,function(e,a){n+="<li "+(e==t?'class="active"':"")+'><a href="'+a.link+'">'+a.text+"</a></li>"});var a=$(".sidebargroup li.active");a.find("ul").length>0?a.find("ul").html(n):a.append("<ul>"+n+"</ul>")}},checkHideHeaderMenuFromEmptySidebar:function(){$(".sidebargroup").each(function(){var e=$(this).find("a").length,t=0;$(this).find("a").each(function(){"none"==$(this).css("display")&&t++}),t==e?n.trigger("pageheader:hideitem",$(this).attr("id").replace("sidebar_","")):n.trigger("pageheader:showitem",$(this).attr("id").replace("sidebar_",""))}),n.trigger("pageheader:checksettingitem")},checkLicenseRole:function(){s.get("role").split(","),$(".sidebargroup li a").each(function(e,t){var n=$(t).attr("data-roles"),a=!1;if(""==n||"undefined"==typeof n)a=!0;else for(var i=n.split(","),s=0;s<i.length;s++)o.hasById(i[s])&&(a=!0);var l=$(t).attr("data-module"),c=!1;""==l||"undefined"==typeof l?c=!0:r.has(l)&&(c=!0),a&&c?$(t).show():$(t).hide()}),this.checkHideHeaderMenuFromEmptySidebar()},removeSubmenu:function(){$(".sidebargroup ul").remove()},showSidebar:function(e){this.show();var t=!1;return l.isSmallScreen()?($(".sidebargroup.open").hide().removeClass("open").removeClass("transition"),e.show().addClass("open"),t=!0):($(".sidebargroup.open").removeClass("open"),e.addClass("open")),t},change:function(e,t){this.removeSubmenu(),e="undefined"==typeof e?"":e;var a=e;e=a.split("/",2).join("_").replace("#","");var i=$(".sidebargroup.open").attr("id");if(!$("#sidebar_"+e).length){var r=a.split("/");e=r[0]}var o=!1;if($("#sidebar_"+e).length){var s=$("#sidebar_"+e);if(s.hasClass("sidebargroup")){var c=0;t.hasOwnProperty("menuleftpos")&&(c=t.menuleftpos,s.css("left",c+"px"));var d=s.attr("id");"undefined"!=typeof i&&i!=d?o=this.showSidebar(s):$("#sidebar").is(":visible")?(n.trigger("sidebar:hide"),l.isSmallScreen()):o=this.showSidebar(s)}else{n.trigger("pageheader:setviewtitle",s.text());var u=s.parent(),d=u.attr("id");if($(".sidebargroup *").removeClass("active"),i!=d){this.show(),$(".sidebargroup.open").removeClass("open"),u.addClass("open");var m=d.replace("sidebar_","");n.trigger("pageheader:activemenu",m)}else $("#sidebar").is(":visible")?l.isSmallScreen()?(n.trigger("sidebar:hide"),n.trigger("pageheader:hidemenu")):n.trigger("sidebar:hide"):this.show();s.addClass("active")}}n.trigger("sidebar:toggle","show"),t.hasOwnProperty("donothide")||o||this.hide()},setActiveSidebar:function(e){if(!l.isSmallScreen()&&(e=e.replace("#",""),this.removeSubmenu(),$("#sidebar_"+e).length)){var t=$("#sidebar_"+e);$(".sidebargroup.open").hide().removeClass("open").removeClass("transition"),t.show().addClass("open"),this.show()}},componentDidMount:function(){if($("#sidebar a").fastClick(function(e){e.preventDefault(),$("#sidebar li.active").removeClass("active"),$(this).parent().addClass("active");var a=t.history.navigate($(this).attr("href"),{trigger:!0});"undefined"==typeof a&&n.trigger("sidebar:hide",!0)}),n.on("sidebar:change",this.change),n.on("sidebar:hide",this.hide),n.on("sidebar:updatesubmenu",this.updateSubMenu),n.on("sidebar:checklicenserole",this.checkLicenseRole),n.on("sidebar:toggle",this.toggle),n.on("sidebar:active",this.setActiveSidebar),l.isSmallScreen()){var e=$(window).height()-$("#header").height();$(".sidebargroup").height(e);var a=$(window).width()-$(".navmenu").width();$("#sidebar").width(a)}this.checkLicenseRole()},componentWillUnmount:function(){n.off("sidebar:change")},sidebarData:[{id:"#",groups:[{icon:"tc-home",text:i.t("dashboard"),link:"#",roles:"",module:""},{icon:"tc-folder",text:i.t("file"),link:"#file",roles:"",module:"file"},{icon:"tc-gear",text:a.t("heading"),link:"#setting/menu/id/other",roles:"231,233",module:""},{icon:"tc-question",text:i.t("support"),link:"#support",roles:"",module:""}]},{id:"#mail",groups:[{icon:"tc-mail",text:i.t("mail_inbox"),link:"#mail",roles:"",module:""},{icon:"tc-arrowleft",text:i.t("mail_sent"),link:"#mail/index/mailbox/insent",roles:"",module:""},{icon:"tc-compose",text:i.t("mail_add"),link:"#mail/add",roles:"",module:""}]},{id:"#blog",groups:[{icon:"tc-book",text:i.t("blog"),link:"#blog",roles:"",module:"blog"},{icon:"tc-list",text:i.t("blog_manage"),link:"#blog/manage",roles:"320",module:"blog"},{icon:"tc-compose",text:i.t("blog_add"),link:"#blog/add",roles:"320",module:"blog"}]},{id:"#project",groups:[{icon:"tc-briefcase",text:i.t("project_list"),link:"#project",roles:"",module:""},{icon:"tc-plus-circle",text:i.t("project_add"),link:"#project/add",roles:"266",module:""}]},{id:"#elearning",groups:[{icon:"tc-book",text:i.t("elearning"),link:"#elearning",roles:"",module:"elearning"},{icon:"tc-badge",text:i.t("course_enroll"),link:"#elearning/enroll",roles:"",module:"elearning"}]},{id:"#employee",groups:[{icon:"tc-users",text:i.t("employee"),link:"#employee",roles:"",module:""},{icon:"tc-tag",text:i.t("salary"),link:"#salary",roles:"",module:"salary"},{icon:"tc-belloff",text:i.t("hrmleave"),link:"#hrmleave",roles:"",module:"leave"},{icon:"tc-starfill",text:i.t("employeepoint"),link:"#employeepoint",roles:"",module:"employeepoint"}]},{id:"#checkin",groups:[{icon:"tc-plus-circle",text:i.t("checkin_add"),link:"#checkin/add",roles:"",module:"checkin"},{icon:"tc-history",text:i.t("checkin"),link:"#checkin",roles:"",module:"checkin"},{icon:"tc-calendar-alt",text:i.t("workschedule"),link:"#workschedule/detail/_s/user_id/"+s.get("uid"),roles:"",module:"checkin"},{icon:"tc-barchart",text:i.t("checkin_report"),link:"#checkin/report",roles:"263",module:"checkin"}]},{id:"#account",groups:[{icon:"tc-user",text:i.t("editprofile"),link:"#profile",roles:"",module:""},{icon:"tc-turnoff",text:i.t("logout"),link:"#user/logout",roles:"",module:""}]}],render:function(){var t="";return $.each(this.sidebarData,function(e,n){t+='<ul id="sidebar_'+n.id.replace("/","_").replace("#","")+'" class="sidebargroup ui">',$.each(n.groups,function(e,n){t+='<li id="sidebar_'+n.link.replace("/","_")+'"><a title="'+n.text+'" class="title" data-roles="'+n.roles+'" href="'+n.link+'" data-module="'+n.module+'"><i class="icon '+n.icon+'"></i><span>'+n.text+"</span></a></li>"}),t+="</ul>"}),e.createElement("div",{id:"sidebarwrapper",className:"lite box1200",dangerouslySetInnerHTML:{__html:t}})}});return c}),define("components/hotkey",["eventbus"],function(e){return null}),define("models/mobiledevice",["basemodel","backbone","eventbus"],function(e,t,n){var a=e.extend({urlRoot:"v1/notifydevices"});return a}),define("phonegap",["backbone","eventbus","pref","helper","models/mobiledevice"],function(e,t,n,a,i){return{push:null,init:function(){null===this.push?this.initPushNotification():this.clearBadge()},clearBadge:function(){null!==this.push&&this.push.setApplicationIconBadgeNumber(function(){console.log("success clear badge")},function(){console.log("error clear badge")},0)},unregister:function(){var e=this;null!==this.push&&this.push.unregister(function(){console.log("Unregister push plugin success."),e.push=null},function(){console.log("Error while Unregister push plugin.")})},is:function(e){var t=device.platform.toLowerCase(),e=e.toLowerCase();return"android"==e&&t==e||"ios"==e&&t==e},registerDevice:function(e){console.log("Register new device for id "+e),e.length>0&&(new i).save({company_id:n.get("cid"),creator_id:n.get("uid"),app:"basecrop",push_tracker_id:e,device_id:device.uuid,platform:device.platform,screen_width:window.screen.width*window.devicePixelRatio,screen_height:window.screen.height*window.devicePixelRatio,name:device.model,brand:device.manufacturer,os:device.platform+" "+device.version,serial:device.serial},{success:function(e,t){n.set("saved_device_id",e.get("id")),console.log("Saved device id",e.get("id")),console.log("Register Device SUCCESS: ",JSON.stringify(e))},error:function(e,t){console.log("Register Device ERROR: ",JSON.stringify(t))}})},initPushNotification:function(){var t=this;this.push=PushNotification.init({browser:{},android:{},ios:{alert:"true",badge:"true",sound:"true"},windows:{}}),this.push.on("registration",function(e){console.log("RegistrationID: ",e.registrationId),n.set("pushtracker",e.registrationId),n.get("uid")>0&&n.get("cid")>0&&t.registerDevice(e.registrationId)}),this.push.on("notification",function(t){n.get("uid")>0&&(console.log("Receive Notification data"),console.log(JSON.stringify(t)),t.additionalData.foreground?(navigator.vibrate(200),navigator.notification.confirm(t.message,function(n){1==n&&"link"==t.additionalData.type&&e.history.navigate(t.additionalData.url,{trigger:!0})},t.title,["Xem chi tiết","Đóng"])):(console.log("receive data from background"),"link"==t.additionalData.type&&e.history.navigate(t.additionalData.url,{trigger:!0})))}),this.push.on("error",function(e){alert(JSON.stringify(e)),console.log("Pusher error: ",e)}),this.clearBadge()},pullToRefreshTimeout:null,checkPullToRefreshAvailable:function(){var e=!0;return(0!==$("#notifywidget").length||$("#sidebar").is(":visible"))&&(e=!1),e},enablePullToRefresh:function(e){var t=this,n=150;if(a.isPhonegap()){var i=$(document);i.swipe({swipeDown:function(n,a,i,r,o,s){t.checkPullToRefreshAvailable()&&e()},swipeStatus:function(e,a,r,o,s,l,c,d){if("down"==d&&0==i.scrollTop()&&t.checkPullToRefreshAvailable())if("move"==a){var u='<div id="muiRefresh" class="mui-refresh-main mui-refresh-main-animat mui-blue-theme">                                    <div class="mui-refresh-wrapper ">                                        <div class="mui-arrow-wrapper">                                            <div class="mui-arrow-main"></div>                                        </div>                                        <div class="mui-spinner-wrapper" style="display:none;">                                            <div class="mui-spinner-main" >                                                <div class="mui-spinner-left">                                                    <div class="mui-half-circle"></div>                                                </div>                                                <div class="mui-spinner-right">                                                    <div class="mui-half-circle"></div>                                                </div>                                            </div>                                        </div>                                    </div>                                </div>';0===$("#muiRefresh").length&&document.body.insertAdjacentHTML("beforeend",u);var m=$("#muiRefresh"),p=($(".mui-spinner-wrapper",m),$(".mui-arrow-wrapper",m),$(".mui-arrow-main",m)),h=o,f=20,g=h/f>1?1:0>h/f?0:h/f,_=h;m.show(),m.css("-webkit-transform","scale("+g+")"),m.css("opacity",g),p.css("-webkit-transform","rotate("+-(3*h)+"deg)"),clearTimeout(t.pullToRefreshTimeout),o>=n?(m.css("top",n+"px"),m.css("-webkit-transform","scale(1.5)"),t.pullToRefreshTimeout=setTimeout(function(){m.css("opacity",0),m.hide()},100)):(m.css("top",_+"px"),t.pullToRefreshTimeout=setTimeout(function(){m.css("opacity",0),m.hide()},500))}else("end"==a||"cancel"==a)&&$("#muiRefresh").css("opacity",0).hide()},threshold:n,allowPageScroll:"vertical"})}},destroyPullToRefresh:function(){a.isPhonegap()&&$(document).swipe("destroy")}}}),define("models/usersession",["basemodel","language/user"],function(e,t){var n=e.extend({urlRoot:"v1/usersessions",cacheName:"usersession",PLATFORM_API:0,PLATFORM_WEB_DESKTOP:1,PLATFORM_WEB_TABLET:3,PLATFORM_WEB_MOBILE:5,PLATFORM_APP_HYBRID:7,PLATFORM_APP_SALE:9,PLATFORM_APP_WORK:11,PLATFORM_APP_PROJECT:13,PLATFORM_APP_INVENTORY:15,STATUS_ENABLE:1,STATUS_DISABLED:3,getPlatformByBrowser:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e?this.PLATFORM_WEB_MOBILE:this.PLATFORM_WEB_DESKTOP}});return n}),define("components/textbox",["react"],function(e){var t=e.createClass({displayName:"TextboxComponent",getDefaultProps:function(){return{focus:"",required:"",label:"",id:"",type:"text"}},getValue:function(){return e.findDOMNode(this.refs.textbox).value},focus:function(){e.findDOMNode(this.refs.textbox).focus()},componentDidMount:function(){"true"==this.props.focus&&this.focus();
},render:function(){var t="field";"true"==this.props.required&&(t+=" required");var n="text";return"password"==this.props.type&&(n="password"),e.createElement("div",{className:t},e.createElement("label",null,this.props.label),e.createElement("input",{type:n,ref:"textbox",id:this.props.id}))}});return t}),define("components/company/inititem",["react"],function(e){var t=e.createClass({displayName:"CompanyInitItemComponent",getDefaultProps:function(){return{checked:!1,error:!1,text:""}},getInitialState:function(){return{checked:this.props.checked,error:this.props.error,loading:!1}},changeState:function(e,t){switch(e){case"loading":this.setState({loading:t});break;case"error":this.setState({error:t});break;case"checked":this.setState({checked:t})}},render:function(){var t="tc-checkboxsquare",n="black";return this.state.loading?t="tc-refresh":this.state.error?(t="tc-warning",n="red"):this.state.checked&&(t="tc-tick",n="green"),e.createElement("div",{className:"item"},e.createElement("i",{className:"icon "+t,style:{color:n}}),e.createElement("div",{className:"content"},e.createElement("div",{className:"description"},this.props.text)))}});return t}),define("components/company/initpopupondemand",["react","backbone","socket","basecontroller","pref","role","setting","helper","eventbus","companymodule","language/companyonboard","language/default","models/company","models/companyonboard","models/department","models/office","models/companysetting","components/company/inititem"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_){var v=e.createClass({displayName:"CompanyInitComponent",getDefaultProps:function(){return{init_step_id:0}},getJobCount:function(){return total=2},markCompanyAsInited:function(){var e=this;(new m).getInitInfo({query:{prevent_mark_init:0},success:function(t){t.hasOwnProperty("date_inited")&&t.date_inited>0&&l.trigger("onboardcommit:companyinit:getinfo",e.props.init_step_id)},error:function(){}})},handleComplete:function(){this.stepCount==this.maxStep&&($(e.findDOMNode(this.refs.buttoncontinuewrapper)).show(),this.stepCountError>0?$(e.findDOMNode(this.refs.initlabelindicator)).text(d.t("never_init_summary_done_with_error")):$(e.findDOMNode(this.refs.initlabelindicator)).text(d.t("never_init_summary_done")),this.markCompanyAsInited()),$(e.findDOMNode(this.refs.progress)).progress("increment")},handleTaskResponse:function(e,t,n){var a=this;return{success:function(t){e.success++,"undefined"!=typeof n&&null!==n&&n(t)},complete:function(){e.process++,e.process==e.total&&(t.changeState("loading",!1),e.process==e.success?t.changeState("checked",!0):(t.changeState("error",!0),a.stepCountError++),a.stepCount++,a.handleComplete())}}},saveDepartments:function(e){var t=this,n={success:0,process:0,total:e.length},a=t.refs.plan_item_department;a.changeState("loading",!0),e.forEach(function(e,r){var o={company_id:i.get("cid"),creator_id:i.get("uid")};o=$.extend(o,e),(new h).save(o,t.handleTaskResponse(n,a))})},saveOffices:function(e){var t=this,n={success:0,process:0,total:e.length},a=t.refs.plan_item_office;a.changeState("loading",!0),e.forEach(function(e,r){var o={company_id:i.get("cid"),creator_id:i.get("uid")};o=$.extend(o,e),(new f).save(o,t.handleTaskResponse(n,a))})},savePlan:function(){$(e.findDOMNode(this.refs.progress)).show(),$(e.findDOMNode(this.refs.buttonstart)).addClass("disabled"),$(e.findDOMNode(this.refs.formaction)).hide(),this.stepCount=0,this.stepCountError=0,this.maxStep=this.getJobCount(),this.saveDepartments([{name:d.t("default_department_name_1")}]),this.saveOffices([{name:d.t("default_office_name_1")}])},continueClickHandle:function(n){n.preventDefault(),$(e.findDOMNode(this.refs.modal)).modal("hide"),t.history.navigate("setting/menu/id/other",{trigger:!0})},componentDidUpdate:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.modal)).modal({autofocus:!1,context:$(e.findDOMNode(this)),closable:!1,onVisible:function(){var n=t.getJobCount();$(e.findDOMNode(t.refs.progress)).progress({duration:200,total:n})},onHidden:function(){l.trigger("companyinit:unmountpopup")}}).modal("show")},render:function(){return e.createElement("div",{id:"companyinitdialog"},e.createElement("div",{className:"ui small modal",ref:"modal"},e.createElement("div",{className:"content"},e.createElement("h3",null,"Các thông tin cơ bản bên dưới sẽ được khởi tạo:"),e.createElement("div",{className:"ui grid"},e.createElement("div",{className:"eight wide column"},e.createElement("div",{className:"ui list"},e.createElement(_,{ref:"plan_item_department",text:d.t("plan_item_department")}))),e.createElement("div",{className:"eight wide column"},e.createElement("div",{className:"ui list"},e.createElement(_,{ref:"plan_item_office",text:d.t("plan_item_office")})))),e.createElement("div",{className:"ui indicating progress","data-value":"1","data-total":"200",ref:"progress",style:{display:"none"}},e.createElement("div",{className:"bar"},e.createElement("div",{className:"progress"})),e.createElement("div",{ref:"initlabelindicator",className:"label",style:{marginTop:20}})),e.createElement("div",{ref:"buttoncontinuewrapper",style:{paddingTop:30,textAlign:"center",display:"none"}},e.createElement("a",{href:"#",onClick:this.continueClickHandle,className:"ui black button"},d.t("initContinue")))),e.createElement("div",{className:"actions",ref:"formaction"},e.createElement("a",{className:"ui noborder basic button cancel close"},u.t("close")),e.createElement("a",{ref:"buttonstart",onClick:this.savePlan,className:"ui button teal"},d.t("init")))))}});return v}),define("components/company/init",["react","backbone","socket","basecontroller","pref","role","setting","helper","eventbus","companymodule","language/companyonboard","components/company/initpopupondemand","components/sidebar","models/company","models/companyonboard"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"CompanyInitComponent",renderPopup:function(t){e.render(e.createElement(u,{init_step_id:t}),e.findDOMNode(this))},removePopup:function(){e.unmountComponentAtNode(e.findDOMNode(this))},getInitInfo:function(e){var n=this;(new p).getInitInfo({query:{prevent_mark_init:1},success:function(a){if(a.hasOwnProperty("date_inited")&&0==a.date_inited)console.log("renderPopup1"),n.renderPopup(e),console.log("renderPopup2");else{var i="setting/menu/id/order";e==(new h).STEP_HRM_INIT&&(i="setting/menu/id/other"),t.history.navigate(i,{trigger:!0}),s.showSuccess(d.t("company_init_already_go_to_setting"))}},error:function(){}})},getInitInfoSimple:function(){(new p).getInitInfo({query:{prevent_mark_init:1},success:function(t){var n=t.moduleenables.join(",");i.get("companymodule")!==n&&(i.set("companymodule",n),c.init(n),e.unmountComponentAtNode(document.getElementById("sidebar")),e.render(e.createElement(m,{}),document.getElementById("sidebar"))),i.set("allowtogglefeature",t.allow_toggle_feature),i.set("payingtype",t.paying_type)},error:function(){}})},componentWillUnmount:function(){l.off("companyinit:getinfo",this.getInitInfo),l.off("companyinit:unmountpopup",this.removePopup)},componentDidMount:function(){parseInt(i.get("cid"))>0&&parseInt(i.get("uid"))>0&&this.getInitInfoSimple(),l.on("companyinit:getinfo",this.getInitInfo),l.on("companyinit:unmountpopup",this.removePopup)},render:function(){return e.createElement("span",null)}});return f}),define("controllers/user/login",["react","backbone","socket","querystring","initquerystring","basecontroller","pref","role","setting","helper","eventbus","companysetting","companymodule","phonegap","language/user","models/company","models/employee","models/user","models/changelog","models/usersession","components/pageheader","components/sidebar","components/textbox","components/company/init","companyresource"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k){var D=e.createClass({displayName:"UserLoginController",submit:function(t){$(".ui.form").addClass("loading");var n=this,a=$(e.findDOMNode(this.refs.email)).val(),i=$(e.findDOMNode(this.refs.password)).val(),r=o.get("screenname"),s=(new y).getPlatformByBrowser(),d=(new v).CURRENT_VERSION;return $.ajax({url:l.rooturl+"v1/users/login",type:"post",dataType:"json",data:"email="+a+"&password="+i+"&screenname="+r+"&platform="+s+"&version="+d,error:function(e,t,n){c.notifyErrorAndForm(e,h),$(".ui.form").removeClass("loading"),o.set("email","")},success:function(t){if($(".ui.form").removeClass("loading"),t.success,t.message,1==t.companylist.length)n.props.loginPostProcess(t);else{var a="<p>"+h.t("selectcompany")+"</p>",i=0;$.each(t.companylist,function(e,t){t.planoffice>0&&(i++,a+='<a class="item" data-screenname="'+t.screenname+'" style="padding:10px 0;">                                    <i class="large middle aligned icon tc-avatar" style="font-size: 1.5em;"></i>                                    <div class="content">                                        <span class="header" style="color:#555; font-weight: normal;font-size: 1.5em; line-height: 1.14285714em">'+t.name+"</span>                                    </div>                                </a>")}),i>0?($(e.findDOMNode(n.refs.form)).hide(),$(e.findDOMNode(n.refs.selectcompanybox)).html(a),n.verticalAlign(),$(e.findDOMNode(n.refs.selectcompanybox)).find(".item").bind("click",n.selectcompany)):c.showError(h.t("error_company_notfound"))}}}),!1},selectcompany:function(t){t.stopPropagation();var n=$(t.currentTarget).attr("data-screenname");o.set("screenname",n),$(e.findDOMNode(this.refs.selectcompanybox)).hide(),$(e.findDOMNode(this.refs.form)).show(),$(e.findDOMNode(this.refs.btnLogin)).trigger("click")},initLoginFromTokenWithJwt:function(e,t,n){var a=this;(new _).loginFromJwt(e,t,n,{success:function(e){a.props.loginPostProcess(e)}})},initLoginFromToken:function(){var e=this,n="",a=t.history.getFragment();if(a.indexOf("user/login/token/")>=0){var i=a.split("/");i.length>=4&&i[3].length>0&&(n=i[3],(new g).getDataFromEmployeeToken(n,{success:function(t){t.hasOwnProperty("jwt")&&t.jwt.length>0&&e.initLoginFromTokenWithJwt(t.jwt,n,t.employee)}}))}},setDefaultEmailFromPreviousSession:function(){var t=o.get("email");""!=t&&null!=t&&($(e.findDOMNode(this.refs.email)).val(t),$(e.findDOMNode(this.refs.password)).focus())},componentDidMount:function(){this.initLoginFromToken(),e.unmountComponentAtNode(document.getElementById("forgotpassbox")),c.setTitle("Welcome to company"),$(".ui.form").form({fields:{email:{identifier:"email",rules:[{type:"empty",prompt:h.t("error_account_require")},{type:"contains[@]",prompt:h.t("error_account_format_invalid")}]},password:{identifier:"password",rules:[{type:"empty",prompt:h.t("error_password_require")}]}},inline:!0,onSuccess:this.submit}),$("body").addClass("body_cloud"),this.verticalAlign(),$("#logindialog").transition("fade in"),this.setDefaultEmailFromPreviousSession()},componentWillMount:function(){$("#notifications").remove(),e.unmountComponentAtNode(document.getElementById("registerbox"))},componentWillUnmount:function(){$("body").removeClass("body_cloud")},verticalAlign:function(){if($(window).width()>=640){var t=$("#logindialog").height(),n=$(window).height(),a=(n-t-100)/2;0>a&&(a=30),$("#logindialog").css("marginTop",a),$(window).width<=960?$(e.findDOMNode(this.refs.logininner)).addClass("eight wide"):$(e.findDOMNode(this.refs.logininner)).addClass("four wide")}},render:function(){var t={logindialog:{position:"absolute",top:0,width:"100%",zIndex:1001,display:"none"},forgotpass:{paddingTop:"0.6em"},logo:{textAlign:"center",marginBottom:"1em"}};return e.createElement("div",null,e.createElement("div",{id:"logindialog",style:t.logindialog},e.createElement("div",{className:"ui stackable four column grid"},e.createElement("div",{className:"column centered",id:"logininner",ref:"logininner"},e.createElement("h1",{align:"center",style:t.logo},e.createElement("img",{src:"imgs/logo/"+l.wlName+".png",width:"240"})),e.createElement("div",{className:"ui hidden small error message"},e.createElement("div",{className:"header"},h.t("login_error_header")),e.createElement("p",null)),e.createElement("form",{ref:"form",className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,h.t("account")),e.createElement("input",{type:"text",focus:"true",ref:"email",id:"email"})),e.createElement("div",{className:"field required"},e.createElement("label",null,h.t("password")),e.createElement("input",{type:"password",ref:"password",id:"password"})),e.createElement("button",{ref:"btnLogin",className:"ui button teal",type:"submit"},h.t("login_submit")),e.createElement("a",{href:"#user/forgotpass",className:"ui floated right pull-right",style:t.forgotpass},h.t("forgotpass")),e.createElement("div",{className:"ui divider"}),c.isPhonegapIos()?null:e.createElement("div",null,e.createElement("a",{href:"https://www.basecrop.com/tao-tai-khoan",className:"nocolor",style:{color:"#777"},title:h.t("create_company_title")},e.createElement("small",null,"« ",h.t("create_company"))))),e.createElement("div",{ref:"selectcompanybox",className:"ui relaxed divided list"})))))}}),T=r.extend({run:function(){e.render(e.createElement(D,{loginPostProcess:this.loginPostProcess}),document.getElementById("loginbox"))},loginPostProcess:function(a,r){r="undefined"!=typeof r&&r;var l=a.jwt;if(a.hasOwnProperty("enable_short_jwt")&&a.enable_short_jwt&&a.hasOwnProperty("jwthash")&&(l=a.jwthash),$.ajaxSetup({beforeSend:function(e,t){-1==t.url.indexOf("?")&&(t.url+="?"),t.url+="&__jwtAuthorization="+l}}),o.set("Authorization",l),o.set("employeetoken",a.employeetoken),o.set("uid",a.user.id),o.set("email",a.user.email),o.set("fullname",a.user.fullname),o.set("avatar",a.user.avatar),$("#headerfullname span").html(a.user.fullname),o.set("cid",a.companylist[0].id),o.set("company",a.companylist[0].name),o.set("domain",a.companylist[0].hasOwnProperty("domain")?a.companylist[0].domain:""),o.set("owner",a.companylist[0].owner),o.set("planoffice",a.companylist[0].planoffice),o.set("planstore",a.companylist[0].planstore),o.set("istrial",a.companylist[0].istrial),o.set("datetrialexpired",a.companylist[0].datetrialexpired),o.set("role",a.role),o.set("screenname",a.companylist[0].screenname),o.set("crmemailenable",a.companylist[0].crmemailenable),o.set("crmsmsenable",a.companylist[0].crmsmsenable),o.set("crmzaloenable",a.companylist[0].crmzaloenable),k.initializeLoad(),s.init(a.role),moment.locale("vi"),r)c.showSuccess("Đăng nhập thành công.",1e3);else{if(c.isPhonegap())t.history.navigate("index",{trigger:!0});else{var d=i.get("from");"telegram"==d?t.history.navigate("telegram",{trigger:!0}):t.history.navigate("index",{trigger:!0})}$("#logindialog").transition({animation:"slide down",onComplete:function(){e.unmountComponentAtNode(document.getElementById("loginbox"))}}),$("#header, #body").transition("fade")}o.set("companysetting",JSON.stringify(a.companysetting)),u.init(a.companysetting),o.set("companymodule",a.companylist[0].modules.join(",")),o.set("companymodulegroupdisabled",a.companylist[0].modulegroupdisabled.join(",")),m.init(a.companylist[0].modules.join(","),a.companylist[0].modulegroupdisabled.join(",")),e.render(e.createElement(E,{key:(new Date).getTime()}),document.getElementById("header")),e.render(e.createElement(b,{key:(new Date).getTime()}),document.getElementById("sidebar")),e.render(e.createElement(w,{key:(new Date).getTime()}),document.getElementById("companyinitbox")),n.init(),c.isPhonegap()&&(p.init(),null!=o.get("pushtracker")&&o.get("pushtracker").length>0&&(console.log("Register device after login"),p.registerDevice(o.get("pushtracker")))),"undefined"!=typeof ga&&null!=ga&&(ga("set","userId",o.get("uid")),ga("set","companyId",o.get("cid")))}});return T}),define("controllers/user/logout",["react","socket","backbone","helper","basecontroller","companyresource","phonegap","eventbus","models/user","pref"],function(e,t,n,a,i,r,o,s,l,c){var d=i.extend({resetUserSessionInfo:function(){r.clearCache()},run:function(i){i="undefined"==typeof i||i,i&&(new l).logout({success:function(e){}}),$.ajaxSetup({beforeSend:function(){}}),c.remove("Authorization"),c.remove("screenname"),c.remove("domain"),c.remove("uid"),c.remove("fullname"),c.remove("avatar"),c.remove("cid"),c.remove("license"),c.remove("role"),$("#header, #body").transition("fade"),t.logout(),a.isPhonegap()&&o.unregister(),"undefined"!=typeof ga&&null!=ga&&(ga("set","userId",0),ga("set","companyId",0)),e.unmountComponentAtNode(document.getElementById("container")),e.unmountComponentAtNode(document.getElementById("header")),e.unmountComponentAtNode(document.getElementById("sidebar")),this.resetUserSessionInfo(),n.history.loadUrl("user/login")}});return d}),define("components/relogin",["react","backbone","socket","basecontroller","pref","role","setting","helper","eventbus","companysetting","phonegap","language/user","models/company","controllers/user/login","controllers/user/logout"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"ReloginComponent",getDefaultProps:function(){return{}},submitForm:function(){var t=this,n=$(e.findDOMNode(this.refs.password)).val();if(0==n.length)s.showError("Bạn chưa nhập mật khẩu.");else if(n.length<6)s.showError("Mật khẩu quá ngắn");else{var a=i.get("email"),r=i.get("screenname");$(e.findDOMNode(t.refs.form)).addClass("loading"),$.ajax({headers:{Authorization:""},beforeSend:function(e,t){},url:o.rooturl+"v1/users/login",type:"post",dataType:"json",data:"email="+a+"&password="+n+"&screenname="+r,error:function(n,a,i){s.notifyError(n,u),$(e.findDOMNode(t.refs.form)).removeClass("loading")},success:function(n){$(e.findDOMNode(t.refs.form)).removeClass("loading"),n.success,n.message,1==n.companylist.length&&(l.trigger("app.start"),(new p).loginPostProcess(n,!0),t.removeThis())}})}},removeThis:function(){$(e.findDOMNode(this)).remove()},onInputSubmit:function(t){"Enter"==t.key&&$(e.findDOMNode(this.refs.btnLogin)).trigger("click")},componentDidUpdate:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.modal)).modal({autofocus:!1,context:$(e.findDOMNode(this)),closable:!1,onVisible:function(){setTimeout(function(){$(e.findDOMNode(t.refs.password)).trigger("focus")},200)},onHide:function(){}}).modal("show"),$(e.findDOMNode(this.refs.btnLogin)).fastClick(function(){t.submitForm()}),$(e.findDOMNode(this.refs.btnLogout)).fastClick(function(){var e=confirm("Bạn có thực sự muốn đăng xuất?");1==e&&(l.trigger("app.start"),(new h).run(!1),t.removeThis())})},render:function(){return e.createElement("div",{id:"relogindialog"},e.createElement("div",{className:"ui modal",ref:"modal"},e.createElement("div",{className:"content"},e.createElement("div",{className:"ui ignored warning message"},e.createElement("p",null,"Phiên đăng nhập hiện tại đã hết hạn, vui lòng đăng nhập lại.")),e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"field"},e.createElement("label",null,"Email"),e.createElement("input",{type:"text",disabled:"disabled",value:i.get("email")})),e.createElement("div",{className:"field"},e.createElement("label",null,"Mật khẩu"),e.createElement("input",{type:"password",ref:"password",onKeyPress:this.onInputSubmit})))),e.createElement("div",{className:"actions"},e.createElement("button",{ref:"btnLogout",className:"ui noborder basic button",type:"button"},"Đăng xuất"),e.createElement("button",{ref:"btnLogin",className:"ui button teal",type:"button"},"Tiếp tục"))))}});return f}),define("language/file",["baselanguage"],function(e){var t={vn:{heading:"Files",heading_add_dir:"Tạo thư mục mới",heading_edit_dir:"Thay đổi thông tin thư mục",heading_upload_file:"Upload tài liệu / tập tin",heading_update_file:"Thay đổi thông tin tài liệu / tập tin",home:"Trang chủ",gotoparentTooltip:"Lên thư mục cha",button_open:"Xem nội dung thư mục",button_download:"Tải về",button_preview:"Xem trước",button_edit:"Chỉnh sửa nội dung",button_delete_directory:"Xóa thư mục này",button_delete_file:"Xóa tài liệu này",button_attach_file:"Đính kèm file..",processing_after_upload:"Đang xử lý file. Xin chờ...",download:"Tải về",to_parent_dir:"Lên thư mục cha",create_dir:"Tạo thư mục",upload_file:"Tải tập tin lên",name:"Tên",size:"Kích thước",type:"Loại",date_created:"Ngày tạo",creator_id:"Tạo bởi",dir_name:"Tên thư mục",file_name:"Tên tài liệu",rename:"Đổi tên",this_dir:"Thư mục này",this_file:"Tập tin này",remove:"Xóa",choose_function:"Chọn chức năng bạn muốn thực hiện",click_to_open:"Mở thư mục này",click_to_view:"Xem nội dung",add_dir_success:"Tạo thành công thư mục",update_dir_success:"Cập nhật thành công thư mục",remove_dir_success:"Xóa thành công thư mục",update_file_success:"Cập nhật thành công tài liệu",remove_file_success:"Xóa thành công tài liệu",error:"Lỗi",error_add:"Có lỗi khi lưu thông tin",error_delete:"Có lỗi khi xóa thông tin",error_parent_directory_forbidden:"Thư mục cha không hợp lệ",error_parent_directory_not_found:"Không tìm thấy thư mục cha",error_parent_directory_invalid_project:"Dự án thư mục cha không hợp lệ",error_file_not_found:"Không tìm thấy tài liệu",error_project_not_found:"Không tìm thấy dự án",error_delete_file_owner_incorrect:"Không tìm thấy dữ liệu cần xóa",error_object_type_invalid:"Loại tập tin không hợp lệ",error_file_name_required:"Tiêu đề là bắt buộc",error_directory_name_required:"Tên thư mục là bắt buộc",error_directory_name_existed:"Đã tồn tại thư mục này",error_file_type_invalid:"Định dạng tập tin không hợp lệ (cho phép: MOV, MP3, 0GG, DOC, DOCX, XLS, XLSX, CSV, PDF, EPUB, ZIP, RAR, GZ, GZIP, XML, TXT, JPG, JPEG, PNG, PPT, PPTX, RTF, PSD, AI, EPS, SVG)",error_file_size_invalid:"Dung lượng tập tin quá lớn (cho phép: tối đa 25 MB)",error_system_directory_can_not_created:"Không thể tạo thư mục trên hệ thống",error_system_directory_is_not_writable:"Không thể ghi tập tin vào thư mục trên hệ thống",error_system_file_can_not_copy:"Không thể copy tập tin vào thư mục hệ thống",error_file_record_can_not_update:"Không thể cập nhật dữ liệu sau khi upload tập tin",error_directory_is_not_empty:"Không thể xóa thư mục này vì đang có tài liệu bên trong.",sort_date_created:"Ngày tạo",preview_heading:"Xem trước",preview_not_available:'Tập tin này không thể xem trước trên website. Nhấn nút "Tải về" bên dưới để tải về máy tính của bạn để mở.',zerodata_text:"Chưa có tài liệu nào.",zerodata_subtext:"Nhấn nút bên dưới để upload tài liệu.",UPLOAD_LIMIT_EXCEEDED:"Số lượng file upload vượt quá số lượng cho phép",do_insert:"Nhúng file",image_url:"URL của hình",image_caption:"Mô tả hình",image_has_link:"Liên kết website",image_link_url:"URL trang web",image_link_tooltip:"Tooltip",image_link_new_window:"Mở cửa sổ mới",image_width:"Chiều rộng hình",image_height:"Chiều cao hình",image_keep_ratio:"Giữ tỷ lệ kích thước",file_caption:"Tiêu đề hiển thị",file_link_tooltip:"Tooltip",file_link_new_window:"Mở cửa sổ mới",fileadd_done:"Hoàn tất"},en:{heading:"Files",heading_add_dir:"Tạo thư mục mới",heading_edit_dir:"Thay đổi thông tin thư mục",heading_upload_file:"Upload tài liệu / tập tin",heading_update_file:"Thay đổi thông tin tài liệu / tập tin",home:"Trang chủ",gotoparentTooltip:"Lên thư mục cha",button_open:"Xem nội dung thư mục",button_download:"Tải về",button_preview:"Xem trước",button_edit:"Chỉnh sửa nội dung",button_delete_directory:"Xóa thư mục này",button_delete_file:"Xóa tài liệu này",button_attach_file:"Đính kèm file..",processing_after_upload:"Đang xử lý file. Xin chờ...",download:"Tải về",to_parent_dir:"Lên thư mục cha",create_dir:"Tạo thư mục",upload_file:"Tải tập tin lên",name:"Tên",size:"Kích thước",type:"Loại",date_created:"Ngày tạo",creator_id:"Tạo bởi",dir_name:"Tên thư mục",file_name:"Tên tài liệu",rename:"Đổi tên",this_dir:"Thư mục này",this_file:"Tập tin này",remove:"Xóa",choose_function:"Chọn chức năng bạn muốn thực hiện",click_to_open:"Mở thư mục này",click_to_view:"Xem nội dung",add_dir_success:"Tạo thành công thư mục",update_dir_success:"Cập nhật thành công thư mục",remove_dir_success:"Xóa thành công thư mục",update_file_success:"Cập nhật thành công tài liệu",remove_file_success:"Xóa thành công tài liệu",error:"Lỗi",error_add:"Có lỗi khi lưu thông tin",error_delete:"Có lỗi khi xóa thông tin",error_parent_directory_forbidden:"Thư mục cha không hợp lệ",error_parent_directory_not_found:"Không tìm thấy thư mục cha",error_parent_directory_invalid_project:"Dự án thư mục cha không hợp lệ",error_file_not_found:"Không tìm thấy tài liệu",error_project_not_found:"Không tìm thấy dự án",error_delete_file_owner_incorrect:"Không tìm thấy dữ liệu cần xóa",error_object_type_invalid:"Loại tập tin không hợp lệ",error_file_name_required:"Tiêu đề là bắt buộc",error_directory_name_required:"Tên thư mục là bắt buộc",error_directory_name_existed:"Đã tồn tại thư mục này",error_file_type_invalid:"Định dạng tập tin không hợp lệ (cho phép: MOV, MP3, 0GG, DOC, DOCX, XLS, XLSX, CSV, PDF, EPUB, ZIP, RAR, GZ, GZIP, XML, TXT, JPG, JPEG, PNG, PPT, PPTX, RTF, PSD, AI, EPS, SVG)",error_file_size_invalid:"Dung lượng tập tin quá lớn (cho phép: tối đa 25 MB)",error_system_directory_can_not_created:"Không thể tạo thư mục trên hệ thống",error_system_directory_is_not_writable:"Không thể ghi tập tin vào thư mục trên hệ thống",error_system_file_can_not_copy:"Không thể copy tập tin vào thư mục hệ thống",error_file_record_can_not_update:"Không thể cập nhật dữ liệu sau khi upload tập tin",error_directory_is_not_empty:"Không thể xóa thư mục này vì đang có tài liệu bên trong.",sort_date_created:"Ngày tạo",preview_heading:"Xem trước",preview_not_available:'Tập tin này không thể xem trước trên website. Nhấn nút "Tải về" bên dưới để tải về máy tính của bạn để mở.',zerodata_text:"Chưa có tài liệu nào.",zerodata_subtext:"Nhấn nút bên dưới để upload tài liệu.",UPLOAD_LIMIT_EXCEEDED:"Số lượng file upload vượt quá số lượng cho phép",do_insert:"Nhúng file",image_url:"URL của hình",image_caption:"Mô tả hình",image_has_link:"Liên kết website",image_link_url:"URL trang web",image_link_tooltip:"Tooltip",image_link_new_window:"Mở cửa sổ mới",image_width:"Chiều rộng hình",image_height:"Chiều cao hình",image_keep_ratio:"Giữ tỷ lệ kích thước",file_caption:"Tiêu đề hiển thị",file_link_tooltip:"Tooltip",file_link_new_window:"Mở cửa sổ mới",fileadd_done:"Hoàn tất"}};return new e({lang:t})}),define("models/file",["basemodel","pref","helper","setting","eventbus","language/file"],function(e,t,n,a,i,r){var o=e.extend({urlRoot:"v1/files",initAjaxUpload:function(e,n,o,s,l,c){c=c||{};var d=999;c.hasOwnProperty("uploadlimit")&&parseInt(c.uploadlimit)>0&&(d=c.uploadlimit);var u=!1;c.hasOwnProperty("fileType")&&(u=c.fileType);var m=r.t("button_attach_file");c.hasOwnProperty("linkText")&&(m=c.linkText);var p="tc-link";c.hasOwnProperty("linkIcon")&&(p=c.linkIcon);var h="25MB";c.hasOwnProperty("fileSizeLimit")&&(h=c.fileSizeLimit);var f={__jwtAuthorization:t.get("Authorization"),company_id:t.get("cid"),creator_id:t.get("uid"),did:parseInt(n)||0,object_type:o,object_id:s,is_directory:0,status:l,return_success_as_status_200:!0};$(e).uploadifive({uploadScript:a.rooturl+"v1/files",fileObjName:"ffile",buttonClass:"ajaxfilebtn",fileSizeLimit:h,fileType:u,buttonText:'<i class="icon '+p+'"></i> '+m,formData:f,uploadLimit:d,onInit:function(){},onProgress:function(e,t){if(t.lengthComputable)var n=Math.round(t.loaded/t.total*100);e.queueItem.find(".fileinfo").html(" - "+n+"%"),e.queueItem.find(".progress-bar").css("width",n+"%"),100==n&&e.queueItem.find(".fileinfo").html(' - <img src="/imgs/mini_indicator.gif" />'+r.t("processing_after_upload"))},onAddQueueItem:function(e){"function"==typeof c.onAddQueueItem&&c.onAddQueueItem(e)},onCancel:function(){"function"==typeof c.onCancel&&c.onCancel(file)},onUploadComplete:function(e,t){var n=e.queueItem,a=JSON.parse(t);if(a.id>0){var r='<input type="hidden" class="attachedfileid" data-id="'+a.id+'" name="fattachedfileid['+a.id+']" value="'+e.name+'" />';$(n).append(r),i.trigger("file:append",a)}"function"==typeof c.onUploadComplete&&c.onUploadComplete(e,a)},onQueueComplete:function(e){e.successful>0,"function"==typeof c.onQueueComplete&&c.onQueueComplete(e)},onError:function(e,t){if(t.hasOwnProperty("xhr")){var n="";if(422==t.xhr.status){var a=JSON.parse(t.xhr.response);if(a.hasOwnProperty("error"))for(var i=0;i<a.error.length;i++)n=r.t(a.error[i])}else n=r.t("error_add")+" (Server Status: "+t.xhr.status+")";var o=t.queueItem[0];$(o).addClass("error"),$(o).find(".fileinfo").text(" - "+r.t("error")+": "+n)}"function"==typeof c.onError&&c.onError(e,t)}})},STATUS_ENABLE:1,STATUS_DISABLED:3,STATUS_PENDING:5,getIcon:function(){var e="";if(1==this.get("is_directory"))e="imgs/filetype/folder_special.png";else{var t=this.get("extension");e=""==t?"folder.png":this.isImage()?"jpg.png":"pdf"==t?"pdf.png":"html"==t?"html.png":"xls"==t||"xlsx"==t?"xls.png":this.isAudio()?"mp3.png":this.isVideo()?"mov.png":$.inArray(t,["ppt","pptx"])>=0?"ppt.png":$.inArray(t,["doc","docx"])>=0?"doc.png":$.inArray(t,["zip","gz","bzip","gzip","7z"])>=0?"zip.png":$.inArray(t,["rar"])>=0?"rar.png":"html.png",e="imgs/filetype/"+e}return e},getDownloadUrl:function(e){e="undefined"!=typeof e&&e;var t="";return t=""!=this.get("full_directory_path")?this.get("full_directory_path"):a.rooturl+"v1/files/download?id="+this.get("id")+"&hash="+this.get("md5_hash")+"&path="+encodeURIComponent(this.get("file_path")),e&&(""!=this.get("file_preview")?t=this.get("file_preview"):this.isImage()?t=a.rooturl+"v1/files/download?id="+this.get("id")+"&ispreview=1&hash="+this.get("md5_hash")+"&path="+encodeURIComponent(this.get("file_path")):"pdf"==this.get("extension")||(t="")),t},isImage:function(){return $.inArray(this.get("extension"),["jpg","jpeg","png","gif","ai","psd","tiff"])>=0},isAudio:function(){return $.inArray(this.get("extension"),["mp3","ogg","wav","wma"])>=0},isVideo:function(){return $.inArray(this.get("extension"),["mp4","mov","avi"])>=0},isMedia:function(){return this.isAudio()||this.isVideo()},getThumbnail:function(){var e="";if(this.isImage()){var t=this.get("thumbnail");if(t.length>0)e=t;else var e=a.rooturl+"v1/files/thumbnail?id="+this.get("id")+"&hash="+this.get("md5_hash")+"&path="+encodeURIComponent(this.get("file_path"))}else e=this.getIcon();return e},getDisplayType:function(){var e="";if(1==this.get("is_directory"))e="Directory";else{var t=this.get("extension");e=this.isImage()?"Image":this.isMedia()?"Media":$.inArray(t,["pdf","epub","mobi"])>=0?"Ebook":$.inArray(t,["ppt","pptx"])>=0?"Presentation":$.inArray(t,["xls","xlsx","csv"])>=0?"Spreadsheet":$.inArray(t,["txt","html","css","js","xml"])>=0?"Text":$.inArray(t,["doc","docx"])>=0?"Document":$.inArray(t,["zip","rar","7z","gz","bz","bz2","gzip"])>=0?"Compressed File":"Other"}return e},isDirectory:function(){return 1==this.get("is_directory")},getSize:function(){var e="";return this.isDirectory()||(e=n.formatFileSize(this.get("size_in_byte"))),e},OBJECTTYPE_FILE:10,OBJECTTYPE_FILE_PERSONAL:11,OBJECTTYPE_PROJECT:20,OBJECTTYPE_PROJECT_ISSUE:21,OBJECTTYPE_PROJECT_ISSUE_COMMENT:22,OBJECTTYPE_PROJECT_STORY:23,OBJECTTYPE_PROJECT_STORY_COMMENT:24,OBJECTTYPE_ACTIVITY:30,OBJECTTYPE_MESSAGE:40,OBJECTTYPE_CALENDAR_EVENT:60,OBJECTTYPE_DISCUSSION:70,OBJECTTYPE_DISCUSSION_COMMENT:71,OBJECTTYPE_FILEREVISION:80,OBJECTTYPE_NEWSCOMMENT:81,OBJECTTYPE_NEWS:82,OBJECTTYPE_WORKGROUP:90,OBJECTTYPE_CRM_CONTRACTSTAGE:100,OBJECTTYPE_FLOWACTION:110,OBJECTTYPE_HAPPYCARE:120});return o}),define("components/file/filepreviewpdf",["react","helper","eventbus","pref"],function(e,t,n,a){var i=e.createClass({displayName:"FilePreviewPdfComponent",getDefaultProps:function(){return{url:""}},componentWillUnmount:function(){},componentDidMount:function(){},render:function(){return e.createElement("div",{className:"pdfviewer"},e.createElement("embed",{src:this.props.url,width:"100%",height:"500",type:"application/pdf"}))}});return i}),define("components/file/filepreviewpagination",["react","helper","eventbus","pref","language/file","language/default","models/file"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"FilePreviewPaginationComponent",getDefaultProps:function(){
return{items:[],current_id:0}},getCurrentPosition:function(){var e=this,t=0;return this.props.items.map(function(n,a){n.id===e.props.current_id&&(t=a+1)}),t},gotoFile:function(e){if(e>0&&e<=this.props.items.length){var t=this.props.items[e-1];t.gallery=this.props.items,n.trigger("filepreview",t)}},bindKeyboard:function(e){if(e.hasOwnProperty("key")){var t=this.getCurrentPosition();"ArrowRight"==e.key?this.gotoFile(t+1):"ArrowLeft"==e.key&&this.gotoFile(t-1)}},componentWillUnmount:function(){$(document).unbind("keydown",this.bindKeyboard)},componentDidMount:function(){$(document).bind("keydown",this.bindKeyboard)},render:function(){var t=a=!1,n=this.getCurrentPosition(),t=1===n,a=n===this.props.items.length;return e.createElement("div",{id:"filepreview-pagination",className:"ui icon small buttons pull-left"},e.createElement("button",{className:"ui button"+(t?" disabled":""),onClick:this.gotoFile.bind(this,n-1)},e.createElement("i",{className:"tc-left icon"})),e.createElement("button",{className:"ui basic button"},n," / ",this.props.items.length),e.createElement("button",{className:"ui button"+(a?" disabled":""),onClick:this.gotoFile.bind(this,n+1)},e.createElement("i",{className:"tc-right icon"})))}});return s}),define("components/file/filepreview",["react","helper","eventbus","pref","language/file","language/default","models/file","components/file/filepreviewpdf","components/file/filepreviewpagination"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"FilePreviewComponent",getDefaultProps:function(){return{data:{id:0,gallery:[]}}},initPreview:function(){new o(this.props.data)},showPopup:function(){var t=this,a=$(e.findDOMNode(this.refs.filepreview));a.modal({context:this.getDOMNode(),closable:!0,onVisible:function(){t.initPreview(),setTimeout(function(){a.modal("refresh")},100)},onHidden:function(){n.trigger("filepreviewunmount")}}).modal("show")},componentWillUnmount:function(){},componentDidMount:function(){this.showPopup()},render:function(){var n=new o(this.props.data),a=n.getDownloadUrl(!0),c=null,d=!1;if(a.length>0){var u=t.fileExtension(a);$.inArray(u,["jpg","png","jpeg"])>=0?c=e.createElement("img",{src:a,style:{maxWidth:"100%",height:"auto"}}):(d=!0,c=e.createElement(s,{url:a}))}else c=e.createElement("span",null,i.t("preview_not_available"));return e.createElement("div",{id:"filepreview-inner"},e.createElement("div",{className:"ui small long modal",ref:"filepreview"},e.createElement("div",{className:"header",style:{display:d?"none":"block"}},e.createElement("span",{className:"hideonsmall"},"[",i.t("preview_heading"),"] "),this.props.data.title,e.createElement("a",{className:"pull-right small basic ui noborder icon button hideonsmall",href:n.getDownloadUrl(),target:"_blank",title:i.t("button_download")},e.createElement("i",{className:"icon tc-download"}))),e.createElement("div",{className:"content nopadding"},null==c?"":c),e.createElement("div",{className:"actions"},e.createElement(l,{items:this.props.data.gallery,current_id:this.props.data.id}),e.createElement("div",{className:"ui noborder basic close cancel button"},r.t("close")),e.createElement("a",{className:"ui teal button",href:n.getDownloadUrl(),target:"_blank",title:i.t("button_download")},i.t("button_download")))))}});return c}),define("components/file/filepreviewwrapper",["react","helper","eventbus","pref","language/file","language/default","components/file/filepreview"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"FilePreviewWrapperComponent",getDefaultProps:function(){return{}},filePreviewHandler:function(t){e.render(e.createElement(o,{data:t}),e.findDOMNode(this.refs.filepreview))},unmountFilePreviewHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.filepreview))},componentWillUnmount:function(){n.off("filepreview",this.filePreviewHandler),n.off("filepreviewunmount",this.unmountFilePreviewHandler)},componentDidMount:function(){n.on("filepreview",this.filePreviewHandler),n.on("filepreviewunmount",this.unmountFilePreviewHandler)},render:function(){return e.createElement("div",{ref:"filepreview"})}});return s}),define("registrystore",[],function(){return{datastore:{},get:function(e){var t=this.datastore[e];return null==t&&(t=""),t},reset:function(){this.datastore={}},has:function(e){var t=this.datastore[e];return"undefined"!=typeof t},set:function(e,t){return this.datastore[e]=t},remove:function(e){return!0}}}),define("app",["backbone","react","router","basecontroller","backbonereactcomponent","pref","setting","helper","role","license","language/default","components/appstartloader","components/globalloadindicator","components/beeper/list","components/pageheader","components/sidebar","components/hotkey","components/relogin","components/company/init","components/file/filepreviewwrapper","models/company","initquerystring","eventbus","companyresource","socket","registrystore","phonegap","companysetting","companymodule"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C){var M=function(){$("#initpageloader").remove();var a=r.get("Authorization");(null===a||null==a||"null"==a||"undefined"==typeof a)&&(a=""),$.ajaxSetup({beforeSend:function(e,t){a.length>0&&(t.url,-1==t.url.indexOf("?")&&(t.url+="?"),t.url+="&__jwtAuthorization="+a)},statusCode:{400:function(e,n){if(e.hasOwnProperty("responseJSON")&&e.responseJSON.hasOwnProperty("error")){var a=e.responseJSON.error[0];("error_jwt_expired"==a||"error_jwt_blacklisted"==a||"error_jwt_hash_not_found"==a)&&($("#relogindialog").length||t.render(t.createElement(_,{}),document.getElementById("reloginbox")))}$("#appstartloader").hide(0,function(){t.unmountComponentAtNode(document.getElementById("appstartloader"))})},401:function(t,n){var a=r.get("Authorization");a.length>0?t.hasOwnProperty("responseText")&&(t.responseText.indexOf("JWT Token error")>=0||t.responseText.indexOf("error_token_empty")>=0)&&($.notification({content:"JWT Token error: Signature verification failed. Redirect to Login page...",timeout:3e3,error:!0}),r.set("Authorization",""),r.set("cid",0),r.set("screenname",""),r.set("uid",0),document.location.reload()):e.history.loadUrl("/user/login",!0)},403:function(){},500:function(){$.notification({content:d.t("notify_error_500"),timeout:1e4,error:!0})}}}),r.set("sessionid",s.guid()),b.init(s.parseQuerystring(window.location.search)),w.initialize(),l.init(r.get("role")),t.render(t.createElement(h,{}),document.getElementById("header")),t.render(t.createElement(f,{}),document.getElementById("sidebar")),t.render(t.createElement(p,{}),document.getElementById("tcbeeper")),t.render(t.createElement(y,{}),document.getElementById("filepreview")),t.render(t.createElement(m,{}),document.getElementById("globalloadindicator")),(r.get("Authorization").length>0||""!=r.get("platform"))&&($("#header, #body").transition("fade"),N.trigger("sidebar:checklicenserole"),k.init(),null!=r.get("companysetting")&&"undefined"!=typeof r.get("companysetting")&&x.init(r.get("companysetting")),null!=r.get("companymodule")&&"undefined"!=typeof r.get("companymodule")&&C.init(r.get("companymodule"),r.get("companymodulegroupdisabled")),t.render(t.createElement(v,{}),document.getElementById("companyinitbox")),""!=r.get("uid")&&"undefined"!=typeof ga&&null!=ga&&(ga("set","userId",r.get("uid")),ga("set","companyId",r.get("cid")))),$(document).idleTimer({timeout:1e4,idle:!0}),$(document).on("idle.idleTimer",function(e,t,n){__DOCUMENT_IS_IDLE=!0}),$(document).on("active.idleTimer",function(e,t,n,a){__DOCUMENT_IS_IDLE=!1}),r.get("cid")>0?b.has("debug")?($("#appstartloader").hide(0,function(){t.unmountComponentAtNode(document.getElementById("appstartloader"))}),n.initialize()):(t.render(t.createElement(u,{}),document.getElementById("appstartloader")),N.on("app.start",function(){e.History.started||n.initialize()})):n.initialize()};return{initialize:M}}),require.config({baseUrl:"./js",waitSeconds:30,paths:{underscore:"libs/underscore/underscore",backbone:"libs/backbone/backbone",backbonereactcomponent:"libs/backbone/backbonereactcomponent",react:"libs/react/react-with-addon-dev",JSXTransformer:"JSXTransformer-modified-for-requirejxs",pref:"registry/pref",querystring:"registry/querystring",initquerystring:"registry/initquerystring",setting:"registry/setting",helper:"registry/helper",license:"registry/license",role:"registry/role",ajaxstore:"registry/ajaxstore",companyresource:"registry/companyresource",socket:"registry/socket",registrystore:"registry/registrystore",phonegap:"registry/phonegap",companysetting:"registry/companysetting",companymodule:"registry/companymodule"},jsx:{fileExtension:".js"}}),window.jQuery=window.$=jQuery,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return jQuery}),require(["app","phonegap"],function(e,t){function n(){t.init(),window.device||(window.device={platform:"Browser"}),a()}function a(){"ANDROID"===device.platform.toUpperCase()?$(document).on("click",'a[href^="http"]',function(e){var t=$(this).attr("href");window.open(t,"_system","location=yes"),e.preventDefault()}):"IOS"===device.platform.toUpperCase()&&$(document).on("click",'a[href^="http"]',function(e){var t=$(this).attr("href");window.open(t,"_system","location=yes"),e.preventDefault()})}e.initialize(),-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")&&document.addEventListener("deviceready",n,!1)}),define("main",function(){}),define("language/blog",["baselanguage"],function(e){var t={vn:{heading:"Blog",add:"Viết bài mới",heading_manage:"Quản lý Blog",heading_widget_latest:"Blog mới nhất",heading_widget_popular:"Lượt xem nhiều nhất",heading_widget_viewed:"Danh sách đã xem",heading_widget_liked:"Danh sách đã tương tác",heading_comment:"Bình luận cho Blog",heading_like:"Tương tác cho Blog",heading_info:"Thông tin Blog",heading_info_description:"Thông tin chi tiết Blog",title:"Tiêu đề",content:"Nội dung",status:"Trạng thái",creator:"Người tạo",date_created:"Ngày tạo",date_created_meta:"Tạo lúc",cover:"Hình đại diện",file_id_list:"Đính kèm file",error_title_required:"Bạn chưa nhập tiêu đề",error_file_uploading_waiting:"Bạn có tập tin chưa hoàn tất upload. Hãy chờ hoàn tất và thử gửi lại sau.",link_upload_cover:"Tải hình lên",link_upload_files:"Đính kèm file",sort_title:"Tiêu đề",filter_keyword:"Từ khóa",filter_status:"Trạng thái",filter_creator_id:"Người tạo",pagination_showing:"Hiển thị %from%-%to% của %total% Blog",pagination_empty:"Không có Blog để hiển thị",count_comment:"Bình luận",count_view:"Lượt xem",count_like:"Lượt tương tác",search_keyword_placeholder:"Tìm kiếm",zerodata_text:"Chưa có blog nào.",zerodata_subtext:"Nhấn nút bên dưới để tiến hành thêm mới blog.",btn_manage:"Dành cho quản lý",menu_list:"Danh sách Blog",menu_add:"Thêm bài mới"},en:{heading:"Blog",add:"Viết bài mới",heading_manage:"Quản lý Blog",heading_widget_latest:"Blog mới nhất",heading_widget_popular:"Lượt xem nhiều nhất",heading_widget_viewed:"Danh sách đã xem",heading_widget_liked:"Danh sách đã tương tác",heading_comment:"Bình luận cho Blog",heading_like:"Tương tác cho Blog",heading_info:"Thông tin Blog",heading_info_description:"Thông tin chi tiết Blog",title:"Tiêu đề",content:"Nội dung",status:"Trạng thái",creator:"Người tạo",date_created:"Ngày tạo",date_created_meta:"Tạo lúc",cover:"Hình đại diện",file_id_list:"Đính kèm file",error_title_required:"Bạn chưa nhập tiêu đề",error_file_uploading_waiting:"Bạn có tập tin chưa hoàn tất upload. Hãy chờ hoàn tất và thử gửi lại sau.",link_upload_cover:"Tải hình lên",link_upload_files:"Đính kèm file",sort_title:"Tiêu đề",filter_keyword:"Từ khóa",filter_status:"Trạng thái",filter_creator_id:"Người tạo",pagination_showing:"Hiển thị %from%-%to% của %total% Blog",pagination_empty:"Không có Blog để hiển thị",count_comment:"Bình luận",count_view:"Lượt xem",count_like:"Lượt tương tác",search_keyword_placeholder:"Tìm kiếm",zerodata_text:"Chưa có blog nào.",zerodata_subtext:"Nhấn nút bên dưới để tiến hành thêm mới blog.",btn_manage:"Dành cho quản lý",menu_list:"Danh sách Blog",menu_add:"Thêm bài mới"}};return new e({lang:t})}),define("models/blog",["basemodel","language/blog","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/companyblogs",STATUS_ENABLE:1,STATUS_DISABLE:3,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return $.isEmptyObject(t)&&(t={}),t}});return a}),define("collections/blog",["basecollection","models/blog"],function(e,t){var n=e.extend({url:"v1/companyblogs",model:t});return n}),define("collections/blogcomment",["basecollection","models/blog"],function(e,t){var n=e.extend({url:"v1/companyblogcomments",model:t});return n}),define("language/bloglike",["baselanguage"],function(e){var t={vn:{TYPE_LIKE:"Thích",TYPE_LIKED:"Đã thích",TYPE_LOVE:"Yêu thích",TYPE_LOVED:"Đã yêu thích",TYPE_HAHA:"Cười to",TYPE_HAHAED:"Đã cười to",TYPE_WOW:"Ngạc nhiên",TYPE_WOWWED:"Đã ngạc nhiên",TYPE_SAD:"Không vui",TYPE_SADDED:"Đã không vui",TYPE_ANGRY:"Phẫn nộ",TYPE_ANGRIED:"Đã phẫn nộ"},en:{TYPE_LIKE:"Thích",TYPE_LIKED:"Đã thích",TYPE_LOVE:"Yêu thích",TYPE_LOVED:"Đã yêu thích",TYPE_HAHA:"Cười to",TYPE_HAHAED:"Đã cười to",TYPE_WOW:"Ngạc nhiên",TYPE_WOWWED:"Đã ngạc nhiên",TYPE_SAD:"Không vui",TYPE_SADDED:"Đã không vui",TYPE_ANGRY:"Phẫn nộ",TYPE_ANGRIED:"Đã phẫn nộ"}};return new e({lang:t})}),define("models/bloglike",["basemodel","language/bloglike"],function(e,t){var n=e.extend({urlRoot:"v1/companybloglikes",TYPE_LIKE:1,TYPE_LOVE:3,TYPE_HAHA:5,TYPE_WOW:7,TYPE_SAD:9,TYPE_ANGRY:11,getTypeList:function(){return[{code:this.TYPE_LIKE,text:t.t("TYPE_LIKE"),textDisplay:t.t("TYPE_LIKED"),icon:"tc-like",image:"/imgs/like.png"},{code:this.TYPE_LOVE,text:t.t("TYPE_LOVE"),textDisplay:t.t("TYPE_LOVED"),icon:"tc-like",image:"/imgs/love.png"},{code:this.TYPE_HAHA,text:t.t("TYPE_HAHA"),textDisplay:t.t("TYPE_HAHAED"),icon:"tc-like",image:"/imgs/haha.png"},{code:this.TYPE_WOW,text:t.t("TYPE_WOW"),textDisplay:t.t("TYPE_WOWWED"),icon:"tc-like",image:"/imgs/wow.png"},{code:this.TYPE_SAD,text:t.t("TYPE_SAD"),textDisplay:t.t("TYPE_SADDED"),icon:"tc-like",image:"/imgs/sad.png"},{code:this.TYPE_ANGRY,text:t.t("TYPE_ANGRY"),textDisplay:t.t("TYPE_ANGRIED"),icon:"tc-like",image:"/imgs/angry.png"}]},getType:function(e){var t=this.getTypeList().filter(function(t){return t.code==e}).shift();return $.isEmptyObject(t)&&(t={}),t}});return n}),define("collections/bloglike",["basecollection","models/bloglike"],function(e,t){var n=e.extend({url:"v1/companybloglikes",model:t});return n}),define("models/blogview",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/companyblogviews"});return t}),define("collections/blogview",["basecollection","models/blogview"],function(e,t){var n=e.extend({url:"v1/companyblogviews",model:t});return n}),define("language/checkin",["baselanguage"],function(e){var t={vn:{heading:"Lịch sử chấm công",heading_terminal:"Máy chấm công",heading_terminal_tooltip:"Cho phép chấm công hộ cho nhân viên khác hoặc truy cập từ thiết bị chấm công chung",heading_export:"Xuất Excel báo cáo chấm công",heading_sidebar:"Bộ lọc lịch sử chấm công",name:"Tên",content:"Nội dung",ratio:"Hệ số",allowlate:"Vào trễ có phép",allowearly:"Ra sớm có phép",checkin_late:"Vào trễ (CP)",checkin_early:"Ra sớm (CP)",reviewer:"Người xác nhận",ALLOWLATE_NOT_SET:"Không có cài đặt",ALLOWLATE_ALLOW:"Vào trễ có phép",ALLOWLATE_NOT_ALLOW:"Vào trễ không phép",ALLOWEARLY_NOT_SET:"Không có cài đặt",ALLOWEARLY_ALLOW:"Ra sớm có phép",ALLOWEARLY_NOT_ALLOW:"Ra sớm không phép",LATE_NOT_SET:"Không có cài đặt",LATE_IN_RULE:"Vào trễ trong qui định",LATE_OUT_RULE:"Vào trễ ngoài qui định",EARLY_NOT_SET:"Không có cài đặt",EARLY_IN_RULE:"Ra sớm trong qui định",EARLY_OUT_RULE:"Ra sớm ngoài qui định",list_checkin:"Danh sách chấm công",download_excel:"Tải file excel",datecreated:"Ngày",office:"Trụ sở",range:"Ca",ot_duration:"Thời lượng OT",ot_allow:"OT",ot_allow_long:"Overtime (OT)",employee:"Nhân viên",timeinout:"Thời gian",timeout:"Chấm công ra",timein:"Chấm công vào",duration:"Thời lượng",source:"Chấm bằng",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",ipaddress:"Địa chỉ IP",note:"Ghi chú",yourwebcam:"Xem trước Webcam / Camera",webcamphoto:"Hình chụp webcam / camera",capture:"Chụp hình",capture_phonegap_help:"Nhấn nút bên dưới để chụp hình",capture_onios:"Lấy hình đã chụp ở trên",today:"Hôm nay",yesterday:"Hôm qua",manage:"Dành cho quản lý",verify:"Duyệt",verifyuser:"Xác nhận",Verified:"Đã xác nhận",NonVerified:"Chưa xác nhận",Pending:"Đang làm",unverify:"Bỏ duyệt",Complete:"Hoàn thành",Error:"Bị lỗi",checkinearly:"Vào sớm",checkoutearly:"Về sớm",checkinlate:"Vào trễ",checkoutlate:"Về muộn",realcheck:"Thời gian thực chấm",position:"Chức vụ",department:"Phòng ban",internalid:"Mã nội bộ",userid:"Mã",report:"Báo cáo ",picture:"Hình",checkinnote:"Ghi chú chấm vào: ",checkoutnote:"Ghi chú chấm ra: ",all_employee:"Tất cả nhân viên",diff_office:"Văn phòng bạn đang chọn khác với văn phòng bạn được gán",reset_text:"Đổi trụ sở",reset_range:"Chọn ca khác",workschedule:"Ca đã được xếp lịch",schedule:"Lịch làm việc",settingschedule:"Xếp lịch làm việc",change_range:"Đổi ca",detailschedule:"Xem lịch làm việc",workschedule_empty:"Bạn không có ca được xếp vào hôm nay",select_range:"Ca đã chọn",selecttype_checkin_office:"Chấm theo trụ sở",selecttype_checkin_schedule:"Chấm theo lịch",error_webcamjs_flashnotfound:"Trình duyệt này không hỗ trợ chụp hình webcam. Bạn cần sử dụng Chrome hoặc Firefox để có thể sử dụng tính năng chụp hình trong khi chấm công.",ALLOWOT_NOT:"Không OT",ALLOWOT_FIRST:"OT thời gian đầu ca",ALLOWOT_LAST:"OT thời gian cuối ca",ALLOWOT_ALL:"OT toàn thời gian",filter_creator_id:"Nhân viên",filter_office_id:"Trụ sở",filter_department_id:"Phòng ban",filter_status:"Trạng thái",filter_worktracking_range_id:"Ca",filter_date:"Ngày",filter_keyword:"Từ khóa",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",back:"Trở lại",close:"Đóng",checkin:"Lịch sử chấm công",checkin_report:"Báo cáo chấm công",checkin_info_title:"Thông tin chấm công",checkin_export_info_title:"Xuất Excel",checkin_info_content:"Nhập các thông tin để tiến hành chấm công vào - ra hệ thống.",checkin_export_info_content:"Chi tiết Xuất Excel",checkin_info_update:"Cập nhật thời gian chấm công",verify_success:"Xác nhận thành công ",unverify_success:"Bỏ xác nhận thành công ",error_check_out_time_more_than_check_in_time:"Thời gian ra sớm hơn thời gian vào",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",get_full_time:"Lấy toàn thời gian của ca",select_date:"Chọn ngày",over_time_reivew:"Hết thời gian duyệt",reivew_checkin:"Duyệt công",check_in_success:"Chấm công vào thành công",check_out_success:"Chấm công ra thành công",error_worktracking_range_id_invalid:"Ca không hợp lệ",error_worktracking_range_id_is_required:"Vui lòng chọn ca!",error_office_id_is_required:"Vui lòng chọn trụ sở!",error_office_id_invalid:"Trụ sở không hợp lệ!",error_user_no_checkout:"Bạn chưa chấm công ra!",error_user_no_checkin:"Bạn chưa chấm công vào!",error_user_not_permission_verify:"Không có quyền verify!",error_check_out_time_final_invalid_format:"Thời gian chấm công ra không hợp lệ!",error_check_in_time_final_invalid_format:"Thời gian chấm công vào không hợp lệ!",error_ip_invalid:"IP hiện tại không hợp lệ!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",checkinbtn:"Chấm công",checkedin:"Chấm công vào",checkedout:"Chấm công ra",zerodata_text:"Chưa có dữ liệu chấm công nào.",zerodata_subtext:"Bắt đầu chấm công bằng cách nhấn nút bên dưới.",checkin_add:"Chấm công",not_have_checkout:"Nhân viên chưa chấm công ra",if_veryfied_is_system_auto_checkout:"Nếu xác nhận hệ thống sẽ tự động chấm công ra",report_count_late:"Số lần đi trễ",report_time_compare_label:"So sánh với",report_statistic_count_late_label:"Đi trễ",report_statistic_count_early_label:"Về sớm",report_statistic_count_new_late_label:"Đi trễ mới",report_statistic_count_stop_late_label:"Không còn đi trễ",error_not_found_range_for_current_office:"Không tìm thấy ca làm việc trong văn phòng đã chọn. Vui lòng chọn văn phòng khác để chấm công.",terminal_selectoffice:"Chọn một văn phòng để chấm công",terminal_selectemployee:"Tìm nhân viên để chấm công",terminal_btn_continue:"Tiếp tục",terminal_checking_user:"Đang kiểm tra dữ liệu...",error_checkin_terminal_not_permission_on_office:"Tài khoản máy chấm công không có quyền truy cập văn phòng đang yêu cầu.",error_checkin_office_another:"Nhân viên này đã chấm công vào ở một văn phòng khác.",terminal_checkin:"Chấm công vào",terminal_checkout:"Chấm công ra",terminal_select_range:"Chọn ca làm việc để chấm công vào",terminal_current_range:"Ca làm việc đã chấm vào",no_edit_permission:"Bạn chưa có quyền 'employee.checkinedit' để chỉnh sửa thông tin chấm công. Liên hệ cấp trên của bạn để được hỗ trợ.",edit_note:"Lý do thay đổi",error_edit_note_required:"Bạn chưa nhập lý do thay đổi",editor:"Người chỉnh sửa",viewhistory_button:"LỊCH SỬ",viewhistory_title:"Xem lịch sử chỉnh sửa thông tin chấm công",checkin_info_update_history:"Lịch sử chỉnh sửa",checkin_history_in:"Thời gian vào",checkin_history_out:"Thời gian ra",checkin_history_allowlate:"Cho phép vào trễ",checkin_history_allowearly:"Cho phép ra sớm",checkin_history_ot:"OT (Overtime)",edit_detail:"Chi tiết chỉnh sửa"},en:{heading:"Lịch sử chấm công",heading_terminal:"Máy chấm công",heading_terminal_tooltip:"Cho phép chấm công hộ cho nhân viên khác hoặc truy cập từ thiết bị chấm công chung",heading_export:"Xuất Excel báo cáo chấm công",heading_sidebar:"Bộ lọc lịch sử chấm công",name:"Tên",content:"Nội dung",ratio:"Hệ số",allowlate:"Vào trễ có phép",allowearly:"Ra sớm có phép",checkin_late:"Vào trễ (CP)",checkin_early:"Ra sớm (CP)",reviewer:"Người xác nhận",ALLOWLATE_NOT_SET:"Không có cài đặt",ALLOWLATE_ALLOW:"Vào trễ có phép",ALLOWLATE_NOT_ALLOW:"Vào trễ không phép",ALLOWEARLY_NOT_SET:"Không có cài đặt",ALLOWEARLY_ALLOW:"Ra sớm có phép",ALLOWEARLY_NOT_ALLOW:"Ra sớm không phép",LATE_NOT_SET:"Không có cài đặt",LATE_IN_RULE:"Vào trễ trong qui định",LATE_OUT_RULE:"Vào trễ ngoài qui định",EARLY_NOT_SET:"Không có cài đặt",EARLY_IN_RULE:"Ra sớm trong qui định",EARLY_OUT_RULE:"Ra sớm ngoài qui định",list_checkin:"Danh sách chấm công",download_excel:"Tải file excel",datecreated:"Ngày",office:"Trụ sở",range:"Ca",ot_duration:"Thời lượng OT",ot_allow:"OT",ot_allow_long:"",employee:"Nhân viên",timeinout:"Thời gian",timeout:"Chấm công ra",timein:"Chấm công vào",duration:"Thời lượng",source:"Chấm bằng",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",ipaddress:"Địa chỉ IP",note:"Ghi chú",yourwebcam:"Xem trước Webcam / Camera",webcamphoto:"Hình chụp webcam / camera",capture:"Chụp hình",capture_phonegap_help:"",capture_onios:"Lấy hình đã chụp ở trên",today:"Hôm nay",yesterday:"Hôm qua",manage:"Dành cho quản lý",verify:"Duyệt",verifyuser:"Xác nhận",Verified:"Đã xác nhận",NonVerified:"Chưa xác nhận",Pending:"Đang làm",unverify:"Bỏ duyệt",Complete:"Hoàn thành",Error:"Bị lỗi",checkinearly:"Vào sớm",checkoutearly:"Về sớm",checkinlate:"Vào trễ",checkoutlate:"Về muộn",realcheck:"Thời gian thực chấm",position:"Chức vụ",department:"Phòng ban",internalid:"Mã nội bộ",userid:"Mã",report:"Báo cáo ",picture:"Hình",checkinnote:"Ghi chú chấm vào: ",checkoutnote:"Ghi chú chấm ra: ",all_employee:"Tất cả nhân viên",diff_office:"Văn phòng bạn đang chọn khác với văn phòng bạn được gán",reset_text:"Đổi trụ sở",reset_range:"Chọn ca khác",workschedule:"Ca đã được xếp lịch",schedule:"Lịch làm việc",settingschedule:"Xếp lịch làm việc",change_range:"Đổi ca",detailschedule:"Xem lịch làm việc",workschedule_empty:"Bạn không có ca được xếp vào hôm nay",select_range:"Ca đã chọn",selecttype_checkin_office:"Chấm theo trụ sở",selecttype_checkin_schedule:"Chấm theo lịch",error_webcamjs_flashnotfound:"Trình duyệt này không hỗ trợ chụp hình webcam. Bạn cần sử dụng Chrome hoặc Firefox để có thể sử dụng tính năng chụp hình trong khi chấm công.",ALLOWOT_NOT:"Không OT",ALLOWOT_FIRST:"OT thời gian đầu ca",ALLOWOT_LAST:"OT thời gian cuối ca",ALLOWOT_ALL:"OT toàn thời gian",filter_creator_id:"Nhân viên",filter_office_id:"Trụ sở",filter_department_id:"Phòng ban",filter_status:"Trạng thái",filter_worktracking_range_id:"Ca",filter_date:"Ngày",filter_keyword:"Từ khóa",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",back:"Trở lại",close:"Đóng",checkin:"Lịch sử chấm công",checkin_report:"Báo cáo chấm công",checkin_info_title:"Thông tin chấm công",checkin_export_info_title:"Xuất Excel",checkin_info_content:"Nhập các thông tin để tiến hành chấm công vào - ra hệ thống.",checkin_export_info_content:"Chi tiết Xuất Excel",checkin_info_update:"Cập nhật thời gian chấm công",verify_success:"Xác nhận thành công ",unverify_success:"Bỏ xác nhận thành công ",error_check_out_time_more_than_check_in_time:"Thời gian ra sớm hơn thời gian vào",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",get_full_time:"Lấy toàn thời gian của ca",select_date:"Chọn ngày",over_time_reivew:"Hết thời gian duyệt",reivew_checkin:"Duyệt công",check_in_success:"Chấm công vào thành công",check_out_success:"Chấm công ra thành công",error_worktracking_range_id_invalid:"Ca không hợp lệ",error_worktracking_range_id_is_required:"Vui lòng chọn ca!",error_office_id_is_required:"Vui lòng chọn trụ sở!",error_office_id_invalid:"Trụ sở không hợp lệ!",error_user_no_checkout:"Bạn chưa chấm công ra!",error_user_no_checkin:"Bạn chưa chấm công vào!",error_user_not_permission_verify:"Không có quyền verify!",error_check_out_time_final_invalid_format:"Thời gian chấm công ra không hợp lệ!",error_check_in_time_final_invalid_format:"Thời gian chấm công vào không hợp lệ!",error_ip_invalid:"IP hiện tại không hợp lệ!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",checkinbtn:"Chấm công",checkedin:"Chấm công vào",checkedout:"Chấm công ra",zerodata_text:"Chưa có dữ liệu chấm công nào.",zerodata_subtext:"Bắt đầu chấm công bằng cách nhấn nút bên dưới.",checkin_add:"Chấm công",not_have_checkout:"Nhân viên chưa chấm công ra",if_veryfied_is_system_auto_checkout:"Nếu xác nhận hệ thống sẽ tự động chấm công ra",report_count_late:"Số lần đi trễ",report_time_compare_label:"So sánh với",report_statistic_count_late_label:"Đi trễ",report_statistic_count_early_label:"Về sớm",report_statistic_count_new_late_label:"Đi trễ mới",report_statistic_count_stop_late_label:"Không còn đi trễ",error_not_found_range_for_current_office:"Không tìm thấy ca làm việc trong văn phòng đã chọn. Vui lòng chọn văn phòng khác để chấm công.",terminal_selectoffice:"Chọn một văn phòng để chấm công",terminal_selectemployee:"Tìm nhân viên để chấm công",terminal_btn_continue:"Tiếp tục",terminal_checking_user:"Đang kiểm tra dữ liệu...",error_checkin_terminal_not_permission_on_office:"Tài khoản máy chấm công không có quyền truy cập văn phòng đang yêu cầu.",error_checkin_office_another:"Nhân viên này đã chấm công vào ở một văn phòng khác.",terminal_checkin:"Chấm công vào",terminal_checkout:"Chấm công ra",terminal_select_range:"Chọn ca làm việc để chấm công vào",terminal_current_range:"Ca làm việc đã chấm vào",no_edit_permission:"",edit_note:"",error_edit_note_required:"",editor:"",viewhistory_button:"",viewhistory_title:"",checkin_info_update_history:"",checkin_history_in:"",checkin_history_out:"",checkin_history_allowlate:"",checkin_history_allowearly:"",checkin_history_ot:"",edit_detail:""}};return new e({lang:t})}),define("models/checkin",["basemodel","language/checkin"],function(e,t){var n=e.extend({urlRoot:"v1/worktrackings",cacheName:"worktrackings",STATUS_PENDING:1,STATUS_COMPLETED:2,STATUS_VERIFIED:3,STATUS_ERROR:5,VERIFYSTATUS_UNVERIFIED:1,VERIFYSTATUS_VERIFIED:3,VERIFYSTATUS_IGNORE:5,SOURCE_WEB:1,SOURCE_APP:3,SOURCE_API:5,SOURCE_DEVICE:7,ALLOWOT_NOT:0,ALLOWOT_FIRST:1,ALLOWOT_LAST:3,ALLOWOT_ALL:5,ALLOWLATE_NOT_SET:0,ALLOWLATE_ALLOW:1,ALLOWLATE_NOT_ALLOW:3,ALLOWEARLY_NOT_SET:0,ALLOWEARLY_ALLOW:1,ALLOWEARLY_NOT_ALLOW:3,LATE_NOT:0,LATE_IN_RULE:3,LATE_OUT_RULE:5,EARLY_NOT:0,EARLY_IN_RULE:3,EARLY_OUT_RULE:5,getLateInRuleList:function(){return[{code:this.LATE_NOT,text:t.t("LATE_NOT"),color:""},{code:this.LATE_IN_RULE,text:t.t("LATE_IN_RULE"),color:""},{code:this.LATE_OUT_RULE,text:t.t("LATE_OUT_RULE"),color:""}]},getLateInRule:function(e){ot=parseInt(e);var n={code:e,text:"",color:""};switch(ot){case this.LATE_NOT:n.text=t.t("LATE_NOT"),n.color="";break;case this.LATE_IN_RULE:n.text=t.t("LATE_IN_RULE"),n.color="green";break;case this.LATE_OUT_RULE:n.text=t.t("LATE_OUT_RULE"),n.color=""}return n},getEarlyInRuleList:function(){return[{code:this.EARLY_NOT,text:t.t("EARLY_NOT"),color:""},{code:this.EARLY_IN_RULE,text:t.t("EARLY_IN_RULE"),color:""},{code:this.EARLY_OUT_RULE,text:t.t("EARLY_OUT_RULE"),color:""}]},getEarlyInRule:function(e){ot=parseInt(e);var n={code:e,text:"",color:""};switch(ot){case this.EARLY_NOT:n.text=t.t("EARLY_NOT"),n.color="";break;case this.EARLY_IN_RULE:n.text=t.t("EARLY_IN_RULE"),n.color="green";break;case this.EARLY_OUT_RULE:n.text=t.t("EARLY_OUT_RULE"),n.color=""}return n},getEarlyAllowList:function(){return[{code:this.ALLOWEARLY_NOT_SET,text:t.t("ALLOWEARLY_NOT_SET"),color:""},{code:this.ALLOWEARLY_ALLOW,text:t.t("ALLOWEARLY_ALLOW"),color:""},{code:this.ALLOWEARLY_NOT_ALLOW,text:t.t("ALLOWEARLY_NOT_ALLOW"),color:""}]},getEarlyAllow:function(e){ot=parseInt(e);var n={code:e,text:"",color:""};switch(ot){case this.ALLOWEARLY_NOT_SET:n.text=t.t("ALLOWEARLY_NOT_SET"),n.color="";break;case this.ALLOWEARLY_ALLOW:n.text=t.t("ALLOWEARLY_ALLOW"),n.color="green";break;case this.ALLOWEARLY_NOT_ALLOW:n.text=t.t("ALLOWEARLY_NOT_ALLOW"),n.color=""}return n},getLateAllowList:function(){return[{code:this.ALLOWLATE_NOT_SET,text:t.t("ALLOWLATE_NOT_SET"),color:""},{code:this.ALLOWLATE_ALLOW,text:t.t("ALLOWLATE_ALLOW"),color:""},{code:this.ALLOWLATE_NOT_ALLOW,text:t.t("ALLOWLATE_NOT_ALLOW"),color:""}]},getLateAllow:function(e){ot=parseInt(e);var n={code:e,text:"",color:""};switch(ot){case this.ALLOWLATE_NOT_SET:n.text=t.t("ALLOWLATE_NOT_SET"),n.color="";break;case this.ALLOWLATE_ALLOW:n.text=t.t("ALLOWLATE_ALLOW"),n.color="green";break;case this.ALLOWLATE_NOT_ALLOW:n.text=t.t("ALLOWLATE_NOT_ALLOW"),n.color=""}return n},getSourceList:function(){return[{code:this.SOURCE_WEB,text:"Web",color:""},{code:this.SOURCE_APP,text:"App",color:""},{code:this.SOURCE_API,text:"Api",color:""},{code:this.SOURCE_DEVICE,text:"Device",color:""}]},getOTList:function(){return[{code:this.ALLOWOT_NOT,text:t.t("ALLOWOT_NOT"),color:""},{code:this.ALLOWOT_FIRST,text:t.t("ALLOWOT_FIRST"),color:""},{code:this.ALLOWOT_LAST,text:t.t("ALLOWOT_LAST"),color:""},{code:this.ALLOWOT_ALL,text:t.t("ALLOWOT_ALL"),color:""}]},getOT:function(e){ot=parseInt(e);var n={code:e,text:"",color:""};switch(ot){case this.ALLOWOT_NOT:n.text=t.t("ALLOWOT_NOT"),n.color="";break;case this.ALLOWOT_FIRST:n.text=t.t("ALLOWOT_FIRST"),n.color="green";break;case this.ALLOWOT_LAST:n.text=t.t("ALLOWOT_LAST"),n.color="";break;case this.ALLOWOT_ALL:n.text=t.t("ALLOWOT_ALL"),n.color=""}return n},getReport:function(e,t,n){var a=this.urlRoot+"/report";$.ajax({url:a,type:"GET",data:e,success:function(e){t(e)},error:function(e){n()}})},verify:function(e){var t=this.urlRoot+"/"+this.get("id")+"/verify";$.ajax({url:t,type:"POST",data:e.data,success:e.success,error:e.error,complete:e.complete})},editnew:function(e){var t=this.urlRoot+"/"+this.get("id")+"/editnew";$.ajax({url:t,type:"POST",data:e.data,success:e.success,error:e.error,complete:e.complete})},getSourceList:function(){return[{code:this.SOURCE_WEB,text:"Web",color:""},{code:this.SOURCE_APP,text:"App",color:""},{code:this.SOURCE_API,text:"Api",color:""},{code:this.SOURCE_DEVICE,text:"Device",color:""}]},getSource:function(e){e=parseInt(e);var t={code:e,text:"",color:""};switch(e){case this.SOURCE_WEB:t.text="Web",t.color="";break;case this.SOURCE_APP:t.text="App",t.color="green";break;case this.SOURCE_API:t.text="Api",t.color="";break;case this.SOURCE_DEVICE:t.text="Device",
t.color=""}return t},getStatusList:function(){return[{code:this.STATUS_PENDING,text:t.t("Pending"),color:""},{code:this.STATUS_COMPLETED,text:t.t("Complete"),color:"blue"},{code:this.STATUS_VERIFIED,text:t.t("Verified"),color:"green"},{code:this.STATUS_ERROR,text:t.t("Error"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={code:e,text:"",color:""}),t},getVerifyList:function(){return[{code:this.VERIFYSTATUS_UNVERIFIED,text:"Un-verified",color:""},{code:this.VERIFYSTATUS_VERIFIED,text:"Verified",color:"green"},{code:this.VERIFYSTATUS_IGNORE,text:"Ignore",color:"red"}]},getVerify:function(e){e=parseInt(e);var t={code:e,text:"",color:""};switch(e){case this.VERIFYSTATUS_UNVERIFIED:t.text="Un-verified",t.color="=";break;case this.VERIFYSTATUS_VERIFIED:t.text="Verified",t.color="green";break;case this.VERIFYSTATUS_IGNORE:t.text="Ignore",t.color="red"}return t},doTerminalCheck:function(e){var t=this.urlRoot+"/terminal/check";$.ajax({url:t,type:"POST",data:e.data,success:e.success,error:e.error,complete:e.complete})},doTerminalAdd:function(e){var t=this.urlRoot+"/terminal/add";$.ajax({url:t,type:"POST",data:e.data,success:e.success,error:e.error,complete:e.complete})}});return n}),define("collections/checkin",["basecollection","models/checkin"],function(e,t){var n=e.extend({model:t,url:"v1/worktrackings"});return n}),define("language/coursecategory",["baselanguage"],function(e){var t={vn:{heading:"Danh mục khóa học",heading_sidebar:"Bộ lọc tiêu chí",employee:"Nhân viên",name:"Tên danh mục khóa học",course:"Khóa học",type:"Phân loại",displayorder:"Thứ tự",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",delete:"Xóa",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",employeepointtopic:"Tiêu Danh mục khóa học nhân viên",back:"Trở lại",close:"Đóng",coursecategory_info_title:"Thông tin Danh mục khóa học",coursecategory_info_content:"Thông tin chi tiết Danh mục khóa học",filter_status:"Trạng thái",filter_type:"Loại",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",sort_display_order:"Thứ tự hiển thị",sort_name:"Tên",sort_point:"Điểm",sort_date_created:"Ngày tạo",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",error_store_is_reqiure:"Vui lòng chọn cửa hàng!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_not_permissin_check:"Bạn không có quyền chấm điểm",error_name_required:"Vui lòng nhập tên!",error_point_is_require:"Vui lòng nhập điểm và điểm phải lớn hơn 0!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",TYPE_BAD:"Xấu",TYPE_GOOD:"Tốt",zerodata_text:"Chưa có dữ liệu",zerodata_subtext:"vui lòng thêm dữ liệu",add_category:"Tạo danh mục"},en:{heading:"Danh mục khóa học",heading_sidebar:"Bộ lọc tiêu chí",employee:"Nhân viên",name:"Tên danh mục khóa học",course:"Khóa học",type:"Phân loại",displayorder:"Thứ tự",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",delete:"Xóa",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",employeepointtopic:"Tiêu Danh mục khóa học nhân viên",back:"Trở lại",close:"Đóng",coursecategory_info_title:"Thông tin Danh mục khóa học",coursecategory_info_content:"Thông tin chi tiết Danh mục khóa học",filter_status:"Trạng thái",filter_type:"Loại",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",sort_display_order:"Thứ tự hiển thị",sort_name:"Tên",sort_point:"Điểm",sort_date_created:"Ngày tạo",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",error_store_is_reqiure:"Vui lòng chọn cửa hàng!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_not_permissin_check:"Bạn không có quyền chấm điểm",error_name_required:"Vui lòng nhập tên!",error_point_is_require:"Vui lòng nhập điểm và điểm phải lớn hơn 0!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",TYPE_BAD:"Xấu",TYPE_GOOD:"Tốt",zerodata_text:"Chưa có dữ liệu",zerodata_subtext:"vui lòng thêm dữ liệu",add_category:"Tạo danh mục"}};return new e({lang:t})}),define("models/course-category",["basemodel","language/coursecategory","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmscoursecategories",cacheName:"lmscoursecategories",STATUS_ENABLE:1,STATUS_DISABLE:2,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t}});return a}),define("collections/course-category",["basecollection","models/course-category"],function(e,t){var n=e.extend({model:t,url:"v1/lmscoursecategories"});return n}),define("language/coursechapter",["baselanguage"],function(e){var t={vn:{heading:"Chương",heading_sidebar:"Bộ lọc tiêu chí",employee:"Nhân viên",name:"Tên chương",type:"Phân loại",displayorder:"Thứ tự",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",delete:"Xóa chương",insert_lecture:"Thêm bài học",display_order:"Thứ tự hiển thị",error_name_required:"Vui lòng nhập tên",zerodata_text:"Chưa có chương nào.",zerodata_subtext:"Thêm chương bằng cách nhấn nút bên dưới.",error_role_not_available:"Bạn không có quyền thực hiện thao tác này"},en:{heading:"Chương",heading_sidebar:"Bộ lọc tiêu chí",employee:"Nhân viên",name:"Tên chương",type:"Phân loại",displayorder:"Thứ tự",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",delete:"Xóa chương",insert_lecture:"Thêm bài học",display_order:"Thứ tự hiển thị",error_name_required:"Vui lòng nhập tên",zerodata_text:"Chưa có chương nào.",zerodata_subtext:"Thêm chương bằng cách nhấn nút bên dưới.",error_role_not_available:"Bạn không có quyền thực hiện thao tác này"}};return new e({lang:t})}),define("models/course-chapter",["basemodel","language/coursechapter","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmscoursechapters",cacheName:"lmscoursechapters",STATUS_ENABLE:1,STATUS_DISABLE:2,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t}});return a}),define("collections/course-chapter",["basecollection","models/course-chapter"],function(e,t){var n=e.extend({model:t,url:"v1/lmscoursechapters"});return n}),define("collections/course-enroll",["basecollection","models/course-category"],function(e,t){var n=e.extend({model:t,url:"v1/lmscourseenrolls"});return n}),define("language/courselecturecontent",["baselanguage"],function(e){var t={vn:{heading:"Nội dung bài học",heading_sidebar:"Nội dung bài học",employee:"Nhân viên",displayorder:"Thứ tự",datecreated:"Ngày tạo",creator:"Người tạo",status:"Trạng thái",chapter:"Chương",customerindex:"",title:"Tiêu đề",summary:"Mô tả",content:"Nội dung",embedurl:"Link nhúng",type:"Loại",lecturetype:"Loại bài học",isfree:"Được xem trước",delete:"Xóa nội dung này",quizid:"Bài trắc nghiệm",durationinminute:"Độ dài",LECTURETYPE_DOCUMENT:"Tài liệu",LECTURETYPE_TEXT:"Chữ",LECTURETYPE_YOUTUBE:"Youtube",TYPE_LECTURE:"Bài Học",TYPE_QUIZ:"Trắc nghiệm",insert_quiz:"Thêm Trắc nghiệm",coverfileid:"Hình bìa",update_lecture_success:"Cập nhật bài học thành công",update_lecture_content_success:"Cập nhật nội dung bài học thành công",delete_content_success:"Xóa nội dung bài học thành công",add_lecture_success:"Thêm bài học thành công",add_lecture_content_success:"Thêm nội dung bài học thành công",delete_lecture_success:"Xóa bài học thành công",delete_lecture_content_success:"Xóa nội dung bài học thành công",zerodata_text:"Chưa có tiêu chí nào.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới.",error_title_required:"Vui lòng nhập tên",error_type_invalid:"Loại không hợp lệ",error_lecture_type_invalid:"Loại bài học không hợp lệ",error_role_not_available:"Bạn không có quyền thực hiện thao tác này"},en:{heading:"Nội dung bài học",heading_sidebar:"Nội dung bài học",employee:"Nhân viên",displayorder:"Thứ tự",datecreated:"Ngày tạo",creator:"Người tạo",status:"Trạng thái",chapter:"Chương",customerindex:"",title:"Tiêu đề",summary:"Mô tả",content:"Nội dung",embedurl:"Link nhúng",type:"Loại",lecturetype:"Loại bài học",isfree:"Được xem trước",delete:"Xóa nội dung này",quizid:"Bài trắc nghiệm",durationinminute:"Độ dài",LECTURETYPE_DOCUMENT:"Tài liệu",LECTURETYPE_TEXT:"Chữ",LECTURETYPE_YOUTUBE:"Youtube",TYPE_LECTURE:"Bài Học",TYPE_QUIZ:"Trắc nghiệm",insert_quiz:"Thêm Trắc nghiệm",coverfileid:"Hình bìa",update_lecture_success:"Cập nhật bài học thành công",update_lecture_content_success:"Cập nhật nội dung bài học thành công",delete_content_success:"Xóa nội dung bài học thành công",add_lecture_success:"Thêm bài học thành công",add_lecture_content_success:"Thêm nội dung bài học thành công",delete_lecture_success:"Xóa bài học thành công",delete_lecture_content_success:"Xóa nội dung bài học thành công",zerodata_text:"Chưa có tiêu chí nào.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới.",error_title_required:"Vui lòng nhập tên",error_type_invalid:"Loại không hợp lệ",error_lecture_type_invalid:"Loại bài học không hợp lệ",error_role_not_available:"Bạn không có quyền thực hiện thao tác này"}};return new e({lang:t})}),define("models/course-lecture-content",["basemodel","language/courselecturecontent","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmscourselecturecontents",cacheName:"lmscourselecturecontents",STATUS_ENABLE:1,STATUS_DISABLE:2,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t}});return a}),define("collections/course-lecture-content",["basecollection","models/course-lecture-content"],function(e,t){var n=e.extend({model:t,url:"v1/lmscourselecturecontents"});return n}),define("language/courselecture",["baselanguage"],function(e){var t={vn:{heading:"Bài học",heading_sidebar:"Bài học",employee:"Nhân viên",displayorder:"Thứ tự",study:"Xem trước",datecreated:"Ngày tạo",creator:"Người tạo",status:"Trạng thái",title_enroll_note:"Vui lòng đăng kí khóa học để xem",chapter:"Chương",customerindex:"",title:"Tiêu đề",summary:"Mô tả",content:"Nội dung",embedurl:"Link nhúng",type:"Loại",lecturetype:"Dạng bài học",isfree:"Miễn phí",quizid:"Bài trắc nghiệm",durationinminute:"Độ dài (phút)",LECTURETYPE_DOCUMENT:"Tài liệu",LECTURETYPE_TEXT:"Chữ",LECTURETYPE_YOUTUBE:"Youtube",TYPE_LECTURE:"Bài Học",TYPE_QUIZ:"Trắc nghiệm",insert_quiz:"Thêm Trắc nghiệm",coverfileid:"Hình bìa",update_question:"Cập nhật câu hỏi",delete_question:"Xóa câu hỏi",update_lecture_success:"Cập nhật bài học thành công",update_lecture_content_success:"Cập nhật nội dung bài học thành công",add_lecture_success:"Thêm bài học thành công",add_lecture_content_success:"Thêm nội dung bài học thành công",delete_lecture_success:"Xóa bài học thành công",delete_lecture_content_success:"Xóa nội dung bài học thành công",update_lecture_content_title:"Cập nhật nội dung cho bài học này",update_lecture_content:"Cập nhật nội dung",add_lecture_:"Thêm bài học",delete_lecture_title:"Xóa bài học này",delete_lecture:"Xóa",zerodata_text:"Chưa có tiêu chí nào.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới.",empty_lecture_content:"Bài học chưa có nội dung.",error_title_required:"Vui lòng nhập tên",error_type_invalid:"Vui lòng chọn Loại",error_lecture_type_invalid:"Vui lòng chọn Loại bài học",error_role_not_available:"Bạn không có quyền thực hiện thao tác này"},en:{heading:"Bài học",heading_sidebar:"Bài học",employee:"Nhân viên",displayorder:"Thứ tự",study:"Xem trước",datecreated:"Ngày tạo",creator:"Người tạo",status:"Trạng thái",title_enroll_note:"Vui lòng đăng kí khóa học để xem",chapter:"Chương",customerindex:"",title:"Tiêu đề",summary:"Mô tả",content:"Nội dung",embedurl:"Link nhúng",type:"Loại",lecturetype:"Dạng bài học",isfree:"Miễn phí",quizid:"Bài trắc nghiệm",durationinminute:"Độ dài (phút)",LECTURETYPE_DOCUMENT:"Tài liệu",LECTURETYPE_TEXT:"Chữ",LECTURETYPE_YOUTUBE:"Youtube",TYPE_LECTURE:"Bài Học",TYPE_QUIZ:"Trắc nghiệm",insert_quiz:"Thêm Trắc nghiệm",coverfileid:"Hình bìa",update_question:"Cập nhật câu hỏi",delete_question:"Xóa câu hỏi",update_lecture_success:"Cập nhật bài học thành công",update_lecture_content_success:"Cập nhật nội dung bài học thành công",add_lecture_success:"Thêm bài học thành công",add_lecture_content_success:"Thêm nội dung bài học thành công",delete_lecture_success:"Xóa bài học thành công",delete_lecture_content_success:"Xóa nội dung bài học thành công",update_lecture_content_title:"Cập nhật nội dung cho bài học này",update_lecture_content:"Cập nhật nội dung",add_lecture_:"Thêm bài học",delete_lecture_title:"Xóa bài học này",delete_lecture:"Xóa",zerodata_text:"Chưa có tiêu chí nào.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới.",empty_lecture_content:"Bài học chưa có nội dung.",error_title_required:"Vui lòng nhập tên",error_type_invalid:"Vui lòng chọn Loại",error_lecture_type_invalid:"Vui lòng chọn Loại bài học",error_role_not_available:"Bạn không có quyền thực hiện thao tác này"}};return new e({lang:t})}),define("models/course-lecture",["basemodel","language/courselecture","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmscourselectures",cacheName:"lmscourselectures",STATUS_ENABLE:1,STATUS_DISABLE:2,TYPE_LECTURE:1,TYPE_QUIZ:3,LECTURETYPE_TEXT:1,LECTURETYPE_DOCUMENT:3,LECTURETYPE_YOUTUBE:5,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getTypeList:function(){return[{code:this.TYPE_LECTURE,text:t.t("TYPE_LECTURE"),color:"green"},{code:this.TYPE_QUIZ,text:t.t("TYPE_QUIZ"),color:"red"}]},getLectureTypeList:function(){return[{code:this.LECTURETYPE_DOCUMENT,text:t.t("LECTURETYPE_DOCUMENT"),color:"green"},{code:this.LECTURETYPE_TEXT,text:t.t("LECTURETYPE_TEXT"),color:"red"},{code:this.LECTURETYPE_YOUTUBE,text:t.t("LECTURETYPE_YOUTUBE"),color:"red"}]},getStatus:function(e){var t=this.getContant("status",e);return t},getType:function(e){var t=this.getContant("type",e);return t},getLectureType:function(e){var t=this.getContant("lecture_type",e);return t},getContant:function(e,t){var n=[];switch(e){case"status":n=this.getStatusList();break;case"type":n=this.getTypeList();break;case"lecture_type":n=this.getVisibilityList()}var a={};return n&&n.map(function(e,n){e.code==t&&(a=e)}),("object"!=typeof a||$.isEmptyObject(a))&&(a={text:"",color:"",code:t}),a}});return a}),define("collections/course-lecture",["basecollection","models/course-lecture"],function(e,t){var n=e.extend({model:t,url:"v1/lmscourselectures"});return n}),define("collections/course-limit",["basecollection","models/course-category"],function(e,t){var n=e.extend({model:t,url:"v1/lmscourselimits"});return n}),define("language/coursequizquestion",["baselanguage"],function(e){var t={vn:{TYPE_SINGLE_CHOICE:"Chọn 1 đáp án",TYPE_MULTIPLE:"Chọn nhiều đáp án",TYPE_TEXTBOX:"Nhập đáp án",name_question:"Câu trả lời",datecreated:"Ngày tạo",creator:"Người tạo",update_question:"Cập nhật",delete_question:"Xóa",pass:"TL Đúng",display_order:"STT",type:"Loại",point:"Điểm",add:"Thêm",if_empty_has_point:"Nếu để trống, học viên có nhập đáp án bất kì sẽ được tính điểm",saveandaddrow:"Lưu và thêm câu trả lời",listquestiontakeanswer:"Danh sách câu trả lời",error_name_answer_is_empty:"Vui lòng nhập đầy đủ câu trả lời trước khi thêm câu trả lời mới",error_answer_is_empty:"Vui lòng nhập ít nhất 1 câu trả lời",error_answer_pass_is_empty:"Vui lòng nhập/chọn ít nhất 1 câu trả lời đúng",add_question:"Thêm câu hỏi"},en:{TYPE_SINGLE_CHOICE:"Chọn 1 đáp án",TYPE_MULTIPLE:"Chọn nhiều đáp án",TYPE_TEXTBOX:"Nhập đáp án",name_question:"Câu trả lời",datecreated:"Ngày tạo",creator:"Người tạo",update_question:"Cập nhật",delete_question:"Xóa",pass:"TL Đúng",display_order:"STT",type:"Loại",point:"Điểm",add:"Thêm",if_empty_has_point:"Nếu để trống, học viên có nhập đáp án bất kì sẽ được tính điểm",saveandaddrow:"Lưu và thêm câu trả lời",listquestiontakeanswer:"Danh sách câu trả lời",error_name_answer_is_empty:"Vui lòng nhập đầy đủ câu trả lời trước khi thêm câu trả lời mới",error_answer_is_empty:"Vui lòng nhập ít nhất 1 câu trả lời",error_answer_pass_is_empty:"Vui lòng nhập/chọn ít nhất 1 câu trả lời đúng",add_question:"Thêm câu hỏi"}};return new e({lang:t})}),define("models/course-quiz-question",["basemodel","language/coursequizquestion","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmsquizquestions",cacheName:"lmsquizquestions",STATUS_ENABLE:1,STATUS_DISABLE:2,TYPE_SINGLE_CHOICE:1,TYPE_MULTIPLE:3,TYPE_TEXTBOX:5,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t},getTypeList:function(){return[{code:this.TYPE_SINGLE_CHOICE,text:t.t("TYPE_SINGLE_CHOICE"),color:"green"},{code:this.TYPE_MULTIPLE,text:t.t("TYPE_MULTIPLE"),color:"red"},{code:this.TYPE_TEXTBOX,text:t.t("TYPE_TEXTBOX"),color:"red"}]},getType:function(e){e=parseInt(e);var t=this.getTypeList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t}});return a}),define("collections/course-quiz-question",["basecollection","models/course-quiz-question"],function(e,t){var n=e.extend({model:t,url:"v1/lmsquizquestions"});return n}),define("language/coursequiztakeanswer",["baselanguage"],function(e){var t={vn:{STATUS_DOING:"Đang làm bài",STATUS_FINISH:"Hoàn thành",CORRECT_NEW:"Bỏ trống",CORRECT_PASS:"Đúng",CORRECT_FAIL:"Sai",Questions:"Sai",result:"Kết quả",you_have_reached:"Bạn nhận được ",you_have_question:"Bạn trả lời đúng được ",point:"Điểm",time:"Thời gian",your_quiz_grade:"Bài trắc nghiệm của bạn ",quiz_pass:"Đạt",quiz_fail:"Không đạt",quiz_required:"Trắc nghiệm yêu cầu ",list_answer:"Bài làm của học viên",answer:" Câu",system_answer:"Đáp án",user_answer:"Trả lời"},en:{STATUS_DOING:"Đang làm bài",STATUS_FINISH:"Hoàn thành",CORRECT_NEW:"Bỏ trống",CORRECT_PASS:"Đúng",CORRECT_FAIL:"Sai",Questions:"Sai",result:"Kết quả",you_have_reached:"Bạn nhận được ",you_have_question:"Bạn trả lời đúng được ",point:"Điểm",time:"Thời gian",your_quiz_grade:"Bài trắc nghiệm của bạn ",quiz_pass:"Đạt",quiz_fail:"Không đạt",quiz_required:"Trắc nghiệm yêu cầu ",list_answer:"Bài làm của học viên",answer:" Câu",system_answer:"Đáp án",user_answer:"Trả lời"}};return new e({lang:t})}),define("models/course-quiz-take-answer",["basemodel","language/coursequiztakeanswer","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmsquiztakeanswers",cacheName:"lmsquiztakeanswers",STATUS_ENABLE:1,STATUS_DISABLE:2,CORRECT_NEW:1,CORRECT_PASS:5,CORRECT_FAIL:3,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t},getCorrectList:function(){return[{code:this.CORRECT_NEW,text:LangLangDefault.t("CORRECT_NEW"),color:"green"},{code:this.CORRECT_PASS,text:t.t("CORRECT_PASS"),color:"red"},{code:this.CORRECT_FAIL,text:t.t("CORRECT_FAIL"),color:"red"}]},getCorrect:function(e){e=parseInt(e);var t=this.getCorrectList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t}});return a}),define("collections/course-quiz-take-answer",["basecollection","models/course-quiz-take-answer"],function(e,t){var n=e.extend({model:t,url:"v1/lmsquiztakeanswers"});return n}),define("models/course-quiz-take",["basemodel","language/coursequiztakeanswer","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmsquiztakes",cacheName:"lmsquiztakes",STATUS_DOING:1,STATUS_FINISH:3,getStatusList:function(){return[{code:this.STATUS_DOING,text:t.t("STATUS_DOING"),color:"blue"},{code:this.STATUS_FINISH,text:t.t("STATUS_FINISH"),color:"green"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t}});return a}),define("collections/course-quiz-take",["basecollection","models/course-quiz-take"],function(e,t){var n=e.extend({model:t,url:"v1/lmsquiztakes"});return n}),define("language/coursequiz",["baselanguage"],function(e){var t={vn:{heading:"Trắc nghiệm",heading_sidebar:"Trắc nghiệm",datecreated:"Ngày tạo",creator:"Người tạo",point:"Điểm",start:"Bắt đầu",status:"Trạng thái",coursecategory_info_title:"Thông tin Danh mục khóa học",coursecategory_info_content:"Thông tin chi tiết Danh mục khóa học",title:"Tiêu đề",duration:"Độ dài",marktype:"Cách chấm",isshowanswer:"Hiển thị đáp án",isallowretake:"Có thể lấy lại",ischeckpassornot:"Có chấm điểm",marktopass:"Điểm(Số câu đúng) tối thiểu",coverfileid:"Ảnh đại diện",MARKTYPE_POINT:"Điểm",MARKTYPE_QUESTION:"Câu hỏi",one_file:"1 file",content:"Nội dung",insert_update_question:"Thêm/Cập nhật câu hỏi",type:"Loại",has_answer:"Đã trả lời",correctiffillinput:"Câu trả lời đúng",pointiffillinput:"Có điểm khi nhập",add_question:"Thêm câu hỏi",delete_quiz:"Xóa trắc nghiệm",over_time:"Hết giờ",option:"Đáp án (Mỗi đáp án nằm trên 1 dòng)",error_title_required:"Vui lòng nhập tên",question:"Câu hỏi",time:"Thời gian",minute:"Phút",second:"giây",displayorder:"Thứ tự",listquestion:"Danh sách câu hỏi",insert_quiz:"Thêm trắc nghiệm",zerodata_text:"Chưa có tiêu chí nào.",error_content_required:"Vui lòng nhập nội dung.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới.",error_role_not_available:"Bạn không có quyền thực hiện thao tác này",error_mark_to_pass_invalid:"Vui lòng nhập điểm/câu tối thiểu",error_take_is_finish:"Bài trắc nghiệm đã hết giờ hoặc hoàn thành",error_user_has_take_quiz:"Bạn đã bắt đầu làm bài",error_mark_type_invalid:"Vui lòng chọn cách chấm"},en:{heading:"Trắc nghiệm",heading_sidebar:"Trắc nghiệm",datecreated:"Ngày tạo",creator:"Người tạo",point:"Điểm",start:"Bắt đầu",status:"Trạng thái",coursecategory_info_title:"Thông tin Danh mục khóa học",coursecategory_info_content:"Thông tin chi tiết Danh mục khóa học",title:"Tiêu đề",duration:"Độ dài",marktype:"Cách chấm",isshowanswer:"Hiển thị đáp án",isallowretake:"Có thể lấy lại",ischeckpassornot:"Có chấm điểm",marktopass:"Điểm(Số câu đúng) tối thiểu",coverfileid:"Ảnh đại diện",MARKTYPE_POINT:"Điểm",MARKTYPE_QUESTION:"Câu hỏi",one_file:"1 file",content:"Nội dung",insert_update_question:"Thêm/Cập nhật câu hỏi",type:"Loại",has_answer:"Đã trả lời",correctiffillinput:"Câu trả lời đúng",pointiffillinput:"Có điểm khi nhập",add_question:"Thêm câu hỏi",delete_quiz:"Xóa trắc nghiệm",over_time:"Hết giờ",option:"Đáp án (Mỗi đáp án nằm trên 1 dòng)",error_title_required:"Vui lòng nhập tên",question:"Câu hỏi",time:"Thời gian",minute:"Phút",second:"giây",displayorder:"Thứ tự",listquestion:"Danh sách câu hỏi",insert_quiz:"Thêm trắc nghiệm",zerodata_text:"Chưa có tiêu chí nào.",error_content_required:"Vui lòng nhập nội dung.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới.",error_role_not_available:"Bạn không có quyền thực hiện thao tác này",error_mark_to_pass_invalid:"Vui lòng nhập điểm/câu tối thiểu",error_take_is_finish:"Bài trắc nghiệm đã hết giờ hoặc hoàn thành",error_user_has_take_quiz:"Bạn đã bắt đầu làm bài",error_mark_type_invalid:"Vui lòng chọn cách chấm"}};return new e({lang:t})}),define("models/course-quiz",["basemodel","language/coursequiz","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmsquizs",cacheName:"lmsquizs",STATUS_ENABLE:1,STATUS_DISABLE:2,MARKTYPE_POINT:1,MARKTYPE_QUESTION:3,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getMarkTypeList:function(){return[{code:this.MARKTYPE_POINT,text:t.t("MARKTYPE_POINT"),color:"green"},{code:this.MARKTYPE_QUESTION,text:t.t("MARKTYPE_QUESTION"),color:"red"}]},getStatus:function(e){var t=this.getContant("status",e);return t},getMarkType:function(e){var t=this.getContant("mark",e);return t},getContant:function(e,t){var n=[];switch(e){case"status":n=this.getStatusList();break;case"mark":n=this.getMarkTypeList()}var a={};return n&&n.map(function(e,n){e.code==t&&(a=e)}),("object"!=typeof a||$.isEmptyObject(a))&&(a={text:"",color:"",code:t}),a}});return a}),define("collections/course-quiz",["basecollection","models/course-quiz"],function(e,t){var n=e.extend({model:t,url:"v1/lmsquizs"});return n}),define("language/courserating",["baselanguage"],function(e){var t={vn:{heading:"Đánh giá khóa học",heading_sidebar:"Đánh giá khóa học",employee:"Nhân viên",review:"Nhận xét",datecreated:"Ngày tạo",creator:"Người tạo",rating:"Điểm đánh giá",status:"Trạng thái",rating_1:"Rất tệ",rating_2:"Tệ",rating_3:"Bình thường",rating_4:"Hay",rating_5:"Rất hay",zerodata_text:"Chưa có tiêu chí nào.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới."},en:{heading:"Đánh giá khóa học",heading_sidebar:"Đánh giá khóa học",employee:"Nhân viên",review:"Nhận xét",datecreated:"Ngày tạo",creator:"Người tạo",rating:"Điểm đánh giá",status:"Trạng thái",rating_1:"Rất tệ",rating_2:"Tệ",rating_3:"Bình thường",rating_4:"Hay",rating_5:"Rất hay",zerodata_text:"Chưa có tiêu chí nào.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới."}};return new e({lang:t})}),define("models/course-rating",["basemodel","language/courserating","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmscourseratings",cacheName:"lmscourseratings",STATUS_ENABLE:1,STATUS_DISABLE:2,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t}});return a}),define("collections/course-rating",["basecollection","models/course-rating"],function(e,t){var n=e.extend({model:t,url:"v1/lmscourseratings"});return n}),define("language/courseteacherrel",["baselanguage"],function(e){var t={vn:{heading:"Trắc nghiệm",heading_sidebar:"Trắc nghiệm",datecreated:"Ngày tạo",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",coursecategory_info_title:"Thông tin Danh mục khóa học",coursecategory_info_content:"Thông tin chi tiết Danh mục khóa học",title:"Tiêu đề",duration:"Độ dài",marktype:"Cách tính điểm",isshowanswer:"Hiển thị cách tính điểm",isallowretake:"Có thể lấy lại",ischeckpassornot:"",marktopass:"Chấm đậu",coverfileid:"",MARKTYPE_POINT:"Điểm",MARKTYPE_QUESTION:"Câu hỏi",zerodata_text:"Chưa có tiêu chí nào.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới.",error_role_not_available:"Bạn không có quyền thực hiện thao tác này"},en:{heading:"Trắc nghiệm",heading_sidebar:"Trắc nghiệm",datecreated:"Ngày tạo",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",coursecategory_info_title:"Thông tin Danh mục khóa học",coursecategory_info_content:"Thông tin chi tiết Danh mục khóa học",title:"Tiêu đề",duration:"Độ dài",marktype:"Cách tính điểm",isshowanswer:"Hiển thị cách tính điểm",isallowretake:"Có thể lấy lại",ischeckpassornot:"",marktopass:"Chấm đậu",coverfileid:"",MARKTYPE_POINT:"Điểm",MARKTYPE_QUESTION:"Câu hỏi",zerodata_text:"Chưa có tiêu chí nào.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới.",error_role_not_available:"Bạn không có quyền thực hiện thao tác này"}};return new e({lang:t})}),define("models/course-teacher-rel",["basemodel","language/courseteacherrel","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmscourseteachers",cacheName:"lmscourseteachers",STATUS_ENABLE:1,STATUS_DISABLE:2,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t}});return a}),define("collections/course-teacher-rel",["basecollection","models/course-teacher-rel"],function(e,t){var n=e.extend({model:t,url:"v1/lmscourseteachers"});return n}),define("language/courseteacher",["baselanguage"],function(e){var t={vn:{heading:"Giáo viên",heading_sidebar:"Bộ lọc tiêu chí",employee:"Nhân viên",name:"Tên",type:"Phân loại",displayorder:"Thứ tự",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",delete:"Xóa",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",back:"Trở lại",close:"Đóng",course:"Khóa học",courseteacher_info_title:"Thông tin Giáo viên",courseteacher_info_content:"Thông tin chi tiết Giáo viên",link_twitter:"Liên kết Twitter",link_linkedin:"Liên kết Linkedin",link_pinterest:"Liên kết Pinterest",link_youtube:"Liên kết Youtube",link_facebook:"Liên kết Facebook",description:"Mô tả",company:"Công ty",job_title:"Chức vụ",avatar:"Ảnh đại diện",filter_status:"Trạng thái",filter_type:"Loại",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",sort_display_order:"Thứ tự hiển thị",sort_name:"Tên",sort_point:"Điểm",sort_date_created:"Ngày tạo",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",error_store_is_reqiure:"Vui lòng chọn cửa hàng!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_not_permissin_check:"Bạn không có quyền chấm điểm",error_name_required:"Vui lòng nhập tên!",error_point_is_require:"Vui lòng nhập điểm và điểm phải lớn hơn 0!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",TYPE_BAD:"Xấu",TYPE_GOOD:"Tốt",zerodata_text:"Chưa có dữ liệu",zerodata_subtext:"vui lòng thêm dữ liệu",error_role_not_available:"Bạn không có quyền thực hiện thao tác này"},en:{heading:"Giáo viên",heading_sidebar:"Bộ lọc tiêu chí",employee:"Nhân viên",name:"Tên",type:"Phân loại",displayorder:"Thứ tự",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",delete:"Xóa",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",back:"Trở lại",close:"Đóng",course:"Khóa học",courseteacher_info_title:"Thông tin Giáo viên",courseteacher_info_content:"Thông tin chi tiết Giáo viên",
link_twitter:"Liên kết Twitter",link_linkedin:"Liên kết Linkedin",link_pinterest:"Liên kết Pinterest",link_youtube:"Liên kết Youtube",link_facebook:"Liên kết Facebook",description:"Mô tả",company:"Công ty",job_title:"Chức vụ",avatar:"Ảnh đại diện",filter_status:"Trạng thái",filter_type:"Loại",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",sort_display_order:"Thứ tự hiển thị",sort_name:"Tên",sort_point:"Điểm",sort_date_created:"Ngày tạo",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",error_store_is_reqiure:"Vui lòng chọn cửa hàng!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_not_permissin_check:"Bạn không có quyền chấm điểm",error_name_required:"Vui lòng nhập tên!",error_point_is_require:"Vui lòng nhập điểm và điểm phải lớn hơn 0!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",TYPE_BAD:"Xấu",TYPE_GOOD:"Tốt",zerodata_text:"Chưa có dữ liệu",zerodata_subtext:"vui lòng thêm dữ liệu",error_role_not_available:"Bạn không có quyền thực hiện thao tác này"}};return new e({lang:t})}),define("models/course-teacher",["basemodel","language/courseteacher","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmsteachers",cacheName:"lmsteachers",STATUS_ENABLE:1,STATUS_DISABLE:2,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t}});return a}),define("collections/course-teacher",["basecollection","models/course-teacher"],function(e,t){var n=e.extend({model:t,url:"v1/lmsteachers"});return n}),define("language/course",["baselanguage"],function(e){var t={vn:{heading:"Khóa học",heading_sidebar:"Bộ lọc tiêu chí",creator:"Người tạo",name:"Tên",download_excel:"Tải file excel",reviewer:"Người đánh giá",review_date:"Ngày đánh giá",average_rating:"Điểm trung bình",reviews:"Đánh giá",rating:"Điểm",detailed_rating:"Điểm chi tiết",filter_category:"Danh mục",course_info_title:"Thông tin Khóa học",course_info_content:"Thông tin chi tiết Khóa học",description:"Mô tả",search_by_quiz:"Lọc trắc nghiệm",all_quiz:"Tất cả trắc nghiệm",category:"Danh mục",outcome:"Từ bên ngoài",isfree:"Miễn phí",istimelimit:"Giới hạn thời gian",visibility:"Hiển thị",countchapter:"Tổng bài",countlecture:"",countquiz:"",countenroll:"",avgrating:"",date_created_take:"Ngày thi",durationinminute:"Độ dài (phút)",skilllevel:"Trình độ",review_rating:"Đánh giá",comment_share:"Chia sẻ",post:"Đăng",review_success:"Đăng thành công",review_error:"Đăng thất bại",language:"Ngôn ngữ",price:"Phí",status:"Trạng thái",filter_keyword:"Từ khóa",coverfileid:"Hình bìa",ipaddress:"",datecreated:"Ngày tạo",datemodified:"Ngày cập nhật",datestarted:"Ngày bắt đầu",dateended:"Ngày kết thúc",VISIBILITY_PUBLIC:"Công khai",VISIBILITY_ALL_EMPLOYEE:"Với nhân viên",VISIBILITY_LIMIT_ACCESS:"Giới hạn",SKILLLEVEL_ALL:"Tất cả",SKILLLEVEL_BEGINNER:"Bắt đầu",SKILLLEVEL_INTERMEDIATE:"Trung cấp",SKILLLEVEL_ADVANCED:"Nâng cao",IS_DELETE:"Xóa",IS_FREE:"Miễn phí",IS_TIME_LIMIT:"Giới hạn thời gian",tab_info:"Thông tin",tab_chapter:"Chương",tab_teacher:"Giáo viên",tab_review:"Đánh giá",tab_enroll:"Đăng kí",chapter:"Chương",insert_chapter:"Thêm Chương",update_chapter:"Cập nhật chương",tab_lecture:"Bài học",tab_quiz:"Trắc nghiệm",count_lecture:"Số bài học",tab_limit:"Giới hạn",review:"Đánh giá",date_start:"Ngày bắt đầu",filter_status:"Trạng thái",delete_teacher_success:"Xóa giáo viên thành công",filter_creator_id:"Người tạo",sort_date_created:"Ngày tạo",sort_date_started:"Ngày bắt đầu",sort_date_end:"Ngày kết thúc",date_end:"Ngày kết thúc",insert_teacher_success:"Thêm giáo viên thành công",error_name_required:"Vui lòng nhập tên",error_status_invalid:"Vui lòng chọn trạng thái",zerodata_text:"Chưa có dữ liệu",zerodata_subtext:"vui lòng thêm dữ liệu",thumnail:"Hình Đại diện",time_study:"Thời gian học",student:"Học viên",tab_take:"Kết quả trắc nghiệm",pass:"Đạt",fail:"Không Đạt",error_date_started_more_than_date_ended:"Ngày bắt đầu phải nhỏ hơn ngày kết thúc",error_lms_course_category_id_required:"Vui lòng chọn danh mục",error_language_required:"Vui lòng nhập ngôn ngữ",error_user_id_required:"Vui lòng chọn nhân viên",error_user_is_exist:"Nhân viên đã được đăng kí",error_user_id_not_found:"Nhân viên không hợp lệ",error_visibility_required:"Vui lòng chọn loại hiển thị",error_visibility_invalid:"Loại hiển thị không hợp lệ",error_skill_level_required:"Vui lòng chọn trình độ",error_cover_required:"Vui lòng chọn hình bìa",error_thumbnail_id_required:"Vui lòng chọn hình địa diện",error_role_not_available:"Bạn không có quyền thực hiện thao tác này",add_course:"Tạo khóa học"},en:{heading:"Khóa học",heading_sidebar:"Bộ lọc tiêu chí",creator:"Người tạo",name:"Tên",download_excel:"Tải file excel",reviewer:"Người đánh giá",review_date:"Ngày đánh giá",average_rating:"Điểm trung bình",reviews:"Đánh giá",rating:"Điểm",detailed_rating:"Điểm chi tiết",filter_category:"Danh mục",course_info_title:"Thông tin Khóa học",course_info_content:"Thông tin chi tiết Khóa học",description:"Mô tả",search_by_quiz:"Lọc trắc nghiệm",all_quiz:"Tất cả trắc nghiệm",category:"Danh mục",outcome:"Từ bên ngoài",isfree:"Miễn phí",istimelimit:"Giới hạn thời gian",visibility:"Hiển thị",countchapter:"Tổng bài",countlecture:"",countquiz:"",countenroll:"",avgrating:"",date_created_take:"Ngày thi",durationinminute:"Độ dài (phút)",skilllevel:"Trình độ",review_rating:"Đánh giá",comment_share:"Chia sẻ",post:"Đăng",review_success:"Đăng thành công",review_error:"Đăng thất bại",language:"Ngôn ngữ",price:"Phí",status:"Trạng thái",filter_keyword:"Từ khóa",coverfileid:"Hình bìa",ipaddress:"",datecreated:"Ngày tạo",datemodified:"Ngày cập nhật",datestarted:"Ngày bắt đầu",dateended:"Ngày kết thúc",VISIBILITY_PUBLIC:"Công khai",VISIBILITY_ALL_EMPLOYEE:"Với nhân viên",VISIBILITY_LIMIT_ACCESS:"Giới hạn",SKILLLEVEL_ALL:"Tất cả",SKILLLEVEL_BEGINNER:"Bắt đầu",SKILLLEVEL_INTERMEDIATE:"Trung cấp",SKILLLEVEL_ADVANCED:"Nâng cao",IS_DELETE:"Xóa",IS_FREE:"Miễn phí",IS_TIME_LIMIT:"Giới hạn thời gian",tab_info:"Thông tin",tab_chapter:"Chương",tab_teacher:"Giáo viên",tab_review:"Đánh giá",tab_enroll:"Đăng kí",chapter:"Chương",insert_chapter:"Thêm Chương",update_chapter:"Cập nhật chương",tab_lecture:"Bài học",tab_quiz:"Trắc nghiệm",count_lecture:"Số bài học",tab_limit:"Giới hạn",review:"Đánh giá",date_start:"Ngày bắt đầu",filter_status:"Trạng thái",delete_teacher_success:"Xóa giáo viên thành công",filter_creator_id:"Người tạo",sort_date_created:"Ngày tạo",sort_date_started:"Ngày bắt đầu",sort_date_end:"Ngày kết thúc",date_end:"Ngày kết thúc",insert_teacher_success:"Thêm giáo viên thành công",error_name_required:"Vui lòng nhập tên",error_status_invalid:"Vui lòng chọn trạng thái",zerodata_text:"Chưa có dữ liệu",zerodata_subtext:"vui lòng thêm dữ liệu",thumnail:"Hình Đại diện",time_study:"Thời gian học",student:"Học viên",tab_take:"Kết quả trắc nghiệm",pass:"Đạt",fail:"Không Đạt",error_date_started_more_than_date_ended:"Ngày bắt đầu phải nhỏ hơn ngày kết thúc",error_lms_course_category_id_required:"Vui lòng chọn danh mục",error_language_required:"Vui lòng nhập ngôn ngữ",error_user_id_required:"Vui lòng chọn nhân viên",error_user_is_exist:"Nhân viên đã được đăng kí",error_user_id_not_found:"Nhân viên không hợp lệ",error_visibility_required:"Vui lòng chọn loại hiển thị",error_visibility_invalid:"Loại hiển thị không hợp lệ",error_skill_level_required:"Vui lòng chọn trình độ",error_cover_required:"Vui lòng chọn hình bìa",error_thumbnail_id_required:"Vui lòng chọn hình địa diện",error_role_not_available:"Bạn không có quyền thực hiện thao tác này",add_course:"Tạo khóa học"}};return new e({lang:t})}),define("models/course",["basemodel","language/course","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmscourses",cacheName:"lmscourses",STATUS_ENABLE:1,STATUS_DISABLE:2,VISIBILITY_PUBLIC:1,VISIBILITY_ALL_EMPLOYEE:3,VISIBILITY_LIMIT_ACCESS:5,SKILLLEVEL_ALL:1,SKILLLEVEL_BEGINNER:3,SKILLLEVEL_INTERMEDIATE:5,SKILLLEVEL_ADVANCED:7,IS_DELETE:1,IS_FREE:3,IS_TIME_LIMIT:5,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){var t=this.getContant("status",e);return t},getContant:function(e,t){var n=[];switch(e){case"status":n=this.getStatusList();break;case"skill":n=this.getSkillList();break;case"visible":n=this.getVisibilityList();break;case"is":n=this.getIsList()}var a={};return n&&n.map(function(e,n){e.code==t&&(a=e)}),("object"!=typeof a||$.isEmptyObject(a))&&(a={text:"",color:"",code:t}),a},getVisibilityList:function(){return[{code:this.VISIBILITY_PUBLIC,text:t.t("VISIBILITY_PUBLIC"),color:"green"},{code:this.VISIBILITY_ALL_EMPLOYEE,text:t.t("VISIBILITY_ALL_EMPLOYEE"),color:"red"},{code:this.VISIBILITY_LIMIT_ACCESS,text:t.t("VISIBILITY_LIMIT_ACCESS"),color:"red"}]},getVisibility:function(e){var t=this.getContant("visible",e);return t},getSkillList:function(){return[{code:this.SKILLLEVEL_ALL,text:t.t("SKILLLEVEL_ALL"),color:"green"},{code:this.SKILLLEVEL_BEGINNER,text:t.t("SKILLLEVEL_BEGINNER"),color:"red"},{code:this.SKILLLEVEL_INTERMEDIATE,text:t.t("SKILLLEVEL_INTERMEDIATE"),color:"red"},{code:this.SKILLLEVEL_ADVANCED,text:t.t("SKILLLEVEL_ADVANCED"),color:"red"}]},getSkill:function(e){var t=this.getContant("skill",e);return t},getIsList:function(){return[{code:this.IS_DELETE,text:t.t("IS_DELETE"),color:"green"},{code:this.IS_FREE,text:t.t("IS_FREE"),color:"red"},{code:this.IS_TIME_LIMIT,text:t.t("IS_TIME_LIMIT"),color:"red"}]},getIs:function(e){var t=this.getContant("is",e);return t}});return a}),define("collections/course",["basecollection","models/course"],function(e,t){var n=e.extend({model:t,url:"v1/lmscourses"});return n}),define("language/employeebank",["baselanguage"],function(e){var t={vn:{bank:"Tên ngân hàng",number:"Mã số tài khoản",status:"Trạng thái",note:"Ghi chú",date_created:"Ngày tạo",STATUS_UNACTIVATED:"Chưa hiệu lực",STATUS_ENABLE:"Có hiệu lực",STATUS_DISABLE:"Vô hiệu lực",STATUS_DELETED:"Xóa",add_tk:"Thêm mới tài khoản",edit_tk:"Cập nhật tài khoản",error_bank_is_require:"Vui lòng nhập tên ngân hàng",error_number_is_require:"Vui lòng nhập mã số tài khoản"},en:{bank:"Tên ngân hàng",number:"Mã số tài khoản",status:"Trạng thái",note:"Ghi chú",date_created:"Ngày tạo",STATUS_UNACTIVATED:"Chưa hiệu lực",STATUS_ENABLE:"Có hiệu lực",STATUS_DISABLE:"Vô hiệu lực",STATUS_DELETED:"Xóa",add_tk:"Thêm mới tài khoản",edit_tk:"Cập nhật tài khoản",error_bank_is_require:"Vui lòng nhập tên ngân hàng",error_number_is_require:"Vui lòng nhập mã số tài khoản"}};return new e({lang:t})}),define("models/employeebank",["basemodel","language/employeebank"],function(e,t){var n=e.extend({urlRoot:"v1/employeebanks",cacheName:"employeebanks",STATUS_ENABLE:1,STATUS_DISABLE:3,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:t.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:t.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var n={code:e,text:"",color:""};switch(e){case this.STATUS_ENABLE:n.text=t.t("STATUS_ENABLE"),n.color="green";break;case this.STATUS_DISABLE:n.text=t.t("STATUS_DISABLE"),n.color="red"}return n}});return n}),define("collections/employeebank",["basecollection","models/employeebank"],function(e,t){var n=e.extend({model:t,url:"v1/employeebanks"});return n}),define("language/employeecontract",["baselanguage"],function(e){var t={vn:{heading:"Danh sách hợp đồng",type:"Loại hợp đồng",type_employee:"Loại hình công việc",number:"Số hợp đồng",parent_id:"Hợp đồng gốc",salary_gross:"Lương tổng",employee_type:"Mã số thuế",salary_net:"Lương thực lãnh",salary_basic:"Lương cơ bản",salary_ratio:"Phần trăm hưởng lương",salary_ensurance:"Mức lương đóng bảo hiểm",salary_support:"Lương trợ cấp",salary_type:"Hình thức trả lương",signer:"Người đại diện công ty ký",signer_position:"Chức vụ người đại diện",creator_id:"Người tạo",file_id_list:"File",date_signed:"Ngày ký",date_started:"Ngày hiệu lực",date_ended:"Ngày hết hiệu lực",title:"Tiêu đề ",time:"Thời gian",datecreated:"Ngày tạo",email:"Email",internalid:"Mã nội bộ",externalpartner:"Thành viên này chỉ là một đối tác bên ngoài.",discription:"'Đối tác bên ngoài chỉ có thể truy cập vào các dự án của mình, hoạt động & Chat)",discription2:"'Nếu công ty của bạn / nhóm đang chạy (hoặc có) một hệ thống để quản lý tất cả các tài khoản, trường này sẽ lưu trữ ID người dùng của hệ thống hiện tại của bạn. (Cho phép A-Z, 0-9 ký tự). Vídụ",workspace:"Làm việc tại ",filterOffice:"Tìm bởi văn phòng",filterOfficeAll:"Tất cả văn phòng",filterDepartment:"Tìm bởi phòng ban",filterDepartmentAll:"Tất cả phòng ban",filterPosition:"Tìm bởi chức vụ",filterPositionAll:"Tất cả chức vụ",load_more_employee:"Xem thêm",filter_not_found:"Không tìm thấy kết quả.",filter_type:"Loại hình công việc",filter_office_id:"Trụ sở",filter_department_id:"Phòng ban",filter_position_id:"Cấp bậc",filter_keyword:"Từ khóa",STATUS_UNACTIVATED:"Chưa hiệu lực",STATUS_ENABLE:"Bật",STATUS_DISABLE:"Tắt",STATUS_DELETED:"Xóa",POSITION_INTERNSHIP:"Mới tốt nghiệp / Thực tập",POSITION_STAFF:"Nhân viên",POSITION_GROUP_LEAD:"Trưởng nhóm / Giám sát",POSITION_ASSISTANT_MANAGER:"Phó phòng",POSITION_MANAGER:"Trưởng phòng",POSITION_SUBDIRECTOR:"Phó giám đốc",POSITION_DIRECTOR:"Giám đốc",POSITION_CEO:"Giám đốc điều hành",POSITION_SUBCHAIRMAN:"Phó chủ tịch",POSITION_CHAIRMAIN:"Chủ tịch",POSITION_STORE_ASSISTANT_MANAGER:"Trợ lý quản lý cửa hàng",POSITION_STORE_MANAGER:"Quản lý cửa hàng",TYPE_OFFICIAL:"Chính thức",TYPE_TRIAL:"Thử việc",TYPE_APPENDIX:"Phụ lục",SALARY_TYPE_MONEY:"Tiền mặt",SALARY_TYPE_INTERNET_BANKING:"Ngân hàng",user_info_title:"Tạo thành viên",user_info_content:"Không thể tìm thấy bất kỳ người dùng với email được chọn. Sử dụng mẫu sau để tạo người dùng mới với email được chọn.",employee_import_info_title:"Import tập tin Excel",employee_import_info_content:'Upload tập tin Excel với định dạng sau:<br /><a href="/files/employee-import-format.xls">Tải file mẫu</a>',search:"Tìm kiếm...",employee:"Nhân viên",Password:"Mật khẩu",fullname:"Họ tên",status:"Trạng thái",workTimeReport:"Tổng hợp giờ công",employee_info_title:"Thông tin nhân viên",employee_info_content:"Thông tin chi tiết nhân viên",no_import_data:"Không có dữ liệu",heading_import_data:"Import nhân viên",checkinHistory:"Lịch sử chấm công",checkInOut:"Chấm công",position:"Cấp bậc",creator:"Người tạo",name:"Tên",note:"Ghi chú",close:"Đóng",phone:"Điện thoại",import_finished:"Import hoàn tất",file_excel:"Tập tin excel",upload_file:"Upload tập tin",error_email_invalid:"Email sai định dạng",error_email_required:"Vui lòng nhập Email",error_phone_required:"Vui lòng nhập số điện thoại",error_user_id_required:"Email chưa được đăng ký",error_user_id_notfound:"Email chưa được đăng ký, Vui lòng điền thông tin bên dưới để đăng ký",error_company_id_invalid:"Công ty không tồn tại",error_user_id_existed:"thành viên đã là nhân viên",error_job_title_is_require:"Vui lòng nhập chức vụ",error_import:"Đã xảy ra lỗi. Vui lòng thử lại!",error_data_invalid:"Không đúng định dạng file!",error_file_invalid:"Không đúng định dạng file!",error_file_required:"Vui lòng chọn file!",error_file_size:"Dữ liệu file lớn hơn 100mb!",error_fullname_required:"Vui lòng nhập họ tên!",error_email_existed:"Email đã được đăng ký!",error_password_too_short:"Mật khẩu quá ngắn (ít nhất 7 ký tự)!",error_interal_id_exist:"Internal ID đã tồn tại!",error_employee_require:"Vui lòng chọn nhân viên",error_number_require:"Vui lòng nhập Số hợp đồng",error_name_require:"Vui lòng nhập Tên hợp đồng",error_salary_gross_require:"Vui lòng nhập Lương Tổng",error_salary_net_require:"Vui lòng nhập Lương thực lãnh",error_salary_basic_require:"Vui lòng nhập Lương cơ bản",error_salary_ratio_require:"Vui lòng nhập Tỷ lệ hưởng lương",error_salary_ensurance_require:"Vui lòng nhập Mức lương đóng bảo hiểm",error_salary_support_require:"Vui lòng nhập Lương trợ cấp",error_salary_type_require:"Vui lòng nhập Hình thức trả lương",error_signer_invalid:"Người đại diện công ty ký",error_status_invalid:"Trạng thái không đúng định dạng",error_status_reuqire:"Vui lòng chọn trạng thái",error_type_require:"Vui lòng chọn loại",error_type_invalid:"Loại không hợp lệ",tab_syll:"Sơ yếu lý lịch",tab_hd:"Hợp đồng",tab_qtlav:"Quá trình làm việc",tab_tk:"Tài khoản",tab_cc:"Chấm công",tab_l:"Lương",tab_np:"Nghỉ phép",tab_ct:"Công tác",tab_ktkl:"Khen thưởng kỉ luật",add_hd:"Thêm mới hợp đồng",edit_hd:"Cập nhật hợp đồng",add_qtlv:"Thêm quá trình làm việc",office:"Trụ sở",department:"Văn phòng"},en:{heading:"Danh sách hợp đồng",type:"Loại hợp đồng",type_employee:"Loại hình công việc",number:"Số hợp đồng",parent_id:"Hợp đồng gốc",salary_gross:"Lương tổng",employee_type:"Mã số thuế",salary_net:"Lương thực lãnh",salary_basic:"Lương cơ bản",salary_ratio:"Phần trăm hưởng lương",salary_ensurance:"Mức lương đóng bảo hiểm",salary_support:"Lương trợ cấp",salary_type:"Hình thức trả lương",signer:"Người đại diện công ty ký",signer_position:"Chức vụ người đại diện",creator_id:"Người tạo",file_id_list:"File",date_signed:"Ngày ký",date_started:"Ngày hiệu lực",date_ended:"Ngày hết hiệu lực",title:"Tiêu đề ",time:"Thời gian",datecreated:"Ngày tạo",email:"Email",internalid:"Mã nội bộ",externalpartner:"Thành viên này chỉ là một đối tác bên ngoài.",discription:"'Đối tác bên ngoài chỉ có thể truy cập vào các dự án của mình, hoạt động & Chat)",discription2:"'Nếu công ty của bạn / nhóm đang chạy (hoặc có) một hệ thống để quản lý tất cả các tài khoản, trường này sẽ lưu trữ ID người dùng của hệ thống hiện tại của bạn. (Cho phép A-Z, 0-9 ký tự). Vídụ",workspace:"Làm việc tại ",filterOffice:"Tìm bởi văn phòng",filterOfficeAll:"Tất cả văn phòng",filterDepartment:"Tìm bởi phòng ban",filterDepartmentAll:"Tất cả phòng ban",filterPosition:"Tìm bởi chức vụ",filterPositionAll:"Tất cả chức vụ",load_more_employee:"Xem thêm",filter_not_found:"Không tìm thấy kết quả.",filter_type:"Loại hình công việc",filter_office_id:"Trụ sở",filter_department_id:"Phòng ban",filter_position_id:"Cấp bậc",filter_keyword:"Từ khóa",STATUS_UNACTIVATED:"Chưa hiệu lực",STATUS_ENABLE:"Bật",STATUS_DISABLE:"Tắt",STATUS_DELETED:"Xóa",POSITION_INTERNSHIP:"Mới tốt nghiệp / Thực tập",POSITION_STAFF:"Nhân viên",POSITION_GROUP_LEAD:"Trưởng nhóm / Giám sát",POSITION_ASSISTANT_MANAGER:"Phó phòng",POSITION_MANAGER:"Trưởng phòng",POSITION_SUBDIRECTOR:"Phó giám đốc",POSITION_DIRECTOR:"Giám đốc",POSITION_CEO:"Giám đốc điều hành",POSITION_SUBCHAIRMAN:"Phó chủ tịch",POSITION_CHAIRMAIN:"Chủ tịch",POSITION_STORE_ASSISTANT_MANAGER:"Trợ lý quản lý cửa hàng",POSITION_STORE_MANAGER:"Quản lý cửa hàng",TYPE_OFFICIAL:"Chính thức",TYPE_TRIAL:"Thử việc",TYPE_APPENDIX:"Phụ lục",SALARY_TYPE_MONEY:"Tiền mặt",SALARY_TYPE_INTERNET_BANKING:"Ngân hàng",user_info_title:"Tạo thành viên",user_info_content:"Không thể tìm thấy bất kỳ người dùng với email được chọn. Sử dụng mẫu sau để tạo người dùng mới với email được chọn.",employee_import_info_title:"Import tập tin Excel",employee_import_info_content:'Upload tập tin Excel với định dạng sau:<br /><a href="/files/employee-import-format.xls">Tải file mẫu</a>',search:"Tìm kiếm...",employee:"Nhân viên",Password:"Mật khẩu",fullname:"Họ tên",status:"Trạng thái",workTimeReport:"Tổng hợp giờ công",employee_info_title:"Thông tin nhân viên",employee_info_content:"Thông tin chi tiết nhân viên",no_import_data:"Không có dữ liệu",heading_import_data:"Import nhân viên",checkinHistory:"Lịch sử chấm công",checkInOut:"Chấm công",position:"Cấp bậc",creator:"Người tạo",name:"Tên",note:"Ghi chú",close:"Đóng",phone:"Điện thoại",import_finished:"Import hoàn tất",file_excel:"Tập tin excel",upload_file:"Upload tập tin",error_email_invalid:"Email sai định dạng",error_email_required:"Vui lòng nhập Email",error_phone_required:"Vui lòng nhập số điện thoại",error_user_id_required:"Email chưa được đăng ký",error_user_id_notfound:"Email chưa được đăng ký, Vui lòng điền thông tin bên dưới để đăng ký",error_company_id_invalid:"Công ty không tồn tại",error_user_id_existed:"thành viên đã là nhân viên",error_job_title_is_require:"Vui lòng nhập chức vụ",error_import:"Đã xảy ra lỗi. Vui lòng thử lại!",error_data_invalid:"Không đúng định dạng file!",error_file_invalid:"Không đúng định dạng file!",error_file_required:"Vui lòng chọn file!",error_file_size:"Dữ liệu file lớn hơn 100mb!",error_fullname_required:"Vui lòng nhập họ tên!",error_email_existed:"Email đã được đăng ký!",error_password_too_short:"Mật khẩu quá ngắn (ít nhất 7 ký tự)!",error_interal_id_exist:"Internal ID đã tồn tại!",error_employee_require:"Vui lòng chọn nhân viên",error_number_require:"Vui lòng nhập Số hợp đồng",error_name_require:"Vui lòng nhập Tên hợp đồng",error_salary_gross_require:"Vui lòng nhập Lương Tổng",error_salary_net_require:"Vui lòng nhập Lương thực lãnh",error_salary_basic_require:"Vui lòng nhập Lương cơ bản",error_salary_ratio_require:"Vui lòng nhập Tỷ lệ hưởng lương",error_salary_ensurance_require:"Vui lòng nhập Mức lương đóng bảo hiểm",error_salary_support_require:"Vui lòng nhập Lương trợ cấp",error_salary_type_require:"Vui lòng nhập Hình thức trả lương",error_signer_invalid:"Người đại diện công ty ký",error_status_invalid:"Trạng thái không đúng định dạng",error_status_reuqire:"Vui lòng chọn trạng thái",error_type_require:"Vui lòng chọn loại",error_type_invalid:"Loại không hợp lệ",tab_syll:"Sơ yếu lý lịch",tab_hd:"Hợp đồng",tab_qtlav:"Quá trình làm việc",tab_tk:"Tài khoản",tab_cc:"Chấm công",tab_l:"Lương",tab_np:"Nghỉ phép",tab_ct:"Công tác",tab_ktkl:"Khen thưởng kỉ luật",add_hd:"Thêm mới hợp đồng",edit_hd:"Cập nhật hợp đồng",add_qtlv:"Thêm quá trình làm việc",office:"Trụ sở",department:"Văn phòng"}};return new e({lang:t})}),define("models/employeecontract",["basemodel","language/employeecontract"],function(e,t){var n=e.extend({urlRoot:"v1/employeecontracts",cacheName:"employeecontracts",TYPE_OFFICIAL:1,TYPE_TRIAL:3,TYPE_APPENDIX:5,SALARY_TYPE_MONEY:1,SALARY_TYPE_INTERNET_BANKING:3,STATUS_ENABLE:1,STATUS_DISABLE:3,getSalaryTypeList:function(){return[{code:this.TYPE_OFFICIAL,text:t.t("SALARY_TYPE_MONEY"),color:"green"},{code:this.TYPE_TRIAL,text:t.t("SALARY_TYPE_INTERNET_BANKING"),color:"blue"}]},getSalaryType:function(e){e=parseInt(e);var n={code:e,text:"",color:""};switch(e){case this.SALARY_TYPE_MONEY:n.text=t.t("SALARY_TYPE_MONEY"),n.color="green";break;case this.SALARY_TYPE_INTERNET_BANKING:n.text=t.t("SALARY_TYPE_INTERNET_BANKING"),n.color="blue"}return n},getTypeList:function(){return[{code:this.TYPE_OFFICIAL,text:t.t("TYPE_OFFICIAL"),color:"green"},{code:this.TYPE_TRIAL,text:t.t("TYPE_TRIAL"),color:"blue"},{code:this.TYPE_APPENDIX,text:t.t("TYPE_APPENDIX"),color:"blue"}]},getType:function(e){e=parseInt(e);var n={code:e,text:"",color:""};switch(e){case this.TYPE_OFFICIAL:n.text=t.t("TYPE_OFFICIAL"),n.color="green";break;case this.TYPE_TRIAL:n.text=t.t("TYPE_TRIAL"),n.color="blue";break;case this.TYPE_APPENDIX:n.text=t.t("TYPE_APPENDIX"),n.color="blue"}return n},getStatusList:function(){return[{code:this.STATUS_ENABLE,text:"Enable",color:"green"},{code:this.STATUS_DISABLE,text:"Disable",color:"red"}]},getStatus:function(e){e=parseInt(e);var t={code:e,text:"",color:""};switch(e){case this.STATUS_ENABLE:t.text="Enable",t.color="green";break;case this.STATUS_DISABLE:t.text="Disable",t.color="red"}return t}});return n}),define("collections/employeecontract",["basecollection","models/employeecontract"],function(e,t){var n=e.extend({model:t,url:"v1/employeecontracts"});return n}),define("models/employeemore",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/employeemores",cacheName:"employeemores"});return t}),define("collections/employeemore",["basecollection","models/employeemore"],function(e,t){var n=e.extend({model:t,url:"v1/employeemores"});return n}),define("models/employeepoint",["basemodel","language/default"],function(e,t){var n=e.extend({urlRoot:"v1/employeepoints",cacheName:"employeepoints",STATUS_ENABLE:1,STATUS_DISABLE:2,TYPE_LOCATION:0,TYPE_OFFICE:1,getSummary:function(e,t){var n=this.urlRoot+"/summary";$.ajax({url:n,type:"GET",data:e,success:function(e){t(e)},error:function(e){}})},getStatusList:function(){return[{code:this.STATUS_ENABLE,text:t.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:t.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var n={code:e,text:"",color:""};switch(e){case this.STATUS_ENABLE:n.text=t.t("STATUS_ENABLE"),n.color="green";break;case this.STATUS_DISABLE:n.text=t.t("STATUS_DISABLE"),n.color="red"}return n}});return n}),define("collections/employeepoint",["basecollection","models/employeepoint"],function(e,t){var n=e.extend({model:t,url:"v1/employeepoints"});return n}),define("language/employeepointtopic",["baselanguage"],function(e){var t={vn:{heading:"Tiêu chí chấm điểm nhân viên",heading_sidebar:"Bộ lọc tiêu chí",employee:"Nhân viên",insert_button:"Tạo Tiêu chí chấm điểm nhân viên",name:"Tên tiêu chí",type:"Phân loại",displayorder:"Thứ tự hiển thị",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",delete:"Xóa",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",employeepointtopic:"Tiêu chí chấm điểm nhân viên",back:"Trở lại",close:"Đóng",employeepointtopic_info_title:"Thông tin Tiêu chí",employeepointtopic_info_content:"Thông tin chi tiết Tiêu chí",filter_status:"Trạng thái",filter_type:"Loại",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",sort_display_order:"Thứ tự hiển thị",sort_name:"Tên",sort_point:"Điểm",sort_date_created:"Ngày tạo",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",error_store_is_reqiure:"Vui lòng chọn cửa hàng!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_not_permissin_check:"Bạn không có quyền chấm điểm",error_name_is_require:"Vui lòng nhập tên!",error_point_is_require:"Vui lòng nhập điểm và điểm phải lớn hơn 0!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",TYPE_BAD:"Xấu",TYPE_GOOD:"Tốt",zerodata_text:"Chưa có tiêu chí nào.",zerodata_subtext:"Thêm tiêu chí chấm điểm cho nhân viên bằng cách nhấn nút bên dưới."},en:{heading:"Tiêu chí chấm điểm nhân viên",heading_sidebar:"Bộ lọc tiêu chí",employee:"Nhân viên",insert_button:"Tạo Tiêu chí chấm điểm nhân viên",name:"Tên tiêu chí",type:"Phân loại",displayorder:"Thứ tự hiển thị",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",delete:"Xóa",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",employeepointtopic:"Tiêu chí chấm điểm nhân viên",back:"Trở lại",close:"Đóng",employeepointtopic_info_title:"Thông tin Tiêu chí",employeepointtopic_info_content:"Thông tin chi tiết Tiêu chí",filter_status:"Trạng thái",filter_type:"Loại",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",sort_display_order:"Thứ tự hiển thị",sort_name:"Tên",sort_point:"Điểm",sort_date_created:"Ngày tạo",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",error_store_is_reqiure:"Vui lòng chọn cửa hàng!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_not_permissin_check:"Bạn không có quyền chấm điểm",error_name_is_require:"Vui lòng nhập tên!",error_point_is_require:"Vui lòng nhập điểm và điểm phải lớn hơn 0!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",TYPE_BAD:"Xấu",TYPE_GOOD:"Tốt",zerodata_text:"Chưa có tiêu chí nào.",zerodata_subtext:"Thêm tiêu chí chấm điểm cho nhân viên bằng cách nhấn nút bên dưới."}};return new e({lang:t})}),define("models/employeepointtopic",["basemodel","language/employeepointtopic","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/employeepointtopics",cacheName:"employeepointtopics",STATUS_ENABLE:1,STATUS_DISABLE:3,TYPE_GOOD:1,TYPE_BAD:3,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t},getTypeList:function(){return[{code:this.TYPE_GOOD,text:t.t("TYPE_GOOD"),color:"blue"},{code:this.TYPE_BAD,text:t.t("TYPE_BAD"),color:"orange"}]},getType:function(e){e=parseInt(e);var t=this.getTypeList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t}});return a}),define("collections/employeepointtopic",["basecollection","models/employeepointtopic"],function(e,t){var n=e.extend({model:t,url:"v1/employeepointtopics"});return n}),define("models/employeeprogress",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/employeeprogresss",cacheName:"employeeprogresss",STATUS_ENABLE:1,STATUS_DISABLE:3,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:"Enable",color:"green"},{code:this.STATUS_DISABLE,text:"Disable",color:"red"}]},getStatus:function(e){e=parseInt(e);var t={code:e,text:"",color:""};switch(e){case this.STATUS_ENABLE:t.text="Enable",t.color="green";break;case this.STATUS_DISABLE:t.text="Disable",t.color="red"}return t}});return t}),define("collections/employeeprogress",["basecollection","models/employeeprogress"],function(e,t){var n=e.extend({model:t,url:"v1/employeeprogresss"});return n}),define("collections/file",["basecollection","models/file"],function(e,t){var n=e.extend({url:"v1/files",model:t});return n}),define("language/hrmleave",["baselanguage"],function(e){var t={vn:{heading:"Xin nghỉ phép",heading_setting:"Cấu hình nghỉ phép",heading_sidebar:"Bộ lọc nghỉ phép",employee:"Nhân viên",reason:"Lý do",note:"Ghi chú",duration:"Thời gian",date_created:"Ngày tạo",setting:"Cài đặt",setting_info:"Cài đặt thời gian nghỉ phép, người duyệt",minimum_duration:"Thời gian nghỉ phép tối thiểu",hour_per_day_off:"Số giờ/ngày nghỉ",count_hour_leave:"Số giờ xin nghỉ",count_day_leave:"Số ngày xin nghỉ",count_no_paid:"Giờ nghỉ không có lương",count_paid:"Giờ nghỉ có lương",contact_phone:"Điện thoại liên hệ",hour:"Giờ",day:"Ngày",review1:"Vòng 1",review2:"Vòng 2",review3:"Vòng 3",default_reviewer1:"Người duyệt vòng 1",default_reviewer2:"Người duyệt vòng 2",default_reviewer3:"Người duyệt vòng 3",approve:"Duyệt",approved:"Đã duyệt",reject:"Từ chối",pending_approve:"Chờ duyệt",pending_you_approve:"Chờ bạn duyệt",status:"Trạng thái",create_new:"Tạo đơn nghỉ phép mới",not_config:"Không được cấu hình",config:"Cấu hình nghỉ phép",detail_leave:"Chi tiết xin nghỉ phép",view_detail:"Xem chi tiết",delete:"Xóa",content:"Nội dung",filter_creator_id:"Nhân viên",filter_keyword:"Từ khóa",leave_info_title:"Thông tin nghỉ phép",leave_info_content:"Thông tin chi tiết lý do, thời gian nghỉ phép",success_delete:"Xóa thành công!",success_add:"Thêm thành công!",error_add:"Có lỗi trong quá trình xin nghỉ phép. Vui lòng thử lại sau!",error_review:"Review thất bại. Vui lòng thử lại sau!",error_delete:"Xóa thất bại. Vui lòng thử lại sau!",error_contact_phone_required:"Bạn chưa nhập số điện thoại liên hệ!",error_count_hour_leave_required:"Bạn chưa nhập số giờ xin nghỉ!",error_reason_required:"Bạn chưa nhập lý do xin nghỉ!",error_default_reviewer_invalid:"Bạn phải chọn người duyệt theo thứ tự!",error_round_invalid:"Vòng trước đó chưa được review hoặc đã có người review ở vòng kế tiếp!",error_count_day_leave_required:"Bạn chưa nhập số ngày nghỉ!",error_count_day_leave_invalid:"Số ngày xin nghỉ phải là số lớn hơn 0!",error_not_config:"Không được cấu hình!",error_not_permission:"Bạn không có quyền!",
error_not_found:"Không có đơn xin nghỉ phép nào!",STATUS_NEW:"Mới",STATUS_PENDING_ONE:"Chờ duyệt vòng 1",STATUS_PENDING_TWO:"Chờ duyệt vòng 2",STATUS_PENDING_THREE:"Chờ duyệt vòng 3",STATUS_COMPLETE_APPROVE:"Đã duyệt",STATUS_COMPLETE_REJECT:"Từ chối",STATUS_COMPLETE_CANCEL:"Hủy",employee_position_no_config:"Không cấu hình",employee_position_manager:"Trưởng phòng",employee_position_store_manager:"Quản lý cửa hàng",zerodata_text:"Chưa có đơn xin nghỉ phép.",zerodata_subtext:"Tạo đơn xin nghỉ phép đầu tiên bằng cách nhấn nút bên dưới."},en:{heading:"Xin nghỉ phép",heading_setting:"Cấu hình nghỉ phép",heading_sidebar:"Bộ lọc nghỉ phép",employee:"Nhân viên",reason:"Lý do",note:"Ghi chú",duration:"Thời gian",date_created:"Ngày tạo",setting:"Cài đặt",setting_info:"Cài đặt thời gian nghỉ phép, người duyệt",minimum_duration:"Thời gian nghỉ phép tối thiểu",hour_per_day_off:"Số giờ/ngày nghỉ",count_hour_leave:"Số giờ xin nghỉ",count_day_leave:"Số ngày xin nghỉ",count_no_paid:"Giờ nghỉ không có lương",count_paid:"Giờ nghỉ có lương",contact_phone:"Điện thoại liên hệ",hour:"Giờ",day:"Ngày",review1:"Vòng 1",review2:"Vòng 2",review3:"Vòng 3",default_reviewer1:"Người duyệt vòng 1",default_reviewer2:"Người duyệt vòng 2",default_reviewer3:"Người duyệt vòng 3",approve:"Duyệt",approved:"Đã duyệt",reject:"Từ chối",pending_approve:"Chờ duyệt",pending_you_approve:"Chờ bạn duyệt",status:"Trạng thái",create_new:"Tạo đơn nghỉ phép mới",not_config:"Không được cấu hình",config:"Cấu hình nghỉ phép",detail_leave:"Chi tiết xin nghỉ phép",view_detail:"Xem chi tiết",delete:"Xóa",content:"Nội dung",filter_creator_id:"Nhân viên",filter_keyword:"Từ khóa",leave_info_title:"Thông tin nghỉ phép",leave_info_content:"Thông tin chi tiết lý do, thời gian nghỉ phép",success_delete:"Xóa thành công!",success_add:"Thêm thành công!",error_add:"Có lỗi trong quá trình xin nghỉ phép. Vui lòng thử lại sau!",error_review:"Review thất bại. Vui lòng thử lại sau!",error_delete:"Xóa thất bại. Vui lòng thử lại sau!",error_contact_phone_required:"Bạn chưa nhập số điện thoại liên hệ!",error_count_hour_leave_required:"Bạn chưa nhập số giờ xin nghỉ!",error_reason_required:"Bạn chưa nhập lý do xin nghỉ!",error_default_reviewer_invalid:"Bạn phải chọn người duyệt theo thứ tự!",error_round_invalid:"Vòng trước đó chưa được review hoặc đã có người review ở vòng kế tiếp!",error_count_day_leave_required:"Bạn chưa nhập số ngày nghỉ!",error_count_day_leave_invalid:"Số ngày xin nghỉ phải là số lớn hơn 0!",error_not_config:"Không được cấu hình!",error_not_permission:"Bạn không có quyền!",error_not_found:"Không có đơn xin nghỉ phép nào!",STATUS_NEW:"Mới",STATUS_PENDING_ONE:"Chờ duyệt vòng 1",STATUS_PENDING_TWO:"Chờ duyệt vòng 2",STATUS_PENDING_THREE:"Chờ duyệt vòng 3",STATUS_COMPLETE_APPROVE:"Đã duyệt",STATUS_COMPLETE_REJECT:"Từ chối",STATUS_COMPLETE_CANCEL:"Hủy",employee_position_no_config:"Không cấu hình",employee_position_manager:"Trưởng phòng",employee_position_store_manager:"Quản lý cửa hàng",zerodata_text:"Chưa có đơn xin nghỉ phép.",zerodata_subtext:"Tạo đơn xin nghỉ phép đầu tiên bằng cách nhấn nút bên dưới."}};return new e({lang:t})}),define("models/hrmleave",["basemodel","language/hrmleave"],function(e,t){var n=e.extend({urlRoot:"v1/hrmleaves",STATUS_NEW:1,STATUS_PENDING_ONE:3,STATUS_PENDING_TWO:5,STATUS_PENDING_THREE:7,STATUS_COMPLETE_APPROVE:9,STATUS_COMPLETE_REJECT:11,STATUS_COMPLETE_CANCEL:13,STATUS_REVIEW_APPROVE:1,STATUS_REVIEW_REJECT:3,getStatusList:function(){return[{code:this.STATUS_NEW,text:t.t("STATUS_NEW"),color:"gray"},{code:this.STATUS_PENDING_ONE,text:t.t("STATUS_PENDING_ONE"),color:"gray"},{code:this.STATUS_PENDING_TWO,text:t.t("STATUS_PENDING_TWO"),color:"gray"},{code:this.STATUS_PENDING_THREE,text:t.t("STATUS_PENDING_THREE"),color:"gray"},{code:this.STATUS_COMPLETE_APPROVE,text:t.t("STATUS_COMPLETE_APPROVE"),color:"green"},{code:this.STATUS_COMPLETE_REJECT,text:t.t("STATUS_COMPLETE_REJECT"),color:"red"},{code:this.STATUS_COMPLETE_CANCEL,text:t.t("STATUS_COMPLETE_CANCEL"),color:"grey"}]},getStatus:function(e){e=parseInt(e);var n={code:e,text:"",color:""};switch(e){case this.STATUS_NEW:n.text=t.t("STATUS_NEW"),n.color="gray";break;case this.STATUS_PENDING_ONE:n.text=t.t("STATUS_PENDING_ONE"),n.color="gray";break;case this.STATUS_PENDING_TWO:n.text=t.t("STATUS_PENDING_TWO"),n.color="gray";break;case this.STATUS_PENDING_THREE:n.text=t.t("STATUS_PENDING_THREE"),n.color="gray";break;case this.STATUS_COMPLETE_APPROVE:n.text=t.t("STATUS_COMPLETE_APPROVE"),n.color="green";break;case this.STATUS_COMPLETE_REJECT:n.text=t.t("STATUS_COMPLETE_REJECT"),n.color="red";break;case this.STATUS_COMPLETE_CANCEL:n.text=t.t("STATUS_COMPLETE_CANCEL"),n.color="gray"}return n}});return n}),define("collections/hrmleave",["basecollection","models/hrmleave"],function(e,t){var n=e.extend({url:"v1/hrmleaves",model:t});return n}),define("models/intro",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/intros"});return t}),define("collections/intro",["basecollection","models/intro"],function(e,t){var n=e.extend({url:"v1/intros",model:t});return n}),define("models/lmscourse",["basemodel","backbone","setting"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmscourses",STATUS_ENABLE:1,STATUS_DISABLE:3});return a}),define("collections/lmscourse",["basecollection","models/lmscourse"],function(e,t){var n=e.extend({url:"v1/lmscourses",model:t});return n}),define("models/lmscoursecategory",["basemodel","backbone","setting"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmscoursecategories",STATUS_ENABLE:1,STATUS_DISABLE:3});return a}),define("collections/lmscoursecategory",["basecollection","models/lmscoursecategory"],function(e,t){var n=e.extend({url:"v1/lmscoursecategories",model:t});return n}),define("language/mail",["baselanguage"],function(e){var t={vn:{heading_manage:"Quản lý thư công ty (Admin only)",empty:"Không có thư nào khớp với tìm kiếm của bạn.",subject:"Tiêu đề thư",message:"Nội dung",recipient:"Người nhận",from:"Từ",to:"Tới",me:"Tôi",date:"Ngày",day:"ngày",month:"tháng",year:"năm",date_created:"Ngày tạo",status:"Trạng thái",reply:"Trả lời",reply_all:"Trả lời tất cả",forward:"Chuyển tiếp",compose:"Soạn thư",new_mail:"Thư mới",inbox:"Hộp thư đến",starred:"Quan trọng",instarred:"Quan trọng",insent:"Đã gửi",intrash:"Thùng rác",send:"Gửi",quoted_sender_time:"Lúc",quoted_sender_write:"đã viết",forwarded_head:"'---------- Thư chuyển tiếp ----------",forwarded_from:"Từ",forwarded_date:"Lúc",forwarded_to:"Đến",attachment:"Tệp đính kèm",detail:"Chi tiết",hide_detail:"Ẩn chi tiết",keyword_placeholder:"Tìm kiếm thư...",employee:"Nhân viên",sender:"Người gửi",receiver:"Người nhận",two_columns:"Giao diện 2 cột",three_columns:"3 cột",success_add:"Gửi mail thành công!",error_add:"Có lỗi trong quá trình gửi mail. Vui lòng thử lại sau!",error_subject_required:"Bạn chưa nhập tiêu đề",error_message_required:"Bạn chưa nhập nội dung",error_message_too_short:"Nội dung quá ngắn. (Ít nhất 5 ký tự)",error_message_too_long:"Nội dung quá dài. (Tối đa 4000 ký tự)",error_content_too_short:"Nội dung quá ngắn. (Ít nhất 5 ký tự)",error_content_too_long:"Nội dung quá dài. (Tối đa 4000 ký tự)",error_empty_to:"Bạn chưa chọn người gửi",filter_all:"Tất cả",filter_none:"Bỏ chọn tất cả",filter_read:"Thư đã đọc",filter_creator_id:"Người tạo",filter_keyword:"Từ khóa",filter_unread:"Thư chưa đọc",filter_starred:"Thư gắn sao",filter_unstarred:"Thư không gắn sao",delete:"Xóa",delete_permanent:"Xóa vĩnh viễn",restore:"Khôi phục",creator_id:"Người tạo",mark_unread:"Đánh dấu là chưa đọc",mark_read:"Đánh dấu là đã đọc",mark_favourite:"Đánh dấu là quan trọng",mark_unfavourite:"Đánh dấu là không quan trọng",delete_this:"Xóa thư này",back:"Quay lại",cancel:"Hủy",other_action:"Tác vụ khác",mail_manager:"Quản lý thư (Admin only)",compose_info:"Thông tin mail cần gửi",reply_placeholder:"Nhập nội dung trả lời..."},en:{heading_manage:"Quản lý thư công ty (Admin only)",empty:"Không có thư nào khớp với tìm kiếm của bạn.",subject:"Chủ đề",message:"Nội dung",recipient:"Người nhận",from:"Từ",to:"Tới",me:"Tôi",date:"Ngày",day:"ngày",month:"tháng",year:"năm",date_created:"Ngày tạo",status:"Trạng thái",reply:"Trả lời",reply_all:"Trả lời tất cả",forward:"Chuyển tiếp",compose:"Soạn thư",new_mail:"Thư mới",inbox:"Hộp thư đến",starred:"Quan trọng",instarred:"Quan trọng",insent:"Đã gửi",intrash:"Thùng rác",send:"Gửi",quoted_sender_time:"Lúc",quoted_sender_write:"đã viết",forwarded_head:"'---------- Thư chuyển tiếp ----------",forwarded_from:"Từ",forwarded_date:"Lúc",forwarded_to:"Đến",attachment:"Tệp đính kèm",detail:"Chi tiết",hide_detail:"Ẩn chi tiết",keyword_placeholder:"Tìm kiếm thư...",employee:"Nhân viên",sender:"Người gửi",receiver:"Người nhận",two_columns:"Giao diện 2 cột",three_columns:"3 cột",success_add:"Gửi mail thành công!",error_add:"Có lỗi trong quá trình gửi mail. Vui lòng thử lại sau!",error_subject_required:"Bạn chưa nhập tiêu đề",error_message_required:"Bạn chưa nhập nội dung",error_message_too_short:"Nội dung quá ngắn. (Ít nhất 5 ký tự)",error_message_too_long:"Nội dung quá dài. (Tối đa 4000 ký tự)",error_content_too_short:"Nội dung quá ngắn. (Ít nhất 5 ký tự)",error_content_too_long:"Nội dung quá dài. (Tối đa 4000 ký tự)",error_empty_to:"Bạn chưa chọn người gửi",filter_all:"Tất cả",filter_none:"Bỏ chọn tất cả",filter_read:"Thư đã đọc",filter_creator_id:"Người tạo",filter_keyword:"Từ khóa",filter_unread:"Thư chưa đọc",filter_starred:"Thư gắn sao",filter_unstarred:"Thư không gắn sao",delete:"Xóa",delete_permanent:"Xóa vĩnh viễn",restore:"Khôi phục",creator_id:"Người tạo",mark_unread:"Đánh dấu là chưa đọc",mark_read:"Đánh dấu là đã đọc",mark_favourite:"Đánh dấu là quan trọng",mark_unfavourite:"Đánh dấu là không quan trọng",delete_this:"Xóa thư này",back:"Quay lại",cancel:"Hủy",other_action:"Tác vụ khác",mail_manager:"Quản lý thư (Admin only)",compose_info:"",reply_placeholder:""}};return new e({lang:t})}),define("models/mail",["basemodel","language/mail","models/file"],function(e,t,n){var a=e.extend({urlRoot:"v1/mails",getQuotedText:function(e,n){var a=e.content,i=moment.unix(e.date_created),r=i.format("HH:mm")+", "+i.format("DD/MM/YYYY");return a='<p></p><p></p>                        <div class="quotedmessagewrapper" id="mt-'+e.id+'"><p class="quotedmessagemeta">{quoted_sender_time} '+r+', <a href="javascript:void(0)" class="mailto" data-id="'+n.id+'">'+n.fullname+'</a> {quoted_sender_write}: </p><div class="quotedmessage">'+a+this.getAttachment(e)+"</div></div>                        <p></p>",a=a.replace(/\{quoted_sender_time\}/g,t.t("quoted_sender_time")),a=a.replace(/\{quoted_sender_write\}/g,t.t("quoted_sender_write")),a=a.replace(/\{forwarded_head\}/g,t.t("forwarded_head")),a=a.replace(/\{forwarded_from\}/g,t.t("forwarded_from")),a=a.replace(/\{forwarded_date\}/g,t.t("forwarded_date")),a=a.replace(/\{forwarded_to\}/g,t.t("forwarded_to"))},getForwardedText:function(e,n,a){var i="",r=moment.unix(e.date_created),o=r.format("HH:mm")+", "+r.format("DD/MM/YYYY");i='<p></p><p></p>                        <div class="forwardedmessagewrapper" id="mt-'+e.id+'">                            <p class="forwardedmessagemeta">                                <div class="forwaredmessagemetahead">{forwarded_head}</div>                                <div class="forwardedmessagefrom">{forwarded_from}: <a href="'+n.id+'" class="mailto" data-id="'+n.id+'">'+n.fullname+'</a></div>                                <div class="forwardedmessagedate">{forwarded_date}: '+o+'</div>                                <div class="forwardedmessageto">{forwarded_to}: ';for(var s=0;s<a.length;s++){s>0&&(i+=", ");var l=a[s];i+='<a href="'+l.id+'">'+l.fullname+"</a>"}return i+='</div>                            </p>                            <p>&nbsp;</p>                        <div class="forwardedmessage">'+e.content+"</div>",e.files.length>0&&(i+=this.getAttachment(e)),i+="</div>                        <p></p>",i=i.replace(/\{quoted_sender_time\}/g,t.t("quoted_sender_time")),i=i.replace(/\{quoted_sender_write\}/g,t.t("quoted_sender_write")),i=i.replace(/\{forwarded_head\}/g,t.t("forwarded_head")),i=i.replace(/\{forwarded_from\}/g,t.t("forwarded_from")),i=i.replace(/\{forwarded_date\}/g,t.t("forwarded_date")),i=i.replace(/\{forwarded_to\}/g,t.t("forwarded_to"))},getAttachment:function(e){var a="";if(e.files.length>0){for(var i="",r=0;r<e.files.length;r++){var o=e.files[r],s=new n(o);i+='<div className="extra images">',i+='<a href="'+s.getDownloadUrl()+'" title="'+o.title+'" ref="image" rel="gal">                                    <img src="'+s.getThumbnail()+'" />                                </a>',i+="</div>"}a+='<div id="mailfile"><div className="ui divider"></div><p><strong>'+e.files.length+" "+t.t("attachment")+"</strong></p>"+i+"</div>"}return a}});return a}),define("collections/mail",["basecollection","models/mail"],function(e,t){var n=e.extend({url:"v1/mails",model:t});return n}),define("models/mailmanage",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/mailmanages"});return t}),define("collections/mailmanage",["basecollection","pref","models/mailmanage"],function(e,t,n){var a=e.extend({url:"v1/mailmanages",model:n});return a}),define("language/message",["baselanguage"],function(e){var t={vn:{empty:"Không có thư nào khớp với tìm kiếm của bạn.",subject:"Chủ đề",message:"Nội dung",recipient:"Người nhận",from:"Từ",to:"Tới",me:"Tôi",date:"Ngày",day:"ngày",month:"tháng",year:"năm",reply:"Trả lời",reply_all:"Trả lời tất cả",forward:"Chuyển tiếp",compose:"Soạn",new_mail:"Thư mới",inbox:"Hộp thư đến",starred:"Quan trọng",isstarred:"Quan trọng",sent:"Đã gửi",intrash:"Thùng rác",send:"Gửi",quoted_sender_time:"Lúc",quoted_sender_write:"đã viết",forwarded_head:"---------- Thư chuyển tiếp ----------",forwarded_from:"Từ",forwarded_date:"Lúc",forwarded_to:"Đến",attachment:"Tệp đính kèm",detail:"Chi tiết",hide_detail:"Ẩn chi tiết",success_add:"Gửi mail thành công!",error_add:"Có lỗi trong quá trình gửi mail. Vui lòng thử lại sau!",error_subject_required:"Bạn chưa nhập tiêu đề",error_message_required:"Bạn chưa nhập nội dung",error_message_too_short:"Nội dung quá ngắn. (Ít nhất 5 ký tự)",error_message_too_long:"Nội dung quá dài. (Tối đa 4000 ký tự)",error_empty_to:"Bạn chưa chọn người gửi",filter_all:"Tất cả",filter_none:"Bỏ chọn tất cả",filter_read:"Thư đã đọc",filter_unread:"Thư chưa đọc",filter_starred:"Thư gắn sao",filter_unstarred:"Thư không gắn sao",delete:"Xóa",delete_permanent:"Xóa vĩnh viễn",delete_this:"Xóa thư này",back:"Quay lại",cancel:"Hủy"},en:{empty:"Không có thư nào khớp với tìm kiếm của bạn.",subject:"Chủ đề",message:"Nội dung",recipient:"Người nhận",from:"Từ",to:"Tới",me:"Tôi",date:"Ngày",day:"ngày",month:"tháng",year:"năm",reply:"Trả lời",reply_all:"Trả lời tất cả",forward:"Chuyển tiếp",compose:"Soạn",new_mail:"Thư mới",inbox:"Hộp thư đến",starred:"Quan trọng",isstarred:"Quan trọng",sent:"Đã gửi",intrash:"Thùng rác",send:"Gửi",quoted_sender_time:"Lúc",quoted_sender_write:"đã viết",forwarded_head:"---------- Thư chuyển tiếp ----------",forwarded_from:"Từ",forwarded_date:"Lúc",forwarded_to:"Đến",attachment:"Tệp đính kèm",detail:"Chi tiết",hide_detail:"Ẩn chi tiết",success_add:"Gửi mail thành công!",error_add:"Có lỗi trong quá trình gửi mail. Vui lòng thử lại sau!",error_subject_required:"Bạn chưa nhập tiêu đề",error_message_required:"Bạn chưa nhập nội dung",error_message_too_short:"Nội dung quá ngắn. (Ít nhất 5 ký tự)",error_message_too_long:"Nội dung quá dài. (Tối đa 4000 ký tự)",error_empty_to:"Bạn chưa chọn người gửi",filter_all:"Tất cả",filter_none:"Bỏ chọn tất cả",filter_read:"Thư đã đọc",filter_unread:"Thư chưa đọc",filter_starred:"Thư gắn sao",filter_unstarred:"Thư không gắn sao",delete:"Xóa",delete_permanent:"Xóa vĩnh viễn",delete_this:"Xóa thư này",back:"Quay lại",cancel:"Hủy"}};return new e({lang:t})}),define("models/message",["basemodel","language/message"],function(e,t){var n=e.extend({urlRoot:"v1/messages",getQuotedText:function(e,n){var a=e.message_text.text,i=moment.unix(e.date_created),r=i.format("HH:mm")+", "+i.format("DD/MM/YYYY");return a='<p></p><p></p>                        <div class="quotedmessagewrapper" id="mt-'+e.message_text.id+'"><p class="quotedmessagemeta">{quoted_sender_time} '+r+', <a href="javascript:void(0)" class="mailto" data-id="'+n.id+'">'+n.fullname+'</a> {quoted_sender_write}: </p><div class="quotedmessage">'+a+"</div>                        </div>                        <p></p>",a=a.replace(/\{quoted_sender_time\}/g,t.t("quoted_sender_time")),a=a.replace(/\{quoted_sender_write\}/g,t.t("quoted_sender_write")),a=a.replace(/\{forwarded_head\}/g,t.t("forwarded_head")),a=a.replace(/\{forwarded_from\}/g,t.t("forwarded_from")),a=a.replace(/\{forwarded_date\}/g,t.t("forwarded_date")),a=a.replace(/\{forwarded_to\}/g,t.t("forwarded_to"))},getForwardedText:function(e,n,a){var i="",r=moment.unix(e.date_created),o=r.format("HH:mm")+", "+r.format("DD/MM/YYYY");i='<p></p><p></p>                        <div class="forwardedmessagewrapper" id="mt-'+e.message_text.id+'">                            <p class="forwardedmessagemeta">                                <div class="forwaredmessagemetahead">{forwarded_head}</div>                                <div class="forwardedmessagefrom">{forwarded_from}: <a href="'+n.id+'" class="mailto" data-id="'+n.id+'">'+n.fullname+'</a></div>                                <div class="forwardedmessagedate">{forwarded_date}: '+o+'</div>                                <div class="forwardedmessageto">{forwarded_to}: ';for(var s=0;s<a.length;s++){s>0&&(i+=", ");var l=a[s];i+='<a href="'+l.id+'">'+l.fullname+"</a>"}return i+='</div>                            </p>                            <p>&nbsp;</p>                        <div class="forwardedmessage">'+e.message_text.text+"</div>                        </div>                        <p></p>",i=i.replace(/\{quoted_sender_time\}/g,t.t("quoted_sender_time")),i=i.replace(/\{quoted_sender_write\}/g,t.t("quoted_sender_write")),i=i.replace(/\{forwarded_head\}/g,t.t("forwarded_head")),i=i.replace(/\{forwarded_from\}/g,t.t("forwarded_from")),i=i.replace(/\{forwarded_date\}/g,t.t("forwarded_date")),i=i.replace(/\{forwarded_to\}/g,t.t("forwarded_to"))}});return n}),define("collections/message",["backbone","setting","models/message"],function(e,t,n){var a=e.Collection.extend({model:n,url:t.rooturl+"v1/emails",parse:function(e){return e.items}});return a}),define("collections/messages",["basecollection","models/message"],function(e,t){var n=e.extend({url:"v1/messages",model:t});return n}),define("models/notification",["react","backbone","setting"],function(e,t,n){var a=t.Model.extend({urlRoot:n.endpoint_notification+"v1/notification",initialize:function(){}});return a}),define("collections/notification",["backbone","setting","models/notification"],function(e,t,n){var a=e.Collection.extend({model:n,url:t.rooturl+"v1/notification",parse:function(e){return e.items}});return a}),define("language/project",["baselanguage"],function(e){var t={vn:{heading:"Dự án",heading_sidebar:"Bộ lọc dự án",name:"Tên",color:"Màu",description:"Mô tả",member:"Thành viên",story:"Công việc",iteration:"Phiên bản",bug:"Vấn đề",file:"Tài liệu",count_story:"Công việc",count_bug:"Vấn đề",status:"Trạng thái",filter_status:"Trạng thái",filter_user_id:"Nhân viên",filter_keyword:"Từ khóa",sort_date_started:"Ngày bắt đầu",project_type:"Kiểu dự án",duration:"Thời gian hoàn thành",customer:"Khách hàng",can_add_task:"Có thể tạo công việc",not_add_task:"Không thể tạo công việc",development_team:"Đội phát triển",project_manager:"Quản lý dự án",scrum_master:"Trưởng dự án",internal_hide_tab_summary:"Ẩn tab Tổng kết đối với nhân viên nội bộ?",external_hide_tab_summary:"Ẩn tab Tổng kết với đối tác bên ngoài?",internal_hide_tab_task:"Ẩn tab Công việc với nhân viên nội bộ?",external_hide_tab_task:"Ẩn tab Công việc với đối tác bên ngoài?",internal_hide_tab_issue:"Ẩn tab Vấn đề với nhân viên nội bộ?",external_hide_tab_issue:"Ẩn tab Vấn đề với đối tác bên ngoài?",internal_hide_tab_document:"Ẩn tab Tài liệu với nhân viên nội bộ?",external_hide_tab_document:"Ẩn tab Tài liệu với đối tác bên ngoài?",day:"ngày",date_started:"Ngày bắt đầu",date_completed_plan:"Ngày hoàn thành",filter_all:"Tất cả",story_prefix:"Tiền tố",story_prefix_help:"Thêm trước ID của công việc... Vd: FB, AB..",ordering:"STT",warning_choose_project_manager:"Bạn phải có ít nhất một quản lý dự án (hoặc trưởng dự án) để có thể thay đổi trạng thái hoàn thành công việc.",report_project_working:"Dự án đang làm",report_task_not_complete:"Công việc chưa hoàn thành",report_task_expired:"Công việc trễ hẹn",all_task_finished:"Tất cả công việc đã được hoàn thành.",all:"Tất cả",success_add:"Thêm mới dự án thành công!",success_edit:"Cập nhật dự án thành công!",success_delete:"Xóa dự án thành công!",error_add:"Thêm dự án thất bại. Vui lòng thử lại sau!",error_edit:"Cập nhật dự án thất bại. Vui lòng thử lại sau!",error_delete:"Xóa dự án thất bại. Vui lòng thử lại sau!",error_name_required:"Bạn chưa nhập tên dự án!",error_status_invalid:"Trạng thái không lệ!",error_start_date_invalid:"Ngày bắt đầu không hợp lệ!",error_complete_date_invalid:"Ngày hoàn thành không hợp lệ!",error_date_invalid:"Ngày hoàn thành phải lớn hơn ngày bắt đầu!",error_type_invalid:"Loại dự án không hợp lệ!",error_project_manager_required:"Bạn phải chọn quản lý dự án để có thể thay đổi trạng thái hoàn thành công việc",error_scrum_master_required:"Bạn phải chọn trưởng dự án để có thể thay đổi trạng thái hoàn thành công việc",error_forbidden:"Bạn không có quyền!",project_info_title:"Tổng quan",project_info_content:"Thông tin chi tiết dự án.",division_info_title:"Phân công",division_info_content:"Gán nhân viên vào dự án.",setting_info_title:"Cài đặt",setting_info_content:"Tất cả cài đặt cho dự án hiện tại.",delete_info_title:"Hủy dự án",delete_info_content:"Bạn không thể khôi phục dự án và những công việc, vấn đề liên quan đến dự án sau khi hủy.",add:"Tạo dự án mới",edit:"Cập nhật",edit_project:"Cập nhật dự án",cancel_project:"Hủy dự án",cancel_confirm:"Bạn thật sự muốn hủy dự án này?",STATUS_ENABLE:"Mới",STATUS_WORKING:"Đang làm",STATUS_COMPLETED:"Đã hoàn thành",STATUS_DISABLE:"Đóng",TYPE_NORMAL:"Bình thường",TYPE_SCRUM:"Scrum",zerodata_text:"Chưa có dự án nào.",zerodata_subtext:"Tạo dự án đầu tiên bằng cách nhấn nút bên dưới. <br />Hãy nhớ chỉ có quản lý dự án mới hoàn thành công việc được nhé.",manage:"Quản lý",wiki:"Wiki - Tài liệu",toggle_kanban:"Chuyển sang hiển thị dạng Kanban (cột)",toggle_table:"Chuyển sang hiển thị dạng bảng",table_view:"Dạng Bảng"},en:{heading:"Dự án",heading_sidebar:"Bộ lọc dự án",name:"Tên",color:"Màu",description:"Mô tả",member:"Thành viên",story:"Công việc",iteration:"Phiên bản",bug:"Vấn đề",file:"Tài liệu",count_story:"Công việc",count_bug:"Vấn đề",status:"Trạng thái",filter_status:"Trạng thái",filter_user_id:"Nhân viên",filter_keyword:"Từ khóa",sort_date_started:"Ngày bắt đầu",project_type:"Kiểu dự án",duration:"Thời gian hoàn thành",customer:"Khách hàng",can_add_task:"Có thể tạo công việc",not_add_task:"Không thể tạo công việc",development_team:"Đội phát triển",project_manager:"Quản lý dự án",scrum_master:"Trưởng dự án",internal_hide_tab_summary:"Ẩn tab Tổng kết đối với nhân viên nội bộ?",external_hide_tab_summary:"Ẩn tab Tổng kết với đối tác bên ngoài?",internal_hide_tab_task:"Ẩn tab Công việc với nhân viên nội bộ?",external_hide_tab_task:"Ẩn tab Công việc với đối tác bên ngoài?",internal_hide_tab_issue:"Ẩn tab Vấn đề với nhân viên nội bộ?",external_hide_tab_issue:"Ẩn tab Vấn đề với đối tác bên ngoài?",internal_hide_tab_document:"Ẩn tab Tài liệu với nhân viên nội bộ?",external_hide_tab_document:"Ẩn tab Tài liệu với đối tác bên ngoài?",day:"ngày",date_started:"Ngày bắt đầu",date_completed_plan:"Ngày hoàn thành",filter_all:"Tất cả",story_prefix:"Tiền tố",story_prefix_help:"Thêm trước ID của công việc... Vd: FB, AB..",ordering:"STT",warning_choose_project_manager:"Bạn phải có ít nhất một quản lý dự án (hoặc trưởng dự án) để có thể thay đổi trạng thái hoàn thành công việc.",report_project_working:"Dự án đang làm",report_task_not_complete:"Công việc chưa hoàn thành",report_task_expired:"Công việc trễ hẹn",all_task_finished:"Tất cả công việc đã được hoàn thành.",all:"Tất cả",success_add:"Thêm mới dự án thành công!",success_edit:"Cập nhật dự án thành công!",success_delete:"Xóa dự án thành công!",error_add:"Thêm dự án thất bại. Vui lòng thử lại sau!",error_edit:"Cập nhật dự án thất bại. Vui lòng thử lại sau!",error_delete:"Xóa dự án thất bại. Vui lòng thử lại sau!",error_name_required:"Bạn chưa nhập tên dự án!",error_status_invalid:"Trạng thái không lệ!",error_start_date_invalid:"Ngày bắt đầu không hợp lệ!",error_complete_date_invalid:"Ngày hoàn thành không hợp lệ!",error_date_invalid:"Ngày hoàn thành phải lớn hơn ngày bắt đầu!",error_type_invalid:"Loại dự án không hợp lệ!",error_project_manager_required:"Bạn phải chọn quản lý dự án để có thể thay đổi trạng thái hoàn thành công việc",error_scrum_master_required:"Bạn phải chọn trưởng dự án để có thể thay đổi trạng thái hoàn thành công việc",error_forbidden:"Bạn không có quyền!",project_info_title:"Tổng quan",project_info_content:"Thông tin chi tiết dự án.",division_info_title:"Phân công",division_info_content:"Gán nhân viên vào dự án.",setting_info_title:"Cài đặt",setting_info_content:"Tất cả cài đặt cho dự án hiện tại.",delete_info_title:"Hủy dự án",delete_info_content:"Bạn không thể khôi phục dự án và những công việc, vấn đề liên quan đến dự án sau khi hủy.",add:"Tạo dự án mới",edit:"Cập nhật",edit_project:"Cập nhật dự án",cancel_project:"Hủy dự án",cancel_confirm:"Bạn thật sự muốn hủy dự án này?",STATUS_ENABLE:"Mới",STATUS_WORKING:"Đang làm",STATUS_COMPLETED:"Đã hoàn thành",STATUS_DISABLE:"Đóng",TYPE_NORMAL:"Bình thường",TYPE_SCRUM:"Scrum",zerodata_text:"Chưa có dự án nào.",zerodata_subtext:"Tạo dự án đầu tiên bằng cách nhấn nút bên dưới. <br />Hãy nhớ chỉ có quản lý dự án mới hoàn thành công việc được nhé.",manage:"Quản lý",wiki:"Wiki - Tài liệu",toggle_kanban:"Chuyển sang hiển thị dạng Kanban (cột)",toggle_table:"Chuyển sang hiển thị dạng bảng",table_view:"Dạng Bảng"}};return new e({lang:t})}),define("models/project",["basemodel","role","language/project"],function(e,t,n){var a=e.extend({urlRoot:"v1/projects",STATUS_ENABLE:1,STATUS_WORKING:3,STATUS_COMPLETED:5,STATUS_DISABLE:7,TYPE_NORMAL:0,TYPE_SCRUM:1,getReport:function(e){$.ajax({url:this.urlRoot+"/report?company_id="+e.company_id,success:e.success})},getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"yellow"},{code:this.STATUS_WORKING,text:n.t("STATUS_WORKING"),color:"blue"},{code:this.STATUS_COMPLETED,text:n.t("STATUS_COMPLETED"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"grey"}]},getStatus:function(e){e=parseInt(e);var t={code:e,text:"",color:""};switch(e){case this.STATUS_ENABLE:t.text=n.t("STATUS_ENABLE"),t.color="yellow";break;case this.STATUS_WORKING:t.text=n.t("STATUS_WORKING"),t.color="teal";break;case this.STATUS_COMPLETED:t.text=n.t("STATUS_COMPLETED"),t.color="green";break;case this.STATUS_DISABLE:t.text=n.t("STATUS_DISABLE"),t.color="grey"}return t},getTypeList:function(){return[{code:this.TYPE_NORMAL,text:n.t("TYPE_NORMAL")},{code:this.TYPE_SCRUM,text:n.t("TYPE_SCRUM")}]},canAddProject:function(){return t.hasById(266)},canEditProject:function(){return t.hasById(266)},canDeleteProject:function(){return t.hasById(266)}});return a}),define("collections/project",["basecollection","models/project"],function(e,t){var n=e.extend({url:"v1/projects",model:t});return n}),define("language/projectiteration",["baselanguage"],function(e){var t={vn:{headding:"Phiên bản",name:"Tên",description:"Mô tả",status:"Trạng thái",start:"Ngày bắt đầu",finish:"Ngày hoàn thành",load_more:"Xem thêm phiên bản",success_add:"Thêm phiên bản thành công!",success_edit:"Cập nhật phiên bản thành công!",success_delete:"Xóa phiên bản thành công!",error_add:"Thêm phiên bản thất bại. Vui lòng thử lại sau!",error_edit:"Cập nhật phiên bản thất bại. Vui lòng thử lại sau!",error_delete:"Xóa phiên bản thất bại. Vui lòng thử lại sau!",error_name_required:"Bạn chưa nhập tên phiên bản!",error_status_required:"Bạn chưa chọn trạng thái!",error_status_invalid:"Trạng thái không hợp lệ!",error_finish_invalid:"Ngày hoàn thành không được nhỏ hơn ngày bắt đầu!",error_not_found:"Không tìm tháy phiên bản!",error_not_permission:"Bạn phải là quản lý hoặc trưởng dự án mới được tạo phiên bản!",task:"Công việc",all_task:"Tất cả công việc",create_iteration:"Tạo phiên bản",edit_iteration:"Sửa phiên bản",un_milestone:"Chưa phân nhóm",add:"Thêm",edit:"Cập nhật",edit_current:"Sửa phiên bản hiện tại",delete_current:"Xóa",delete_confirm:"Bạn có chắc chắn muốn xóa phiên bản hiện tại?",result_notfound:"Không tìm thấy kết quả.",STATUS_PENDING:"Chờ xử lý",STATUS_WORKING:"Đang làm",STATUS_COMPLETED:"Đã hoàn thành",STATUS_EXPIRED:"Hết hạn",search_placeholder:"Tìm theo tên phiên bản..."},en:{headding:"Phiên bản",name:"Tên",description:"Mô tả",status:"Trạng thái",start:"Ngày bắt đầu",finish:"Ngày hoàn thành",load_more:"Xem thêm phiên bản",success_add:"Thêm phiên bản thành công!",success_edit:"Cập nhật phiên bản thành công!",success_delete:"Xóa phiên bản thành công!",error_add:"Thêm phiên bản thất bại. Vui lòng thử lại sau!",error_edit:"Cập nhật phiên bản thất bại. Vui lòng thử lại sau!",error_delete:"Xóa phiên bản thất bại. Vui lòng thử lại sau!",error_name_required:"Bạn chưa nhập tên phiên bản!",error_status_required:"Bạn chưa chọn trạng thái!",error_status_invalid:"Trạng thái không hợp lệ!",error_finish_invalid:"Ngày hoàn thành không được nhỏ hơn ngày bắt đầu!",error_not_found:"Không tìm tháy phiên bản!",error_not_permission:"Bạn phải là quản lý hoặc trưởng dự án mới được tạo phiên bản!",task:"Công việc",all_task:"Tất cả công việc",create_iteration:"Tạo phiên bản",edit_iteration:"Sửa phiên bản",un_milestone:"Chưa phân nhóm",add:"Thêm",edit:"Cập nhật",edit_current:"Sửa phiên bản hiện tại",delete_current:"Xóa",delete_confirm:"Bạn có chắc chắn muốn xóa phiên bản hiện tại?",result_notfound:"Không tìm thấy kết quả.",STATUS_PENDING:"Chờ xử lý",STATUS_WORKING:"Đang làm",STATUS_COMPLETED:"Đã hoàn thành",STATUS_EXPIRED:"Hết hạn",search_placeholder:"Tìm theo tên phiên bản..."}};return new e({lang:t})}),define("models/projectiteration",["basemodel","language/projectiteration"],function(e,t){var n=e.extend({urlRoot:"v1/projectiterations",STATUS_PENDING:1,STATUS_WORKING:3,STATUS_COMPLETED:5,STATUS_EXPIRED:7,getStatusList:function(){return[{code:this.STATUS_PENDING,text:t.t("STATUS_PENDING"),color:"yellow"},{code:this.STATUS_WORKING,text:t.t("STATUS_WORKING"),color:"teal"},{code:this.STATUS_COMPLETED,text:t.t("STATUS_COMPLETED"),color:"green"},{code:this.STATUS_EXPIRED,text:t.t("STATUS_EXPIRED"),color:"grey"}]},getStatus:function(e){e=parseInt(e);var n={code:e,text:"",color:""};switch(e){case this.STATUS_PENDING:n.text=t.t("STATUS_PENDING"),n.color="yellow";break;case this.STATUS_WORKING:n.text=t.t("STATUS_WORKING"),n.color="teal";break;case this.STATUS_COMPLETED:n.text=t.t("STATUS_COMPLETED"),n.color="green";break;case this.STATUS_EXPIRED:n.text=t.t("STATUS_EXPIRED"),n.color="grey"}return n}});return n}),define("collections/projectiteration",["basecollection","models/projectiteration"],function(e,t){var n=e.extend({url:"v1/projectiterations",model:t});return n}),define("language/projecttask",["baselanguage"],function(e){var t={vn:{heading:"Công việc",status:"Trạng thái",update_status:"Cập nhật trạng thái",new_status:"Trạng thái mới",start:"Bắt đầu",day:"ngày",month:"tháng",year:"năm",started:"Đã bắt đầu",completed:"Đã hoàn thành",start_date:"Ngày bắt đầu",finish_date:"Ngày hoàn thành",created:"Đã tạo",created_by:"Tạo bởi",last_modified:"Lần cập nhật cuối cùng",attachment:"Đính kèm",code:"Mã công việc",name:"Tên",type:"Loại",description:"Mô tả",done:"Hoàn thành (%)",priority:"Ưu tiên",progress:"Tiến độ",assignees:"Gán",assign_for:"Gán cho",edit_status:"Cập nhật trạng thái",date:"Ngày",note:"Ghi chú",tag:"Tag",tag_placeholder:"Gán thẻ cho công việc cách nhau bằng dấu ,",
change_note:"Ghi chú thay đổi",change_status:"Thay đổi trạng thái",iteration:"Phiên bản",depend:"Công việc phụ thuộc",duration:"Thời gian",late:"trễ",sidebar_heading:"Bộ lọc công việc",filter_keyword:"Từ khóa",filter_assignee_type:"Gán cho",filter_assignee_user:"Gán cho",filter_priority:"Ưu tiên",filter_status:"Trạng thái",filter_iteration_id:"Phiên bản",filter_taskid:"Mã công việc",filter_tag:"Tag",filter_type:"Loại",sort_name:"Tên",sort_id:"Mã",sort_date_created:"Ngày tạo",success_add:"Thêm mới công việc thành công!",success_edit:"Cập nhật công việc thành công!",success_delete:"Công việc {name} đã được xóa thành công!",success_update_status:"Cập nhật trạng thái thành công!",error_add:"Thêm công việc thất bại. Vui lòng thử lại!",error_date_invalid:"Ngày hoàn thành phải lớn hơn ngày bắt đầu!",error_type_invalid:"Loại task không hợp lệ",error_delete:"Xóa công việc {name} thất bại. Vui lòng thử lại!",error_update_status:"Cập nhật trạng thái thất bại! Vui lòng thử lại!",error_change_note_required:"Bạn chưa nhập ghi chú thay đổi!",error_status_invalid:"Bạn không có quyền!",error_status_or_progress_change_required:"Bạn phải thay đổi trạng thái hoặc tiến độ công việc trước khi tiếp tục!",error_name_required:"Bạn chưa nhập tên!",error_depend_invalid:"Công việc phụ thuộc không hợp lệ!",error_iteration_notfound:"Không tìm thấy phiên bản!",error_not_permission:"Bạn không đủ quyền!",error_not_found:"Không tìm thấy công việc!",error_text_required:"Bạn chưa nhập nội dung bình luận!",all:"Tất cả",assigned_to_me:"Gán cho tôi",assigned_to_others:"Gán cho người khác",me:"Tôi",other:"Người khác",un_assigned:"Chưa được gán",add_task:"Thêm công việc",add:"Thêm",add_and_close:"Thêm & đóng",edit_task:"Cập nhật",edit:"Cập nhật",un_milestone:"Chưa phân nhóm",un_planned:"Un-planned",update:"Cập nhật",update_history:"Lịch sử cập nhật",status_history_empty:"Chưa có thay đổi trạng thái!",filter_status_all:"Tất cả",who_working_on_this:"Ai làm việc này?",commentplaceholder:"Viết bình luận...",likethis:"thích điều này",commentmore:"Xem bình luận trước đó",error_comment_too_short:"Nội dung bình luận quá ngắn. Tối thiểu 5 ký tự.",error_comment_too_long:"Nội dung bình luận quá dài. Tối đa 64.000 ký tự.",error_message_or_file_required:"Bạn phải nhập nội dung trả lời hoặc chọn file trước khi gửi.",error_file_uploading_waiting:"Bạn có tập tin chưa hoàn tất upload. Hãy chờ hoàn tất và thử gửi lại sau.",choose:"-- Chọn công việc --",STATUS_PENDING:"Chờ xử lý",STATUS_ASSIGNED:"Đã giao việc",STATUS_WORKING:"Đang giải quyết",STATUS_NEED_FOR_APPROVAL:"Cần được duyệt",STATUS_REVIEWING:"Đang duyệt",STATUS_TESTING:"Đang kiểm tra",STATUS_COMPLETED_WITH_BUG:"Hoàn tất nhưng có lỗi",STATUS_COMPLETED:"Hoàn tất",STATUS_CANCELLED:"Hủy bỏ",PRIORITY_IMMEDIATE:"Khẩn cấp",PRIORITY_HIGH:"Cao",PRIORITY_MEDIUM:"Bình thường",PRIORITY_LOW:"Thấp",TYPE_FEATURE:"Tính năng",TYPE_ISSUE:"Vấn đề",TYPE_ENHANCEMENT:"Cải tiến",TYPE_PROPOSE:"Đề xuất",TYPE_DESIGN:"Thiết kế",editstatus_title:"Thay đổi trạng thái",edit_title:"Cập nhật thông tin công việc",delete_title:"Xóa công việc này",duration_unplanned:"Chưa xác định thời gian triển khai.",search_assginee_placeholder:"Họ tên...",count_comment:"Bình luận"},en:{heading:"Công việc",status:"Trạng thái",update_status:"Cập nhật trạng thái",new_status:"Trạng thái mới",start:"Bắt đầu",day:"ngày",month:"tháng",year:"năm",started:"Đã bắt đầu",completed:"Đã hoàn thành",start_date:"Ngày bắt đầu",finish_date:"Ngày hoàn thành",created:"Đã tạo",created_by:"Tạo bởi",last_modified:"Lần cập nhật cuối cùng",attachment:"Đính kèm",code:"Mã công việc",name:"Tên",type:"Loại",description:"Mô tả",done:"Hoàn thành (%)",priority:"Ưu tiên",progress:"Tiến độ",assignees:"Gán",assign_for:"Gán cho",edit_status:"Cập nhật trạng thái",date:"Ngày",note:"Ghi chú",tag:"Tag",tag_placeholder:"Gán thẻ cho công việc cách nhau bằng dấu ,",change_note:"Ghi chú thay đổi",change_status:"Thay đổi trạng thái",iteration:"Phiên bản",depend:"Công việc phụ thuộc",duration:"Thời gian",late:"trễ",sidebar_heading:"Bộ lọc công việc",filter_keyword:"Từ khóa",filter_assignee_type:"Gán cho",filter_assignee_user:"Gán cho",filter_priority:"Ưu tiên",filter_status:"Trạng thái",filter_iteration_id:"Phiên bản",filter_taskid:"Mã công việc",filter_tag:"Tag",filter_type:"Loại",sort_name:"Tên",sort_id:"Mã",sort_date_created:"Ngày tạo",success_add:"Thêm mới công việc thành công!",success_edit:"Cập nhật công việc thành công!",success_delete:"Công việc {name} đã được xóa thành công!",success_update_status:"Cập nhật trạng thái thành công!",error_add:"Thêm công việc thất bại. Vui lòng thử lại!",error_date_invalid:"Ngày hoàn thành phải lớn hơn ngày bắt đầu!",error_type_invalid:"Loại task không hợp lệ",error_delete:"Xóa công việc {name} thất bại. Vui lòng thử lại!",error_update_status:"Cập nhật trạng thái thất bại! Vui lòng thử lại!",error_change_note_required:"Bạn chưa nhập ghi chú thay đổi!",error_status_invalid:"Bạn không có quyền!",error_status_or_progress_change_required:"Bạn phải thay đổi trạng thái hoặc tiến độ công việc trước khi tiếp tục!",error_name_required:"Bạn chưa nhập tên!",error_depend_invalid:"Công việc phụ thuộc không hợp lệ!",error_iteration_notfound:"Không tìm thấy phiên bản!",error_not_permission:"Bạn không đủ quyền!",error_not_found:"Không tìm thấy công việc!",error_text_required:"Bạn chưa nhập nội dung bình luận!",all:"Tất cả",assigned_to_me:"Gán cho tôi",assigned_to_others:"Gán cho người khác",me:"Tôi",other:"Người khác",un_assigned:"Chưa được gán",add_task:"Thêm công việc",add:"Thêm",add_and_close:"Thêm & đóng",edit_task:"Cập nhật",edit:"Cập nhật",un_milestone:"Chưa phân nhóm",un_planned:"Un-planned",update:"Cập nhật",update_history:"Lịch sử cập nhật",status_history_empty:"Chưa có thay đổi trạng thái!",filter_status_all:"Tất cả",who_working_on_this:"Ai làm việc này?",commentplaceholder:"Viết bình luận...",likethis:"thích điều này",commentmore:"Xem bình luận trước đó",error_comment_too_short:"Nội dung bình luận quá ngắn. Tối thiểu 5 ký tự.",error_comment_too_long:"Nội dung bình luận quá dài. Tối đa 64.000 ký tự.",error_message_or_file_required:"Bạn phải nhập nội dung trả lời hoặc chọn file trước khi gửi.",error_file_uploading_waiting:"Bạn có tập tin chưa hoàn tất upload. Hãy chờ hoàn tất và thử gửi lại sau.",choose:"-- Chọn công việc --",STATUS_PENDING:"Chờ xử lý",STATUS_ASSIGNED:"Đã giao việc",STATUS_WORKING:"Đang giải quyết",STATUS_NEED_FOR_APPROVAL:"Cần được duyệt",STATUS_REVIEWING:"Đang duyệt",STATUS_TESTING:"Đang kiểm tra",STATUS_COMPLETED_WITH_BUG:"Hoàn tất nhưng có lỗi",STATUS_COMPLETED:"Hoàn tất",STATUS_CANCELLED:"Hủy bỏ",PRIORITY_IMMEDIATE:"Khẩn cấp",PRIORITY_HIGH:"Cao",PRIORITY_MEDIUM:"Bình thường",PRIORITY_LOW:"Thấp",TYPE_FEATURE:"Tính năng",TYPE_ISSUE:"Vấn đề",TYPE_ENHANCEMENT:"Cải tiến",TYPE_PROPOSE:"Đề xuất",TYPE_DESIGN:"Thiết kế",editstatus_title:"Thay đổi trạng thái",edit_title:"Cập nhật thông tin công việc",delete_title:"Xóa công việc này",duration_unplanned:"Chưa xác định thời gian triển khai.",search_assginee_placeholder:"Họ tên...",count_comment:"Bình luận"}};return new e({lang:t})}),define("models/projecttask",["basemodel","language/projecttask"],function(e,t){var n=e.extend({urlRoot:"v1/projecttasks",STATUS_PENDING:1,STATUS_ASSIGNED:3,STATUS_WORKING:5,STATUS_NEED_FOR_APPROVAL:6,STATUS_REVIEWING:7,STATUS_TESTING:8,STATUS_COMPLETED_WITH_BUG:9,STATUS_COMPLETED:11,STATUS_CANCELLED:13,PRIORITY_IMMEDIATE:1,PRIORITY_HIGH:3,PRIORITY_MEDIUM:5,PRIORITY_LOW:7,TYPE_FEATURE:1,TYPE_ISSUE:3,TYPE_ENHANCEMENT:5,TYPE_PROPOSE:7,TYPE_DESIGN:9,getStatusList:function(){return[{code:this.STATUS_PENDING,text:t.t("STATUS_PENDING"),color:"#e798ba"},{code:this.STATUS_ASSIGNED,text:t.t("STATUS_ASSIGNED"),color:"#3498db"},{code:this.STATUS_WORKING,text:t.t("STATUS_WORKING"),color:"#2980b9"},{code:this.STATUS_NEED_FOR_APPROVAL,text:t.t("STATUS_NEED_FOR_APPROVAL"),color:"#ac0"},{code:this.STATUS_REVIEWING,text:t.t("STATUS_REVIEWING"),color:"#8e44ad"},{code:this.STATUS_COMPLETED_WITH_BUG,text:t.t("STATUS_COMPLETED_WITH_BUG"),color:"#CC4C9A"},{code:this.STATUS_COMPLETED,text:t.t("STATUS_COMPLETED"),color:"#2ecc71"},{code:this.STATUS_CANCELLED,text:t.t("STATUS_CANCELLED"),color:"#7f8c8d"}]},getStatusListForKanbanColumn:function(){var e=this,t=this.getStatusList().filter(function(t){return t.code!=e.STATUS_CANCELLED&&t.code!=e.STATUS_COMPLETED});return t},getStatusListForKanbanAction:function(){var e=this,t=this.getStatusList().filter(function(t){return t.code==e.STATUS_CANCELLED||t.code==e.STATUS_COMPLETED});return t},getStatus:function(e){e=parseInt(e);var n={code:e,text:"",color:""};switch(e){case this.STATUS_PENDING:n.text=t.t("STATUS_PENDING"),n.color="#e798ba";break;case this.STATUS_ASSIGNED:n.text=t.t("STATUS_ASSIGNED"),n.color="#3498db";break;case this.STATUS_WORKING:n.text=t.t("STATUS_WORKING"),n.color="#2980b9";break;case this.STATUS_NEED_FOR_APPROVAL:n.text=t.t("STATUS_NEED_FOR_APPROVAL"),n.color="#ac0";break;case this.STATUS_REVIEWING:n.text=t.t("STATUS_REVIEWING"),n.color="#8e44ad";break;case this.STATUS_TESTING:n.text=t.t("STATUS_TESTING"),n.color="#8e44ad";break;case this.STATUS_COMPLETED_WITH_BUG:n.text=t.t("STATUS_COMPLETED_WITH_BUG"),n.color="#CC4C9A";break;case this.STATUS_COMPLETED:n.text=t.t("STATUS_COMPLETED"),n.color="#2ecc71";break;case this.STATUS_CANCELLED:n.text=t.t("STATUS_CANCELLED"),n.color="#7f8c8d"}return n},getPriorityList:function(){return[{code:this.PRIORITY_IMMEDIATE,text:t.t("PRIORITY_IMMEDIATE"),color:"#e31414"},{code:this.PRIORITY_HIGH,text:t.t("PRIORITY_HIGH"),color:"#f0be12"},{code:this.PRIORITY_MEDIUM,text:t.t("PRIORITY_MEDIUM"),color:"#67bc28"},{code:this.PRIORITY_LOW,text:t.t("PRIORITY_LOW"),color:"#eddea8"}]},getPriority:function(e){e=parseInt(e);var n={code:e,text:"",color:""};switch(e){case this.PRIORITY_IMMEDIATE:n.text=t.t("PRIORITY_IMMEDIATE"),n.color="#e31414";break;case this.PRIORITY_HIGH:n.text=t.t("PRIORITY_HIGH"),n.color="#f0be12";break;case this.PRIORITY_MEDIUM:n.text=t.t("PRIORITY_MEDIUM"),n.color="#67bc28";break;case this.PRIORITY_LOW:n.text=t.t("PRIORITY_LOW"),n.color="#eddea8"}return n},getTypeList:function(){return[{code:this.TYPE_FEATURE,text:t.t("TYPE_FEATURE")},{code:this.TYPE_ISSUE,text:t.t("TYPE_ISSUE")},{code:this.TYPE_ENHANCEMENT,text:t.t("TYPE_ENHANCEMENT")},{code:this.TYPE_PROPOSE,text:t.t("TYPE_PROPOSE")},{code:this.TYPE_DESIGN,text:t.t("TYPE_DESIGN")}]},getType:function(e){e=parseInt(e);var t=this.getTypeList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={code:e,text:""}),t},getProgressList:function(){for(var e=[],t=0;100>=t;t+=10){var n={code:t,text:t+" %"};e.push(n)}return e}});return n}),define("collections/projecttask",["basecollection","models/projecttask"],function(e,t){var n=e.extend({url:"v1/projecttasks",model:t,parse:function(e){return this.total=e.total,this.currentpage=e.currentpage,this.limit=e.limit,this.can_add_story=e.can_add_story,this.can_edit_story=e.can_edit_story,e.items}});return n}),define("models/projecttaskchange",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/projecttaskchanges"});return t}),define("collections/projecttaskchange",["basecollection","models/projecttaskchange"],function(e,t){var n=e.extend({url:"v1/projecttaskchanges",model:t});return n}),define("models/projecttaskcomment",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/projecttaskcomments"});return t}),define("collections/projecttaskcomment",["basecollection","models/projecttaskcomment"],function(e,t){var n=e.extend({url:"v1/projecttaskcomments",model:t});return n}),define("models/rbacroleuser",["basemodel","language/company"],function(e,t){var n=e.extend({urlRoot:"v1/rbacroleusers"});return n}),define("collections/rbacroleuser",["basecollection","models/rbacroleuser"],function(e,t){var n=e.extend({url:"v1/rbacroleusers",model:t});return n}),define("language/salary",["baselanguage"],function(e){var t={vn:{heading_mine:"Phiếu lương của tôi",heading:"Phiếu lương công ty",heading_import_data:"Import phiếu lương",heading_sidebar:"Bộ lọc phiếu lương",heading_insert:"Thêm mới",salary:"Phiếu lương",employee:"Nhân viên",creator:"Người tạo",title:"Tiêu đề phiếu lương",total:"Tổng lương",manage:"Dành cho quản lý",detail:"Chi tiết",type:"Hình thức chi trả",source:"Nguồn",time:"Kì lương",paidindex:"Thứ tự trong kỳ lương",paidindex_label:"Lần #",reviewer:"Người duyệt",datereviewed:"Ngày duyệt",isread:"Đã xem",dateread:"Ngày xem",datecreated:"Ngày tạo",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",SOURCE_MANUAL:"Nhập tay",SOURCE_IMPORT:"Import",TYPE_ONETIME:"Trả 1 lần",TYPE_DAILY:"Trả theo ngày",TYPE_WEEKLY:"Trả theo tuần",TYPE_MONTHLY:"Trả theo tháng",TYPE_YEARLY:"Trả theo năm",month:"Tháng",year:"Năm",salary_import_info_content:"Import file excel phiếu lương",column_name:"Tên cột",column_value:"Giá trị",filter_employee:"Nhân viên",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",filter_type:"Loại",filter_source:"Nguồn",filter_status:"Trạng thái",delete:"Xóa",all_employee:"Tất cả nhân viên",import_finished:"Import hoàn tất",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",back:"Trở lại",close:"Đóng",salary_info_title:"Chi tiết phiếu lương",salary_info_content:"Thông tin chi tiết",salary_import_info_title:"Import phiếu lương",all:"Tất cả",exportexcel:"Xuất Excel",file_excel:"Tập tin excel",upload_file:"Upload tập tin",import:"Import",week:"Tuần",error_name_is_require:"Vui lòng nhập tên!",error_user_id_is_require:"Vui lòng chọn nhân viên!",error_user_is_not_exist:"Nhân viên không tồn tại!",error_user_is_empty:"Dữ liệu nhân viên rỗng",error_total_is_empty:"Dữ liệu tổng tiền lương rỗng",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_type_invalid:"Vui lòng chọn loại!",error_time_invalid:"Định dạng thời gian không hợp lệ!",error_total_is_require:"Vui lòng chọn Cột có chứa tổng tiền lương!",error_employee_is_require:"Vui lòng chọn Cột có chứa mã nội bộ / Email!",error_data_invalid:"Không đúng định dạng file!",error_no_data_import:"Dữ liệu rỗng!",error_file_required:"Vui lòng chọn file!",error_file_invalid:"File không đúng định dạng!",error_file_size:"Dữ liệu file lớn hơn 100mb!",error_employee_is_not_exist:"Nhân viên không tồn tại!",error_total_is_more_than_zero:"Tổng tiền lương phải lớn hơn 0!",error_import:"Đã xảy ra lỗi. Vui lòng thử lại!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",zerodata_text:"Chưa có dữ liệu tiền lương nào.",list:"Danh sách",zerodata_subtext:"Tạo dữ liệu tiền lương cho nhân viên của công ty bằng nút bên dưới.",error_paid_index_is_more_than_zero:"Thứ tự trong kỳ lương phải khác rỗng.",column_has_internal:"Cột có chứa Internal ID / Email",column_has_total:"Cột có chứa tổng tiền"},en:{heading_mine:"Phiếu lương của tôi",heading:"Phiếu lương công ty",heading_import_data:"Import phiếu lương",heading_sidebar:"Bộ lọc phiếu lương",heading_insert:"Thêm mới",salary:"Phiếu lương",employee:"Nhân viên",creator:"Người tạo",title:"Tiêu đề phiếu lương",total:"Tổng lương",manage:"Dành cho quản lý",detail:"Chi tiết",type:"Hình thức chi trả",source:"Nguồn",time:"Kì lương",paidindex:"Thứ tự trong kỳ lương",paidindex_label:"Lần #",reviewer:"Người duyệt",datereviewed:"Ngày duyệt",isread:"Đã xem",dateread:"Ngày xem",datecreated:"Ngày tạo",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",SOURCE_MANUAL:"Nhập tay",SOURCE_IMPORT:"Import",TYPE_ONETIME:"Trả 1 lần",TYPE_DAILY:"Trả theo ngày",TYPE_WEEKLY:"Trả theo tuần",TYPE_MONTHLY:"Trả theo tháng",TYPE_YEARLY:"Trả theo năm",month:"Tháng",year:"Năm",salary_import_info_content:"Import file excel phiếu lương",column_name:"Tên cột",column_value:"Giá trị",filter_employee:"Nhân viên",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",filter_type:"Loại",filter_source:"Nguồn",filter_status:"Trạng thái",delete:"Xóa",all_employee:"Tất cả nhân viên",import_finished:"Import hoàn tất",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",back:"Trở lại",close:"Đóng",salary_info_title:"Chi tiết phiếu lương",salary_info_content:"Thông tin chi tiết",salary_import_info_title:"Import phiếu lương",all:"Tất cả",exportexcel:"Xuất Excel",file_excel:"Tập tin excel",upload_file:"Upload tập tin",import:"Import",week:"Tuần",error_name_is_require:"Vui lòng nhập tên!",error_user_id_is_require:"Vui lòng chọn nhân viên!",error_user_is_not_exist:"Nhân viên không tồn tại!",error_user_is_empty:"Dữ liệu nhân viên rỗng",error_total_is_empty:"Dữ liệu tổng tiền lương rỗng",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_type_invalid:"Vui lòng chọn loại!",error_time_invalid:"Định dạng thời gian không hợp lệ!",error_total_is_require:"Vui lòng chọn Cột có chứa tổng tiền lương!",error_employee_is_require:"Vui lòng chọn Cột có chứa mã nội bộ / Email!",error_data_invalid:"Không đúng định dạng file!",error_no_data_import:"Dữ liệu rỗng!",error_file_required:"Vui lòng chọn file!",error_file_invalid:"File không đúng định dạng!",error_file_size:"Dữ liệu file lớn hơn 100mb!",error_employee_is_not_exist:"Nhân viên không tồn tại!",error_total_is_more_than_zero:"Tổng tiền lương phải lớn hơn 0!",error_import:"Đã xảy ra lỗi. Vui lòng thử lại!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",zerodata_text:"Chưa có dữ liệu tiền lương nào.",list:"Danh sách",zerodata_subtext:"Tạo dữ liệu tiền lương cho nhân viên của công ty bằng nút bên dưới.",error_paid_index_is_more_than_zero:"Thứ tự trong kỳ lương phải khác rỗng.",column_has_internal:"Cột có chứa Internal ID / Email",column_has_total:"Cột có chứa tổng tiền"}};return new e({lang:t})}),define("models/salary",["basemodel","language/salary","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/salaries",cacheName:"salaries",STATUS_ENABLE:1,STATUS_DISABLE:3,SOURCE_MANUAL:1,SOURCE_IMPORT:3,TYPE_ONETIME:1,TYPE_DAILY:3,TYPE_WEEKLY:5,TYPE_MONTHLY:7,TYPE_YEARLY:9,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={code:e,text:"",color:""}),t},getSourceList:function(){return[{code:this.SOURCE_MANUAL,text:t.t("SOURCE_MANUAL"),color:"green"},{code:this.SOURCE_IMPORT,text:t.t("SOURCE_IMPORT"),color:"blue"}]},getSource:function(e){e=parseInt(e);var t=this.getSourceList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={code:e,text:"",color:""}),t},getTypeList:function(){return[{code:this.TYPE_ONETIME,text:t.t("TYPE_ONETIME"),color:""},{code:this.TYPE_DAILY,text:t.t("TYPE_DAILY"),color:""},{code:this.TYPE_MONTHLY,text:t.t("TYPE_MONTHLY"),color:""},{code:this.TYPE_YEARLY,text:t.t("TYPE_YEARLY"),color:""}]},getType:function(e){e=parseInt(e);var t=this.getTypeList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={code:e,text:"",color:""}),t}});return a}),define("collections/salary",["basecollection","models/salary"],function(e,t){var n=e.extend({model:t,url:"v1/salaries"});return n}),define("language/workschedule",["baselanguage"],function(e){var t={vn:{note_column_info_title:"Ghi chú cột dữ liệu",note_column_info_content:"Ghi chú giá trị cho một số cột dữ liệu xuất hiện trong file Excel cần import",heading:"Lịch làm việc",select_office_info_title:"Trụ sở",select_office_info_content:"Chọn Trụ sở bạn làm việc trước khi bắt đầu xếp lịch",addheading:"Xếp lịch",nv2:"Nhân viên đích",nv1:"Nhân viên nguồn",editnoteheading:"Cập nhật ghi chú",addemployee:"Thêm nhân viên",heading_sidebar:"Bộ lọc nhân viên",swaprange_info_content:"Chi tiết Đổi ca làm việc giữa nhân viên",office:"Trụ sở",email:"Email",internalid:"Mã nội bộ",worktrackingrange:"Ca làm việc",worktrackingrange_availble:"Ca làm việc có thể xếp",current_worktrackingrange:"Ca làm việc đã xếp",jobtitle:"Chức vụ",time:"Thời gian",of:"của",externalpartner:"Thành viên này chỉ là một đối tác bên ngoài.",discription:"(Đối tác bên ngoài chỉ có thể truy cập vào các dự án của mình, hoạt động & Chat)",dicription2:"Nếu công ty của bạn / nhóm đang chạy (hoặc có) một hệ thống để quản lý tất cả các tài khoản, trường này sẽ lưu trữ ID người dùng của hệ thống hiện tại của bạn. (Cho phép A-Z, 0-9 ký tự). Vídụ: E16217, CE40128 ...",workspace:"Làm việc tại ",filterOffice:"Tìm bởi văn phòng",filterOfficeAll:"Tất cả văn phòng",filterDepartment:"Tìm bởi phòng ban",filterDepartmentAll:"Tất cả phòng ban",filterPosition:"Tìm bởi chức vụ",filter_status:"Trạng thái",filterPositionAll:"Tất cả chức vụ",load_more_employee:"Xem thêm",filter_not_found:"Không tìm thấy kết quả.",empty_list:"Không có nhân viên nào.",import:"Import",password:"Mật khẩu",insert:"Thêm mới",reviewed_all:"Duyệt/Bỏ duyệt cho tất cả",add:"Thêm lịch",edit:"Cập nhật lịch",edit_note:"Cập nhật lịch ghi chú",info:"Thông tin lịch",delete_schedule:"Xóa lịch",reviewed:"Duyệt/Bỏ duyệt",import_profile:"Import sơ yếu lý lịch",confirm_msg_default:"Xác nhận?",confirm_text_default:"Duyệt",confirm_cancel_default:"Không",confirm_cancel_review_default:"Bỏ duyệt",more_action:"Quản lý",filter_type:"Loại hình công việc",filter_user_id:"Nhân viên",filter_work_tracking_range_id:"Ca làm việc",filter_office_id:"Trụ sở",filter_department_id:"Phòng ban",filter_position_id:"Cấp bậc",filter_keyword:"Từ khóa",employeeoffice:"Nhân viên thuộc VP",employeeoutoffice:"Nhân viên ngoài VP",date_swap_range:"Ngày đổi ca",descriptionRange:"Nếu không chọn ca đích, thì ca nguồn sẽ được chuyển sang nhân viên đích",STATUS_NEW:"Mới",STATUS_REVIEWED:"Đã duyệt",change_range:"Đổi ca",swaprange_info_title:"Đổi ca giữa 2 nhân viên",DUP_OFFICE:"Ca bạn đang xếp trùng với lịch của văn phòng:",DUP_RANGE:"NV đang bị xếp trùng:",employee_schedule_success:"NV đã được xếp lịch:",POSITION_INTERNSHIP:"Mới tốt nghiệp / Thực tập",POSITION_STAFF:"Nhân viên",POSITION_GROUP_LEAD:"Trưởng nhóm / Giám sát",POSITION_ASSISTANT_MANAGER:"Phó phòng",POSITION_MANAGER:"Trưởng phòng",POSITION_SUBDIRECTOR:"Phó giám đốc",POSITION_DIRECTOR:"Giám đốc",POSITION_CEO:"Giám đốc điều hành",POSITION_SUBCHAIRMAN:"Phó chủ tịch",POSITION_CHAIRMAN:"Chủ tịch",POSITION_STORE_ASSISTANT_MANAGER:"Trợ lý quản lý cửa hàng",POSITION_STORE_MANAGER:"Quản lý cửa hàng",TYPE_FULLTIME:"Nhân viên chính thức",TYPE_PARTTIME:"Bán thời gian",TYPE_PREFLIGHT:"Thử việc",TYPE_OVERTIME:"Làm thêm ngoài giờ",TYPE_SEASONAL:"Nhân viên thời vụ",TYPE_PROJECT:"Làm dự án",exportexcel:"Xuất Excel",select_range:"Chọn ca nguồn",select_range_swap:"Chọn ca đích",swap_success:"Đổi thành công",error_swap:"Có lỗi khi đổi , Vui lòng thử lại",error_work_schedule_id_is_require:"Vui lòng chọn lịch",error_work_schedule_swap_id_is_require:"Vui lòng chọn lịch sẽ đổi",error_employee_same_employee_swap:"Vui lòng chọn 2 nhân viên khác nhau để thực hiện đổi ca",error_work_schedule_id_invalid:"Ca nguồn không tồn tại",error_work_schedule_swap_id_invalid:"Ca đích không tồn tại",error_work_schedule_swap_is_not_review:"Ca đích chưa được duyệt",error_work_schedule_is_not_review:"Ca nguồn chưa được duyệt",error_work_schedule_is_old:"Ca nguồn phải được xếp trong(sau) ngày hôm nay",error_work_schedule_is_out_range:"Ca nguồn hết giờ làm việc",error_work_schedule_swap_is_old:"Ca đích phải được xếp trong(sau) ngày hôm nay",error_date_swap_is_require:"Vui lòng chọn ngày của nhân viên đích",error_date_swap_is_old:"Vui lòng chọn ngày của nhân viên đích lớn hơn ngày hiện tại",error_employee_is_have_schedule:"Nhân viên nguồn đã được xếp lịch trùng với ca đích",error_employee_swap_is_have_schedule:"Nhân viên đích  đã được xếp lịch trùng với ca nguồn",error_work_schedule_swap_is_out_range:"Ca đích hết giờ làm việc",user_info_title:"Tạo thành viên",office_empty:"Nhân viên chưa có trụ sở vui lòng cập nhật trước khi tạo lịch",user_info_content:"Không thể tìm thấy bất kỳ người dùng với email được chọn. Sử dụng mẫu sau để tạo người dùng mới với email được chọn.",employee_import_info_title:"Import tập tin Excel",employee_export_info_title:"Export tập tin Excel",error_office_id_notfound:"Mã văn phòng không hợp lệ",error_range_empty:"Văn phòng chưa có ca , vui lòng tạo ca hoặc vào văn phòng khác",error_employee_is_require:"Vui lòng chọn ít nhất 1 nhân viên",error_employee_same_swap_employee:"Vui lòng chọn 2 nhân viên khác nhau để thực hiện đổi ca",error_employee_internal_id_not_valid:"Internal ID không hợp lệ",error_check_info:"Vui lòng chọn đầy đủ thông tin",error_employee_has_schedule_in_diff_office:"Nhân viên đã được xếp lịch ở văn phòng khác (Ca hiện tại đã được xếp) có thời gian trùng với thời gian bạn đang xếp",employee_import_info_content:'Upload tập tin Excel với định dạng sau:<br /><a href="/files/employee-import-format.xls">Tải file mẫu</a>',search:"Tìm kiếm...",employee:"Nhân viên",Password:"Mật khẩu",fullname:"Họ tên",note:"Ghi chú",status:"Trạng thái",workTimeReport:"Tổng hợp giờ công",work_tracking_range_id:"Ca làm việc",employee_info_title:"Thông tin nhân viên",employee_info_content:"Thông tin chi tiết nhân viên",no_import_data:"Không có dữ liệu",heading_import_data:"Import nhân viên",checkinHistory:"Lịch sử chấm công",checkInOut:"Chấm công",position:"Cấp bậc",name:"Tên",close:"Đóng",phone:"Điện thoại",department:"Phòng ban",type:"Loại hình công việc",import_finished:"Import hoàn tất",file_excel:"Tập tin excel",upload_file:"Upload tập tin",dateschedule:"Ngày xếp lịch",error_user_id_is_require:"Vui lòng chọn nhân viên",error_user_id_invalid:"Nhân viên không hợp lệ",error_office_id_is_require:"Vui lòng chọn Trụ sở",error_office_is_invalid:"Trụ sở không hợp lệ",error_range_id_is_require:"Vui lòng chọn ca",error_range_id_is_invalid:"Ca không hợp lệ",error_employee_scheduled_with_range_id:"Không thể xếp trùng ca trong 1 ngày cho nhân viên",error_not_permission_review:"Bạn không có quyền duyệt/bỏ duyệt ca"},en:{note_column_info_title:"Ghi chú cột dữ liệu",note_column_info_content:"Ghi chú giá trị cho một số cột dữ liệu xuất hiện trong file Excel cần import",heading:"Lịch làm việc",select_office_info_title:"Trụ sở",select_office_info_content:"Chọn Trụ sở bạn làm việc trước khi bắt đầu xếp lịch",addheading:"Xếp lịch",nv2:"Nhân viên đích",nv1:"Nhân viên nguồn",editnoteheading:"Cập nhật ghi chú",addemployee:"Thêm nhân viên",heading_sidebar:"Bộ lọc nhân viên",swaprange_info_content:"Chi tiết Đổi ca làm việc giữa nhân viên",office:"Trụ sở",email:"Email",internalid:"Mã nội bộ",worktrackingrange:"Ca làm việc",worktrackingrange_availble:"Ca làm việc có thể xếp",current_worktrackingrange:"Ca làm việc đã xếp",jobtitle:"Chức vụ",time:"Thời gian",of:"của",externalpartner:"Thành viên này chỉ là một đối tác bên ngoài.",discription:"(Đối tác bên ngoài chỉ có thể truy cập vào các dự án của mình, hoạt động & Chat)",dicription2:"Nếu công ty của bạn / nhóm đang chạy (hoặc có) một hệ thống để quản lý tất cả các tài khoản, trường này sẽ lưu trữ ID người dùng của hệ thống hiện tại của bạn. (Cho phép A-Z, 0-9 ký tự). Vídụ: E16217, CE40128 ...",workspace:"Làm việc tại ",filterOffice:"Tìm bởi văn phòng",filterOfficeAll:"Tất cả văn phòng",filterDepartment:"Tìm bởi phòng ban",filterDepartmentAll:"Tất cả phòng ban",filterPosition:"Tìm bởi chức vụ",filter_status:"Trạng thái",filterPositionAll:"Tất cả chức vụ",load_more_employee:"Xem thêm",filter_not_found:"Không tìm thấy kết quả.",empty_list:"Không có nhân viên nào.",import:"Import",password:"Mật khẩu",insert:"Thêm mới",reviewed_all:"Duyệt/Bỏ duyệt cho tất cả",add:"Thêm lịch",edit:"Cập nhật lịch",edit_note:"Cập nhật lịch ghi chú",info:"Thông tin lịch",delete_schedule:"Xóa lịch",reviewed:"Duyệt/Bỏ duyệt",import_profile:"Import sơ yếu lý lịch",confirm_msg_default:"Xác nhận?",confirm_text_default:"Duyệt",confirm_cancel_default:"Không",confirm_cancel_review_default:"Bỏ duyệt",more_action:"Quản lý",filter_type:"Loại hình công việc",filter_user_id:"Nhân viên",filter_work_tracking_range_id:"Ca làm việc",filter_office_id:"Trụ sở",filter_department_id:"Phòng ban",filter_position_id:"Cấp bậc",filter_keyword:"Từ khóa",employeeoffice:"Nhân viên thuộc VP",employeeoutoffice:"Nhân viên ngoài VP",date_swap_range:"Ngày đổi ca",descriptionRange:"Nếu không chọn ca đích, thì ca nguồn sẽ được chuyển sang nhân viên đích",STATUS_NEW:"Mới",STATUS_REVIEWED:"Đã duyệt",change_range:"Đổi ca",swaprange_info_title:"Đổi ca giữa 2 nhân viên",DUP_OFFICE:"Ca bạn đang xếp trùng với lịch của văn phòng:",DUP_RANGE:"NV đang bị xếp trùng:",employee_schedule_success:"NV đã được xếp lịch:",POSITION_INTERNSHIP:"Mới tốt nghiệp / Thực tập",POSITION_STAFF:"Nhân viên",POSITION_GROUP_LEAD:"Trưởng nhóm / Giám sát",POSITION_ASSISTANT_MANAGER:"Phó phòng",POSITION_MANAGER:"Trưởng phòng",POSITION_SUBDIRECTOR:"Phó giám đốc",POSITION_DIRECTOR:"Giám đốc",POSITION_CEO:"Giám đốc điều hành",POSITION_SUBCHAIRMAN:"Phó chủ tịch",POSITION_CHAIRMAN:"Chủ tịch",POSITION_STORE_ASSISTANT_MANAGER:"Trợ lý quản lý cửa hàng",POSITION_STORE_MANAGER:"Quản lý cửa hàng",TYPE_FULLTIME:"Nhân viên chính thức",TYPE_PARTTIME:"Bán thời gian",TYPE_PREFLIGHT:"Thử việc",TYPE_OVERTIME:"Làm thêm ngoài giờ",TYPE_SEASONAL:"Nhân viên thời vụ",TYPE_PROJECT:"Làm dự án",exportexcel:"Xuất Excel",select_range:"Chọn ca nguồn",select_range_swap:"Chọn ca đích",swap_success:"Đổi thành công",error_swap:"Có lỗi khi đổi , Vui lòng thử lại",error_work_schedule_id_is_require:"Vui lòng chọn lịch",error_work_schedule_swap_id_is_require:"Vui lòng chọn lịch sẽ đổi",error_employee_same_employee_swap:"Vui lòng chọn 2 nhân viên khác nhau để thực hiện đổi ca",error_work_schedule_id_invalid:"Ca nguồn không tồn tại",error_work_schedule_swap_id_invalid:"Ca đích không tồn tại",error_work_schedule_swap_is_not_review:"Ca đích chưa được duyệt",error_work_schedule_is_not_review:"Ca nguồn chưa được duyệt",error_work_schedule_is_old:"Ca nguồn phải được xếp trong(sau) ngày hôm nay",error_work_schedule_is_out_range:"Ca nguồn hết giờ làm việc",error_work_schedule_swap_is_old:"Ca đích phải được xếp trong(sau) ngày hôm nay",error_date_swap_is_require:"Vui lòng chọn ngày của nhân viên đích",error_date_swap_is_old:"Vui lòng chọn ngày của nhân viên đích lớn hơn ngày hiện tại",error_employee_is_have_schedule:"Nhân viên nguồn đã được xếp lịch trùng với ca đích",error_employee_swap_is_have_schedule:"Nhân viên đích  đã được xếp lịch trùng với ca nguồn",error_work_schedule_swap_is_out_range:"Ca đích hết giờ làm việc",user_info_title:"Tạo thành viên",office_empty:"Nhân viên chưa có trụ sở vui lòng cập nhật trước khi tạo lịch",user_info_content:"Không thể tìm thấy bất kỳ người dùng với email được chọn. Sử dụng mẫu sau để tạo người dùng mới với email được chọn.",employee_import_info_title:"Import tập tin Excel",employee_export_info_title:"Export tập tin Excel",error_office_id_notfound:"Mã văn phòng không hợp lệ",error_range_empty:"Văn phòng chưa có ca , vui lòng tạo ca hoặc vào văn phòng khác",error_employee_is_require:"Vui lòng chọn ít nhất 1 nhân viên",error_employee_same_swap_employee:"Vui lòng chọn 2 nhân viên khác nhau để thực hiện đổi ca",error_employee_internal_id_not_valid:"Internal ID không hợp lệ",error_check_info:"Vui lòng chọn đầy đủ thông tin",error_employee_has_schedule_in_diff_office:"Nhân viên đã được xếp lịch ở văn phòng khác (Ca hiện tại đã được xếp) có thời gian trùng với thời gian bạn đang xếp",employee_import_info_content:'Upload tập tin Excel với định dạng sau:<br /><a href="/files/employee-import-format.xls">Tải file mẫu</a>',search:"Tìm kiếm...",employee:"Nhân viên",Password:"Mật khẩu",fullname:"Họ tên",note:"Ghi chú",status:"Trạng thái",workTimeReport:"Tổng hợp giờ công",work_tracking_range_id:"Ca làm việc",employee_info_title:"Thông tin nhân viên",employee_info_content:"Thông tin chi tiết nhân viên",no_import_data:"Không có dữ liệu",heading_import_data:"Import nhân viên",checkinHistory:"Lịch sử chấm công",checkInOut:"Chấm công",position:"Cấp bậc",
name:"Tên",close:"Đóng",phone:"Điện thoại",department:"Phòng ban",type:"Loại hình công việc",import_finished:"Import hoàn tất",file_excel:"Tập tin excel",upload_file:"Upload tập tin",dateschedule:"Ngày xếp lịch",error_user_id_is_require:"Vui lòng chọn nhân viên",error_user_id_invalid:"Nhân viên không hợp lệ",error_office_id_is_require:"Vui lòng chọn Trụ sở",error_office_is_invalid:"Trụ sở không hợp lệ",error_range_id_is_require:"Vui lòng chọn ca",error_range_id_is_invalid:"Ca không hợp lệ",error_employee_scheduled_with_range_id:"Không thể xếp trùng ca trong 1 ngày cho nhân viên",error_not_permission_review:"Bạn không có quyền duyệt/bỏ duyệt ca"}};return new e({lang:t})}),define("models/workschedule",["basemodel","language/workschedule"],function(e,t){var n=e.extend({urlRoot:"v1/workschedules",cacheName:"workschedule",STATUS_NEW:1,STATUS_REVIEWED:3,getStatusList:function(){return[{code:this.STATUS_NEW,text:t.t("STATUS_NEW"),color:"green"},{code:this.STATUS_REVIEWED,text:t.t("STATUS_REVIEWED"),color:"red"}]},getStatus:function(e){e=parseInt(e);var n={code:e,text:"",color:""};switch(e){case this.STATUS_NEW:n.text=t.t("STATUS_NEW"),n.color="green";break;case this.STATUS_REVIEWED:n.text=t.t("STATUS_REVIEWED"),n.color="red"}return n},postData:function(e){var t=this.urlRoot+"/"+e.action,n={url:t,type:"POST",dataType:"json",data:e.data,success:function(t,n,a){"function"==typeof e.success&&e.success(t,a)},error:function(t){"function"==typeof e.error&&e.error(t)},complete:function(t){"function"==typeof e.complete&&e.complete(t)}};"undefined"!=typeof e.processData&&(n.processData=e.processData),"undefined"!=typeof e.contentType&&(n.contentType=e.contentType),$.ajax(n)}});return n}),define("collections/workschedule",["basecollection","models/workschedule"],function(e,t){var n=e.extend({url:"v1/workschedules",model:t});return n}),define("models/worktime-history",["backbone","setting"],function(e,t){var n=e.Model.extend({urlRoot:"http://cnit-api.local/api/v1/worktime",initialize:function(){}});return n}),define("collections/worktime-history",["backbone","setting","models/worktime-history"],function(e,t,n){var a=e.Collection.extend({model:n,url:t.rooturl+"v1/worktimes/history",parse:function(e){return e.items}});return a}),define("models/worktime-report",["backbone","setting"],function(e,t){var n=e.Model.extend({urlRoot:"http://cnit-api.local/api/v1/worktime/report",initialize:function(){}});return n}),define("collections/worktime-report",["backbone","setting","models/worktime-report"],function(e,t,n){var a=e.Collection.extend({model:n,url:t.rooturl+"v1/worktimes/report",parse:function(e){return e.items}});return a}),define("components/address",["react","helper","models/region"],function(e,t,n){var a=e.createClass({displayName:"AddressComponent",getDefaultProps:function(){return{address:"",region_id:0,sub_region_id:0,sub_sub_region_id:0}},getInitialState:function(){return{region:{},sub_region:{},sub_sub_region:{}}},loadRegion:function(e){e=t.strToInt(e);var a=$.Deferred();return 0>=e?(a.resolve({}),a.promise()):(new n({id:e}).fetch({success:function(e,t){a.resolve(t)},error:function(){a.resolve({})}}),a.promise())},loadAddress:function(e){var t=this;$.isEmptyObject(e)&&(e=this.props),$.when(this.loadRegion(e.sub_sub_region_id),this.loadRegion(e.sub_region_id),this.loadRegion(e.region_id)).done(function(e,n,a){t.setState({sub_sub_region:e,sub_region:n,region:a})})},componentDidMount:function(){this.loadAddress()},componentWillReceiveProps:function(e){this.loadAddress(e)},render:function(){var t=[];return this.props.address&&this.props.address.length>0&&t.push(this.props.address),$.isEmptyObject(this.state.sub_sub_region)||t.push(this.state.sub_sub_region.name),$.isEmptyObject(this.state.sub_region)||t.push(this.state.sub_region.name),$.isEmptyObject(this.state.region)||t.push(this.state.region.name),e.createElement("span",{className:""},t.join(", "))}});return a}),define("components/file-preview",["react","models/file","language/default"],function(e,t,n){var a=e.createClass({displayName:"FilePreviewComponent",getDefaultProps:function(){return{uploadText:n.t("upload")}},removeClick:function(e){e.preventDefault(),e.stopPropagation(),$.isFunction(this.props.onRemove)&&this.props.onRemove(this.props.data)},titleClick:function(e){e.stopPropagation()},renderUpload:function(){return e.createElement("a",{className:"btn-add"},e.createElement("i",{className:"tc-upload"})," ",this.props.uploadText)},renderFile:function(){var n=this.props.data,a=new t(n),i=[];return this.props.onRemove&&i.push(e.createElement("a",{key:"remove",href:"",className:"ui primary button btn-remove",onClick:this.removeClick},e.createElement("i",{className:"tc-cross"}))),i.push(e.createElement("img",{key:"image",src:a.getThumbnail()})),i.push(e.createElement("div",{key:"meta",className:"meta"},e.createElement("div",null,e.createElement("a",{target:"_blank",onClick:this.titleClick,href:a.getDownloadUrl(),title:n.title},n.title)))),i},render:function(){return e.createElement("div",{onClick:this.props.onClick,className:"ui "+this.props.className+" top aligned image file-manage-preview"},this.props.isEmpty===!0?this.renderUpload():this.renderFile())}});return a}),define("components/ajax-upload",["react","backbone","pref","helper","language/default","language/blog","models/blog","models/file","components/file-preview"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"AjaxUploadComponent",getInitialState:function(){return{files:$.isArray(this.props.files)?this.props.files.slice():[]}},getFiles:function(){return this.state.files.slice()},isUploading:function(){var t=!1;return $(".uploadifive-queue-item",e.findDOMNode(this)).each(function(e){$(this).hasClass("complete")||$(this).hasClass("error")||t++}),t},uploadCompleted:function(e,t){e.queueItem&&$(e.queueItem).remove(),this.state.files.push(t),this.forceUpdate()},initUpload:function(){var t=new s,n={onUploadComplete:this.uploadCompleted,fileType:this.props.fileType,fileSizeLimit:this.props.fileSizeLimit,linkText:this.props.linkText,linkIcon:this.props.linkIcon};this.props.limit&&this.props.limit>this.state.files.length&&(n.uploadlimit=this.props.limit-this.state.files.length),t.initAjaxUpload(e.findDOMNode(this.refs.file),0,this.props.objectSource,null,t.STATUS_ENABLE,n)},doUpload:function(t){t.preventDefault();var n=$('.uploadifive-button.ajaxfilebtn input[type="file"]',e.findDOMNode(this));$.each(n,function(){return"none"!=this.style.display?($(this).trigger("click"),!1):void 0})},removeFile:function(e){var t=this.state.files.filter(function(t){return t.id!=e.id});this.setState({files:t})},componentDidMount:function(){this.initUpload()},componentDidUpdate:function(){this.initUpload()},render:function(){var t=this;return e.createElement("div",{className:"ajax-upload-file"},e.createElement("div",null,e.createElement("input",{id:this.props.id,key:moment().valueOf(),type:"file",ref:"file"})),this.state.files.map(function(n){return e.createElement(l,{onRemove:t.removeFile,key:n.id,className:t.props.className,data:n})}),!this.props.limit||this.props.limit>this.state.files.length?e.createElement(l,{onClick:this.doUpload,isEmpty:!0,className:this.props.className}):null)}});return c}),define("components/avatar",["react","helper","models/user"],function(e,t,n){var a=e.createClass({displayName:"AvatarComponent",getDefaultProps:function(){return{className:"ui avatar image",user:{id:0},onClick:function(e){}}},getInitialState:function(){return{user:this.props.user}},loadUser:function(e){var a=this;e=t.strToInt(e),0>=e||new n({id:e}).fetch({success:function(e,t){t.id>0&&a.setState({user:t})}})},_onClick:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget).attr("href").replace("#","");this.props.onClick(t)},componentDidMount:function(){this.state.user.id>0&&this.loadUser(this.state.user.id)},render:function(){return e.createElement("img",{className:this.props.className,src:t.getAvatarPath(this.state.user.avatar),onClick:this._onClick})}});return a}),define("language/blogcomment",["baselanguage"],function(e){var t={vn:{error_text_required:"Bạn chưa nhập nội dung",btn_submit:"Đăng bình luận",btn_reply:"Trả lời",insert_success:"Đăng bình luận thành công",text_placeholder:"Nhập nội dung bình luận",view_more_comment:"Xem %count% bình luận khác",view_more_reply:"Xem %count% câu trả lời khác"},en:{error_text_required:"Bạn chưa nhập nội dung",btn_submit:"Đăng bình luận",btn_reply:"Trả lời",insert_success:"Đăng bình luận thành công",text_placeholder:"Nhập nội dung bình luận",view_more_comment:"Xem %count% bình luận khác",view_more_reply:"Xem %count% câu trả lời khác"}};return new e({lang:t})}),define("models/blogcomment",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/companyblogcomments"});return t}),define("components/blog/comment/form",["react","eventbus","pref","helper","language/default","language/blogcomment","models/blogcomment","models/file"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"BlogCommentFormComponent",submit:function(){var i=this,s={company_id:n.get("cid"),creator_id:n.get("uid"),blog_id:this.props.blog_id,parent_id:this.props.parent_id,text:$.trim(e.findDOMNode(this.refs.text).value)},l=$(e.findDOMNode(this));l.addClass("loading"),(new o).save(s,{success:function(e,n){a.showSuccess(r.t("insert_success")),l.removeClass("loading"),l.form("reset"),$.isFunction(i.props.closeForm)&&i.props.closeForm(),t.trigger("blogcommentlist:addcommentsuccess",n),t.trigger("blogscreendetailmeta:upcountcomment",1),t.trigger("blogscreenwidget:reload","related")},error:function(e,t){l.removeClass("loading");var n={};a.notifyErrorAndForm(t,r,"error",l,n)}})},focus:function(){$(e.findDOMNode(this.refs.text)).focus();var t=$(e.findDOMNode(e.findDOMNode(this))).offset(),n=t.top-$(e.findDOMNode(e.findDOMNode(this))).height();$(window).scrollTop(n)},componentDidMount:function(){var t=this;$(e.findDOMNode(this)).form({inline:!0,fields:{text:{identifier:"text",rules:[{type:"empty",prompt:r.t("error_text_required")}]}},onFailure:function(){return!1},onSuccess:function(e){e.preventDefault(),t.submit()}}),this.props.autoFocus&&this.focus()},render:function(){return e.createElement("form",{className:"ui reply form"},e.createElement("div",{className:"field"},e.createElement("textarea",{placeholder:r.t("text_placeholder"),name:"text",ref:"text",rows:"3",style:{height:"auto"}})),e.createElement("div",{className:"field",style:{textAlign:"right"}},$.isFunction(this.props.closeForm)?e.createElement("a",{onClick:this.props.closeForm,className:"ui tiny basic button"},i.t("close")):null,e.createElement("a",{className:"ui tiny primary submit button"},0==this.props.parent_id?r.t("btn_submit"):r.t("btn_reply"))))}});return l}),define("components/datetime",["react","helper","language/default","eventbus"],function(e,t,n,a){var i=e.createClass({displayName:"DateTimeComponent",getDefaultProps:function(){return{className:"",ts:"",relativelevel:1,format:"DD/MM",timeformat:"HH:mm, ",formatTitle:"HH:mm, DD/MM/YYYY",emptyString:"-----"}},issameday:function(e,t){return e.format("DDMMYYYY")==t.format("DDMMYYYY")},formatNoRelativeDate:function(e,t,n){var a=moment.unix(e).format(n);return t.length>0&&(a=moment.unix(e).format(t)+""+a),a},formatSimpleRelativeDate:function(e,t,a){var i=moment.unix(e),r=moment(),o=moment().subtract(1,"days"),s=moment().add(1,"days"),l="";return this.issameday(i,r)?(l=n.t("relativeToday"),this.props.timeformat.length>0&&(l=i.format(this.props.timeformat)+l)):this.issameday(i,o)?(l=n.t("relativeYesterday"),this.props.timeformat.length>0&&(l=i.format(this.props.timeformat)+l)):this.issameday(i,s)?(l=n.t("relativeTomorrow"),this.props.timeformat.length>0&&(l=i.format(this.props.timeformat)+l)):l=this.formatNoRelativeDate(e,t,a),l},formatDateTime:function(){var e="";switch(this.props.relativelevel){case 0:e=this.formatNoRelativeDate(this.props.ts,this.props.timeformat,this.props.format);break;case 1:e=this.formatSimpleRelativeDate(this.props.ts,this.props.timeformat,this.props.format);break;case 2:e=t.relativeTime(this.props.ts)}return e},componentDidMount:function(){},render:function(){return 0===this.props.ts?e.createElement("span",{className:this.props.className},this.props.emptyString):e.createElement("span",{className:this.props.className,title:moment.unix(this.props.ts).format(this.props.formatTitle)},this.formatDateTime())}});return i}),define("components/confirm",["react","language/default"],function(e,t){var n=e.createClass({displayName:"ConfirmComponent",getDefaultProps:function(){return{message:t.t("confirm_msg_default"),confirmText:t.t("confirm_text_default"),cancelText:t.t("confirm_cancel_default"),confirmClass:"red confirm",cancelClass:"cancel",onConfirm:function(e){e.preventDefault(),console.log("Confirmed!")},onCancel:function(e){e.preventDefault(),console.log("Cancelled!")}}},render:function(){return e.createElement("div",{className:""},e.createElement("h4",{ref:"message"},this.props.message),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("span",{onClick:this.props.onConfirm,className:"ui mini button "+this.props.confirmClass},this.props.confirmText),e.createElement("span",{onClick:this.props.onCancel,className:"ui mini button "+this.props.cancelClass},this.props.cancelText)))}});return n}),define("components/blog/comment/item",["react","pref","role","eventbus","helper","language/default","language/blogcomment","models/file","models/user","models/blogcomment","components/datetime","components/blog/comment/form","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"BlogCommentItemComponent",getInitialState:function(){return{creator:{},showFormReply:!1}},toggleFormReply:function(){var e=!this.state.showFormReply;this.setState({showFormReply:e})},closeFormReply:function(e){void 0!=e&&e.preventDefault(),this.setState({showFormReply:!1})},loadObject:function(e,t){var n=$.Deferred();return t=i.strToInt(t),0>=t?(n.resolve({}),n.promise()):(new e({id:t}).fetch({success:function(e,t){n.resolve(t)},error:function(e,t){n.resolve({})}}),n.promise())},loadMoreData:function(){var e=this;$.when(this.loadObject(l,this.props.data.creator_id)).done(function(t){e.setState({creator:t})})},getSubCommentTotal:function(){var e=0;return this.refs.list_sub&&(e=this.refs.list_sub.state.total),e},confirmRemoveCancel:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.link_remove)).popup("hide")},confirmRemoveOk:function(t){t.preventDefault();var n=this,r=$(e.findDOMNode(this.refs.link_remove));r.popup("hide"),i.addLoader(r);var s=this.getSubCommentTotal()+1;new c(this.props.data).destroy({success:function(e,t){i.removeLoader(r),a.trigger("blogcommentlist:removecommentsuccess",n.props.data),a.trigger("blogscreendetailmeta:upcountcomment",0-s),a.trigger("blogscreenwidget:reload","related")},error:function(e,t){i.removeLoader(r),i.notifyError(t,o,"error")}})},componentDidMount:function(){this.loadMoreData(),$(e.findDOMNode(this.refs.link_remove)).popup({popup:e.findDOMNode(this.refs.confirm_remove),on:"click"})},render:function(){var t=(new s(this.props.data.cover_detail),null);return 0==this.props.data.parent_id&&this.props.listComponent&&(t=e.createElement(this.props.listComponent,{ref:"list_sub",parent_id:this.props.data.id,blog_id:this.props.data.blog_id,limit:2})),e.createElement("div",{className:"comment"},e.createElement("div",{className:"avatar"},e.createElement("img",{src:i.getAvatarPath(this.state.creator.avatar)})),e.createElement("div",{className:"content"},e.createElement("span",{className:"author"},this.state.creator.fullname),e.createElement("div",{className:"metadata"},e.createElement("span",{className:"date"},e.createElement(d,{ts:this.props.data.date_created}))),e.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:this.props.data.text.replace(/\n/g,"<br />")}}),e.createElement("div",{className:"actions"},0==this.props.data.parent_id?e.createElement("a",{onClick:this.toggleFormReply},o.t("btn_reply")):null,n.hasById(n.BLOG_MANAGE_COMMENT)?[e.createElement("a",{key:"link_remove",ref:"link_remove"},r.t("delete")),e.createElement("div",{key:"confirm_remove",ref:"confirm_remove",className:"ui popup"},e.createElement(m,{onConfirm:this.confirmRemoveOk,onCancel:this.confirmRemoveCancel}))]:null),this.state.showFormReply?e.createElement(u,{autoFocus:!0,closeForm:this.closeFormReply,blog_id:this.props.data.blog_id,parent_id:this.props.data.id}):null),t)}});return p}),define("components/blog/comment/list",["react","eventbus","pref","helper","language/blogcomment","collections/blogcomment","components/blog/comment/item","components/blog/comment/form"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"BlogCommentListComponent",getInitialState:function(){return{items:[],currentpage:1,total:0,limit:this.props.limit||10,isLoading:!0}},loadComments:function(e){var t=$.Deferred();return(new r).fetch({data:{company_id:n.get("cid"),blog_id:this.props.blog_id,limit:this.state.limit,parent_id:this.props.parent_id,page:e||1,sort_by:"id",sort_type:"DESC"},success:function(e,n){t.resolve(n)},error:function(e,n){t.reject(n)}}),t.promise()},loadNextPage:function(t){t.preventDefault();var n=this;a.addLoader($(e.findDOMNode(this.refs.view_more_link))),$.when(n.loadComments(this.state.currentpage+1)).done(function(e){n.state.items=n.state.items.concat(e.items),n.state.currentpage=e.currentpage,n.state.limit=e.limit,n.state.total=e.total,n.forceUpdate()}).always(function(){a.removeLoader($(e.findDOMNode(n.refs.view_more_link)))})},loadData:function(){var e=this;this.state.items=[];for(var t=0,n=this.state.currentpage,a=1;n>=a;a++)$.when(e.loadComments(a)).done(function(t){t.items,e.state.items=e.state.items.concat(t.items),e.state.currentpage=t.currentpage,e.state.limit=t.limit,e.state.total=t.total}).always(function(){++t>=n&&(e.state.isLoading=!1,e.forceUpdate())})},addCommentSuccess:function(e){var t=this;e.parent_id==this.props.parent_id&&(this.state.items.push(e),this.forceUpdate(function(){t.loadData()}))},removeCommentSuccess:function(e){var t=this;if(e.parent_id==this.props.parent_id){var n=this.state.items.filter(function(t){return t.id!=e.id});this.state.items=n,this.forceUpdate(function(){t.loadData()})}},reload:function(e){e==this.props.parent_id&&this.loadData()},focus:function(){this.refs.form_comment&&$.isFunction(this.refs.form_comment.focus)&&this.refs.form_comment.focus()},componentWillUnmount:function(){t.off("blogcommentlist:reload",this.reload),t.off("blogcommentlist:addcommentsuccess",this.addCommentSuccess),t.off("blogcommentlist:removecommentsuccess",this.removeCommentSuccess)},componentDidMount:function(){t.on("blogcommentlist:reload",this.reload),t.on("blogcommentlist:addcommentsuccess",this.addCommentSuccess),t.on("blogcommentlist:removecommentsuccess",this.removeCommentSuccess),this.loadData()},render:function(){var t=i.t("view_more_reply"),n="comments",r=null,c={};this.state.items.length<=0&&(c.paddingBottom=0,c.paddingTop=0),0==this.props.parent_id&&(t=i.t("view_more_comment"),n="ui comments blog-comment-list",r=e.createElement(s,{ref:"form_comment",blog_id:this.props.blog_id,parent_id:0})),t=t.replace("%count%",a.numberFormat(this.state.total-this.state.items.length));var d=this.state.items.slice();return d.sort(function(e,t){return e.id>t.id?1:e.id<t.id?-1:0}),e.createElement("div",{className:n,style:c},this.state.total/this.state.limit>this.state.currentpage?e.createElement("a",{ref:"view_more_link",href:"",onClick:this.loadNextPage},t):null,this.state.isLoading?e.createElement("div",{className:"ui active inverted dimmer"},e.createElement("div",{className:"ui mini loader"})):null,d.map(function(t,n){return e.createElement(o,{listComponent:l,key:t.id+"-"+n,data:t})}),r)}});return l}),define("components/headingtabfilter",["react","pref","helper","querystring","eventbus","language/default"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"HeadingTabFilterComponent",getDefaultProps:function(){return{active:!1}},getInitialState:function(){return{active:this.props.active}},clickFilterHandle:function(e){e.preventDefault(),i.trigger("filterbar:toggle");var t=!this.state.active;this.setState({active:t})},unactiveHandler:function(){this.setState({active:!1})},componentWillMount:function(){},componentWillUnmount:function(){i.off("headingtabfilter:unactive",this.unactiveHandler)},componentDidMount:function(){i.on("headingtabfilter:unactive",this.unactiveHandler)},render:function(){return e.createElement("li",{className:"filtertogglewrapper "+(this.state.active?"active":"")},e.createElement("a",{href:"#",onClick:this.clickFilterHandle,className:"filtertoggle",title:r.t("heading_filter_toggle_tooltip")},e.createElement("span",{className:"hideonsmall"},r.t("heading_filter_toggle")),e.createElement("i",{className:"icon tc-search onlyonsmall"})))}});return o}),define("components/headingfull",["react","pref","helper","querystring","eventbus","language/default","components/headingdatepicker","components/mixin/listsearch","components/querytaglist","components/headingbreadcrumb","components/headingtab","components/headingtabfilter","components/floatpagination"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"HeadingComponent",mixins:[s],filters:{},getDefaultProps:function(){return{rootlink:"",roottext:"",link:"",text:"",subtext:"",total:"",querytaghide:[],tabs:[],showdatepicker:!1,hidekeywordsearch:!1,hidefiltertoggle:!1,hidetab:!1,hidepagination:!1,enableReloadSameLink:!0,enableReloadSameLinkEvent:"list:reload",paginationMoreClass:"",nomarginbottom:!1,hidetotalinbreadcrumb:!0,filters:[],filterbaseurl:"",savedFilterIdentifier:"",alreadyloaddata:!1,shownavheadingtoggle:!1}},getInitialState:function(){return{tabs:this.props.tabs}},toggleButtonsHandler:function(){$(e.findDOMNode(this.refs.headingbuttons)).toggle(),$(e.findDOMNode(this.refs.clear)).toggle(),$("html, body").animate({scrollTop:0},300)},getTotalString:function(t){var a=t+"";return a.length>0?e.createElement("span",{className:"number"},n.numberFormat(t)):""},getTotalRecord:function(){var e=0;return this.state.tabs.length>0&&this.state.tabs[0].hasOwnProperty("number")&&(e=this.state.tabs[0].number),e},componentWillMount:function(){this.filters=this.props.filters,this.state.tabs=[],this.props.subtext.length>0?this.state.tabs.push({id:0,name:this.props.subtext,number:this.props.total,active:!0}):this.state.tabs.push({id:0,name:r.t("tab_all"),number:this.props.total,active:!0})},componentDidUpdate:function(e,t){this.state.tabs[0].number!=this.props.total&&(this.state.tabs[0].number=this.props.total,n.countNotEmptyProperties(this.props.filters)>0?this.state.tabs[0].name=r.t("tab_all_search"):this.state.tabs[0].name=r.t("tab_all"),this.setState({tabs:this.state.tabs}))},componentWillUnmount:function(){i.off("headingfull:togglebuttons",this.toggleButtonsHandler),i.trigger("pageheader:hidenavheadingtoggle")},componentDidMount:function(){i.on("headingfull:togglebuttons",this.toggleButtonsHandler),n.isSmallScreen()&&this.props.shownavheadingtoggle&&(this.toggleButtonsHandler(),i.trigger("pageheader:shownavheadingtoggle"))},render:function(){var t="heading";return this.props.hidepagination&&(t+=" nopagination"),this.props.hidetab&&(t+=" notab"),this.props.nomarginbottom&&(t+=" nomarginbottom"),e.createElement("div",null,e.createElement("div",{ref:"heading",className:t},e.createElement(c,{enableReloadSameLink:this.props.enableReloadSameLink,enableReloadSameLinkEvent:this.props.enableReloadSameLinkEvent,headingfull:!0,rootlink:this.props.rootlink,roottext:this.props.roottext,link:this.props.link,text:this.props.text,subtext:this.props.subtext,total:this.props.total,hidefiltertoggle:this.props.hidefiltertoggle,hidetotalinbreadcrumb:this.props.hidetotalinbreadcrumb,breadcrumbMoreClass:this.props.hidetab||n.isSmallScreen()?"":"large"}),this.props.hidetab?"":e.createElement("ul",{className:"headingtabs"},this.state.tabs.map(function(t){return e.createElement(d,{key:t.id,data:t})}),this.props.hidefiltertoggle?"":e.createElement(u,null)),e.createElement("div",{className:"pull-right"},e.createElement("div",{className:"pull-right headingbuttons",ref:"headingbuttons"},this.props.hidekeywordsearch?"":e.createElement("a",{href:"#",onClick:this.searchboxToggleHandler,ref:"searchbutton"},e.createElement("i",{className:"icon tc-search"})),this.props.hidekeywordsearch?"":e.createElement("div",{className:"searchbox ui form",ref:"searchbox",style:this.props.hidekeywordsearch?{display:"none"}:{}},this.props.showdatepicker?e.createElement("div",{className:"ui field"},e.createElement("div",{className:"label",style:{color:"#f5f5f5",paddingBottom:3}},"Chọn khoảng thời gian:"),e.createElement(o,{callBack:this.doFilterDate,start:this.props.filters.date_started,end:this.props.filters.date_ended})):"",e.createElement("div",{className:"ui field small"},e.createElement("div",{className:"label",style:{color:"#f5f5f5",paddingBottom:3}},"Tìm theo từ khóa:"),e.createElement("input",{type:"text",ref:"keyword",onKeyUp:this.keywordPressHandler.bind(this,"keyword"),defaultValue:a.get("keyword"),placeholder:r.t("searchplaceholder")})),e.createElement("button",{className:"ui small black button",onClick:this.doFilterKeyword.bind(this,"keyword")},r.t("searchbtn"))),this.props.children),this.props.hidepagination?"":e.createElement("div",{className:"paginationwrapper "+this.props.paginationMoreClass},e.createElement(m,{url:a.getPathWithPage(this.props.filters,this.props.filterbaseurl),totalPage:Math.ceil(this.getTotalRecord()/this.props.limit),currentPage:this.props.currentpage})))),e.createElement(l,{filters:this.props.filters,querytaghide:this.props.querytaghide,lang:this.props.lang,callback:this.removeFilter,rendercallback:this.props.loadFilterQueryTagData}),e.createElement("div",{style:{clear:"both"},ref:"clear"}))}});return p}),define("components/employee-avatar",["react","helper","models/user"],function(e,t,n){var a=e.createClass({displayName:"EmployeeCircleAvatar",getDefaultProps:function(){return{className:"ui avatar image",hover:!0,avatar:!0,avatarwidth:19,suffix:"",user:{id:0},cssStyles:{},onClick:function(e){},tooltipHideOnClick:!1}},getInitialState:function(){return{user:$.extend({},this.props.user)}},loadUser:function(e){var a=this;e=t.strToInt(e),0>=e||new n({id:e}).fetch({success:function(e,t){t.id>0&&a.setState({user:t})}})},_onClick:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget).attr("href").replace("#","");this.props.onClick(t)},initMyTip:function(){t.initMyTip($(e.findDOMNode(this)),null,null,this.props.tooltipHideOnClick)},componentDidMount:function(){this.initMyTip(),this.props.user.id>0?this.loadUser(this.props.user.id):this.loadUser(this.props.id)},componentDidUpdate:function(){this.initMyTip()},render:function(){if(this.state.user.id<=0)return null;var n=$.extend({display:"inline-block"},this.props.cssStyles);return e.createElement("a",{title:this.state.user.fullname,className:"nocolor",href:"#"+this.state.user.id,style:n,onClick:this._onClick},this.props.avatar?e.createElement("img",{className:this.props.className,style:{width:this.props.avatarwidth,height:this.props.avatarwidth,margin:this.props.hover===!0?0:""},src:t.getAvatarPath(this.state.user.avatar)}):null,this.props.hover?null:e.createElement("span",{className:"employee-avatar-fullname"},this.state.user.fullname+this.props.suffix))}});return a}),define("components/file/tinymce/item",["react","setting","backbone","helper","eventbus","role","models/user","models/file","language/file","language/default","components/confirm","components/employee-avatar"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"FileItemComponent",getDefautlProps:function(){return{selected_id:0}},editHandler:function(e){e.preventDefault(),i.trigger("file:edit",this.props.data)},deleteHandler:function(){i.trigger("file:delete",this.props.data),$(e.findDOMNode(this.refs.deletebuttonicon)).hide(),a.loaderAppend($(e.findDOMNode(this.refs.deletebutton)))},removeLoaderIndicator:function(t){this.props.data.id==t.id&&($(e.findDOMNode(this.refs.deletebuttonicon)).show(),a.loaderRemove($(e.findDOMNode(this.refs.deletebutton))))},getDownloadUrl:function(){var e="";return e=t.rooturl+"v1/files/download?id="+this.props.data.id+"&hash="+this.props.data.md5_hash+"&path="+encodeURIComponent(this.props.data.file_path)},getIcon:function(){var e="";return 1==this.props.data.is_directory?e="imgs/filetype/folder_special.png":(e=""==this.props.data.extension?"folder.png":$.inArray(this.props.data.extension,["jpg","jpeg","png","gif","ai","psd","tiff"])>=0?"jpg.png":"pdf"==this.props.data.extension?"pdf.png":"html"==this.props.data.extension?"html.png":"xls"==this.props.data.extension||"xlsx"==this.props.data.extension?"xls.png":$.inArray(this.props.data.extension,["mp3","ogg","wav","wma"])>=0?"mp3.png":$.inArray(this.props.data.extension,["mp4","mov","avi"])>=0?"mov.png":$.inArray(this.props.data.extension,["ppt","pptx"])>=0?"ppt.png":$.inArray(this.props.data.extension,["doc","docx"])>=0?"doc.png":$.inArray(this.props.data.extension,["zip","gz","bzip","gzip","7z"])>=0?"zip.png":$.inArray(this.props.data.extension,["rar"])>=0?"rar.png":"html.png",e="imgs/filetype/"+e),e},getIconWidth:function(){return 1==this.props.data.is_directory?32:24},isDirectory:function(){return 1==this.props.data.is_directory},getLinkTooltip:function(){return this.isDirectory()?l.t("click_to_open"):l.t("click_to_view")},clickHandler:function(e){this.isDirectory()?this.props.openDirectory(this.props.data.id):this.doFileSelect(e),e.preventDefault()},componentWillUnmount:function(){i.off("fileitem:removeloader",this.removeLoaderIndicator)},componentDidMount:function(){i.on("fileitem:removeloader",this.removeLoaderIndicator);var t=this;$(e.findDOMNode(this.refs.deletebutton)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(d,null)),onShow:function(){$(this).find(".confirm").fastClick(function(n){n.preventDefault(),$(e.findDOMNode(t.refs.deletebutton)).popup("hide"),t.deleteHandler()}),$(this).find(".cancel").fastClick(function(n){n.preventDefault(),$(e.findDOMNode(t.refs.deletebutton)).popup("hide")})}}),$(e.findDOMNode(this.refs.removeme)).remove()},doFileSelect:function(e){e.preventDefault(),i.trigger("tinymcefile:selectfile",this.props.data)},renderMobile:function(){var t=(moment(moment.unix(this.props.data.date_created)),new s(this.props.data));return e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",className:"pull-left",onClick:this.clickHandler,title:this.getLinkTooltip()},e.createElement("img",{width:this.getIconWidth(),src:t.getThumbnail()})),e.createElement("div",{style:{marginLeft:45},className:"mitemheading mitemheadingnormal"},e.createElement("a",{className:"nocolor",href:"#",onClick:this.clickHandler,title:this.getLinkTooltip(),ref:"title",style:{display:"block",paddingTop:t.isDirectory()?6:0}},this.props.data.title),e.createElement("div",{className:"mitemmeta"},e.createElement("small",null,t.getSize())))))},renderDesktop:function(){var t=moment(moment.unix(this.props.data.date_created)),n=(!r.hasById(230),new s(this.props.data));return e.createElement("tr",null,e.createElement("td",{className:"center aligned"},e.createElement("a",{href:"#",onClick:this.clickHandler,title:this.getLinkTooltip()},e.createElement("img",{width:this.getIconWidth(),src:n.getThumbnail()}))),e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.clickHandler,title:this.getLinkTooltip(),ref:"title"},this.props.data.title)),e.createElement("td",{className:"right aligned"+(this.props.selected_id>0?" hide":"")},n.getSize()),e.createElement("td",{className:this.props.selected_id>0?" hide":""},t.format("HH:mm, DD/MM")),e.createElement("td",{className:"right aligned cell_action"+(this.props.selected_id>0?" hide":"")},n.isDirectory()?"":e.createElement("a",{onClick:this.doFileSelect,className:a.rowButtonClass(),title:l.t("button_download")
},e.createElement("i",{className:"tc-eye icon"})),n.isDirectory()?e.createElement("a",{title:l.t("button_open"),href:"#",className:a.rowButtonClass(),onClick:this.clickHandler},e.createElement("i",{className:"tc-search icon"})):e.createElement("a",{href:n.getDownloadUrl(),className:a.rowButtonClass(),target:"_blank",title:l.t("button_download")},e.createElement("i",{className:"tc-download icon"})),e.createElement("a",{href:"#",title:l.t("button_edit"),onClick:this.editHandler,className:a.rowButtonClass()},e.createElement("i",{className:"tc-gear icon"})),e.createElement("a",{ref:"deletebutton",title:n.isDirectory()?l.t("button_delete_directory"):l.t("button_delete_file"),className:a.rowButtonClass()},e.createElement("i",{className:"tc-trash icon",ref:"deletebuttonicon"}))))},render:function(){return a.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return m}),define("components/file/tinymce/previewphoto",["react","setting","backbone","helper","eventbus","role","models/user","models/file","language/file","language/default"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"FileTinymcePreviewPhotoComponent",getContent:function(){var t=$(e.findDOMNode(this.refs.imageurl)).val(),n=$(e.findDOMNode(this.refs.width)).val(),a=$(e.findDOMNode(this.refs.height)).val(),i=$(e.findDOMNode(this.refs.caption)).val(),r='<span class="tceditor-image"><img src="'+t+'" alt="'+i.replace('"',"")+'" width="'+n+'" height="'+a+'" />';i.length>0&&(r+='<span class="tceditor-caption">'+i+"</span>"),r+="</span>";var o=!!$(e.findDOMNode(this.refs.isnewwindowwrapper)).checkbox("is checked"),s=$(e.findDOMNode(this.refs.link)).val(),l=$(e.findDOMNode(this.refs.tooltip)).val().replace('"',"");if(s.length>0){var c="";o&&(c=' target="_blank"'),r='<a class="tceditor-link-image" href="'+s+'" title="'+l+'"'+c+">"+r+"</a>"}return r},doTypingSizeHandle:function(t,n){var a=!!$(e.findDOMNode(this.refs.iskeepratiowrapper)).checkbox("is checked"),i=parseInt($(e.findDOMNode(this.refs.width)).val()),r=parseInt($(e.findDOMNode(this.refs.height)).val());a&&("width"==t?(r=parseInt(i*this.props.data.height/this.props.data.width),isNaN(r)||$(e.findDOMNode(this.refs.height)).val(r)):"height"==t&&(i=parseInt(r*this.props.data.width/this.props.data.height),isNaN(i)||$(e.findDOMNode(this.refs.width)).val(i)))},componentWillUnmount:function(){},componentDidMount:function(){$(e.findDOMNode(this.refs.isnewwindowwrapper)).checkbox(),$(e.findDOMNode(this.refs.iskeepratiowrapper)).checkbox(),a.isSmallScreen()||a.initMyTip($(e.findDOMNode(this)).find(".mytip_onpage"),null,null,!1)},render:function(){var t=new s(this.props.data);return e.createElement("div",{className:"ui grid"},e.createElement("div",{className:"ui ten wide column"},e.createElement("div",{className:"ui small form"},e.createElement("div",{className:"field",style:{marginBottom:"1em"}},e.createElement("label",null,l.t("image_url")),e.createElement("input",{type:"text",ref:"imageurl",defaultValue:t.getDownloadUrl()})),e.createElement("div",{className:"field",style:{marginBottom:"1em"}},e.createElement("label",null,l.t("image_caption")),e.createElement("input",{type:"text",ref:"caption"})),e.createElement("h4",{className:"ui dividing header"},l.t("image_has_link")),e.createElement("div",{className:"field",style:{marginBottom:"1em"}},e.createElement("label",null,l.t("image_link_url")),e.createElement("input",{type:"text",ref:"link",placeholder:"http://"})),e.createElement("div",{className:"field",style:{marginBottom:"1em"}},e.createElement("label",null,l.t("image_link_tooltip")),e.createElement("input",{type:"text",ref:"tooltip"})),e.createElement("div",{className:"field",style:{marginBottom:"1em"}},e.createElement("div",{className:"ui checkbox",ref:"isnewwindowwrapper"},e.createElement("input",{type:"checkbox",ref:"isnewwindow",className:"hidden"}),e.createElement("label",null,l.t("image_link_new_window")))))),e.createElement("div",{className:"ui six wide column"},e.createElement("div",{className:"pull-right right aligned",style:{marginTop:-10,marginRight:-10}},e.createElement("a",{href:"#",title:c.t("close"),onClick:this.props.closePreview,className:"ui button icon mini basic noborder mytip_onpage"},e.createElement("i",{className:"icon tc-cross"}))),e.createElement("img",{src:t.getThumbnail(),style:{maxWidth:"100%",height:"auto"}}),e.createElement("br",null),e.createElement("div",{className:"ui small form"},e.createElement("div",{className:"inline fields"},e.createElement("div",{className:"seven wide field"},e.createElement("input",{type:"text",ref:"width",className:"mytip_onpage",onKeyUp:this.doTypingSizeHandle.bind(this,"width"),defaultValue:this.props.data.width,title:l.t("image_width")})),e.createElement("div",{className:"two wide field center aligned"},e.createElement("label",null,"×")),e.createElement("div",{className:"seven wide field"},e.createElement("input",{type:"text",ref:"height",className:"mytip_onpage",onKeyUp:this.doTypingSizeHandle.bind(this,"height"),defaultValue:this.props.data.height,title:l.t("image_height")}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"ui checked checkbox",ref:"iskeepratiowrapper"},e.createElement("input",{type:"checkbox",ref:"iskeepratio",defaultChecked:"checked",className:"hidden"}),e.createElement("label",null,l.t("image_keep_ratio")))))))}});return d}),define("components/file/tinymce/previewfile",["react","setting","backbone","helper","eventbus","role","models/user","models/file","language/file","language/default"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"FileTinymcePreviewFileComponent",getContent:function(){var t=!!$(e.findDOMNode(this.refs.isnewwindowwrapper)).checkbox("is checked"),n=$(e.findDOMNode(this.refs.link)).val(),a=$(e.findDOMNode(this.refs.caption)).val(),i=$(e.findDOMNode(this.refs.tooltip)).val().replace('"',""),r=$(e.findDOMNode(this.refs.icon)).attr("src"),o=$(e.findDOMNode(this.refs.size)).text(),s="";return t&&(s=' target="_blank"'),content='<div><table border="0"><tr><td width="32"><img src="'+r+'" width="32" /></td><td><a class="tceditor-link-file" href="'+n+'" title="'+i+'"'+s+">"+a+"</a><br /><em>"+o+"</em></td></tr></table></div>",content},getIcon:function(){var e="";return e=""==this.props.data.extension?"folder.png":$.inArray(this.props.data.extension,["jpg","jpeg","png","gif","ai","psd","tiff"])>=0?"jpg.png":"pdf"==this.props.data.extension?"pdf.png":"html"==this.props.data.extension?"html.png":"xls"==this.props.data.extension||"xlsx"==this.props.data.extension?"xls.png":$.inArray(this.props.data.extension,["mp3","ogg","wav","wma"])>=0?"mp3.png":$.inArray(this.props.data.extension,["mp4","mov","avi"])>=0?"mov.png":$.inArray(this.props.data.extension,["ppt","pptx"])>=0?"ppt.png":$.inArray(this.props.data.extension,["doc","docx"])>=0?"doc.png":$.inArray(this.props.data.extension,["zip","gz","bzip","gzip","7z"])>=0?"zip.png":$.inArray(this.props.data.extension,["rar"])>=0?"rar.png":"html.png",e="imgs/filetype/"+e},componentWillUnmount:function(){},componentDidMount:function(){$(e.findDOMNode(this.refs.isnewwindowwrapper)).checkbox(),a.isSmallScreen()||a.initMyTip($(e.findDOMNode(this)).find(".mytip_onpage"),null,null,!1)},render:function(){var t=new s(this.props.data);return e.createElement("div",{className:"ui grid"},e.createElement("div",{className:"ui thirteen wide column"},e.createElement("div",{className:"ui small form"},e.createElement("div",{className:"field",style:{marginBottom:"1em"}},e.createElement("label",null,l.t("file_caption")),e.createElement("input",{type:"text",ref:"caption",defaultValue:t.get("title")}),e.createElement("input",{type:"hidden",value:t.getDownloadUrl(),ref:"link"}),e.createElement("input",{type:"hidden",value:t.getDownloadUrl(),ref:"link"})),e.createElement("div",{className:"field",style:{marginBottom:"1em"}},e.createElement("label",null,l.t("file_link_tooltip")),e.createElement("input",{type:"text",ref:"tooltip"})),e.createElement("div",{className:"field",style:{marginBottom:"1em"}},e.createElement("div",{className:"ui checkbox",ref:"isnewwindowwrapper"},e.createElement("input",{type:"checkbox",ref:"isnewwindow",className:"hidden"}),e.createElement("label",null,l.t("file_link_new_window")))))),e.createElement("div",{className:"ui three wide column center aligned"},e.createElement("div",{className:"pull-right right aligned",style:{marginTop:-10,marginRight:-10}},e.createElement("a",{href:"#",title:c.t("close"),onClick:this.props.closePreview,className:"ui button icon mini basic noborder mytip_onpage"},e.createElement("i",{className:"icon tc-cross"}))),e.createElement("br",null),e.createElement("img",{src:this.getIcon(),ref:"icon",style:{}}),e.createElement("br",null),e.createElement("small",{ref:"size"},t.getSize())))}});return d}),define("components/file/tinymce/preview",["react","setting","backbone","helper","eventbus","role","models/user","models/file","language/file","language/default","components/confirm","components/file/tinymce/previewphoto","components/file/tinymce/previewfile","components/employee-avatar"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"FilePreviewComponent",getContent:function(){return this.refs.filepreview.getContent()},componentWillUnmount:function(){},componentDidMount:function(){},render:function(){return e.createElement("div",{style:{padding:"1em 0 1em 1em"}},this.props.data.thumbnail.length>0?e.createElement(u,{ref:"filepreview",closePreview:this.props.closePreview,data:this.props.data}):e.createElement(m,{ref:"filepreview",closePreview:this.props.closePreview,data:this.props.data}))}});return h}),define("components/file/directoryadd",["react","helper","eventbus","pref","language/file","language/default","models/file"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"DirectoryAddComponent",doAddDirectory:function(){var r=this,s=$(".ui.form",this.getDOMNode());s.addClass("loading");var l=$(e.findDOMNode(this.refs.submit));l.addClass("loading"),(new o).save({company_id:a.get("cid"),creator_id:a.get("uid"),is_directory:1,did:this.props.data.did,object_type:this.props.data.object_type,object_id:this.props.data.object_id,title:$(e.findDOMNode(this.refs.title)).val(),description:$(e.findDOMNode(this.refs.description)).val()},{success:function(a,o){t.showSuccess(i.t("add_dir_success")+' "'+o.title+'".'),$(e.findDOMNode(r.refs.directoryadd)).modal("hide"),n.trigger("file:append",o)},error:function(e,n){t.notifyErrorAndForm(n,i,"error_add",s,{title:["error_directory_name_required","error_directory_name_existed"]})},complete:function(){l.removeClass("loading"),s.removeClass("loading")}})},formSubmit:function(){$(e.findDOMNode(this.refs.form)).submit()},showPopup:function(){var t=this;$(e.findDOMNode(this.refs.directoryadd)).modal({context:this.getDOMNode(),closable:!1,onVisible:function(){setTimeout(function(){$(e.findDOMNode(t.refs.title)).focus()},200)},onHidden:function(){n.trigger("file:unmountdirectoryaddform")}}).modal("show")},doHidePopup:function(){$(e.findDOMNode(this.refs.directoryadd)).modal("hide")},componentWillUpdate:function(){this.showPopup()},componentWillUnmount:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.form)).form({fields:{title:{identifier:"title",rules:[{type:"empty",prompt:i.t("error_directory_name_required")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.doAddDirectory()}}),this.showPopup()},render:function(){return e.createElement("div",{id:"chatroomadd-inner"},e.createElement("div",{className:"ui tiny modal",ref:"directoryadd"},e.createElement("div",{className:"header"},i.t("heading_add_dir")),e.createElement("div",{className:"content"},e.createElement("div",{className:"ui form",ref:"form"},e.createElement("div",{className:"field"},e.createElement("label",null,i.t("dir_name")),e.createElement("input",{type:"text",ref:"title",name:"title"})),e.createElement("div",{className:"field"},e.createElement("label",null,r.t("description")),e.createElement("input",{type:"text",ref:"description",name:"description"})))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic button",onClick:this.doHidePopup},r.t("close")),e.createElement("a",{className:"ui teal button",href:"javascript: void(0)",ref:"submit",onClick:this.formSubmit},r.t("create")))))}});return s}),define("components/file/directoryedit",["react","helper","eventbus","pref","language/file","language/default","models/file"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"DirectoryEditComponent",doEditDirectory:function(){var a=this,r=$(".ui.form",this.getDOMNode());r.addClass("loading");var s=$(e.findDOMNode(this.refs.submit));s.addClass("loading"),(new o).save({id:this.props.data.id,title:$(e.findDOMNode(this.refs.title)).val(),description:$(e.findDOMNode(this.refs.description)).val()},{success:function(r,o){t.showSuccess(i.t("update_dir_success")+' "'+o.title+'".'),$(e.findDOMNode(a.refs.directoryedit)).modal("hide"),n.trigger("file:update",o)},error:function(e,n){t.notifyErrorAndForm(n,FileLanguage,"error_edit",r,{title:["error_directory_name_required","error_directory_name_existed"]})},complete:function(){s.removeClass("loading"),r.removeClass("loading")}})},formSubmit:function(){$(e.findDOMNode(this.refs.form)).submit()},showPopup:function(){var t=this;$(e.findDOMNode(this.refs.directoryedit)).modal({context:this.getDOMNode(),closable:!1,onVisible:function(){setTimeout(function(){$(e.findDOMNode(t.refs.title)).focus()},200)},onHidden:function(){n.trigger("file:unmountdirectoryeditform")}}).modal("show")},componentWillUpdate:function(){this.showPopup()},componentWillUnmount:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.form)).form({fields:{title:{identifier:"title",rules:[{type:"empty",prompt:i.t("error_directory_name_required")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.doEditDirectory()}}),this.showPopup()},render:function(){return e.createElement("div",{id:"chatroomadd-inner"},e.createElement("div",{className:"ui tiny modal",ref:"directoryedit"},e.createElement("div",{className:"header"},i.t("heading_edit_dir")),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"field"},e.createElement("label",null,i.t("dir_name")),e.createElement("input",{type:"text",ref:"title",name:"title",defaultValue:this.props.data.title})),e.createElement("div",{className:"field"},e.createElement("label",null,r.t("description")),e.createElement("input",{type:"text",ref:"description",name:"description",defaultValue:this.props.data.description})))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic cancel close button"},r.t("close")),e.createElement("a",{className:"ui teal button",href:"javascript: void(0)",ref:"submit",onClick:this.formSubmit},r.t("save")))))}});return s}),define("components/file/fileadd",["react","helper","eventbus","pref","language/file","language/default","models/file"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"FileAddComponent",getDefaultProps:function(){return{did:0,object_type:0,object_id:0}},doAddFile:function(){var r=$(".ui.form",this.getDOMNode());r.addClass("loading");var s=$(e.findDOMNode(this.refs.submit));s.addClass("loading"),(new o).save({company_id:a.get("cid"),creator_id:a.get("uid"),is_directory:0,did:this.props.data.did,object_type:this.props.data.object_type,object_id:this.props.data.object_id,description:$(e.findDOMNode(this.refs.description)).val()},{success:function(e,t){n.trigger("file:append",t)},error:function(e,n){t.notifyError(n,i,"error_add")},complete:function(){s.removeClass("loading"),r.removeClass("loading")}})},doHidePopup:function(){$(e.findDOMNode(this.refs.fileadd)).modal("hide")},formSubmit:function(){$(e.findDOMNode(this.refs.form)).submit()},showPopup:function(){var t=this;$(e.findDOMNode(this.refs.fileadd)).modal({context:this.getDOMNode(),closable:!1,onVisible:function(){(new o).initAjaxUpload($(e.findDOMNode(t.refs.fileinput)),t.props.data.did,t.props.data.object_type,t.props.data.object_id,(new o).STATUS_ENABLE)},onHidden:function(){n.trigger("file:unmountfileaddform")}}).modal("show")},componentWillUpdate:function(){this.showPopup()},componentWillUnmount:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.form)).form({inline:!0,keyboardShortcuts:!1,onSuccess:function(e,n){e.preventDefault(),t.doAddFile()}}),this.showPopup()},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"fileadd"},e.createElement("div",{className:"header"},i.t("heading_upload_file")),e.createElement("div",{className:"content"},e.createElement("div",{className:"ui form",ref:"form"},e.createElement("div",{className:"field"},e.createElement("input",{type:"file",ref:"fileinput",id:"ffile",name:"ffile",multiple:"multiple"})))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui teal button",onClick:this.doHidePopup},i.t("fileadd_done")))))}});return s}),define("components/file/fileedit",["react","helper","eventbus","pref","language/file","language/default","models/file"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"FileEditComponent",doEditFile:function(){var a=this,r=$(".ui.form",this.getDOMNode());r.addClass("loading");var s=$(e.findDOMNode(this.refs.submit));s.addClass("loading"),(new o).save({id:this.props.data.id,title:$(e.findDOMNode(this.refs.title)).val(),description:$(e.findDOMNode(this.refs.description)).val()},{success:function(r,o){t.showSuccess(i.t("update_file_success")+' "'+o.title+'".'),$(e.findDOMNode(a.refs.fileedit)).modal("hide"),n.trigger("file:update",o)},error:function(e,n){t.notifyErrorAndForm(n,FileLanguage,"error_edit",r,{title:["error_file_name_required"]})},complete:function(){s.removeClass("loading"),r.removeClass("loading")}})},formSubmit:function(){$(e.findDOMNode(this.refs.form)).submit()},showPopup:function(){var t=this;$(e.findDOMNode(this.refs.fileedit)).modal({context:this.getDOMNode(),closable:!1,onVisible:function(){setTimeout(function(){$(e.findDOMNode(t.refs.title)).focus()},200)},onHidden:function(){n.trigger("file:unmountfileeditform")}}).modal("show")},componentWillUpdate:function(){this.showPopup()},componentWillUnmount:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.form)).form({fields:{title:{identifier:"title",rules:[{type:"empty",prompt:i.t("error_file_name_required")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.doEditFile()}}),this.showPopup()},render:function(){return e.createElement("div",{id:"chatroomadd-inner"},e.createElement("div",{className:"ui tiny modal",ref:"fileedit"},e.createElement("div",{className:"header"},i.t("heading_upload_file")),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"field"},e.createElement("label",null,i.t("file_name")),e.createElement("input",{type:"text",ref:"title",name:"title",defaultValue:this.props.data.title})),e.createElement("div",{className:"field"},e.createElement("label",null,r.t("description")),e.createElement("input",{type:"text",ref:"description",name:"description",defaultValue:this.props.data.description})))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic cancel close button"},r.t("close")),e.createElement("a",{className:"ui teal button",href:"javascript: void(0)",ref:"submit",onClick:this.formSubmit},r.t("save")))))}});return s}),define("components/file/tinymce/list",["react","backbone","helper","pref","phonegap","eventbus","querystring","collections/file","models/file","language/file","role","components/headingfull","components/file/tinymce/item","components/file/tinymce/preview","components/file/directoryadd","components/file/directoryedit","components/file/fileadd","components/file/fileedit","components/mixin/listsearch"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v){var y=e.createClass({displayName:"FileListComponent",mixins:[v],getInitialState:function(){return{items:[],currentfile:{id:0}}},getDefaultProps:function(){return{did:0,object_type:10,object_id:0}},filters:{did:null,sort_by:null,sort_type:null},loadFilterQueryTagData:function(e){var t=null,n="name",a=null;null!=t?o.requestFilterQueryTag(t,this.filters,e,n):null!=a&&r.trigger("querytag:updatetext",{field:e,text:a.text})},openDirectory:function(e){this.filters.did=e,this.getCurrentDirectoryDetail(),this.loadData({})},addDirectoryHandler:function(t){t.preventDefault();var n={did:this.filters.did,object_type:this.props.object_type,object_id:this.props.object_id};e.render(e.createElement(h,{key:this.filters.did,data:n}),e.findDOMNode(this.refs.directoryadd))},editHandler:function(e){1==e.is_directory?this.doEditDirectory(e):this.doEditFile(e)},deleteHandler:function(e){1==e.is_directory?this.doDeleteDirectory(e):this.doDeleteFile(e)},doEditDirectory:function(t){e.render(e.createElement(f,{key:t.id,data:t}),e.findDOMNode(this.refs.directoryedit))},doEditFile:function(t){e.render(e.createElement(_,{key:t.id,data:t}),e.findDOMNode(this.refs.fileedit))},doDeleteDirectory:function(e){var t=new l(e);t.destroy({success:function(t,a){n.showSuccess(c.t("remove_dir_success")+' "'+e.title+'".'),r.trigger("file:remove",{id:e.id})},error:function(e,t){n.notifyError(t,c,"error_delete")},complete:function(){r.trigger("fileitem:removeloader",e)}})},doDeleteFile:function(e){var t=new l(e);t.destroy({success:function(t,a){n.showSuccess(c.t("remove_file_success")+' "'+e.title+'".'),r.trigger("file:remove",{id:e.id})},error:function(e,t){n.notifyError(t,c,"error_delete")},complete:function(){r.trigger("fileitem:removeloader",e)}})},addFileHandler:function(t){t.preventDefault();var n={did:this.filters.did,object_type:this.props.object_type,object_id:this.props.object_id};e.render(e.createElement(g,{key:this.filters.did,data:n}),e.findDOMNode(this.refs.fileadd))},parentDirectoryId:0,loadData:function(e){var t=new s,i=this;n.showLoader(),t.fetch({data:{company_id:a.get("cid"),did:this.filters.did,object_type:this.props.object_type,object_id:0,sort_by:this.filters.sort_by,sort_type:this.filters.sort_type},success:function(e,t){i.setState({items:t.items})},complete:function(){n.hideLoader()}})},updateBreadcrumbs:function(t,n){var i=this,r=$(e.findDOMNode(this.refs.breadcrumbs));r.find("a").unbind("click");var o='<a data-id="0" href="#" class="section">'+a.get("fullname")+" "+c.t("heading")+"</a>";0==t.length||(t.reverse(),$.each(t,function(e,t){o+='<i class="right tc-right icon divider"></i><a data-id="'+t.id+'" href="#" class="section">'+t.title+"</a>"})),n.length>0&&(o+='<i class="right tc-right icon divider"></i><div class="active section">'+n+"</div>"),r.html(o),r.find("a").fastClick(function(e){e.preventDefault(),i.openDirectory($(this).attr("data-id"))}),(t.length>0||n.length>0)&&($(e.findDOMNode(this.refs.gotoparentbutton)).show(),t.length>0&&(this.parentDirectoryId=t[t.length-1].id))},getCurrentDirectoryDetail:function(){var e=this;0==this.filters.did?e.updateBreadcrumbs([],""):new l({id:this.filters.did}).fetch({data:{object_id:this.props.object_id},success:function(t,n){e.updateBreadcrumbs(t.toJSON().parents,t.toJSON().title)}})},fileAppendHandler:function(e){this.state.items.push(e),this.forceUpdate()},fileUpdateHandler:function(e){for(var t=[],n=0;n<this.state.items.length;n++)e.id==this.state.items[n].id?t.push(e):t.push(this.state.items[n]);this.setState({items:t})},removeHandler:function(e){for(var t=[],n=0;n<this.state.items.length;n++)e.id!=this.state.items[n].id&&t.push(this.state.items[n]);this.setState({items:t})},unmountDirectoryAddFormHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.directoryadd))},unmountDirectoryEditFormHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.directoryedit))},unmountFileAddFormHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.fileadd))},unmountFileEditFormHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.fileedit))},getSelectedFileContent:function(){return this.refs.filepreview.getContent()},sortFiles:function(){if(null==this.filters.sort_by||""==this.filters.sort_by){var e=[],t=[];return $.each(this.state.items,function(n,a){1==a.is_directory?t.push(a):e.push(a)}),t.sort(function(e,t){return e.title.localeCompare(t.title)}),e.sort(function(e,t){return e.title.localeCompare(t.title)}),t.concat(e)}return this.state.items},gotoParent:function(e){e.preventDefault(),t.history.navigate("/file/index/did/"+this.parentDirectoryId,{trigger:!0})},setCurrentFileHandle:function(e){this.setState({currentfile:e})},closePreview:function(e){e.preventDefault(),this.state.currentfile.id>0&&this.setState({currentfile:{id:0}})},componentWillUnmount:function(){r.off("file:edit",this.editHandler),r.off("file:delete",this.deleteHandler),r.off("file:remove",this.removeHandler),r.off("file:append",this.fileAppendHandler),r.off("file:update",this.fileUpdateHandler),r.off("file:unmountdirectoryaddform",this.unmountDirectoryAddFormHandler),r.off("file:unmountdirectoryeditform",this.unmountDirectoryEditFormHandler),r.off("file:unmountfileaddform",this.unmountFileAddFormHandler),r.off("file:unmountfileeditform",this.unmountFileEditFormHandler),r.off("list:reload",this.loadData),r.off("tinymcefile:selectfile",this.setCurrentFileHandle),i.destroyPullToRefresh()},componentWillMount:function(){this.filters.did=this.props.did},componentDidMount:function(){this.loadData({}),this.getCurrentDirectoryDetail(),this.initSortable(),r.on("file:edit",this.editHandler),r.on("file:delete",this.deleteHandler),r.on("file:remove",this.removeHandler),r.on("file:append",this.fileAppendHandler),r.on("file:update",this.fileUpdateHandler),r.on("file:unmountdirectoryaddform",this.unmountDirectoryAddFormHandler),r.on("file:unmountdirectoryeditform",this.unmountDirectoryEditFormHandler),r.on("file:unmountfileaddform",this.unmountFileAddFormHandler),r.on("file:unmountfileeditform",this.unmountFileEditFormHandler),r.on("list:reload",this.loadData),r.on("tinymcefile:selectfile",this.setCurrentFileHandle),i.enablePullToRefresh(this.loadData)},componentDidUpdate:function(){},renderTableHeaderMobile:function(){return e.createElement("tr",null,e.createElement("th",{width:"50"},e.createElement("a",{className:"hide",title:c.t("gotoparentTooltip"),ref:"gotoparentbutton",href:"#",onClick:this.gotoParent},e.createElement("span",{className:"mitemheading mitemheadingnormal"},e.createElement("i",{className:"icon tc-left"}),c.t("to_parent_dir")))))},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",{width:"50",className:"center aligned"},e.createElement("a",{className:"hide",title:c.t("gotoparentTooltip"),ref:"gotoparentbutton",href:"#",onClick:this.gotoParent},e.createElement("i",{className:"icon tc-folder"}))),e.createElement("th",null,c.t("name")),e.createElement("th",{className:"right aligned"+(this.state.currentfile.id>0?" hide":"")},c.t("size")),e.createElement("th",{className:"col_datetime"+(this.state.currentfile.id>0?" hide":"")},e.createElement("a",{href:"javascript:void(0)",className:"sortable","data-sortby":"date_created"},c.t("date_created"))),e.createElement("th",{className:this.state.currentfile.id>0?" hide":"",style:{width:180}}))},render:function(){var t=this,a=this.sortFiles();return e.createElement("div",{className:"ui segments"},e.createElement("div",{className:"heading nopagination notab"},e.createElement("div",{className:"pull-left ui breadcrumb",ref:"breadcrumbs"}),e.createElement("div",{className:"pull-right"},e.createElement("div",{className:"pull-right headingbuttons"},e.createElement("a",{href:"#",onClick:this.addFileHandler},e.createElement("i",{className:"icon tc-upload"}),e.createElement("span",null,c.t("upload_file"))),e.createElement("a",{href:"#",onClick:this.addDirectoryHandler},e.createElement("i",{className:"icon tc-folder"}),e.createElement("span",null,c.t("create_dir")))))),e.createElement("div",{className:"ui grid",style:{clear:"both"}},e.createElement("div",{className:"ui "+(this.state.currentfile.id>0?" six wide column":" sixteen wide column"),style:{paddingTop:1,paddingBottom:0}},e.createElement("div",{style:{height:400,paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{ref:"filelist",className:n.tableclass()},e.createElement("thead",null,n.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,a.map(function(n,a){return e.createElement(m,{selected_id:t.state.currentfile.id,openDirectory:t.openDirectory,key:n.id,data:n})}))))),this.state.currentfile.id>0?e.createElement("div",{className:"ui ten wide column",style:{paddingTop:0,paddingBottom:0,paddingLeft:0,marginLeft:"-1em",marginTop:1,borderLeft:"1px solid #eee"}},e.createElement(p,{ref:"filepreview",closePreview:this.closePreview,key:this.state.currentfile.id,data:this.state.currentfile})):""),e.createElement("div",{ref:"directoryadd"}),e.createElement("div",{ref:"directoryedit"}),e.createElement("div",{ref:"fileadd"}),e.createElement("div",{ref:"fileedit"}))}});return y}),define("components/tinymceteamcropfilepicker",["react","pref","helper","eventbus","language/default","language/file","models/file","components/file/tinymce/list"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"TinymceTeamcropFilePickerComponent",getInitialState:function(){return{currentfile:{id:0}}},doInsert:function(){var t=this.refs.filelist.getSelectedFileContent();null!==this.editor&&(this.editor.insertContent(t),$(e.findDOMNode(this.refs.close)).trigger("click"))},markAsClose:!1,editor:null,openPopup:function(t){var n=this;this.markAsClose=!1,this.editor=t,$(e.findDOMNode(this.refs.modal)).modal({context:e.findDOMNode(this),closable:!1,onVisible:function(){},onHide:function(e){return!!n.markAsClose}}).modal("show")},doClose:function(){this.markAsClose=!0,$(e.findDOMNode(this.refs.modal)).modal("hide")},setCurrentFileHandle:function(e){this.setState({currentfile:e})},componentWillUnmount:function(){a.off("tinymcefile:selectfile",this.setCurrentFileHandle)},componentDidMount:function(){a.on("tinymcefile:selectfile",this.setCurrentFileHandle)},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui modal",ref:"modal"},e.createElement("div",{className:"content",style:{padding:0,minHeight:400}},e.createElement(s,{ref:"filelist",object_type:(new o).OBJECTTYPE_FILE_PERSONAL}),e.createElement("div",{className:"clear"})),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic button",ref:"close",onClick:this.doClose},i.t("close")),e.createElement("a",{className:"ui teal button"+(this.state.currentfile.id?"":" disabled"),href:"javascript: void(0)",ref:"submit",onClick:this.doInsert},r.t("do_insert")))))}});return l}),define("components/tinymce",["react","underscore","setting","components/tinymceteamcropfilepicker","models/file"],function(e,t,n,a,i){var r=["focusin","focusout","click","dblclick","mousedown","mouseup","mousemove","mouseover","beforepaste","paste","cut","copy","selectionchange","mouseout","mouseenter","mouseleave","keydown","keypress","keyup","contextmenu","dragend","dragover","draggesture","dragdrop","drop","drag","BeforeRenderUI","SetAttrib","PreInit","PostRender","init","deactivate","activate","NodeChange","BeforeExecCommand","ExecCommand","show","hide","ProgressState","LoadContent","SaveContent","BeforeSetContent","SetContent","BeforeGetContent","GetContent","VisualAid","remove","submit","reset","BeforeAddUndo","AddUndo","change","undo","redo","ClearUndos","ObjectSelected","ObjectResizeStart","ObjectResized","PreProcess","PostProcess","focus","blur"],o=r.map(function(e){
return"on"+e[0].toUpperCase()+e.substring(1)}),s=e.createClass({displayName:"TinyMCEComponent",hasattachment:!1,propTypes:{config:e.PropTypes.object,content:e.PropTypes.string},getDefaultProps:function(){return{rows:1,config:{},content:"",mention:{source:[]},autofocus:!1,bodyclass:"",name:"",toolbarlocation:"top",buttons:[],focusToInitHandle:function(e){}}},componentDidUpdate:function(){},componentWillMount:function(){this.id=this.props.id},componentDidMount:function(){if(this.props.autoLoad){this._isInit&&this._remove();var e=this;setTimeout(function(){e._init(e.props.config)},50)}},componentWillUnmount:function(){this._remove()},componentWillReceiveProps:function(e){t.isEqual(this.props.config,e.config)||this._init(e.config,e.content)},shouldComponentUpdate:function(e,n){return!t.isEqual(this.props.content,e.content)||!t.isEqual(this.props.config,e.config)},doInit:function(){this._isInit&&this._remove(),this._init(this.props.config)},_init:function(e,t){this._isInit&&this._remove();var n=this;n.getDOMNode().style.hidden="hidden";var a={skin_url:"/js/plugins/tinymce/skins/teamcrop",theme_url:"/js/plugins/tinymce/themes/modern",content_css:"/css/tinymce.css",entity_encoding:"raw",relative_urls:!1,remove_script_host:!0,document_base_url:"/",convert_urls:!1,selector:"#"+this.id,plugins:["advlist autolink autosave lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table directionality","emoticons template paste textcolor colorpicker textpattern autoresize mention placeholder"],external_plugins:{mention:"/js/plugins/tinymce/plugins/mention/plugin.min.js",placeholder:"/js/plugins/tinymce/plugins/placeholder/plugin.js"},forced_root_block:!1,force_br_newlines:!0,force_p_newlines:!1,toolbar:!1,menubar:!1,statusbar:!1,autoresize_min_height:24,autoresize_max_height:400,autoresize_bottom_margin:0},i=$.extend({},a,e);this.props.autofocus&&(i.auto_focus=this.id),this.props.bodyclass.length>0&&(i.body_class=this.props.bodyclass),i.setup=function(e){if(r.forEach(function(t,a){var i=n.props[o[a]];"function"==typeof i&&e.on(t,function(t){i(t,e)})}),e.on("init",function(a){if(t&&e.setContent(t),"bottom"==n.props.toolbarlocation){var i=$(a.target.editorContainer).find(">.mce-container-body >.mce-toolbar-grp"),r=$(a.target.editorContainer).find(">.mce-container-body >.mce-edit-area");i.detach().addClass("mce-toolbar-bottom").insertAfter(r),"object"!=typeof n.props.toolbarStyle||$.isEmptyObject(n.props.toolbarStyle)||i.css(n.props.toolbarStyle)}}),e.on("FullscreenStateChanged",function(e){1==e.state?$("#header").length&&$("#header").addClass("tinymcewithfullscreen"):$("#header").length&&$("#header").removeClass("tinymcewithfullscreen")}),n.props.buttons)for(var a=n.props.buttons,i=0;i<a.length;i++){var s=a[i];e.addButton(s.name,{text:s.text,tooltip:s.tooltip,icon:s.icon,subtype:s.subtype,style:s.style,classes:s.classes,onclick:s.onClick})}n.props.config.hasOwnProperty("toolbar")&&n.props.config.toolbar.indexOf("teamcropfilepicker")>=0&&e.addButton("teamcropfilepicker",{tooltip:"TC Image Uploader",icon:"image",onclick:function(t){n.refs.filepicker.openPopup(e)}})},i.mentions=n.props.mention,tinymce.init(i),n.getDOMNode().style.hidden="",this._isInit=!0,this.hasattachment&&this.initFileUpload()},_remove:function(){tinymce.EditorManager.execCommand("mceRemoveEditor",!0,this.id),this.hasattachment&&this._isInit&&($(e.findDOMNode(this.refs.fileinput)).uploadifive("destroy"),$(e.findDOMNode(this.refs.fileinput)).attr("style",""),$(e.findDOMNode(this.refs.file)).find("div").remove()),this._isInit=!1,this.forceUpdate()},_reset:function(){if(this._isInit){var t=this.getEditor();t.setContent(""),this.hasattachment&&$(e.findDOMNode(this.refs.fileinput)).uploadifive("clearQueue")}},getEditor:function(){return this._isInit?tinymce.get(this.id):null},openFileWindow:function(){$(e.findDOMNode(this.refs.fileinput)).parent().find("input:last-child").trigger("click")},initFileUpload:function(){(new i).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new i).OBJECTTYPE_MESSAGE,this.id,(new i).STATUS_ENABLE),$(e.findDOMNode(this)).find(".uploadifive-button").hide()},getFileList:function(){var t=[];return $(e.findDOMNode(this)).find(".attachedfileid").each(function(e){t.push($(this).attr("data-id"))}),t},restoreValue:function(e){var t=this.getEditor();t.setContent(e)},focusToInit:function(){var e=this;this._init(this.props.config),setTimeout(function(){var t=tinymce.get(e.id);e.props.focusToInitHandle(t)},200)},doFocus:function(){$(e.findDOMNode(this.refs.text)).focus()},openTeamcropFilePicker:function(){this.refs.filepicker.openPopup()},render:function(){var t=this.props.buttons;if(t.length>0)for(var n=0;n<t.length;n++){var i=t[n];if("attachment"==i.name){this.hasattachment=!0,t[n].onClick=this.openFileWindow;break}}return e.createElement("div",null,e.createElement("textarea",{rows:this.props.rows,onFocus:this.focusToInit,ref:"text",id:this.id,name:this.props.name,placeholder:this.props.placeholder,defaultValue:this.props.content}),this.hasattachment?e.createElement("div",{ref:"file"},e.createElement("input",{type:"file",ref:"fileinput",id:"ffile-"+this.id,name:"ffile",multiple:"multiple",className:"hide"})):"",this.props.config.hasOwnProperty("toolbar")&&this.props.config.toolbar.indexOf("teamcropfilepicker")>=0?e.createElement(a,{ref:"filepicker"}):"")}});return o.forEach(function(t){s.propTypes[t]=e.PropTypes.func}),s}),define("components/formfieldaction",["react","pref","language/default"],function(e,t,n){var a=e.createClass({displayName:"FormFieldActionComponent",getDefaultProps:function(){return{required:!0,leftwide:"four",rightwide:"twelve"}},componentDidMount:function(){},render:function(){return e.createElement("div",{className:"fields fieldaction"},e.createElement("div",{className:"field wide hideonsmall "+this.props.leftwide},this.props.required?e.createElement("p",{className:"requirebox"},"* : ",n.t("required")):""),e.createElement("div",{className:"field wide "+this.props.rightwide},this.props.children))}});return a}),define("components/blog/manage/add",["react","backbone","pref","helper","language/default","language/blog","models/blog","models/file","components/heading","components/tinymce","components/ajax-upload","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"BlogAddComponent",save:function(){var s=$(".ui.form",e.findDOMNode(this)),l=this.refs.files.getFiles().map(function(e){return e.id}),c=0,d=this.refs.cover.getFiles();d.length>0&&(c=d[0].id);var u={company_id:n.get("cid"),creator_id:n.get("uid"),title:e.findDOMNode(this.refs.title).value,status:e.findDOMNode(this.refs.status).value,content:this.refs.content.getEditor().getContent(),cover_id:c,file_id_list:l.length>0?l.join(","):""};s.addClass("loading"),(new o).save(u,{success:function(e){s.removeClass("loading"),a.showSuccess(i.t("insert_success")),t.history.navigate("blog/manage",{trigger:!0})},error:function(e,t){s.removeClass("loading");var n={};a.notifyErrorAndForm(t,r,"error",s,n)}})},componentDidMount:function(){$(e.findDOMNode(this.refs.title)).focus();var t=this;$(".ui.form",e.findDOMNode(this)).form({fields:{title:{identifier:"title",rules:[{type:"empty",prompt:r.t("error_title_required")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.refs.files.isUploading()||t.refs.cover.isUploading()?a.showError(r.t("error_file_uploading_waiting")):t.save()}})},render:function(){var t=new o,n=new s,a={menubar:!0,autoresize_min_height:150,autoresize_max_height:450,toolbar:"formatselect | bold italic underline | alignleft aligncenter alignright | bullist numlist | indent outdent | link unlink  teamcropfilepicker"};return e.createElement("div",{className:"ui segments"},e.createElement(l,{text:r.t("heading_manage"),link:"#blog/manage",subtext:i.t("insert")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("h2",null,r.t("heading_info")),e.createElement("div",null,r.t("heading_info_description"))),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight required"},e.createElement("label",null,r.t("title")),e.createElement("input",{ref:"title",name:"title"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four"},e.createElement("label",null,r.t("status")),e.createElement("select",{ref:"status"},t.getStatusList().map(function(t){return e.createElement("option",{key:t.code,value:t.code},t.text)})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,r.t("cover")),e.createElement(d,{className:"small",ref:"cover",id:"blog-cover",limit:1,objectSource:n.OBJECTTYPE_NEWS,fileSizeLimit:"4MB",fileType:["image/png","image/jpeg","image/jpg"]}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"twelve wide field"},e.createElement("label",null,r.t("content")),e.createElement(c,{ref:"content",id:"blog-add-content",config:a,autoLoad:!0}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"twelve wide field"},e.createElement("label",null,r.t("file_id_list")),e.createElement(d,{className:"tiny",ref:"files",id:"blog-files",objectSource:n.OBJECTTYPE_NEWS,fileSizeLimit:"10MB"}))))),e.createElement(u,null,e.createElement("button",{className:"ui teal button"},i.t("add"))))))}});return m}),define("components/formfieldactionright",["react","pref"],function(e,t){var n=e.createClass({displayName:"FormFieldActionRightComponent",getDefaultProps:function(){return{marginRight:20}},componentDidMount:function(){},render:function(){return e.createElement("div",{className:"pull-right",style:{marginRight:this.props.marginRight}},this.props.children)}});return n}),define("components/blog/manage/edit",["react","backbone","pref","helper","language/default","language/blog","models/blog","models/file","components/heading","components/tinymce","components/confirm","components/ajax-upload","components/formfieldaction","components/formfieldactionright"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"BlogAddComponent",save:function(){var t=$(".ui.form",e.findDOMNode(this)),s=this.refs.files.getFiles().map(function(e){return e.id}),l=0,c=this.refs.cover.getFiles();c.length>0&&(l=c[0].id);var d={company_id:n.get("cid"),creator_id:n.get("uid"),title:e.findDOMNode(this.refs.title).value,status:e.findDOMNode(this.refs.status).value,content:this.refs.content.getEditor().getContent(),cover_id:l,file_id_list:s.length>0?s.join(","):""};t.addClass("loading"),new o(this.props.data).save(d,{success:function(e,n){t.removeClass("loading"),a.showSuccess(i.t("update_success"))},error:function(e,n){t.removeClass("loading");var i={};a.notifyErrorAndForm(n,r,"error",t,i)}})},removeConfirmCancel:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.button_remove)).popup("hide")},removeConfirmApprove:function(n){n.preventDefault(),$(e.findDOMNode(this.refs.button_remove)).popup("hide");var s=$(".ui.form",e.findDOMNode(this));s.addClass("loading"),new o(this.props.data).destroy({success:function(e,n){s.removeClass("loading"),a.showSuccess(i.t("delete_success")),t.history.navigate("blog/manage",{trigger:!0})},error:function(e,t){s.removeClass("loading"),a.notifyError(t,r,"error")}})},componentDidMount:function(){$(e.findDOMNode(this.refs.title)).focus();var t=this;$(".ui.form",e.findDOMNode(this)).form({fields:{title:{identifier:"title",rules:[{type:"empty",prompt:r.t("error_title_required")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.refs.files.isUploading()||t.refs.cover.isUploading()?a.showError(r.t("error_file_uploading_waiting")):t.save()}}),$(e.findDOMNode(this.refs.button_remove)).popup({on:"click"})},render:function(){var t=new o,n=new s,a={menubar:!0,autoresize_min_height:150,autoresize_max_height:450,toolbar:"formatselect | bold italic underline | alignleft aligncenter alignright | bullist numlist | indent outdent | link unlink  teamcropfilepicker"};return e.createElement("div",{className:"ui segments"},e.createElement(l,{text:r.t("heading_manage"),link:"#blog/manage",subtext:i.t("update")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("h2",null,r.t("heading_info")),e.createElement("div",null,r.t("heading_info_description"))),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight required"},e.createElement("label",null,r.t("title")),e.createElement("input",{ref:"title",name:"title",defaultValue:this.props.data.title}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four"},e.createElement("label",null,r.t("status")),e.createElement("select",{ref:"status",defaultValue:this.props.data.status},t.getStatusList().map(function(t){return e.createElement("option",{key:t.code,value:t.code},t.text)})))),e.createElement("div",{className:"fields"},e.createElement("div",{ref:"field_cover",className:"four wide field"},e.createElement("label",null,r.t("cover")),e.createElement(u,{className:"small",ref:"cover",id:"blog-cover",limit:1,objectSource:n.OBJECTTYPE_NEWS,fileSizeLimit:"4MB",files:[this.props.data.cover_detail],fileType:["image/png","image/jpeg","image/jpg"]}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"twelve wide field"},e.createElement("label",null,r.t("content")),e.createElement(c,{ref:"content",id:"blog-add-content",content:this.props.data.content,config:a,autoLoad:!0}))),e.createElement("div",{className:"fields"},e.createElement("div",{ref:"field_files",className:"twelve wide field"},e.createElement("label",null,r.t("file_id_list")),e.createElement(u,{className:"tiny",ref:"files",id:"blog-files",objectSource:n.OBJECTTYPE_NEWS,files:this.props.data.file_detail,fileSizeLimit:"10MB"}))))),e.createElement(m,null,e.createElement("button",{className:"ui teal button"},i.t("save")),e.createElement(p,null,e.createElement("a",{ref:"button_remove",style:{cursor:"pointer"}},i.t("delete_this_field")),e.createElement("div",{className:"ui popup"},e.createElement(d,{onCancel:this.removeConfirmCancel,onConfirm:this.removeConfirmApprove})))))))}});return h}),define("components/table/updatebutton",["react","helper","language/default"],function(e,t,n){var a=e.createClass({displayName:"TableUpdateButtonComponent",getDefaultProps:function(){return{text:n.t("button_edit"),tooltip:n.t("button_edit_tooltip"),link:"javascript:void(0)",className:"",onClick:function(e){}}},componentDidMount:function(){},render:function(){return e.createElement("a",{href:this.props.link,onClick:this.props.onClick,style:{padding:"0 5px 0 5px"},title:this.props.tooltip,className:""+this.props.className},e.createElement("small",null,this.props.text))}});return a}),define("components/blog/manage/item",["react","eventbus","helper","language/default","language/blog","models/blog","models/user","components/table/updatebutton","components/datetime"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ProductCategoryComponent",getInitialState:function(){return{creator:{}}},loadObject:function(e,t){var a=$.Deferred();return t=n.strToInt(t),0>=t?(a.resolve({}),a.promise()):(new e({id:t}).fetch({success:function(e,t){a.resolve(t)},error:function(e,t){a.resolve({})}}),a.promise())},loadMoreData:function(){var e=this;$.when(this.loadObject(o,this.props.data.creator_id)).done(function(t){e.setState({creator:t})})},componentDidMount:function(){this.loadMoreData()},renderMobile:function(){var t=(new r).getStatus(this.props.data.status);return e.createElement("tr",null,e.createElement("td",null,e.createElement("div",{className:"mitemdotleft"},e.createElement("span",{className:"mitemdot mitemdot"+t.color})),e.createElement("div",{className:"mitemdotright"},e.createElement("a",{className:"mitemheading mitemheadingnormal",href:"#blog/edit/id/"+this.props.data.id},this.props.data.title))))},renderDesktop:function(){var t=(new r).getStatus(this.props.data.status);return e.createElement("tr",null,e.createElement("td",null,this.props.data.id),e.createElement("td",null,e.createElement("a",{title:a.t("update"),href:"#blog/edit/"+this.props.data.id},this.props.data.title)),e.createElement("td",null,this.props.data.slug),e.createElement("td",{className:"collapsing"},e.createElement("span",{className:"ui small simple label "+t.color},t.text)),e.createElement("td",{className:"collapsing"},this.state.creator.fullname),e.createElement("td",{className:"collapsing"},e.createElement(l,{ts:this.props.data.date_created})),e.createElement("td",{className:"collapsing"},e.createElement(s,{link:"#blog/detail/_s/id/"+this.props.data.id+"/"+this.props.data.slug,text:a.t("button_detail"),tooltip:a.t("detail")}),e.createElement(s,{link:"#blog/edit/"+this.props.data.id})))},render:function(){return n.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return c}),define("components/blog/modal",["react","language/default"],function(e,t){var n=e.createClass({displayName:"BlogModalComponent",componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({context:e.findDOMNode(this),onShow:function(){$("body").addClass("has-modal")},onHide:function(){$("body").removeClass("has-modal")}}).modal("show")},render:function(){return e.createElement("div",null,e.createElement("div",{ref:"modal",className:"ui modal"},e.createElement("div",{className:"header",style:{margin:0}},this.props.header),e.createElement("div",{className:"content"},this.props.children),e.createElement("div",{className:"actions"},e.createElement("a",{className:"ui basic tiny button cancel"},t.t("close")))))}});return n}),define("components/blog/screen/detail-meta",["react","backbone","eventbus","pref","helper","language/default","language/blog","models/user","components/datetime"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"BlogScreenReactionComponent",getInitialState:function(){return{creator:{},count_view:this.props.data.count_view||0,count_comment:this.props.data.count_comment||0}},upCountComment:function(e){e=i.strToInt(e),this.state.count_comment+=e,this.forceUpdate()},openViewedList:function(e){e.preventDefault(),n.trigger("blogscreendetail:opentimelineviewed")},focusToComment:function(e){e.preventDefault(),n.trigger("blogscreendetail:focuscomment")},loadObject:function(e,t){var n=$.Deferred();return t=i.strToInt(t),0>=t?(n.resolve({}),n.promise()):(new e({id:t}).fetch({success:function(e,t){n.resolve(t)},error:function(e,t){n.resolve({})}}),n.promise())},loadMoreData:function(){var e=this;$.when(this.loadObject(s,this.props.data.creator_id)).done(function(t,n){e.setState({creator:t})})},componentWillUnmount:function(){n.off("blogscreendetailmeta:upcountcomment",this.upCountComment)},componentDidMount:function(){n.on("blogscreendetailmeta:upcountcomment",this.upCountComment),this.loadMoreData()},render:function(){return e.createElement("div",{className:"ui small horizontal list blog-screen-detail-meta",style:{color:"#555",margin:0}},e.createElement("div",{className:"item"},e.createElement("a",{onClick:this.focusToComment,className:"content"},i.numberFormat(this.state.count_comment)," ",o.t("count_comment"))),e.createElement("div",{className:"item hideonsmall"},e.createElement("a",{onClick:this.openViewedList,className:"content"},i.numberFormat(this.state.count_view)," ",o.t("count_view"))),e.createElement("div",{className:"item"},e.createElement("div",{className:"content"},e.createElement("a",{className:"user",href:"#blog/_s/creator_id/"+this.props.data.creator_id},this.state.creator.fullname)," ",e.createElement("span",null,o.t("date_created_meta").toLowerCase())," ",e.createElement(l,{ts:this.props.data.date_created}))))}});return c}),define("components/blog/screen/widget/box",["react"],function(e){var t=e.createClass({displayName:"BlogScreenWidgetBoxComponent",getDefaultProps:function(){return{actions:[]}},render:function(){return e.createElement("div",{className:"blog-screen-widget"},e.createElement("div",{className:"ui header"},this.props.header),e.createElement("div",{className:"content"},this.props.children),$.isArray(this.props.actions)&&this.props.actions.length>0?e.createElement("div",{className:"actions"},this.props.actions):null)}});return t}),define("components/blog/screen/widget/related-item",["react","helper","eventbus","language/blog","language/default","models/file"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"BlogScreenWidgetRelatedItemComponent",render:function(){var n=new r(this.props.data.cover_detail),a="#blog/detail/_s/id/"+this.props.data.id+"/"+this.props.data.slug,i=n.isImage()?n.getThumbnail():"/imgs/blog-no-thumbnail.png";return e.createElement("div",{className:"item"},e.createElement("a",{href:a,className:"ui image",style:{backgroundImage:'url("'+i+'")'}}),e.createElement("div",{className:"content",style:{paddingLeft:".5em"}},e.createElement("a",{href:a,className:"ui small header",title:this.props.data.title},this.props.data.title),e.createElement("div",{className:"meta",style:{margin:0,fontSize:".8em"}},e.createElement("span",{className:"like"},e.createElement("i",{className:"tc-eye icon"}),t.numberFormat(this.props.data.count_view)),e.createElement("span",{className:"like"},e.createElement("i",{className:"tc-comments icon"}),t.numberFormat(this.props.data.count_comment)))))}});return o}),define("components/blog/screen/widget/related",["react","eventbus","pref","helper","language/default","language/blog","collections/blog","models/blog","components/blog/screen/widget/box","components/blog/screen/widget/related-item"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"BlogScreenWidgetRelatedComponent",getInitialState:function(){return{items:[]}},loadData:function(){var e=this,t={company_id:n.get("cid"),limit:6,status:(new s).STATUS_ENABLE,sort_type:"DESC"};switch(this.props.type){case"latest":t.sort_by="id";break;case"popular":t.sort_by="count_view"}(new o).fetch({data:t,success:function(t,n){var a=n.items.filter(function(t){return t.id!=e.props.current_id});a.length>5&&a.splice(5,a.length-5),e.setState({items:a})}})},reload:function(e){"related"==e&&this.loadData()},componentWillUnmount:function(){t.off("blogscreenwidget:reload",this.reload)},componentDidMount:function(){t.on("blogscreenwidget:reload",this.reload),this.loadData()},renderList:function(){return e.createElement("div",{className:"ui divided items"},this.state.items.map(function(t){return e.createElement(c,{key:t.id,data:t})}))},render:function(){return this.state.items.length<=0?null:e.createElement(l,{header:this.props.header},this.renderList())}});return d}),define("components/blog/screen/widget/viewed-item",["react","helper","eventbus","language/default","models/user","components/datetime"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"BlogScreenWidgetViewedItemComponent",getInitialState:function(){return{creator:{}}},loadObject:function(e,n){var a=$.Deferred();return n=t.strToInt(n),0>=n?(a.resolve({}),a.promise()):(new e({id:n}).fetch({success:function(e,t){a.resolve(t)},error:function(e,t){a.resolve({})}}),a.promise())},loadMoreData:function(){var e=this;$.when(this.loadObject(i,this.props.data.creator_id)).done(function(t){e.setState({creator:t})})},componentDidMount:function(){this.loadMoreData()},render:function(){var n=this.state.creator.fullname+" "+a.t("viewed").toLowerCase();return e.createElement("a",{title:n,className:"ui avatar image",style:{width:35,height:35}},e.createElement("img",{style:{width:"100%",height:"100%",margin:0},src:t.getAvatarPath(this.state.creator.avatar)}))}});return o}),define("components/blog/screen/widget/viewed",["react","eventbus","pref","helper","language/default","collections/blogview","components/blog/screen/widget/box","components/blog/screen/widget/viewed-item"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"BlogScreenWidgetViewedComponent",getDefaultProps:function(){return{limit:5}},getInitialState:function(){return{items:[],total:0}},loadData:function(){var e=this,t={company_id:n.get("cid"),limit:this.props.limit,blog_id:this.props.blog_id,sort_type:"DESC",sort_by:"id"};(new r).fetch({data:t,success:function(t,n){e.setState({items:n.items,total:n.total})}})},viewAllClick:function(e){e.preventDefault(),t.trigger("blogscreendetail:openlistviewed")},reload:function(e){"viewed"==e&&this.loadData()},componentWillUnmount:function(){t.off("blogscreenwidget:reload",this.reload)},componentDidMount:function(){t.on("blogscreenwidget:reload",this.reload),this.loadData()},renderList:function(){return e.createElement("div",{className:"ui images"},this.state.items.map(function(t){return e.createElement(s,{key:t.id,data:t})}))},renderActions:function(){return this.state.total<=this.props.limit?null:[e.createElement("a",{href:"",onClick:this.viewAllClick,key:"view_more"},i.t("view_all"))]},render:function(){return this.state.items.length<=0?null:e.createElement(o,{header:this.props.header,actions:this.renderActions()},this.renderList())}});return l}),define("components/blog/screen/widget/liked-item",["react","helper","eventbus","language/default","models/user","models/bloglike","components/datetime"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"BlogScreenWidgetLikedItemComponent",getInitialState:function(){return{creator:{}}},loadObject:function(e,n){var a=$.Deferred();return n=t.strToInt(n),0>=n?(a.resolve({}),a.promise()):(new e({id:n}).fetch({success:function(e,t){a.resolve(t)},error:function(e,t){a.resolve({})}}),a.promise())},loadMoreData:function(){var e=this;$.when(this.loadObject(i,this.props.data.creator_id)).done(function(t){e.setState({creator:t})})},componentDidMount:function(){this.loadMoreData()},render:function(){var n=(new r).getType(this.props.data.type);return e.createElement("div",{className:"event"},e.createElement("div",{className:"label"},e.createElement("img",{src:t.getAvatarPath(this.state.creator.avatar)})),e.createElement("div",{className:"content"},e.createElement("div",{className:"summary"},e.createElement("span",{className:"user"},this.state.creator.fullname)," ",n.textDisplay?n.textDisplay.toLowerCase():null)))}});return s}),define("components/blog/screen/widget/liked",["react","eventbus","pref","helper","language/default","collections/bloglike","components/blog/screen/widget/box","components/blog/screen/widget/liked-item"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"BlogScreenWidgetLikedComponent",getDefaultProps:function(){return{limit:5}},getInitialState:function(){return{items:[],total:0}},loadData:function(){var e=this,t={company_id:n.get("cid"),limit:this.props.limit,blog_id:this.props.blog_id,sort_type:"DESC",sort_by:"id"};(new r).fetch({data:t,success:function(t,n){e.setState({items:n.items,total:n.total})}})},viewAllClick:function(e){e.preventDefault(),t.trigger("blogscreendetail:openlistliked")},reload:function(e){"liked"==e&&this.loadData()},componentWillUnmount:function(){t.off("blogscreenwidget:reload",this.reload)},componentDidMount:function(){t.on("blogscreenwidget:reload",this.reload),this.loadData()},renderList:function(){return e.createElement("div",{className:"ui feed"},this.state.items.map(function(t){return e.createElement(s,{key:t.id,data:t})}))},renderActions:function(){return this.state.total<=this.props.limit?null:[e.createElement("a",{href:"",onClick:this.viewAllClick,key:"view_more"},i.t("view_all"))]},render:function(){return this.state.items.length<=0?null:e.createElement(o,{header:this.props.header,actions:this.renderActions()},this.renderList())}});return l}),define("components/blog/screen/timeline/liked-item",["react","helper","eventbus","language/default","models/user","models/bloglike","models/blog","components/datetime"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"BlogScreenWidgetLikedItemComponent",getInitialState:function(){return{creator:{},blog:{}}},loadObject:function(e,n){var a=$.Deferred();return n=t.strToInt(n),0>=n?(a.resolve({}),a.promise()):(new e({id:n}).fetch({success:function(e,t){a.resolve(t)},error:function(e,t){a.resolve({})}}),a.promise())},loadMoreData:function(){var e=this;$.when(this.loadObject(i,this.props.data.creator_id),this.loadObject(o,this.props.data.blog_id)).done(function(t,n){e.setState({creator:t,blog:n})})},componentDidMount:function(){this.loadMoreData()},render:function(){var n=(new r).getType(this.props.data.type),a={padding:"1em 0"};return this.props.isLast||(a.borderBottom="1px solid #e0e0e0"),e.createElement("div",{className:"event",style:a},e.createElement("div",{className:"label",style:{width:"2.5em",height:"2.5em",marginLeft:0}},e.createElement("img",{style:{width:"100%",height:"100%"},src:t.getAvatarPath(this.state.creator.avatar)})),e.createElement("div",{className:"content",style:{margin:0}},e.createElement("div",{className:"summary",style:{fontWeight:"normal"}},e.createElement("span",{className:"user"},this.state.creator.fullname)," ",n.textDisplay?n.textDisplay.toLowerCase():null," ",this.props.showBlogInfo?e.createElement("strong",null,this.state.blog.title):null),e.createElement("div",{className:"meta",style:{margin:0}},e.createElement("div",{className:"date"},e.createElement(s,{ts:this.props.data.date_created})))))}});return l}),define("components/blog/screen/timeline/liked",["react","eventbus","pref","helper","language/default","collections/bloglike","components/blog/screen/timeline/liked-item"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"BlogScreenTimelineLikedComponent",getInitialState:function(){return{items:[],currentpage:1,total:0,limit:10,isLoading:!0}},loadData:function(){var e=this;this.state.items=[];for(var n=0,a=this.state.currentpage,i=1;a>=i;i++)$.when(e.loadList(i)).done(function(t){e.state.items=e.state.items.concat(t.items),e.state.currentpage=t.currentpage,e.state.limit=t.limit,e.state.total=t.total}).always(function(){++n>=a&&(e.state.items.sort(function(e,t){return e.id<t.id?1:e.id>t.id?-1:0}),t.trigger("blogscreenhistoryliked:updatecountliked",e.props.type,e.state.total),e.state.isLoading=!1,e.forceUpdate())})},loadList:function(e){var t=$.Deferred();return(new r).fetch({data:{company_id:n.get("cid"),blog_id:this.props.blog_id,type:this.props.type,limit:this.state.limit,page:e||1,sort_by:"id",sort_type:"DESC"},success:function(e,n){t.resolve(n)},error:function(e,n){t.reject(n)}}),t.promise()},loadNextPage:function(n){n.preventDefault();var i=this;a.addLoader($(e.findDOMNode(this.refs.view_more_link))),$.when(i.loadList(this.state.currentpage+1)).done(function(e){i.state.items=i.state.items.concat(e.items),i.state.currentpage=e.currentpage,i.state.limit=e.limit,i.state.total=e.total,i.forceUpdate()}).always(function(){t.trigger("blogscreenhistoryliked:updatecountliked",i.props.type,i.state.total),a.removeLoader($(e.findDOMNode(i.refs.view_more_link)))})},componentDidMount:function(){this.loadData()},render:function(){var t=this;return e.createElement("div",{className:"ui feed"},this.state.isLoading?e.createElement("div",{className:"ui active inverted dimmer"},e.createElement("div",{className:"ui loader"})):null,this.state.items.map(function(n,a){var i=!1,r=!1;return 0==a&&(i=!0),a==t.state.items.length-1&&(r=!0),e.createElement(o,{key:n.id,isLast:r,isFirst:i,data:n})}),this.state.total/this.state.limit>this.state.currentpage?e.createElement("div",{className:"event"},e.createElement("a",{
ref:"view_more_link",href:"",onClick:this.loadNextPage},i.t("view_more"))):null)}});return s}),define("components/blog/screen/history/liked",["react","eventbus","pref","helper","language/default","models/bloglike","components/blog/modal","components/blog/screen/timeline/liked"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"BlogScreenHistoryLikedComponent",getDefaultProps:function(){return{type:0}},getInitialState:function(){var e=this,t=(new r).getTypeList().map(function(t){var n=$.extend({},t,{countLiked:0,isActive:e.props.type==t.code});return n});return t.unshift({text:i.t("all"),countLiked:0,code:0,icon:"tc-list",isActive:0==this.props.type}),{items:t}},updateCountLiked:function(e,t){var n=this;$.each(this.state.items,function(i){return e==this.code?(n.state.items[i].countLiked=a.strToInt(t),!1):void 0}),this.forceUpdate()},initTab:function(){$("> .item",e.findDOMNode(this.refs.tab)).tab("destroy"),$("> .item",e.findDOMNode(this.refs.tab)).not(".disabled").tab({context:e.findDOMNode(this)})},componentDidUpdate:function(){this.initTab()},componentWillUnmount:function(){t.off("blogscreenhistoryliked:updatecountliked",this.updateCountLiked)},componentDidMount:function(){t.on("blogscreenhistoryliked:updatecountliked",this.updateCountLiked),this.initTab()},renderList:function(){var t=this;return e.createElement("div",null,e.createElement("div",{ref:"tab",className:"ui pointing teal secondary fluid menu blog-screen-history-tab"},this.state.items.map(function(t){var n="item";return t.isActive&&(n+=" active"),n+=a.strToInt(t.countLiked)>0?" link":" disabled",e.createElement("div",{key:t.code,className:n,"data-tab":t.code},e.createElement("div",{className:"item-wrapper"},e.createElement("div",null,t.image?e.createElement("div",{className:"ui circular image",style:{width:30,height:30}},e.createElement("img",{src:t.image,style:{width:"100%",height:"100%"}})):e.createElement("div",{className:"ui teal circular label",style:{width:30,height:30,verticalAlign:"middle",overflow:"hidden",fontSize:15}},e.createElement("i",{className:t.icon}))),e.createElement("div",{className:"text"},e.createElement("span",{style:{marginRight:5}},t.text),"("+a.numberFormat(t.countLiked)+")")))})),e.createElement("div",null,this.state.items.map(function(n){var a="ui tab";return n.isActive&&(a+=" active"),e.createElement("div",{key:n.code,className:a,"data-tab":n.code},e.createElement(s,{blog_id:t.props.blog_id,type:n.code}))})))},render:function(){return this.state.items.length<=0?null:e.createElement(o,{header:this.props.header},this.renderList())}});return l}),define("components/blog/screen/history/viewed-item",["react","helper","eventbus","language/default","models/user","models/blog","components/datetime"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"BlogScreenWidgetViewedItemComponent",getInitialState:function(){return{creator:{},blog:{}}},loadObject:function(e,n){var a=$.Deferred();return n=t.strToInt(n),0>=n?(a.resolve({}),a.promise()):(new e({id:n}).fetch({success:function(e,t){a.resolve(t)},error:function(e,t){a.resolve({})}}),a.promise())},loadMoreData:function(){var e=this;$.when(this.loadObject(i,this.props.data.creator_id),this.loadObject(r,this.props.data.blog_id)).done(function(t,n){e.setState({creator:t,blog:n})})},componentDidMount:function(){this.loadMoreData()},render:function(){var n=this.state.creator.fullname+" "+a.t("viewed").toLowerCase();return n+=" "+a.t("viewed").toLowerCase()+" ",n+=this.state.blog.title,e.createElement("a",{title:n,className:"ui avatar image",style:{width:50,height:50}},e.createElement("img",{style:{width:"100%",height:"100%",margin:0},src:t.getAvatarPath(this.state.creator.avatar)}))}});return s}),define("components/blog/screen/history/viewed",["react","eventbus","pref","helper","language/default","collections/blogview","components/blog/modal","components/blog/screen/history/viewed-item"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"BlogScreenTimelineViewedComponent",getInitialState:function(){return{items:[],currentpage:1,total:0,limit:50,isLoading:!0}},loadData:function(){var e=this;this.state.items=[];for(var t=0,n=this.state.currentpage,a=1;n>=a;a++)$.when(e.loadList(a)).done(function(t){e.state.items=e.state.items.concat(t.items),e.state.currentpage=t.currentpage,e.state.limit=t.limit,e.state.total=t.total}).always(function(){++t>=n&&(e.state.items.sort(function(e,t){return e.id<t.id?1:e.id>t.id?-1:0}),e.state.isLoading=!1,e.forceUpdate())})},loadList:function(e){var t=$.Deferred();return(new r).fetch({data:{company_id:n.get("cid"),blog_id:this.props.blog_id,limit:this.state.limit,page:e||1,sort_by:"id",sort_type:"DESC"},success:function(e,n){t.resolve(n)},error:function(e,n){t.reject(n)}}),t.promise()},loadNextPage:function(t){t.preventDefault();var n=this,a=$(e.findDOMNode(this.refs.view_more_link));a.addClass("loading"),$.when(n.loadList(this.state.currentpage+1)).done(function(e){n.state.items=n.state.items.concat(e.items),n.state.currentpage=e.currentpage,n.state.limit=e.limit,n.state.total=e.total,n.forceUpdate()}).always(function(){a.removeClass("loading")})},componentDidMount:function(){this.loadData()},renderList:function(){return e.createElement("div",{className:"ui images"},this.state.isLoading?e.createElement("div",{className:"ui active inverted dimmer"},e.createElement("div",{className:"ui loader"})):null,this.state.items.map(function(t){return e.createElement(s,{key:t.id,data:t})}),this.state.total/this.state.limit>this.state.currentpage?e.createElement("a",{style:{borderRadius:"100%",padding:"12px 18px",margin:"0em 0.25rem 0.5rem",fontSize:25,verticalAlign:"middle"},ref:"view_more_link",title:i.t("view_more"),className:"ui basic button",onClick:this.loadNextPage},"+"):null)},render:function(){return this.state.items.length<=0?null:e.createElement(o,{header:this.props.header},this.renderList())}});return l}),define("components/filethumbnail",["react","setting","eventbus","helper","models/file"],function(e,t,n,a,i){var r=e.createClass({displayName:"FileThumbnailComponent",getDefaultProps:function(){return{data:{id:0,title:"",size_in_byte:0,gallery:[]},moreclass:""}},clickHandler:function(e){this.props.data.file_preview.length>0&&(e.preventDefault(),n.trigger("filepreview",this.props.data))},componentWillUnmount:function(){},componentDidMount:function(){a.initMyTip($(e.findDOMNode(this.refs.link)))},render:function(){var t=new i(this.props.data),n=this.props.data.title+" ("+a.nFormatter(this.props.data.size_in_byte)+"B)";return e.createElement("a",{ref:"link",className:"filethumbnailitem "+this.props.moreclass,href:t.getDownloadUrl(),onClick:this.clickHandler,target:"_blank",title:n},e.createElement("img",{src:t.getThumbnail()}),t.isImage()?"":e.createElement("span",{className:"meta"},this.props.data.title))},getThumbnailFromExtension:function(e){}});return r}),define("components/filethumbnailbigphoto",["react","setting","eventbus","helper","models/file"],function(e,t,n,a,i){var r=e.createClass({displayName:"FileThumbnailBigPhotoComponent",getDefaultProps:function(){return{data:{id:0,title:"",size_in_byte:0,gallery:[]},moreclass:""}},clickHandler:function(e){this.props.data.file_preview.length>0&&(e.preventDefault(),n.trigger("filepreview",this.props.data))},componentWillUnmount:function(){},componentDidMount:function(){},render:function(){var t=new i(this.props.data),n=this.props.data.title+" ("+a.nFormatter(this.props.data.size_in_byte)+"B)";return e.createElement("a",{className:"filethumbnailitem filethumbnailbig "+this.props.moreclass,href:t.getDownloadUrl(),onClick:this.clickHandler,target:"_blank",title:n},e.createElement("img",{src:t.getDownloadUrl()}))}});return r}),define("components/filestrip",["react","components/filethumbnail","components/filethumbnailbigphoto","models/file"],function(e,t,n,a){var i=e.createClass({displayName:"FileStripComponent",getDefaultProps:function(){return{enableRenderBigOnSinglePhoto:!0,files:[]}},componentDidMount:function(){},componentWillUnmount:function(){},renderThumbnail:function(){var n=this;return e.createElement("div",{className:"extra images"},this.props.files.map(function(a,i){return a.gallery=n.props.files,e.createElement(t,{data:a,key:a.id,moreclass:"thumbnailgrid"})}))},renderBigPhoto:function(){var t=this;return e.createElement("div",{className:"extra images"},this.props.files.map(function(a,i){return a.gallery=t.props.files,e.createElement(n,{data:a,key:a.id})}))},render:function(){var e=!1;if(1==this.props.files.length&&this.props.enableRenderBigOnSinglePhoto){var t=new a(this.props.files[0]);if(t.isImage())return e=!0,this.renderBigPhoto()}return e?void 0:this.renderThumbnail()}});return i}),define("components/blog/screen/reaction",["react","backbone","eventbus","pref","helper","language/default","language/blog","collections/bloglike","models/bloglike","components/datetime"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"BlogScreenDetailMetaComponent",getInitialState:function(){return{items:(new l).getTypeList(),likedData:{},count_like:this.props.data.count_like||0,count_view:this.props.data.count_view||0,count_comment:this.props.data.count_comment||0}},upCount:function(e,t,n){var a=this;$.each(this.state.items,function(n){return e==this.code?(a.state.items[n].count_liked+=i.strToInt(t),!1):void 0}),n&&this.forceUpdate()},doLike:function(e,t){var i=this,r={company_id:a.get("cid"),creator_id:a.get("uid"),blog_id:this.props.data.id,type:e},o=i.state.likedData.type;this.xhr&&this.xhr.abort(),t.addClass("loading"),this.xhr=new l(this.state.likedData).save(r,{success:function(e,t){i.state.likedData=t,i.upCount(o,-1),i.upCount(t.type,1),n.trigger("blogscreenwidget:reload","liked")},error:function(e,t){},complete:function(){t.removeClass("loading"),i.forceUpdate()}})},doDislike:function(e){var t=this;this.xhr&&this.xhr.abort();var a=t.state.likedData.type;e.addClass("loading"),this.xhr=new l(this.state.likedData).destroy({success:function(e,i){t.state.likedData={},t.upCount(a,-1),n.trigger("blogscreenwidget:reload","liked")},error:function(e,t){},complete:function(){e.removeClass("loading"),t.forceUpdate()}})},openListLiked:function(e,t){t.preventDefault(),t.stopPropagation(),n.trigger("blogscreendetail:openlistliked",this.props.data,e)},doLikeHandle:function(e,t){t.preventDefault(),t.stopPropagation();var n=$(t.currentTarget).parents(".ui.segment").eq(0);this.state.likedData.type==e?this.doDislike(n):this.doLike(e,n)},loadLikedData:function(){var e=$.Deferred(),t={company_id:a.get("cid"),creator_id:a.get("uid"),blog_id:this.props.data.id},n={};return(new l).fetch({data:t,success:function(e,t){t.items.length>0&&(n=t.items[0])},complete:function(){e.resolve(n)}}),e.promise()},loadSummary:function(){var e=$.Deferred(),t={company_id:a.get("cid"),blog_id:this.props.data.id},n={};return(new l).createRequest({action:"count",data:t,type:"get",success:function(e){n=e},complete:function(){e.resolve(n)}}),e.promise()},getSummaryForType:function(e,t){var n=0;return $.each(t,function(t,a){return t==e?(n=i.strToInt(a),!1):void 0}),n},loadData:function(){var e=this;$.when(this.loadLikedData(),this.loadSummary()).done(function(t,n){var a=e.state.items.slice();a.forEach(function(t,i){var r=e.getSummaryForType(t.code,n);a[i].count_liked=r}),e.setState({likedData:t,items:a})})},componentDidMount:function(){$(e.findDOMNode(this.refs.dropdown_like)).dropdown({action:"hide"}),this.loadData()},render:function(){var t=this;return new l,e.createElement("div",{className:"ui horizontal segments blog-screen-reaction",style:{borderWidth:0,margin:0}},this.state.items.map(function(n){var a=t.state.likedData.type==n.code;return e.createElement("div",{key:n.code,className:"ui center aligned segment "+(a?" active":"")},e.createElement("a",{onClick:t.doLikeHandle.bind(t,n.code),className:"image"},e.createElement("img",{src:n.image,className:"ui circular centerred image"}),a?e.createElement("span",{className:"icon"},e.createElement("i",{className:"tc-tick"})):null),e.createElement("div",{className:"link_view_more",onClick:t.openListLiked.bind(t,n.code)},e.createElement("span",null,n.text),i.strToInt(n.count_liked)>0?" ("+i.numberFormat(n.count_liked)+")":""))}))}});return d}),define("components/blog/screen/detail",["react","backbone","pref","helper","eventbus","role","language/default","language/blog","models/blog","models/file","components/blog/screen/detail-meta","components/blog/comment/list","components/blog/screen/widget/related","components/blog/screen/widget/viewed","components/blog/screen/widget/liked","components/blog/screen/history/liked","components/blog/screen/history/viewed","components/filestrip","components/blog/screen/reaction","components/heading"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y){var E=e.createClass({displayName:"BlogScreenDetailComponent",openModal:function(t){var n=e.cloneElement(t,{key:moment().valueOf()});e.render(n,e.findDOMNode(this.refs.modal_wrapper))},openListLiked:function(t,n){var a=$.isEmptyObject(t)?this.props.data.id:t.id;this.openModal(e.createElement(f,{blog_id:a,type:n,header:s.t("heading_widget_liked")}))},openListViewed:function(t){var n=$.isEmptyObject(t)?this.props.data.id:t.id;this.openModal(e.createElement(g,{blog_id:n,header:s.t("heading_widget_viewed")}))},focusComment:function(){this.refs.comment_list.focus()},componentWillUnmount:function(){i.off("blogscreendetail:openlistliked",this.openListLiked),i.off("blogscreendetail:openlistviewed",this.openListViewed),i.on("blogscreendetail:focuscomment",this.focusComment)},componentDidMount:function(){i.on("blogscreendetail:openlistliked",this.openListLiked),i.on("blogscreendetail:openlistviewed",this.openListViewed),i.on("blogscreendetail:focuscomment",this.focusComment)},render:function(){var t=this.props.data.content;"undefined"!=typeof window.emojione&&null!=window.emojione&&(t=window.emojione.shortnameToImage(t));var n=new c(this.props.data.cover_detail);return e.createElement("div",null,e.createElement(y,{text:s.t("heading"),link:"#blog",hidetab:!0,nomarginbottom:!0}),e.createElement("div",{className:"ui container blog-screen-detail",style:{paddingTop:"1em"}},e.createElement("div",{className:"ui relaxed stackable grid"},e.createElement("div",{className:"twelve wide column"},e.createElement("h1",null,this.props.data.title),e.createElement(d,{data:this.props.data}),e.createElement("div",{className:"ui fluid image",style:{marginTop:"1em"}},e.createElement("img",{src:n.getDownloadUrl()})),e.createElement("div",{style:{marginTop:"1em"},dangerouslySetInnerHTML:{__html:t}}),e.createElement("div",null,e.createElement(_,{enableRenderBigOnSinglePhoto:!1,files:this.props.data.file_detail})),e.createElement("div",{className:"ui section horizontal divider"},s.t("heading_like")),e.createElement(v,{data:this.props.data}),e.createElement("div",{style:{marginTop:"5em"},className:"ui section horizontal divider"},s.t("heading_comment")),e.createElement("div",null,e.createElement(u,{ref:"comment_list",blog_id:this.props.data.id,parent_id:0,limit:3}))),e.createElement("div",{className:"four wide column"},e.createElement(h,{header:s.t("heading_widget_liked"),blog_id:this.props.data.id}),e.createElement(p,{header:s.t("heading_widget_viewed"),blog_id:this.props.data.id}),e.createElement(m,{current_id:this.props.data.id,type:"latest",header:s.t("heading_widget_latest")}),e.createElement(m,{current_id:this.props.data.id,type:"popular",header:s.t("heading_widget_popular")})))),e.createElement("div",{ref:"modal_wrapper"}))}});return E}),define("components/blog/screen/history/box",["react","language/default"],function(e,t){var n=e.createClass({displayName:"BlogScreenTimelineBoxComponent",componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({context:e.findDOMNode(this),onShow:function(){$("body").addClass("has-modal")},onHide:function(){$("body").removeClass("has-modal")}}).modal("show")},render:function(){return e.createElement("div",null,e.createElement("div",{ref:"modal",className:"blog-screen-timeline ui modal"},e.createElement("div",{className:"header"},this.props.header),e.createElement("div",{className:"content"},this.props.children),e.createElement("div",{className:"actions"},e.createElement("a",{className:"ui basic tiny button cancel"},t.t("close")))))}});return n}),define("components/blog/screen/history/liked-item",["react","helper","eventbus","language/default","models/user","models/bloglike","models/blog","components/datetime"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"BlogScreenWidgetLikedItemComponent",getInitialState:function(){return{creator:{},blog:{}}},loadObject:function(e,n){var a=$.Deferred();return n=t.strToInt(n),0>=n?(a.resolve({}),a.promise()):(new e({id:n}).fetch({success:function(e,t){a.resolve(t)},error:function(e,t){a.resolve({})}}),a.promise())},loadMoreData:function(){var e=this;$.when(this.loadObject(i,this.props.data.creator_id),this.loadObject(o,this.props.data.blog_id)).done(function(t,n){e.setState({creator:t,blog:n})})},componentDidMount:function(){this.loadMoreData()},render:function(){var n=(new r).getType(this.props.data.type);return e.createElement("div",{className:"event"},e.createElement("div",{className:"label"},e.createElement("img",{src:t.getAvatarPath(this.state.creator.avatar)})),e.createElement("div",{className:"content"},e.createElement("div",{className:"summary"},e.createElement("span",{className:"user"},this.state.creator.fullname)," ",n.textDisplay?n.textDisplay.toLowerCase():null," ",e.createElement("strong",null,this.state.blog.title)),e.createElement("div",{className:"meta"},e.createElement("div",{className:"date"},e.createElement(s,{ts:this.props.data.date_created})))))}});return l}),define("components/blog/screen/list/horizontal-item-first",["react","helper","eventbus","language/blog","language/default","models/file","models/user","components/datetime"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"BlogScreenListHorizontalItemComponent",getInitialState:function(){return{creator:{}}},doFilterUser:function(e){e.preventDefault(),$.isFunction(this.props.doFilter)&&this.props.doFilter("creator_id",this.props.data.creator_id)},loadObject:function(e,n){var a=$.Deferred();return n=t.strToInt(n),0>=n?(a.resolve({}),a.promise()):(new e({id:n}).fetch({success:function(e,t){a.resolve(t)},error:function(e,t){a.resolve({})}}),a.promise())},loadMoreData:function(){var e=this;$.when(this.loadObject(o,this.props.data.creator_id)).done(function(t,n){e.setState({creator:t})})},componentDidMount:function(){this.loadMoreData()},render:function(){var n=new r(this.props.data.cover_detail),i="<div>"+this.props.data.content+"</div>",o=$(i).appendTo("body"),l=$.trim($(o).text());l.length>l.substring(0,100).length,"undefined"!=typeof window.emojione&&null!=window.emojione&&(l=window.emojione.shortnameToImage(l)),$(o).remove();var c="#blog/detail/_s/id/"+this.props.data.id+"/"+this.props.data.slug,d=n.isImage()?n.getThumbnail():"/imgs/blog-no-thumbnail.png";return e.createElement("div",{className:"item"},e.createElement("a",{href:c,className:"ui image",style:{backgroundImage:'url("'+d+'")'}}),e.createElement("div",{className:"content"},e.createElement("a",{href:c,className:"header",title:this.props.data.title},this.props.data.title),e.createElement("div",{className:"meta"},e.createElement("a",{className:"user",onClick:this.doFilterUser},this.state.creator.fullname),e.createElement("span",null,a.t("date_created_meta").toLowerCase()),e.createElement("span",{className:"date"},e.createElement(s,{ts:this.props.data.date_created}))),e.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:l}}),e.createElement("div",{className:"ui divider",style:{margin:".5em 0"}}),e.createElement("div",{className:"extra"},e.createElement("div",{className:""},e.createElement("span",{className:"like"},t.numberFormat(this.props.data.count_view)," ",a.t("count_view")),"   ",e.createElement("span",{className:"like"},t.numberFormat(this.props.data.count_comment)," ",a.t("count_comment"))),e.createElement("div",{style:{textAlign:"right"}}))))}});return l}),define("components/blog/screen/list/horizontal-item",["react","helper","eventbus","language/blog","language/default","models/file","models/user","components/datetime"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"BlogScreenListHorizontalItemComponent",getInitialState:function(){return{creator:{}}},doFilterUser:function(e){e.preventDefault(),$.isFunction(this.props.doFilter)&&this.props.doFilter("creator_id",this.props.data.creator_id)},loadObject:function(e,n){var a=$.Deferred();return n=t.strToInt(n),0>=n?(a.resolve({}),a.promise()):(new e({id:n}).fetch({success:function(e,t){a.resolve(t)},error:function(e,t){a.resolve({})}}),a.promise())},loadMoreData:function(){var e=this;$.when(this.loadObject(o,this.props.data.creator_id)).done(function(t,n){e.setState({creator:t})})},componentDidMount:function(){this.loadMoreData()},render:function(){var n=new r(this.props.data.cover_detail),i="#blog/detail/_s/id/"+this.props.data.id+"/"+this.props.data.slug,o=n.isImage()?n.getThumbnail():"/imgs/blog-no-thumbnail.png";return e.createElement("div",{className:"item"},e.createElement("a",{href:i,className:"ui rounded image",style:{backgroundImage:'url("'+o+'")'}}),e.createElement("div",{className:"content"},e.createElement("a",{href:i,className:"header",title:this.props.data.title},this.props.data.title),e.createElement("div",{className:"ui small list",style:{margin:".5em 0 0"}},e.createElement("div",{className:"item"},e.createElement("i",{className:"icon tc-user"}),e.createElement("a",{className:"content",onClick:this.doFilterUser},this.state.creator.fullname)),e.createElement("div",{className:"item"},e.createElement("i",{className:"icon tc-clock"}),e.createElement("div",{className:"content"},e.createElement(s,{ts:this.props.data.date_created}))),e.createElement("div",{className:"item"},e.createElement("i",{className:"icon tc-eye"}),e.createElement("div",{className:"content"},t.numberFormat(this.props.data.count_view)," ",a.t("count_view"))),e.createElement("div",{className:"item"},e.createElement("i",{className:"icon tc-comments"}),e.createElement("div",{className:"content"},t.numberFormat(this.props.data.count_comment)," ",a.t("count_comment"))))))}});return l}),define("components/blog/screen/list/horizontal",["react","components/blog/screen/list/horizontal-item"],function(e,t){var n=e.createClass({displayName:"BlogScreenListHorizontalComponent",getDefaultProps:function(){return{columns:"two",rows:"two"}},render:function(){var n=this,a="ui items blog-screen-list-horizontal ";return a+=this.props.columns,a+="-column ",a+=this.props.rows,a+="-row ",e.createElement("div",{className:a},this.props.items.map(function(a){return e.createElement(t,{key:a.id,doFilter:n.props.doFilter,data:a})}))}});return n}),define("components/blog/screen/list/vertical-item",["react","helper","eventbus","language/blog","language/default","models/file"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"BlogScreenListVerticalItemComponent",componentDidMount:function(){$(e.findDOMNode(this.refs.image)).dimmer({on:"hover"})},render:function(){var n=new r(this.props.data.cover_detail),o="<div>"+this.props.data.content+"</div>",s=$(o).appendTo("body"),l=$.trim($(s).text());l.length>l.substring(0,100).length,$(s).remove();var c="#blog/detail/_s/id/"+this.props.data.id+"/"+this.props.data.slug,d=n.isImage()?n.getThumbnail():"/imgs/blog-no-thumbnail.png";return e.createElement("div",{className:"ui card"},e.createElement("div",{ref:"image",className:"blurring dimmable image",style:{backgroundImage:'url("'+d+'")'}},e.createElement("div",{className:"ui dimmer"},e.createElement("div",{className:"content"},e.createElement("div",{className:"center"},e.createElement("a",{href:c,className:"ui primary button"},i.t("view_more")))))),e.createElement("div",{className:"content"},e.createElement("a",{href:c,className:"header"},this.props.data.title),e.createElement("div",{className:"meta"},e.createElement("div",{className:"author"}),e.createElement("div",{className:"date"})),e.createElement("div",{className:"description"},l)),e.createElement("div",{className:"extra content"},e.createElement("span",null,t.numberFormat(this.props.data.count_view)," ",a.t("count_view")),"    ",e.createElement("span",null,t.numberFormat(this.props.data.count_comment)," ",a.t("count_comment"))))}});return o}),define("components/blog/screen/list/vertical",["react","components/blog/screen/list/vertical-item"],function(e,t){var n=e.createClass({displayName:"BlogScreenListVerticalComponent",render:function(){return e.createElement("div",{className:"ui link stackable three cards blog-screen-list-vertical"},this.props.items.map(function(n){return e.createElement(t,{key:n.id,data:n})}))}});return n}),define("components/semantic-datepicker",["react","language/daterangepicker","eventbus"],function(e,t,n){var a=e.createClass({displayName:"SemanticDatePickerComponent",getDefaultProps:function(){return{options:{},icon:"",iconPosition:"left",className:"",onShow:function(){},onShowCalendar:function(){},callBack:function(){console.log("Daterange picker init but never using callback function!")}}},getDatePicker:function(){return $(e.findDOMNode(this.refs.bootstrap_datepicker_input)).data("daterangepicker")},setDateRange:function(e,t){this.getDatePicker().setStartDate(e),this.getDatePicker().setEndDate(t),this.updateInput()},setStartDate:function(e){this.getDatePicker().setStartDate(e),this.updateInput()},setEndDate:function(e){this.getDatePicker().setEndDate(e),this.updateInput()},show:function(){$(e.findDOMNode(this.refs.bootstrap_datepicker_input)).trigger("click")},updateInput:function(){var e=this.getDatePicker(),t=e.format,n=e.startDate.format(t),a=e.endDate.format(t),i=e.separator,r=this.props.options.singleDatePicker||!1,o="";o=r?a:n+i+a,$(e.element).val(o),""!=o&&$(e.element).prop({size:o.length})},componentDidMount:function(){var n=this,a={separator:" to ",applyLabel:t.t("applyLabel"),cancelLabel:t.t("cancelLabel"),fromLabel:t.t("fromLabel"),toLabel:t.t("toLabel"),customRangeLabel:t.t("customRangeLabel"),daysOfWeek:[t.t("daysOfWeekSun"),t.t("daysOfWeekMon"),t.t("daysOfWeekTue"),t.t("daysOfWeekWed"),t.t("daysOfWeekThu"),t.t("daysOfWeekFri"),t.t("daysOfWeekSat")],monthNames:[t.t("monthNamesJan"),t.t("monthNamesFeb"),t.t("monthNamesMar"),t.t("monthNamesApr"),t.t("monthNamesMay"),t.t("monthNamesJun"),t.t("monthNamesJul"),t.t("monthNamesAug"),t.t("monthNamesSep"),t.t("monthNamesOct"),t.t("monthNamesNov"),t.t("monthNamesDec")],firstDay:1},i=!0;this.props.options.hasOwnProperty("autoUpdateInput")&&(i=this.props.options.autoUpdateInput);var r=$.extend({},this.props.options,{autoUpdateInput:i,locale:a});$(e.findDOMNode(n.refs.bootstrap_datepicker_input)).daterangepicker(r,this.props.callBack);var o=this.getDatePicker(),s="undefined"==typeof r.readonly||r.readonly;$(o.element).prop({readonly:s}),i&&this.updateInput(),$(o.element).on("show.daterangepicker",this.props.onShow).on("hide.daterangepicker",this.props.onHide).on("showCalendar.daterangepicker",this.props.onShowCalendar).on("hideCalendar.daterangepicker",this.props.onHideCalendar).on("apply.daterangepicker",this.props.onApply).on("cancel.daterangepicker",this.props.onCancel)},render:function(){return e.createElement("div",{ref:"bootstrap_datepicker",style:{marginRight:0},className:"ui "+this.props.iconPosition+" "+this.props.className+" icon input bootstrap_datepicker_wrapper"},e.createElement("input",{ref:"bootstrap_datepicker_input",type:"text",name:this.props.options.identifier}),e.createElement("i",{className:"icon tc-calendar"}))}});return a}),define("components/canlendar-tag",["react","pref","components/semantic-datepicker"],function(e,t,n){var a=e.createClass({displayName:"TagComponent",canlendarOptions:{format:"DD/MM/YYYY",singleDatePicker:!0,showDropdowns:!0,opens:"left"},getDefaultProps:function(){return{max:200,defaultText:"",defaultTag:""}},setValue:function(t){if(t.length>0){for(var n=[],a=0;a<t.length;a++)n.push(t[a].toString());$(e.findDOMNode(this.refs["date-tag"])).dropdown("set selected",n)}else""!=t&&$(e.findDOMNode(this.refs["date-tag"])).dropdown("set selected",t)},getValue:function(){var t=[];return""!=$(e.findDOMNode(this.refs["date-tag"])).dropdown("get value")&&(t=$(e.findDOMNode(this.refs["date-tag"])).dropdown("get value").split(",")),t},componentDidMount:function(){var t=this;if($(e.findDOMNode(t.refs["date-tag"])).dropdown({showOnFocus:!1,allowAdditions:!0,maxSelections:t.props.max}),$(e.findDOMNode(t.refs["date-tag"])).on("click",function(){t.refs.canlendar.show()}),$(e.findDOMNode(t.refs["date-tag"])).on("click",".ui.label",function(e){e.stopPropagation(),console.log("a")}),""!=t.props.defaultTag){var n=t.props.defaultTag.split(",");t.setValue(n)}},onSelectDate:function(t,n,a){var i=this,r=t.format("DD/MM/YYYY"),o=$(e.findDOMNode(i.refs["date-tag"])).dropdown("get value");""!=o&&(o+=","),o+=r,$(e.findDOMNode(i.refs["date-tag"])).dropdown("set selected",o.split(","))},render:function(){return e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item date-tags"},e.createElement("div",{className:"ui fluid multiple search selection dropdown",ref:"date-tag",style:{zIndex:2}},e.createElement("input",{name:"tags",type:"hidden",key:moment().unix()}),e.createElement("div",{className:"default text"},this.props.defaultText),e.createElement("div",{className:"menu"})),e.createElement(n,{ref:"canlendar",options:this.canlendarOptions,callBack:this.onSelectDate}))}});return a}),define("components/checkbox",["react"],function(e){var t=e.createClass({displayName:"CheckboxComponent",getDefaultProps:function(){return{label:"",id:"checkbox",value:"",randomid:(new Date).getTime()}},getSpecificId:function(){return this.props.id+"-"+this.props.randomid},componentDidMount:function(){$("#"+this.getSpecificId()).checkbox()},getValue:function(){var e="";return $("#"+this.getSpecificId()+" input").is(":checked")&&(e=this.props.value),e},render:function(){var t=this.getSpecificId();return e.createElement("div",{className:"field"},e.createElement("div",{className:"ui checkbox",id:t},e.createElement("input",{type:"checkbox",tabindex:"0",ref:"checkbox",value:this.props.value}),e.createElement("label",null,this.props.label)))}});return t}),define("components/checkboxtoggle",["react"],function(e){var t=e.createClass({displayName:"SelectStatusComponent",getDefaultProps:function(){return{name:"toggle",onText:"",offText:"",on:!1}},componentDidMount:function(){var t=this,n=this.props.onText,a=this.props.offText;""==a&&(a=n),$(e.findDOMNode(t)).checkbox({onChange:function(){$(e.findDOMNode(t)).checkbox("is checked")?$(e.findDOMNode(t.refs.text)).html(n):$(e.findDOMNode(t.refs.text)).html(a)}}),this.props.on?$(e.findDOMNode(this)).checkbox("check"):$(e.findDOMNode(this)).checkbox("uncheck")},render:function(){var t=this.props.onText,n=this.props.offText;""==n&&(n=t);var a=this.props.on?t:n;return e.createElement("div",{className:"ui toggle checkbox"},e.createElement("input",{type:"checkbox",name:this.props.name}),e.createElement("label",{ref:"text"},a))}});return t}),define("components/select-status",["react","language/default"],function(e,t){var n=e.createClass({displayName:"SelectStatusComponent",getDefaultProps:function(){return{name:"status",placeholder:"----",value:""}},componentDidMount:function(){$(this.getDOMNode()).dropdown({fullTextSearch:!0,onChange:this.props.onChange,message:{noResults:t.t("search_no_result")}}).dropdown("set selected",this.props.value.toString())},render:function(){return e.createElement("div",{className:"ui "+this.props.className+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},this.props.data.map(function(t){return e.createElement("div",{className:"item",
key:t.code,"data-value":t.code},t.text)})))}});return n}),define("components/checkin/add-item",["react","backbone","helper","pref","language/checkin","language/default","models/checkin","models/office","components/select-status"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"CheckInAddItemComponent",componentDidMount:function(){this.props.office<=0?t.history.navigate("checkin/add",{trigger:!0}):this.setOffice(this.props.office)},setOffice:function(t){var n=this;new s({id:t}).fetch({nocache:!0,success:function(t,a){var i=$(e.findDOMNode(n.refs.officename)).html();$(e.findDOMNode(n.refs.officename)).html(a.name+" "+i)}})},return:function(){this.props.setoffice(0)},render:function(){return e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"required ten  wide field"},e.createElement("label",{ref:"officename"},e.createElement("a",{href:"#checkin/add",onClick:self.return},"dsada")),e.createElement("input",{name:"name",type:"text"})),"1"),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required ten  wide field"},e.createElement("label",null,i.t("content")),e.createElement("textarea",{id:"tinymceinputcheckin",name:"content"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("status")),e.createElement(l,{key:a.get("uid"),ref:"status",data:(new o).getStatusList(),value:(new o).STATUS_ENABLE}))))}});return c}),define("components/select-office",["react","pref","cacheddata","language/default","collections/office","models/office"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"SelectOfficeComponent",getDefaultProps:function(){return{name:"office_id",value:0,placeholder:"----"}},getInitialState:function(){return{items:[]}},componentDidMount:function(){var e=this;$(this.getDOMNode()).dropdown({fullTextSearch:!0,message:{noResults:a.t("search_no_result")},onShow:e.props.onShow,onHide:e.props.onHide,onChange:e.props.onChange}),this._loadData()},componentDidUpdate:function(){$(this.getDOMNode()).dropdown("refresh").dropdown("set selected",this.props.value)},_loadData:function(){var e=(new r).cacheName,t=n.get(e);void 0===t?this._loadDataLive(1):this.setState({items:t().get()})},_loadDataLive:function(e){var n=this;$(this.getDOMNode()).addClass("loading"),(new i).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,status:(new r).STATUS_ENABLE,page:e},success:function(e,t){n.setState({items:n.state.items.concat(t.items)}),Math.ceil(t.total/t.limit)>t.currentpage&&n._loadDataLive(t.currentpage+1)},complete:function(){$(n.getDOMNode()).removeClass("loading")}})},render:function(){return e.createElement("div",{className:"ui "+this.props.className+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},this.state.items.map(function(t){return e.createElement("div",{key:t.id,className:"item","data-value":t.id},t.name)})))}});return o}),define("components/checkin/add-select-office",["react","backbone","helper","pref","language/checkin","language/default","models/checkin","components/select-office"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"CheckInAddSelectOfficeComponent",setOffice:function(e){this.props.setoffice(e)},render:function(){var t=this;return e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four  wide field"},e.createElement("label",null,i.t("office")),e.createElement(s,{ref:"select-office",onChange:t.setOffice}))))}});return l}),define("components/checkin/select-work-tracking-range",["react","pref","eventbus","language/default","collections/worktrackingrange","models/office"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"SelectOfficeComponent",getDefaultProps:function(){return{name:"work_tracking_range_id",office_id:0,value:0,items:[],placeholder:"----"}},getInitialState:function(){return{items:[]}},componentDidMount:function(){},componentDidUpdate:function(){var t=this;$(e.findDOMNode(this.refs.rangelist)).find(".ui.radio.checkbox").checkbox("set unchecked"),$(e.findDOMNode(this.refs.rangelist)).find(".ui.radio.checkbox").checkbox({onChange:function(){var a=$(e.findDOMNode(t.refs.rangelist)).find("input:checked").attr("data-value"),i=$(e.findDOMNode(t.refs.rangelist)).find("input:checked").next().text();n.trigger("checkin:selectschedule",a),n.trigger("checkin:updaterangenane",i)}})},render:function(){var t=this.state.items;return this.props.items.length&&(t=this.props.items),e.createElement("div",{ref:"rangelist"},t.map(function(t,n){return e.createElement("span",null,e.createElement("div",{className:"ui radio checkbox"},e.createElement("input",{type:"radio",name:"rangelist","data-value":t.id}),e.createElement("label",null,t.name)),e.createElement("div",{className:"clear"}))}))}});return o}),define("components/checkin/select-schedule-office",["react","backbone","helper","pref","eventbus","querystring","language/checkin","language/default","models/workschedule","collections/workschedule","collections/worktrackingrange","collections/office","components/select-office","components/checkin/select-work-tracking-range"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"CheckinSelectScheduleOfficeComponent",getDefaultProps:function(){return{hide:!1}},getInitialState:function(){return{schedulelist:[],RangeList:[],OfficeList:[]}},setOffice:function(e){e>0&&(a.set("checkin_last_office",e),i.trigger("checkin:selectoffice",e,this.state.OfficeList[e],0))},setSchedule:function(e){var t=this;e>0&&this.state.RangeList.map(function(n,a){n.id==e&&i.trigger("checkin:selectoffice",n.office_id,t.state.OfficeList[n.office_id],e)})},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},loadSchedule:function(e){var t=this;n.showLoader();var i=this.formatTime(moment.unix(moment().unix()).format("D/MM/YYYY"),!0),r={company_id:a.get("cid"),limit:50,page:e,sort_by:"officeid",sort_type:"DESC",position:-1,user_id:a.get("uid"),status:(new l).STATUS_REVIEWED,date_scheduled:i};(new c).fetch({data:r,success:function(n,a){var i=t.state.schedulelist;1==e&&(i=[]),i=i.concat(a.items),t.setState({schedulelist:i}),0==a.total&&t.selectDefaultOffice(),Math.ceil(a.total/a.limit)>a.currentpage?t.loadSchedule(a.currentpage+1):t.loadRange()},complete:function(){n.hideLoader()}})},selectDefaultOffice:function(){var e=parseInt(a.get("checkin_last_office"));e>0&&this.setOffice(e)},loadRange:function(){var e=this;if(e.state.schedulelist.length){var t=[];e.state.schedulelist.map(function(e,n){t.push(e.work_tracking_range_id)}),t=$.unique(t),(new d).getFromIdList({ids:t,success:function(t){e.setState({RangeList:t.items}),e.loadOffice()}})}},loadOffice:function(){var e=this;if(e.state.RangeList.length){var t=[];e.state.RangeList.map(function(e,n){t.push(e.office_id)}),t=$.unique(t),(new u).getFromIdList({ids:t,success:function(t){var a={};t.items.map(function(e,t){a[e.id]=e.name});var i=[];e.state.RangeList.map(function(e,t){e.name=a[e.office_id]+" - "+e.name+" ("+e.time_start+" - "+n.formatTimeEndWorkRange(e.time_end)+")",i.push(e)}),e.setState({RangeList:i,OfficeList:a})}})}},componentDidMount:function(){i.on("checkin:selectschedule",this.setSchedule)},componentWillUnmount:function(){i.off("checkin:selectschedule",this.setSchedule)},componentWillMount:function(){this.loadSchedule(1)},render:function(){var t=this,n=0;return t.state.schedulelist.length||(n=1),e.createElement("div",{className:"fields",style:{display:this.props.hide?"none":""}},e.createElement("div",{className:"required four  wide field",style:{display:0==n?"none":""}},e.createElement("label",null,o.t("office")," "),e.createElement(m,{ref:"select-office",onChange:t.setOffice})),e.createElement("div",{className:"required eight  wide field",style:{display:1==n?"none":""}},e.createElement("label",null,o.t("workschedule")," "),e.createElement(p,{ref:"select-range",onChange:t.setSchedule,items:t.state.RangeList})))}});return h}),define("components/checkin/add",["react","backbone","helper","pref","eventbus","querystring","language/checkin","language/default","models/checkin","models/office","models/worktrackingrange","models/employee","models/file","collections/checkin","components/checkin/add-select-office","components/checkin/add-item","components/select-office","components/checkin/select-schedule-office","components/heading","components/formfieldaction","collections/worktrackingrange"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E){var b=e.createClass({displayName:"CheckInAddComponent",getInitialState:function(){return{models:[],modeltracking:{},selectrangeName:"",office:0,type:0,range:0,myoffice:0}},setOffice:function(e,t,n){e>0&&(this.setState({office:e,office_name:t,range:n}),0==n&&this._getWokingrange(e),this.doWebcamInit())},isWebcamLoadSuccess:!0,checkInAddHandler:function(){var i=$(e.findDOMNode(this));i.addClass("loading");var r=$(e.findDOMNode(this.refs["select-range"])).dropdown("get value");this.state.range>0&&(r=this.state.range);var s=this,c="checkin",d=$('[name="note"]',i).val(),u="",m=0,p=0,h=r,f=o.t("check_in_success");$.isEmptyObject(this.state.modeltracking)||(c="checkout",f=o.t("check_out_success"),h=this.state.modeltracking.worktracking_range_id,d=this.state.modeltracking.detail.check_in_note,u=$('[name="note"]',i).val(),m=this.state.modeltracking.allow_late,p=this.state.modeltracking.allow_early);var g=$(e.findDOMNode(this.refs.fileid)).val();(new l).save({company_id:a.get("cid"),creator_id:a.get("uid"),worktracking_range_id:h,office_id:s.state.office,check_in_source:(new l).SOURCE_WEB,file_id:g,type:c,allow_late:m,allow_early:p,check_in_note:d,check_out_note:u},{success:function(e){n.showSuccess(f),t.history.navigate("checkin",{trigger:!0})},error:function(e,t){n.notifyError(t,o,"error_add")},complete:function(){i.removeClass("loading")}})},_save:function(){var t=$(e.findDOMNode(this.refs.webcamdatauri)).val();0==t.length?this.checkInAddHandler():this.updateWebcamPhotoHandler()},checkCheckIn:function(){var e=this;$("#body-loader").addClass("active");var t={company_id:a.get("cid"),creator_id:a.get("uid"),status:(new l).STATUS_PENDING,limit:1,page:r.get("page")||1,can_checkout:!0,date_more:moment().subtract(1,"days").format("YYYYMMDD")};(new p).fetch({data:t,success:function(t,n){n.items.length>0&&(e.setState({office:n.items[0].office_id,modeltracking:n.items[0]}),e._getWokingrange(n.items[0].office_id))},complete:function(){$("#body-loader").removeClass("active")}})},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},resetOffice:function(t){$(e.findDOMNode(this.refs.warningtext)).removeClass("visible"),this.setState({office:0})},setOfficeName:function(t){var n=this;new c({id:t}).fetch({nocache:!0,success:function(t,a){$(e.findDOMNode(n.refs.officename)).html(a.name)}})},_getWokingrange:function(e){var t=this;$("#body-loader").addClass("active");var i={company_id:a.get("cid"),office_id:e,limit:50,is_not_deleted:1,status:(new d).STATUS_ENABLE,sort_by:"display_order",sort_type:"ASC"};(new E).fetch({data:i,success:function(e,i){i.total>0?t.setState({models:e.models}):(n.showError(o.t("error_not_found_range_for_current_office")),a.set("checkin_last_office",0),t.resetOffice())},complete:function(){$("#body-loader").removeClass("active")}})},doWebcamInit:function(){var t=this;n.isPhonegap()||n.isSmallScreen()||(Webcam.set({width:240,height:160,dest_width:240,dest_height:160,image_format:"jpeg",jpeg_quality:80,force_flash:!1,flip_horiz:!0,fps:30,flashNotDetectedText:o.t("error_webcamjs_flashnotfound")}),Webcam.on("error",function(n){n.indexOf("Adobe Flash Player")>=0&&(alert(o.t("error_webcamjs_flashnotfound")),$(e.findDOMNode(t.refs.webcamwrapper)).hide(),$(e.findDOMNode(t.refs.webcamphotowrapper)).hide()),t.isWebcamLoadSuccess=!1,$(e.findDOMNode(t.refs.webcaminiterror)).html("Webcam.js Error: "+n),$(e.findDOMNode(t.refs.webcamwrapper)).hide()}),Webcam.attach("#my_camera"))},doWebcamShutdown:function(){n.isPhonegap()||n.isSmallScreen()||this.isWebcamLoadSuccess&&Webcam.reset()},doWebcamTakeSnapshotHandler:function(t){t.preventDefault();var a=this;console.log("check camera: ",navigator.camera),console.log("in doWebcamTakeSnapshotHandler()"),n.isPhonegap()?(console.log("isPhonegap()"),navigator.camera.getPicture(function(t){console.log("in Success",t);var n="data:image/jpeg;base64,"+t;$("#webcamdatauri").val(n),document.getElementById("my_result").innerHTML='<img src="'+n+'" width="120" />',$(e.findDOMNode(a.refs.removewebcamphotobutton)).show()},function(e){console.log("in Error",e),n.showError(e)},{quality:70,targetWidth:360,targetHeight:360,correctOrientation:!0,destinationType:Camera.DestinationType.DATA_URL})):(console.log("not isPhonegap()"),n.isSmallScreen()||Webcam.snap(function(t,n,i){$("#webcamdatauri").val(t),document.getElementById("my_result").innerHTML='<img src="'+t+'" width="120" height="80" />',$(e.findDOMNode(a.refs.removewebcamphotobutton)).show()}))},updateRangename:function(e){this.setState({range_name:e})},componentDidMount:function(){var e=this;e.checkCheckIn(),i.on("checkin:selectoffice",this.setOffice),i.on("checkin:updaterangenane",this.updateRangename),$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}}),i.on("checkin:submit",this.checkInAddHandler)},updateWebcamPhotoHandler:function(){var t=this,n=$(e.findDOMNode(this.refs.webcamdatauri)).val();$("#body-loader").addClass("active"),(new m).save({company_id:a.get("cid"),creator_id:a.get("uid"),object_type:(new m).OBJECTTYPE_WORKGROUP,object_id:0,is_directory:0,data_uri:n,data_uri_title:"checkin-"+a.get("uid")+"-"+a.get("cid")+"-"+moment().format("DD-MM-YYYY")},{success:function(n,a){$(e.findDOMNode(t.refs.fileid)).val(a.id),i.trigger("checkin:submit")},error:function(e){console.log("Upload file error: ",e)},complete:function(){$("#body-loader").removeClass("active")}})},removeWebcamPhotoHandler:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.webcamdatauri)).val(""),$(e.findDOMNode(this.refs.fileid)).val("0"),$(e.findDOMNode(this.refs.my_result)).html(""),$(e.findDOMNode(this.refs.removewebcamphotobutton)).hide()},componentWillUnmount:function(){this.doWebcamShutdown(),i.off("checkin:selectoffice",this.setOffice),i.off("checkin:submit",this.checkInAddHandler),i.off("checkin:updaterangenane")},componentDidUpdate:function(){this.setOfficeName(this.state.office),$(e.findDOMNode(this.refs["select-range"])).dropdown({fullTextSearch:!0,message:{noResults:s.t("search_no_result")}}).dropdown()},formatTimeEnd:function(e){var t=e.split(":"),n=parseInt(t[0]),a=n,i="";n>23&&(a=n-24,i=" Hôm sau");var r=("0"+a).slice(-2)+":"+t[1]+i;return r},render:function(){var t=this,a=t.state.modeltracking,i={},r=o.t("checkedin"),s="",l=t.resetOffice,c="("+o.t("reset_text")+")",d=o.t("reset_range");this.state.range<=0&&(d=o.t("reset_text")),t.state.models.length&&t.state.models.map(function(e,n){e=e.toJSON(),e.id==a.worktracking_range_id&&(i=e,r=o.t("checkedout"),0==a.check_out_time_final&&a.check_in_time_final>0&&(c="",s="none"),t.doWebcamInit())});var u=!1;return this.state.office>0&&(u=!0),e.createElement("div",{className:"ui segments"},e.createElement(v,{link:"#checkin",text:o.t("checkin"),subtext:o.t("checkin_add")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("input",{type:"hidden",value:"",ref:"itemselect"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,o.t("checkin_info_title"))),e.createElement("p",null,o.t("checkin_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement(_,{type:this.state.type,hide:u}),e.createElement("div",{style:{display:u?"":"none"}},e.createElement("div",{className:"ui stackable grid"},e.createElement("div",{className:"eight wide column"},e.createElement("div",{className:"ui warning message",ref:"warningtext"},e.createElement("i",{className:"close icon"}),o.t("diff_office")),e.createElement("div",{className:"required field",style:{display:this.state.range<=0?"":"none"}},e.createElement("label",null,e.createElement("span",{ref:"officename"})," ",e.createElement("a",{href:"#checkin/add",onClick:l},c)),e.createElement("div",{ref:"select-range",className:"ui  search selection dropdown",style:{display:s},key:"office_"+t.state.office},e.createElement("input",{type:"hidden",name:t.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},"----"),e.createElement("div",{className:"menu"},t.state.models.map(function(t){return t=t.toJSON(),e.createElement("div",{"data-value":t.id,key:t.id,className:"item"},t.name+" ("+t.time_start+" - "+n.formatTimeEndWorkRange(t.time_end)+")")}))),e.createElement("div",{style:{display:"none"==s?"":"none"}},$.isEmptyObject(i)?"":i.name+" ("+i.time_start+" - "+n.formatTimeEndWorkRange(i.time_end)+")")),e.createElement("div",{className:"field",style:{display:this.state.range>0?"":"none"}},e.createElement("label",null,o.t("select_range")," ",e.createElement("a",{href:"javascript:void(0)",onClick:l},"(",o.t("reset_range"),") ")),this.state.range_name),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("note")),e.createElement("textarea",{rows:"2",name:"note"})),e.createElement("div",{ref:"webcamphotowrapper",className:"field",style:{display:n.isPhonegap()||!n.isSmallScreen()?"block":"none"}},e.createElement("label",null,o.t("webcamphoto")),e.createElement("input",{type:"hidden",ref:"webcamdatauri",id:"webcamdatauri"}),e.createElement("input",{type:"hidden",ref:"fileid",id:"fileid"}),e.createElement("div",{id:"my_result",ref:"my_result"}),e.createElement("a",{ref:"removewebcamphotobutton",className:"hide",href:"#",onClick:this.removeWebcamPhotoHandler},"[Remove photo]"),e.createElement("span",{ref:"webcaminiterror",style:{fontSize:10,color:"red"}}))),e.createElement("div",{ref:"webcamwrapper",className:"eight wide column",style:{display:n.isPhonegap()||!n.isSmallScreen()?"block":"none"}},e.createElement("div",{style:{width:240,textAlign:"center"}},e.createElement("div",{id:"my_camera",style:{width:"240px",height:"160px",fontWeight:"bold",display:n.isPhonegap()?"none":"block"}}),n.isPhonegap()?e.createElement("div",null,o.t("capture_phonegap_help")):e.createElement("span",null),e.createElement("br",null),e.createElement("a",{href:"#",onClick:this.doWebcamTakeSnapshotHandler,className:"ui mini grey button"},o.t("capture")))))))),e.createElement(y,{required:!0},e.createElement("button",{style:{display:u?"":"none"},className:"ui teal button",type:"submit"},r)))))}});return b}),define("components/office/select-time",["react","language/default"],function(e,t){var n=e.createClass({displayName:"SelectTimeOfficeComponent",getDefaultProps:function(){return{text:" ---- ",time_start:!0,custom_select:!1,onChange:function(){}}},getInitialState:function(){return{hour:this._getSelectHour(),minute:this._getSelectMinute()}},_getSelectHour:function(){for(var e=[],t=this.props.time_start?1:2,n=1;t>=n;n++)for(var a=0;24>a;a++)e.push(("0"+a).slice(-2));return e},_getSelectMinute:function(){for(var e=[],t=0;60>t;t++)e.push(("0"+t).slice(-2));return e},setValue:function(t){$(e.findDOMNode(this.refs.select)).val(t)},getValue:function(t){return $(e.findDOMNode(this.refs.select)).val()},componentDidMount:function(){this.props.custom_select&&$(e.findDOMNode(this)).customSelect()},render:function(){var n=this,a=" "+t.t("minute"),i=this.state.minute;"hour"==this.props.type&&(a=" "+t.t("hour"),i=this.state.hour);var r="0";n.props.hasOwnProperty("select")&&""!=n.props.select&&(r=("0"+n.props.select).slice(-2));var o=0,s=-1;return e.createElement("select",{onChange:this.props.onChange,ref:"select",name:n.props.name,defaultValue:r},""!=n.props.text?e.createElement("option",{value:"0"},n.props.text):"",i.map(function(t,i){var r=t,l=a;return"hour"!=n.props.type||n.props.time_start||(s++,r=("0"+s).slice(-2),o+="00"==t?1:0,l=2==o?a+" hôm sau":a),e.createElement("option",{key:i,value:r},t,l)}))}});return n}),define("components/checkin/edit-time",["react","backbone","helper","eventbus","pref","language/checkin","language/default","models/checkin","components/office/select-time"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"CheckInEditTime",getInitialState:function(){return{modelitems:[],getRangeTime:!1,ot:this.props.data.ot_allow}},componentDidUpdate:function(){this.setOtAllow()},initCheckbox:function(){$(".ui.checkbox").checkbox(),this.props.data.late_in_rule<=(new s).LATE_NOT&&$(e.findDOMNode(this.refs.divallowlate)).hide(),this.props.data.early_in_rule<=(new s).EARLY_NOT&&$(e.findDOMNode(this.refs.divallowearly)).hide(),this.props.data.allow_late==(new s).ALLOWLATE_ALLOW&&$(e.findDOMNode(this.refs.allowlate)).checkbox("set checked"),this.props.data.allow_early==(new s).ALLOWEARLY_ALLOW&&$(e.findDOMNode(this.refs.allowearly)).checkbox("set checked")},componentDidMount:function(){var t=this;this.setOtAllow(),this.initCheckbox(),$(".ui.modal",this.getDOMNode()).modal({context:this.getDOMNode(),onHidden:function(){console.log("onHidden"),a.trigger("modal:hide")}}).modal("show"),$(".ui.form",this.getDOMNode()).form({fields:{edit_note:{identifier:"edit_note",rules:[{type:"empty",prompt:r.t("error_edit_note_required")}]}},inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t._save()}}),this.props.data.check_out_time_final<=0&&$(e.findDOMNode(this.refs.warning)).show()},getHourInStr:function(e){var t=e.split(":"),n=parseInt(t[0]);return n},formatHourEnd:function(e,t){var n=this.getHourInStr(e);return n>23&&(t?n+=24:n-=24),n},formatTime:function(e){var t="0",n=$(".ui.form",this.getDOMNode()),a="00",i="00";"in"==e?(a=$('[name="hourstart"]',n).val(),i=$('[name="minutestart"]',n).val(),t=a+":"+i):(a=$('[name="hourend"]',n).val(),i=$('[name="minuteend"]',n).val(),t=a+":"+i);var r=moment.unix(this.props.data.check_in_time);return r=r.format("YYYY-MM-DD "),t=moment(r+t,"YYYY-MM-DD HH:mm").unix(),("0"==a||"0"==i)&&(t="0"),t},_save:function(){var t=$(".ui.form",this.getDOMNode());t.addClass("loading");var l=this,c=((new s).VERIFYSTATUS_VERIFIED,(new s).VERIFYSTATUS_UNVERIFIED,new s),d=c.ALLOWLATE_NOT_SET,u=c.ALLOWEARLY_NOT_SET;this.props.data.late_in_rule>0&&(d=$(e.findDOMNode(this.refs.allowlate)).checkbox("is checked")?c.ALLOWLATE_ALLOW:c.ALLOWLATE_NOT_ALLOW),this.props.data.early_in_rule>0&&(u=$(e.findDOMNode(this.refs.allowearly)).checkbox("is checked")?c.ALLOWEARLY_ALLOW:c.ALLOWEARLY_NOT_ALLOW);var m={company_id:i.get("cid"),creator_id:i.get("uid"),check_in_time_final:l.formatTime("in"),check_out_time_final:l.formatTime("out"),status:0,allow_late:d,allow_early:u,ot_allow:$(e.findDOMNode(l.refs.ot_allow)).val(),edit_note:$(e.findDOMNode(l.refs.edit_note)).val(),office_id:l.props.data.office_id,worktracking_range_id:l.props.data.worktracking_range_id,verify_status:l.props.data.verify_status};new s({id:this.props.data.id}).editnew({data:m,success:function(e){n.showSuccess(o.t("update_success")),$(".ui.modal",l.getDOMNode()).modal("hide");var t=new s(e);a.trigger("checkin:update",t,"update")},error:function(e,t){n.notifyError(t,r,"error_update")},complete:function(){t.removeClass("loading")}})},setTimeOT:function(){var t=$(e.findDOMNode(this.refs.ot_allow)).val(),a=$(e.findDOMNode(this.refs.start_hour)).val(),i=$(e.findDOMNode(this.refs.start_minute)).val(),r=$(e.findDOMNode(this.refs.end_hour)).val(),o=$(e.findDOMNode(this.refs.end_minute)).val(),l=this.initStartEnd();switch(parseInt(t)){case(new s).ALLOWOT_FIRST:a=n.formatTime(this.props.data.check_in_time,!1,"H"),i=n.formatTime(this.props.data.check_in_time,!1,"mm"),r=l.endHour,o=l.endMinute;break;case(new s).ALLOWOT_LAST:r=n.formatTime(this.props.data.check_out_time,!1,"H"),o=n.formatTime(this.props.data.check_out_time,!1,"mm"),a=l.startHour,i=l.startMinute;break;case(new s).ALLOWOT_ALL:a=n.formatTime(this.props.data.check_in_time,!1,"H"),i=n.formatTime(this.props.data.check_in_time,!1,"mm"),r=n.formatTime(this.props.data.check_out_time,!1,"H"),o=n.formatTime(this.props.data.check_out_time,!1,"mm");break;default:a=l.startHour,i=l.startMinute,r=l.endHour,o=l.endMinute}$(e.findDOMNode(this.refs.start_hour)).val(a),$(e.findDOMNode(this.refs.start_minute)).val(i),$(e.findDOMNode(this.refs.end_hour)).val(r),$(e.findDOMNode(this.refs.end_minute)).val(o)},setTime:function(){this.setState({getRangeTime:!0})},initStartEnd:function(){var e=this,t=e.props.data.check_in_time_final>0?moment.unix(e.props.data.check_in_time_final).format("HH"):"",a=e.props.data.check_in_time_final>0?moment.unix(e.props.data.check_in_time_final).format("mm"):"",i="";e.props.data.check_out_time_final>0&&(n.formatTime(this.props.data.check_out_time_final,!1,"DD")!=n.formatTime(this.props.data.check_in_time_final,!1,"DD")?(i=parseInt(moment.unix(e.props.data.check_out_time_final).format("HH"))+24,i=("0"+i).slice(-2)):i=moment.unix(e.props.data.check_out_time_final).format("HH"));var r=e.props.data.check_out_time_final>0?moment.unix(e.props.data.check_out_time_final).format("mm"):"";if(this.state.getRangeTime&&(this.props.data.worktracking_range_id,!jQuery.isEmptyObject(this.props.range))){var o=this.props.range.time_start.split(":"),s=this.props.range.time_end.split(":");2==o.length&&(t=o[0],a=o[1]),2==s.length&&(i=s[0],r=s[1])}return{startHour:t,startMinute:a,endHour:i,endMinute:r}},setOtAllow:function(){this.props.data.ot_allow&&$(e.findDOMNode(this.refs.ot_allow)).checkbox("set checked")},submitform:function(){$(".ui.form",this.getDOMNode()).submit()},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},render:function(){var t=this,n=this.initStartEnd(),a=n.startHour,i=n.startMinute,c=n.endHour,d=n.endMinute;return e.createElement("div",null,e.createElement("div",{className:"ui small modal"},e.createElement("div",{className:"header"},r.t("checkin_info_update")," - ",t.props.text),e.createElement("div",{className:"content"},e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields",id:"officeinfo"},e.createElement("div",{className:"field sixteen wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide"},e.createElement("div",{className:"ui warning message",ref:"warning"},e.createElement("i",{className:"close icon"}),e.createElement("div",{className:"header"},r.t("not_have_checkout")),r.t("if_veryfied_is_system_auto_checkout")))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field three wide"},e.createElement("label",null,r.t("timein")),e.createElement(l,{ref:"start_hour",key:"start_"+a,name:"hourstart",type:"hour",select:a})),e.createElement("div",{className:"field three wide"},e.createElement("label",null," "),e.createElement(l,{ref:"start_minute",key:"end_"+i,name:"minutestart",type:"minute",select:i})),e.createElement("div",{className:"field three wide"},e.createElement("label",null,r.t("timeout")),e.createElement(l,{ref:"end_hour",key:"start_"+c,name:"hourend",type:"hour",select:c,time_start:!1})),e.createElement("div",{className:"field three wide"},e.createElement("label",null," "),e.createElement(l,{ref:"end_minute",key:"end_"+d,name:"minuteend",type:"minute",select:d})),e.createElement("div",{className:"field three wide aligned center"},e.createElement("label",null,r.t("ot_allow_long")),e.createElement("select",{defaultValue:t.props.data.ot_allow,ref:"ot_allow",onChange:this.setTimeOT},(new s).getOTList().map(function(t,n){return e.createElement("option",{key:t.code,value:t.code},t.text)})))))),e.createElement("div",{className:"fields",id:"officeinfo"},e.createElement("div",{className:"field sixteen wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field three wide",ref:"divallowlate"},e.createElement("label",null,r.t("allowlate")),e.createElement("div",{className:"ui toggle checkbox",ref:"allowlate"},e.createElement("input",{type:"checkbox",name:"public"}))),e.createElement("div",{className:"field three wide",ref:"divallowearly"},e.createElement("label",null,r.t("allowearly")),e.createElement("div",{className:"ui toggle checkbox",ref:"allowearly"},e.createElement("input",{type:"checkbox",name:"public"})))))),e.createElement("div",{className:"fields",id:"noteinfo"},e.createElement("div",{className:"field sixteen wide required"},e.createElement("label",null,r.t("edit_note")),e.createElement("textarea",{className:"textbox",ref:"edit_note",name:"edit_note",defaultValue:"",placeholder:"",rows:"3"})))))),e.createElement("div",{className:"actions"},e.createElement("a",{onClick:t.setTime,href:"javascript:void(0)",className:"ui basic noborder blue button pull-left nopaddingleft"},r.t("get_full_time")),e.createElement("div",{className:"ui noborder basic approve button"},r.t("close")),e.createElement("div",{className:"ui button teal",onClick:this.submitform},o.t("save")))))}});return c}),define("components/row-creator",["react","helper","pref","collections/user"],function(e,t,n,a){var i=e.createClass({displayName:"RowItemComponent",getDefaultProps:function(){return{id:0,width:16,height:16,show_name:!0}},componentDidMount:function(){var t=this,n=(new a).fetchFromCache({id:this.props.id});n=n.items[0],n&&$(e.findDOMNode(t.refs.user_avatar)).empty().append(n.fullname)},renderDesktop:function(){return e.createElement("td",{ref:"user_avatar"})},render:function(){return this.renderDesktop()}});return i}),define("components/checkin/edithistoryitem",["react","backbone","components/employee-avatar","components/row-creator","components/datetime","language/checkin","language/default","models/checkin"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"CheckInEditHistoryItemComponent",getDefaultProps:function(){return{data:{action:"",editor:0,datecreated:0,editnote:"",checkinfrom:0,checkinto:0,checkoutfrom:0,checkoutto:0,allowlatefrom:0,allowlateto:0,allowearlyfrom:0,allowearlyto:0,allowotfrom:0,allowotto:0}}},getAllowLateText:function(e){var t="";switch(e){case(new s).ALLOWLATE_ALLOW:t=o.t("yes");break;default:t=o.t("no")}return t},getAllowEarlyText:function(e){var t="";switch(e){case(new s).ALLOWEARLY_ALLOW:t=o.t("yes");break;default:t=o.t("no")}return t},getAllowOtText:function(e){var t="";switch(e){case(new s).ALLOWOT_FIRST:t=r.t("ALLOWOT_FIRST");break;case(new s).ALLOWOT_LAST:t=r.t("ALLOWOT_LAST");break;case(new s).ALLOWOT_ALL:t=r.t("ALLOWOT_ALL");break;default:t=r.t("ALLOWOT_NOT")}return t},renderDetailActionEdit:function(){var t=[],n=this.props.data;n.checkinfrom!=n.checkinto&&t.push(e.createElement("p",null,r.t("checkin_history_in"),": ",e.createElement("strong",null,e.createElement(i,{ts:n.checkinfrom}))," ",e.createElement("i",{style:{color:"orange"},className:"icon tc-arrowright"})," ",e.createElement("strong",null,e.createElement(i,{ts:n.checkinto})))),n.checkoutfrom!=n.checkoutto&&t.push(e.createElement("p",null,r.t("checkin_history_out"),": ",e.createElement("strong",null,e.createElement(i,{ts:n.checkoutfrom}))," ",e.createElement("i",{style:{color:"orange"},className:"icon tc-arrowright"})," ",e.createElement("strong",null,e.createElement(i,{ts:n.checkoutto}))));var a=this.getAllowLateText(n.allowlatefrom),o=this.getAllowLateText(n.allowlateto);
a!=o&&t.push(e.createElement("p",null,r.t("checkin_history_allowlate"),": ",e.createElement("strong",null,a)," ",e.createElement("i",{style:{color:"orange"},className:"icon tc-arrowright"})," ",e.createElement("strong",null,o)));var s=this.getAllowLateText(n.allowearlyfrom),l=this.getAllowLateText(n.allowearlyto);return s!=l&&t.push(e.createElement("p",null,r.t("checkin_history_allowearly"),": ",e.createElement("strong",null,s)," ",e.createElement("i",{style:{color:"orange"},className:"icon tc-arrowright"})," ",e.createElement("strong",null,l))),n.allowotfrom!=n.allowotto&&t.push(e.createElement("p",null,r.t("checkin_history_ot"),": ",e.createElement("strong",null,this.getAllowOtText(n.allowotfrom))," ",e.createElement("i",{style:{color:"orange"},className:"icon tc-arrowright"})," ",e.createElement("strong",null,this.getAllowOtText(n.allowotto)))),t},renderDetailActionVerify:function(){},componentDidMount:function(){},render:function(){return e.createElement("tr",null,e.createElement("td",null,e.createElement(i,{ts:this.props.data.datecreated})),e.createElement("td",{width:"30"},e.createElement(n,{id:this.props.data.editor})),e.createElement(a,{id:this.props.data.editor}),e.createElement("td",null,"edit"==this.props.data.action?this.renderDetailActionEdit():this.renderDetailActionVerify()),e.createElement("td",null,this.props.data.editnote))}});return l}),define("components/checkin/edithistory",["react","backbone","helper","eventbus","pref","components/checkin/edithistoryitem","language/checkin","language/default"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"CheckInEditHistoryComponent",getDefaultProps:function(){return{items:[],text:""}},componentDidMount:function(){$(".ui.modal",this.getDOMNode()).modal({context:this.getDOMNode(),onHidden:function(){a.trigger("modal:hide")}}).modal("show")},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui modal"},e.createElement("div",{className:"header"},o.t("checkin_info_update_history")," - ",this.props.text),e.createElement("div",{className:"content"},e.createElement("table",{className:"ui selectable striped table unstackable"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{width:"120"},s.t("date_created")),e.createElement("th",{width:"30"}),e.createElement("th",{width:"140"},o.t("editor")),e.createElement("th",null,o.t("edit_detail")),e.createElement("th",null,o.t("edit_note")))),e.createElement("tbody",null,this.props.items.map(function(t){return t.hasOwnProperty("action")?e.createElement(r,{key:t.datecreated,data:t}):null})))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic approve button"},o.t("close")))))}});return l}),define("components/checkin/employee-detail-checkin-item",["react","helper","pref","role","models/checkin","models/office","models/user","components/filestrip","language/checkin","language/default"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"CheckInComponent",getInitialState:function(){return{roleid:263}},filter_date:function(){this.props.filter_date(moment.unix(this.props.data.date_created).format("YYYYMMDD"))},filter_range:function(){this.props.filter_range(this.props.data.worktracking_range_id)},setRange:function(){var t=this.props.data.worktracking_range_id;if(this.props.workrangelist.hasOwnProperty(t)){var n=this.props.workrangelist[t];$(e.findDOMNode(this.refs.rangename)).html(n.name).attr("style","color:#"+n.color+";border-color: #"+n.color),$(e.findDOMNode(this.refs.rangetime)).html(n.time_start+" - "+n.time_end);var a=parseInt(moment.unix(this.props.data.check_in_time).format("HH:mm").replace(":","")),i=parseInt(moment.unix(this.props.data.check_in_time_final).format("HH:mm").replace(":","")),r=parseInt(n.time_start.replace(":","")),o=parseInt(moment.unix(this.props.data.check_out_time).format("HH:mm").replace(":","")),s=parseInt(moment.unix(this.props.data.check_out_time_final).format("HH:mm").replace(":","")),c=parseInt(n.time_end.replace(":","")),d="",u="";if(o!=c){var m=moment.unix(this.props.data.check_out_time).format("HH:mm");this.props.data.check_out_time<=0&&(m="..."),c>o?(d+=" checkinouttearly",u=l.t("checkearly")+", "+l.t("realcheck")+": "+m,o==s&&(u=l.t("checkearly")+": "+m)):o>c&&(d="checkinouttlate",u=l.t("checklate")+", "+l.t("realcheck")+": "+m,o==s&&(u=l.t("checklate")+": "+m)),$(e.findDOMNode(this.refs.checkouttime)).addClass(d).attr("title",u)}d="",u="",a!=r&&(m=moment.unix(this.props.data.check_in_time).format("HH:mm"),r>a?(d+=" checkinouttearly",u=l.t("checkearly")+", "+l.t("realcheck")+": "+m,a==i&&(u=l.t("checkearly")+": "+m)):a>r&&(d="checkinouttlate",u=l.t("checklate")+", "+l.t("realcheck")+": "+m,a==i&&(u=l.t("checklate")+": "+m)),$(e.findDOMNode(this.refs.checkintime)).addClass(d).attr("title",u))}else $(e.findDOMNode(this.refs.rangename)).html("").attr("style",""),$(e.findDOMNode(this.refs.rangename)).attr("class",""),$(e.findDOMNode(this.refs.rangetime)).html("")},setOffice:function(){var t=this;new r({id:this.props.data.office_id}).fetch({nocache:!0,success:function(i,r){if($(e.findDOMNode(t.refs.officename)).text(r.name),""!=r.reviewer_list&&a.hasById(t.state.roleid)){var o=r.reviewer_list.split(",");-1==o.indexOf(n.get("uid"))&&$(e.findDOMNode(t.refs.verifyurl)).html("")}else $(e.findDOMNode(t.refs.verifyurl)).html("")}})},setEmployee:function(){var t=this;this.props.data.creator_id>0?new o({id:this.props.data.creator_id}).fetch({nocache:!1,success:function(n,a){$(e.findDOMNode(t.refs.employeename)).text(a.fullname)}}):console.log(this.props.data.id)},setEmployeeVerify:function(){var t=this;this.props.data.reviewer_id>0&&new o({id:this.props.data.reviewer_id}).fetch({nocache:!0,success:function(n,a){$(e.findDOMNode(t.refs.employeeverifyname)).text(a.fullname)}})},show_edit:function(t){var n=$(e.findDOMNode(this.refs.employeename)).text()+" ("+c.t("day")+" "+$(e.findDOMNode(this.refs.date)).text()+")";this.props.show_edit(this.props.data.id,t,n)},setNote:function(){var t=this;if(""!=this.props.data.detail.check_in_note||""!=this.props.data.detail.check_out_note){var n="<b>"+l.t("checkinnote")+"</b>"+t.props.data.detail.check_in_note+"<br><b>"+l.t("checkoutnote")+"</b>"+t.props.data.detail.check_out_note;$(e.findDOMNode(this.refs.note)).popup({on:"hover",html:n})}},showPicture:function(){var t=this,n=[];t.props.data.check_in_file_detail.id>0&&n.push(this.props.data.check_in_file_detail),t.props.data.check_out_file_detail.id>0&&n.push(this.props.data.check_out_file_detail),n.length&&($(e.findDOMNode(this.refs.btnpicture)).hide(),e.render(e.createElement(s,{files:n}),e.findDOMNode(t.refs.picture)))},showEditActionSheet:function(e){e.preventDefault();var n=this,a=(new i).getVerify(this.props.data.verify_status),r=l.t("verify");"Verified"==a.text&&(r=l.t("unverify"));var o={buttons:[{text:r,onClick:function(e){}},{text:l.t("update"),onClick:function(e){n.show_edit(e)}}]};t.showActionSheet(o)},componentDidUpdate:function(e,t){this.setEmployee(),this.setEmployeeVerify()},componentDidMount:function(){this.setOffice(),this.setEmployee(),this.setEmployeeVerify(),this.setRange(),this.setNote()},renderMobile:function(){var t=this,n=(new i).getStatus(this.props.data.status),a=moment.unix(t.props.data.date_created).format("DD/MM");moment.unix(t.props.data.date_created).format("DD/MM/YYYY")==moment().format("DD/MM/YYYY")?a=l.t("today"):moment.unix(t.props.data.date_created).format("DD/MM/YYYY")==moment([]).subtract(1,"days").format("DD/MM/YYYY")&&(a=l.t("yesterday"));var r="",o="";return t.props.data.check_in_time_final>0&&(r=moment.unix(t.props.data.check_in_time_final).format("HH:mm")),t.props.data.check_out_time_final>0&&(o=moment.unix(t.props.data.check_out_time_final).format("HH:mm")),e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading mitemheadingnormal"},a," - ",e.createElement("span",{ref:"employeename"}),e.createElement("span",{ref:"status",className:"mini noborder ui pull-right basic label "+n.color},l.t(n.text))),e.createElement("div",{className:"mitemmeta"},e.createElement("span",{ref:"officename"})," · ",e.createElement("span",{ref:"rangename"})," (",e.createElement("span",{ref:"checkintime"},r)," - ",e.createElement("span",{ref:"checkouttime"},o),")")))},renderDesktop:function(){var t=this,n=(new i).getStatus(this.props.data.status),a=(new i).getVerify(this.props.data.verify_status),r=l.t("NonVerified");"Verified"==a.text&&(r=l.t("Verified"));var o="-";""!=this.props.data.duration&&this.props.data.duration>0&&(o=Math.floor(this.props.data.duration/3600)+"h "+Math.floor(this.props.data.duration%3600/60)+"m ");var s=moment.unix(t.props.data.date_created).format("DD/MM");moment.unix(t.props.data.date_created).format("DD/MM/YYYY")==moment().format("DD/MM/YYYY")?s=l.t("today"):moment.unix(t.props.data.date_created).format("DD/MM/YYYY")==moment([]).subtract(1,"days").format("DD/MM/YYYY")&&(s=l.t("yesterday"));var c="";"0.0.0.0"!=t.props.data.detail.check_out_ipaddress&&(c=t.props.data.detail.check_out_ipaddress);var d="",u="";t.props.data.check_in_time_final>0&&(d=moment.unix(t.props.data.check_in_time_final).format("HH:mm")),t.props.data.check_out_time_final>0&&(u=moment.unix(t.props.data.check_out_time_final).format("HH:mm"));var m="";""==this.props.data.detail.check_in_note&&""==this.props.data.detail.check_out_note&&(m="none");var p=!1;return(t.props.data.check_in_file_detail.id>0||t.props.data.check_out_file_detail.id>0)&&(p=!0),e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{className:"nocolor",href:"javascript:void(0)",ref:"date"},s)),e.createElement("td",{ref:"officename"}),e.createElement("td",null,e.createElement("a",{href:"javascript:void(0)",ref:"rangename",className:"ui basic label mini"}),e.createElement("small",{className:"hideonsmall"},"  ",e.createElement("span",{ref:"rangetime"}))),e.createElement("td",{ref:"employeename"}),e.createElement("td",null,e.createElement("span",{ref:"checkintime"},d)," - ",e.createElement("span",{ref:"checkouttime"},u)),e.createElement("td",null,e.createElement("i",{style:{display:m},className:"icon tc-filetext",ref:"note"})),e.createElement("td",null,o),e.createElement("td",null,e.createElement("span",{className:"ui small simple label "+n.color},l.t(n.text))),e.createElement("td",{ref:"employeeverifyname"}),e.createElement("td",null,t.props.data.detail.check_in_ipaddress," - ",c),e.createElement("td",null,p?e.createElement("a",{className:"icon tc-photo",ref:"btnpicture",onClick:t.showPicture}):"",e.createElement("div",{ref:"picture",id:"mailfile"})))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return d}),define("components/filter-employee",["react","pref","cacheddata","language/default","collections/employee","models/user"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"FilterEmployeeItemComponent",getInitialState:function(){return{}},componentDidMount:function(){var e=this;new r({id:this.props.data.user_id}).fetch({success:function(t,n){e.setState(n)}})},render:function(){return e.createElement("div",{"data-value":this.state.id,className:"item"},this.state.fullname)}}),s=e.createClass({displayName:"FilterEmployeeComponent",getInitialState:function(){return{items:[]}},getInitProps:function(){return{position_class:"top left"}},componentDidMount:function(){var e=this;this._loadData(),$(this.getDOMNode()).dropdown({fullTextSearch:!0,message:{noResults:a.t("search_no_result")},onShow:e.props.onShow,onHide:e.props.onHide,onChange:e.props.onChange})},_loadData:function(e){var a=this;if(n.has("employee")){var r=n.get("employee");this.setState({items:r().get()})}else(new i).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,page:e},success:function(e,t){a.setState({items:a.state.items.concat(t.items)}),$(a.getDOMNode()).dropdown("refresh"),Math.ceil(t.total/t.limit)>t.currentpage&&a._loadData(t.currentpage+1)}})},setSelected:function(e){$(this.getDOMNode()).dropdown("set selected",e)},restoreDefaults:function(){$(this.getDOMNode()).dropdown("restore defaults")},render:function(){var t=this,n=t.props.position_class;return"undefined"==typeof n&&(n="top left"),e.createElement("div",{className:n+" ui pointing  dropdown"},e.createElement("a",{className:"tc-filter icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"ui icon search input"},e.createElement("i",{className:"tc-search icon"}),e.createElement("input",{type:"text",placeholder:a.t("search")})),e.createElement("div",{className:"scrolling menu"},e.createElement("div",{"data-value":"0",className:"item"},a.t("all")),e.createElement("div",{className:"divider"}),this.state.items.map(function(t,n){return e.createElement(o,{key:t.id,data:t})}))))}});return s}),define("components/search-keyword",["react","language/default"],function(e,t){var n=e.createClass({displayName:"SearchKeywordComponent",getDefaultProps:function(){return{defaultValue:"",placeholder:t.t("search"),onChange:function(e){console.log("Search keyword: "+e)}}},_search:function(e){this._timer>0&&clearTimeout(this._timer);var t=this,n=e.target.value;this._timer=setTimeout(function(){t.props.onChange(n)},500)},setKeyword:function(t){$(e.findDOMNode(this.refs.keyword)).val(t),this.props.onChange(t)},render:function(){return e.createElement("div",{style:{marginRight:0},className:"ui left icon input"},e.createElement("input",{onInput:this._search,type:"text",ref:"keyword",defaultValue:this.props.defaultValue,placeholder:this.props.placeholder}),e.createElement("i",{className:"tc-search icon"}))}});return n}),define("components/checkin/employee-detail-checkin",["react","eventbus","basecontroller","pref","role","helper","setting","language/default","language/checkin","querystring","collections/checkin","collections/office","collections/worktrackingrange","models/checkin","models/office","models/user","components/checkin/employee-detail-checkin-item","components/checkin/edit-time","components/filter-employee","components/semantic-datepicker","components/mixin/listsearch","components/headingfull","components/search-keyword"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N){var w=e.createClass({displayName:"DetailCheckInComponent",getInitialState:function(){return{office:[],hmac:"",workrange:{},models:[],length:0,total:0,roleid:263,currentpage:1}},_getWokingrange:function(e){var t=this;$("#body-loader").addClass("active");var n={company_id:a.get("cid"),limit:30,page:e,is_not_deleted:1,sort_by:c.get("sort_by")||"display_order",sort_type:c.get("sort_type")||"ASC"};(new m).fetch({data:n,success:function(n,a){var i={},r=t.state.workrange;a.items.map(function(e,t){i[e.id]={},i[e.id]=e}),i=$.extend(r,i),t.setState({workrange:i}),a.total>=50*e?t._getWokingrange(e+1):t._loadData()},complete:function(){$("#body-loader").removeClass("active")}})},_loadData:function(){var e=this;$("#body-loader").addClass("active");var t={company_id:a.get("cid"),creator_id:e.props.data.user_id,limit:10,file_detail:1,sort_by:c.get("sort_by")||"date_created",sort_type:c.get("sort_type")||"DESC"};(new d).fetch({data:t,success:function(t,n){e.setState(t)},complete:function(){$("#body-loader").removeClass("active")}})},getOffice:function(){var e=this,t={company_id:a.get("cid"),limit:50,page:c.get("page")||1,is_not_deleted:1,sort_by:c.get("sort_by")||"id",sort_type:c.get("sort_type")||"DESC"};(new u).fetch({data:t,success:function(t,n){e.setState({office:n.items})},complete:function(){$("#body-loader").removeClass("active")}})},_pagiLoad:function(e){c.set("page",e),this._loadData()},componentWillMount:function(){},componentDidUpdate:function(e,t){},componentDidMount:function(){this._getWokingrange(1),this.getOffice(),(new n).setTcScrollMinHeight()},componentWillUnmount:function(){t.off("modal:hide",this.unmountModal)},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,l.t("datecreated")),e.createElement("th",null,l.t("office")),e.createElement("th",null,l.t("range")),e.createElement("th",null,l.t("employee")),e.createElement("th",null,l.t("timeinout")),e.createElement("th",null,l.t("note")),e.createElement("th",null,l.t("duration")),e.createElement("th",null,l.t("status")),e.createElement("th",null,l.t("verifyuser")),e.createElement("th",null,l.t("ipaddress")),e.createElement("th",null,l.t("picture")))},render:function(){var t=this,n="#checkin/export";return c.hasOwnProperty("creator_id")&&(n="#checkin/export/creator_id="+c.get("creator_id")),e.createElement("div",{className:"ui segments"},e.createElement("div",{style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{className:r.tableclass(),ref:"checkintable"},e.createElement("thead",null,this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){return n=n.toJSON(),e.createElement(g,{filter_date:t.filter_date,filter_employee:t.filter_employee,filter_range:t.filter_range,show_edit:t.showEdit,key:n.id,loaddata:t._loadData,viewDetail:t._viewDetail,workrangelist:t.state.workrange,filterStatus:t._filterStatus,data:n})}))),e.createElement("a",{href:"#checkin/_s/creator_id/"+this.props.data.user_id,className:"ui mini basic blue button"},s.t("view_more"))),e.createElement("span",{ref:"modal-wrapper"}))}});return w}),define("components/checkin/filter-employee",["react","pref","cacheddata","language/checkin","language/default","collections/employee","models/employee","models/user"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"FilterEmployeeItemComponent",getInitialState:function(){return{}},componentDidMount:function(){var e=this;new s({id:this.props.data.user_id}).fetch({success:function(t,n){e.setState(n)}})},render:function(){return e.createElement("div",{"data-value":this.state.id,className:"item"},this.state.fullname)}}),c=e.createClass({displayName:"FilterEmployeeComponent",getInitialState:function(){return{items:[]}},getInitProps:function(){return{position_class:"left"}},componentDidMount:function(){var e=this;this._loadData(1),$(this.getDOMNode()).dropdown({fullTextSearch:!0,message:{noResults:i.t("search_no_result")},onShow:e.props.onShow,onHide:e.props.onHide,onChange:e.props.onChange})},_loadData:function(e){var a=this;if(n.has("employee")){var i=n.get("employee");this.setState({items:i().get()})}else{var s={company_id:t.get("cid"),ignore_group:1,status:(new o).STATUS_ENABLE,is_not_deleted:1,page:e};(new r).fetch({data:s,success:function(e,t){a.setState({items:a.state.items.concat(t.items)}),$(a.getDOMNode()).dropdown("refresh"),Math.ceil(t.total/t.limit)>t.currentpage&&a._loadData(t.currentpage+1)}})}},render:function(){return e.createElement("div",{className:" ui search selection dropdown"},e.createElement("input",{type:"hidden",name:"filters"}),e.createElement("i",{className:"filter icon"}),e.createElement("span",{className:"text"},a.t("employee")),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"ui icon search input"},e.createElement("i",{className:"search icon"}),e.createElement("input",{type:"text",placeholder:a.t("employee")})),e.createElement("div",{className:"divider"}),e.createElement("div",{className:"scrolling menu"},this.state.items.map(function(t,n){return t.user_id>0?e.createElement(l,{key:t.id,data:t}):""}))))}});return c}),define("components/checkin/export",["react","backbone","helper","pref","role","setting","querystring","language/checkin","language/default","models/checkin","components/semantic-datepicker","components/checkin/filter-employee","components/heading","components/select-office","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"CheckInExportComponent",getInitialState:function(){return{models:[],hmac:""}},componentDidMount:function(){var e=this;$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}})},_save:function(){var i=$(".ui.form",this.getDOMNode());i.addClass("loading"),new c({id:this.props.data.id}).save({company_id:a.get("cid"),creator_id:a.get("uid"),name:$('[name="name"]',i).val(),content:$('[name="content"]',i).val(),status:$(e.findDOMNode(this.refs.status)).dropdown("get value")},{success:function(){n.showSuccess(l.t("update_success")),t.history.navigate("checkin",{trigger:!0})},error:function(e,t){var a=[];t.responseJSON.error.map(function(e,t){a.push(s.t(e))}),""==a?n.showError(l.t("update_fail")):n.showError(a.join(", "))},complete:function(){i.removeClass("loading")}})},filter_employee:function(e){o.set("creator_id",e)},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},_export:function(t){var i=this,o=t.nativeEvent;o.preventDefault();var s=($(e.findDOMNode(this.refs["select-office"])).dropdown("get value"),r.rooturl+$(e.findDOMNode(this.refs.export)).attr("data-url"));if(""!=i.state.hmac){var l=i._getExportUrl(s,i.state.hmac);window.open(l,n.getWindowTarget())}else{var c={company_id:a.get("cid"),user_id:a.get("uid")};$.ajax({url:s,method:"GET",data:c,dataType:"json",success:function(e){if(""!=e.hmac){var t=i._getExportUrl(s,e.hmac);i.setState({hmac:e.hmac}),window.open(t,n.getWindowTarget())}}})}},_getDataQuery:function(t){var n=(t?1:o.get("page"),{company_id:a.get("cid"),user_id:a.get("uid"),creator_id:o.get("creator_id"),office_id:$(e.findDOMNode(this.refs["select-office"])).dropdown("get value"),date_started:o.get("date_started")||0,date_ended:o.get("date_ended")||0});return!isNaN(o.get("status"))&&o.get("status")>0&&(n.status=o.get("status")),!isNaN(o.get("employee_id"))&&o.get("employee_id")>0&&(n.employee_id=o.get("employee_id")),null!=o.get("date")&&""!=o.get("date")&&(n.store_id=o.get("date")),!isNaN(o.get("creator_id"))&&o.get("creator_id")>0&&(n.creator_id=o.get("creator_id")),!isNaN(o.get("date_started"))&&o.get("date_started")>0&&(n.date_started=o.get("date_started")),!isNaN(o.get("date_ended"))&&o.get("date_ended")>0&&(n.date_ended=o.get("date_ended")),n},_getExportUrl:function(e,t){var n=this._getDataQuery(!0),i="";return $.each(n,function(e,t){i+=(""!=i?"&":"")+e+"="+t}),i+=(""!=i?"&":"")+"user_id="+a.get("uid"),i+=(""!=i?"&":"")+"hmac="+encodeURIComponent(t),e+="?"+i},render:function(){var t=this,n=0,a=0;o.has("date_started")&&o.get("date_started")>0?n=o.get("date_started"):(n=moment().startOf("month"),o.set("date_started",n.unix({h:0,m:0,s:0}))),o.has("date_ended")&&o.get("date_ended")>0?a=o.get("date_ended"):(a=moment().endOf("month"),o.set("date_ended",a.unix({h:23,m:59,s:59})));var i={};return i[l.t("relativeToday")]=[moment([]),moment()],i[l.t("relativeYesterday")]=[moment([]).subtract(1,"days"),moment([]).subtract(1,"seconds")],i[l.t("rel7Day")]=[moment([]).subtract(7,"days"),moment([]).subtract(1,"seconds")],i[l.t("rel30Day")]=[moment([]).subtract(30,"days"),moment([]).subtract(1,"seconds")],i[l.t("relMonthNow")]=[moment([]).startOf("month"),moment().endOf("month")],i[l.t("relMonthAgo")]=[moment([]).subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],e.createElement("div",{className:"ui segments"},e.createElement(m,{link:"#checkin",text:s.t("checkin"),subtext:s.t("exportexcel")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide"},e.createElement("h4",null,e.createElement("strong",null,s.t("checkin_export_info_title"))),e.createElement("p",null,s.t("checkin_export_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide"},e.createElement("div",{className:"ten  wide field"},e.createElement("label",null,s.t("office")),e.createElement(p,{ref:"select-office"})))),e.createElement("div",{className:"fields",ref:"select-employee"},e.createElement("div",{className:"field four wide"},e.createElement("div",{className:"ten  wide field"},e.createElement("label",null,s.t("employee")),e.createElement(u,{ref:"filter-employee",onChange:t.filter_employee})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field six wide"},e.createElement("div",{className:"required sixteen  wide field"},e.createElement("label",null,s.t("select_date")),e.createElement("div",{style:{verticalAlign:"middle"},className:"item"},e.createElement(d,{ref:"datePicker",options:{format:"DD/MM/YYYY",startDate:n,endDate:a,opens:"left",timePicker:!0,timePickerIncrement:1,timePicker12Hour:!1,applyClass:"ui button green",cancelClass:"ui button secondary"},callBack:function(e,t){o.set("date_started",e.unix()),o.set("date_ended",t.unix())}}))))))),e.createElement(h,null,e.createElement("span",{className:"ui teal button",onClick:t._export,ref:"export","data-url":"v1/worktrackings/export"},s.t("exportexcel"))))))}});return f}),define("components/checkin/item-review",["react","helper","pref","eventbus","role","models/checkin","models/office","models/worktrackingrange","models/user","components/filestrip","components/table/updatebutton","language/checkin","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"CheckInReivewComponent",getInitialState:function(){return{range:{}}},filter_date:function(e){e.preventDefault(),this.props.filter("date",moment.unix(this.props.data.date_created).format("YYYYMMDD"))},filter_range:function(e){e.preventDefault(),this.props.filter("worktracking_range_id",this.props.data.worktracking_range_id)},filter_status:function(e){e.preventDefault(),this.props.filter("status",this.props.data.status)},filter_creator:function(e){e.preventDefault(),this.props.filter("creator_id",this.props.data.creator_id)},setRange:function(n){var a=this.props.data.worktracking_range_id;if(n.id==a){var i=n;this.setState({range:i}),$(e.findDOMNode(this.refs.rangename)).html(i.name).attr("style","color:#"+i.color+";border-color: #"+i.color),$(e.findDOMNode(this.refs.rangetime)).html(i.time_start+" - "+this.formatTimeEnd(i.time_end));var r=parseInt(moment.unix(this.props.data.check_in_time).format("HH:mm").replace(":","")),o=parseInt(moment.unix(this.props.data.check_in_time_final).format("HH:mm").replace(":","")),s=parseInt(i.time_start.replace(":","")),l=parseInt(moment.unix(this.props.data.check_out_time).format("HH:mm").replace(":","")),c=parseInt(moment.unix(this.props.data.check_out_time_final).format("HH:mm").replace(":",""));t.formatTime(this.props.data.check_out_time,!1,"DD")!=t.formatTime(this.props.data.check_in_time,!1,"DD")&&(l+=2400),t.formatTime(this.props.data.check_out_time_final,!1,"DD")!=t.formatTime(this.props.data.check_in_time_final,!1,"DD")&&(c+=2400);var d=parseInt(i.time_end.replace(":","")),m="",p="";if(l!=d){var h=moment.unix(this.props.data.check_out_time).format("HH:mm");this.props.data.check_out_time<=0&&(h="..."),d>l?(m="checkinouttlate",p=u.t("checkoutearly")+", "+u.t("realcheck")+": "+h,l==c&&(p=u.t("checkoutearly")+": "+h)):l>d&&(m="checkinouttearly",p=u.t("checkoutlate")+", "+u.t("realcheck")+": "+h,l==c&&(p=u.t("checkoutlate")+": "+h)),$(e.findDOMNode(this.refs.checkouttime)).addClass(m).attr("title",p)}m="",p="",r!=s&&(h=moment.unix(this.props.data.check_in_time).format("HH:mm"),s>r?(m+=" checkinouttearly",p=u.t("checkinearly")+", "+u.t("realcheck")+": "+h,r==o&&(p=u.t("checkinearly")+": "+h)):r>s&&(m="checkinouttlate",p=u.t("checkinlate")+", "+u.t("realcheck")+": "+h,r==o&&(p=u.t("checkinlate")+": "+h)),$(e.findDOMNode(this.refs.checkintime)).addClass(m).attr("title",p))}},setOffice:function(){var a=this;this.props.office_list.map(function(r,o){if(a.props.data.office_id==r.id)if($(e.findDOMNode(a.refs.officename)).text(r.name),""!=r.reviewer_list||i.hasById(i.EMPLOYEE_MANAGE_WORKTIME)){var s=r.reviewer_list.split(",");if(-1==s.indexOf(n.get("uid")))$(e.findDOMNode(a.refs.edittimebtn)).remove(),$(e.findDOMNode(a.refs.verifyurl)).html("");else if(r.date_review_checkin>0){var l=t.formatTime(t.formatTime(moment().unix()),!0),c=t.formatTime(t.formatTime(a.props.data.check_in_time),!0);l>c+86400*r.date_review_checkin&&($(e.findDOMNode(a.refs.edittimebtn)).remove(),$(e.findDOMNode(a.refs.verifyurl)).html("<a class='ui basic label mini'>"+u.t("over_time_reivew")+"</a>"))}}else $(e.findDOMNode(a.refs.edittimebtn)).remove(),$(e.findDOMNode(a.refs.verifyurl)).html("")})},renderData:function(t){var n=t.type,a=t.item,i=this;switch(n){case"employee":i.props.data.reviewer_id?a.id==i.props.data.reviewer_id&&$(e.findDOMNode(i.refs.employeeverifyname)).text(a.fullname):$(e.findDOMNode(i.refs.employeeverifyname)).text("")}},show_edit:function(t){t.preventDefault();var n=$(e.findDOMNode(this.refs.employeename)).text()+" ( "+m.t("date")+" "+$(e.findDOMNode(this.refs.date)).text()+")";this.props.show_edit(this.props.data.id,t,n,this.state.range)},show_history:function(t){t.preventDefault();var n=$(e.findDOMNode(this.refs.employeename)).text()+" ( "+m.t("date")+" "+$(e.findDOMNode(this.refs.date)).text()+")";this.props.show_history(this.props.data.detail.review_history,n)},setNote:function(){var t=this;if(""!=this.props.data.detail.check_in_note||""!=this.props.data.detail.check_out_note){var n="<b>"+u.t("checkinnote")+"</b>"+t.props.data.detail.check_in_note+"<br><b>"+u.t("checkoutnote")+"</b>"+t.props.data.detail.check_out_note;$(e.findDOMNode(this.refs.note)).popup({on:"hover",html:n})}},_save:function(){var e=$(".ui.form",this.getDOMNode());e.addClass("loading");var i=this,o=(new r).VERIFYSTATUS_VERIFIED,s=(new r).VERIFYSTATUS_UNVERIFIED,l=o,c=u.t("verify_success");i.props.data.verify_status==o&&(l=s,c=u.t("unverify_success"));var d={company_id:n.get("cid"),creator_id:n.get("uid"),check_in_time_final:i.props.data.check_in_time_final,check_out_time_final:i.props.data.check_out_time_final,worktracking_range_id:i.props.data.worktracking_range_id,ot_allow:i.props.data.ot_allow,status:i.props.data.status,allow_late:i.props.data.allow_late,allow_early:i.props.data.allow_early,office_id:i.props.data.office_id,verify_status:l};new r({id:this.props.data.id}).verify({data:d,success:function(e){t.showSuccess(c);var n=new r(e);a.trigger("checkin:update",n,"update")},error:function(e){t.notifyError(e,u)},complete:function(){e.removeClass("loading")}})},showPicture:function(){var t=this,n=[];t.props.data.check_in_file_detail.id>0&&n.push(this.props.data.check_in_file_detail),t.props.data.check_out_file_detail.id>0&&n.push(this.props.data.check_out_file_detail),n.length&&($(e.findDOMNode(this.refs.btnpicture)).hide(),e.render(e.createElement(c,{files:n}),e.findDOMNode(t.refs.picture)))},showEditActionSheet:function(e){e.preventDefault();var n=this,a=(new r).getVerify(this.props.data.verify_status),i=u.t("verify");"Verified"==a.text&&(i=u.t("unverify"));var o={buttons:[{text:i,onClick:function(e){n._save(e)}}]};this.canEdit()&&o.buttons.push({text:m.t("update"),onClick:function(e){n.show_edit(e)}}),t.showActionSheet(o)},setOtAllow:function(){this.props.data.ot_allow&&$(e.findDOMNode(this.refs.ot_allow)).checkbox("set checked")},loadEmployee:function(){var t=this;this.props.data.creator_id>0&&new l({id:this.props.data.creator_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.employeename)).text(a.fullname)}})},loadReviewer:function(){var t=this;this.props.data.reviewer_id>0?new l({id:this.props.data.reviewer_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.employeeverifyname)).text(a.fullname)}}):$(e.findDOMNode(t.refs.employeeverifyname)).text("")},loadOffice:function(){var t=this;this.props.data.office_id>0&&new o({id:this.props.data.office_id}).fetch({
success:function(n,a){$(e.findDOMNode(t.refs.officename)).text(a.name)}})},loadWorkTrackingRange:function(){var e=this;this.props.data.worktracking_range_id>0&&new s({id:this.props.data.worktracking_range_id}).fetch({success:function(t,n){e.setRange(n)}})},canEdit:function(){var e=!1;if(i.hasById(i.EMPLOYEE_CHECKIN_EDIT)){var t=i.getObjectById(i.EMPLOYEE_CHECKIN_EDIT);e=0==t.length||$.inArray(this.props.data.office_id.toString(),t)>=0}return e},canViewHistory:function(){var e=!1;return this.canEdit()&&this.props.data.detail.review_history.map(function(t){t.hasOwnProperty("action")&&(e=!0)}),e},componentDidUpdate:function(e,t){this.loadReviewer(),this.loadLateEarly()},loadLateEarly:function(){var t=new r,n="-",a="",i="";if(this.props.data.late_in_rule>t.LATE_NOT){var o=t.getLateInRule(this.props.data.late_in_rule);i=o.text,this.props.data.allow_late==t.ALLOWLATE_ALLOW&&(a="tc-checkboxsquare"),this.props.data.allow_late==t.ALLOWLATE_NOT_ALLOW&&(a="tc-checkboxsquareempty"),""!=i&&""!=a&&(n="<i style='font-size: 1.5em' class='icon "+a+"' title='"+i+"' ></i>",$(e.findDOMNode(this.refs.allowlate)).html(n))}else $(e.findDOMNode(this.refs.allowlate)).html("");if(this.props.data.early_in_rule>t.EARLY_NOT){var s=t.getEarlyInRule(this.props.data.early_in_rule);i=s.text,this.props.data.allow_early==t.ALLOWEARLY_ALLOW&&(a="tc-checkboxsquare"),this.props.data.allow_early==t.ALLOWEARLY_NOT_ALLOW&&(a="tc-checkboxsquareempty"),""!=i&&""!=a&&(n="<i style='font-size: 1.5em' class='icon "+a+"' title='"+i+"' ></i>",$(e.findDOMNode(this.refs.allowearly)).html(n))}else $(e.findDOMNode(this.refs.allowearly)).html("")},componentDidMount:function(){this.setNote(),a.on("checkinitem:update",this.renderData),this.setOffice(),this.loadLateEarly(),this.loadWorkTrackingRange(),this.loadEmployee(),this.loadReviewer(),t.isSmallScreen()||t.initMyTip($(e.findDOMNode(this)).find(".mytip_edit"),null,"left")},renderMobile:function(){var t=this,n=(new r).getStatus(this.props.data.status);this.setOtAllow();var a=moment.unix(t.props.data.date_created).format("DD/MM/YYYY");moment.unix(t.props.data.date_created).format("DD/MM/YYYY")==moment().format("DD/MM/YYYY")?a=u.t("today"):moment.unix(t.props.data.date_created).format("DD/MM/YYYY")==moment([]).subtract(1,"days").format("DD/MM/YYYY")&&(a=u.t("yesterday"));var i="",o="";return t.props.data.check_in_time_final>0&&(i=moment.unix(t.props.data.check_in_time_final).format("HH:mm")),t.props.data.check_out_time_final>0&&(o=moment.unix(t.props.data.check_out_time_final).format("HH:mm")),e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,ref:"edittimebtn",className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading mitemheadingnormal"},a," - ",e.createElement("span",{ref:"employeename"}),e.createElement("span",{ref:"status",className:"ui pull-right small simple label "+n.color},u.t(n.text))),e.createElement("div",{className:"mitemmeta"},e.createElement("span",{ref:"officename"})," · ",e.createElement("span",{ref:"rangename"})," (",e.createElement("span",{ref:"checkintime"},i)," - ",e.createElement("span",{ref:"checkouttime"},o),")")))},formatTimeEnd:function(e){var t=e.split(":"),n=parseInt(t[0]),a=n,i="";n>23&&(a=n-24,i=" Hôm sau");var r=("0"+a).slice(-2)+":"+t[1]+i;return r},renderDesktop:function(){var t=this,n=(new r).getStatus(this.props.data.status),a=(new r).getVerify(this.props.data.verify_status),i=u.t("verify"),o="green";"Verified"==a.text&&(i=u.t("unverify"),o="orange");var s=moment.unix(t.props.data.date_created).format("DD/MM/YYYY");moment.unix(t.props.data.date_created).format("DD/MM/YYYY")==moment().format("DD/MM/YYYY")?s=u.t("today"):moment.unix(t.props.data.date_created).format("DD/MM/YYYY")==moment([]).subtract(1,"days").format("DD/MM/YYYY")&&(s=u.t("yesterday"));var l="";"0.0.0.0"!=t.props.data.detail.check_out_ipaddress&&(l=t.props.data.detail.check_out_ipaddress);var c="",p="";t.props.data.check_in_time_final>0&&(c=moment.unix(t.props.data.check_in_time_final).format("HH:mm")),t.props.data.check_out_time_final>0&&(p=moment.unix(t.props.data.check_out_time_final).format("HH:mm"));var h="";""==this.props.data.detail.check_in_note&&""==this.props.data.detail.check_out_note&&(h="none");var f=!1;t.props.data.hasOwnProperty("check_in_file_detail")&&(t.props.data.check_in_file_detail.id>0||t.props.data.check_out_file_detail.id>0)&&(f=!0);var g="-",_="-";""!=this.props.data.duration&&(g=t.props.data.duration_format+t.props.data.duration_second_format),""!=this.props.data.ot_duration_format&&(_=t.props.data.ot_duration_format+t.props.data.ot_duration_second_format);var v=t.props.data.detail.check_in_ipaddress;return v+=l.length>0&&l==v?" (2)":" - "+l,e.createElement("tr",null,e.createElement("td",null,t.props.data.id),e.createElement("td",null,e.createElement("a",{onClick:t.filter_date,className:"nocolor",href:"",ref:"date"},s)),e.createElement("td",null,e.createElement("span",{ref:"employeename"})),e.createElement("td",{ref:"officename"}),e.createElement("td",null,e.createElement("a",{href:"",ref:"rangename",className:"ui basic label mini",onClick:t.filter_range}),e.createElement("span",{className:"hideonsmall"},"  ",e.createElement("span",{ref:"rangetime"}))),e.createElement("td",null,e.createElement("span",{ref:"checkintime"},c)," - ",e.createElement("span",{ref:"checkouttime"},p),e.createElement("i",{style:{display:h},className:"icon tc-filetext",ref:"note"})),e.createElement("td",null,e.createElement("span",{title:g},t.props.data.duration_format)),e.createElement("td",{ref:"ratio"},t.props.data.ratio_final),e.createElement("td",{title:_},this.props.data.ot_allow?e.createElement("i",{className:"tc-checkboxsquare icon",style:{fontSize:"1.5em"}}):e.createElement("i",{className:"tc-checkboxsquareempty icon",style:{fontSize:"1.5em"}})),e.createElement("td",{style:{textAlign:"center"},ref:"allowlate"}),e.createElement("td",{style:{textAlign:"center"},ref:"allowearly"}),e.createElement("td",{className:"collapsing"},e.createElement("span",{className:"ui small label simple "+n.color},n.text),e.createElement("div",{ref:"employeeverifyname",style:{color:"#999",fontSize:10,padding:"2px 0 0 5px"}})),e.createElement("td",{className:"collapsing",ref:"verifyurl"},e.createElement("a",{ref:"btnverify",className:"ui mini button "+o,onClick:t._save,href:"javascript:void(0)"},i)),e.createElement("td",null,v,f?e.createElement("a",{className:"icon tc-photo",ref:"btnpicture",onClick:t.showPicture}):"",e.createElement("div",{ref:"picture",id:"mailfile"})),e.createElement("td",{className:"right aligned cell_action collapsing"},e.createElement("span",{ref:"edittimebtn"},this.canViewHistory()?e.createElement("a",{href:"#",className:"mytip_edit",title:u.t("viewhistory_title"),onClick:this.show_history},e.createElement("small",null,u.t("viewhistory_button")," ·")):null,this.canEdit()?e.createElement(d,{onClick:t.show_edit}):e.createElement("span",{title:u.t("no_edit_permission"),className:"mytip_edit"},m.t("edit")))))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return p}),define("components/checkin/item",["react","helper","pref","eventbus","role","models/checkin","models/office","models/worktrackingrange","models/user","components/filestrip","language/checkin","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"CheckInComponent",getInitialState:function(){return{roleid:263,range:{}}},filter_date:function(e){e.preventDefault(),this.props.filter("date",moment.unix(this.props.data.date_created).format("YYYYMMDD"))},filter_range:function(e){e.preventDefault(),this.props.filter("worktracking_range_id",this.props.data.worktracking_range_id)},filter_status:function(e){e.preventDefault(),this.props.filter("status",this.props.data.status)},filter_creator:function(e){e.preventDefault(),this.props.filter("creator_id",this.props.data.creator_id)},formatTimeEnd:function(e){var t=e.split(":"),n=parseInt(t[0]),a=n,i="";n>23&&(a=n-24,i=" Hôm sau");var r=("0"+a).slice(-2)+":"+t[1]+i;return r},setRange:function(n){var a=this.props.data.worktracking_range_id;if(n.id==a){var i=n;this.setState({range:i}),$(e.findDOMNode(this.refs.rangename)).html(i.name).attr("style","color:#"+i.color+";border-color: #"+i.color),$(e.findDOMNode(this.refs.rangetime)).html(i.time_start+" - "+this.formatTimeEnd(i.time_end));var r=parseInt(moment.unix(this.props.data.check_in_time).format("HH:mm").replace(":","")),o=parseInt(moment.unix(this.props.data.check_in_time_final).format("HH:mm").replace(":","")),s=parseInt(i.time_start.replace(":","")),l=parseInt(moment.unix(this.props.data.check_out_time).format("HH:mm").replace(":","")),c=parseInt(moment.unix(this.props.data.check_out_time_final).format("HH:mm").replace(":",""));t.formatTime(this.props.data.check_out_time,!1,"DD")!=t.formatTime(this.props.data.check_in_time,!1,"DD")&&(l+=2400),t.formatTime(this.props.data.check_out_time_final,!1,"DD")!=t.formatTime(this.props.data.check_in_time_final,!1,"DD")&&(c+=2400);var u=parseInt(i.time_end.replace(":","")),m="",p="";if(l!=u){var h=moment.unix(this.props.data.check_out_time).format("HH:mm");this.props.data.check_out_time<=0&&(h="..."),u>l?(m="checkinouttlate",p=d.t("checkoutearly")+", "+d.t("realcheck")+": "+h,l==c&&(p=d.t("checkoutearly")+": "+h)):l>u&&(m="checkinouttearly",p=d.t("checkoutlate")+", "+d.t("realcheck")+": "+h,l==c&&(p=d.t("checkoutlate")+": "+h)),$(e.findDOMNode(this.refs.checkouttime)).addClass(m).attr("title",p)}m="",p="",r!=s&&(h=moment.unix(this.props.data.check_in_time).format("HH:mm"),s>r?(m+=" checkinouttearly",p=d.t("checkinearly")+", "+d.t("realcheck")+": "+h,r==o&&(p=d.t("checkinearly")+": "+h)):r>s&&(m="checkinouttlate",p=d.t("checkinlate")+", "+d.t("realcheck")+": "+h,r==o&&(p=d.t("checkinlate")+": "+h)),$(e.findDOMNode(this.refs.checkintime)).addClass(m).attr("title",p))}},setOffice:function(){var a=this;this.props.office_list.map(function(r,o){if(a.props.data.office_id==r.id)if($(e.findDOMNode(a.refs.officename)).text(r.name),""!=r.reviewer_list||i.hasById(i.EMPLOYEE_MANAGE_WORKTIME)){var s=r.reviewer_list.split(","),l=t.formatTime(t.formatTime(moment().unix())),c=t.formatTime(a.props.data.checkin_time);-1==s.indexOf(n.get("uid"))?($(e.findDOMNode(a.refs.edittimebtn)).remove(),$(e.findDOMNode(a.refs.verifyurl)).html("")):l>c+86400*r.date_review_checkin&&($(e.findDOMNode(a.refs.edittimebtn)).remove(),$(e.findDOMNode(a.refs.verifyurl)).html(d.t("over_time_reivew")))}else $(e.findDOMNode(a.refs.edittimebtn)).remove(),$(e.findDOMNode(a.refs.verifyurl)).html("")})},renderData:function(t){var n=t.type,a=t.item,i=this;switch(n){case"employee":i.props.data.reviewer_id&&a.id==i.props.data.reviewer_id&&$(e.findDOMNode(i.refs.employeeverifyname)).text(a.fullname)}},show_edit:function(t){var n=$(e.findDOMNode(this.refs.employeename)).text()+" ( "+u.t("date")+" "+$(e.findDOMNode(this.refs.date)).text()+")";this.props.show_edit(this.props.data.id,t,n,this.state.range)},setNote:function(){var t=this;if(""!=this.props.data.detail.check_in_note||""!=this.props.data.detail.check_out_note){var n="<b>"+d.t("checkinnote")+"</b>"+t.props.data.detail.check_in_note+"<br><b>"+d.t("checkoutnote")+"</b>"+t.props.data.detail.check_out_note;$(e.findDOMNode(this.refs.note)).popup({on:"hover",html:n})}},_save:function(){var e=$(".ui.form",this.getDOMNode());e.addClass("loading");var i=this,o=(new r).VERIFYSTATUS_VERIFIED,s=(new r).VERIFYSTATUS_UNVERIFIED,l=o,c=d.t("verify_success");i.props.data.verify_status==o&&(l=s,c=d.t("unverify_success")),new r({id:this.props.data.id}).save({company_id:n.get("cid"),creator_id:n.get("uid"),check_in_time_final:i.props.data.check_in_time_final,check_out_time_final:i.props.data.check_out_time_final,worktracking_range_id:i.props.data.worktracking_range_id,ot_allow:i.props.data.ot_allow,status:i.props.data.status,office_id:i.props.data.office_id,verify_status:l},{success:function(e,n){t.showSuccess(c),a.trigger("checkin:update",e,"update")},error:function(e,t){console.log(t)},complete:function(){e.removeClass("loading")}})},showPicture:function(){var t=this,n=[];t.props.data.check_in_file_detail.id>0&&n.push(this.props.data.check_in_file_detail),t.props.data.check_out_file_detail.id>0&&n.push(this.props.data.check_out_file_detail),n.length&&($(e.findDOMNode(this.refs.btnpicture)).hide(),e.render(e.createElement(c,{files:n}),e.findDOMNode(t.refs.picture)))},componentWillUnmount:function(){},setOtAllow:function(){this.props.data.ot_allow&&$(e.findDOMNode(this.refs.ot_allow)).checkbox("set checked")},loadEmployee:function(){var t=this;this.props.data.creator_id>0&&new l({id:this.props.data.creator_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.employeename)).text(a.fullname)}})},loadReviewer:function(){var t=this;this.props.data.reviewer_id>0&&new l({id:this.props.data.reviewer_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.employeeverifyname)).text(a.fullname)}})},loadOffice:function(){var t=this;this.props.data.office_id>0&&new o({id:this.props.data.office_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.officename)).text(a.name)}})},loadWorkTrackingRange:function(){var e=this;this.props.data.worktracking_range_id>0&&new s({id:this.props.data.worktracking_range_id}).fetch({success:function(t,n){e.setRange(n)}})},componentDidUpdate:function(e,t){this.loadLateEarly()},loadLateEarly:function(){var t=new r,n="-",a="",i="";if(this.props.data.late_in_rule>t.LATE_NOT){var o=t.getLateInRule(this.props.data.late_in_rule);i=o.text,this.props.data.allow_late==t.ALLOWLATE_ALLOW&&(a="tc-checkboxsquare"),this.props.data.allow_late==t.ALLOWLATE_NOT_ALLOW&&(a="tc-checkboxsquareempty"),""!=i&&""!=a&&(n="<i style='font-size: 1.5em' class='icon "+a+"' title='"+i+"' ></i>",$(e.findDOMNode(this.refs.allowlate)).html(n))}if(this.props.data.early_in_rule>t.EARLY_NOT){var s=t.getEarlyInRule(this.props.data.early_in_rule);i=s.text,this.props.data.allow_early==t.ALLOWEARLY_ALLOW&&(a="tc-checkboxsquare"),this.props.data.allow_early==t.ALLOWEARLY_NOT_ALLOW&&(a="tc-checkboxsquareempty"),""!=i&&""!=a&&(n="<i style='font-size: 1.5em' class='icon "+a+"' title='"+i+"' ></i>",$(e.findDOMNode(this.refs.allowearly)).html(n))}},componentDidMount:function(){this.setNote(),a.on("checkinitem:update",this.renderData),this.loadLateEarly(),this.setOffice(),this.loadWorkTrackingRange(),this.loadEmployee(),this.loadReviewer(),t.isSmallScreen()||t.initMyTip($(e.findDOMNode(this)).find(".mytip"))},renderMobile:function(){var t=this,n=(new r).getStatus(this.props.data.status);this.setOtAllow();var a=moment.unix(t.props.data.date_created).format("DD/MM/YYYY");moment.unix(t.props.data.date_created).format("DD/MM/YYYY")==moment().format("DD/MM/YYYY")?a=d.t("today"):moment.unix(t.props.data.date_created).format("DD/MM/YYYY")==moment([]).subtract(1,"days").format("DD/MM/YYYY")&&(a=d.t("yesterday"));var i="",o="";return t.props.data.check_in_time_final>0&&(i=moment.unix(t.props.data.check_in_time_final).format("HH:mm")),t.props.data.check_out_time_final>0&&(o=moment.unix(t.props.data.check_out_time_final).format("HH:mm")),e.createElement("tr",null,e.createElement("td",null,e.createElement("div",{className:"mitemheading mitemheadingnormal mitemheadingnomargin"},a," - ",e.createElement("span",{ref:"employeename"}),e.createElement("span",{ref:"status",className:"ui pull-right small simple label "+n.color},d.t(n.text))),e.createElement("div",{className:"mitemmeta"},e.createElement("span",{ref:"officename"})," · ",e.createElement("span",{ref:"rangename"})," (",e.createElement("span",{ref:"checkintime"},i)," - ",e.createElement("span",{ref:"checkouttime"},o),")")))},renderDesktop:function(){var t=this,n=(new r).getStatus(this.props.data.status),a=(new r).getVerify(this.props.data.verify_status),i=d.t("verify"),o="green";"Verified"==a.text&&(i=d.t("unverify"),o="orange");var s=moment.unix(t.props.data.date_created).format("DD/MM/YYYY");moment.unix(t.props.data.date_created).format("DD/MM/YYYY")==moment().format("DD/MM/YYYY")?s=d.t("today"):moment.unix(t.props.data.date_created).format("DD/MM/YYYY")==moment([]).subtract(1,"days").format("DD/MM/YYYY")&&(s=d.t("yesterday"));var l="";"0.0.0.0"!=t.props.data.detail.check_out_ipaddress&&(l=t.props.data.detail.check_out_ipaddress);var c="",u="";t.props.data.check_in_time_final>0&&(c=moment.unix(t.props.data.check_in_time_final).format("HH:mm")),t.props.data.check_out_time_final>0&&(u=moment.unix(t.props.data.check_out_time_final).format("HH:mm"));var m="";""==this.props.data.detail.check_in_note&&""==this.props.data.detail.check_out_note&&(m="none");var p=!1;t.props.data.hasOwnProperty("check_in_file_detail")&&(t.props.data.check_in_file_detail.id>0||t.props.data.check_out_file_detail.id>0)&&(p=!0);var h="-",f="-";""!=this.props.data.duration&&(h=t.props.data.duration_format+t.props.data.duration_second_format),""!=this.props.data.ot_duration_format&&(f=t.props.data.ot_duration_format+t.props.data.ot_duration_second_format);var g=t.props.data.detail.check_in_ipaddress;return g+=l.length>0&&l==g?" (2)":" - "+l,e.createElement("tr",null,e.createElement("td",null,t.props.data.id),e.createElement("td",null,e.createElement("span",{ref:"date"},s)),e.createElement("td",{ref:"officename"}),e.createElement("td",null,e.createElement("a",{href:"",ref:"rangename",className:"ui basic label mini",onClick:t.filter_range}),e.createElement("span",{className:"hideonsmall"},"  ",e.createElement("span",{ref:"rangetime"}))),e.createElement("td",null,e.createElement("span",{ref:"checkintime"},c)," - ",e.createElement("span",{ref:"checkouttime"},u),e.createElement("i",{style:{display:m},className:"icon tc-filetext",ref:"note"})),e.createElement("td",null,e.createElement("span",{title:h},t.props.data.duration_format)),e.createElement("td",{ref:"ratio"},t.props.data.ratio_final),e.createElement("td",{title:f},this.props.data.ot_allow?e.createElement("i",{className:"tc-checkboxsquare icon",style:{fontSize:"1.5em"}}):e.createElement("i",{className:"tc-checkboxsquareempty icon",style:{fontSize:"1.5em"}})),e.createElement("td",{style:{textAlign:"center"},ref:"allowlate"}),e.createElement("td",{style:{textAlign:"center"},ref:"allowearly"}),e.createElement("td",null,e.createElement("span",{className:"ui small label simple "+n.color},n.text)),e.createElement("td",null,e.createElement("span",{ref:"employeeverifyname"})))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return m}),define("components/checkin/modal-export",["react","backbone","setting","role","pref","helper","eventbus","language/checkin","language/default","components/headingdatepicker"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"CheckinModalExportComponent",getInitialState:function(){return{hmac:""}},getDefaultProps:function(){return{date_started:moment({h:0,m:0,s:0}).startOf("month").unix(),date_ended:moment({h:0,m:0,s:0}).endOf("month").unix(),store_id:0}},_doExport:function(e){var t=this,a=e.nativeEvent;a.preventDefault();var o=n.rooturl+"v1/worktrackings/report/export";if(""!=t.state.hmac){var s=t._getExportUrl(o,t.state.hmac);window.open(s,r.getWindowTarget())}else{var l={company_id:i.get("cid"),user_id:i.get("uid")};$.ajax({url:o,method:"GET",data:l,dataType:"json",success:function(e){if(""!=e.hmac){var n=t._getExportUrl(o,e.hmac);t.setState({hmac:e.hmac}),window.open(n,r.getWindowTarget())}}})}},_getExportUrl:function(e,t){return queryString="company_id="+i.get("cid")+"&user_id="+i.get("uid"),queryString+="&hmac="+encodeURIComponent(t),console.log(t),queryString+="&date_started="+this.refs.time.getDateStart(),queryString+="&date_ended="+this.refs.time.getDateEnd(),e+="?"+queryString},componentDidMount:function(){$(".ui.modal",e.findDOMNode(this)).modal({context:e.findDOMNode(this),autofocus:!1,onShow:function(){},onHide:function(){o.trigger("checkin:closeModal")}}).modal("show")},render:function(){var t=this.props.date_started||moment({h:0,m:0,s:0}).startOf("month").unix(),n=this.props.date_started||moment({h:0,m:0,s:0}).endOf("month").unix();return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal"},e.createElement("div",{className:"header"},s.t("heading_export")),e.createElement("div",{className:"content ui segment"},e.createElement("div",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("div",{style:{height:5}}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,l.t("time")),e.createElement(c,{start:t,end:n,ref:"time"}))))))),e.createElement("div",{className:"actions"},e.createElement("a",{className:"ui noborder basic button cancel close"},l.t("close")),e.createElement("a",{onClick:this._doExport,className:"ui button teal"},s.t("download_excel")))))}});return d}),define("components/checkin/report",["react","helper","pref","eventbus","models/checkin","models/office","models/user","language/checkin","language/default"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"CheckInComponent",componentWillUnmount:function(){a.off("checkinreport:update",this.renderData)},componentDidMount:function(){a.on("checkinreport:update",this.renderData),this.loadUser()},filter_employee:function(e){e.preventDefault(),$.isFunction(this.props.filter)&&this.props.filter("creator_id",this.props.data.user_id)},loadUser:function(){var n=this;new o({id:this.props.data.user_id}).fetch({success:function(a,i){$(e.findDOMNode(n.refs.fullname)).empty().append(e.renderToString(e.createElement("img",{className:"ui avatar image",src:t.getAvatarPath(i.avatar)}))).append("<a href='javascript:void(0)'>"+i.fullname+"</a>");var r="";n.props.data.internal_id.length>0&&(r=n.props.data.internal_id),$(e.findDOMNode(n.refs.internalid)).text(r)}})},renderData:function(n){var a=n.type,i=n.item,r=this;switch(a){case"employee":if(r.props.data.user_id>0&&i.id==r.props.data.user_id){$(e.findDOMNode(r.refs.fullname)).empty().append(e.renderToString(e.createElement("img",{className:"ui avatar image",src:t.getAvatarPath(i.avatar)}))).append("<a href='javascript:void(0)'>"+i.fullname+"</a>");var o="";r.props.data.internal_id.length>0&&(o=r.props.data.internal_id),$(e.findDOMNode(r.refs.internalid)).html(o)}}},setUser:function(){var n=this;new o({id:this.props.data.user_id}).fetch({success:function(a,i){$(e.findDOMNode(n.refs.fullname)).empty().append(e.renderToString(e.createElement("img",{className:"ui avatar image",src:t.getAvatarPath(i.avatar)}))).append("<a href='javascript:void(0)'>"+i.fullname+"</a>");var r="";n.props.data.internal_id>0&&(r="<span class='ui basic label small'>"+n.props.data.internal_id+"</span>"),$(e.findDOMNode(n.refs.internalid)).html(r)}})},show_edit:function(t){var n=$(e.findDOMNode(this.refs.employeename)).text()+" ("+l.t("day")+" "+$(e.findDOMNode(this.refs.date)).text()+")";this.props.show_edit(this.props.data.id,t,n)},render:function(){var n=this;return second=this.props.data.duration_second,e.createElement("tr",null,e.createElement("td",{ref:"internalid"}),e.createElement("td",{ref:"fullname",onClick:n.filter_employee}),e.createElement("td",null,n.props.data.job_title),e.createElement("td",null,n.props.data.department.name),e.createElement("td",null,n.props.data.office.name),e.createElement("td",{title:n.props.data.duration+second},n.props.data.duration),e.createElement("td",{className:"center aligned"},n.props.data.ratio),e.createElement("td",{className:"center aligned"},t.numberFormat(n.props.data.count_late)))}});return c}),define("components/checkin/report-table",["react","helper","language/checkin","components/checkin/report"],function(e,t,n,a){var i=e.createClass({displayName:"CheckInReportTableComponent",render:function(){var i=this;return e.createElement("table",{className:t.tableclass()},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,n.t("internalid")),e.createElement("th",null,n.t("employee")),e.createElement("th",null,n.t("position")),e.createElement("th",null,n.t("department")),e.createElement("th",null,n.t("office")),e.createElement("th",null,n.t("duration")),e.createElement("th",{className:"center aligned"},n.t("ratio")),e.createElement("th",{className:"center aligned"},n.t("report_count_late")))),e.createElement("tbody",null,this.props.items.map(function(t,n){return e.createElement(a,{filter:i.props.doFilter,key:t.id,loaddata:i.props.loadData,data:t})})))}});return i}),define("components/checkin/summary/statistic",["react","pref","helper","language/checkin","language/default","models/checkin","components/checkin/report-table"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"CheckinSummaryStatisticComponent",getInitialState:function(){var e=this.parsePreDate(this.props.filters.date_started,this.props.filters.date_ended),t=$.extend({},this.props.filters,e);return{late_list:[],early_list:[],new_late_list:[],stop_late_list:[],filters:this.props.filters,preFilters:t}},parsePreDate:function(e,t){var n=moment.unix(e),a=moment.unix(t),i={};if(a.month()==n.month()&&a.year()==n.year()&&moment.unix(t).endOf("month").unix()==t&&moment.unix(e).startOf("month").unix()==e)i.date_started=n.subtract(1,"month").unix(),i.date_ended=a.subtract(1,"month").unix(),console.log("mm",n.toString(),a.toString());else{var r=a.unix()-n.unix()+1;i.date_started=n.subtract(r,"second").unix(),i.date_ended=a.subtract(r,"second").unix(),console.log(!1,n.toString(),a.toString())}return i},processData:function(e,t){var n=[],a=[],i=[],r=[],o=[],s=[];t.forEach(function(e){e.count_late>0?s.push(e):o.push(e)}),e.forEach(function(e){e.count_late>0?(n.push(e),$.each(o,function(){return this.id==e.id?(i.push(e),!1):void 0})):$.each(s,function(){return this.id==e.id?(r.push(e),!1):void 0}),e.count_early>0&&a.push(e)}),this.setState({late_list:n,early_list:a,new_late_list:i,stop_late_list:r})},parseQueries:function(e,n){var a=n?this.state.preFilters:this.state.filters,i=$.extend({},a,{company_id:t.get("cid"),page:e||1,limit:1e3});return i},loadCurrentData:function(e,t,n){var a=this;$.isArray(t)||(t=[]);var i=n||$.Deferred(),o=this.parseQueries(e);return(new r).getReport(o,function(e){t=t.concat(e.items),e.total/e.limit>e.currentpage?a.loadCurrentData(e.currentpage+1,t,i):i.resolve(t)},function(e){i.reject(e)}),i.promise()},loadPreData:function(e,t,n){var a=this;$.isArray(t)||(t=[]);var i=n||$.Deferred(),o=this.parseQueries(e,!0);return(new r).getReport(o,function(e){t=t.concat(e.items),e.total/e.limit>e.currentpage?a.loadPreData(e.currentpage+1,t,i):i.resolve(t)},function(e){i.reject(e)}),i.promise()},loadData:function(){var t=this;$(e.findDOMNode(this)).addClass("loading"),$.when(this.loadCurrentData(),this.loadPreData()).done(function(e,n){t.processData(e,n)}).fail(function(){t.setState({late_list:[],early_list:[],new_late_list:[],stop_late_list:[]})}).always(function(){$(e.findDOMNode(t)).removeClass("loading")})},showItems:function(t,n){n.preventDefault();var a=[];switch(t){case"late_list":a=this.state.late_list;break;case"early_list":a=this.state.early_list;break;case"new_late_list":a=this.state.new_late_list;break;case"stop_late_list":a=this.state.stop_late_list}if(!(a.length<=0)){var i=$(".label",n.currentTarget).text();$(e.findDOMNode(this.refs.modal_header)).text(i),e.render(e.createElement(o,{items:a}),e.findDOMNode(this.refs.modal_content)),$(e.findDOMNode(this.refs.modal)).modal("show")}},initMyTip:function(){var t=$(".ui.statistic",e.findDOMNode(this));n.initMyTip(t,null,null,!1)},componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({context:e.findDOMNode(this),onShow:function(){$("body").addClass("has-modal")},onHide:function(){$("body").removeClass("has-modal")}}),this.initMyTip(),this.loadData()},render:function(){var t=moment.unix(this.state.preFilters.date_started).format("DD/MM/YYYY");return t+=" - ",t+=moment.unix(this.state.preFilters.date_ended).format("DD/MM/YYYY"),e.createElement("div",{className:"ui center aligned segment",style:{margin:"10px 0"}},e.createElement("div",{className:"ui divided four column grid",style:{margin:0}},e.createElement("div",{className:"column"},e.createElement("div",{style:{cursor:this.state.late_list.length>0?"pointer":""},className:"ui small statistic",onClick:this.showItems.bind(this,"late_list")},e.createElement("div",{className:"value"},n.numberFormat(this.state.late_list.length)),e.createElement("div",{className:"label",style:{textTransform:"none",fontWeight:"normal"}},a.t("report_statistic_count_late_label")))),e.createElement("div",{className:"column"},e.createElement("div",{style:{cursor:this.state.early_list.length>0?"pointer":""},className:"ui small statistic",onClick:this.showItems.bind(this,"early_list")},e.createElement("div",{className:"value"},n.numberFormat(this.state.early_list.length)),e.createElement("div",{className:"label",style:{textTransform:"none",fontWeight:"normal"}},a.t("report_statistic_count_early_label")))),e.createElement("div",{className:"column"},e.createElement("div",{title:a.t("report_time_compare_label")+" "+t,style:{cursor:this.state.new_late_list.length>0?"pointer":""},className:"ui small statistic",onClick:this.showItems.bind(this,"new_late_list")},e.createElement("div",{className:"value"},n.numberFormat(this.state.new_late_list.length)),e.createElement("div",{className:"label",style:{textTransform:"none",fontWeight:"normal"}},a.t("report_statistic_count_new_late_label")))),e.createElement("div",{className:"column"},e.createElement("div",{title:a.t("report_time_compare_label")+" "+t,style:{cursor:this.state.stop_late_list.length>0?"pointer":""},className:"ui small statistic",onClick:this.showItems.bind(this,"stop_late_list")},e.createElement("div",{className:"value"},n.numberFormat(this.state.stop_late_list.length)),e.createElement("div",{className:"label",style:{textTransform:"none",fontWeight:"normal"}},a.t("report_statistic_count_stop_late_label"))))),e.createElement("div",{ref:"modal",className:"ui fullscreen modal"},e.createElement("i",{className:"icon close tc-cross"}),e.createElement("div",{className:"header",ref:"modal_header"}),e.createElement("div",{className:"content",ref:"modal_content"}),e.createElement("div",{className:"actions"},e.createElement("a",{className:"ui tiny basic cancel button"},i.t("close")))))}});return s}),define("components/checkin/terminal/employeepicker",["react","helper","pref","cacheddata","models/user","models/employee","collections/employee"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"EmployeePickerComponent",getDefaultProps:function(){return{inputname:"",inputid:"",defaulttext:"------",defaultvalue:[],ignoreuserid:0,allowuseridlist:[],getgroup:!1,disabled:!1}},getInitialState:function(){return{disabled:this.props.disabled}},onClickIconHandler:function(e){e.preventDefault(),e.stopPropagation();var t=this.getSelectedUserIdList();0==t.length||this.restoreDefaults()},updateEmployeeToView:function(n){var a=this,r=a.props.allowuseridlist||[],o=n.length,s=0;$.each(n,function(n,l){l.is_group_id>0?a.props.getgroup||o--:l.user_id==a.props.ignoreuserid||0!=r.length&&!a.isAllowUserID(l.user_id)?o--:new i({id:l.user_id}).fetch({error:function(){s++},success:function(n,i){s++,html='<div class="item" data-value="'+i.id+"\" data-text=\"<span class='ui green big label'>"+l.internal_id+"</span>"+i.fullname+'" style="font-size:20px;"><img class="ui mini avatar image" style="width: 30px; height: 30px; max-height: initial;" src="'+t.getAvatarPath(i.avatar)+'" /><span class="ui small green label">'+l.internal_id+"</span> "+i.fullname+'<span class="pull-right hideonsmall" style="color:#ccc">'+l.job_title+"</span></div>",$(e.findDOMNode(a.refs.employeelist)).append(html)},complete:function(){s==o&&a._initDropdown()}})}),a._initDropdown()},isAllowUserID:function(e){for(var t=!1,n=this.props.allowuseridlist,a=0;a<n.length;a++){var i=parseInt(n[a]);if(i==e){t=!0;break}}return t;
},_initDropdown:function(){if($(e.findDOMNode(this.refs.dropdown)).dropdown("refresh"),this.props.defaultvalue.length>0){var t=[];this.props.defaultvalue.forEach(function(e,n){t.push(e.toString())}),$(e.findDOMNode(this.refs.dropdown)).dropdown("set selected",t)}},_onChange:function(t,n,a){0==t?($(e.findDOMNode(this.refs.iconclear)).hide(),$(e.findDOMNode(this.refs.iconsearch)).show()):($(e.findDOMNode(this.refs.iconclear)).show(),$(e.findDOMNode(this.refs.iconsearch)).hide()),"function"==typeof this.props.onChange&&this.props.onChange(t,n,a)},_onLabelSelect:function(e,t,n){"function"==typeof this.props.callbackSelected&&this.props.callbackSelected(e,t,n)},restoreDefaults:function(){$(e.findDOMNode(this.refs.dropdown)).dropdown("restore defaults"),$(e.findDOMNode(this.refs.dropdown)).dropdown("set text",this.props.defaulttext)},setList:function(t){var n=[];t.forEach(function(e,t){n.push(e.toString())}),$(e.findDOMNode(this.refs.dropdown)).dropdown("set selected",n)},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.dropdown)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},componentDidUpdate:function(e,t){e.disabled!=this.props.disabled&&this.setState({disabled:this.props.disabled})},componentDidMount:function(){var t=this,i=[];a.has("employee")?(i=a.get("employee"),this.updateEmployeeToView(i().get())):($(e.findDOMNode(this.refs.dropdown)).addClass("loading"),(new o).fetch({data:{company_id:n.get("cid"),limit:200,is_not_deleted:1},success:function(e,n){t.updateEmployeeToView(n.items)},complete:function(){$(e.findDOMNode(t.refs.dropdown)).removeClass("loading")}})),$(e.findDOMNode(this.refs.dropdown)).dropdown({fullTextSearch:!0,onAdd:function(n,a,i){t._onLabelSelect(n,a,i),$(e.findDOMNode(t.refs.dropdown)).dropdown("hide")},onChange:function(e,n,a){t._onChange(e,n,a)}})},render:function(){var t=this.props.defaulttext;return e.createElement("div",{ref:"dropdown",className:"ui massive fluid search selection dropdown "+(this.state.disabled?"disabled":"")},e.createElement("input",{type:"hidden",name:this.props.inputname,id:this.props.inputid}),e.createElement("i",{ref:"iconsearch",className:"tc-search pull-right icon"}),e.createElement("a",{href:"#",onClick:this.onClickIconHandler,className:"hide pull-right",ref:"iconclear",style:{color:"#ccc",position:"absolute",zIndex:3,right:15,padding:"6px 10px"}},e.createElement("i",{className:"tc-cross icon"})),e.createElement("div",{className:"default text"},t),e.createElement("div",{className:"menu",ref:"employeelist"}))}});return s}),define("components/select",["react","pref","helper"],function(e,t,n){var a=e.createClass({displayName:"SelectComponent",getDefaultProps:function(){return{name:"",value:-1,items:[],className:"",place_holder:"",empty_value:"",disabled:!1}},val:function(e){return"undefined"==typeof e?this.getValue():void this.setValue(e)},getValue:function(){return e.findDOMNode(this).value},setValue:function(t){$(e.findDOMNode(this)).val(t).trigger("refresh")},onChangeProxy:function(){"function"==typeof this.props.onChange&&this.props.onChange(this.getValue())},componentDidUpdate:function(){$(e.findDOMNode(this)).val(this.props.value)},componentDidMount:function(){$(e.findDOMNode(this)).customSelect()},render:function(){return e.createElement("select",{name:this.props.name,disabled:this.props.disabled,defaultValue:this.props.value,className:this.props.className,onChange:this.onChangeProxy},""!=this.props.place_holder?e.createElement("option",{key:-1,value:this.props.empty_value},this.props.place_holder):"",this.props.items.map(function(t,n){return e.createElement("option",{key:t.code,value:t.code},t.text)}))}});return a}),define("components/checkin/terminal/worktracking",["react","backbone","helper","pref","role","eventbus","querystring","language/checkin","language/default","models/checkin","models/office","models/file","models/worktrackingrange","collections/checkin","collections/worktrackingrange","components/select","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g){var _=e.createClass({displayName:"TerminalWorktrackingComponent",getDefaultProps:function(){return{office_id:0,user_id:0,worktracking:{id:0,worktracking_range_id:0}}},getInitialState:function(){return{office_id:this.props.office_id,user_id:this.props.user_id,worktracking:this.props.worktracking,range_list:[],range_list_empty:!1,range:null,webcam_init:!1}},isWebcamLoadSuccess:!0,checkInAddHandler:function(){var t=$(e.findDOMNode(this));t.addClass("loading");var i=0;this.refs.hasOwnProperty("select-range")&&(i=this.refs["select-range"].getValue());var o=this,l="checkin",d=$('[name="note"]',t).val(),u="",m=0,p=0,h=i,f=s.t("check_in_success");this.state.worktracking.id>0&&(l="checkout",f=s.t("check_out_success"),h=this.state.worktracking.worktracking_range_id,d=this.state.worktracking.detail.check_in_note,u=$('[name="note"]',t).val(),m=this.state.worktracking.allow_late,p=this.state.worktracking.allow_early);var g=$(e.findDOMNode(this.refs.fileid)).val(),_=new c;_.doTerminalAdd({data:{company_id:a.get("cid"),creator_id:a.get("uid"),user_id:this.props.user_id,worktracking_id:this.state.worktracking.id,worktracking_range_id:h,office_id:o.state.office_id,check_in_source:(new c).SOURCE_WEB,file_id:g,type:l,allow_late:m,allow_early:p,check_in_note:d,check_out_note:u},success:function(e){n.showSuccess(f),r.trigger("terminal:changeuser",0)},error:function(e){console.log(e),n.notifyError(e,s,"error_add")},complete:function(){t.removeClass("loading")}})},_save:function(){var t=$(e.findDOMNode(this.refs.webcamdatauri)).val();0==t.length?this.checkInAddHandler():this.updateWebcamPhotoHandler()},loadAllRangeFromOffice:function(){var e=this,t={company_id:a.get("cid"),office_id:this.state.office_id,limit:50,is_not_deleted:1,status:(new m).STATUS_ENABLE,sort_by:"display_order",sort_type:"ASC"};(new h).fetch({data:t,success:function(t,n){n.total>0?e.setState({range_list:n.items}):e.setState({range_list_empty:!0})},complete:function(){}})},doWebcamInit:function(){var t=this;if(n.isPhonegap());else{var a=parseInt($(e.findDOMNode(this.refs.webcamwrapper)).width()),i=parseInt(2*a/3);(isNaN(a)||isNaN(i)||0==a)&&(a=240,i=160),Webcam.set({width:a,height:i,dest_width:a,dest_height:i,image_format:"jpeg",jpeg_quality:90,force_flash:!1,flip_horiz:!0,fps:30,flashNotDetectedText:s.t("error_webcamjs_flashnotfound")}),console.log("webcam init"),Webcam.on("error",function(n){alert(n),n.indexOf("Adobe Flash Player")>=0&&(alert(s.t("error_webcamjs_flashnotfound")),$(e.findDOMNode(t.refs.webcamwrapper)).hide(),$(e.findDOMNode(t.refs.webcamphotowrapper)).hide()),t.isWebcamLoadSuccess=!1,console.log("webcam error",n),$(e.findDOMNode(t.refs.webcaminiterror)).html("Webcam.js Error: "+n),$(e.findDOMNode(t.refs.webcamwrapper)).hide()}),Webcam.attach("#my_camera")}},removeWebcamPhotoHandler:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.webcamdatauri)).val(""),$(e.findDOMNode(this.refs.fileid)).val("0"),$(e.findDOMNode(this.refs.my_result)).html(""),$(e.findDOMNode(this.refs.removewebcamphotobutton)).hide()},updateWebcamPhotoHandler:function(){var t=this,n=$(e.findDOMNode(this.refs.webcamdatauri)).val();$("#body-loader").addClass("active"),(new u).save({company_id:a.get("cid"),creator_id:a.get("uid"),object_type:(new u).OBJECTTYPE_WORKGROUP,object_id:0,is_directory:0,data_uri:n,data_uri_title:"checkin-"+a.get("uid")+"-"+a.get("cid")+"-"+moment().format("DD-MM-YYYY")},{success:function(n,a){$(e.findDOMNode(t.refs.fileid)).val(a.id),r.trigger("checkin:submit")},error:function(e){console.log("Upload file error: ",e)},complete:function(){$("#body-loader").removeClass("active")}})},doWebcamShutdown:function(){n.isPhonegap()||this.isWebcamLoadSuccess&&Webcam.reset()},doWebcamTakeSnapshotHandler:function(t){t.preventDefault();var a=this;n.isPhonegap()?navigator.camera.getPicture(function(t){var n="data:image/jpeg;base64,"+t;$("#webcamdatauri").val(n),document.getElementById("my_result").innerHTML='<img src="'+n+'" width="120" />',$(e.findDOMNode(a.refs.removewebcamphotobutton)).show()},function(e){n.showError(e)},{quality:70,targetWidth:360,targetHeight:360,correctOrientation:!0,destinationType:Camera.DestinationType.DATA_URL}):Webcam.snap(function(t,n,i){$("#webcamdatauri").val(t),document.getElementById("my_result").innerHTML='<img src="'+t+'" width="120" height="80" />',$(e.findDOMNode(a.refs.removewebcamphotobutton)).show()})},componentDidUpdate:function(e,t){var n=this;this.state.range_list_empty||this.state.range_list.length>0&&0==t.range_list.length&&null==this.state.range&&this.state.worktracking.worktracking_range_id>0&&$.each(this.state.range_list,function(e,t){t.id==n.state.worktracking.worktracking_range_id&&n.setState({range:t})}),!this.state.webcam_init&&(this.state.range_list.length>0||null!=this.state.range)&&this.setState({webcam_init:!0}),this.state.webcam_init&&!t.webcam_init&&this.doWebcamInit()},componentWillMount:function(){this.loadAllRangeFromOffice()},componentWillUnmount:function(){this.doWebcamShutdown(),r.off("checkin:submit",this.checkInAddHandler)},componentDidMount:function(){var e=this;$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}}),r.on("checkin:submit",this.checkInAddHandler)},render:function(){var t=0==this.state.worktracking.id,a=t?"80%":"20%",i=t?"20%":"80%",r=$.map(this.state.range_list,function(e,t){return{code:e.id,text:e.name+" ("+e.time_start+" - "+n.formatTimeEndWorkRange(e.time_end)+")"}});return e.createElement("div",{style:{marginTop:20}},e.createElement("div",{className:"ui pointing fluid two item labeled icon menu"},e.createElement("a",{className:"item "+(t?"active":"disabled"),style:{width:a}},e.createElement("i",{className:"tc-login icon"}),s.t("terminal_checkin")),e.createElement("a",{className:"item "+(t?"disabled":"active"),style:{width:i}},e.createElement("i",{className:"tc-logout icon"}),s.t("terminal_checkout"))),e.createElement("div",{className:"ui fluid segment card",style:{background:"rgba(0,0,0,0.05)",paddingTop:10,paddingBottom:10}},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"ui stackable grid"},e.createElement("div",{className:"ten wide column"},this.state.worktracking.worktracking_range_id>0?e.createElement("div",{className:"field"},e.createElement("label",null,s.t("terminal_current_range")),e.createElement("div",null,null!=this.state.range?e.createElement("span",{style:{color:"red"}},this.state.range.name+" ("+this.state.range.time_start+" - "+n.formatTimeEndWorkRange(this.state.range.time_end)+")"):e.createElement("span",{className:"ui active small inline loader"}))):e.createElement("div",{className:"field"},e.createElement("label",null,s.t("terminal_select_range")),e.createElement(f,{className:"fluid",ref:"select-range",items:r})),e.createElement("div",{className:"field",style:{marginTop:10}},e.createElement("label",null,s.t("note")),e.createElement("textarea",{rows:"2",name:"note"})),e.createElement("div",{ref:"webcamphotowrapper",className:"field",style:{marginTop:10}},e.createElement("label",null,s.t("webcamphoto")),e.createElement("input",{type:"hidden",ref:"webcamdatauri",id:"webcamdatauri"}),e.createElement("input",{type:"hidden",ref:"fileid",id:"fileid"}),e.createElement("div",{id:"my_result",ref:"my_result"}),e.createElement("a",{ref:"removewebcamphotobutton",className:"hide",href:"#",onClick:this.removeWebcamPhotoHandler},"[Remove photo]"),e.createElement("span",{ref:"webcaminiterror",style:{fontSize:10,color:"red"}})),e.createElement("div",{className:"field",style:{marginTop:20}},this.state.worktracking.id>0?e.createElement("button",{className:"ui large fluid orange button",type:"submit"},s.t("checkedout")):e.createElement("button",{className:"ui large fluid orange button",type:"submit"},s.t("checkedin")))),e.createElement("div",{ref:"webcamwrapper",className:"six wide column"},e.createElement("div",{style:{textAlign:"center"}},e.createElement("div",{id:"my_camera",style:{width:"240px",height:"160px",fontWeight:"bold"}}),e.createElement("br",null),e.createElement("a",{href:"#",onClick:this.doWebcamTakeSnapshotHandler,className:"ui mini grey button"},n.isIos()?s.t("capture_onios"):s.t("capture"))))))))}});return _}),define("components/checkin/terminal/form",["react","backbone","eventbus","helper","pref","language/checkin","models/checkin","components/checkin/terminal/employeepicker","components/checkin/terminal/worktracking"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"CheckInTerminalFormComponent",getDefaultProps:function(){return{office_id:0,user_id:0}},getInitialState:function(){return{office_id:this.props.office_id,user_id:0,isCheckingData:!1,worktracking:null}},changeUser:function(e){var e=parseInt(e);e=e>0?e:0,e!=this.state.user_id&&this.setState({user_id:e,isCheckingData:!1,worktracking:null})},doCheck:function(e){e.preventDefault();var t=this;if(this.state.user_id>0){this.setState({isCheckingData:!0});var n=new o;n.doTerminalCheck({data:{company_id:i.get("cid"),creator_id:i.get("uid"),office_id:this.props.office_id,user_id:this.state.user_id},success:function(e){t.setState({worktracking:e})},error:function(e){a.notifyError(e,r)},complete:function(){t.setState({isCheckingData:!1})}})}},componentWillUnmount:function(){n.off("terminal:changeuser",this.changeUser)},componentDidUpdate:function(e,t){},componentDidMount:function(){n.on("terminal:changeuser",this.changeUser)},render:function(){return e.createElement("div",null,e.createElement(s,{defaultvalue:this.state.user_id,multiple:!1,disabled:this.state.isCheckingData,ref:"employees",inputname:"employee",defaulttext:r.t("terminal_selectemployee"),onChange:this.changeUser}),null!=this.state.worktracking?e.createElement(l,{key:"worktracking-"+moment().unix(),office_id:this.state.office_id,user_id:this.state.user_id,worktracking:this.state.worktracking}):e.createElement("div",{className:"ui grid two column",style:{marginTop:0}},e.createElement("div",{className:"column"},this.state.isCheckingData?e.createElement("div",null,e.createElement("span",{className:"ui active inline loader"}),e.createElement("span",{style:{marginLeft:10}},r.t("terminal_checking_user"))):null),e.createElement("div",{className:"column"},e.createElement("a",{href:"#",className:"ui fluid massive teal button"+(this.state.user_id>0&&!this.state.isCheckingData?"":" disabled"),onClick:this.doCheck,style:{borderRadius:4}},r.t("terminal_btn_continue")))))}});return c}),define("components/mixin/selectdropdown",["react","backbone","helper","cacheddata","language/default"],function(e,t,n,a,i){return{getDefaultProps:function(){return{value:"",items:[],allowItemIds:[],multiple:!1,emptyOption:!0,emptyOptionText:i.t("filterOptionAll"),className:"",inline:!0,onChange:function(){}}},getInitialState:function(){return{items:this.props.items}},val:function(e){return"undefined"==typeof e?this.getValue():void this.setValue(e)},getValue:function(){var t=$(e.findDOMNode(this)).dropdown("get value");return this.props.multiple&&(t=$(e.findDOMNode(this)).dropdown("get values")),t},setValue:function(t){$(e.findDOMNode(this)).dropdown("set selected",t).trigger("refresh")},onChangeProxy:function(){var t=this.getValue();0==t||""==t?$(e.findDOMNode(this)).addClass("filterbarempty"):$(e.findDOMNode(this)).removeClass("filterbarempty"),"function"==typeof this.props.onChange&&this.props.onChange(t)},_load:function(e,t){var n=a.get(e);if(void 0===n)this._loadDataLive(1);else{var i=n().get();t="undefined"!=typeof t?t:[];var r=[];t.length>0?$.each(i,function(e,n){$.inArray(n.id.toString(),t)>=0&&r.push(n)}):r=i,this.setState({items:r})}},searchIconClick:function(t){if($(e.findDOMNode(this.refs.search_icon)).hasClass("tc-cross")){var n=e.findDOMNode(this.refs.search_input);n.value=""}},searchChange:function(e){e.currentTarget.value},getShowText:function(){var e=this,t="";return this.state.items.map(function(n){n.id+""==e.props.value&&(t=n.name)}),t},componentDidUpdate:function(){this.props.multiple&&this.props.value.length>0?$(this.getDOMNode()).dropdown("refresh").dropdown("set selected",this.props.value.split(",")):$(this.getDOMNode()).dropdown("refresh").dropdown("set selected",this.props.value)},componentDidMount:function(){this._loadData();var t=this;$(e.findDOMNode(this)).dropdown({fullTextSearch:!0,message:n.getDropdownMessage(),onShow:function(){setTimeout(function(){$(e.findDOMNode(t.refs.search_input)).focus()},200)},onChange:t.onChangeProxy})},renderSearch:function(){return[e.createElement("div",{className:"ui search icon input",key:"search-input",style:{margin:".5em"}},e.createElement("i",{ref:"search_icon",className:"icon tc-search",onClick:this.searchIconClick}),e.createElement("input",{ref:"search_input",placeholder:this.props.searchPlaceHolder,onChange:this.searchChange})),e.createElement("div",{className:"divider",key:"search-divider"})]},renderItem:function(){var t=this;return e.createElement("div",{className:"ui dropdown "+this.props.className+" "+(this.props.inline?"inline":"")+" "+(this.props.multiple?"multiple":"")},e.createElement("div",{className:"text"},this.getShowText()),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},this.props.allowedSearch?this.renderSearch():null,this.props.emptyOption?e.createElement("div",{className:"item","data-value":""},this.props.emptyOptionText):null,this.state.items.map(function(n,a){return n.isDivider?e.createElement("div",{className:"divider",key:"divider-"+a}):0==t.props.allowItemIds.length||$.inArray(n.id+"",t.props.allowItemIds)>=0?e.createElement("div",{className:"item","data-value":n.id,key:n.id},n.name):void 0})))}}}),define("components/dropdown/office",["react","pref","cacheddata","collections/office","models/office","components/mixin/selectdropdown"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"DropdownOfficeComponent",mixins:[r],_loadDataLive:function(e){var n=this;(new a).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,status:(new i).STATUS_ENABLE,sort_by:"name",sort_type:"ASC",page:e},success:function(e,t){n.setState({items:n.state.items.concat(t.items)}),Math.ceil(t.total/t.limit)>t.currentpage&&n._loadDataLive(t.currentpage+1)}})},_loadData:function(){this._load((new i).cacheName)},render:function(){return this.renderItem()}});return o}),define("components/checkin/terminal",["react","backbone","helper","pref","role","eventbus","querystring","language/checkin","language/default","models/checkin","models/office","models/employee","models/file","collections/checkin","components/dropdown/office","components/heading","components/checkin/terminal/form"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g){var _=e.createClass({displayName:"CheckInTerminalComponent",getInitialState:function(){return{office_id:0,office:null}},loadOfficeInfo:function(e){var t=this;new d({id:e}).fetch({success:function(e,n){t.setState({office:n})},error:function(){n.showError("Office Not Found.")}})},resetOffice:function(e){e.preventDefault(),this.setState({office_id:0,office:null})},setOffice:function(e){e!=this.state.office_id&&(this.loadOfficeInfo(e),this.setState({office_id:e}))},componentDidMount:function(){},componentWillUnmount:function(){},componentDidUpdate:function(e,t){t.office_id>0&&0==this.state.office_id&&this.refs.filteroffice.val("")},render:function(){return e.createElement("div",{className:"ui segments"},e.createElement("div",{className:"ui segment"},e.createElement("div",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"two wide field"}),e.createElement("div",{className:"twelve wide field"},null!=this.state.office?e.createElement("h1",{style:{paddingTop:40,textAlign:"center",textTransform:"uppercase"}},this.state.office.name,e.createElement("a",{href:"#",onClick:this.resetOffice,title:"",className:"ui big icon noborder basic button pull-left"},e.createElement("i",{className:"icon tc-left"}))):e.createElement("h1",{style:{paddingTop:40,textAlign:"center",textTransform:"uppercase"}},s.t("heading_terminal")),e.createElement("div",{style:{display:this.state.office_id>0?"none":""}},e.createElement(h,{className:"massive search selection fluid",multiple:!1,emptyOption:!0,emptyOptionText:s.t("terminal_selectoffice"),inline:!1,ref:"filteroffice",allowItemIds:i.getObjectById(i.EMPLOYEE_CHECKIN_TERMINAL),value:this.state.office_id,onChange:this.setOffice})),this.state.office_id>0?e.createElement(g,{office_id:this.state.office_id}):null)))))}});return _}),define("components/colorpicker",["react","language/default"],function(e,t){var n=e.createClass({displayName:"ColorPickerComponent",getDefaultProps:function(){return{size:10,palette:[],onHide:function(e){}}},onHide:function(t){$(e.findDOMNode(this)).val(t.toHexString()),this.props.onHide(t)},componentDidMount:function(){$(e.findDOMNode(this.refs.color)).spectrum({chooseText:t.t("choose"),preferredFormat:"hex",showPalette:!0,showInput:!0,palette:this.props.palette,hide:this.onHide})},_handleChangeInput:function(e){$(this.getDOMNode()).css({backgroundColor:e.target.value})},render:function(){var t=this.props.value,n=new RegExp("^#[0-9A-F]{6}$","i").test(t);return n||(t="#ac725e"),e.createElement("input",{ref:"color",name:"color",defaultValue:t})}});return n}),define("components/company/planitem",["react"],function(e){var t=e.createClass({displayName:"PlanItemComponent",render:function(){return e.createElement("li",{className:"plan-item"},e.createElement("span",{style:{display:"none"},className:"item-alert item-success"},e.createElement("i",{className:"tc-tick"})),e.createElement("span",{style:{color:"red",display:"none"},className:"item-alert item-error"},e.createElement("i",{className:"tc-warning"}))," ",this.props.text)}});return t}),define("components/company/initpopup",["react","backbone","socket","basecontroller","pref","role","setting","helper","eventbus","companymodule","language/company","models/company","models/department","models/office","models/companysetting","components/company/planitem"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"CompanyInitComponent",getDefaultProps:function(){return{}},getJobCount:function(){return total=2},handleComplete:function(){this.stepCount>=this.maxStep&&($(e.findDOMNode(this.refs.buttoncontinuewrapper)).show(),$(e.findDOMNode(this.refs.initlabelindicator)).text(d.t("never_init_summary_done"))),$(e.findDOMNode(this.refs.progress)).progress("increment")},saveDepartments:function(t){var n=this;$(".item-alert",e.findDOMNode(n.refs.plan_item_department)).hide();var a=!1;t.forEach(function(r,o){var s={company_id:i.get("cid"),creator_id:i.get("uid")};s=$.extend(s,r),(new m).save(s,{success:function(){a=!0},complete:function(){o>=t.length-1&&(a===!0?$(".item-success",e.findDOMNode(n.refs.plan_item_department)).show():$(".item-error",e.findDOMNode(n.refs.plan_item_department)).show(),n.stepCount++,n.handleComplete())}})})},saveOffices:function(t){var n=this;$(".item-alert",e.findDOMNode(n.refs.plan_item_office)).hide();var a=!1;t.forEach(function(r,o){var s={company_id:i.get("cid"),creator_id:i.get("uid")};s=$.extend(s,r),(new p).save(s,{success:function(){a=!0},complete:function(){o>=t.length-1&&(a===!0?$(".item-success",e.findDOMNode(n.refs.plan_item_office)).show():$(".item-error",e.findDOMNode(n.refs.plan_item_office)).show(),n.stepCount++,n.handleComplete())}})})},savePlan:function(){this.stepCount=0,this.maxStep=this.getJobCount(),this.saveDepartments([{name:d.t("default_department_name_1")}]),this.saveOffices([{name:d.t("default_office_name_1")}])},continueClickHandle:function(n){n.preventDefault(),$(e.findDOMNode(this.refs.modal)).modal("hide");var a="employee";t.history.navigate(a,{trigger:!0})},componentDidUpdate:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.modal)).modal({autofocus:!1,context:$(e.findDOMNode(this)),closable:!1,onVisible:function(){var n=t.getJobCount();$(e.findDOMNode(t.refs.progress)).progress({duration:200,total:n}),setTimeout(function(){t.savePlan()},1e3)},onHide:function(){}}).modal("show")},render:function(){return e.createElement("div",{id:"companyinitdialog"},e.createElement("div",{className:"ui small modal",ref:"modal"},e.createElement("div",{className:"content"},e.createElement("div",{className:"ui indicating progress","data-value":"1","data-total":"200",ref:"progress"},e.createElement("div",{className:"bar"},e.createElement("div",{className:"progress"})),e.createElement("div",{ref:"initlabelindicator",className:"label",style:{marginTop:20}},d.t("never_init_summary"))),e.createElement("div",{ref:"buttoncontinuewrapper",style:{paddingTop:30,textAlign:"center",display:"none"}},e.createElement("a",{href:"#",onClick:this.continueClickHandle,className:"ui button"},d.t("initContinue"))))))}});return g}),define("components/company/ipaddress",["react","helper","basemodel","pref","language/checkin"],function(e,t,n,a,i){var r=e.createClass({displayName:"IpAddressComponent",componentDidMount:function(){var t=(new n).urlRoot+"v1/companies/ip",a={},i=this;$.ajax({url:t,type:"GET",data:a,success:function(t){t=$.parseJSON(t),$(e.findDOMNode(i.refs.ipload)).html(t.ip)},error:function(e){}})},render:function(){return e.createElement("span",{ref:"ipload"})}});return r}),define("language/courselimit",["baselanguage"],function(e){var t={vn:{heading:"Giới hạn xem khóa học",heading_sidebar:"Giới hạn xem khóa học",employee:"Nhân viên",name:"Tên danh mục khóa học",type:"Phân loại",displayorder:"Thứ tự",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",delete:"Xóa",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",back:"Trở lại",close:"Đóng",coursecategory_info_title:"Thông tin danh mục khóa học",coursecategory_info_content:"Thông tin chi tiết danh mục khóa học",filter_status:"Trạng thái",filter_type:"Loại",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",sort_display_order:"Thứ tự hiển thị",sort_name:"Tên",sort_point:"Điểm",sort_date_created:"Ngày tạo",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",error_store_is_reqiure:"Vui lòng chọn cửa hàng!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_not_permissin_check:"Bạn không có quyền chấm điểm",error_lms_course_id_existed:"Đối tượng đã được giới hạn",error_object_id_is_exist:"Đối tượng đã được giới hạn",error_point_is_require:"Vui lòng nhập điểm và điểm phải lớn hơn 0!",error_limit_type_required:"Vui lòng chọn loại giới hạn",error_object_id_required:"Vui lòng chọn đối tượng!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",TYPE_BAD:"Xấu",TYPE_GOOD:"Tốt",zerodata_text:"Chưa có tiêu chí nào.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới.",LIMITTYPE_DEPARTMENT:"Phòng ban",LIMITTYPE_OFFICE:"Văn phòng",LIMITTYPE_TYPE:"Loại",LIMITTYPE_POSITION:"Vị trí",LIMITTYPE_EMPLOYEE:"Nhân viên",limittype:"Giới hạn theo",object:"Đối tượng",addlink:"[+] Thêm đối tượng được xem khóa học này..."},en:{heading:"Giới hạn xem khóa học",heading_sidebar:"Giới hạn xem khóa học",employee:"Nhân viên",name:"Tên danh mục khóa học",type:"Phân loại",displayorder:"Thứ tự",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",delete:"Xóa",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",back:"Trở lại",close:"Đóng",coursecategory_info_title:"Thông tin danh mục khóa học",coursecategory_info_content:"Thông tin chi tiết danh mục khóa học",filter_status:"Trạng thái",filter_type:"Loại",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",sort_display_order:"Thứ tự hiển thị",sort_name:"Tên",sort_point:"Điểm",sort_date_created:"Ngày tạo",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",error_store_is_reqiure:"Vui lòng chọn cửa hàng!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_not_permissin_check:"Bạn không có quyền chấm điểm",error_lms_course_id_existed:"Đối tượng đã được giới hạn",error_object_id_is_exist:"Đối tượng đã được giới hạn",error_point_is_require:"Vui lòng nhập điểm và điểm phải lớn hơn 0!",error_limit_type_required:"Vui lòng chọn loại giới hạn",error_object_id_required:"Vui lòng chọn đối tượng!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",TYPE_BAD:"Xấu",TYPE_GOOD:"Tốt",zerodata_text:"Chưa có tiêu chí nào.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới.",LIMITTYPE_DEPARTMENT:"Phòng ban",LIMITTYPE_OFFICE:"Văn phòng",LIMITTYPE_TYPE:"Loại",LIMITTYPE_POSITION:"Vị trí",LIMITTYPE_EMPLOYEE:"Nhân viên",limittype:"Giới hạn theo",object:"Đối tượng",addlink:"[+] Thêm đối tượng được xem khóa học này..."}};return new e({lang:t})}),define("models/course-limit",["basemodel","language/courselimit","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmscourselimits",cacheName:"lmscourselimits",STATUS_ENABLE:1,STATUS_DISABLE:2,LIMITTYPE_OFFICE:1,LIMITTYPE_DEPARTMENT:3,LIMITTYPE_TYPE:5,LIMITTYPE_POSITION:7,LIMITTYPE_EMPLOYEE:9,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t},getTypeList:function(){return[{code:this.LIMITTYPE_DEPARTMENT,text:t.t("LIMITTYPE_DEPARTMENT"),color:"green"},{code:this.LIMITTYPE_OFFICE,text:t.t("LIMITTYPE_OFFICE"),color:"red"},{code:this.LIMITTYPE_POSITION,text:t.t("LIMITTYPE_POSITION"),color:"red"},{code:this.LIMITTYPE_EMPLOYEE,text:t.t("LIMITTYPE_EMPLOYEE"),color:"red"}]},getType:function(e){e=parseInt(e);var t=this.getTypeList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t}});return a}),define("components/select-file/filethumbnail",["react","setting","components/confirm","models/file"],function(e,t,n,a){var i=e.createClass({displayName:"FileThumbnailComponent",getDefaultProps:function(){return{style:{}}},remove:function(){this.props.remove(this.props.data.id)},componentDidMount:function(){var t=this;$.inArray(this.props.data.extension,["jpg","png","jpeg"])>=0&&$(e.findDOMNode(this.refs.image)).colorbox({rel:"gal",maxWidth:"100%"}),$(e.findDOMNode(this.refs.remove)).popup({on:"click",popup:e.findDOMNode(this.refs.confirm),movePopup:!1,onShow:function(e){$(this).find(".confirm").fastClick(function(n){n.preventDefault(),$(e).popup("hide"),t.remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}})},componentWillUnmount:function(){},render:function(){var t=new a(this.props.data);return e.createElement("div",{style:this.props.style},e.createElement("div",{className:"ui fluid image",style:{paddingRight:"4px"}},e.createElement("a",{className:"ui red right corner label tiny",ref:"remove"},e.createElement("i",{className:"icon tc-trash"})),e.createElement("div",{ref:"confirm",className:"ui popup",style:{whiteSpace:"nowrap"}},e.createElement(n,null)),e.createElement("a",{href:t.getDownloadUrl(),title:this.props.data.title,ref:"image",rel:"gal"},e.createElement("img",{src:t.getThumbnail(),style:{minHeight:"40px",border:"1px solid #eee"}}))))},getThumbnailFromExtension:function(e){}});return i}),define("components/select-file/filestrip",["react","eventbus","components/select-file/filethumbnail"],function(e,t,n){var a=e.createClass({displayName:"FileStripComponent",getDefaultProps:function(){return{removefile_func:"",files:[],classname:"tiny"};
},getInitialState:function(){return{files:this.props.files,file_delete:[]}},getFileList:function(){var e="";if(this.state.files.length){var t=[];this.state.files.map(function(e,n){t.push(e.id)}),e=t.join(",")}return e},getFileDeleteList:function(){return this.state.file_delete},remove:function(e){var t=this.state.files,n=this.state.file_delete;this.state.files.map(function(a,i){e==a.id&&(t.splice(i,1),n.push(e))}),this.setState({files:t,file_delete:n})},getFilelist:function(){var e=[];return this.state.files.map(function(t,n){e.push(t.id)}),e},getFileDeletelist:function(){var e=[];return this.state.file_delete.map(function(t,n){e.push(t)}),e},componentDidMount:function(){},componentWillUnmount:function(){},render:function(){var t=this,a={};return this.state.files.length>1&&(a={float:"left"}),e.createElement("div",{className:"ui images eproductfilestrip "+this.props.classname,style:{marginTop:"8px"}},this.state.files.map(function(i,r){return e.createElement(n,{style:a,data:i,key:i.id,remove:t.remove})}))}});return a}),define("components/select-file/filelist",["react","backbone","pref","eventbus","language/setting","language/default","language/file","components/select-file/filestrip","models/file","helper"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"fileListComponent",getInitialState:function(){return{count:this.props.count,file_id_list:this.props.file_id_list,file_id_list_detail:this.props.file_id_list_detail}},getDefaultProps:function(){return{updatefile_func:"",labelText:r.t("fileidlist"),file_id_list:"",id:"filelist",limit:0,limit_by_get:0,count:0,file_id_list_detail:[]}},getFileListByLimit:function(){var e="",t=this.state.file_id_list;if(""!=t){var n=t.split(",");this.props.limit_by_get<n.length?(e=n.splice(this.props.limit_by_get,n.length),e=e.join(",")):e=t}return e},getFileList:function(){return this.state.file_id_list},setFileId:function(e,t){var n=[];""!=this.state.file_id_list&&this.state.file_id_list&&(n=this.state.file_id_list.split(",")),n.push(t.id.toString()),n=$.unique(n);var a=n.join(",");this.state.file_id_list_detail.push(t),this.setState({file_id_list:a,file_id_list_detail:this.state.file_id_list_detail})},onCancel:function(e){var t=this.state.count;this.setState({count:t-1})},onError:function(e){var t=this.state.count+1;this.setState({count:t}),t>this.props.limit&&c.showError(o.t("UPLOAD_LIMIT_EXCEEDED"))},componentDidUpdate:function(){},componentDidMount:function(){var t=this,n={onUploadComplete:t.setFileId,onCancel:t.onCancel};parseInt(this.props.limit)>0&&(n.uploadlimit=this.props.limit,n.onAddQueueItem=t.onError),(new l).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new l).OBJECTTYPE_MESSAGE,0,(new l).STATUS_ENABLE,n)},render:function(){return e.createElement("span",null,e.createElement("label",null,this.props.labelText),e.createElement("input",{type:"file",ref:"fileinput",id:this.props.id,name:"ffile",multiple:"multiple"}))}});return d}),define("components/course/select-limit",["react","backbone","helper","pref","eventbus","language/courselimit","language/default","models/course-limit","collections/course-limit","components/select-status"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"SelectCourseLimitComponent",getInitialState:function(){return{items:[],item:[]}},loadData:function(e){var t=this;(new l).fetch({data:{company_id:a.get("cid"),lms_course_id:t.props.data.id,page:e},success:function(e,n){var a=$.extend([],t.state.items),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push(e)}),t.setState({items:a})}i>n.currentpage&&t.getCategoryList(parseInt(n.currentpage)+1)},error:function(e,t){}})},componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidMount:function(){var t=this;this.props.course.is_time_limit?$(e.findDOMNode(this.refs.limit)).show():$(e.findDOMNode(this.refs.limit)).hide(),$(e.findDOMNode(this.refs.is_time_limit)).checkbox({onChecked:function(){$(e.findDOMNode(t.refs.limit)).show()},onUnchecked:function(){$(e.findDOMNode(t.refs.limit)).hide()}})},render:function(){return e.createElement("div",{className:"fields"},e.createElement("div",{className:"three wide field",ref:"limit"},e.createElement("label",null,r.t("limittype")),e.createElement(c,{data:(new s).getTypeList(),placeholder:r.t("limittype"),ref:"limittype",value:0})),e.createElement("div",{className:"three wide field coure-limit-object",ref:"object-employee",style:{display:"none"}},e.createElement("label",null,r.t("employee")),e.createElement("input",null)),e.createElement("div",{className:"three wide field coure-limit-object",ref:"object-deparment",style:{display:"none"}},e.createElement("label",null,r.t("deparment")),e.createElement("input",null)),e.createElement("div",{className:"three wide field coure-limit-object",ref:"object-office",style:{display:"none"}},e.createElement("label",null,r.t("office")),e.createElement("input",null)),e.createElement("div",{className:"three wide field coure-limit-object",ref:"object-position",style:{display:"none"}},e.createElement("label",null,r.t("position")),e.createElement("input",null)))}});return d}),define("components/course/tab-info",["react","backbone","helper","pref","language/course","language/default","collections/course-category","models/course-category","models/course-limit","models/course","components/select-file/filelist","components/select-file/filestrip","components/heading","components/course/select-limit","components/semantic-datepicker","components/tinymce","components/select-status"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g){var _=e.createClass({displayName:"CourseTabInfoAddComponent",getInitialState:function(){return{categoryList:[],data:this.props.data}},getCategoryList:function(e){var t=this,n={company_id:a.get("cid"),status:(new s).STATUS_ENABLE,page:e};(new o).fetch({data:n,success:function(e,n){var a=$.extend([],t.state.categoryList),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push({code:e.id,text:e.name,color:""})}),t.setState({categoryList:a})}i>n.currentpage&&t.getCategoryList(parseInt(n.currentpage)+1)},error:function(){}})},getFile:function(){var e="";return e=this.refs.oldfile.getFileList(),""!=this.refs.newfile.getFileListByLimit()&&(e=this.refs.newfile.getFileListByLimit()),e},getFileThumb:function(){var e="";return e=this.refs.thumboldfile.getFileList(),""!=this.refs.thumbnewfile.getFileListByLimit()&&(e=this.refs.thumbnewfile.getFileListByLimit()),e},_save:function(){var t=this,o=n.formatTime(this.refs.date_start.getDatePicker().element.context.value,!0),s=n.formatTime(this.refs.date_end.getDatePicker().element.context.value,!0);new c,$(".ui.form").addClass("loading");var l={company_id:a.get("cid"),creator_id:a.get("uid"),lms_course_category_id:$(e.findDOMNode(t.refs.category)).dropdown("get value"),name:$(e.findDOMNode(t.refs.name)).val(),description:tinyMCE.get("description").getContent(),visibility:$(e.findDOMNode(t.refs.visibility)).dropdown("get value"),skill_level:$(e.findDOMNode(t.refs.skilllevel)).dropdown("get value"),date_started:o,date_ended:s,language:$(e.findDOMNode(t.refs.language)).val(),cover_file_id:this.getFile(),thumbnail_id:this.getFileThumb(),status:$(e.findDOMNode(t.refs.status)).dropdown("get value")};new c({id:this.state.data.id}).save(l,{success:function(e,t){n.showSuccess(r.t("update_success"))},error:function(e,t){n.notifyError(t,i,r.t("insert_fail"))},complete:function(){$(".ui.form").removeClass("loading")}})},componentDidUpdate:function(){$(e.findDOMNode(this.refs.category)).dropdown("set value",this.state.data.lms_course_category_id)},componentDidMount:function(){this.getCategoryList(1),$(e.findDOMNode(this.refs.durationinminute)).autoNumeric({lZero:"deny",mDec:"0",vMin:"0"}),$(e.findDOMNode(this.refs.outcome)).add($(e.findDOMNode(this.refs.is_free))).add($(e.findDOMNode(this.refs.is_time_limit))).checkbox(),parseInt(this.state.data.outcome)>0&&$(e.findDOMNode(this.refs.outcome)).checkbox("set checked"),parseInt(this.state.data.is_free)>0&&$(e.findDOMNode(this.refs.is_free)).checkbox("set checked"),parseInt(this.state.data.is_time_limit)>0&&$(e.findDOMNode(this.refs.is_time_limit)).checkbox("set checked"),$(e.findDOMNode(this.refs.price)).autoNumeric({lZero:"deny",mDec:"0",vMin:"0"})},render:function(){var t=this,a={format:"DD/MM/YYYY",singleDatePicker:!0,showDropdowns:!0,applyClass:"ui button green",cancelClass:"ui button secondary"},r=$.extend({},a);r.startDate=n.formatTime(this.props.data.date_started);var o=$.extend({},a);o.startDate=n.formatTime(this.props.data.date_ended);var s={menubar:!0,autoresize_min_height:170,toolbar:"undo redo formatselect | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist | indent outdent | link unlink image"};return e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:" eight wide  field"},e.createElement("label",null,i.t("name")),e.createElement("input",{type:"text",ref:"name",defaultValue:this.state.data.name}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four  field"},e.createElement("label",null,i.t("category")),e.createElement(g,{key:moment().valueOf(),data:t.state.categoryList,ref:"category",value:this.state.data.lms_course_category_id}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide  field"},e.createElement("label",null,i.t("language")),e.createElement("input",{type:"text",ref:"language",defaultValue:this.state.data.language}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("date_start")),e.createElement(h,{ref:"date_start",key:moment().unix(),options:r})),e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("date_end")),e.createElement(h,{ref:"date_end",key:moment().unix(),options:o}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,i.t("visibility")),e.createElement(g,{data:(new c).getVisibilityList(),ref:"visibility",value:this.state.data.visibility}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,i.t("skilllevel")),e.createElement(g,{data:(new c).getSkillList(),ref:"skilllevel",value:this.state.data.skill_level}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("status")),e.createElement(g,{data:(new c).getStatusList(),ref:"status",value:this.state.data.status}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"sixteen wide field"},e.createElement("label",null,i.t("description")),e.createElement(f,{ref:"description",id:"description",autoLoad:!0,config:s,content:this.props.data.description}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide field required"},e.createElement("label",null,i.t("coverfileid")),e.createElement("div",{className:"field wide twelve"},e.createElement(d,{limit_by_get:1,ref:"newfile",labelText:""}),e.createElement(u,{files:this.state.data.file_detail,classname:"small",name:"filelist",ref:"oldfile"})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide field required"},e.createElement("label",null,i.t("thumnail")),e.createElement("div",{className:"field wide twelve"},e.createElement(d,{limit_by_get:1,ref:"thumbnewfile",labelText:"",id:"thumbnail_id"}),e.createElement(u,{files:this.state.data.file_detail_thumbnail,classname:"small",name:"filelist",ref:"thumboldfile"})))))}});return _}),define("components/courseteacherpicker",["react","helper","pref","cacheddata","models/user","models/course-teacher","collections/course-teacher"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"CourseTeacherPickerComponent",getDefaultProps:function(){return{inputname:"",inputid:"",defaulttext:"------",defaultvalue:[],ignoreuserid:0,allowuseridlist:[],getgroup:!1,max:200}},componentWillUpdate:function(){},componentDidMount:function(){var a=this;(new o).fetch({data:{company_id:n.get("cid"),limit:200,status:(new r).STATUS_ENABLE,is_not_deleted:1},success:function(n,i){var r=i.items;if(i.total>0){var o=r.length;r.map(function(n,i){html='<div class="item" data-value="'+n.id+'" data-text="'+n.name+'"><img class="ui mini avatar image" style="width: 24px; height: 24px; max-height: initial;" src="'+t.getAvatarPath(n.avatar)+'" />'+n.name+"</div>",$(e.findDOMNode(a.refs.employeelist)).append(html),i==o-1&&a._initDropdown()})}},complete:function(){$(e.findDOMNode(a.refs.dropdown)).removeClass("loading")}}),$(e.findDOMNode(this.refs.dropdown)).dropdown({maxSelections:this.props.max,fullTextSearch:!0,onAdd:function(e,t,n){a._onLabelSelect(e,t,n)},onRemove:function(e,t,n){a._onLabelRemove(e,t,n)},onChange:function(e,t,n){a._onChange(e,t,n)}})},_initDropdown:function(){if($(e.findDOMNode(this.refs.dropdown)).dropdown("refresh"),this.props.defaultvalue.length>0){var t=[];this.props.defaultvalue.forEach(function(e,n){t.push(e.toString())}),$(e.findDOMNode(this.refs.dropdown)).dropdown("set selected",t)}},_onChange:function(e,t,n){"function"==typeof this.props.onChange&&this.props.onChange(e,t,n)},_onLabelSelect:function(e,t,n){"function"==typeof this.props.callbackSelected&&this.props.callbackSelected(e,t,n)},_onLabelRemove:function(e,t,n){"function"==typeof this.props.callbackRemove&&this.props.callbackRemove(e,t,n)},restoreDefaults:function(){$(e.findDOMNode(this.refs.dropdown)).dropdown("restore defaults")},setList:function(t){var n=[];t.forEach(function(e,t){n.push(e.toString())}),$(e.findDOMNode(this.refs.dropdown)).dropdown("set selected",n)},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.dropdown)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},render:function(){var t=this.props.defaulttext;return e.createElement("div",{ref:"dropdown",className:"ui fluid multiple search selection dropdown "+this.props.disabled},e.createElement("input",{type:"hidden",name:this.props.inputname,id:this.props.inputid}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},t),e.createElement("div",{className:"menu",ref:"employeelist"}))}});return s}),define("components/course/add",["react","backbone","helper","role","companysetting","pref","language/course","language/default","models/course","models/course-category","models/course-teacher-rel","collections/course-category","components/course/tab-info","components/heading","components/select-status","components/courseteacherpicker","components/select-file/filelist","components/select-file/filestrip","components/semantic-datepicker","components/tinymce","components/select","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b){var N=e.createClass({displayName:"CourseAddComponent",getInitialState:function(){return{categoryList:[]}},getCategoryList:function(e){var t=this,n={company_id:r.get("cid"),status:(new c).STATUS_ENABLE,page:e};(new u).fetch({data:n,success:function(e,n){var a=$.extend([],t.state.categoryList),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push({code:e.id,text:e.name,color:""})}),t.setState({categoryList:a})}i>n.currentpage&&t.getCategoryList(parseInt(n.currentpage)+1)},error:function(){}})},_save:function(){var a=this,i=n.formatTime(this.refs.date_start.getDatePicker().element.context.value,!0),c=n.formatTime(this.refs.date_end.getDatePicker().element.context.value,!0);(new l).save({company_id:r.get("cid"),creator_id:r.get("uid"),lms_course_category_id:$(e.findDOMNode(a.refs.category)).dropdown("get value"),name:$(e.findDOMNode(a.refs.name)).val(),description:tinyMCE.get("description").getContent(),visibility:0|$(e.findDOMNode(a.refs.visibility)).dropdown("get value"),skill_level:$(e.findDOMNode(a.refs.skilllevel)).dropdown("get value"),language:$(e.findDOMNode(a.refs.language)).val(),cover_file_id:a.refs.coverfileid.getFileList(),thumbnail_id:a.refs.thumnail_id.getFileList(),date_started:i,date_ended:c,status:$(e.findDOMNode(a.refs.status)).dropdown("get value")},{success:function(e,a){n.showSuccess(s.t("insert_success")),t.history.navigate("course",{trigger:!0})},error:function(e,t){n.notifyError(t,o,s.t("insert_fail"))},complete:function(){$(".ui.form").removeClass("loading")}})},componentDidMount:function(){var t=this;$(".ui.form",this.getDOMNode()).form({inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t._save()}}),this.getCategoryList(1),$(".menu.item").tab(),$(e.findDOMNode(this.refs.durationinminute)).autoNumeric({lZero:"deny",mDec:"0",vMin:"0"}),$(".ui.checkbox").checkbox(),$(e.findDOMNode(this.refs.price)).autoNumeric({lZero:"deny",mDec:"0",vMin:"0"})},componentWillMount:function(){a.hasById(a.ELEARNING_MANAGE)||(n.showError(s.t("error_not_permission")),t.history.navigate("#",{trigger:!0}))},render:function(){var t=this,n={};0==this.state.store_selected&&(n={display:"none"});var a={format:"DD/MM/YYYY",singleDatePicker:!0,showDropdowns:!0,applyClass:"ui button green",cancelClass:"ui button secondary"},i=$.extend({},a);i.startDate=moment().unix();var r=$.extend({},a);r.startDate=moment().unix();var c={menubar:!0,autoresize_min_height:170,toolbar:"undo redo formatselect | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist | indent outdent | link unlink image"};return e.createElement("div",{className:"ui segments"},e.createElement(p,{link:"#course",text:o.t("heading"),subtext:s.t("insert")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"ui fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,o.t("course_info_title"))),e.createElement("p",null,o.t("course_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"required eight wide  field"},e.createElement("label",null,o.t("name")),e.createElement("input",{type:"text",ref:"name"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,o.t("category")),e.createElement(h,{data:t.state.categoryList,ref:"category"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,o.t("language")),e.createElement("input",{type:"text",ref:"language"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,o.t("date_start")),e.createElement(v,{ref:"date_start",key:moment().unix(),options:i})),e.createElement("div",{className:"four wide field"},e.createElement("label",null,o.t("date_end")),e.createElement(v,{ref:"date_end",key:moment().unix(),options:r}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide  field"},e.createElement("label",null,o.t("visibility")),e.createElement(h,{data:(new l).getVisibilityList(),ref:"visibility"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide  field"},e.createElement("label",null,o.t("skilllevel")),e.createElement(h,{data:(new l).getSkillList(),ref:"skilllevel"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide  field"},e.createElement("label",null,o.t("status")),e.createElement(h,{data:(new l).getStatusList(),ref:"status",value:(new l).STATUS_ENABLE}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"twelve wide field"},e.createElement("label",null,o.t("description")),e.createElement(y,{ref:"description",id:"description",autoLoad:!0,config:c}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide field required"},e.createElement("label",null,o.t("coverfileid")),e.createElement("div",{className:"field wide twelve"},e.createElement(g,{limit:1,ref:"coverfileid",id:"coverfileid",labelText:""})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide  field required"},e.createElement("label",null,o.t("thumnail")),e.createElement("div",{className:"field wide twelve"},e.createElement(g,{limit:1,ref:"thumnail_id",id:"thumnail_id",labelText:""})))))),e.createElement(b,null,e.createElement("button",{className:"ui teal button",type:"submit"},s.t("add"))))))}});return N}),define("components/course/lecture-item",["react","helper","eventbus","language/courselecture","language/default","components/row-creator","components/confirm","collections/user","models/course-lecture"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ElearningDetaiLectureItemComponent",getDefaultProps:function(){return{data:{}}},edit:function(){n.trigger("coursechapter:edit",this.props.data)},_remove:function(){n.trigger("courselecture:remove",this.props.data.id)},updateLecture:function(){n.trigger("course:mountModalUpdate","lecture",this.props.data)},updateQuestion:function(){n.trigger("course:mountModalUpdate","lecturecontent",this.props.data)},getTitle:function(){var e=this,t=(new s).fetchFromCache({id:this.props.data.creator_id}),n="<b>"+a.t("datecreated")+"</b>: "+moment.unix(e.props.data.date_created).format("HH:mm, DD/MM/YYYY")+"<br/><b>"+a.t("creator")+"</b>: "+t.items[0].fullname;return n},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){$(".ui.accordion",e.findDOMNode(this)).accordion({});var n=this;t.initMyTip($(e.findDOMNode(this)).find(".mytip")),$(e.findDOMNode(this.refs.remove)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(o,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(t){t.preventDefault(),$(e).popup("hide"),n._remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}})},componentDidUpdate:function(){},render:function(){var t=this,n=((new l).getStatus(this.props.data.status),(new l).getType(this.props.data.type)),r=this.getTitle();return e.createElement("tr",{className:"top aligned"},e.createElement("td",{className:"collapsing"}," "),e.createElement("td",{className:"collapsing mytip",title:a.t("type")+": "+n.text},this.props.data.type==(new l).TYPE_LECTURE?e.createElement("i",{className:"tc-filetext elearning-format-icon"}):e.createElement("i",{className:"tc-checkboxcircle elearning-format-icon"})),e.createElement("td",null,e.createElement("a",{className:"mytip",title:r,href:"javascript:void(0)",onClick:this.updateLecture},this.props.data.display_order,". ",this.props.data.title," (",t.props.data.duration_in_minute,"p)"),this.props.data.status==(new l).STATUS_DISABLE?e.createElement("span",{className:"ui mini red label"},i.t("STATUS_DISABLE")):null),e.createElement("td",{className:"collapsing right aligned"},this.props.data.type==(new l).TYPE_LECTURE?e.createElement("a",{href:"javascript:void(0)",onClick:this.updateQuestion,title:a.t("update_lecture_content_title"),ref:"addContentbtn",style:{marginRight:20},className:"mytip"},e.createElement("small",null,a.t("update_lecture_content"))):null,e.createElement("a",{href:"javascript:void(0)",className:" mytip",title:a.t("delete_lecture_title"),ref:"remove"},e.createElement("small",null,a.t("delete_lecture")))))}});return c}),define("components/course/chapter-item",["react","pref","eventbus","helper","language/courselecture","language/coursechapter","language/default","collections/course-lecture","models/course-chapter","collections/user","components/row-creator","components/course/lecture-item","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"ElearningDetaiChapterItemComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{data:{}}},remove:function(){n.trigger("coursechapter:remove",this.props.data.id)},edit:function(){var t=$(e.findDOMNode(this.refs.content_table)).find("tr").length;n.trigger("course:mountModalUpdate","chapter",{chapter:this.props.data,allowdelete:!(t>0)})},insertLecture:function(e){e.preventDefault(),n.trigger("course:mountModalAdd","lecture",this.props.data)},openAccordion:function(t){$(e.findDOMNode(this.refs.content)).addClass("active"),$(e.findDOMNode(this.refs.title)).addClass("active"),$(e.findDOMNode(this.refs.content_table)).removeClass("hidden"),$(e.findDOMNode(this.refs.btn_addlecture)).attr("title",i.t("add_lecture_")),$(e.findDOMNode(this.refs.btn_deletechapter)).attr("title",r.t("delete"))},showbtndelete:function(){var e=this,t="";return this.props.lecture_list.map(function(n,a){n.lms_course_chapter_id==e.props.data.id&&(t="none")}),t},getTitle:function(){var e=this,t=(new c).fetchFromCache({id:this.props.data.creator_id}),n="<b>"+i.t("datecreated")+"</b>: "+moment.unix(e.props.data.date_created).format("HH:mm, DD/MM/YYYY")+"<br/><b>"+i.t("creator")+"</b>: "+t.items[0].fullname;return n},componentWillUnmount:function(){n.off("coursechapter:openaccordion",this.openAccordion)},componentDidUpdate:function(){this.showbtndelete()},componentWillMount:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.chap_list)).accordion(),n.on("coursechapter:openaccordion",this.openAccordion),a.initMyTip($(e.findDOMNode(this)).find(".mytip")),$(e.findDOMNode(this.refs.btn_deletechapter)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(m,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(n){n.preventDefault(),$(e).popup("hide"),t.remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}})},componentDidUpdate:function(){},render:function(){var t=this,n=((new l).getStatus(this.props.data.status),this.getTitle()),a=this.showbtndelete(),s=0;return e.createElement("div",{className:"ui accordion elearning-accordion",style:{marginBottom:"0"},ref:"chap_list"},e.createElement("div",{className:"title active elearning-uppercase",ref:"title"},e.createElement("i",{className:"tc-right icon"}),e.createElement("a",{href:"javascript:void(0)",onClick:this.edit,className:"mytip",title:n},t.props.data.display_order,". ",t.props.data.name),this.props.data.status==(new l).STATUS_DISABLE?e.createElement("span",{className:"ui mini red label"},o.t("STATUS_DISABLE")):null,e.createElement("div",{style:{float:"right",display:a},className:"ui mini button basic noborder mytip",title:r.t("delete"),ref:"btn_deletechapter"},e.createElement("i",{style:{marginRight:0},className:"icon tc-trash"}))),e.createElement("div",{className:"content active",ref:"content"},e.createElement("table",{className:"ui unstackable very basic table",ref:"content_table"},e.createElement("tbody",null,this.props.lecture_list.map(function(n,a){return n.lms_course_chapter_id==t.props.data.id?(s+=1,e.createElement(u,{index:n.id+"_"+moment().valueOf(),chapter:t.props.data,data:n,key:n.id})):void 0}),e.createElement("tr",null,e.createElement("td",{width:"14"}),e.createElement("td",{colSpan:"3"},e.createElement("a",{href:"#",className:"ui mini basic button",title:i.t("add_lecture_"),onClick:this.insertLecture,ref:"btn_addlecture"},i.t("add_lecture_"))))))))}});return p}),define("components/course/course-employeepicker",["react","helper","pref","cacheddata","models/user","models/employee","collections/employee"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"EmployeePickerComponent",getDefaultProps:function(){return{inputname:"",inputid:"",defaulttext:"------",defaultvalue:[],exclude:[],ignoreuserid:0,allowuseridlist:[],getgroup:!1,max:200}},updateEmployeeToView:function(n){var a=this,o=a.props.allowuseridlist||[],s=n.length,l=0;$.each(n,function(n,c){c.is_group_id>0?a.props.getgroup?new r({id:c.id}).fetch({error:function(){l++},success:function(n,i){l++,html='<div class="item" data-value="g'+i.is_group_id+'" data-text="'+i.full_name+'"><img class="ui mini avatar image" style="width: 24px; height: 24px; max-height: initial;" src="'+t.getAvatarPath("")+'" />'+i.full_name+"</div>",$(e.findDOMNode(a.refs.employeelist)).append(html)},complete:function(){l==s&&a._initDropdown()}}):s--:c.user_id==a.props.ignoreuserid||-1!=$.inArray(c.user_id,a.props.exclude)||0!=o.length&&!a.isAllowUserID(c.user_id)?s--:new i({id:c.user_id}).fetch({error:function(){l++},success:function(n,i){l++,html='<div class="item" data-value="'+i.id+'" data-text="'+i.fullname+'"><img class="ui mini avatar image" style="width: 24px; height: 24px; max-height: initial;" src="'+t.getAvatarPath(i.avatar)+'" />'+i.fullname+"</div>",$(e.findDOMNode(a.refs.employeelist)).append(html)},complete:function(){l==s&&a._initDropdown()}})}),a._initDropdown()},isAllowUserID:function(e){for(var t=!1,n=this.props.allowuseridlist,a=0;a<n.length;a++){var i=parseInt(n[a]);if(i==e){t=!0;break}}return t},componentWillUpdate:function(){},componentDidMount:function(){var t=this,i=[];a.has("employee")?(i=a.get("employee"),this.updateEmployeeToView(i().get())):($(e.findDOMNode(this.refs.dropdown)).addClass("loading"),(new o).fetch({data:{company_id:n.get("cid"),limit:200,is_not_deleted:1},success:function(e,n){t.updateEmployeeToView(n.items)},complete:function(){$(e.findDOMNode(t.refs.dropdown)).removeClass("loading")}})),$(e.findDOMNode(this.refs.dropdown)).dropdown({maxSelections:this.props.max,fullTextSearch:!0,onAdd:function(n,a,i){t._onLabelSelect(n,a,i),$(e.findDOMNode(t.refs.dropdown)).dropdown("hide")},onChange:function(e,n,a){t._onChange(e,n,a)}})},_initDropdown:function(){if($(e.findDOMNode(this.refs.dropdown)).dropdown("refresh"),this.props.defaultvalue.length>0){var t=[];this.props.defaultvalue.forEach(function(e,n){t.push(e.toString())}),$(e.findDOMNode(this.refs.dropdown)).dropdown("set selected",t)}},_onChange:function(e,t,n){"function"==typeof this.props.onChange&&this.props.onChange(e,t,n)},_onLabelSelect:function(e,t,n){"function"==typeof this.props.callbackSelected&&this.props.callbackSelected(e,t,n)},restoreDefaults:function(){$(e.findDOMNode(this.refs.dropdown)).dropdown("restore defaults")},setList:function(t){var n=[];t.forEach(function(e,t){n.push(e.toString())}),$(e.findDOMNode(this.refs.dropdown)).dropdown("set selected",n)},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.dropdown)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},render:function(){var t=this.props.defaulttext;return e.createElement("div",{ref:"dropdown",className:"ui fluid multiple search selection dropdown "+this.props.disabled},e.createElement("input",{type:"hidden",name:this.props.inputname,id:this.props.inputid}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},t),e.createElement("div",{className:"menu",ref:"employeelist"}))}});return s}),define("components/course/tab-teacher",["react","backbone","helper","querystring","pref","language/course","language/default","models/course-teacher-rel","models/course-teacher","collections/course-teacher-rel","collections/course-teacher","components/courseteacherpicker"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"CourseTabInfoComponent",getInitialState:function(){return{teacher:[],courseTeacherList:{}}},onAddTeacher:function(e,t,l){var c=parseInt(e),d=this;c&&$.inArray(c,this.state.teacher)<0&&($(".ui.form").addClass("loading"),(new s).save({company_id:i.get("cid"),creator_id:i.get("uid"),lms_course_id:a.get("id"),lms_teacher_id:c},{success:function(e,t){n.showSuccess(r.t("insert_teacher_success"));var a=$.extend([],d.state.teacher),i=$.extend({},d.state.courseTeacherList);i[t.lms_teacher_id]=t.id,a.push(t.lms_teacher_id),d.setState({teacher:a,courseTeacherList:i})},error:function(){
n.notifyError(response,r,o.t("insert_fail"))},complete:function(){$(".ui.form").removeClass("loading")}}))},onDeleteTeacher:function(e,t,a){var i=parseInt(e),l=this,c=this.state.courseTeacherList[i];parseInt(c)&&($(".ui.form").addClass("loading"),new s({id:c}).destroy({success:function(e,t){n.showSuccess(r.t("delete_teacher_success"));var a=$.extend([],l.state.teacher),o=$.extend({},l.state.courseTeacherList);a.map(function(e,t){e==i&&a.splice(t,1)}),delete o[i],l.setState({teacher:a,courseTeacherList:o})},error:function(){n.notifyError(response,r,o.t("delete_fail"))},complete:function(){$(".ui.form").removeClass("loading")}}))},getTeacher:function(){var e=this;(new c).fetch({data:{company_id:i.get("cid"),lms_course_id:e.props.data.id,status:(new l).STATUS_ENABLE},success:function(t,n){if(n.total>0){var a=[],i={},r=n.items;r.map(function(e,t){a.push(e.lms_teacher_id),i[e.lms_teacher_id]=e.id}),e.setState({teacher:a,courseTeacherList:i})}},error:function(){}})},componentDidMount:function(){this.getTeacher()},render:function(){return e.createElement("div",{className:"ui fields"},e.createElement("div",{className:"ui field eight wide"},e.createElement(u,{key:moment().valueOf(),ref:"teacher",callbackSelected:this.onAddTeacher,callbackRemove:this.onDeleteTeacher,defaultvalue:this.state.teacher})))}});return m}),define("components/course/tab-chapter-item-list",["react","helper","pref","role","eventbus","models/course-chapter","collections/user","language/coursechapter","language/default","components/row-creator","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"CourseTabChapterItemListComponent",edit:function(){i.trigger("course:mountModalUpdate","chapter",this.props.data)},_remove:function(){i.trigger("coursechapter:remove",this.props.data.id)},insertQuestion:function(){i.trigger("course:mountModalAdd","lecture",this.props.data)},componentDidMount:function(){var n=this;$(e.findDOMNode(this.refs.remove)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(d,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(t){t.preventDefault(),$(e).popup("hide"),n._remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}}),t.initMyTip($(e.findDOMNode(this.refs.btn_insert_lecture)))},renderDesktop:function(){var n=this,a=(new r).getStatus(this.props.data.status);return e.createElement("tr",null,e.createElement(c,{id:this.props.data.creator_id}),e.createElement("td",null,this.props.data.name),e.createElement("td",{ref:""},this.props.data.count_lecture),e.createElement("td",null,moment.unix(n.props.data.date_created).format("HH:mm, DD/MM/YYYY")),e.createElement("td",null,e.createElement("span",{className:"ui mini empty circular label "+a.color})," ",a.text),e.createElement("td",{className:"right aligned cell_action",ref:"btnedit"},e.createElement("a",{href:"javascript:void(0)",title:s.t("insert_lecture"),onClick:this.insertLecture,ref:"btn_insert_lecture",className:t.rowButtonClass()},e.createElement("i",{className:"icon tc-plus"})),e.createElement("a",{href:"javascript:void(0)",onClick:this.edit,className:t.rowButtonClass()},e.createElement("i",{className:"icon tc-pencil"})),e.createElement("a",{href:"javascript:void(0)",className:t.rowButtonClass(),ref:"remove"},e.createElement("i",{className:"icon tc-trash"}))))},render:function(){return this.renderDesktop()}});return u}),define("components/course/tab-chapter",["react","backbone","helper","eventbus","pref","language/course","language/default","models/course-category","models/course-chapter","models/course-lecture","collections/course-chapter","collections/course-lecture","components/course/tab-chapter-item-list","components/heading","components/select-status","components/course/chapter-item"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"CourseTabChapterAddComponent",getInitialState:function(){return{items:[],lecture_list:[],item:{status:-1}}},loadData:function(e){var t=this;$(".ui.form").addClass("loading"),(new d).fetch({data:{company_id:i.get("cid"),lms_course_id:t.props.data.id,sort_type:"ASC",sort_by:"display_order",page:e},success:function(e,n){var a=$.extend([],t.state.items),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push(e)}),t.setState({items:a})}i>n.currentpage&&t.loadData(parseInt(n.currentpage)+1)},error:function(e,t){},complete:function(){}})},loadLecture:function(e){var t=this;(new u).fetch({data:{company_id:i.get("cid"),lms_course_id:t.props.data.id,sort_by:"display_order",sort_type:"ASC",page:e},success:function(e,n){var a=$.extend([],t.state.lecture_list),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push(e)}),t.setState({lecture_list:a})}i>n.currentpage&&t.loadLecture(parseInt(n.currentpage)+1)},error:function(e,t){},complete:function(){$(".ui.form").removeClass("loading")}})},_saveChapter:function(){var t=this;$(".ui.form").addClass("loading");var a=$(e.findDOMNode(this.refs.id)).val(),s=new l;parseInt(a)&&(s=new l({id:a})),s.save({company_id:i.get("cid"),creator_id:i.get("uid"),lms_course_id:t.props.data.id,name:$(e.findDOMNode(t.refs.name)).val(),status:$(e.findDOMNode(t.refs.status)).dropdown("get value")},{success:function(e,i){var r=$.extend([],t.state.items);a>0?(r.map(function(e,t){e.id==a&&(r[t]=i)}),t.toggleBtn(),n.showSuccess(o.t("update_success"))):(r.unshift(i),n.showSuccess(o.t("insert_success"))),t.setState({items:r,item:{}})},error:function(e,t){n.notifyError(t,r,o.t("insert_fail"))},complete:function(){$(".ui.form").removeClass("loading")}})},removeLecture:function(e){var t=this;$(".ui.form").addClass("loading"),new c({id:e}).destroy({success:function(){t.updateListLecture("delete",{id:e}),n.showSuccess(o.t("delete_success"))},error:function(){},complete:function(){$(".ui.form").removeClass("loading")}})},remove:function(e){var t=this;$(".ui.form").addClass("loading"),new l({id:e}).destroy({success:function(){var a=$.extend([],t.state.items);a.map(function(t,n){t.id==e&&delete a[n]}),t.setState({items:a,item:{}}),n.showSuccess(o.t("delete_success"))},error:function(){},complete:function(){$(".ui.form").removeClass("loading")}})},edit:function(e){var t=$.extend({},this.state.item);t.name=e.name,t.id=e.id,t.status=e.status,this.toggleBtn(),this.setState({item:t})},cancelUpdate:function(){var e=$.extend({},this.state.item);e.name="",e.id=0,e.status=-1,this.toggleBtn(!0),this.setState({item:e})},add:function(){a.trigger("course:mountModalAdd","chapter")},updateList:function(e,t){var n=$.extend([],this.state.items);switch(e){case"update":n.map(function(e,a){t.id==e.id&&(n[a]=t)});break;case"add":n.unshift(t);break;case"delete":n.map(function(e,a){e.id==t.id&&delete n[a]})}this.setState({items:n})},updateListLecture:function(e,t){var n=$.extend([],this.state.lecture_list);switch(e){case"update":n.map(function(e,a){t.id==e.id&&(n[a]=t)});break;case"add":n.unshift(t);break;case"delete":n.map(function(e,a){e.id==t.id&&delete n[a]})}console.log(n),this.setState({lecture_list:n})},componentWillUnmount:function(){a.off("coursechapter:updateList",this.updateList),a.off("coursechapter:remove",this.remove),a.off("courselecture:remove",this.removeLecture),a.off("courselecture:updateList",this.updateListLecture)},componentDidMount:function(){this.loadData(1),this.loadLecture(1),a.on("courselecture:remove",this.removeLecture),a.on("courselecture:updateList",this.updateListLecture),a.on("coursechapter:updateList",this.updateList),a.on("coursechapter:remove",this.remove),n.initMyTip($(e.findDOMNode(this)).find(".mytip"))},render:function(){var t=this;return(new l).getStatusList(),e.createElement("div",{className:"field sixteen wide"},this.state.items.map(function(n,a){return e.createElement(f,{course:t.props.data,data:n,lecture_list:t.state.lecture_list,key:n.id+"_"+moment().unix()})}),e.createElement("br",null),e.createElement("div",{className:"clear"}),e.createElement("div",{onClick:this.add},e.createElement("a",{className:"ui small labeled icon button basic mytip",title:r.t("insert_chapter")},e.createElement("i",{style:{marginRight:0,float:"right"},className:"icon tc-plus"}),r.t("insert_chapter"))))}});return g}),define("components/course/tab-review-item-list",["react","helper","pref","role","eventbus","models/course-rating","collections/user","language/course","language/default","components/row-creator","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"CourseItemComponent",_remove:function(){i.trigger("coursereview:remove",this.props.data.id)},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.remove)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(d,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(n){n.preventDefault(),$(e).popup("hide"),t._remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}})},renderDesktop:function(){var n=this,a=((new r).getStatus(this.props.data.status),"red");return this.props.data.rating>0&&(this.props.data.rating<3&&(a="orange"),3==this.props.data.rating&&(a="grey"),4==this.props.data.rating&&(a="blue"),5==this.props.data.rating&&(a="green")),e.createElement("tr",null,e.createElement(c,{id:this.props.data.creator_id}),e.createElement("td",null,e.createElement("a",{className:"ui "+a+" circular label"},this.props.data.rating)),e.createElement("td",{ref:""},this.props.data.review),e.createElement("td",null,moment.unix(n.props.data.date_created).format("HH:mm, DD/MM/YYYY")),e.createElement("td",null,e.createElement("a",{href:"javascript:void(0)",ref:"remove",className:t.rowButtonClass()},e.createElement("i",{className:"icon tc-trash"}))))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return u}),define("components/course/tab-review",["react","backbone","helper","pref","eventbus","language/course","language/default","models/course-rating","collections/course-rating","components/course/tab-review-item-list","components/select-status"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"CourseTabRatingComponent",getInitialState:function(){return{items:[],item:[]}},loadData:function(e){var t=this;(new l).fetch({data:{company_id:a.get("cid"),lms_course_id:t.props.data.id,page:e},success:function(e,n){var a=$.extend([],t.state.items),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push(e)}),t.setState({items:a})}i>n.currentpage&&t.getCategoryList(parseInt(n.currentpage)+1)},error:function(e,t){}})},remove:function(e){var t=this;$(".ui.form").addClass("loading"),new s({id:e}).destroy({success:function(){t.updateList("delete",{id:e}),n.showSuccess(o.t("delete_success"))},error:function(){},complete:function(){$(".ui.form").removeClass("loading")}})},updateList:function(e,t){var n=$.extend([],this.state.items);switch(e){case"update":n.map(function(e,a){t.id==e.id&&(n[a]=t)});break;case"add":n.unshift(t);break;case"delete":n.map(function(e,a){e.id==t.id&&delete n[a]})}this.setState({items:n})},componentWillUnmount:function(){i.off("coursereview:remove",this.remove)},componentDidMount:function(){this.loadData(1),i.on("coursereview:remove",this.remove)},render:function(){return e.createElement("div",{className:"field sixteen wide"},e.createElement("div",{className:"fields"},e.createElement("table",{className:n.tableclass(),ref:"employeepointtable"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{width:"200px"},r.t("reviewer")),e.createElement("th",null,r.t("rating")),e.createElement("th",null,r.t("review")),e.createElement("th",null,r.t("review_date")),e.createElement("th",null," "))),e.createElement("tbody",null,this.state.items.map(function(t,n){return e.createElement(c,{key:t.id+"_"+moment().unix(),data:t})})))))}});return u}),define("components/course/tab-lecture-item-list",["react","helper","pref","role","eventbus","models/course-lecture","collections/user","language/courselecture","language/default","components/row-creator","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"CourseTabLectureItemListComponent",edit:function(){i.trigger("coursechapter:edit",this.props.data)},_remove:function(){i.trigger("courselecture:remove",this.props.data.id)},updateLecture:function(){i.trigger("course:mountModalUpdate","lecture",this.props.data)},updateQuestion:function(){i.trigger("course:mountModalUpdate","lecturecontent",this.props.data)},renderUpdate:function(t){var n=t.data,a=t.action;"chapter"==a&&n.id==this.props.data.lms_course_chapter_id&&$(e.findDOMNode(this.refs.chapter)).html(n.name)},componentWillUnmount:function(){i.off("courselecture:renderUpdate",this.renderUpdate)},componentDidMount:function(){i.on("courselecture:renderUpdate",this.renderUpdate);var n=this;$(e.findDOMNode(this.refs.remove)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(d,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(t){t.preventDefault(),$(e).popup("hide"),n._remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}}),t.initMyTip($(e.findDOMNode(this.refs.addContentbtn)))},renderDesktop:function(){var n=this,a=(new r).getStatus(this.props.data.status);return e.createElement("tr",null,e.createElement(c,{id:this.props.data.creator_id}),e.createElement("td",{ref:"chapter"}),e.createElement("td",null,this.props.data.title),e.createElement("td",{ref:""},this.props.data.display_order),e.createElement("td",null,moment.unix(n.props.data.date_created).format("HH:mm, DD/MM/YYYY")),e.createElement("td",null,e.createElement("span",{className:"ui mini empty circular label "+a.color})," ",a.text),e.createElement("td",{className:"right aligned cell_action",ref:"btnedit"},e.createElement("a",{href:"javascript:void(0)",onClick:this.updateLectureContent,title:s.t("update_lecture_content"),ref:"addContentbtn",className:t.rowButtonClass()},e.createElement("i",{className:"icon tc-plus"})),e.createElement("a",{href:"javascript:void(0)",onClick:this.updateLecture,className:t.rowButtonClass()},e.createElement("i",{className:"icon tc-pencil"})),e.createElement("a",{href:"javascript:void(0)",className:t.rowButtonClass(),ref:"remove"},e.createElement("i",{className:"icon tc-trash"}))))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return u}),define("components/course/tab-lecture",["react","backbone","helper","pref","eventbus","language/courselecture","language/default","models/course-lecture","collections/course-lecture","collections/course-chapter","components/course/tab-lecture-item-list","components/select-status"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"CourseTabRatingComponent",getInitialState:function(){return{items:[],item:[]}},loadChapter:function(){var e=[];this.state.items.map(function(t,n){e.push(t.lms_course_chapter_id)}),e=$.unique(e),(new c).getFromIdList({ids:e,success:function(e,t){var n=e.items;n.map(function(e,t){i.trigger("courselecture:renderUpdate",{action:"chapter",data:e})})},error:function(e,t){}})},loadData:function(e){var t=this;(new l).fetch({data:{company_id:a.get("cid"),lms_course_id:t.props.data.id,page:e},success:function(e,n){var a=$.extend([],t.state.items),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push(e)}),t.setState({items:a})}i>n.currentpage&&t.loadData(parseInt(n.currentpage)+1)},error:function(e,t){}})},remove:function(e){var t=this;$(".ui.form").addClass("loading"),new s({id:e}).destroy({success:function(){t.updateList("delete",{id:e}),n.showSuccess(o.t("delete_success"))},error:function(){},complete:function(){$(".ui.form").removeClass("loading")}})},updateList:function(e,t){var n=$.extend([],this.state.items);switch(e){case"update":n.map(function(e,a){t.id==e.id&&(n[a]=t)});break;case"add":n.unshift(t);break;case"delete":n.map(function(e,a){e.id==t.id&&delete n[a]})}this.setState({items:n})},componentDidUpdate:function(){this.loadChapter()},componentWillUnmount:function(){},componentDidMount:function(){this.loadData(1)},render:function(){return e.createElement("div",{className:"field sixteen wide"},e.createElement("div",{className:"fields"},e.createElement("table",{className:n.tableclass(),ref:"employeepointtable"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,r.t("creator")),e.createElement("th",null,r.t("chapter")),e.createElement("th",null,r.t("title")),e.createElement("th",null,r.t("displayorder")),e.createElement("th",null,r.t("datecreated")),e.createElement("th",null,r.t("status")),e.createElement("th",null))),e.createElement("tbody",null,this.state.items.map(function(t,n){return e.createElement(d,{key:t.id+"_"+moment().unix(),data:t})})))))}});return m}),define("components/course/tab-quiz-item-list",["react","helper","pref","role","eventbus","models/course-quiz","collections/user","language/coursequiz","language/default","components/row-creator","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"CourseTabQuizItemListComponent",_remove:function(){i.trigger("coursequiz:remove",this.props.data.id)},update:function(){i.trigger("course:mountModalUpdate","quiz",this.props.data)},updateQuizQuestion:function(){i.trigger("course:mountModalUpdate","quizquestion",{quizData:this.props.data,quizQuestionData:{}})},componentDidMount:function(){var n=this;$(e.findDOMNode(this.refs.remove)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(d,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(t){t.preventDefault(),$(e).popup("hide"),n._remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}}),t.initMyTip($(e.findDOMNode(this.refs.btn_question)))},renderDesktop:function(){var n=this,a=(new r).getStatus(this.props.data.status),i=(new r).getMarkType(this.props.data.mark_type);return e.createElement("tr",null,e.createElement(c,{id:this.props.data.creator_id}),e.createElement("td",null,this.props.data.title),e.createElement("td",{ref:""},this.props.data.duration),e.createElement("td",{ref:""},i.text),e.createElement("td",null,moment.unix(n.props.data.date_created).format("HH:mm, DD/MM/YYYY")),e.createElement("td",null,e.createElement("span",{className:"ui mini empty circular label "+a.color})," ",a.text),e.createElement("td",{className:"right aligned cell_action",ref:"btnedit"},e.createElement("a",{href:"javascript:void(0)",title:s.t("insert_update_question"),onClick:this.updateQuizQuestion,className:t.rowButtonClass(),ref:"btn_question"},e.createElement("i",{className:"icon tc-plus"})),e.createElement("a",{href:"javascript:void(0)",onClick:this.update,className:t.rowButtonClass()},e.createElement("i",{className:"icon tc-pencil"})),e.createElement("a",{href:"javascript:void(0)",className:t.rowButtonClass(),ref:"remove"},e.createElement("i",{className:"icon tc-trash"}))))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return u}),define("components/course/quiz-question-item",["react","helper","eventbus","language/coursequizquestion","language/default","components/row-creator","components/confirm","collections/user","models/course-quiz-question"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ElearningDetaiLectureItemComponent",getDefaultProps:function(){return{data:{}}},_remove:function(){n.trigger("coursequizquestion:remove",this.props.data.id)},updateQuestion:function(){n.trigger("course:mountModalUpdate","quizquestion",{data:this.props.data,quizData:this.props.quiz})},getTitle:function(){var e=this,t=(new s).fetchFromCache({id:this.props.data.creator_id}),n=a.t("datecreated")+": "+moment.unix(e.props.data.date_created).format("HH:mm, DD/MM/YYYY")+"\n"+a.t("creator")+": "+t.items[0].fullname;return n},showcontent:function(){$(e.findDOMNode(this.refs.showcontent)).children().hasClass("tc-bottom")?($(e.findDOMNode(this.refs.content)).attr("style",""),$(e.findDOMNode(this.refs.showcontent)).children().attr("class","icon tc-top")):($(e.findDOMNode(this.refs.content)).attr("style","height: 19px;overflow:hidden"),$(e.findDOMNode(this.refs.showcontent)).children().attr("class","icon tc-bottom"))},showbutton:function(){$(e.findDOMNode(this.refs.td_content)).height()>19?$(e.findDOMNode(this.refs.showcontent)).show():$(e.findDOMNode(this.refs.showcontent)).hide(),console.log($(e.findDOMNode(this.refs.td_content)).height(),$(e.findDOMNode(this.refs.td_content)).text())},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){$(".ui.accordion",e.findDOMNode(this)).accordion({});var n=this;t.initMyTip($(e.findDOMNode(this)).find(".mytip")),$(e.findDOMNode(this.refs.remove)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(o,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(t){t.preventDefault(),$(e).popup("hide"),n._remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}});var a,i=setTimeout(function(){clearInterval(a)},1e4);a=setInterval(function(){var t=$(e.findDOMNode(n.refs.content)).height();t>0&&(clearInterval(a),clearTimeout(i),19>=t?($(e.findDOMNode(n.refs.showcontent)).hide(),$(e.findDOMNode(n.refs.content)).attr("style","")):($(e.findDOMNode(n.refs.showcontent)).show(),$(e.findDOMNode(n.refs.content)).attr("style","height: 19px;overflow:hidden")))},500)},componentDidUpdate:function(){},render:function(){var n=this,i=((new l).getStatus(this.props.data.status),(new l).getType(this.props.data.type)),r=(this.getTitle(),{});return r[(new l).TYPE_SINGLE_CHOICE]="tc-checkboxcircle",r[(new l).TYPE_MULTIPLE]="tc-checkboxsquare",r[(new l).TYPE_TEXTBOX]="tc-filetext",e.createElement("tr",{className:"top aligned",id:"tr_"+this.props.data.id},e.createElement("td",{className:"collapsing"},e.createElement("a",{href:"javascript:void(0)",onClick:this.showcontent,title:a.t("update_question"),ref:"showcontent",className:t.rowButtonClass()+" mytip"},e.createElement("i",{className:"icon tc-bottom"}))),e.createElement("td",{ref:"td_content",className:"collapsing mytip",title:a.t("type")+": "+i.text},e.createElement("i",{className:r[i.code]+" elearning-format-icon"})),e.createElement("td",null,e.createElement("div",{id:"content_"+this.props.data.id,ref:"content",onAfterOpen:this.showbutton,dangerouslySetInnerHTML:{__html:this.props.data.display_order+". "+n.props.data.content}})),e.createElement("td",{className:"collapsing right aligned"},e.createElement("a",{href:"javascript:void(0)",style:{marginRight:20},onClick:this.updateQuestion,title:a.t("update_question"),ref:"addContentbtn",className:"mytip"},e.createElement("small",null,a.t("update_question"))),e.createElement("a",{href:"javascript:void(0)",className:"mytip",title:a.t("delete_question"),ref:"remove"},e.createElement("small",null,a.t("delete_question")))))}});return c}),define("components/course/quiz-item",["react","pref","eventbus","helper","language/default","language/coursequizquestion","language/coursequiz","collections/course-quiz-question","models/course-quiz","models/course-quiz-question","collections/user","components/row-creator","components/course/quiz-question-item","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"QuizItemComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{data:{}}},remove:function(){n.trigger("coursequiz:remove",this.props.data.id)},edit:function(){$(e.findDOMNode(this.refs.content_table)).find("tr").length,n.trigger("course:mountModalUpdate","quiz",this.props.data)},insertQuestion:function(e){e.preventDefault(),n.trigger("course:mountModalAdd","quizquestion",this.props.data)},openAccordion:function(t){$(e.findDOMNode(this.refs.content)).addClass("active"),$(e.findDOMNode(this.refs.title)).addClass("active"),$(e.findDOMNode(this.refs.content_table)).removeClass("hidden"),$(e.findDOMNode(this.refs.btn_addquestion)).attr("title",r.t("add_lecture_")),$(e.findDOMNode(this.refs.btn_deletequiz)).attr("title",o.t("delete"))},showbtndelete:function(){var e=this,t="";return this.props.question_list.map(function(n,a){n.lms_course_chapter_id==e.props.data.id&&(t="none")}),t},getTitle:function(){var e=this,t=(new d).fetchFromCache({id:this.props.data.creator_id}),n="<b>"+o.t("datecreated")+"</b>: "+moment.unix(e.props.data.date_created).format("HH:mm, DD/MM/YYYY")+"<br/><b>"+o.t("creator")+"</b>: "+t.items[0].fullname;return n},componentWillUnmount:function(){n.off("coursequiz:openaccordion",this.openAccordion)},componentDidUpdate:function(){this.showbtndelete()},componentWillMount:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.quiz_list)).accordion(),n.on("coursequiz:openaccordion",this.openAccordion),a.initMyTip($(e.findDOMNode(this)).find(".mytip")),$(e.findDOMNode(this.refs.btn_deletequiz)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(p,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(n){n.preventDefault(),$(e).popup("hide"),t.remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}})},componentDidUpdate:function(){},render:function(){var t=this,n=((new l).getStatus(this.props.data.status),this.getTitle()),a=(this.showbtndelete(),0);return e.createElement("div",{className:"ui accordion elearning-accordion",style:{marginBottom:"0"},ref:"quiz_list"},e.createElement("div",{className:"title active elearning-uppercase",ref:"title"},e.createElement("i",{className:"tc-right icon"}),e.createElement("a",{href:"javascript:void(0)",className:"mytip",title:n,onClick:this.edit},t.props.data.title," (",t.props.data.duration,"p)"),this.props.data.status==(new l).STATUS_DISABLE?e.createElement("span",{className:"ui mini red label"},i.t("STATUS_DISABLE")):null,e.createElement("div",{style:{float:"right"},className:"ui mini button basic noborder mytip",title:o.t("delete_quiz"),ref:"btn_deletequiz"},e.createElement("i",{style:{marginRight:0},className:"icon tc-trash"}))),e.createElement("div",{className:"content active",ref:"content"},e.createElement("table",{className:"ui unstackable very basic table",ref:"content_table"},e.createElement("tbody",null,this.props.question_list.map(function(n,i){return n.lms_quiz_id==t.props.data.id?(a+=1,e.createElement(m,{index:a,quiz:t.props.data,data:n,key:n.id+"_"+moment().valueOf()})):void 0}),e.createElement("tr",null,e.createElement("td",{width:"14"}),e.createElement("td",{colSpan:"3"},e.createElement("a",{href:"#",className:"ui mini basic button",title:o.t("add_question"),onClick:this.insertQuestion,ref:"btn_addquestion"},o.t("add_question"))))))))}});return h}),define("components/course/tab-quiz",["react","backbone","helper","eventbus","pref","language/coursequiz","language/default","models/course-quiz","models/course-quiz-question","collections/course-quiz","collections/course-quiz-question","components/course/tab-quiz-item-list","components/course/quiz-item","components/select-status"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"CourseTabQuizComponent",getInitialState:function(){return{items:[],question_list:[],item:[]}},add:function(){a.trigger("course:mountModalAdd","quiz",this.props.data)},loadData:function(e){var t=this;n.addLoader(),(new c).fetch({data:{company_id:i.get("cid"),lms_course_id:t.props.data.id,page:e},success:function(e,n){var a=$.extend([],t.state.items),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push(e)}),t.setState({items:a})}i>n.currentpage&&t.loadData(parseInt(n.currentpage)+1)},error:function(e,t){},complete:function(){n.removeLoader()}})},loadQuestion:function(e){var t=this;n.addLoader(),(new d).fetch({data:{company_id:i.get("cid"),lms_course_id:t.props.data.id,sort_by:"display_order",sort_type:"ASC",page:e},success:function(e,n){var a=$.extend([],t.state.question_list),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push(e)}),t.setState({question_list:a})}i>n.currentpage&&t.loadQuestion(parseInt(n.currentpage)+1)},error:function(e,t){},complete:function(){n.removeLoader()}})},updateListQuestion:function(e,t){var n=$.extend([],this.state.question_list);switch(e){case"update":n.map(function(e,a){t.id==e.id&&(n[a]=t)});break;case"add":n.unshift(t);break;case"delete":n.map(function(e,a){e.id==t.id&&delete n[a]})}this.setState({question_list:n})},remove:function(e){var t=this;$(".ui.form").addClass("loading"),new s({id:e}).destroy({success:function(){t.updateList("delete",{id:e}),n.showSuccess(o.t("delete_success"))},error:function(){},complete:function(){$(".ui.form").removeClass("loading")}})},updateList:function(e,t){var n=$.extend([],this.state.items);switch(e){case"update":n.map(function(e,a){t.id==e.id&&(n[a]=t)});break;case"add":n.unshift(t);break;case"delete":n.map(function(e,a){e.id==t.id&&delete n[a]})}this.setState({items:n})},removeQuestion:function(e){var t=this;$(".ui.form").addClass("loading"),new l({id:e}).destroy({success:function(){t.updateListQuestion("delete",{id:e}),n.showSuccess(o.t("delete_success"))},error:function(){},complete:function(){$(".ui.form").removeClass("loading")}})},componentWillUnmount:function(){a.off("coursequiz:updateList",this.updateList),a.off("coursequiz:remove",this.remove),a.off("coursequizquestion:updateList",this.updateListQuestion),a.off("coursequizquestion:remove",this.removeQuestion)},componentDidMount:function(){a.on("coursequiz:updateList",this.updateList),a.on("coursequiz:remove",this.remove),a.on("coursequizquestion:updateList",this.updateListQuestion),a.on("coursequizquestion:remove",this.removeQuestion),this.loadData(1),this.loadQuestion(1)},render:function(){var t=this;return e.createElement("div",{className:"field sixteen wide"},this.state.items.map(function(n,a){return e.createElement(m,{course:t.props.data,data:n,question_list:t.state.question_list,key:n.id+"_"+moment().unix()})}),e.createElement("br",null),e.createElement("div",{className:"clear"}),e.createElement("div",{onClick:this.add},e.createElement("a",{className:"ui small labeled icon button basic mytip",title:r.t("insert_quiz")},e.createElement("i",{style:{marginRight:0,float:"right"},className:"icon tc-plus"}),r.t("insert_quiz"))))}});return h}),define("components/course/tab-limit-item-list",["react","helper","pref","role","eventbus","models/course-limit","models/employee","collections/employee","collections/user","collections/office","collections/department","language/courselimit","language/default","components/row-creator","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"CourseTabLimitItemListComponent",edit:function(){i.trigger("course:mountModalUpdate","limit",this.props.data)},_remove:function(){i.trigger("courselimit:remove",this.props.data.id)},getObject:function(){var t=this.props.data.object_id,a="";if(this.props.data.limit_type==(new r).LIMITTYPE_DEPARTMENT){var i=(new d).fetchFromCache({company_id:n.get("cid"),id:t});i.items.length&&(a=i.items[0].name)}if(this.props.data.limit_type==(new r).LIMITTYPE_EMPLOYEE){var u=(new l).fetchFromCache({id:t}),m=(new s).fetchFromCache({user_id:t});u.items.length&&(a=u.items[0].fullname,m.items.length&&(a+=" ["+m.items[0].internal_id+"]"))}if(this.props.data.limit_type==(new r).LIMITTYPE_OFFICE){var p=(new c).fetchFromCache({company_id:n.get("cid"),id:t});p.items.length&&(a=p.items[0].name)}this.props.data.limit_type==(new r).LIMITTYPE_POSITION&&(a=(new o).getPosition(t),a=a.text),$(e.findDOMNode(this.refs.object)).html(a)},componentDidMount:function(){var n=this;this.getObject(),$(e.findDOMNode(this.refs.remove)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(h,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(t){t.preventDefault(),$(e).popup("hide"),n._remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide");
})}}),t.initMyTip($(e.findDOMNode(this.refs.btn_insert_lecture)))},renderDesktop:function(){var n=this,a=(new r).getStatus(this.props.data.status),i=(new r).getType(this.props.data.limit_type);return e.createElement("tr",null,e.createElement("td",null,i.text),e.createElement("td",{ref:"object"}),e.createElement(p,{id:this.props.data.creator_id}),e.createElement("td",null,moment.unix(n.props.data.date_created).format("HH:mm, DD/MM/YYYY")),e.createElement("td",null,e.createElement("span",{className:"ui small simple label "+a.color},a.text)),e.createElement("td",{className:"right aligned cell_action",ref:"btnedit"},e.createElement("a",{href:"javascript:void(0)",onClick:this.edit,className:t.rowButtonClass()},e.createElement("i",{className:"icon tc-pencil"})),e.createElement("a",{href:"javascript:void(0)",className:t.rowButtonClass(),ref:"remove"},e.createElement("i",{className:"icon tc-trash"}))))},render:function(){return this.renderDesktop()}});return f}),define("components/course/tab-limit",["react","backbone","helper","eventbus","pref","language/courselimit","language/default","models/course-limit","models/course","collections/course-limit","components/course/tab-limit-item-list","components/heading","components/select-status"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"CourseTabLimitComponent",getInitialState:function(){return{items:[],item:{}}},loadData:function(e){var t=this;(new c).fetch({data:{company_id:i.get("cid"),lms_course_id:t.props.data.id,page:e},success:function(e,n){var a=$.extend([],t.state.items),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push(e)}),t.setState({items:a})}i>n.currentpage&&t.getCategoryList(parseInt(n.currentpage)+1)},error:function(e,t){}})},getListLimit:function(){return this.state.items},remove:function(e){var t=this;$(".ui.form").addClass("loading"),new s({id:e}).destroy({success:function(){t.updateList("delete",{id:e}),n.showSuccess(o.t("delete_success"))},error:function(){},complete:function(){$(".ui.form").removeClass("loading")}})},updateList:function(e,t){var n=$.extend([],this.state.items);switch(e){case"update":n.map(function(e,a){t.id==e.id&&(n[a]=t)});break;case"add":n.unshift(t);break;case"delete":n.map(function(e,a){e.id==t.id&&delete n[a]})}this.setState({items:n})},add:function(e){e.preventDefault(),a.trigger("course:mountModalAdd","limit",this.props.data)},toggleBtn:function(){$(e.findDOMNode(this.refs.btn_insert)).toggle(),$(e.findDOMNode(this.refs.btn_update)).toggle()},componentWillUnmount:function(){a.off("courselimit:updateList",this.updateList),a.off("courselimit:remove",this.remove)},componentDidMount:function(){this.loadData(1),a.on("courselimit:updateList",this.updateList),a.on("courselimit:remove",this.remove)},render:function(){return(new l).getStatusList(),e.createElement("div",{className:"field sixteen wide"},e.createElement("div",{className:"fields"},e.createElement("table",{className:"tctable ui small unstackable very  selectable table scrollbar",ref:"employeepointtable"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,r.t("limittype")),e.createElement("th",null,r.t("object")),e.createElement("th",null,r.t("creator")),e.createElement("th",null,r.t("datecreated")),e.createElement("th",null,r.t("status")),e.createElement("th",{className:"col_action_2button"}))),e.createElement("tbody",null,this.state.items.map(function(t,n){return e.createElement(d,{key:t.id+"_"+moment().unix(),data:t})})))),e.createElement("br",null),e.createElement("a",{href:"#",onClick:this.add},r.t("addlink")))}});return p}),define("language/courseenroll",["baselanguage"],function(e){var t={vn:{heading:"Đăng kí khóa học",heading_sidebar:"Đăng kí khóa học",current_lecture:"Bài hiện tại",lecture:"Bài học",progress:"Tiến độ",status:"Trạng thái",datecreated:"Ngày tạo",user:"Người học",PROGRESS_PENDING:"Mới",PROGRESS_STUDYING:"Đang học",PROGRESS_COMPLETED:"Hoàn thành",error_user_id_required:"Vui lòng chọn nhân viên",error_user_is_exist:"Nhân viên đã được đăng kí",error_user_id_not_found:"Nhân viên không hợp lệ",error_progress_invalid:"Tiến độ không hợp lệ",error_current_lecture_id_required:"Vui lòng chọn bài hiện tại",addbutton:"Thêm học viên vào khóa học"},en:{heading:"Đăng kí khóa học",heading_sidebar:"Đăng kí khóa học",current_lecture:"Bài hiện tại",lecture:"Bài học",progress:"Tiến độ",status:"Trạng thái",datecreated:"Ngày tạo",user:"Người học",PROGRESS_PENDING:"Mới",PROGRESS_STUDYING:"Đang học",PROGRESS_COMPLETED:"Hoàn thành",error_user_id_required:"Vui lòng chọn nhân viên",error_user_is_exist:"Nhân viên đã được đăng kí",error_user_id_not_found:"Nhân viên không hợp lệ",error_progress_invalid:"Tiến độ không hợp lệ",error_current_lecture_id_required:"Vui lòng chọn bài hiện tại",addbutton:"Thêm học viên vào khóa học"}};return new e({lang:t})}),define("models/course-enroll",["basemodel","language/courseenroll","language/default"],function(e,t,n){var a=e.extend({urlRoot:"v1/lmscourseenrolls",cacheName:"lmscourseenrolls",STATUS_ENABLE:1,STATUS_DISABLE:2,PROGRESS_PENDING:1,PROGRESS_STUDYING:3,PROGRESS_COMPLETED:5,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:n.t("STATUS_ENABLE"),color:"green"},{code:this.STATUS_DISABLE,text:n.t("STATUS_DISABLE"),color:"red"}]},getStatus:function(e){e=parseInt(e);var t=this.getStatusList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t},getProgressList:function(){return[{code:this.PROGRESS_PENDING,text:t.t("PROGRESS_PENDING"),color:"green"},{code:this.PROGRESS_STUDYING,text:t.t("PROGRESS_STUDYING"),color:"red"},{code:this.PROGRESS_COMPLETED,text:t.t("PROGRESS_COMPLETED"),color:"red"}]},getProgress:function(e){e=parseInt(e);var t=this.getProgressList().filter(function(t){return t.code==e}).shift();return("object"!=typeof t||$.isEmptyObject(t))&&(t={text:"",color:"",code:e}),t}});return a}),define("components/course/tab-enroll-item-list",["react","helper","pref","role","eventbus","models/course-enroll","models/employee","collections/user","collections/office","collections/department","language/courseenroll","language/default","components/row-creator","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"CourseTabLimitItemListComponent",edit:function(){i.trigger("course:mountModalUpdate","enroll",this.props.data)},_remove:function(){i.trigger("courseenroll:remove",this.props.data.id)},getObject:function(){var t=this.props.data.object_id,a="";if(this.props.data.limit_type==(new r).LIMITTYPE_DEPARTMENT){var i=(new c).fetchFromCache({company_id:n.get("cid"),id:t});i.items.length&&(a=i.items[0].name)}if(this.props.data.limit_type==(new r).LIMITTYPE_EMPLOYEE){var d=(new s).fetchFromCache({id:t});d.items.length&&(a=d.items[0].fullname)}if(this.props.data.limit_type==(new r).LIMITTYPE_OFFICE){var u=(new l).fetchFromCache({company_id:n.get("cid"),id:t});u.items.length&&(a=u.items[0].name)}this.props.data.limit_type==(new r).LIMITTYPE_POSITION&&(a=(new o).getPosition(t),a=a.text),$(e.findDOMNode(this.refs.object)).html(a)},updateitem:function(t){var n=t.action,a=t.data;"lecture"==n&&this.props.data.current_lecture_id==a.id&&$(e.findDOMNode(this.refs.lecture)).html(a.title)},componentWillUnmount:function(){i.off("courseenroll:updateitem",this.updateitem)},componentDidMount:function(){var n=this;i.on("courseenroll:updateitem",this.updateitem),$(e.findDOMNode(this.refs.remove)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(p,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(t){t.preventDefault(),$(e).popup("hide"),n._remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}}),t.initMyTip($(e.findDOMNode(this.refs.btn_insert_lecture)))},renderDesktop:function(){var n=this,a=(new r).getStatus(this.props.data.status),i=(new r).getProgress(this.props.data.progress);return e.createElement("tr",null,e.createElement(m,{id:this.props.data.creator_id}),e.createElement("td",{ref:"lecture"},"-"),e.createElement("td",null,i.text),e.createElement("td",null,moment.unix(n.props.data.date_created).format("HH:mm, DD/MM/YYYY")),e.createElement("td",null,e.createElement("span",{className:"ui small simple label "+a.color},a.text)),e.createElement("td",{className:"right aligned cell_action",ref:"btnedit"},e.createElement("a",{href:"javascript:void(0)",onClick:this.edit,className:t.rowButtonClass()},e.createElement("i",{className:"icon tc-pencil"})),e.createElement("a",{href:"javascript:void(0)",className:t.rowButtonClass(),ref:"remove"},e.createElement("i",{className:"icon tc-trash"}))))},render:function(){return this.renderDesktop()}});return h}),define("components/course/tab-enroll",["react","backbone","helper","eventbus","pref","language/courseenroll","language/default","models/course-enroll","models/course","collections/course-enroll","collections/course-lecture","components/course/tab-enroll-item-list","components/heading","components/select-status"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"CourseTabLimitComponent",getInitialState:function(){return{items:[],item:{}}},loadData:function(e){var t=this;(new c).fetch({data:{company_id:i.get("cid"),lms_course_id:t.props.data.id,page:e},success:function(e,n){var a=$.extend([],t.state.items),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push(e)}),t.setState({items:a})}i>n.currentpage&&t.getCategoryList(parseInt(n.currentpage)+1)},error:function(e,t){}})},updateData:function(){if(this.state.items.length){var e=[];this.state.items.map(function(t,n){e.push(t.current_lecture_id)}),e=$.unique(e),(new d).getFromIdList({ids:e,success:function(e){var t=e.items;t.map(function(e,t){a.trigger("courseenroll:updateitem",{action:"lecture",data:e})})}})}},remove:function(e){var t=this;$(".ui.form").addClass("loading"),new s({id:e}).destroy({success:function(){t.updateList("delete",{id:e}),n.showSuccess(o.t("delete_success"))},error:function(){},complete:function(){$(".ui.form").removeClass("loading")}})},updateList:function(e,t){var n=$.extend([],this.state.items);switch(e){case"update":n.map(function(e,a){t.id==e.id&&(n[a]=t)});break;case"add":n.unshift(t);break;case"delete":n.map(function(e,a){e.id==t.id&&delete n[a]})}this.setState({items:n})},add:function(){a.trigger("course:mountModalAdd","enroll",this.props.data)},toggleBtn:function(){$(e.findDOMNode(this.refs.btn_insert)).toggle(),$(e.findDOMNode(this.refs.btn_update)).toggle()},componentWillUnmount:function(){a.off("courseenroll:updateList",this.updateList),a.off("courseenroll:remove",this.remove)},componentDidUpdate:function(){this.updateData()},componentDidMount:function(){this.loadData(1),a.on("courseenroll:updateList",this.updateList),a.on("courseenroll:remove",this.remove)},render:function(){return(new l).getStatusList(),e.createElement("div",{className:"field sixteen wide"},e.createElement("div",{className:"fields"},e.createElement("table",{className:n.tableclass(),ref:"employeepointtable"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,r.t("user")),e.createElement("th",null,r.t("current_lecture")),e.createElement("th",null,r.t("progress")),e.createElement("th",null,r.t("datecreated")),e.createElement("th",null,r.t("status")),e.createElement("th",null))),e.createElement("tbody",null,this.state.items.map(function(t,n){return e.createElement(u,{key:t.id+"_"+moment().unix(),data:t})})))),e.createElement("br",null),e.createElement("div",{className:"clear"}),e.createElement("div",{onClick:this.add},e.createElement("a",{className:"ui small labeled icon button basic mytip",title:r.t("addbutton")},e.createElement("i",{style:{marginRight:0,float:"right"},className:"icon tc-plus"}),r.t("addbutton"))))}});return h}),define("components/course/tab-take-item-list",["react","helper","pref","role","eventbus","models/course-quiz-take","models/employee","models/course-quiz-take-answer","collections/user","collections/office","collections/department","language/coursequiztakeanswer","language/default","components/row-creator","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"CourseTabLimitItemListComponent",detail:function(){i.trigger("course:mountModalAdd","take",this.props)},_remove:function(){i.trigger("coursetake:remove",this.props.data.id)},updateitem:function(t){var n=t.action,a=t.data;"lecture"==n&&this.props.data.current_lecture_id==a.id&&$(e.findDOMNode(this.refs.lecture)).html(a.title)},componentWillUnmount:function(){i.off("coursetake:updateitem",this.updateitem)},componentDidMount:function(){var n=this;i.on("coursetake:updateitem",this.updateitem),$(e.findDOMNode(this.refs.remove)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(h,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(t){t.preventDefault(),$(e).popup("hide"),n._remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}}),t.initMyTip($(e.findDOMNode(this.refs.btn_insert_lecture)))},renderDesktop:function(){var n=this,a=(new r).getStatus(this.props.data.status),i="";this.props.quiz_list.map(function(e,t){e.id==n.props.data.lms_quiz_id&&(i=e.title)});var o=0,l=0;return this.props.answer_list.map(function(e,t){e.lms_quiz_take_id==n.props.data.id&&(l++,e.is_correct==(new s).CORRECT_PASS&&o++)}),e.createElement("tr",null,e.createElement(p,{id:this.props.data.creator_id}),e.createElement("td",null,i),e.createElement("td",null,1==this.props.data.is_pass?e.createElement("span",{style:{color:"green"}},u.t("quiz_pass")," (",o,"/",l,")"):e.createElement("span",{style:{color:"red"}},u.t("quiz_fail")," (",o,"/",l,")")),e.createElement("td",null,moment.unix(n.props.data.date_created).format("HH:mm, DD/MM/YYYY")),e.createElement("td",null,e.createElement("span",{className:"ui mini empty circular label "+a.color})," ",a.text),e.createElement("td",{className:"right aligned cell_action",ref:"btnedit"},e.createElement("a",{href:"javascript:void(0)",onClick:this.detail,className:t.rowButtonClass()},e.createElement("i",{className:"icon tc-info"})),e.createElement("a",{href:"javascript:void(0)",ref:"remove",className:t.rowButtonClass()},e.createElement("i",{className:"icon tc-trash"}))))},render:function(){return this.renderDesktop()}});return f}),define("components/course/tab-take",["react","backbone","helper","eventbus","pref","setting","language/course","language/default","models/course-quiz-take","models/course-quiz-take-answer","models/course","collections/course-quiz-take","collections/course-quiz-take-answer","collections/course-quiz","collections/course-quiz-question","components/course/tab-take-item-list","components/heading","components/select-status"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_){var v=e.createClass({displayName:"CourseTabTakeComponent",getInitialState:function(){return{items:[],quiz_list:[],select_quiz:[],question_list:[],answer_list:[],item:{}}},loadData:function(e,t){var n=this,a={company_id:i.get("cid"),lms_course_id:n.props.data.id,page:e};"number"==typeof t&&(a.lms_quiz_id=t),(new u).fetch({data:a,success:function(a,i){var r=[];e>1&&(r=$.extend([],n.state.items));var o=Math.ceil(i.total/i.limit);if(i.total>0){var s=i.items;s.map(function(e,t){r.push(e)}),n.setState({items:r})}o>i.currentpage?n.loadData(parseInt(i.currentpage)+1):"number"!=typeof t&&n.loadAnswer(1)},error:function(e,t){}})},loadAnswer:function(e){var t=this;(new m).fetch({data:{company_id:i.get("cid"),lms_course_id:t.props.data.id,page:e},success:function(n,a){var i=[];e>1&&(i=$.extend([],t.state.answer_list));var r=Math.ceil(a.total/a.limit);if(a.total>0){var o=a.items;o.map(function(e,t){i.push(e)}),t.setState({answer_list:i})}r>a.currentpage?t.loadAnswer(parseInt(a.currentpage)+1):t.loadQuiz(1)},error:function(e,t){}})},loadQuiz:function(e){var t=this;n.addLoader(),(new p).fetch({data:{company_id:i.get("cid"),lms_course_id:t.props.data.id,page:e},success:function(n,a){var i=[];e>1&&(i=$.extend([],t.state.quiz_list));var r=Math.ceil(a.total/a.limit);if(a.total>0){var o=a.items;o.map(function(e,t){i.push(e)}),t.setState({quiz_list:i})}r>a.currentpage?t.loadQuiz(parseInt(a.currentpage)+1):t.loadQuestion(1)},error:function(e,t){},complete:function(){n.removeLoader()}})},loadQuestion:function(e){var t=this;n.addLoader(),(new h).fetch({data:{company_id:i.get("cid"),lms_course_id:t.props.data.id,sort_by:"display_order",sort_type:"ASC",page:e},success:function(n,a){var i=[];e>1&&(i=$.extend([],t.state.question_list));var r=Math.ceil(a.total/a.limit);if(a.total>0){var o=a.items;o.map(function(e,t){i.push(e)}),t.setState({question_list:i})}r>a.currentpage&&t.loadQuestion(parseInt(a.currentpage)+1)},error:function(e,t){},complete:function(){n.removeLoader()}})},remove:function(e){var t=this;$(".ui.form").addClass("loading"),new l({id:e}).destroy({success:function(){t.updateList("delete",{id:e}),n.showSuccess(s.t("delete_success"))},error:function(){},complete:function(){$(".ui.form").removeClass("loading")}})},updateList:function(e,t){var n=$.extend([],this.state.items);switch(e){case"update":n.map(function(e,a){t.id==e.id&&(n[a]=t)});break;case"add":n.unshift(t);break;case"delete":n.map(function(e,a){e.id==t.id&&delete n[a]})}this.setState({items:n})},filterQuiz:function(e){this.loadData(1,parseInt(e))},add:function(){a.trigger("course:mountModalAdd","enroll",this.props.data)},toggleBtn:function(){$(e.findDOMNode(this.refs.btn_insert)).toggle(),$(e.findDOMNode(this.refs.btn_update)).toggle()},_getExportUrl:function(e,t){var n="";return n+=(""!=n?"&":"")+"user_id="+i.get("uid"),n+=(""!=n?"&":"")+"company_id="+i.get("cid"),n+=(""!=n?"&":"")+"hmac="+encodeURIComponent(t),n+=(""!=n?"&":"")+"course_id="+this.props.data.id,e+="?"+n},exportSummary:function(e){var t=this;$(".ui.form").addClass("loadding");var a=r.rooturl+"v1/lmsquiztakes/export",o={company_id:i.get("cid"),user_id:i.get("uid")};$.ajax({url:a,method:"GET",data:o,dataType:"json",success:function(e){if(""!=e.hmac){var i=t._getExportUrl(a,e.hmac);console.log(i),window.open(i,n.getWindowTarget())}},complete:function(){$(".ui.form").removeClass("loadding")}})},componentWillUnmount:function(){a.off("coursetake:updateList",this.updateList),a.off("coursetake:remove",this.remove)},componentDidUpdate:function(){},componentDidMount:function(){this.loadData(1),a.on("coursetake:updateList",this.updateList),a.on("coursetake:remove",this.remove)},render:function(){var t=this,a=((new d).getStatusList(),[{code:0,text:o.t("all_quiz")}]);return this.state.quiz_list.map(function(e,t){a.push({code:e.id,text:e.title})}),e.createElement("div",{className:"field sixteen wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide column"},e.createElement("div",{className:"fields four wide column",style:{float:"right"}},e.createElement(_,{data:a,onChange:this.filterQuiz,value:0}))," ",e.createElement("div",{className:"fields four wide column",style:{float:"right"}},e.createElement("span",{className:n.rowButtonClass(),style:{border:"1px solid #ccc !important",padding:"6px 15px 6px 15px"},title:o.t("download_excel"),onClick:this.exportSummary},e.createElement("i",{className:"icon tc-download"}," "))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide column"},e.createElement("div",{className:"fields sixteen wide column"},e.createElement("table",{className:n.tableclass(),ref:"employeepointtable"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,o.t("student")),e.createElement("th",null,o.t("tab_quiz")),e.createElement("th",null,o.t("tab_take")),e.createElement("th",null,o.t("date_created_take")),e.createElement("th",null,o.t("status")),e.createElement("th",null))),e.createElement("tbody",null,this.state.items.map(function(n,a){return e.createElement(f,{key:n.id+"_"+moment().valueOf(),quiz_list:t.state.quiz_list,question_list:t.state.question_list,answer_list:t.state.answer_list,data:n})})))))))}});return v}),define("components/course/form-modal-add-course-lecture",["react","backbone","helper","eventbus","querystring","pref","models/course-lecture","models/course-category","models/course-quiz","models/course","language/courselecture","collections/course-lecture","collections/course-category","collections/course-quiz","collections/course","components/select-status","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g){var _=e.createClass({displayName:"ModalAddCourseLectureComponent",getInitialState:function(){return{rowdata:[],quizList:[],pass:!0,rownum:[]}},loadQuiz:function(){var e=this;(new p).fetch({data:{company_id:r.get("cid"),lms_course_lecture_id:0,lms_course_id:this.props.course.id,status:(new l).STATUS_ENABLE},success:function(t,n){var a=n.items,i=[];a.map(function(e,t){i.push({code:e.id,text:e.title,color:""})}),e.setState({quizList:i})},complete:function(){},error:function(){}})},save:function(){var t=this;$(".ui.form").addClass("loading"),(new o).save({company_id:r.get("cid"),creator_id:r.get("uid"),lms_course_id:t.props.course.id,lms_course_chapter_id:t.props.chapter.id,lms_course_category_id:t.props.course.lms_course_category_id,customerindex:0,title:$(e.findDOMNode(t.refs.title)).val(),summary:$(e.findDOMNode(t.refs.summary)).val(),type:$(e.findDOMNode(t.refs.type)).dropdown("get value"),lecture_type:$(e.findDOMNode(t.refs.lecture_type)).dropdown("get value"),is_free:$(e.findDOMNode(t.refs.is_free)).checkbox("is checked")?1:0,quiz_id:$(e.findDOMNode(t.refs.quiz_id)).dropdown("get value"),duration_in_minute:$(e.findDOMNode(t.refs.duration_inminute)).val(),display_order:$(e.findDOMNode(t.refs.display_order)).val()},{success:function(e,i){a.trigger("courselecture:updateList","add",i),n.showSuccess(g.t("insert_success")),$(t.getDOMNode()).modal({context:$(t.getDOMNode()).parent()}).modal("hide")},error:function(e,t){n.notifyError(t,d,g.t("insert_error"))},complete:function(){$(".ui.form").removeClass("loading")}})},selectQuiz:function(t){t==(new o).TYPE_QUIZ?$(e.findDOMNode(this.refs.select_quiz)).show():$(e.findDOMNode(this.refs.select_quiz)).hide()},componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){a.trigger("course:hidemodal")},context:$(this.getDOMNode())}).modal("show"),this.loadQuiz(),$(".ui.checkbox").checkbox(),setTimeout(function(){a.trigger("coursechapter:openaccordion")},1e3),$(e.findDOMNode(this.refs.duration_inminute)).autoNumeric({lZero:"deny",mDec:"0",vMin:"0"})},render:function(){var t=this,n=g.t("add");this.props&&this.props&&this.props.id>0&&(n=g.t("save"));var a=d.t("heading")+" \\ "+n;return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("div",{className:"header"},a),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,d.t("title")),e.createElement("input",{ref:"title",type:"text",defaultValue:""})),e.createElement("div",{className:"field required"},e.createElement("label",null,d.t("lecturetype")),e.createElement(f,{ref:"lecture_type",data:(new o).getLectureTypeList()})),e.createElement("div",{className:"field"},e.createElement("label",null,d.t("durationinminute")),e.createElement("input",{ref:"duration_inminute",type:"text",defaultValue:""})),e.createElement("div",{className:"field required"},e.createElement("label",null,d.t("type")),e.createElement(f,{onChange:this.selectQuiz,ref:"type",data:(new o).getTypeList()})),e.createElement("div",{className:"field",style:{display:"none"},ref:"select_quiz"},e.createElement("label",null,d.t("quizid")),e.createElement(f,{ref:"quiz_id",data:this.state.quizList})),e.createElement("div",{className:"field"},e.createElement("label",null,d.t("displayorder")),e.createElement("input",{ref:"display_order",type:"text",defaultValue:""})),e.createElement("div",{className:"field"},e.createElement("label",null,d.t("summary")),e.createElement("textarea",{ref:"summary",type:"text",rows:"3",defaultValue:""})),e.createElement("div",{className:"field"},e.createElement("label",null,d.t("isfree")),e.createElement("div",{className:"ui toggle checkbox",ref:"is_free"},e.createElement("input",{type:"checkbox",name:"public"}),e.createElement("label",null," "))))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic approve button"},g.t("close")),e.createElement("div",{className:"ui button teal",onClick:t.save},n))))}});return _}),define("components/course/form-modal-add-course-quiz",["react","backbone","helper","eventbus","querystring","pref","models/course-quiz","models/course","language/coursequiz","collections/course-quiz","collections/course","components/select-status","components/select-file/filelist","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"ModalAddCourseQuizComponent",getInitialState:function(){return{rowdata:[],pass:!0,rownum:[]}},save:function(){var t=this;$(".ui.form").addClass("loading"),(new o).save({company_id:r.get("cid"),creator_id:r.get("uid"),lms_course_id:t.props.course.id,title:$(e.findDOMNode(t.refs.title)).val(),duration:$(e.findDOMNode(t.refs.duration)).val(),mark_type:$(e.findDOMNode(t.refs.mark_type)).dropdown("get value"),mark_to_pass:$(e.findDOMNode(t.refs.mark_to_pass)).val()},{success:function(e,i){a.trigger("coursequiz:updateList","add",i),n.showSuccess(p.t("insert_success")),$(t.getDOMNode()).modal({context:$(t.getDOMNode()).parent()}).modal("hide")},error:function(e,t){n.notifyError(t,l,p.t("insert_error"))},complete:function(){$(".ui.form").removeClass("loading")}})},selectQuiz:function(t){t==(new o).TYPE_QUIZ?$(e.findDOMNode(this.refs.select_quiz)).show():$(e.findDOMNode(this.refs.select_quiz)).hide()},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){a.trigger("course:hidemodal")},context:$(this.getDOMNode())}).modal("show"),$(".ui.checkbox").checkbox(),$(e.findDOMNode(this.refs.is_check_pass_or_not)).checkbox({onChecked:function(){$(e.findDOMNode(t.refs.mark_to_pass)).show()},onUnchecked:function(){$(e.findDOMNode(t.refs.mark_to_pass)).hide()}}),$(e.findDOMNode(this.refs.mark_to_pass)).autoNumeric(n.formatOnlyNumber(2))},render:function(){var t=this,n=p.t("insert");this.props&&this.props&&this.props.id>0&&(n=p.t("update"));var a=l.t("heading")+" \\ "+n;return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("div",{className:"header"},a),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,l.t("title")),e.createElement("input",{ref:"title",type:"text",defaultValue:""})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("duration")),e.createElement("input",{ref:"duration",type:"text",defaultValue:""})),e.createElement("div",{className:"field required"},e.createElement("label",null,l.t("marktype")),e.createElement(u,{ref:"mark_type",data:(new o).getMarkTypeList()})),e.createElement("div",{className:"field required"},e.createElement("label",null,l.t("marktopass")),e.createElement("input",{ref:"mark_to_pass",type:"text",defaultValue:""})))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic approve button"},p.t("close")),e.createElement("div",{className:"ui button teal",onClick:t.save},n))))}});return h}),define("components/course/form-modal-add-course-limit",["react","helper","pref","role","eventbus","models/course-limit","collections/course-limit","models/employee","collections/user","collections/office","collections/department","language/courselimit","language/default","components/row-creator","components/select-status","components/course/course-employeepicker","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g){var _=e.createClass({displayName:"ModalAddCourseLimitComponent",getInitialState:function(){return{employee_set:[],rowdata:[],quizList:[],pass:!0,rownum:[]}},getDefaultProps:function(){return{dataList:[]}},getObjectID:function(){var t=$(e.findDOMNode(this.refs.type)).dropdown("get value"),n=0;return this.refs["val_object_"+t]&&(n=$(e.findDOMNode(this.refs["val_object_"+t])).dropdown("get value")),n},getListEmployee:function(){if(this.props.dataList.length){var e=[];this.props.dataList.map(function(t,n){t.limit_type==(new r).LIMITTYPE_EMPLOYEE&&e.push(t.object_id)}),e.length&&this.setState({employee_set:e})}},save:function(){var a=this,i=$(e.findDOMNode(a.refs.type)).dropdown("get value"),o=[];if(i==(new r).LIMITTYPE_EMPLOYEE){var s=a.getObjectID();s=s.toString(),s=s.split(","),0!=parseInt(s)?s.map(function(e,t){o.push({company_id:n.get("cid"),creator_id:n.get("uid"),lms_course_id:a.props.course.id,limit_type:i,object_id:e})}):t.showError(u.t("error_object_id_required"))}else o.push({company_id:n.get("cid"),creator_id:n.get("uid"),lms_course_id:a.props.course.id,limit_type:i,object_id:a.getObjectID()});this.saveData(o,0)},saveData:function(e,n){var a=this,o=e[n];o&&($(".ui.form").addClass("loading"),(new r).save(o,{success:function(r,o){i.trigger("courselimit:updateList","add",o),t.showSuccess(m.t("insert_success")),e.splice(n,1),e.length?a.saveData(e,n):$(a.getDOMNode()).modal({context:$(a.getDOMNode()).parent()}).modal("hide")},error:function(i,r){t.notifyError(r,u,m.t("insert_error")),e.splice(n,1),e.length&&a.saveData(e,n)},complete:function(){$(".ui.form").removeClass("loading")}}))},changeType:function(t){var n="object_"+t;this.refs[n]&&($(".limit-course-object").hide(),$(e.findDOMNode(this.refs[n])).show())},componentDidMount:function(){this.getListEmployee(),$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){i.trigger("course:hidemodal")},autofocus:!1,context:$(this.getDOMNode())}).modal("show"),$(".ui.checkbox").checkbox()},render:function(){var t=this,a=[],i=[],o=u.t("heading")+" \\ "+m.t("insert"),l=(new c).fetchFromCache({company_id:n.get("cid")}),p=(new d).fetchFromCache({company_id:n.get("cid")});return l.items.length&&l.items.map(function(e,t){a.push({text:e.name,code:e.id,color:""})}),p.items.length&&p.items.map(function(e,t){i.push({text:e.name,code:e.id,color:""})}),e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("div",{className:"header"},o),e.createElement("div",{className:"content"},e.createElement("div",{className:"fields"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide required"},e.createElement("label",null,u.t("limittype")),e.createElement(h,{ref:"type",onChange:this.changeType,data:(new r).getTypeList()}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide required limit-course-object",style:{display:"none"},ref:"object_1"},e.createElement("label",null,u.t("LIMITTYPE_OFFICE")),e.createElement(h,{ref:"val_object_1",data:a})),e.createElement("div",{className:"field sixteen wide required limit-course-object",style:{display:"none"},ref:"object_3"},e.createElement("label",null,u.t("LIMITTYPE_DEPARTMENT")),e.createElement(h,{ref:"val_object_3",data:i})),e.createElement("div",{className:"field sixteen wide required limit-course-object",style:{display:"none"},ref:"object_7"},e.createElement("label",null,u.t("LIMITTYPE_POSITION")),e.createElement(h,{ref:"val_object_7",data:(new s).getPositionList()})),e.createElement("div",{className:"field sixteen wide required limit-course-object",style:{display:"none"},ref:"object_9"},e.createElement("label",null,u.t("LIMITTYPE_EMPLOYEE")),e.createElement(f,{ref:"val_object_9",key:moment().valueOf(),exclude:this.state.employee_set})))))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic approve button"
},m.t("close")),e.createElement("div",{className:"ui button teal",onClick:t.save},m.t("add")))))}});return _}),define("components/select-employee",["react","helper","pref","cacheddata","language/default","collections/employee","models/employee","models/user"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"SelectEmployeeItemComponent",componentDidMount:function(){var n=this;if(this.props.data.user_id>0)new s({id:this.props.data.user_id}).fetch({success:function(a,i){var r="";n.props.renderAvatar&&i.avatar&&(r='<img class="ui avatar image" style="width: 24px !important; height: 24px !important;"  src="'+t.getAvatarPath(i.avatar)+'" />'),$(e.findDOMNode(n)).html(r+i.fullname)}});else{var a="";n.props.renderAvatar&&(a='<img class="ui avatar image" style="width: 24px !important; height: 24px !important;"  src="'+t.getAvatarPath(n.props.data.avatar)+'" />'),$(e.findDOMNode(n)).html(a+n.props.data.full_name)}},render:function(){return e.createElement("div",{className:"item","data-value":this.props.is_employee?this.props.data.id:this.props.data.user_id},this.props.data.avatar?e.createElement("img",{className:"ui avatar image",src:t.getAvatarPath(this.props.data.avatar)}):"",this.props.data.full_name)}}),c=e.createClass({displayName:"SelectEmployeeComponent",getDefaultProps:function(){return{name:"",defaultValue:[],placeholder:"----",className:"",maxSelections:!1,renderAvatar:!0,optionDefault:[],excludeZero:!0,fluid:!1,multiple:!1,ignoregroup:!1,is_employee:!1}},getInitialState:function(){return{items:[]}},componentDidUpdate:function(){this.props.multiple?$(this.getDOMNode()).dropdown("refresh"):$(this.getDOMNode()).dropdown("refresh").dropdown("set selected",this.props.defaultValue.join(","))},componentDidMount:function(){var e=this,t={fullTextSearch:!0,message:{noResults:i.t("search_no_result")},onShow:e.props.onShow,onHide:e.props.onHide,onChange:e.props.onChange,onAdd:function(t){"function"==typeof e.props.onAdd&&e.props.onAdd(t),$(e.getDOMNode()).dropdown("hide")},onRemove:e.props.onRemove};this.props.maxSelections&&(t.maxSelections=this.props.maxSelections),$(this.getDOMNode()).dropdown(t),this.props.emptyList||this._loadData()},setupMenu:function(e){$(this.getDOMNode()).dropdown("restore defaults").dropdown("set text",this.props.placeholder),this.setState({items:e})},_load:function(e){var t=a.get(e);if(void 0===t)this._loadDataLive(1);else{var n=this.props.optionDefault,i=n.concat(t().get());this.setState({items:i})}},_loadData:function(){this._load((new o).cacheName)},_loadDataLive:function(e){e=e||1;var t=this;$(this.getDOMNode()).addClass("loading"),(new r).fetch({data:{company_id:n.get("cid"),is_not_deleted:1,status:(new o).STATUS_ENABLE,ignore_group:1,page:e},success:function(n,a){var i=t.state.items;if(1==e&&null!=t.props.optionDefault){var r=t.props.optionDefault;i=r.concat(i)}t.setState({items:i.concat(a.items)}),Math.ceil(a.total/a.limit)>a.currentpage&&t._loadDataLive(a.currentpage+1)},complete:function(){$(t.getDOMNode()).removeClass("loading")}})},render:function(){var t=this;return e.createElement("div",{className:"ui "+this.props.className+(this.props.fluid?" fluid":"")+(this.props.multiple?" multiple":"")+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},this.state.items.map(function(n){return(n.user_id>0||!t.props.excludeZero&&n.user_id<=0)&&(0==n.is_group_id||n.is_group_id>0&&!t.props.ignoregroup)?e.createElement(l,{renderAvatar:t.props.renderAvatar,key:n.id,data:n,is_employee:t.props.is_employee}):void 0})))}});return c}),define("components/course/form-modal-add-course-enroll",["react","helper","pref","role","eventbus","models/course-enroll","models/course-lecture","collections/course-lecture","language/courseenroll","language/default","components/row-creator","components/select-status","components/select-employee","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"ModalAddCourseEnrollComponent",getInitialState:function(){return{lecture_list:[]}},getObjectID:function(){var t=$(e.findDOMNode(this.refs.type)).dropdown("get value"),n=0;return this.refs["val_object_"+t]&&(n=$(e.findDOMNode(this.refs["val_object_"+t])).dropdown("get value")),n},loadLecture:function(e){var t=this;(new s).fetch({data:{company_id:n.get("cid"),lms_course_id:t.props.course.id,status:(new o).STATUS_ENABLE,page:e},success:function(e,n){var a=$.extend([],t.state.lecture_list),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push({code:e.id,text:e.title,color:""})}),t.setState({lecture_list:a}),i>n.currentpage&&t.getCategoryList(parseInt(n.currentpage)+1)}},complete:function(){}})},save:function(){var a=this;$(".ui.form").addClass("loading"),(new r).save({company_id:n.get("cid"),creator_id:n.get("uid"),user_id:$(e.findDOMNode(a.refs.user)).dropdown("get value"),lms_course_id:a.props.course.id,progress:$(e.findDOMNode(a.refs.progress)).dropdown("get value"),status:$(e.findDOMNode(a.refs.status)).dropdown("get value"),current_lecture_id:$(e.findDOMNode(a.refs.lecture)).dropdown("get value")},{success:function(e,n){i.trigger("courseenroll:updateList","add",n),t.showSuccess(c.t("insert_success")),$(a.getDOMNode()).modal({context:$(a.getDOMNode()).parent()}).modal("hide")},error:function(e,n){t.notifyError(n,l,c.t("insert_error"))},complete:function(){$(".ui.form").removeClass("loading")}})},changeProgress:function(t){$(e.findDOMNode(this.refs.current_lecture)).hide(),t==(new r).PROGRESS_STUDYING&&$(e.findDOMNode(this.refs.current_lecture)).show()},componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){i.trigger("course:hidemodal")},autofocus:!1,context:$(this.getDOMNode())}).modal("show"),$(".ui.checkbox").checkbox(),this.loadLecture(1)},render:function(){var t=this,n=l.t("heading")+" \\ "+c.t("insert");return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("div",{className:"header"},n),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,l.t("user")),e.createElement(m,{ref:"user"})),e.createElement("div",{className:"field required"},e.createElement("label",null,l.t("progress")),e.createElement(u,{ref:"progress",onChange:this.changeProgress,data:(new r).getProgressList()})),e.createElement("div",{className:"field required",style:{display:"none"},ref:"current_lecture"},e.createElement("label",null,l.t("current_lecture")),e.createElement(u,{ref:"lecture",data:this.state.lecture_list})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("status")),e.createElement(u,{ref:"status",data:(new r).getStatusList(),value:(new r).STATUS_ENABLE})))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic approve button"},c.t("close")),e.createElement("div",{className:"ui button teal",onClick:t.save},c.t("add")))))}});return h}),define("components/course/form-modal-add-course-chapter",["react","helper","pref","role","eventbus","models/course-chapter","language/coursechapter","language/default","components/select-status","components/confirm"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"ModalAddCourseChapterComponent",getInitialState:function(){return{rowdata:[],quizList:[],pass:!0,rownum:[]}},save:function(){var a=this;$(".ui.form").addClass("loading"),(new r).save({company_id:n.get("cid"),creator_id:n.get("uid"),lms_course_id:a.props.course.id,name:$(e.findDOMNode(a.refs.name)).val(),status:$(e.findDOMNode(a.refs.status)).dropdown("get value")},{success:function(e,n){i.trigger("coursechapter:updateList","add",n),t.showSuccess(s.t("insert_success")),$(a.getDOMNode()).modal({context:$(a.getDOMNode()).parent()}).modal("hide")},error:function(e,n){t.notifyError(n,o,s.t("insert_error"))},complete:function(){$(".ui.form").removeClass("loading")}})},componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){i.trigger("course:hidemodal")},autofocus:!1,context:$(this.getDOMNode())}).modal("show"),$(".ui.checkbox").checkbox()},render:function(){var t=this,n=o.t("heading")+" \\ "+s.t("insert");return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("div",{className:"header"},n),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,o.t("name")),e.createElement("input",{ref:"name"})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("status")),e.createElement(l,{ref:"status",data:(new r).getStatusList(),value:(new r).STATUS_ENABLE})))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic approve button"},s.t("close")),e.createElement("div",{className:"ui button teal",onClick:t.save},s.t("add")))))}});return d}),define("components/course/form-edit-course-quiz-question",["react","backbone","helper","eventbus","querystring","pref","models/course-quiz","models/course-quiz-question","models/course-quiz-take-answer","models/course","language/coursequiz","collections/course-quiz","collections/course-quiz-question","collections/course-quiz-take-answer","collections/course","components/select-status","components/select-file/filelist","components/select-file/filestrip","components/tinymce","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y){var E=e.createClass({displayName:"FormEditCourseQuizQuestionComponent",getInitialState:function(){return{data:this.props.data}},getDefaultProps:function(){return{data:{}}},save:function(t){var i=this;$(".ui.form").addClass("loading");var l=new s;$.isEmptyObject(this.state.data)||(l=new s({id:this.state.data.id}));var c=[],u=$(e.findDOMNode(i.refs.type)).dropdown("get value"),m="",p="";u==(new s).TYPE_TEXTBOX?this.props.quizData.mark_type==(new o).MARKTYPE_POINT?p=t[0].name_answer:m=t[0].name_answer:c=t,l.save({company_id:r.get("cid"),creator_id:r.get("uid"),lms_quiz_id:i.props.quizData.id,type:u,content:tinyMCE.get("content_lecture_question").getContent(),options:c,point:parseFloat($(e.findDOMNode(i.refs.point)).autoNumeric("get"))?$(e.findDOMNode(i.refs.point)).autoNumeric("get"):0,point_if_fill_input:p,display_order:$(e.findDOMNode(i.refs.display_order)).autoNumeric("get")},{success:function(e,t){parseInt(i.state.data.id)&&i.state.data.id>0?(n.showSuccess(y.t("update_success")),a.trigger("coursequizquestion:updateList","update",t)):(i.setState({data:{}}),n.showSuccess(y.t("insert_success")),a.trigger("coursequizquestion:updateList","add",t)),$.isEmptyObject(i.state.data)&&a.trigger("coursequizquestionadd:hidemodal")},error:function(e,t){n.notifyError(t,d,y.t("update_error"))},complete:function(){$(".ui.form").removeClass("loading")}})},selectQuizType:function(e){a.trigger("coursequizquestionlist:changetype",e)},cancelEdit:function(){a.trigger("coursequizquestion:clearform",{})},componentDidMount:function(){this.selectQuizType(this.state.data.type),$(e.findDOMNode(this.refs.display_order)).autoNumeric(n.formatOnlyNumber()),$(e.findDOMNode(this.refs.point)).autoNumeric(n.formatOnlyNumber(2))},render:function(){var t=y.t("insert"),n="none";$.isEmptyObject(this.state.data)||(n="",t=y.t("update"));var a={menubar:!0,autoresize_min_height:170,toolbar:"undo redo formatselect | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist | indent outdent"};return e.createElement("span",{key:Object.keys(this.state.data).length},e.createElement("div",{className:"ui fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("div",{className:"field sixteen wide required"},e.createElement("label",null,d.t("content")),e.createElement(v,{ref:"content",id:"content_lecture_question",key:"content_"+moment().unix(),autoLoad:!0,content:this.state.data.content||"",config:a})))),e.createElement("div",{className:"ui fields"},e.createElement("div",{className:"field wide four"},e.createElement("label",null,d.t("type")),e.createElement(f,{key:"content_"+moment().unix(),ref:"type",onChange:this.selectQuizType,value:this.state.data.type||(new s).TYPE_SINGLE_CHOICE,data:(new s).getTypeList()})),e.createElement("div",{className:"field wide four"},e.createElement("label",null,d.t("point")),e.createElement("input",{ref:"point",key:"point_"+moment().unix(),defaultValue:this.state.data.point})),e.createElement("div",{className:"field wide four"},e.createElement("label",null,d.t("displayorder")),e.createElement("input",{ref:"display_order",key:"display_order_"+moment().unix(),defaultValue:this.state.data.display_order}))),e.createElement("div",{className:"ui fields",ref:"div_correct",style:{display:"none"}},e.createElement("div",{className:"field sixteen wide required"},e.createElement("label",null,d.t("correctiffillinput")),e.createElement("input",{ref:"correct_if_fill_input",key:"correct_if_fill_input_"+moment().unix(),type:"text",defaultValue:this.state.data.correct_if_fill_input||""}))),e.createElement("div",{className:"ui fields",ref:"div_point",style:{display:"none"}},e.createElement("div",{className:"field sixteen wide required"},e.createElement("label",null,d.t("pointiffillinput")),e.createElement("input",{ref:"point_if_fill_input",key:"point_if_fill_input_"+moment().unix(),type:"text",defaultValue:this.state.data.point_if_fill_input||""}))))}});return E}),define("components/course/quiz-question-answer-item",["react","helper","pref","role","eventbus","models/course-quiz-question","models/course-quiz","collections/user","language/coursequizquestion","language/default","components/confirm","components/row-creator"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"CourseQuizQuestionItemComponent",getInitialState:function(){return{type:(new r).TYPE_SINGLE_CHOICE}},update:function(){i.trigger("coursequizquestion:update",this.props.data)},_remove:function(){i.trigger("coursequizquestion:removeanswer",this.props.index)},getValue:function(){var t=this;return{display_order:$(e.findDOMNode(t.refs.display_order)).val(),point:$(e.findDOMNode(t.refs.point)).val(),pass:$(e.findDOMNode(t.refs.select)).checkbox("is checked")?1:0,name_answer:$(e.findDOMNode(t.refs.name_answer)).val()}},initCheckbox:function(){$(e.findDOMNode(this.refs.select)).checkbox(),1==this.props.data.pass&&$(e.findDOMNode(this.refs.select)).checkbox("set checked")},componentDidUpdate:function(){this.initCheckbox(),$(e.findDOMNode(this.refs.name_answer)).focus()},componentWillUnmount:function(){},componentDidMount:function(){var n=this;$(e.findDOMNode(this.refs.remove)).popup({on:"click",position:"left center",inline:!0,html:e.renderToStaticMarkup(e.createElement(d,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(t){t.preventDefault(),$(e).popup("hide"),n._remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}}),this.initCheckbox(),$(e.findDOMNode(this.refs.display_order)).add(e.findDOMNode(this.refs.point)).autoNumeric(t.formatOnlyNumber())},renderDesktop:function(){var n=(new r).getType(this.props.data.type),a="",i="",n="checkbox";return parseInt(this.props.type)==(new r).TYPE_SINGLE_CHOICE&&(n="radio",a="radio",i="select"),e.createElement("tr",null,e.createElement("td",{width:"80"},e.createElement("input",{type:"text",ref:"display_order",placeholder:l.t("display_order"),defaultValue:this.props.data.display_order})),e.createElement("td",{ref:"select_type",className:"center aligned",width:"50"},e.createElement("div",{className:"ui "+a+" checkbox",ref:"select"},e.createElement("input",{type:n,name:i}),e.createElement("label",null," "))),e.createElement("td",{ref:""},e.createElement("textarea",{ref:"name_answer",autoFocus:!0,placeholder:l.t("name_question"),rows:2,defaultValue:this.props.data.name_answer})),e.createElement("td",null,e.createElement("a",{href:"javascript:void(0)",className:t.rowButtonClass(),ref:"remove"},e.createElement("i",{className:"icon tc-trash"}))))},render:function(){return this.renderDesktop()}});return m}),define("components/input-tag",["react","pref"],function(e,t){var n=e.createClass({displayName:"TagComponent",getDefaultProps:function(){return{max:200,defaultText:"",defaultTag:"",tag_default:!0,tag_default_list:[]}},setValue:function(t){if(t.length>0&&$.isArray(t)){for(var n=[],a=0;a<t.length;a++)n.push(t[a].toString());$(e.findDOMNode(this)).dropdown("set selected",n)}else if(""!=t){for(var i=t.split(","),r=[],a=0;a<i.length;a++){var o=$.trim(i[a]);o.length>0&&r.push(o.toString())}$(e.findDOMNode(this)).dropdown("set selected",r)}},getValue:function(){var t=[];return $(e.findDOMNode(this)).dropdown("refresh"),""!=$(e.findDOMNode(this)).dropdown("get value")&&(t=$(e.findDOMNode(this)).dropdown("get value").split(",")),t},componentDidMount:function(){if($(e.findDOMNode(this)).dropdown({allowAdditions:!0,maxSelections:this.props.max}),""!=this.props.defaultTag){var t=this.props.defaultTag.split(",");this.setValue(t)}},render:function(){return e.createElement("div",{className:"ui fluid multiple search selection dropdown"},e.createElement("input",{name:"tags",type:"hidden",key:moment().unix()}),e.createElement("div",{className:"default text"},this.props.defaultText),e.createElement("div",{className:"menu"}))}});return n}),define("components/course/quiz-question-answer-text-item",["react","helper","pref","role","eventbus","models/course-quiz-question","models/course-quiz","collections/user","language/coursequizquestion","language/default","components/confirm","components/input-tag","components/row-creator"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"CourseQuizQuestionTextItemComponent",getValue:function(){var e=this;return{display_order:1,pass:1,name_answer:e.refs.name_answer.getValue().join(", ")}},componentWillUnmount:function(){},componentDidUpdate:function(){},componentDidMount:function(){var n=this;$(e.findDOMNode(this.refs.remove)).popup({on:"click",position:"left center",inline:!0,html:e.renderToStaticMarkup(e.createElement(d,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(t){t.preventDefault(),$(e).popup("hide"),n._remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}}),$(e.findDOMNode(this.refs.display_order)).autoNumeric(t.formatOnlyNumber())},renderDesktop:function(){return e.createElement("tr",null,e.createElement("td",{ref:""},e.createElement(u,{ref:"name_answer",defaultTag:this.props.data})))},render:function(){return this.renderDesktop()}});return p}),define("components/course/quiz-question-answer-list",["react","backbone","helper","eventbus","querystring","pref","models/course-quiz","models/course-quiz-question","models/course-quiz-take-answer","models/course","language/coursequiz","language/coursequizquestion","collections/course-quiz","collections/course-quiz-question","collections/course-quiz-take-answer","components/select-status","components/course/form-edit-course-quiz-question","components/course/quiz-question-answer-item","components/course/quiz-question-answer-text-item","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y){var E=e.createClass({displayName:"QuizQuestionTakeAnswerComponent",getInitialState:function(){return{items:this.props.data?this.props.data.options:[],quiz_data:this.props.quiz_data,answer_list:[],item_edit:{},value:"",type:$.isEmptyObject(this.props.data)?(new s).TYPE_SINGLE_CHOICE:this.props.data.type}},getDefaultProps:function(){return{quiz_data:{},options:[]}},loadData:function(e){var t=this;$.isEmptyObject(this.state.quiz_data)||(new h).fetch({data:{company_id:r.get("cid"),lms_course_quiz_question_id:this.props.quizData,sort_by:"display_order",page:e},success:function(n,a){var i=$.extend([],t.state.items),r=Math.ceil(a.total/a.limit),o=a.items;o.map(function(e,t){i.push(e)}),t.setState({items:i}),r<a.current_page&&t.loadData(e+1)},error:function(){},complete:function(){}})},updateList:function(e,t){var n=$.extend([],this.state.items);switch(e){case"update":n.map(function(e,a){t.id==e.id&&(n[a]=t)});break;case"add":n.unshift(t);break;case"delete":n.map(function(e,a){e.id==t.id&&delete n[a]})}this.setState({items:n})},addNewRow:function(){var e=this.getOptionList();e.push({}),this.setState({items:e})},getValue:function(){return this.getOptionList()},sortAnswer:function(e){var t={},n=[];return e.map(function(e,n){t.hasOwnProperty(e.display_order)||(t[e.display_order]=[]),t[e.display_order].push(n)}),$.each(t,function(t,a){a.map(function(t,a){n.push(e[t])})}),n},getOptionList:function(e){var t=this,a=[];if(this.state.type==(new s).TYPE_TEXTBOX)a.push(t.refs.row.getValue());else{var i=$.extend([],this.state.items);i.length&&i.map(function(i,r){if(t.refs.hasOwnProperty("row-"+r)){var o=t.refs["row-"+r].getValue();if(""==o.name_answer){if(!e)return n.showError(u.t("error_name_answer_is_empty"),5e3),!1}else a.push(o)}}),a=this.sortAnswer(a)}return a},removeAnswer:function(e){var t=this.getOptionList(!0);delete t[e],this.setState({items:t})},changetype:function(e){this.setState({type:e})},componentWillMount:function(){if(this.props.data){if(this.props.quizData.mark_type==(new o).MARKTYPE_POINT)var e=this.props.data.point_if_fill_input;else var e=this.props.data.correct_if_fill_input;this.setState({value:e})}},componentWillUnmount:function(){a.off("coursequizquestionlist:changetype",this.changetype),a.off("coursequizquestion:removeanswer",this.removeAnswer)},componentDidMount:function(){this.loadData(1),a.on("coursequizquestionlist:changetype",this.changetype),a.on("coursequizquestion:removeanswer",this.removeAnswer)},render:function(){var t=this,n=0,a=this.state.type==(new s).TYPE_TEXTBOX;return e.createElement("div",{className:"field sixteen wide"},e.createElement("table",{className:"ui small striped selectable unstackable table",ref:"employeepointtable"},e.createElement("thead",null,e.createElement("tr",null,a?null:e.createElement("th",{className:"collapsing"},u.t("display_order")),a?null:e.createElement("th",{className:"collapsing",width:"70",ref:"pass"},u.t("pass")),e.createElement("th",null,u.t("name_question"),a?e.createElement("i",{style:{fontSize:"10px"}}," (",u.t("if_empty_has_point"),")"):null),a?null:e.createElement("th",{className:"collapsing"}))),e.createElement("tbody",{id:"select",style:{display:a?"none":""}},this.state.items.map(function(i,r){return a?void 0:(n=parseInt(n),i.display_order?n=i.display_order:(n+=1,i.display_order=n,i.display_order||(i.display_order=r)),e.createElement(_,{ref:"row-"+r,key:r+"_"+moment().valueOf(),type:t.state.type,index:r,data:i}))}),e.createElement("tr",{ref:"add_row"},e.createElement("td",{colSpan:4},e.createElement("span",{className:"ui button basic",onClick:this.addNewRow},e.createElement("i",{className:"icon tc-plus"}),u.t("add"))))),e.createElement("tbody",{id:"text",style:{display:a?"":"none"}},e.createElement(v,{ref:"row",key:"row_"+moment().valueOf(),data:this.state.value}))))}});return E}),define("components/course/form-modal-add-course-quiz-question",["react","backbone","helper","eventbus","querystring","pref","models/course-quiz","models/course-quiz-question","models/course","language/coursequiz","language/coursequiztakeanswer","language/coursequizquestion","collections/course-quiz","collections/course","components/select-status","components/course/form-edit-course-quiz-question","components/course/quiz-question-answer-list","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_){var v=e.createClass({displayName:"ModalAddCourseQuizQuestionComponent",getInitialState:function(){return{item_edit:{}}},getDefaultProps:function(){return{data:{}}},save:function(){var e=this.refs.answer_list.getValue(),t=!1;e.length?e.map(function(e,n){e.pass&&(t=!0)}):n.showError(u.t("error_answer_is_empty")),t?this.refs.form_edit_quiz_question.save(e):n.showError(u.t("error_answer_pass_is_empty"))},update:function(e){this.setState({item_edit:e})},hidemodal:function(){$(e.findDOMNode(this.refs.modal)).modal("hide")},componentWillUnmount:function(){a.off("coursequizquestion:update",this.update),a.off("coursequizquestion:clearform",this.update),a.off("coursequizquestionadd:hidemodal",this.hidemodal)},componentDidMount:function(){a.on("coursequizquestion:update",this.update),a.on("coursequizquestion:clearform",this.update),a.on("coursequizquestionadd:hidemodal",this.hidemodal),$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){console.log("abc"),a.trigger("course:hidemodal")},closable:!1,context:$(this.getDOMNode())}).modal("show"),setTimeout(function(){a.trigger("coursequiz:openaccordion")},500)},render:function(){var t=this,n=_.t("insert");this.props&&this.props.data&&this.props.data.id>0&&(n=_.t("update"));var a=c.t("question");return e.createElement("div",null,e.createElement("div",{className:"ui modal",ref:"modal"},e.createElement("div",{className:"header"},a),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement(f,{ref:"form_edit_quiz_question",key:"formEdit"+moment().unix(),data:{},quizData:this.props.quizData}),e.createElement("h4",{className:"ui horizontal divider header"},u.t("listquestiontakeanswer")),e.createElement("div",{className:"ui fields"},e.createElement(g,{ref:"answer_list",quizData:this.props.quizData,questionData:this.state.data,item_edit:t.state.item_edit})))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic approve button"},_.t("close")),e.createElement("div",{className:"ui button teal",onClick:this.save},_.t("save")))))}});return v}),define("components/course/form-modal-edit-course-lecture",["react","backbone","helper","eventbus","querystring","pref","models/course-lecture","models/course-category","models/course-chapter","models/course-quiz","models/course","language/courselecture","collections/course-lecture","collections/course-category","collections/course-chapter","collections/course-quiz","collections/course","components/select-status","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v){var y=e.createClass({displayName:"ModalEditCourseLectureComponent",getInitialState:function(){return{quizList:[],chapterList:[],rowdata:[],pass:!0,rownum:[]}},loadChapter:function(){var e=this;(new h).fetch({data:{company_id:r.get("cid"),lms_course_id:this.props.data.lms_course_id},success:function(t,n){var a=n.items,i=[];a.map(function(e,t){i.push({code:e.id,text:e.name,color:""})}),e.setState({chapterList:i})},complete:function(){},error:function(){}})},loadQuiz:function(){var e=this;(new f).fetch({data:{company_id:r.get("cid"),lms_course_lecture_id:0,lms_course_id:this.props.data.lms_course_id,status:(new c).STATUS_ENABLE},success:function(t,n){var a=n.items,i=[];a.map(function(e,t){i.push({code:e.id,text:e.title,color:""})}),e.setState({quizList:i})},complete:function(){},error:function(){}})},save:function(){var t=this;$(".ui.form").addClass("loading"),new o({id:this.props.data.id}).save({company_id:r.get("cid"),creator_id:r.get("uid"),lms_course_id:t.props.data.lms_course_id,lms_course_chapter_id:$(e.findDOMNode(t.refs.lms_course_chapter_id)).dropdown("get value"),lms_course_category_id:t.props.data.lms_course_category_id,title:$(e.findDOMNode(t.refs.title)).val(),summary:$(e.findDOMNode(t.refs.summary)).val(),type:$(e.findDOMNode(t.refs.type)).dropdown("get value"),lecture_type:$(e.findDOMNode(t.refs.lecture_type)).dropdown("get value"),is_free:$(e.findDOMNode(t.refs.is_free)).checkbox("is checked"),quiz_id:$(e.findDOMNode(t.refs.quiz_id)).dropdown("get value"),status:$(e.findDOMNode(t.refs.status)).dropdown("get value"),duration_in_minute:$(e.findDOMNode(t.refs.duration_inminute)).val(),display_order:$(e.findDOMNode(t.refs.display_order)).val()},{success:function(e,i){a.trigger("courselecture:updateList","update",i),n.showSuccess(v.t("update_success")),$(t.getDOMNode()).modal({context:$(t.getDOMNode()).parent()}).modal("hide")},error:function(e,t){n.notifyError(t,u,v.t("update_error"))},complete:function(){$(".ui.form").removeClass("loading")}})},selectQuiz:function(t){t==(new o).TYPE_QUIZ?$(e.findDOMNode(this.refs.select_quiz)).show():$(e.findDOMNode(this.refs.select_quiz)).hide()},componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){a.trigger("course:hidemodal")},context:$(this.getDOMNode())}).modal("show"),$(".ui.checkbox").checkbox(),this.props.data.is_free&&$(".ui.checkbox").checkbox("set checked"),this.loadChapter(),this.loadQuiz(),this.props.data.type==(new o).TYPE_QUIZ&&$(e.findDOMNode(this.refs.select_quiz)).show(),$(e.findDOMNode(this.refs.duration_inminute)).add($(e.findDOMNode(this.refs.display_order))).autoNumeric({lZero:"deny",mDec:"0",vMin:"0"})},render:function(){var t=this,n=v.t("insert");this.props&&this.props&&this.props.data.id>0&&(n=v.t("update"));var a=u.t("heading")+" \\ "+n;return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("div",{className:"header"},a),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,u.t("title")),e.createElement("input",{ref:"title",type:"text",defaultValue:this.props.data.title})),e.createElement("div",{className:"field"},e.createElement("label",null,u.t("chapter")),e.createElement(_,{key:moment().valueOf(),ref:"lms_course_chapter_id",data:this.state.chapterList,value:this.props.data.lms_course_chapter_id})),e.createElement("div",{className:"field"},e.createElement("label",null,u.t("lecturetype")),e.createElement(_,{ref:"lecture_type",value:this.props.data.lecture_type,data:(new o).getLectureTypeList()})),e.createElement("div",{className:"field required"},e.createElement("label",null,u.t("type")),e.createElement(_,{value:this.props.data.type,onChange:this.selectQuiz,ref:"type",data:(new o).getTypeList()})),e.createElement("div",{className:"field",style:{display:"none"},ref:"select_quiz"},e.createElement("label",null,u.t("quizid")),e.createElement(_,{key:moment().valueOf(),ref:"quiz_id",data:this.state.quizList,value:this.props.data.quiz_id})),e.createElement("div",{className:"field"},e.createElement("label",null,u.t("displayorder")),e.createElement("input",{ref:"display_order",type:"text",defaultValue:this.props.data.display_order})),e.createElement("div",{className:"field"},e.createElement("label",null,u.t("durationinminute")),e.createElement("input",{ref:"duration_inminute",type:"text",defaultValue:this.props.data.duration_in_minute})),e.createElement("div",{className:"field sixteen wide"},e.createElement("label",null,u.t("summary")),e.createElement("textarea",{ref:"summary",type:"text",rows:"3",defaultValue:this.props.data.summary})),e.createElement("div",{className:"field"},e.createElement("label",null,u.t("isfree")),e.createElement("div",{className:"ui toggle checkbox",ref:"is_free"},e.createElement("input",{type:"checkbox",name:"public"}),e.createElement("label",null," "))),e.createElement("div",{className:"field"},e.createElement("label",null,u.t("status")),e.createElement(_,{ref:"status",value:this.props.data.status,data:(new o).getStatusList()})))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic approve button"},v.t("close")),e.createElement("div",{className:"ui button teal",onClick:t.save},n))))}});return y}),define("components/course/form-modal-edit-course-lecture-content",["react","backbone","helper","eventbus","querystring","pref","models/course-lecture","models/course-lecture-content","models/course-category","models/course","language/courselecturecontent","collections/course-lecture","collections/course-lecture-content","collections/course-category","collections/course","collections/course-quiz","components/select-status","components/select-file/filelist","components/select-file/filestrip","components/tinymce","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E){
var b=e.createClass({displayName:"ModalEditCourseLectureComponent",getInitialState:function(){return{quizList:[],content:this.props.lecture_content,rowdata:[],pass:!0,loadcontent:1,rownum:[]}},getDefaultProps:function(){return{course:{},lecture_content:{}}},delete_content:function(){var e=this;$(".ui.form").addClass("loading"),new s({id:this.state.content.id}).destroy({success:function(){n.showSuccess(d.t("delete_content_success")),a.trigger("courselecturecontent:updateList","delete",e.state.content),$(e.getDOMNode()).modal({context:$(e.getDOMNode()).parent()}).modal("hide"),setTimeout(function(){a.trigger("course:mountModalUpdate","lecturecontent",e.props.data)},500)},error:function(){n.showError(E.t("delete_error"))},complete:function(){$(".ui.form").removeClass("loading")}})},loadContent:function(){var e=this;(new m).fetch({data:{company_id:r.get("cid"),lms_course_lecture_id:e.props.lecture.id,status:(new s).STATUS_ENABLE},success:function(t,n){var a=n.items;a.length&&e.setState({content:a[0]})},complete:function(){},error:function(){}})},getFile:function(){var e="";return e=this.refs.oldfile.getFileList(),""!=this.refs.newfile.getFileListByLimit()&&(e=this.refs.newfile.getFileListByLimit()),e},save:function(){var t=this,i=$.extend({},this.state.content);$(".ui.form").addClass("loading");var o=new s,l="add";!$.isEmptyObject(i)&&i.hasOwnProperty("id")&&(o=new s({id:i.id}),l="update"),o.save({company_id:r.get("cid"),creator_id:r.get("uid"),lms_course_lecture_id:t.props.lecture.id,lms_course_id:t.props.lecture.lms_course_id,embed_url:$(e.findDOMNode(t.refs.embed_url)).val(),content:tinyMCE.get("content_lecture").getContent(),status:$(e.findDOMNode(t.refs.status)).dropdown("get value")},{success:function(e,i){a.trigger("courselecturecontent:updateList",l,i),n.showSuccess(d.t("update_lecture_content_success")),$(t.getDOMNode()).modal({context:$(t.getDOMNode()).parent()}).modal("hide")},error:function(e,t){n.notifyError(t,d,E.t("update_error"))},complete:function(){$(".ui.form").removeClass("loading")}})},componentWillMount:function(){},componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){a.trigger("course:hidemodal")},context:$(this.getDOMNode()),closable:!1}).modal("show")},render:function(){var t=this,n=E.t("insert");this.props&&this.props&&this.props.data.id>0&&(n=E.t("update"));var a=n+" "+d.t("heading"),i={menubar:!0,autoresize_min_height:170,toolbar:"undo redo formatselect | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist | indent outdent | link unlink image"};return e.createElement("div",null,e.createElement("div",{className:"ui modal",ref:"modal"},e.createElement("div",{className:"header"},a),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,d.t("embedurl")),e.createElement("input",{key:"embed_url_"+moment().valueOf(),defaultValue:this.state.content.embed_url,ref:"embed_url"})),e.createElement("div",{className:"field required"},e.createElement("label",null,d.t("content")),e.createElement(y,{key:"content_"+this.state.loadcontent,ref:"content",id:"content_lecture",autoLoad:!0,content:this.state.content.content,config:i})),e.createElement("div",{className:"field"},e.createElement("label",null,d.t("status")),e.createElement(g,{key:"status_"+moment().valueOf(),ref:"status",value:this.state.content.id>0?this.state.content.status:(new s).STATUS_ENABLE,data:(new o).getStatusList()})))),e.createElement("div",{className:"actions"},$.isEmptyObject(this.state.content)?"":e.createElement("a",{href:"javascript:void(0)",onClick:this.delete_content,style:{float:"left"}},d.t("delete")),e.createElement("div",{className:"ui noborder basic approve button"},E.t("close")),e.createElement("div",{className:"ui button teal",onClick:t.save},n))))}});return b}),define("components/course/form-modal-edit-course-quiz",["react","backbone","helper","eventbus","querystring","pref","models/course-quiz","models/course-quiz-question","models/course","language/coursequiz","collections/course-quiz","collections/course","components/select-status","components/select-file/filelist","components/select-file/filestrip","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"ModalEditCourseQuizComponent",getInitialState:function(){return{rowdata:[],pass:!0,rownum:[]}},getFile:function(){var e="";return e=this.refs.oldfile.getFileList(),""!=this.refs.cover_file_id.getFileListByLimit()&&(e=this.refs.cover_file_id.getFileListByLimit()),e},save:function(){var t=this;$(".ui.form").addClass("loading"),new o({id:this.props.data.id}).save({company_id:r.get("cid"),creator_id:r.get("uid"),lms_course_id:t.props.data.lms_course_id,title:$(e.findDOMNode(t.refs.title)).val(),duration:$(e.findDOMNode(t.refs.duration)).val(),mark_type:$(e.findDOMNode(t.refs.mark_type)).dropdown("get value"),status:$(e.findDOMNode(t.refs.status)).dropdown("get value"),mark_to_pass:$(e.findDOMNode(t.refs.mark_to_pass)).val()},{success:function(e,i){a.trigger("coursequiz:updateList","update",i),n.showSuccess(f.t("update_success")),$(t.getDOMNode()).modal({context:$(t.getDOMNode()).parent()}).modal("hide")},error:function(e,t){n.notifyError(t,c,f.t("update_error"))},complete:function(){$(".ui.form").removeClass("loading")}})},selectQuiz:function(t){t==(new o).TYPE_QUIZ?$(e.findDOMNode(this.refs.select_quiz)).show():$(e.findDOMNode(this.refs.select_quiz)).hide()},selectQuizType:function(t){t==(new s).TYPE_TEXTBOX?($(e.findDOMNode(this.refs.div_input)).show(),$(e.findDOMNode(this.refs.div_option)).hide()):($(e.findDOMNode(this.refs.div_option)).show(),$(e.findDOMNode(this.refs.div_input)).hide())},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){a.trigger("course:hidemodal")},context:$(this.getDOMNode())}).modal("show"),$(".ui.checkbox").checkbox(),$(e.findDOMNode(this.refs.is_check_pass_or_not)).checkbox({onChecked:function(){$(e.findDOMNode(t.refs.mark_to_pass)).show()},onUnchecked:function(){$(e.findDOMNode(t.refs.mark_to_pass)).hide()}}),setTimeout(function(){a.trigger("coursequiz:openaccordion")},500)},render:function(){var t=this,n=f.t("update"),a=c.t("heading")+" \\ "+n;return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("div",{className:"header"},a),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,c.t("title")),e.createElement("input",{ref:"title",type:"text",defaultValue:this.props.data.title})),e.createElement("div",{className:"field"},e.createElement("label",null,c.t("duration")),e.createElement("input",{ref:"duration",type:"text",defaultValue:this.props.data.duration})),e.createElement("div",{className:"field"},e.createElement("label",null,c.t("status")),e.createElement(m,{ref:"status",value:this.props.data.status,data:(new o).getStatusList()})),e.createElement("div",{className:"field required"},e.createElement("label",null,c.t("marktype")),e.createElement(m,{ref:"mark_type",value:this.props.data.mark_type,data:(new o).getMarkTypeList()})),e.createElement("div",{className:"field required"},e.createElement("label",null,c.t("marktopass")),e.createElement("input",{ref:"mark_to_pass",type:"text",defaultValue:this.props.data.mark_to_pass})))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic approve button"},f.t("close")),e.createElement("div",{className:"ui button teal",onClick:t.save},f.t("update")))))}});return g}),define("components/course/form-modal-edit-course-quiz-question",["react","backbone","helper","eventbus","querystring","pref","models/course-quiz","models/course-quiz-question","models/course","language/coursequiz","language/coursequiztakeanswer","language/coursequizquestion","collections/course-quiz","collections/course","components/select-status","components/course/form-edit-course-quiz-question","components/course/quiz-question-answer-list","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_){var v=e.createClass({displayName:"ModalEditCourseQuizQuestionComponent",getInitialState:function(){return{item_edit:{}}},getDefaultProps:function(){return{data:{}}},save:function(){var e=this.refs.answer_list.getValue(),t=!1;e.length?e.map(function(e,n){e.pass&&(t=!0)}):n.showError(u.t("error_answer_is_empty")),t?this.refs.form_edit_quiz_question.save(e):n.showError(u.t("error_answer_pass_is_empty"))},update:function(e){this.setState({item_edit:e})},hidemodal:function(){var e=this;$(e.getDOMNode()).modal({context:$(e.getDOMNode()).parent()}).modal("hide")},componentWillMount:function(){},componentWillUnmount:function(){a.off("coursequizquestion:update",this.update),a.off("coursequizquestion:clearform",this.update),a.off("coursequizquestionedit:hidemodal",this.hidemodal)},componentDidMount:function(){a.on("coursequizquestion:update",this.update),a.on("coursequizquestion:clearform",this.update),a.on("coursequizquestionedit:hidemodal",this.hidemodal),$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){a.trigger("course:hidemodal")},closable:!1,context:$(this.getDOMNode())}).modal("show"),setTimeout(function(){a.trigger("coursequiz:openaccordion")},500)},render:function(){var t=_.t("insert");this.props&&this.props.data&&this.props.data.id>0&&(t=_.t("update"));var n=c.t("question");return e.createElement("div",null,e.createElement("div",{className:"ui modal",ref:"modal"},e.createElement("div",{className:"header"},n),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement(f,{ref:"form_edit_quiz_question",key:"formEdit"+moment().unix(),data:this.props.data,quizData:this.props.quizData}),e.createElement("h4",{className:"ui horizontal divider header"},u.t("listquestiontakeanswer")),e.createElement("div",{className:"ui fields"},e.createElement(g,{ref:"answer_list",data:this.props.data,quizData:this.props.quizData})))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic approve button"},_.t("close")),e.createElement("div",{className:"ui button teal",onClick:this.save},_.t("save")))))}});return v}),define("components/course/form-modal-edit-course-limit",["react","helper","pref","role","eventbus","models/course-limit","models/employee","collections/user","collections/office","collections/department","language/courselimit","language/default","components/row-creator","components/select-status","components/select-employee","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"ModalEditCourseLimitComponent",getInitialState:function(){return{rowdata:[],quizList:[],pass:!0,rownum:[]}},getObjectID:function(){var t=$(e.findDOMNode(this.refs.type)).dropdown("get value"),n=0;return this.refs["val_object_"+t]&&(n=$(e.findDOMNode(this.refs["val_object_"+t])).dropdown("get value")),n},save:function(){var a=this;console.log(this.getObjectID()),$(".ui.form").addClass("loading"),new r({id:this.props.data.id}).save({company_id:n.get("cid"),creator_id:n.get("uid"),lms_course_id:a.props.data.lms_course_id,limit_type:$(e.findDOMNode(a.refs.type)).dropdown("get value"),status:$(e.findDOMNode(a.refs.status)).dropdown("get value"),object_id:a.getObjectID()},{success:function(e,n){i.trigger("courselimit:updateList","update",n),t.showSuccess(u.t("update_success")),$(a.getDOMNode()).modal({context:$(a.getDOMNode()).parent()}).modal("hide")},error:function(e,n){t.notifyError(n,d,u.t("insert_error"))},complete:function(){$(".ui.form").removeClass("loading")}})},changeType:function(t){var n="object_"+t;this.refs[n]&&($(".limit-course-object").hide(),$(e.findDOMNode(this.refs[n])).show())},componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){i.trigger("course:hidemodal")},autofocus:!1,context:$(this.getDOMNode())}).modal("show");var t="object_"+this.props.data.limit_type;this.refs[t]&&($(".limit-course-object").hide(),$(e.findDOMNode(this.refs[t])).show()),$(".ui.checkbox").checkbox()},render:function(){var t=this,a=[],i=[],s=d.t("heading")+" \\ "+u.t("update"),m=(new l).fetchFromCache({company_id:n.get("cid")}),f=(new c).fetchFromCache({company_id:n.get("cid")});return m.items.length&&m.items.map(function(e,t){a.push({text:e.name,code:e.id,color:""})}),f.items.length&&f.items.map(function(e,t){i.push({text:e.name,code:e.id,color:""})}),e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("div",{className:"header"},s),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide required"},e.createElement("label",null,d.t("limittype")),e.createElement(p,{ref:"type",value:this.props.data.limit_type,onChange:this.changeType,data:(new r).getTypeList()}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide required limit-course-object",style:{display:"none"},ref:"object_1"},e.createElement("label",null,d.t("LIMITTYPE_OFFICE")),e.createElement(p,{ref:"val_object_1",value:this.props.data.object_id,data:a})),e.createElement("div",{className:"field sixteen wide required limit-course-object",style:{display:"none"},ref:"object_3"},e.createElement("label",null,d.t("LIMITTYPE_DEPARTMENT")),e.createElement(p,{ref:"val_object_3",value:this.props.data.object_id,data:i})),e.createElement("div",{className:"field sixteen wide required limit-course-object",style:{display:"none"},ref:"object_7"},e.createElement("label",null,d.t("LIMITTYPE_POSITION")),e.createElement(p,{ref:"val_object_7",value:this.props.data.object_id,data:(new o).getPositionList()})),e.createElement("div",{className:"field sixteen wide required limit-course-object",style:{display:"none"},ref:"object_9"},e.createElement("label",null,d.t("LIMITTYPE_EMPLOYEE")),e.createElement(h,{ref:"val_object_9",defaultValue:[this.props.data.object_id]}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide"},e.createElement("label",null,d.t("status")),e.createElement(p,{ref:"status",value:this.props.data.status,data:(new r).getStatusList()}))))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic approve button"},u.t("close")),e.createElement("div",{className:"ui button teal",onClick:t.save},u.t("save")))))}});return g}),define("components/course/tab-enroll-lecture-item-list",["react","helper","pref","role","eventbus","models/course-enroll","models/employee","collections/user","collections/office","collections/department","language/courseenroll","language/default","components/row-creator","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"CourseEnrollLectureItemComponent",edit:function(){i.trigger("course:mountModalUpdate","enroll",this.props.data)},_remove:function(){i.trigger("courseenroll:remove",this.props.data.id)},getObject:function(){var t=this.props.data.object_id,a="";if(this.props.data.limit_type==(new r).LIMITTYPE_DEPARTMENT){var i=(new c).fetchFromCache({company_id:n.get("cid"),id:t});i.items.length&&(a=i.items[0].name)}if(this.props.data.limit_type==(new r).LIMITTYPE_EMPLOYEE){var d=(new s).fetchFromCache({id:t});d.items.length&&(a=d.items[0].fullname)}if(this.props.data.limit_type==(new r).LIMITTYPE_OFFICE){var u=(new l).fetchFromCache({company_id:n.get("cid"),id:t});u.items.length&&(a=u.items[0].name)}this.props.data.limit_type==(new r).LIMITTYPE_POSITION&&(a=(new o).getPosition(t),a=a.text),$(e.findDOMNode(this.refs.object)).html(a)},componentDidMount:function(){var n=this;this.getObject(),$(e.findDOMNode(this.refs.remove)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(p,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(t){t.preventDefault(),$(e).popup("hide"),n._remove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}}),t.initMyTip($(e.findDOMNode(this.refs.btn_insert_lecture)))},renderDesktop:function(){var t=((new r).getStatus(this.props.data.status),(new r).getProgress(this.props.data.progress));return e.createElement("tr",null,e.createElement("td",null,this.props.data.text),e.createElement("td",null,t.text))},render:function(){return this.renderDesktop()}});return h}),define("components/course/form-modal-edit-course-enroll",["react","helper","pref","role","eventbus","models/course-enroll","models/course-lecture","collections/course-lecture","language/courseenroll","language/default","components/row-creator","components/select-status","components/select-employee","components/course/tab-enroll-lecture-item-list","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"ModalEditCourseEnrollComponent",getInitialState:function(){return{lecture_list:[]}},getObjectID:function(){var t=$(e.findDOMNode(this.refs.type)).dropdown("get value"),n=0;return this.refs["val_object_"+t]&&(n=$(e.findDOMNode(this.refs["val_object_"+t])).dropdown("get value")),n},loadLecture:function(e){var t=this;(new s).fetch({data:{company_id:n.get("cid"),lms_course_id:t.props.data.lms_course_id,status:(new o).STATUS_ENABLE,page:e},success:function(e,n){var a=$.extend([],t.state.lecture_list),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push({code:e.id,text:e.title,color:""})}),t.setState({lecture_list:a}),i>n.currentpage&&t.getCategoryList(parseInt(n.currentpage)+1)}},complete:function(){}})},save:function(){var a=this;$(".ui.form").addClass("loading"),new r({id:this.props.data.id}).save({company_id:n.get("cid"),creator_id:n.get("uid"),user_id:$(e.findDOMNode(a.refs.user)).dropdown("get value"),lms_course_id:a.props.data.lms_course_id,progress:$(e.findDOMNode(a.refs.progress)).dropdown("get value"),status:$(e.findDOMNode(a.refs.status)).dropdown("get value"),detail_progress:this.getDetaiProgress(),current_lecture_id:$(e.findDOMNode(a.refs.lecture)).dropdown("get value")},{success:function(e,n){i.trigger("courseenroll:updateList","update",n),t.showSuccess(c.t("update_success")),$(a.getDOMNode()).modal({context:$(a.getDOMNode()).parent()}).modal("hide")},error:function(e,n){t.notifyError(n,l,c.t("insert_error"))},complete:function(){$(".ui.form").removeClass("loading")}})},getDetaiProgress:function(){var e=this.props.data.detail_progress;return"object"!=typeof e&&(e=JSON.parse(e)),e},changeProgress:function(t){$(e.findDOMNode(this.refs.current_lecture)).hide(),t==(new r).PROGRESS_STUDYING&&$(e.findDOMNode(this.refs.current_lecture)).show()},componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){i.trigger("course:hidemodal")},autofocus:!1,context:$(this.getDOMNode())}).modal("show"),$(".ui.checkbox").checkbox(),this.loadLecture(1)},render:function(){var n=this,a=l.t("heading")+" \\ "+c.t("update"),i=(new r).getStatus(this.props.data.status),o=(new r).getProgress(this.props.data.progress),s=this.getDetaiProgress(),d="none";return this.props.data.progress==(new r).PROGRESS_STUDYING&&(d=""),e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("div",{className:"header"},a),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,l.t("user")),e.createElement(m,{ref:"user",defaultValue:[this.props.data.creator_id]})),e.createElement("div",{className:"field required"},e.createElement("label",null,l.t("progress")),e.createElement(u,{ref:"progress",value:o.text,onChange:this.changeProgress,data:(new r).getProgressList()})),e.createElement("div",{className:"field required",style:{display:d},ref:"current_lecture"},e.createElement("label",null,l.t("current_lecture")),e.createElement(u,{ref:"lecture",key:moment().valueOf(),data:this.state.lecture_list,value:this.props.data.current_lecture_id})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("status")),e.createElement(u,{ref:"status",value:i.text,data:(new r).getStatusList()})),e.createElement("table",{className:t.tableclass(),ref:"employeepointtable"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,l.t("lecture")),e.createElement("th",null,l.t("progress")))),e.createElement("tbody",null,s.map(function(t,a){var i={};return n.state.lecture_list.map(function(e,n){e.code==t.id&&(i=e,i.progress=t.status)}),e.createElement(p,{key:moment().unix()+"_"+t.id,data:i})}))))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic approve button"},c.t("close")),e.createElement("div",{className:"ui button teal",onClick:n.save},c.t("save")))))}});return f}),define("components/course/form-modal-edit-course-chapter",["react","helper","pref","role","eventbus","models/course-chapter","language/coursechapter","language/default","components/select-status"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ModalEditCourseChapterComponent",getInitialState:function(){return{rowdata:[],quizList:[],pass:!0,rownum:[]}},save:function(){var a=this;$(".ui.form").addClass("loading"),new r({id:this.props.data.id}).save({company_id:n.get("cid"),creator_id:n.get("uid"),lms_course_id:a.props.data.lms_course_id,name:$(e.findDOMNode(a.refs.name)).val(),display_order:$(e.findDOMNode(a.refs.display_order)).val(),status:$(e.findDOMNode(a.refs.status)).dropdown("get value")},{success:function(e,n){i.trigger("coursechapter:updateList","add",n),t.showSuccess(s.t("update_success")),$(a.getDOMNode()).modal({context:$(a.getDOMNode()).parent()}).modal("hide")},error:function(e,n){t.notifyError(n,o,s.t("insert_error"))},complete:function(){$(".ui.form").removeClass("loading")}})},componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){i.trigger("course:hidemodal")},autofocus:!1,context:$(this.getDOMNode())}).modal("show"),setTimeout(function(){i.trigger("coursechapter:openaccordion")},1e3),$(e.findDOMNode(this.refs.display_order)).autoNumeric({lZero:"deny",mDec:"0",vMin:"0"})},render:function(){var t=this,n=o.t("heading")+" \\ "+s.t("update");return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("div",{className:"header"},n),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,o.t("name")),e.createElement("input",{ref:"name",defaultValue:this.props.data.name})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("display_order")),e.createElement("input",{defaultValue:this.props.data.display_order,ref:"display_order"})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("status")),e.createElement(l,{ref:"status",data:(new r).getStatusList(),value:this.props.data.status})))),e.createElement("div",{className:"actions",ref:"action"},e.createElement("div",{className:"ui noborder basic approve button"},s.t("close")),e.createElement("div",{className:"ui button teal",onClick:t.save},s.t("save")))))}});return c}),define("language/coursequiztake",["baselanguage"],function(e){var t={vn:{heading:"Danh mục khóa học",heading_sidebar:"Bộ lọc tiêu chí",employee:"Nhân viên",name:"Tên danh mục khóa học",type:"Phân loại",displayorder:"Thứ tự",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",delete:"Xóa",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",employeepointtopic:"Tiêu Danh mục khóa học nhân viên",back:"Trở lại",close:"Đóng",coursecategory_info_title:"Thông tin Danh mục khóa học",coursecategory_info_content:"Thông tin chi tiết Danh mục khóa học",filter_status:"Trạng thái",filter_type:"Loại",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",sort_display_order:"Thứ tự hiển thị",sort_name:"Tên",sort_point:"Điểm",sort_date_created:"Ngày tạo",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",error_store_is_reqiure:"Vui lòng chọn cửa hàng!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_not_permissin_check:"Bạn không có quyền chấm điểm",error_name_is_require:"Vui lòng nhập tên!",error_point_is_require:"Vui lòng nhập điểm và điểm phải lớn hơn 0!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",list_answer:"Bài làm của học viên",title_modal_detail:"Chi tiết kết quả trắc nghiệm",manager_level_two:"Quản lý cấp 2",TYPE_BAD:"Xấu",TYPE_GOOD:"Tốt",zerodata_text:"Chưa có tiêu chí nào.",listquestiontakeanswer:"Danh sách câu trả lời.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới.",error_role_not_available:"Bạn không có quyền thực hiện thao tác này"},en:{heading:"Danh mục khóa học",heading_sidebar:"Bộ lọc tiêu chí",employee:"Nhân viên",name:"Tên danh mục khóa học",type:"Phân loại",displayorder:"Thứ tự",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm đánh giá",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",delete:"Xóa",insert:"Thêm mới",update:"Cập nhật",print:"In",search:"Tìm kiếm...",employeepointtopic:"Tiêu Danh mục khóa học nhân viên",back:"Trở lại",close:"Đóng",coursecategory_info_title:"Thông tin Danh mục khóa học",coursecategory_info_content:"Thông tin chi tiết Danh mục khóa học",filter_status:"Trạng thái",filter_type:"Loại",filter_keyword:"Từ khóa",filter_creator_id:"Người tạo",sort_display_order:"Thứ tự hiển thị",sort_name:"Tên",sort_point:"Điểm",sort_date_created:"Ngày tạo",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",error_store_is_reqiure:"Vui lòng chọn cửa hàng!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_not_permissin_check:"Bạn không có quyền chấm điểm",error_name_is_require:"Vui lòng nhập tên!",error_point_is_require:"Vui lòng nhập điểm và điểm phải lớn hơn 0!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",list_answer:"Bài làm của học viên",title_modal_detail:"Chi tiết kết quả trắc nghiệm",manager_level_two:"Quản lý cấp 2",TYPE_BAD:"Xấu",TYPE_GOOD:"Tốt",zerodata_text:"Chưa có tiêu chí nào.",listquestiontakeanswer:"Danh sách câu trả lời.",zerodata_subtext:"Thêm tiêu Danh mục khóa học cho nhân viên bằng cách nhấn nút bên dưới.",error_role_not_available:"Bạn không có quyền thực hiện thao tác này"}};return new e({lang:t})}),define("components/course/form-detail-take-summary",["react","helper","pref","role","eventbus","models/course-quiz-take-answer","models/course-quiz","language/coursequiztakeanswer","language/default","components/select-status","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"FormDetailTakeComponent",componentDidMount:function(){},render:function(){var t=this,n=0,a=0,i=0,l=0,c=0;this.props.take_answer_list.map(function(e,t){e.is_correct==(new r).CORRECT_NEW&&(n+=1),e.is_correct==(new r).CORRECT_PASS&&(a+=1,l+=e.mark),e.is_correct==(new r).CORRECT_FAIL&&(i+=1),c+=e.mark});var d={};return this.props.quiz_list.map(function(e,n){t.props.take_answer_list.lms_quiz_id==e.id&&(d=e)}),d.type==(new o).MARKTYPE_POINT?(result=l+"/"+total_point,unit=s.t("point"),str=s.t("you_have_reached")+result+unit):(result=a+"/"+this.props.take_answer_list.length,unit=s.t("answer"),str=s.t("you_have_question")+result+unit),e.createElement("div",{className:"ui four statistics"},e.createElement("div",{className:"statistic"},e.createElement("div",{className:"value",style:{color:"green"}},a),e.createElement("div",{className:"label",style:{color:"green"}},s.t("CORRECT_PASS"))),e.createElement("div",{className:"statistic"},e.createElement("div",{className:"value",style:{color:"red"}},i),e.createElement("div",{className:"label",style:{color:"red"}},s.t("CORRECT_FAIL"))),e.createElement("div",{className:"statistic"},e.createElement("div",{className:"value",style:{color:"#ccc"}},n),e.createElement("div",{className:"label",style:{color:"#ccc"}},s.t("CORRECT_NEW"))),e.createElement("div",{className:"statistic"},e.createElement("div",{className:"value"},result),e.createElement("div",{className:"label"},unit)))}});return u}),define("components/course/form-detail-take-answer-item",["react","helper","pref","role","eventbus","models/course-quiz-take-answer","models/course-quiz","models/course-quiz-question","language/coursequiztakeanswer","language/default","components/select-status","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"FormDetailTakeComponent",componentDidMount:function(){},render:function(){var t=this,n={},a={};this.props.quiz_list.map(function(e,a){t.props.take_answer.lms_quiz_id==e.id&&(n=e)}),this.props.question_list.map(function(e,n){t.props.take_answer.lms_quiz_question_id==e.id&&(a=e)});var i="",c=[],d=[];a.type==(new s).TYPE_TEXTBOX?(i="tc-filetext",n.mark_type==(new o).MARKTYPE_POINT?c.push(a.point_if_fill_input):c.push(a.correct_if_fill_input),d.push(this.props.take_answer.free_text)):(a.options&&a.options.length&&a.options.map(function(e,t){e.pass&&c.push(e.name_answer)}),this.props.take_answer.selected_option_value.length&&(d=this.props.take_answer.selected_option_value)),a.type==(new s).TYPE_SINGLE_CHOICE&&(i="tc-checkboxcircle"),a.type==(new s).TYPE_MULTIPLE&&(i="tc-checkboxsquare");var u="red";return this.props.take_answer.is_correct==(new r).CORRECT_NEW&&(u=""),this.props.take_answer.is_correct==(new r).CORRECT_PASS&&(u="green"),e.createElement("div",{className:"item"},e.createElement("i",{className:"icon "+i,style:{color:u}}),e.createElement("div",{className:"content"},e.createElement("span",{className:"header",style:{fontSize:"15px"}},this.props.index+1,". ",a.content),e.createElement("div",{className:"description"},e.createElement("b",null,l.t("system_answer")," "),": ",c.map(function(t,n){return e.createElement("div",{key:n}," - ",t)}),e.createElement("b",null,l.t("user_answer")),": ",d.map(function(t,n){return e.createElement("div",{key:n}," - ",t)}))))}});return m}),define("components/course/form-detail-take",["react","helper","pref","role","eventbus","models/course-chapter","language/coursequiztake","language/default","components/select-status","components/course/form-detail-take-summary","components/course/form-detail-take-answer-item","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"FormDetailTakeComponent",getInitialState:function(){return{current_answer:[],current_question:[]}},getAnswer:function(){var e=this,t=[];this.props.answer_list.map(function(n,a){n.lms_quiz_take_id==e.props.take.id&&t.push(n)}),this.setState({current_answer:t})},componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({onHidden:function(){i.trigger("course:hidemodal")},autofocus:!1,context:$(this.getDOMNode())}).modal("show"),this.getAnswer()},render:function(){var t=this;return e.createElement("div",null,e.createElement("div",{className:"ui modal",ref:"modal"},e.createElement("div",{className:"header"},o.t("title_modal_detail")),e.createElement("div",{className:"content"},e.createElement("div",{className:"fields"},e.createElement(c,{take_answer_list:this.state.current_answer,question_list:this.props.question_list,take:this.props.take,quiz_list:this.props.quiz_list}),e.createElement("h4",{className:"ui horizontal divider header"},e.createElement("i",{className:"tag icon"}),o.t("list_answer")),e.createElement("div",{className:"ui relaxed divided list"},this.state.current_answer.map(function(n,a){return e.createElement(d,{key:n.id,index:a,take_answer:n,question_list:t.props.question_list,take:t.props.take,quiz_list:t.props.quiz_list})})))),e.createElement("div",{
className:"actions"},e.createElement("div",{className:"ui approve button"},s.t("close")))))}});return m}),define("components/course/edit",["react","backbone","helper","eventbus","role","querystring","companysetting","pref","language/course","language/default","models/course","models/course-category","models/course-teacher-rel","models/course-lecture-content","collections/course-category","collections/course-teacher-rel","collections/course-lecture-content","components/course/tab-info","components/course/tab-teacher","components/course/tab-chapter","components/course/tab-review","components/course/tab-lecture","components/course/tab-quiz","components/course/tab-limit","components/course/tab-enroll","components/course/tab-take","components/course/form-modal-add-course-lecture","components/course/form-modal-add-course-quiz","components/course/form-modal-add-course-limit","components/course/form-modal-add-course-enroll","components/course/form-modal-add-course-chapter","components/course/form-modal-add-course-quiz-question","components/course/form-modal-edit-course-lecture","components/course/form-modal-edit-course-lecture-content","components/course/form-modal-edit-course-quiz","components/course/form-modal-edit-course-quiz-question","components/course/form-modal-edit-course-limit","components/course/form-modal-edit-course-enroll","components/course/form-modal-edit-course-chapter","components/course/form-detail-take","components/heading","components/select-status","components/courseteacherpicker","components/select","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M,S,O,I,A,P,L,R,U,q,j,H,F,B,Y,V){var W=e.createClass({displayName:"CourseEditComponent",getInitialState:function(){return{categoryList:[],lecture_content_list:[]}},_save:function(){this.refs.tab_info._save()},updateListContent:function(e,t){var n=$.extend([],this.state.lecture_content_list);switch(e){case"update":n.map(function(e,a){t.id==e.id&&(n[a]=t)});break;case"add":n.unshift(t);break;case"delete":n.map(function(e,a){e.id==t.id&&delete n[a]})}this.setState({lecture_content_list:n})},loadContent:function(){var e=this;(new g).fetch({data:{company_id:s.get("cid"),lms_course_id:e.props.data.id,status:(new p).STATUS_ENABLE},success:function(t,n){var a=n.items;a.length&&e.setState({lecture_content_list:a})},complete:function(){},error:function(){}})},unmountModal:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.loadmodal))},mountModalAdd:function(t,n){var a=this;switch(this.unmountModal(),t){case"lecture":e.render(e.createElement(T,{course:this.props.data,chapter:n}),e.findDOMNode(a.refs.loadmodal));break;case"take":e.render(e.createElement(j,{course:this.props.data,answer_list:n.answer_list,question_list:n.question_list,take:n.data,quiz_list:n.quiz_list}),e.findDOMNode(a.refs.loadmodal));break;case"quiz":e.render(e.createElement(x,{course:this.props.data}),e.findDOMNode(a.refs.loadmodal));break;case"quizquestion":e.render(e.createElement(O,{course:this.props.data,quizData:n}),e.findDOMNode(a.refs.loadmodal));break;case"chapter":e.render(e.createElement(S,{course:this.props.data}),e.findDOMNode(a.refs.loadmodal));break;case"limit":var i=this.refs.tab_limt.getListLimit();e.render(e.createElement(C,{course:this.props.data,dataList:i}),e.findDOMNode(a.refs.loadmodal));break;case"enroll":e.render(e.createElement(M,{course:this.props.data}),e.findDOMNode(a.refs.loadmodal))}},getLectureContent:function(e){var t={};return e>0&&this.state.lecture_content_list.length&&this.state.lecture_content_list.map(function(n,a){parseInt(n.lms_course_lecture_id)==parseInt(e)&&(t=n)}),t},mountModalUpdate:function(t,n){var a=this;switch(this.unmountModal(),t){case"lecturecontent":var i=a.getLectureContent(n.id);e.render(e.createElement(A,{lecture:n,data:n,lecture_content:i}),e.findDOMNode(a.refs.loadmodal));break;case"lecture":e.render(e.createElement(I,{data:n}),e.findDOMNode(a.refs.loadmodal));break;case"quizquestion":var r=n.data,o=n.quizData;e.render(e.createElement(L,{course:this.props.data,data:r,quizData:o}),e.findDOMNode(a.refs.loadmodal));break;case"quiz":e.render(e.createElement(P,{data:n}),e.findDOMNode(a.refs.loadmodal));break;case"chapter":e.render(e.createElement(q,{data:n.chapter,allowdelete:n.allowdelete}),e.findDOMNode(a.refs.loadmodal));break;case"limit":e.render(e.createElement(R,{data:n}),e.findDOMNode(a.refs.loadmodal));break;case"enroll":e.render(e.createElement(U,{data:n}),e.findDOMNode(a.refs.loadmodal))}},componentWillMount:function(){i.hasById(i.ELEARNING_MANAGE)||(n.showError(c.t("error_not_permission")),t.history.navigate("#",{trigger:!0}))},componentWillUnmount:function(){this.unmountModal(),a.off("course:mountModalAdd",this.mountModalAdd),a.off("course:mountModalUpdate",this.mountModalUpdate),a.off("course:hidemodal",this.unmountModal),a.off("courselecturecontent:updateList",this.updateListContent)},componentDidUpdate:function(){},componentDidMount:function(){var t=this;a.on("course:mountModalAdd",this.mountModalAdd),a.on("course:mountModalUpdate",this.mountModalUpdate),a.on("course:hidemodal",this.unmountModal),a.on("courselecturecontent:updateList",this.updateListContent),$(".ui.form",this.getDOMNode()).form({inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t._save()}}),$(".menu .item").tab(),$(e.findDOMNode(this.refs.tabs)).find(".item").click(function(){"info"==$(this).attr("data-tab")?$(e.findDOMNode(t.refs.btn)).show():$(e.findDOMNode(t.refs.btn)).hide()}),this.loadContent()},render:function(){return e.createElement("div",{className:"ui segments"},e.createElement(H,{link:"#course",text:l.t("heading"),subtext:c.t("update")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,l.t("course_info_title"))),e.createElement("p",null,l.t("course_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"ui pointing secondary menu",ref:"tabs"},e.createElement("a",{className:"item","data-tab":"info"},l.t("tab_info")),e.createElement("a",{className:"item","data-tab":"limit"},l.t("tab_limit")),e.createElement("a",{className:" item","data-tab":"chapter"},l.t("tab_chapter")),e.createElement("a",{className:" item","data-tab":"quiz"},l.t("tab_quiz")),e.createElement("a",{className:"active item","data-tab":"take"},l.t("tab_take")),e.createElement("a",{className:"item","data-tab":"teacher"},l.t("tab_teacher")),e.createElement("a",{className:"item","data-tab":"review"},l.t("tab_review")),e.createElement("a",{className:"item","data-tab":"enroll"},l.t("tab_enroll"))),e.createElement("div",{className:"ui  tab segment","data-tab":"limit"},e.createElement(w,{data:this.props.data,ref:"tab_limt"})),e.createElement("div",{className:"ui tab segment","data-tab":"info"},e.createElement(_,{data:this.props.data,ref:"tab_info"})),e.createElement("div",{className:"ui   tab segment","data-tab":"chapter"},e.createElement(y,{data:this.props.data})),e.createElement("div",{className:"ui tab segment","data-tab":"teacher"},e.createElement(v,{data:this.props.data})),e.createElement("div",{className:"ui  tab segment","data-tab":"review"},e.createElement(E,{data:this.props.data})),e.createElement("div",{className:"ui tab segment","data-tab":"quiz"},e.createElement(N,{data:this.props.data})),e.createElement("div",{className:"ui tab segment","data-tab":"enroll"},e.createElement(k,{data:this.props.data})),e.createElement("div",{className:"ui active tab segment","data-tab":"take"},e.createElement(D,{data:this.props.data})))),e.createElement(V,null,e.createElement("button",{className:"ui teal button",type:"submit"},c.t("save")))),e.createElement("div",{ref:"loadmodal",id:"loadmodal"})))}});return W}),define("language/employeepoint",["baselanguage"],function(e){var t={vn:{heading:"Lịch sử chấm điểm nhân viên",download_excel:"Tải file excel",heading_export:"Xuất Excel",time:"Thời gian",heading_employee:"Tổng hợp theo nhân viên",type_topic:"Loại tiêu chí",heading_sidebar:"Bộ lọc chấm điểm",view_more:"Xem thêm",employee:"Nhân viên",name:"Tên",type:"Loại",office:"Trụ sở",total:"Tổng cộng",totaltopic:"Số tiêu chí được chấm",totaltopiccheked:"Tổng tiêu chí",topic:"Tiêu chí",displayorder:"Thứ tự",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",delete:"Xóa",insert:"Thêm mới",update:"Cập nhật",detail:"Chi tiết",print:"In",search:"Tìm kiếm...",employeepoint:"Lịch sử chấm điểm nhân viên",view_employee:"Tổng hợp theo nhân viên",view_history:"Xem theo lịch sử",back:"Trở lại",close:"Đóng",employeepoint_info_title:"Chi tiết chấm điểm nhân viên",employeepoint_info_content:"Thông tin chi tiết chấm điểm nhân viên",file:"File đính kèm (giới hạn 3 file)",file_label:"File đính kèm",good:"Tốt",bad:"Xấu",point_bad:"Điểm xấu",point_good:"Điểm tốt",minus:"Trừ",plus:"Cộng",filter_employee_id:"Nhân viên",sort_employee_id:"Nhân viên",sort_user_id:"Nhân viên",sort_point:"Điểm",sort_date_created:"Ngày tạo",filter_creator_id:"Người tạo",sort_creator_id:"Người tạo",filter_store_id:"Cửa hàng",sort_store_id:"Cửa hàng",filter_topic_id:"Tiêu chí",sort_topic_id:"Tiêu chí",filter_office_id:"Trụ sở",filter_status:"Trạng thái",filter_keyword:"Từ khóa",sort_status:"Trạng thái",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",error_store_is_reqiure:"Vui lòng chọn cửa hàng!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_not_permissin_check:"Bạn không có quyền chấm điểm",error_title_is_require:"Vui lòng nhập tên!",error_topic_id_is_require:"Vui lòng chọn tiêu chí!",error_point_is_require:"Vui lòng nhập điểm và điểm phải lớn hơn 0!",error_employee_is_require:"Vui lòng chọn tên nhân viên !",error_employee_is_empty:"Vui lòng cài đặt nhân viên cho cửa hàng trước khi chấm điểm !",error_employee_id_not_valid:"Nhân viên không tồn tại!",error_store_id_not_valid:"Cửa hàng không tồn tại!",error_employee_is_not_member_store:"Nhân viên không thuộc Cửa hàng!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",addall:"Tất cả NV ",removeall:"Hủy chọn tất cả",zerodata_text:"Chưa có thông tin đánh giá nào.",zerodata_subtext:"Bạn bắt đầu đánh giá nhân viên bằng cách nhấn nút bên dưới.",settingtopic:"Cài đặt tiêu chí",add:"Thêm đánh giá"},en:{heading:"Lịch sử chấm điểm nhân viên",download_excel:"Tải file excel",heading_export:"Xuất Excel",time:"Thời gian",heading_employee:"Tổng hợp theo nhân viên",type_topic:"Loại tiêu chí",heading_sidebar:"Bộ lọc chấm điểm",view_more:"Xem thêm",employee:"Nhân viên",name:"Tên",type:"Loại",office:"Trụ sở",total:"Tổng cộng",totaltopic:"Số tiêu chí được chấm",totaltopiccheked:"Tổng tiêu chí",topic:"Tiêu chí",displayorder:"Thứ tự",datecreated:"Ngày tạo",store:"Cửa hàng",creator:"Người tạo",point:"Điểm",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",note:"Ghi chú",delete:"Xóa",insert:"Thêm mới",update:"Cập nhật",detail:"Chi tiết",print:"In",search:"Tìm kiếm...",employeepoint:"Lịch sử chấm điểm nhân viên",view_employee:"Tổng hợp theo nhân viên",view_history:"Xem theo lịch sử",back:"Trở lại",close:"Đóng",employeepoint_info_title:"Chi tiết chấm điểm nhân viên",employeepoint_info_content:"Thông tin chi tiết chấm điểm nhân viên",file:"File đính kèm (giới hạn 3 file)",file_label:"File đính kèm",good:"Tốt",bad:"Xấu",point_bad:"Điểm xấu",point_good:"Điểm tốt",minus:"Trừ",plus:"Cộng",filter_employee_id:"Nhân viên",sort_employee_id:"Nhân viên",sort_user_id:"Nhân viên",sort_point:"Điểm",sort_date_created:"Ngày tạo",filter_creator_id:"Người tạo",sort_creator_id:"Người tạo",filter_store_id:"Cửa hàng",sort_store_id:"Cửa hàng",filter_topic_id:"Tiêu chí",sort_topic_id:"Tiêu chí",filter_office_id:"Trụ sở",filter_status:"Trạng thái",filter_keyword:"Từ khóa",sort_status:"Trạng thái",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",error_store_is_reqiure:"Vui lòng chọn cửa hàng!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_not_permissin_check:"Bạn không có quyền chấm điểm",error_title_is_require:"Vui lòng nhập tên!",error_topic_id_is_require:"Vui lòng chọn tiêu chí!",error_point_is_require:"Vui lòng nhập điểm và điểm phải lớn hơn 0!",error_employee_is_require:"Vui lòng chọn tên nhân viên !",error_employee_is_empty:"Vui lòng cài đặt nhân viên cho cửa hàng trước khi chấm điểm !",error_employee_id_not_valid:"Nhân viên không tồn tại!",error_store_id_not_valid:"Cửa hàng không tồn tại!",error_employee_is_not_member_store:"Nhân viên không thuộc Cửa hàng!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",addall:"Tất cả NV ",removeall:"Hủy chọn tất cả",zerodata_text:"Chưa có thông tin đánh giá nào.",zerodata_subtext:"Bạn bắt đầu đánh giá nhân viên bằng cách nhấn nút bên dưới.",settingtopic:"Cài đặt tiêu chí",add:"Thêm đánh giá"}};return new e({lang:t})}),define("components/table/deletebutton",["react","helper","language/default","components/confirm"],function(e,t,n,a){var i=e.createClass({displayName:"TableDeleteButtonComponent",getDefaultProps:function(){return{text:n.t("button_delete"),tooltip:n.t("button_delete_tooltip"),className:"",onRemove:function(e){}}},getInitialState:function(){return{hover:!1}},onMouseOver:function(){this.setState({hover:!0})},onMouseOut:function(){this.setState({hover:!1})},componentDidMount:function(){var t=this;$(e.findDOMNode(this)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(a,null)),onShow:function(e){$(this).find(".confirm").fastClick(function(n){n.preventDefault(),$(e).popup("hide"),t.props.onRemove()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")})}})},render:function(){var t=this.state.hover?"red":"grey";return e.createElement("span",null,e.createElement("a",{style:{color:t,padding:"0 5px 0 5px",cursor:"pointer"},onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,title:this.props.tooltip,className:""+this.props.className},e.createElement("small",null,this.props.text),this.props.children))}});return i}),define("components/course/item",["react","helper","pref","role","eventbus","models/course","collections/user","language/employeepoint","language/default","components/datetime","components/table/updatebutton","components/table/deletebutton","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"CourseItemComponent",_remove:function(){i.trigger("course:remove",this.props.data.id)},updateData:function(t){var n=t.action,a=t.data;"category"==n&&a.id==this.props.data.lms_course_category_id&&$(e.findDOMNode(this.refs.category_name)).text(a.name)},showEditActionSheet:function(e){e.preventDefault();var n={buttons:[{text:l.t("update"),href:"#employeepoint/edit/"+this.props.data.id}]};t.showActionSheet(n)},componentWillUnmount:function(){i.off("courseitem:updateData",this.updateData)},componentDidUpdate:function(e,t){},componentDidMount:function(){var n=this;i.on("courseitem:updateData",this.updateData),a.hasById(264)||$(e.findDOMNode(this.refs.btnedit)).html("");var r=(new o).fetchFromCache({id:this.props.data.creator_id});r=r.items[0],r&&(t.isSmallScreen()?$(e.findDOMNode(n.refs.user)).empty().append(r.fullname).append(e.renderToString(e.createElement("img",{className:"ui avatar image pull-left",src:t.getAvatarPath(r.avatar)}))):$(e.findDOMNode(n.refs.user_avatar)).empty().append(r.fullname))},renderMobile:function(){},renderDesktop:function(){var t=(new r).getSkill(this.props.data.skill_level),n=(new r).getStatus(this.props.data.status),a=this;return e.createElement("tr",null,e.createElement("td",null,a.props.data.id),e.createElement("td",null,e.createElement("a",{href:"#course/edit/"+this.props.data.id},this.props.data.name)),e.createElement("td",{ref:"category_name"}),e.createElement("td",null,t.text),e.createElement("td",{style:{textAlign:"center !important"}},this.props.data.duration_inminute),e.createElement("td",null,moment.unix(a.props.data.date_started).format("HH:mm, DD/MM/YYYY")),e.createElement("td",{className:a.props.data.date_ended<moment().unix()?"error":""},moment.unix(a.props.data.date_ended).format("HH:mm, DD/MM/YYYY")),e.createElement("td",null,e.createElement("span",{className:"ui small simple label "+n.color},n.text)),e.createElement("td",null,e.createElement("span",{ref:"user_avatar"})),e.createElement("td",null,e.createElement(c,{ts:this.props.data.date_created})),e.createElement("td",{className:"right aligned cell_action",ref:"btnedit"},e.createElement(d,{link:"#course/edit/"+this.props.data.id}),e.createElement(u,{onRemove:this._remove})))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return p}),define("components/coursecategory/add",["react","backbone","helper","pref","language/coursecategory","language/default","models/course-category","components/heading","components/select-status","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"CourseCategoryAddComponent",getInitialState:function(){return{modelitems:[],models:[],store_selected:0,employee_select:{}}},_save:function(){var s=this;$(".ui.form").addClass("loading"),(new o).save({company_id:a.get("cid"),creator_id:a.get("uid"),name:$(e.findDOMNode(s.refs.name)).val(),display_order:$(e.findDOMNode(s.refs.display_order)).val(),status:$(e.findDOMNode(s.refs.status)).dropdown("get value")},{success:function(e,a){n.showSuccess(r.t("insert_success")),t.history.navigate("coursecategory",{trigger:!0})},error:function(e,t){n.notifyError(t,i,r.t("insert_fail"))},complete:function(){$(".ui.form").removeClass("loading")}})},componentDidMount:function(){var e=this;$(".ui.form",this.getDOMNode()).form({inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}})},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,i.t("topic")),e.createElement("th",null,i.t("employee")),e.createElement("th",{width:"150"}),e.createElement("th",null,i.t("note")),e.createElement("th",null,i.t("file")),e.createElement("th",null,i.t("point")))},render:function(){var t={};return 0==this.state.store_selected&&(t={display:"none"}),e.createElement("div",{className:"ui segments"},e.createElement(s,{link:"#coursecategory",text:i.t("heading"),subtext:r.t("insert")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,i.t("coursecategory_info_title"))),e.createElement("p",null,i.t("coursecategory_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide  field"},e.createElement("label",null,i.t("name")),e.createElement("input",{type:"text",ref:"name"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide  field"},e.createElement("label",null,i.t("displayorder")),e.createElement("input",{type:"text",ref:"display_order"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide  field"},e.createElement("label",null,i.t("status")),e.createElement(l,{data:(new o).getStatusList(),value:(new o).STATUS_ENABLE,ref:"status"}))))),e.createElement(c,null,e.createElement("button",{className:"ui teal button",type:"submit"},r.t("add"))))))}});return d}),define("components/coursecategory/edit",["react","backbone","helper","pref","language/coursecategory","language/default","models/course-category","components/heading","components/select-status","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"CourseCategoryAddComponent",getInitialState:function(){return{modelitems:[],models:[],store_selected:0,employee_select:{}}},_save:function(){var s=this;$(".ui.form").addClass("loading"),new o({id:this.props.data.id}).save({company_id:a.get("cid"),creator_id:a.get("uid"),name:$(e.findDOMNode(s.refs.name)).val(),display_order:$(e.findDOMNode(s.refs.display_order)).val(),status:$(e.findDOMNode(s.refs.status)).dropdown("get value")},{success:function(e,a){n.showSuccess(r.t("update_success")),t.history.navigate("coursecategory",{trigger:!0})},error:function(e,t){n.notifyError(t,i,r.t("update_fail"))},complete:function(){$(".ui.form").removeClass("loading")}})},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},_storeOnchange:function(){var t=$(".ui.form",this.getDOMNode());this.setState({store_selected:$(e.findDOMNode(this.refs.store)).dropdown("get value")});var n=this.state.store_selected;this._setEmployee({}),n>0?$(".tableSelect",t).attr("style",""):$(".tableSelect",t).attr("style","display:none")},_setEmployee:function(e){var t={};jQuery.isEmptyObject(e)?this.state.models.map(function(e,n){var a=e.attributes;t[a.id]=""}):e.models.map(function(e,n){var a=e.attributes;t[a.id]=""}),this.setState({employee_select:t})},pickeronadd:function(e,t,n){var a=n.data("topicid"),i=this.state.employee_select;if(i.hasOwnProperty(a)&&""!=e){var r=i[a],o=[];""!=r&&(o=r.split(",")),o.push(e),i[a]=o.join(",")}},pickeronremove:function(e,t,n){var a=n.data("topicid"),i=this.state.employee_select;if(i.hasOwnProperty(a)&&""!=e){var r=i[a],o=[];if(""!=r){o=r.split(",");var s=o.indexOf(e.toString());s>=0&&(o.splice(s,1),i[a]=o.join(","))}}},pickerremoveall:function(e){var t=this.state.employee_select;t[e]=""},_showError:function(e){this.state.store_selected>0&&(n.showError(e),this.setState({store_selected:0}))},componentDidMount:function(){var e=this;$(".ui.form",this.getDOMNode()).form({inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}})},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,i.t("topic")),e.createElement("th",null,i.t("employee")),e.createElement("th",{width:"150"}),e.createElement("th",null,i.t("note")),e.createElement("th",null,i.t("file")),e.createElement("th",null,i.t("point")))},render:function(){var t={};return 0==this.state.store_selected&&(t={display:"none"}),e.createElement("div",{className:"ui segments"},e.createElement(s,{link:"#coursecategory",text:i.t("heading"),subtext:r.t("update")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,i.t("coursecategory_info_title"))),e.createElement("p",null,i.t("coursecategory_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide  field"},e.createElement("label",null,i.t("name")),e.createElement("input",{type:"text",ref:"name",defaultValue:this.props.data.name}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide  field"},e.createElement("label",null,i.t("displayorder")),e.createElement("input",{type:"text",ref:"display_order",defaultValue:this.props.data.display_order}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide  field"},e.createElement("label",null,i.t("status")),e.createElement(l,{data:(new o).getStatusList(),ref:"status",value:this.props.data.status}))))),e.createElement(c,null,e.createElement("button",{className:"ui teal button",type:"submit"},r.t("save"))))))}});return d}),define("components/coursecategory/item",["react","helper","pref","role","eventbus","models/course-category","collections/user","language/coursecategory","language/default","components/confirm","components/table/updatebutton","components/table/deletebutton","components/datetime"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"CourseCategoryItemComponent",_filterStatus:function(e){e.preventDefault(),this.props.filter("status",this.props.data.status)},_remove:function(){i.trigger("coursecategory:remove",this.props.data.id)},_filterTopic:function(e){e.preventDefault(),this.props.filter("topic_id",this.props.data.topic_id)},getInitialState:function(){return{topictype:0,topicname:""}},showEditActionSheet:function(e){e.preventDefault();var n={buttons:[{text:l.t("update"),href:"#coursecategory/edit/"+this.props.data.id}]};t.showActionSheet(n)},componentWillUnmount:function(){},componentDidUpdate:function(t,n){a.hasById(264)||$(e.findDOMNode(this.refs.btnedit)).html("")},componentDidMount:function(){var n=this,a=(new o).fetchFromCache({id:this.props.data.creator_id});a=a.items[0],a&&(t.isSmallScreen()?$(e.findDOMNode(n.refs.user)).empty().append(a.fullname).append(e.renderToString(e.createElement("img",{className:"ui avatar image pull-left",src:t.getAvatarPath(a.avatar)}))):($(e.findDOMNode(n.refs.user)).empty().append(a.fullname),$(e.findDOMNode(n.refs.user_avatar)).empty().append(a.fullname)))},renderMobile:function(){return(new r).getStatus(this.props.data.status),e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("h3",{ref:"user"}),e.createElement("div",{className:"mitemdotright"},e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading"},e.createElement("div",null,this.props.data.name)))))},renderDesktop:function(){var t=(new r).getStatus(this.props.data.status);return e.createElement("tr",null,e.createElement("td",null,this.props.data.id),e.createElement("td",null,e.createElement("a",{href:"#coursecategory/edit/"+this.props.data.id},this.props.data.name)),e.createElement("td",null,this.props.data.display_order),e.createElement("td",null,e.createElement("span",{className:"ui small simple label "+t.color},t.text)),e.createElement("td",null,e.createElement("span",{ref:"user_avatar"})),e.createElement("td",null,e.createElement(m,{ts:this.props.data.date_created})),e.createElement("td",{className:"right aligned cell_action",ref:"btnedit"},e.createElement(d,{link:"#coursecategory/edit/"+this.props.data.id}),e.createElement(u,{onRemove:this._remove,ref:"remove"})))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return p}),define("components/courseteacher/add",["react","backbone","helper","pref","eventbus","language/courseteacher","language/default","models/course-teacher","components/select-file/filelist","components/select-file/filestrip","components/heading","components/select-status","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"CourseTeacherAddComponent",getInitialState:function(){return{data:{}}},_save:function(){var i=this;$(".ui.form").addClass("loading"),(new s).save({company_id:a.get("cid"),creator_id:a.get("uid"),name:$(e.findDOMNode(i.refs.name)).val(),avatar_file_id:i.refs.newfile.getFileList(),job_title:$(e.findDOMNode(i.refs.job_title)).val(),company:$(e.findDOMNode(i.refs.company)).val(),link_facebook:$(e.findDOMNode(i.refs.link_facebook)).val(),link_twitter:$(e.findDOMNode(i.refs.link_twitter)).val(),link_linkedin:$(e.findDOMNode(i.refs.link_linkedin)).val(),link_pinterest:$(e.findDOMNode(i.refs.link_pinterest)).val(),link_youtube:$(e.findDOMNode(i.refs.link_youtube)).val(),description:$(e.findDOMNode(i.refs.description)).val(),status:(new s).STATUS_ENABLE},{success:function(e,a){n.showSuccess(o.t("insert_success")),t.history.navigate("courseteacher",{trigger:!0})},error:function(e,t){n.notifyError(t,r,o.t("insert_fail"))},complete:function(){$(".ui.form").removeClass("loading")}})},componentDidMount:function(){var e=this;$(".ui.form",this.getDOMNode()).form({inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}})},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,r.t("topic")),e.createElement("th",null,r.t("employee")),e.createElement("th",{width:"150"}),e.createElement("th",null,r.t("note")),e.createElement("th",null,r.t("file")),e.createElement("th",null,r.t("point")))},render:function(){var t={};return 0==this.state.store_selected&&(t={display:"none"}),e.createElement("div",{className:"ui segments"},e.createElement(d,{link:"#courseteacher",text:r.t("heading"),subtext:o.t("insert")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,r.t("courseteacher_info_title"))),e.createElement("p",null,r.t("courseteacher_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,r.t("name")),e.createElement("input",{type:"text",ref:"name"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,r.t("job_title")),e.createElement("input",{type:"text",ref:"job_title"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,r.t("company")),e.createElement("input",{type:"text",ref:"company"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide field"},e.createElement("label",null,r.t("link_facebook")),e.createElement("input",{type:"text",ref:"link_facebook"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:" eight wide  field"},e.createElement("label",null,r.t("link_twitter")),e.createElement("input",{type:"text",ref:"link_twitter"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide  field"},e.createElement("label",null,r.t("link_linkedin")),e.createElement("input",{type:"text",ref:"link_linkedin"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide  field"},e.createElement("label",null,r.t("link_pinterest")),e.createElement("input",{type:"text",ref:"link_pinterest"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide  field"},e.createElement("label",null,r.t("link_youtube")),e.createElement("input",{type:"text",ref:"link_youtube"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide  field"},e.createElement("label",null,r.t("description")),e.createElement("textarea",{ref:"description"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide twelve"},e.createElement("label",null,r.t("avatar")),e.createElement(l,{limit:1,labelText:"",ref:"newfile"}),e.createElement(c,{classname:"small",name:"filelist",ref:"oldfile"}))))),e.createElement(m,null,e.createElement("button",{className:"ui teal button",type:"submit"},o.t("add"))))))}});return p}),define("components/courseteacher/edit",["react","backbone","helper","pref","eventbus","language/courseteacher","language/default","models/course-teacher","components/select-file/filelist","components/select-file/filestrip","components/heading","components/select-status","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){
var p=e.createClass({displayName:"CourseTeacherEditComponent",getInitialState:function(){return{data:{}}},_save:function(){var i=this;$(".ui.form").addClass("loading"),new s({id:this.props.data.id}).save({company_id:a.get("cid"),creator_id:a.get("uid"),name:$(e.findDOMNode(i.refs.name)).val(),avatar_file_id:parseInt(i.refs.newfile.getFileList())?i.refs.newfile.getFileList():i.refs.oldfile.getFileList(),job_title:$(e.findDOMNode(i.refs.job_title)).val(),company:$(e.findDOMNode(i.refs.company)).val(),link_facebook:$(e.findDOMNode(i.refs.link_facebook)).val(),link_twitter:$(e.findDOMNode(i.refs.link_twitter)).val(),link_linkedin:$(e.findDOMNode(i.refs.link_linkedin)).val(),link_pinterest:$(e.findDOMNode(i.refs.link_pinterest)).val(),link_youtube:$(e.findDOMNode(i.refs.link_youtube)).val(),description:$(e.findDOMNode(i.refs.description)).val(),status:$(e.findDOMNode(i.refs.status)).dropdown("get value")},{success:function(e,a){n.showSuccess(o.t("update_success")),t.history.navigate("courseteacher",{trigger:!0})},error:function(e,t){n.notifyError(t,r,o.t("insert_fail"))},complete:function(){$(".ui.form").removeClass("loading")}})},componentDidMount:function(){var e=this;$(".ui.form",this.getDOMNode()).form({inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}})},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,r.t("topic")),e.createElement("th",null,r.t("employee")),e.createElement("th",{width:"150"}),e.createElement("th",null,r.t("note")),e.createElement("th",null,r.t("file")),e.createElement("th",null,r.t("point")))},render:function(){var t={};return 0==this.state.store_selected&&(t={display:"none"}),e.createElement("div",{className:"ui segments"},e.createElement(d,{link:"#courseteacher",text:r.t("heading"),subtext:o.t("update")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,r.t("courseteacher_info_title"))),e.createElement("p",null,r.t("courseteacher_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide  field"},e.createElement("label",null,r.t("name")),e.createElement("input",{type:"text",ref:"name",defaultValue:this.props.data.name}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide  field"},e.createElement("label",null,r.t("job_title")),e.createElement("input",{type:"text",ref:"job_title",defaultValue:this.props.data.job_title}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide  field"},e.createElement("label",null,r.t("company")),e.createElement("input",{type:"text",ref:"company",defaultValue:this.props.data.company}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:" eight wide  field"},e.createElement("label",null,r.t("link_facebook")),e.createElement("input",{type:"text",ref:"link_facebook",defaultValue:this.props.data.link_facebook}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:" eight wide  field"},e.createElement("label",null,r.t("link_twitter")),e.createElement("input",{type:"text",ref:"link_twitter",defaultValue:this.props.data.link_twitter}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide  field"},e.createElement("label",null,r.t("link_linkedin")),e.createElement("input",{type:"text",ref:"link_linkedin",defaultValue:this.props.data.link_linkedin}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide  field"},e.createElement("label",null,r.t("link_pinterest")),e.createElement("input",{type:"text",ref:"link_pinterest",defaultValue:this.props.data.link_pinterest}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide  field"},e.createElement("label",null,r.t("link_youtube")),e.createElement("input",{type:"text",ref:"link_youtube",defaultValue:this.props.data.link_youtube}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide  field"},e.createElement("label",null,r.t("description")),e.createElement("textarea",{ref:"description",defaultValue:this.props.data.description}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide  field"},e.createElement("label",null,r.t("status")),e.createElement(u,{value:this.props.data.status,ref:"status",data:(new s).getStatusList()}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide twelve"},e.createElement("label",null,r.t("avatar")),e.createElement(l,{limit:1,labelText:"",ref:"newfile"}),e.createElement(c,{classname:"small",files:this.props.data.file_detail,name:"filelist",ref:"oldfile"}))))),e.createElement(m,null,e.createElement("button",{className:"ui teal button",type:"submit"},o.t("save"))))))}});return p}),define("components/courseteacher/item",["react","helper","pref","role","eventbus","models/course-teacher","collections/user","language/courseteacher","language/default","components/datetime","components/confirm","components/table/updatebutton","components/table/deletebutton","components/row-creator"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"CourseTeacherItemComponent",_remove:function(){i.trigger("courseteacher:remove",this.props.data.id)},getInitialState:function(){return{topictype:0,topicname:""}},showEditActionSheet:function(e){e.preventDefault();var n={buttons:[{text:l.t("update"),href:"#courseteacher/edit/"+this.props.data.id}]};t.showActionSheet(n)},componentWillUnmount:function(){},componentDidMount:function(){var n=this;this.props.data.name&&(t.isSmallScreen()?$(e.findDOMNode(n.refs.user)).empty().append(this.props.data.name).append(e.renderToString(e.createElement("img",{className:"ui avatar image pull-left",src:t.getAvatarPath(this.props.data.avatar)}))):$(e.findDOMNode(n.refs.user_avatar)).empty().append(e.renderToString(e.createElement("img",{className:"ui avatar image",style:{width:32,height:32},src:t.getAvatarPath(this.props.data.avatar)}))).append(this.props.data.name))},renderMobile:function(){return(new r).getStatus(this.props.data.status),e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("h3",{ref:"user"}),e.createElement("div",{className:"mitemdotright"},e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading"},e.createElement("div",null,this.props.data.name)))))},renderDesktop:function(){var t=(new r).getStatus(this.props.data.status),n=this;return e.createElement("tr",null,e.createElement("td",null,this.props.data.id),e.createElement("td",null,e.createElement("a",{href:"#courseteacher/edit/"+this.props.data.id},e.createElement("span",{ref:"user_avatar"}))),e.createElement("td",{ref:""},this.props.data.job_title),e.createElement("td",null,this.props.data.company),e.createElement("td",null,this.props.data.link_facebook),e.createElement("td",null,e.createElement("span",{className:"ui small simple label "+t.color},t.text)),e.createElement(p,{id:this.props.data.creator_id}),e.createElement("td",null,moment.unix(n.props.data.date_created).format("HH:mm, DD/MM/YYYY")),e.createElement("td",{className:"right aligned cell_action",ref:"btnedit"},e.createElement(u,{link:"#courseteacher/edit/"+this.props.data.id}),e.createElement(m,{onRemove:this._remove,ref:"remove"})))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return h}),define("components/dataexporter/tool",["models/user","models/region","models/employee","models/office","models/department"],function(e,t,n,a,i){return{getTypeEmployee:function(e){var t=(new n).getType(e);return t?t.text:""},getStatusEmployee:function(e){var t=(new n).getStatus(e);return t?t.text:""},getPositionEmployee:function(e){var t=(new n).getPosition(e);return t?t.text:""},getOfficeName:function(e){var t=(new a).getDetailFromCache(e);return t?t.name:""},getDepartmentName:function(e){var t=(new i).getDetailFromCache(e);return t?t.name:""},getDepartmentName:function(e){var t=(new i).getDetailFromCache(e);return t?t.name:""},getFormattedDate:function(e,t){return t="undefined"!=typeof t?t:"HH:mm, DD/MM/YYYY",null!==e&&parseInt(e)>0?moment.unix(e).format(t):""},getRegionName:function(e){if(0==e)return"";var n=(new t).getDetailFromCache(e);return n?n.name:""},getUserFullnameList:function(t){var n=[];return t.map(function(t){t=parseInt(t);var a=t,i=(new e).getDetailFromCache(t);i&&(a=i.fullname),n.push(a)}),n.join(", ")}}}),define("components/dataexporter/formatter/employee",["components/dataexporter/tool","language/employee"],function(e,t){return{header:function(){return[["SID"],["Internal ID"],["Họ Tên"],["Email"],["Phone"],["Trụ sở"],["Phòng ban"],["Chức vụ"],["Loại hình công việc"],["Cấp bậc"],["Trạng thái"]]},reduce:function(n){var a=[];return n.map(function(n){var i=e.getTypeEmployee(n.type)?t.t("TYPE_"+e.getTypeEmployee(n.type)):e.getTypeEmployee(n.type),r=e.getTypeEmployee(n.position)?t.t("POSITION_"+e.getPositionEmployee(n.position)):e.getTypeEmployee(n.position),o=e.getTypeEmployee(n.status)?t.t("STATUS_"+e.getStatusEmployee(n.status)):e.getTypeEmployee(n.status);a.push([[n.id,"Number"],[n.internal_id],[n.full_name],[n.email],[n.phone],[e.getOfficeName(n.office_id)],[e.getDepartmentName(n.department_id)],[n.job_title],[i],[r],[o]])}),a}}}),define("components/dataexporter/xlsx/workbook",[],function(){return{xml:function(){return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mx="http://schemas.microsoft.com/office/mac/excel/2008/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:mv="urn:schemas-microsoft-com:mac:vml" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xm="http://schemas.microsoft.com/office/excel/2006/main"><workbookPr/><sheets><sheet state="visible" name="Sheet1" sheetId="1" r:id="rId3"/></sheets><definedNames/><calcPr/></workbook>'},xmlRels:function(){return'<?xml version="1.0" ?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">\n<Relationship Id="rId3" Target="worksheets/sheet1.xml" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet"/>\n</Relationships>'},rels:function(){return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>'},contentType:function(){return'<?xml version="1.0" ?>\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">\n<Default ContentType="application/xml" Extension="xml"/>\n<Default ContentType="application/vnd.openxmlformats-package.relationships+xml" Extension="rels"/>\n<Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" PartName="/xl/worksheets/sheet1.xml"/>\n<Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" PartName="/xl/workbook.xml"/>\n</Types>'}}}),define("components/dataexporter/xlsx/worksheet",["helper"],function(e){return{sanitizeStringForXML:function(e){"use strict";var t=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm;return e.replace(t,"")},xml:function(){return'<?xml version="1.0" ?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:mv="urn:schemas-microsoft-com:mac:vml" xmlns:mx="http://schemas.microsoft.com/office/mac/excel/2008/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xm="http://schemas.microsoft.com/office/excel/2006/main"><sheetData>{placeholder}</sheetData></worksheet>'},generateXMLWorksheet:function(e,t){var n="";return n+=this.generateHeader(e),n+=this.generateRows(t),this.xml().replace("{placeholder}",n)},generateHeader:function(e){var t="";return t+="<row>"+this.generateCells(e)+"</row>"},generateRows:function(e){var t="",n=this;return e.map(function(e){t+="<row>"+n.generateCells(e)+"</row>"}),t},generateCells:function(e){var t="",n=this;return e.map(function(e){var a="String";e.length>1&&"Number"==e[1]&&(a="Number");var i={};switch(e.length>2&&(i=e[2]),a){case"String":t+=n.generateCellString(e[0],i);break;case"Number":t+=n.generateCellNumber(e[0],i)}}),t},generateCellString:function(t,n){var a=e.htmlescape(t);return a=this.sanitizeStringForXML(a),'<c t="inlineStr"><is><t>'+a+"</t></is></c>"},generateCellNumber:function(e,t){return"<c><v>"+e+"</v></c>"}}}),define("components/dataexporter/popup",["react","backbone","helper","pref","setting","eventbus","language/default","components/dataexporter/xlsx/workbook","components/dataexporter/xlsx/worksheet"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"DataExporterPopupComponent",getDefaultProps:function(){return{filename:"",total:0,delayBetweenRequest:10,formatter:null,requestType:"",requestData:null,requestUrl:""}},getInitialState:function(){return{state:"pending",donepercent:0,downloadingpage:1}},initExport:function(e){e.preventDefault(),1==this.state.downloadingpage&&(this.serverdata=null,this.serverdata=[]),this.downloading=!0,this.setState({state:"downloading"}),this.loadData(this.state.downloadingpage)},serverdata:[],downloading:!1,updateProgress:function(e,t){var n=Math.floor(e/t*100);this.setState({state:100==n?"zipping":"downloading",donepercent:n})},loadData:function(e){if(this.downloading){var t=this,a=n.cloneObjectData(this.props.requestData);a.page=e,a.__exportmode=!0;var i=Math.ceil(this.props.total/parseInt(a.limit));this.setState({downloadingpage:e}),$.ajax({url:this.props.requestUrl,type:this.props.requestType,data:a,success:function(n){t.updateProgress(e,i),t.serverdata=t.serverdata.concat(t.props.formatter.reduce(n.items)),i>e?setTimeout(function(){t.loadData(e+1)},t.props.delayBetweenRequest):t.generateFile()},error:function(){t.setState({state:"error"}),n.showError(o.t("export_to_excel_status_error"))}})}},generateFile:function(){this.setState({state:"zipping"});var e=this,t=new JSZip,n=t.folder("xl");n.file("workbook.xml",s.xml()),n.file("_rels/workbook.xml.rels",s.xmlRels()),t.file("_rels/.rels",s.rels()),t.file("[Content_Types].xml",s.contentType()),n.file("worksheets/sheet1.xml",l.generateXMLWorksheet(this.props.formatter.header(),this.serverdata)),t.generateAsync({type:"blob"}).then(function(t){saveAs(t,e.props.filename),e.setState({state:"done",downloadingpage:1})})},componentWillUnmount:function(){this.serverdata=null,this.downloading=!1,this.setState({state:"done",downloadingpage:1})},componentDidMount:function(){$(".ui.modal",e.findDOMNode(this)).modal({context:e.findDOMNode(this),closable:!1,onShow:function(){$("body").addClass("has-modal")},onHide:function(){$("body").removeClass("has-modal")},onHidden:function(){r.trigger("dataexporter:unmountpopup")}}).modal("show"),$(e.findDOMNode(this.refs.progress)).progress()},render:function(){var t="";switch(this.state.state){case"pending":t=o.t("export_to_excel_status_pending");break;case"downloading":t=o.t("export_to_excel_status_downloading");break;case"error":t=o.t("export_to_excel_status_error");break;case"zipping":t=o.t("export_to_excel_status_zipping");break;case"done":t=o.t("export_to_excel_status_done")}var a=5e3;return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal"},e.createElement("div",{className:"content"},e.createElement("h3",null,o.t("export_to_excel_help1")," ",n.numberFormat(this.props.total)," ",this.props.itemunit," ",o.t("export_to_excel_help2"),"."),e.createElement("br",null),this.props.total>a?e.createElement("p",{style:{color:"orange"},title:o.t("export_to_excel_help3_tooltip").replace("###NUMBER###",n.numberFormat(a))},e.createElement("small",null,o.t("export_to_excel_help3"))):"",e.createElement("div",{className:"ui indicating teal progress",ref:"progress","data-value":this.state.donepercent,"data-total":"100"},e.createElement("div",{className:"bar",style:{width:this.state.donepercent+"%",display:0==this.state.donepercent?"none":""}},e.createElement("div",{className:"progress"},this.state.donepercent+"%")),e.createElement("div",{className:"label"},e.createElement("br",null),e.createElement("span",null,t))),e.createElement("br",null)),e.createElement("div",{className:"actions"},e.createElement("div",{style:{marginTop:10}},e.createElement("div",{className:"pull-right"},e.createElement("a",{className:"cancel ui basic noborder button"},o.t("close")),e.createElement("a",{onClick:this.initExport,className:"ui button teal "+("downloading"==this.state.state||"zipping"==this.state.state?"disabled":"")},o.t("export_to_excel_button")),"error"==this.state.state?e.createElement("a",{onClick:this.initExport,className:"ui button orange"},o.t("export_to_excel_resume_button")):""),e.createElement("div",{style:{clear:"both"}})))))}});return c}),define("components/dataexporter/trigger",["react","helper","language/default","eventbus","components/dataexporter/popup"],function(e,t,n,a,i){var r=e.createClass({displayName:"DataExporterTriggerComponent",getDefaultProps:function(){return{total:0,itemunit:n.t("export_to_excel_unit_default"),displayTotal:!0,filename:"export.xlsx",icon:"download",text:n.t("export_to_excel"),color:"teal",formatter:null,requestType:"GET"}},getInitialState:function(){return{data:null,url:""}},setRequestData:function(e){this.setState({data:e.data,url:e.url})},openPopup:function(t){t.preventDefault(),e.unmountComponentAtNode(e.findDOMNode(this.refs.modalwrapper)),e.render(e.createElement(i,{total:parseInt(this.props.total),itemunit:this.props.itemunit,formatter:this.props.formatter,filename:this.props.filename,requestType:this.props.requestType,requestData:this.state.data,requestUrl:this.state.url}),e.findDOMNode(this.refs.modalwrapper))},unmountPopupHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.modalwrapper))},componentDidUpdate:function(){},componentWillUnmount:function(){a.off("dataexporter:unmountpopup",this.unmountPopupHandler)},componentDidMount:function(){a.on("dataexporter:unmountpopup",this.unmountPopupHandler)},render:function(){return e.createElement("div",null,this.props.total>0?e.createElement("a",{className:"ui mini button labeled icon "+this.props.color,href:"#",onClick:this.openPopup},this.props.icon.length>0?e.createElement("i",{className:"icon tc-"+this.props.icon}):"",this.props.text,this.props.displayTotal?e.createElement("span",null," (",t.numberFormat(this.props.total)," ",this.props.itemunit,")"):""):"",e.createElement("div",{ref:"modalwrapper"}))}});return r}),define("components/mixin/daterange",["react","helper"],function(e,t){return{getPreventOptions:function(){return{time:{enabled:!0}}},getOptions:function(){var e=this.getPreventOptions(),t={format:this.props.format,separator:this.props.separator,setValue:this.setValue,getValue:this.getValue},n=$.extend(e,this.props.options,t);return this.isSingle?(n.singleDate=!0,n.singleMonth=!0):(n.singleDate=!1,n.singleMonth=!1),n},initDateRange:function(){var t=$.isFunction(this.overrideOptions)?this.overrideOptions():this.getOptions();$(e.findDOMNode(this.refs.date_to_init)).dateRangePicker(t)},removeDateRange:function(){this.getDateRangePicker().destroy()},getValue:function(){return this.state.formatted},getDateRangePicker:function(){return $(e.findDOMNode(this.refs.date_to_init)).data("dateRangePicker")},clear:function(e){void 0!=e&&(e.preventDefault(),e.stopPropagation()),this.getDateRangePicker().clear(),this.setValue("")},close:function(){this.getDateRangePicker().close()},componentWillUnmount:function(){this.removeDateRange()},componentDidMount:function(){this.initDateRange()},renderInput:function(){var t=this.props.iconPosition||"right";return e.createElement("div",{className:"ui "+this.props.size+" "+t+" icon input"},e.createElement("input",{ref:"date_to_init",size:this.props.inputSize||this.state.formatted.length,value:this.state.formatted,readOnly:!0,name:this.props.name,placeholder:this.props.placeholder,style:{textAlign:"center"}}),$.trim(this.state.formatted).length>0&&this.props.hasClear?e.createElement("i",{onClick:this.clear,className:"tc-cross icon link"}):e.createElement("i",{className:"tc-calendar icon"}))},renderSpan:function(){return e.createElement("div",{style:{display:"inline-block",cursor:"pointer"}},e.createElement("span",{ref:"date_to_init"},this.state.formatted,e.createElement("i",{className:"tc-sortdesc"})))},render:function(){switch(this.props.type){case"span":return this.renderSpan();default:return this.renderInput()}}}}),define("components/datepickerinput",["react","helper","components/mixin/daterange"],function(e,t,n){var a=e.createClass({displayName:"DatePickerInputComponent",isSingle:!0,mixins:[n],getDefaultProps:function(){return{type:"input",options:{},format:"DD/MM/YYYY HH:mm",date:null,inputSize:15,size:"small",hasClear:!0}},getInitialState:function(){return{formatted:this.getFormatted(this.props.date)}},getFormatted:function(e){return e?t.dateToMoment(e,this.props.format).format(this.props.format):""},getDate:function(){var e=null;return moment(this.state.formatted,this.props.format).isValid()&&(e=moment(this.state.formatted,this.props.format)),e},setValue:function(e){var t=this;this.state.formatted!=e&&this.setState({formatted:e},function(){$.isFunction(t.props.onChange)&&this.props.onChange(t.getDate())})},componentWillReceiveProps:function(e){this.state.formatted=this.getFormatted(e.date)}});return a}),define("components/daterange",["react","helper","language/default"],function(e,t,n){var a=e.createClass({displayName:"DateRangeComponent",getDefaultProps:function(){return{id:(new Date).getTime(),timepicker:!0,date_started:0,date_ended:0}},getDateStarted:function(){var t=0;return startDate=$(e.findDOMNode(this.refs.date_started)).val(),startDate.length>0&&(t=moment(startDate).unix()),t},getDateEnded:function(){var t=0;return endDate=$(e.findDOMNode(this.refs.date_ended)).val(),endDate.length>0&&(t=moment(endDate).unix()),t},getDatePickerStartMonth:function(e){var t=moment().get("M")+1;return t>=e&&(t-=e-1),t},componentWillReceiveProps:function(t){var n=null,a=null;t.date_started&&(n=moment.unix(t.date_started).format()),t.date_ended&&(a=moment.unix(t.date_ended).format()),$(e.findDOMNode(this.refs.date_started)).periodpicker("value",[n,a])},componentWillUnmount:function(){$(e.findDOMNode(this.refs.date_started)).periodpicker("destroy")},componentDidMount:function(){var a=this;$(e.findDOMNode(this.refs.date_started)).periodpicker({end:"#"+$(e.findDOMNode(this.refs.date_ended)).attr("id"),lang:"vn",formatDate:"YYYY-MM-DD",formatDateTime:"YYYY-MM-DD HH:mm",formatDecoreDate:"DD/MM",formatDecoreDateTime:"DD/MM",formatDecoreDateTimeWithoutMonth:"D",formatDecoreDateTimeWithYear:"D/M/Y",cells:[1,t.isSmallScreen()?1:3],startMonth:this.getDatePickerStartMonth(t.isSmallScreen()?1:3),i18n:{vn:{Close:n.t("close"),OK:n.t("choose"),"Choose period":n.t("choose_period")}},timepicker:a.props.timepicker,timepickerOptions:{hours:!0,minutes:!0,seconds:!1,ampm:!1,twelveHoursFormat:!1,inputFormat:"HH:mm",defaultTime:"00:00"},defaultEndTime:"23:59",clearButtonInButton:!0,withoutBottomPanel:!1,yearsLine:!1,title:!1,closeButton:!0,fullsizeButton:!0})},render:function(){return e.createElement("span",null,e.createElement("input",{ref:"date_ended",id:"datepickerend"+this.props.id,type:"hidden"}),e.createElement("input",{ref:"date_started",id:"datepickerstarted"+this.props.id,type:"text"}))}});return a}),define("components/daterangepicker",["react","helper"],function(e,t){var n=e.createClass({displayName:"DateRangePickerComponent",getDefaultProps:function(){return{date_started:0,date_ended:0,singleDate:!1,timePicker:!0,horizontal:!1,size:""}},getFormatValue:function(){var e="YYYY-MM-DD";return this.props.timePicker===!0&&(e="YYYY-MM-DDTHH:mm"),e},getDateStarted:function(){console.log(moment("22:40","HH:mm"));var t=0;if(this.refs.date_started){var n=e.findDOMNode(this.refs.date_started).value;console.log(e.findDOMNode(this.refs.date_started)),n=moment(n,this.getFormatValue()),n.isValid()&&(t=n.unix())}return t},setDateStarted:function(t){var n=moment.unix(t);n.isValid()&&(e.findDOMNode(this.refs.date_started).value=n.format(this.getFormatValue()))},getDateEnded:function(){var t=0;if(this.refs.date_ended){var n=e.findDOMNode(this.refs.date_ended).value;n=moment(n,this.getFormatValue()),n.isValid()&&(t=n.unix())}return t},setDateEnded:function(t){var n=moment.unix(t);n.isValid()&&(e.findDOMNode(this.refs.date_ended).value=n.format(this.getFormatValue()))},componentDidMount:function(){},render:function(){var t=this.props.date_started?moment.unix(this.props.date_started).format(this.getFormatValue()):"",n=this.props.date_ended?moment.unix(this.props.date_ended).format(this.getFormatValue()):"",a="date";this.props.timePicker===!0&&(a="datetime-local");var i=this.props.size;return this.props.horizontal===!0&&(i+=" horizontal"),e.createElement("div",{className:"ui "+i+" list"},e.createElement("div",{className:"item"},e.createElement("input",{ref:"date_started",defaultValue:t,type:a})),this.props.singleDate!==!0?e.createElement("div",{className:"item"},e.createElement("input",{ref:"date_ended",defaultValue:n,type:a})):function(){return!1})}});return n}),define("components/daterangepickerinput",["react","helper","components/mixin/daterange"],function(e,t,n){var a=e.createClass({displayName:"DateRangePickerInputComponent",mixins:[n],getDefaultProps:function(){return{type:"input",options:{},format:"DD/MM/YYYY HH:mm",separator:" - ",date_started:null,date_ended:null,inputSize:27,size:"small",hasClear:!0}},getInitialState:function(){return{formatted:this.getFormatted(this.props.date_started,this.props.date_ended)}},getFormatted:function(e,n){if(!e||!n)return"";e=t.dateToMoment(e,this.props.format),n=t.dateToMoment(n,this.props.format);var a=[e.format(this.props.format),n.format(this.props.format)];return a.join(this.props.separator)},getData:function(){var e=this.state.formatted.split(this.props.separator),t=null,n=null;return e[0]&&moment(e[0],this.props.format).isValid()&&(t=moment(e[0],this.props.format)),e[1]&&moment(e[1],this.props.format).isValid()&&(n=moment(e[1],this.props.format)),{date_started:t,date_ended:n}},setValue:function(e){var t=this;this.state.formatted!=e&&this.setState({formatted:e},function(){$.isFunction(t.props.onChange)&&this.props.onChange(t.getData())})},componentWillReceiveProps:function(e){this.state.formatted=this.getFormatted(e.date_started,e.date_ended)}});return a}),define("language/department",["baselanguage"],function(e){var t={vn:{heading:"Phòng ban",heading_add:"Thêm mới",heading_edit:"Cập nhật",name:"Tên",datecreated:"Ngày taọ",parent:"Thuộc phòng ban",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",address:"Địa chỉ",id:"Mã",work_time_range:"Thời gian làm việc",work_time_start:"Giờ làm việc",work_time_end:"Giờ tan ca",region:"Tỉnh thành",display_order:"Thứ tự",color:"Màu sắc",time_start:"Bắt đầu",time_end:"Kết thúc",delete:"Xóa",delete_this:"Xóa phòng ban này",insert:"Tạo phòng ban",update:"Cập nhật",print:"In",search:"Tìm kiếm...",back:"Trở lại",close:"Đóng",department:"Phòng ban",department_info_title:"Chi tiết Phòng ban",department_info_add:"Thêm phòng ban mới",department_info_edit:"Cập nhật phòng ban",department_info_content:"Quản lý tất cả phòng ban trong công ty",general_information:"Thông tin chung",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",required:"Bắt buộc",error_name_required:"Vui lòng nhập tên!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_address_required:"Vui lòng nhập địa chỉ phòng ban!",error_region_id_required:"Vui lòng chọn tỉnh thành!",error_content_is_require:"Vui lòng nhập nội dung!",error_department_id_invalid:"Phòng ban không hợp lệ!",error_time_invalid_format:"Thời gian không đúng định dạng!",error_time_start_more_than_time_end:"Thời gian bắt đầu lớn hơn thời gian kết thúc!"},en:{heading:"Phòng ban",heading_add:"Thêm mới",heading_edit:"Cập nhật",name:"Tên",datecreated:"Ngày taọ",parent:"Thuộc phòng ban",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",address:"Địa chỉ",id:"Mã",work_time_range:"Thời gian làm việc",work_time_start:"Giờ làm việc",work_time_end:"Giờ tan ca",region:"Tỉnh thành",display_order:"Thứ tự",color:"Màu sắc",time_start:"Bắt đầu",time_end:"Kết thúc",delete:"Xóa",delete_this:"Xóa phòng ban này",insert:"Tạo phòng ban",update:"Cập nhật",print:"In",search:"Tìm kiếm...",back:"Trở lại",close:"Đóng",department:"Phòng ban",department_info_title:"Chi tiết Phòng ban",department_info_add:"Thêm phòng ban mới",department_info_edit:"Cập nhật phòng ban",department_info_content:"Quản lý tất cả phòng ban trong công ty",general_information:"Thông tin chung",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",required:"Bắt buộc",error_name_required:"Vui lòng nhập tên!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_address_required:"Vui lòng nhập địa chỉ phòng ban!",error_region_id_required:"Vui lòng chọn tỉnh thành!",error_content_is_require:"Vui lòng nhập nội dung!",error_department_id_invalid:"Phòng ban không hợp lệ!",error_time_invalid_format:"Thời gian không đúng định dạng!",error_time_start_more_than_time_end:"Thời gian bắt đầu lớn hơn thời gian kết thúc!"}};return new e({lang:t})}),define("components/select-region",["react","pref","language/default","collections/region","models/region"],function(e,t,n,a,i){var r=e.createClass({displayName:"SelectRegionComponent",getDefaultProps:function(){return{name:"region_id",value:0,placeholder:"------",parent_id:0,fluid:!1,multiple:!1}},getInitialState:function(){return{items:[]}},componentDidMount:function(){var t=this;$(e.findDOMNode(this)).dropdown({fullTextSearch:!0,message:{noResults:n.t("search_no_result")},onAdd:function(n,a,i){$(e.findDOMNode(t)).dropdown("hide")},onChange:t.props.onChange}),this._loadData()},componentDidUpdate:function(){var t=this._value>=0?this._value:this.props.value;$(e.findDOMNode(this)).dropdown("refresh"),$(e.findDOMNode(this)).dropdown("get item",t)?$(e.findDOMNode(this)).dropdown("set selected",t):$(e.findDOMNode(this)).dropdown("set selected","0")},_loadData:function(n){var r=this,o="undefined"==typeof this._parent_id?this.props.parent_id:this._parent_id;return 0>o?(this.setState(this.getInitialState()),!1):($(e.findDOMNode(this)).addClass("loading"),void(new a).fetch({data:{company_id:t.get("cid"),parent_id:o,is_not_deleted:1,sort_by:"display_order",sort_type:"ASC",page:n,status:(new i).STATUS_ENABLE},success:function(t,n){r.setState({items:r.state.items.concat(n.items)}),Math.ceil(n.total/n.limit)>n.currentpage?r._loadData(n.currentpage+1):$(e.findDOMNode(r)).removeClass("loading")},error:function(){$(e.findDOMNode(r)).removeClass("loading")}}))},changeParent:function(e){this._parent_id=e,this.setState(this.getInitialState()),
this._loadData()},changeValue:function(e){this._value=e,this.forceUpdate()},render:function(){return e.createElement("div",{className:"ui "+this.props.className+(this.props.fluid?" fluid":"")+(this.props.multiple?" multiple":"")+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},this.props.multiple?"":e.createElement("div",{className:"item","data-value":"0"},this.props.placeholder),this.state.items.map(function(t){return e.createElement("div",{key:t.id,className:"item","data-value":t.id},t.name)})))}});return r}),define("components/department/select-time",["react","language/default"],function(e,t){var n=e.createClass({displayName:"SelectTimeOfficeComponent",getInitialState:function(){return{hour:this._getSelectHour(),minute:this._getSelectMinute()}},_getSelectHour:function(){for(var e=[],t=0;24>t;t++)e.push(("0"+t).slice(-2));return e},_getSelectMinute:function(){for(var e=[],t=0;60>t;t++)e.push(("0"+t).slice(-2));return e},render:function(){var n=this,a=[];if("hour"==this.props.type){var i=" "+t.t("hour");a=this.state.hour}else{var i=" "+t.t("minute");a=this.state.minute}return e.createElement("select",{name:n.props.name},a.map(function(t,a){var r="";return parseInt(n.props.select)==a&&(r="selected"),e.createElement("option",{defaultValue:r,value:t},t,i)}))}});return n});define("language/office",["baselanguage"],function(e){var t={vn:{heading:"Văn phòng làm việc",sidebar_heading:"Bộ lọc văn phòng",heading_insert:"Thêm mới",heading_update:"Cập nhật",name:"Tên",insert:"Tạo văn phòng",allow_late_time:"Thời gian vào làm trễ",allow_early_time:"Thời gian ra về sớm",allow_time_note:"Tính bằng phút (điền 0 nếu không cài đặt)",ignore_duration:"Giờ nghỉ",content:"Nội dung",work_tracking_reviewer:"Người duyệt công",restrict_ips:"IP được chấm công",link_to_store:"Kết nối cửa hàng",datecreated:"Ngày taọ",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",address:"Địa chỉ",id:"Mã",ot_ratio:"Hệ số OT",filter_keyword:"Từ khóa",add_workrange_row:"Thêm ca",work_time_range:"Thời gian làm việc",work_time_start:"Giờ làm việc",work_time_end:"Giờ tan ca",region:"Tỉnh thành",display_order:"Thứ tự",color:"Màu sắc",time_start:"Bắt đầu",time_end:"Kết thúc",workrang_ratio:"Hệ số",datereview:"Giới hạn ngày duyệt công",delete:"Xóa",cancel_confirm:"Bạn có chắc chắn muốn xóa văn phòng này không?",update:"Cập nhật",print:"In",search:"Tìm kiếm...",back:"Trở lại",close:"Đóng",office:"Văn phòng",office_info_title:"Chi tiết văn phòng",office_info_add:"Thêm văn phòng mới",office_info_edit:"Cập nhật văn phòng",office_info_content:"Thông tin chi tiết văn phòng",general_information:"Thông tin chung",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",description_ignore_time:"Nhập thời gian nghỉ được nhập theo kiểu 24 giờ (2 giờ 2 phút chiều = 14:02) và theo định dạng  : giờ:phút-giờ:phút,giờ:phút-giờ:phút,..... (ví dụ: có 2 giờ nghỉ: 1 nghỉ từ 14:00 đến 15:00; 2 nghỉ từ 16:00 đến 17:00 = 14:00-15:00,16:00-17:00)",error_company_have_maxstore:"Công ty đã tạo hết số văn phòng cho phép, vui lòng liên hệ ban quản trị để tạo thêm",error_name_required:"Vui lòng nhập tên!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_address_required:"Vui lòng nhập địa chỉ văn phòng!",error_region_id_required:"Vui lòng chọn tỉnh thành!",error_content_is_require:"Vui lòng nhập nội dung!",error_office_id_invalid:"Văn phòng không hợp lệ!",error_time_invalid_format:"Thời gian không đúng định dạng!",error_two_duration_ignore_time_is_duplicate:"2 Khoảng thời gian nghỉ không được lồng vào nhau!",error_ignore_duration_invalid:"Thời gian nghỉ không đúng định dạng!",error_time_start_more_than_time_end:"Thời gian bắt đầu lớn hơn thời gian kết thúc!",error_ignore_time_not_in_time_start_time_end:"Thời gian nghỉ phải trong thời gian của ca!",error_ignore_time_start_less_than_time_end:"Thời gian nghỉ bắt đầu phải nhỏ hơn thời gian nghỉ kết thúc!",update_success:"Cập nhật ca thành công!",insert_success:"Thêm mới ca thành công!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",current_ip_is:"Ip hiện tại của bạn là"},en:{heading:"Văn phòng làm việc",sidebar_heading:"Bộ lọc văn phòng",heading_insert:"Thêm mới",heading_update:"Cập nhật",name:"Tên",insert:"Tạo văn phòng",allow_late_time:"Thời gian vào làm trễ",allow_early_time:"Thời gian ra về sớm",allow_time_note:"Tính bằng phút (điền 0 nếu không cài đặt)",ignore_duration:"Giờ nghỉ",content:"Nội dung",work_tracking_reviewer:"Người duyệt công",restrict_ips:"IP được chấm công",link_to_store:"Kết nối cửa hàng",datecreated:"Ngày taọ",status:"Trạng thái",enabled:"Cho phép",disabled:"Vô hiệu hóa",address:"Địa chỉ",id:"Mã",ot_ratio:"Hệ số OT",filter_keyword:"Từ khóa",add_workrange_row:"Thêm ca",work_time_range:"Thời gian làm việc",work_time_start:"Giờ làm việc",work_time_end:"Giờ tan ca",region:"Tỉnh thành",display_order:"Thứ tự",color:"Màu sắc",time_start:"Bắt đầu",time_end:"Kết thúc",workrang_ratio:"Hệ số",datereview:"Giới hạn ngày duyệt công",delete:"Xóa",cancel_confirm:"Bạn có chắc chắn muốn xóa văn phòng này không?",update:"Cập nhật",print:"In",search:"Tìm kiếm...",back:"Trở lại",close:"Đóng",office:"Văn phòng",office_info_title:"Chi tiết văn phòng",office_info_add:"Thêm văn phòng mới",office_info_edit:"Cập nhật văn phòng",office_info_content:"Thông tin chi tiết văn phòng",general_information:"Thông tin chung",all:"Tất cả",exportexcel:"Xuất Excel",week:"Tuần",description_ignore_time:"Nhập thời gian nghỉ được nhập theo kiểu 24 giờ (2 giờ 2 phút chiều = 14:02) và theo định dạng  : giờ:phút-giờ:phút,giờ:phút-giờ:phút,..... (ví dụ: có 2 giờ nghỉ: 1 nghỉ từ 14:00 đến 15:00; 2 nghỉ từ 16:00 đến 17:00 = 14:00-15:00,16:00-17:00)",error_company_have_maxstore:"Công ty đã tạo hết số văn phòng cho phép, vui lòng liên hệ ban quản trị để tạo thêm",error_name_required:"Vui lòng nhập tên!",error_status_is_require:"Vui lòng chọn trạng thái!",error_status_not_valid:"Trạng thái không hợp lệ!",error_address_required:"Vui lòng nhập địa chỉ văn phòng!",error_region_id_required:"Vui lòng chọn tỉnh thành!",error_content_is_require:"Vui lòng nhập nội dung!",error_office_id_invalid:"Văn phòng không hợp lệ!",error_time_invalid_format:"Thời gian không đúng định dạng!",error_two_duration_ignore_time_is_duplicate:"2 Khoảng thời gian nghỉ không được lồng vào nhau!",error_ignore_duration_invalid:"Thời gian nghỉ không đúng định dạng!",error_time_start_more_than_time_end:"Thời gian bắt đầu lớn hơn thời gian kết thúc!",error_ignore_time_not_in_time_start_time_end:"Thời gian nghỉ phải trong thời gian của ca!",error_ignore_time_start_less_than_time_end:"Thời gian nghỉ bắt đầu phải nhỏ hơn thời gian nghỉ kết thúc!",update_success:"Cập nhật ca thành công!",insert_success:"Thêm mới ca thành công!",rank_normal:"Nhân viên thường",rank_pos:"Nhân viên POS",manager_level_one:"Quản lý cấp 1",manager_level_two:"Quản lý cấp 2",current_ip_is:"Ip hiện tại của bạn là"}};return new e({lang:t})});define("components/department/item-workrange",["react","helper","pref","models/office","models/worktrackingrange","language/default","components/colorpicker","components/select-status","components/office/select-time","language/office"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"OfficeItemWorkRangeComponent",componentDidUpdate:function(){$(this.refs.delete.getDOMNode()).popup({on:"click",popup:this.refs["delete-confirm"].getDOMNode()})},componentDidMount:function(){$(this.refs.delete.getDOMNode()).popup({on:"click",popup:this.refs["delete-confirm"].getDOMNode()});var t="09",n="17",a="00",r="00",o=(new i).STATUS_ENABLE;if(this.props.hasOwnProperty("data")&&!jQuery.isEmptyObject(this.props.data)){if(this.props.data.hasOwnProperty("time_start")&&""!=this.props.data.time_start){var s=this.props.data.time_start.split(":");s.length&&(t=s[0],a=s[1])}if(this.props.data.hasOwnProperty("time_end")&&""!=this.props.data.time_end){var s=this.props.data.time_end.split(":");s.length&&(n=s[0],r=s[1])}o=this.props.data.status}$(e.findDOMNode(this.refs.hourstart)).val(t),$(e.findDOMNode(this.refs.minutestart)).val(a),$(e.findDOMNode(this.refs.hourend)).val(n),$(e.findDOMNode(this.refs.minuteend)).val(r),$(e.findDOMNode(this.refs.status)).dropdown("set selected",o)},deleterange:function(e){e.preventDefault(),$(this.refs.delete.getDOMNode()).popup("hide");var t=0;this.props.data.hasOwnProperty("id")&&(t=this.props.data.id),this.props.deleterange(this.props.index,t)},_cancelDelete:function(e){e.preventDefault(),$(this.refs.delete.getDOMNode()).popup("hide")},_unsignedInput:function(e){var n=t.strToInt(e.target.value);n=Math.abs(n),e.target.value=t.numberFormat(n)},render:function(){var t=this,n=0;return t.props.data.hasOwnProperty("id")&&(n=t.props.data.id),e.createElement("tr",{className:"inputworkrange","data-id":n},e.createElement("td",null,t.props.index+1),e.createElement("td",null,e.createElement("input",{name:"display_order",defaultValue:t.props.data.display_order,type:"text",onInput:t._unsignedInput})),e.createElement("td",null,e.createElement("input",{name:"name",defaultValue:t.props.data.name,type:"text"})),e.createElement("td",null,e.createElement(o,{name:"color",ref:"color",value:"#"+t.props.data.color})),e.createElement("td",null,e.createElement("div",{style:{float:"left",width:"45%",marginRight:"8px"}},e.createElement(l,{name:"hourstart",type:"hour",ref:"hourstart"})),e.createElement("div",{style:{float:"left",width:"45%"}},e.createElement(l,{name:"minutestart",type:"minute",ref:"minutestart"}))),e.createElement("td",null,e.createElement("div",{style:{float:"left",width:"45%",marginRight:"8px"}},e.createElement(l,{name:"hourend",type:"hour",ref:"hourend"})),e.createElement("div",{style:{float:"left",width:"45%"}},e.createElement(l,{name:"minuteend",type:"minute",ref:"minuteend"}))),e.createElement("td",{width:"100"},e.createElement(s,{data:(new i).getStatusList(),className:"status",name:"status",ref:"status"})),e.createElement("td",null,e.createElement("div",{className:"ui basic button mini",ref:"delete"},e.createElement("i",{className:"icon tc-trash"})),e.createElement("div",{ref:"delete-confirm",className:"ui flowing popup top left transition hidden"},e.createElement("h4",null,r.t("delete_confirm")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:this.deleterange,className:"ui button mini red",href:"#"},r.t("delete_button")),e.createElement("a",{onClick:this._cancelDelete,className:"ui button mini",href:"#"},r.t("cancel_button"))))))}});return d}),define("components/department/select-parent",["react","language/default"],function(e,t){var n=e.createClass({displayName:"SelectParentComponent",getDefaultProps:function(){return{name:"parent_id",id:-1}},getInitialState:function(){return{parentlist:[]}},componentDidUpdate:function(){(0==this.props.value||-1==this.props.id)&&(this.props.value="root"),$(e.findDOMNode(this.refs.dropdown)).dropdown({fullTextSearch:!0,message:{noResults:t.t("search_no_result")}}).dropdown("set selected",this.props.value)},componentDidMount:function(){$(this.getDOMNode()).dropdown({fullTextSearch:!0,message:{noResults:t.t("search_no_result")}}).dropdown("set selected",this.props.value),this.getData()},getData:function(){var e=this.formatData(0,"» ",""),t=[];$.each(e,function(e,n){t.push({key:e,name:n})}),this.setState({parentlist:t})},formatData:function(e,t,n){var a={},i=this;return this.props.data.map(function(r){if(r=r.toJSON(),r.parent_id==e){var o=!1;if(-1!=i.props.id?r.parent_id!=i.props.id&&r.id!=i.props.id&&(o=!0):o=!0,o){n=0==r.parent_id?r.name:n+"_"+r.name;var s=t+r.name;a[n+"###"+r.id]=s;var l=i.formatData(r.id,s+" » ",n);jQuery.extend(a,l)}}}),a},render:function(){var t="-------",n=this;return e.createElement("div",{ref:"dropdown",className:"ui "+this.props.className+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"}),e.createElement("div",{className:"menu",ref:"parentlist"},e.createElement("div",{"data-value":"root",className:"default text item"},t),n.state.parentlist.map(function(t){var n=t.key.split("###"),a=n[n.length-1];return e.createElement("div",{className:"item",key:t.key,"data-value":a},t.name)})))}});return n}),define("components/department/form-modal-add",["react","backbone","helper","querystring","pref","eventbus","models/department","models/worktrackingrange","language/department","collections/worktrackingrange","components/select-region","components/department/select-time","components/department/item-workrange","components/department/select-parent","components/confirm","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"DepartmentEditModalComponent",componentDidMount:function(){$(this.getDOMNode()).modal({context:$(this.getDOMNode()).parent()}).modal("show")},add:function(){var t=$(".ui .form",this.getDOMNode()),a=this;t.addClass("loading");var s=$(e.findDOMNode(this.refs.departmentinfo));(new o).save({company_id:i.get("cid"),creator_id:i.get("uid"),name:s.find('[name="name"]',t).val(),parent_id:$(e.findDOMNode(a.refs.parentlist)).dropdown("get value")},{success:function(){$(".inputworkrange").length>0?a.editworktrackingrange():($(a.getDOMNode()).modal({context:$(a.getDOMNode()).parent()}).modal("hide"),r.trigger("department:hidemodal"),a.props.loaddata())},error:function(e,t){var a=[];t.responseJSON.error.map(function(e){a.push(l.t(e))}),""==a?n.showError(f.t("insert_fail")):n.showError(a.join(", "))},complete:function(){t.removeClass("loading")}})},delete:function(e,t){var a=this;t>0?new s({id:t}).destroy({success:function(){n.showSuccess(f.t("delete_success")),a.deleterow(e)},error:function(){n.showError(f.t("delete_fail"))}}):a.deleterow(e)},render:function(){var t=this;return e.createElement("div",{className:"ui tiny modal"},e.createElement("div",{className:"header"},l.t("department_info_add")),e.createElement("div",{className:"content"},e.createElement("div",{className:"fields"},e.createElement("form",{className:"ui form",ref:"departmentinfo"},e.createElement("div",{className:"field required"},e.createElement("label",null,l.t("name")),e.createElement("input",{name:"name",type:"text"})),e.createElement("div",{className:"field wide"},e.createElement("label",null,l.t("parent")),e.createElement(p,{data:t.props.fulllist,value:"root",ref:"parentlist"}))))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic approve button"},l.t("close")),e.createElement("div",{className:"ui button teal",onClick:t.add},l.t("insert"))))}});return g}),define("components/department/form-modal-edit",["react","backbone","helper","querystring","pref","eventbus","models/department","models/worktrackingrange","language/department","collections/worktrackingrange","components/select-region","components/department/select-time","components/department/item-workrange","components/department/select-parent","components/confirm","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"DepartmentEditModalComponent",componentDidMount:function(){$(this.getDOMNode()).modal({context:$(this.getDOMNode()).parent()}).modal("show"),$(this.refs.delete.getDOMNode()).popup({on:"click",position:"top left",popup:this.refs["delete-confirm"].getDOMNode()})},edit:function(){var t=$(".ui .form",this.getDOMNode()),a=this;t.addClass("loading");var s=$(e.findDOMNode(this.refs.departmentinfo));new o({id:this.props.data.id}).save({company_id:i.get("cid"),creator_id:i.get("uid"),name:s.find('[name="name"]',t).val(),parent_id:$(e.findDOMNode(a.refs.parentlist)).dropdown("get value")},{success:function(){r.trigger("department:hidemodal"),$(a.getDOMNode()).modal({context:$(a.getDOMNode()).parent()}).modal("hide"),a.props.loaddata()},error:function(e,t){var a=[];t.responseJSON.error.map(function(e){a.push(l.t(e))}),""==a?n.showError(f.t("insert_fail")):n.showError(a.join(", "))},complete:function(){t.removeClass("loading")}})},_delete:function(e){e.preventDefault();var t=this;$(this.refs.delete.getDOMNode()).popup("hide"),$(".ui.form",this.getDOMNode()).addClass("loading"),new o({id:this.props.data.id}).destroy({success:function(){n.showSuccess(f.t("delete_success")),t.props.loaddata()},error:function(){n.showError(f.t("delete_fail"))},complete:function(){$(".ui.form",t.getDOMNode()).removeClass("loading")}})},_cancelDelete:function(e){e.preventDefault(),$(this.refs.delete.getDOMNode()).popup("hide")},render:function(){var t=this;return e.createElement("div",{className:"ui tiny modal"},e.createElement("div",{className:"header"},l.t("department_info_edit")),e.createElement("div",{className:"content"},e.createElement("div",{className:"fields"},e.createElement("form",{className:"ui form",ref:"departmentinfo"},e.createElement("div",{className:"field required"},e.createElement("label",null,l.t("name")),e.createElement("input",{name:"name",type:"text",defaultValue:t.props.data.name})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("parent")),e.createElement(p,{ref:"parentlist",data:t.props.fulllist,value:t.props.data.parent_id,id:t.props.data.id})),e.createElement("div",{ref:"delete-confirm",className:"ui flowing popup top left transition hidden"},e.createElement("h4",null,f.t("delete_confirm")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:t._delete,className:"ui button mini red",href:"#"},f.t("delete_button")),e.createElement("a",{onClick:t._cancelDelete,className:"ui button mini",href:"#"},f.t("cancel_button"))))))),e.createElement("div",{className:"actions"},e.createElement("a",{href:"javascript:void(0)",className:"ui noborder red basic nopaddingleft button",ref:"delete"},l.t("delete_this")),e.createElement("div",{className:"ui noborder basic approve button "},l.t("close")),e.createElement("div",{className:"ui button teal",onClick:t.edit},l.t("update"))))}});return g}),define("components/department/item",["react","helper","querystring","pref","collections/employee","language/department"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"DepartmentItemComponent",componentDidMount:function(){this._countEmployee()},_countEmployee:function(){$(".ui.modal").modal();var t=this;$("#body-loader").addClass("active");var n={company_id:a.get("cid"),totalonly:1,is_not_deleted:1,department_id:t.props.data.id};(new i).fetch({data:n,success:function(n,a){var i="&nbsp;#"+t.props.data.id+". "+t.props.data.name+" ("+a.total+")";$(e.findDOMNode(t.refs.name)).html(i)},complete:function(){$("#body-loader").removeClass("active")}})},showmodaledit:function(){this.props.showmodal(this.props.data.id)},render:function(){var t=this,n="";if(this.props.data.hasOwnProperty("childlist")){var a=this.props.data.childlist;a.length&&(n=this.props.data.childlist.map(function(n,a){return e.createElement(o,{data:n,key:n.id,showmodal:t.props.showmodal})}))}return e.createElement("li",{className:"dep departmentrow",id:"departmentrowid-"+t.props.data.id,title:" » "+t.props.data.name},e.createElement("span",{"data-id":t.props.data.id},e.createElement("a",{href:"javascript:void(0)",className:"dropdown-toggle","data-toggle":"dropdown"},e.createElement("span",{className:"icon tc-folder",ref:"name",onClick:t.showmodaledit}))),e.createElement("ul",{className:"dep"},n))}});return o}),define("components/dropdown/blogstatus",["react","pref","models/blog","components/mixin/selectdropdown"],function(e,t,n,a){var i=e.createClass({displayName:"DropdownBlogStatusComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/checkinstatus",["react","pref","models/checkin","components/mixin/selectdropdown"],function(e,t,n,a){var i=e.createClass({displayName:"DropdownCheckinStatusComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/coursecategory",["react","pref","role","collections/course-category","models/course-category","components/mixin/selectdropdown"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"DropdownCategoryComponent",mixins:[r],_loadDataLive:function(e){var r=this,o={company_id:t.get("cid"),is_not_deleted:1,status:(new i).STATUS_ENABLE,page:e,sort_by:"display_order",sort_type:"ASC"};this.props.role&&(o.id_list=n.getObjectById(this.props.role).toString()),(new a).fetch({data:o,success:function(e,t){r.setState({items:r.state.items.concat(t.items)}),Math.ceil(t.total/t.limit)>t.currentpage&&r._loadDataLive(t.currentpage+1)}})},_loadData:function(){this._load((new i).cacheName)},render:function(){return this.renderItem()}});return o}),define("components/dropdown/coursestatus",["react","pref","models/course","components/mixin/selectdropdown"],function(e,t,n,a){var i=e.createClass({displayName:"DropdownCourseStatusComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/daterange",["react","helper","language/default"],function(e,t,n){var a=e.createClass({displayName:"DateRangeComponent",getDefaultProps:function(){return{id:(new Date).getTime(),daterangeSeparator:" - ",format:"DD/MM/YYYY",inputSize:20,timepicker:!0,date_started:0,date_ended:0,className:""}},getDateStarted:function(){var t=$(e.findDOMNode(this.refs.daterange)).val(),n=t.split(this.props.daterangeSeparator),a=0;return n[0].length>0&&(a=moment(n[0],this.props.format).unix()),a},getDateEnded:function(){var t=$(e.findDOMNode(this.refs.daterange)).val(),n=t.split(this.props.daterangeSeparator),a=0;return n.length>=2&&n[1].length>0&&(a=moment(n[1],this.props.format).unix(),a+=86399),a},getDefaultValue:function(){var e="";this.props.date_started>0&&(e=moment(1e3*this.props.date_started).format(this.props.format));var t="";this.props.date_ended>0&&(t=moment(1e3*this.props.date_ended).format(this.props.format));var n="";return e.length>0&&(n=e+this.props.daterangeSeparator+t),n},componentWillReceiveProps:function(t){var n=null,a=null,i=$(e.findDOMNode(this.refs.daterange)).data("dateRangePicker");t.date_started&&void 0!==i&&i.hasOwnProperty("setStart")&&(n=moment.unix(t.date_started).format(),i.setStart(n)),t.date_ended&&void 0!==i&&i.hasOwnProperty("setEnd")&&(a=moment.unix(t.date_ended).format(),i.setEnd(n))},componentWillUnmount:function(){$(e.findDOMNode(this.refs.daterange)).data("dateRangePicker").destroy()},componentDidMount:function(){$(e.findDOMNode(this.refs.daterange)).dateRangePicker({startOfWeek:"monday",separator:this.props.daterangeSeparator,format:this.props.format,endDate:this.props.endDate,showShortcuts:!0,autoClose:!0,shortcuts:{"prev-days":[1,7,15,30,60],prev:["week","month","year"],"next-days":null,next:null}})},render:function(){return e.createElement("div",{className:"ui icon input "+this.props.className},e.createElement("input",{title:"DD/MM/YYYY HH:mm",className:"",ref:"daterange",size:this.props.inputSize,defaultValue:this.getDefaultValue()}),e.createElement("i",{className:"tc-calendar icon"}))}});return a}),define("components/dropdown/department",["react","pref","collections/department","models/department","components/mixin/selectdropdown"],function(e,t,n,a,i){var r=e.createClass({displayName:"DropdownDepartmentComponent",mixins:[i],_loadDataLive:function(e){var a=this;(new n).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,sort_by:"display_order",sort_type:"ASC"},success:function(e,t){a.setState({items:a.state.items.concat(t.items)}),Math.ceil(t.total/t.limit)>t.currentpage&&a._loadDataLive(t.currentpage+1)}})},_loadData:function(){this._load((new a).cacheName)},render:function(){return this.renderItem()}});return r}),define("components/dropdown/dropdown",["react","pref","components/mixin/selectdropdown"],function(e,t,n){var a=e.createClass({displayName:"DropdownComponent",mixins:[n],_loadData:function(e){var t=[],n=this.props.data;n.map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return a}),define("components/dropdown/employee",["react","pref","cacheddata","collections/employee","models/employee","models/user","language/employee","components/mixin/selectdropdown"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"SelectEmployeeItemComponent",getDefaultProps:function(){return{data:null,fullname:""}},componentDidMount:function(){var t=this;new r({id:this.props.data.user_id}).fetch({success:function(n,a){$(e.findDOMNode(t)).text(a.fullname)}})},render:function(){return e.createElement("div",{className:"item","data-value":this.props.data.user_id},this.props.fullname)}}),c=e.createClass({displayName:"SelectEmployeeComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{className:"",placeholder:"----",value:0,name:""}},val:function(t){return"undefined"==typeof t?$(e.findDOMNode(this)).dropdown("get value"):(this.props.value=t,void this.forUpdate())},_loadDataLive:function(n){n=n||1;var r=this;$(e.findDOMNode(this)).addClass("loading"),(new a).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,status:(new i).STATUS_ENABLE,page:n},success:function(t,a){var i=r.state.items;if(1==n&&null!=r.props.optionDefault){var o=r.props.optionDefault;i=o.concat(i)}r.setState({items:i.concat(a.items)}),Math.ceil(a.total/a.limit)>a.currentpage?r._loadDataLive(a.currentpage+1):$(e.findDOMNode(r)).removeClass("loading")},error:function(){$(e.findDOMNode(r)).removeClass("loading")}})},_load:function(e){var t=n.get(e);void 0===t?this._loadDataLive(1):this.setState({items:t().get()})},_loadData:function(){this._load((new i).cacheName)},onClickIconHandler:function(t){var n=this.val();0==n||$(e.findDOMNode(this)).dropdown("clear").dropdown("clear")},componentDidUpdate:function(){$(e.findDOMNode(this)).dropdown("refresh"),null!=this.props.value&&this.props.value>0&&$(e.findDOMNode(this)).dropdown("set exactly",this.props.value)},onChangeProxy:function(){var t=this.val();0==t?($(e.findDOMNode(this)).addClass("filterbarempty"),$(e.findDOMNode(this.refs.icon)).hide()):($(e.findDOMNode(this)).removeClass("filterbarempty"),$(e.findDOMNode(this.refs.icon)).show()),"function"==typeof this.props.onChange&&this.props.onChange(t),$(e.findDOMNode(this)).dropdown("hide")},componentDidMount:function(){this._loadData();var t=this;$(e.findDOMNode(this)).dropdown({maxSelections:1,fullTextSearch:!0,onChange:this.onChangeProxy,onAdd:function(e,n,a){$(this).addClass("dropdownwithitem").removeClass("dropdownnoitem"),"function"==typeof t.props.onAdd&&t.props.onAdd(e,n,a)},onRemove:function(e,n,a){$("> .ui.label",this).length>0&&($(this).removeClass("dropdownwithitem").addClass("dropdownnoitem"),"function"==typeof t.props.onRemove&&t.props.onRemove(e,n,a))}})},render:function(){return e.createElement("div",{style:{minWidth:0,backgroundColor:"#fff !important"},className:"ui dropdown basic search labeled icon button fieldemployee "+this.props.className},e.createElement("input",{name:this.props.name,type:"hidden",defaultValue:this.props.value}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("i",{ref:"icon",className:"tc-cross hide right icon",onClick:this.onClickIconHandler}),e.createElement("div",{className:"menu"},this.state.items.map(function(t){return t.user_id>0?e.createElement(l,{fullname:t.fullname,data:t,key:t.id}):void 0})))}});return c}),define("components/dropdown/employeepointstatus",["react","pref","models/employeepoint","components/mixin/selectdropdown"],function(e,t,n,a){var i=e.createClass({displayName:"DropdownEmployeePointStatusComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/employeepointtopic",["react","pref","role","collections/employeepointtopic","models/employeepointtopic","components/mixin/selectdropdown"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"DropdownEmployeePointTopicComponent",mixins:[r],_loadData:function(e){var n=this,r={company_id:t.get("cid"),is_not_deleted:1,status:(new i).STATUS_ENABLE,page:e,sort_by:"display_order",sort_type:"ASC"};(new a).fetch({data:r,success:function(e,t){n.setState({items:n.state.items.concat(t.items)}),Math.ceil(t.total/t.limit)>t.currentpage&&n._loadData(t.currentpage+1)}})},render:function(){return this.renderItem()}});return o}),define("components/dropdown/employeepointtopicstatus",["react","pref","models/employeepointtopic","components/mixin/selectdropdown"],function(e,t,n,a){var i=e.createClass({displayName:"DropdownEmployeePointTopicStatusComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/employeepointtopictype",["react","pref","models/employeepointtopic","components/mixin/selectdropdown"],function(e,t,n,a){var i=e.createClass({displayName:"DropdownEmployeePointTopicTypeComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getTypeList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/employeetype",["react","pref","models/employee","language/employee","components/mixin/selectdropdown"],function(e,t,n,a,i){var r=e.createClass({displayName:"EmployeeTypeDropdownComponent",mixins:[i],_loadData:function(e){var t=[];(new n).getTypeList().map(function(e,n){t.push({id:e.code,name:a.t("TYPE_"+e.text)})}),this.setState({items:t})},render:function(){return this.renderItem()}});return r}),define("components/dropdown/position",["react","pref","models/employee","components/mixin/selectdropdown"],function(e,t,n,a){var i=e.createClass({displayName:"DropdownPositionComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getPositionList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/projectassigneetype",["react","pref","language/projecttask","collections/employee","components/mixin/selectdropdown"],function(e,t,n,a,i){var r=e.createClass({displayName:"DropdownProjectAssigneeTypeComponent",mixins:[i],_loadData:function(e,i){$.isArray(i)||(i=[{id:"assignee_type:me",name:n.t("assigned_to_me")},{id:"assignee_type:other",name:n.t("assigned_to_others")},{isDivider:!0}]);var r=(new a).fetchFromCache({page:e});r.items.forEach(function(e){if(e.user_id<=0||e.user_id==t.get("uid"))return!1;var n={id:"assignee_user:"+e.user_id,name:e.full_name};i.push(n)}),r.total/r.limit>r.page?this._loadData(r.page+1,i):this.setState({items:i})},render:function(){return this.renderItem()}});return r}),define("components/dropdown/projectstatus",["react","pref","models/project","components/mixin/selectdropdown"],function(e,t,n,a){var i=e.createClass({displayName:"ProjectStatusDropdownComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/projecttaskpriority",["react","pref","models/projecttask","components/mixin/selectdropdown"],function(e,t,n,a){
var i=e.createClass({displayName:"DropdownProjectTaskPriorityComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getPriorityList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/projecttaskstatus",["react","pref","models/projecttask","components/mixin/selectdropdown"],function(e,t,n,a){var i=e.createClass({displayName:"DropdownProjectTaskStatusComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/projecttasktype",["react","pref","models/projecttask","components/mixin/selectdropdown"],function(e,t,n,a){var i=e.createClass({displayName:"DropdownProjectTaskTypeComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getTypeList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/region",["react","pref","collections/region","models/region","components/mixin/selectdropdown"],function(e,t,n,a,i){var r=e.createClass({displayName:"DropdownRegionComponent",mixins:[i],_loadData:function(e){var i=this;(new n).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,parent_id:this.props.parent_id,country:this.props.country,status:(new a).STATUS_ENABLE,page:e,sort_by:"display_order",sort_type:"ASC"},success:function(e,t){i.setState({items:i.state.items.concat(t.items)}),Math.ceil(t.total/t.limit)>t.currentpage&&i._loadData(t.currentpage+1)}})},render:function(){return this.renderItem()}});return r}),define("components/dropdown/salarysource",["react","pref","models/salary","components/mixin/selectdropdown"],function(e,t,n,a){var i=e.createClass({displayName:"SalarySourceDropdownComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getSourceList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/salarystatus",["react","pref","models/salary","components/mixin/selectdropdown"],function(e,t,n,a){var i=e.createClass({displayName:"SalaryStatusDropdownComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/salarytype",["react","pref","models/salary","components/mixin/selectdropdown"],function(e,t,n,a){var i=e.createClass({displayName:"SalaryTypeDropdownComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getTypeList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/dropdown/status",["react","pref","cacheddata","collections/office","models/office","components/mixin/selectdropdown"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"DropdownOfficeComponent",mixins:[r],_loadData:function(){},render:function(){return this.renderItem()}});return o}),define("components/duration",["react"],function(e){var t=e.createClass({displayName:"DurationComponent",getDefaultProps:function(){return{type:"s",duration:0}},getInitialState:function(){return{duration:this.props.duration}},setDuration:function(e){this.setState({duration:e})},componentWillReceiveProps:function(e){this.setState({duration:e.duration})},render:function(){var t=moment.duration(this.state.duration,this.props.type),n="mm:ss";return(t.hours()>0||t.days()>0||t.months()>0||t.years()>0)&&(n="HH:mm:ss"),e.createElement("span",null,t.format(n,{trim:!1}))}});return t}),define("components/elearning/author-item",["react","helper"],function(e,t){var n=e.createClass({displayName:"ElearningAuthorItemComponent",getDefaultProps:function(){return{data:{}}},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){$(e.findDOMNode(this.refs.rating)).rating({initialRating:4,interactive:!1,maxRating:5})},componentDidUpdate:function(){},render:function(){return e.createElement("div",{className:"elearning-author"},e.createElement("div",{className:"ui items"},e.createElement("div",{className:"item"},e.createElement("div",{className:t.isSmallScreen()?"":"ui circular tiny image",style:{width:"80px",height:"80px"}},e.createElement("img",{src:this.props.data.avatar?this.props.data.avatar:"imgs/avatar"})),e.createElement("div",{className:"content"},e.createElement("div",{className:"header"},this.props.data.name),e.createElement("div",{className:"meta"},e.createElement("span",null,this.props.data.job_title)),e.createElement("div",{className:"description"},this.props.data.link_facebook?e.createElement("a",{className:"",title:"facebook",href:this.props.data.link_facebook},"Facebook · "):"",this.props.data.link_twitter?e.createElement("a",{className:"",title:"twitter",href:this.props.data.link_twitter},"Twitter · "):"",this.props.data.link_linkedin?e.createElement("a",{className:"",title:"linkedin",href:this.props.data.link_linkedin},"Linkedin · "):"",this.props.data.link_pinterest?e.createElement("a",{className:"",title:"pinterest",href:this.props.data.link_pinterest},"Pinterest · "):"",this.props.data.link_youtube?e.createElement("a",{className:"",title:"youtube",href:this.props.data.link_youtube},"Youtube"):"")))),e.createElement("div",{className:"elearning-content"},this.props.data.description))}});return n}),define("components/elearning/author-list",["react","eventbus","models/course-teacher","collections/course-teacher","components/elearning/author-item"],function(e,t,n,a,i){var r=e.createClass({displayName:"ElearningAuthorListComponent",getDefaultProps:function(){return{items:[]}},getInitialState:function(){return{items:[]}},loadTeacherDetail:function(){var e=this;if(this.props.items.length){var n=[];this.props.items.map(function(e,t){n.push(e)}),n=$.unique(n),(new a).getFromIdList({ids:n,success:function(n){var a=n.items;t.trigger("elearningdetail:updateteacher",a),e.setState({items:a})},error:function(){}})}},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){this.loadTeacherDetail()},componentDidUpdate:function(){},render:function(){return e.createElement("div",{className:"elearning-authors"},this.state.items.map(function(t){return t.status==(new n).STATUS_ENABLE?e.createElement(i,{key:t.id+"_"+moment().unix(),data:t}):void 0}))}});return r}),define("components/elearning/comment-item",["react","helper","language/courserating","collections/user"],function(e,t,n,a){var i=e.createClass({displayName:"ElearningCommentItemComponent",getDefaultProps:function(){return{data:{}}},getUser:function(){var n=this,i=(new a).fetchFromCache({id:n.props.data.creator_id});i=i.items,$(e.findDOMNode(this.refs.user)).html(i[0].fullname),$(e.findDOMNode(n.refs.user_avatar)).empty().append(e.renderToString(e.createElement("img",{className:"image",src:t.getAvatarPath(i[0].avatar)})))},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.rating)).rating({initialRating:t.props.data.rating,interactive:!1,maxRating:5}),this.getUser()},componentDidUpdate:function(){},render:function(){return{1:n.t("rating_1"),2:n.t("rating_2"),3:n.t("rating_3"),4:n.t("rating_4"),5:n.t("rating_5")},e.createElement("div",{className:"comment elearning-comment",style:{minHeight:"55px"}},e.createElement("a",{className:"avatar",ref:"user_avatar",style:{height:"50px",width:"50px !important"}}),e.createElement("div",{className:"content",style:{marginLeft:"5em !important"}},e.createElement("a",{ref:"user",className:"author"},"Keny White"),e.createElement("div",{className:"metadata"},e.createElement("span",{ref:"rating",className:"ui rating elearning-rating"})),e.createElement("div",{className:"elearning-content"},this.props.data.review)))}});return i}),define("components/elearning/comment-list",["react","components/elearning/comment-item"],function(e,t){var n=e.createClass({displayName:"ElearningCommentListComponent",getDefaultProps:function(){return{items:[]}},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){},componentDidUpdate:function(){},render:function(){return e.createElement("div",{className:"ui comments elearning-comments"},this.props.items.map(function(n){return e.createElement(t,{key:n.id,data:n})}))}});return n}),define("components/elearning/comment-post",["react","pref","eventbus","helper","models/course-rating","collections/course-rating","language/default","language/course"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"ElearningCommentPostomponent",getDefaultProps:function(){return{items:[]}},hide:function(){$(this.getDOMNode()).hide()},show:function(){$(this.getDOMNode()).show()},post:function(r){var o=this,l=$(r.target);l.hasClass("loading")||(l.addClass("loading"),(new i).save({company_id:t.get("cid"),creator_id:t.get("uid"),lms_course_id:o.props.data.id,rating:$(e.findDOMNode(o.refs.rating)).rating("get rating"),review:$(e.findDOMNode(o.refs.review)).val()},{success:function(t,i){a.showSuccess(s.t("review_success")),$(e.findDOMNode(o.refs.review)).val(""),n.trigger("elearningdetailrating:updateList","add",i)},error:function(e,t){a.notifyError(t,s,s.t("review_error"))},complete:function(){l.removeClass("loading")}}))},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){$(e.findDOMNode(this.refs.rating)).rating()},componentDidUpdate:function(){},render:function(){return e.createElement("form",{className:"ui form",style:{marginTop:"16px"}},s.t("review_rating"),": ",e.createElement("div",{className:"ui tiny star rating","data-rating":"3","data-max-rating":"5",ref:"rating",style:{marginBottom:"16px"}}," "),e.createElement("br",null),e.createElement("textarea",{rows:2,ref:"review",placeholder:s.t("comment_share")}),e.createElement("div",{style:{marginTop:"16px",textAlign:"right"}},e.createElement("span",{className:"ui button",style:{backgroundColor:"#e6a303",color:"black"},onClick:this.post},"  ",s.t("post")," ")))}});return l}),define("language/elearning",["baselanguage"],function(e){var t={vn:{read_more:"Xem thêm",teacher:"Giáo viên",category:"Danh mục",review:"Đánh giá",students:"Đăng kí",all_courses:"Tất cả khóa học",enroll:"Đăng kí khóa học",unenroll:"Bạn chưa đăng kí khóa học, vui lòng đăng kí để bắt đầu học",emptylecture:"Khóa học chưa có nội dung, vui lòng liên hệ admin để biết thêm chi tiết",enroll_success:"Đăng kí khóa học thành công",enroll_error:"Đăng kí khóa học thất bại",home:"Trang chủ",pagination_showing:"Hiển thị %from%-%to% của %total% kết quả",search_courses_placeholder:"Tìm khóa học",latest_courses:"Khóa học mới",description:"Mô tả",curriculum:"Chương trình",instructors:"Giảng viên",relate_list:"có thể bạn quan tâm",course_features:"Thông tin",enroll_enable:"Đã được đăng kí",reviews:"Đánh giá",enroll_disable:"Tạm ngừng bởi Admin ",title_enroll_note:"Vui lòng đăng kí khóa học để xem",lectures:"Bài",preview:"Xem trước",my_enroll:"Khóa học của bạn",my_enroll_list:"Danh sách khóa học",manage_course:"Vào quản lý khóa học",duration:"Độ dài",skilllevel:"Trình độ",language:"Ngôn Ngữ",assessments:"Đánh giá"},en:{read_more:"Xem thêm",teacher:"Giáo viên",category:"Danh mục",review:"Đánh giá",students:"Đăng kí",all_courses:"Tất cả khóa học",enroll:"Đăng kí khóa học",unenroll:"Bạn chưa đăng kí khóa học, vui lòng đăng kí để bắt đầu học",emptylecture:"Khóa học chưa có nội dung, vui lòng liên hệ admin để biết thêm chi tiết",enroll_success:"Đăng kí khóa học thành công",enroll_error:"Đăng kí khóa học thất bại",home:"Trang chủ",pagination_showing:"Hiển thị %from%-%to% của %total% kết quả",search_courses_placeholder:"Tìm khóa học",latest_courses:"Khóa học mới",description:"Mô tả",curriculum:"Chương trình",instructors:"Giảng viên",relate_list:"có thể bạn quan tâm",course_features:"Thông tin",enroll_enable:"Đã được đăng kí",reviews:"Đánh giá",enroll_disable:"Tạm ngừng bởi Admin ",title_enroll_note:"Vui lòng đăng kí khóa học để xem",lectures:"Bài",preview:"Xem trước",my_enroll:"Khóa học của bạn",my_enroll_list:"Danh sách khóa học",manage_course:"Vào quản lý khóa học",duration:"Độ dài",skilllevel:"Trình độ",language:"Ngôn Ngữ",assessments:"Đánh giá"}};return new e({lang:t})}),define("components/elearning/detail/lecture-item",["react","eventbus","helper","language/elearning","models/course-enroll"],function(e,t,n,a,i){var r=e.createClass({displayName:"ElearningDetaiLectureItemComponent",getDefaultProps:function(){return{data:{}}},updateEnroll:function(){var e=this.state.enroll;$.isEmptyObject(e)||(e.current_lecture_id=this.props.data.id,e.user_id=e.user_id,new i({id:e.id}).save(e,{success:function(){},error:function(){}}))},getInitialState:function(){return{enroll:{}}},getLink:function(){return"#elearning/learn/course/"+this.props.data.lms_course_id+"/lecture/"+this.props.data.id},allowstudy:function(t){$(e.findDOMNode(this.refs.link_study)).attr("href",this.getLink()),$(e.findDOMNode(this.refs.link_study)).removeAttr("title",""),$(e.findDOMNode(this.refs.link_study)).attr("style","color: black"),$(e.findDOMNode(this.refs.btn_preview)).hide(),this.setState({enroll:t})},componentWillUnmount:function(){t.off("elearninglectureitem:allowstudy")},componentWillMount:function(){t.on("elearninglectureitem:allowstudy",this.allowstudy)},componentDidMount:function(){$(".ui.accordion",e.findDOMNode(this)).accordion({}),1==this.props.data.is_free&&($(e.findDOMNode(this.refs.link_study)).attr("style","color: black"),$(e.findDOMNode(this.refs.link_study)).attr("href",this.getLink()),$(e.findDOMNode(this.refs.link_study)).removeAttr("title",""))},componentDidUpdate:function(){},render:function(){var t=this,n="none";return this.props.data.is_free&&(n=""),e.createElement("tr",{className:"top aligned"},e.createElement("td",{className:"collapsing"},e.createElement("i",{className:"tc-file elearning-format-icon"})),e.createElement("td",{className:"collapsing"},this.props.index,"."),e.createElement("td",null,e.createElement("strong",null," ",e.createElement("a",{href:"javascript:void(0)",onClick:this.updateEnroll,title:a.t("title_enroll_note"),style:{color:"#999999"},ref:"link_study"}," ",this.props.data.title," ")," "),"  ",e.createElement("a",{style:{display:n},href:this.getLink(),ref:"btn_preview",className:"ui green tiny label"},a.t("preview"))),e.createElement("td",{className:"collapsing right aligned"},t.props.data.duration_in_minute,"p"))}});return r}),define("components/elearning/detail/chapter-item",["react","pref","models/course-lecture","collections/course-lecture","components/elearning/detail/lecture-item"],function(e,t,n,a,i){var r=e.createClass({displayName:"ElearningDetaiChapterItemComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{data:{}}},loadLecture:function(e){var i=this;(new a).fetch({data:{company_id:t.get("cid"),lms_course_id:i.props.course.id,lms_course_chapter_id:i.props.data.id,sort_type:"ASC",sort_by:"display_order",status:(new n).STATUS_ENABLE,page:e},success:function(e,t){var n=$.extend([],i.state.items),a=Math.ceil(t.total/t.limit);if(t.total>0){var r=t.items;r.map(function(e,t){n.push(e)}),i.setState({items:n})}a>t.currentpage&&i.loadLecture(parseInt(t.currentpage)+1)},error:function(e,t){}})},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){this.loadLecture(1)},componentDidUpdate:function(){},render:function(){var t=this;return e.createElement("div",{className:"ui accordion elearning-accordion",ref:"chapter_list"},e.createElement("div",{className:"title active elearning-uppercase"},e.createElement("i",{className:"tc-right icon"}),t.props.data.name),e.createElement("div",{className:"content active"},e.createElement("table",{className:"ui unstackable very basic table"},e.createElement("tbody",null,this.state.items.map(function(n,a){return e.createElement(i,{index:a+1,chapter:t.props.data,data:n,key:n.id})})))))}});return r}),define("components/elearning/detail/curriculum",["react","pref","eventbus","models/course-enroll","models/course-chapter","collections/course-enroll","collections/course-chapter","components/elearning/detail/chapter-item"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"ElearningDetailCurriculumComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{data:{}}},loadEnroll:function(e){var i=this;(new r).fetch({data:{company_id:t.get("cid"),creator_id:t.get("uid"),lms_course_id:i.props.data.id,page:e},success:function(e,t){if(t.total>0){var i=t.items[0];i&&(i.status==(new a).STATUS_ENABLE?(n.trigger("elearninglectureitem:allowstudy",i),n.trigger("elearningdetail:allowenroll","enable"),n.trigger("elearningdetail:allowcomment",!0)):(n.trigger("elearningdetail:allowenroll","disable"),n.trigger("elearningdetail:allowcomment",!1)))}else n.trigger("elearningdetail:allowcomment",!1),n.trigger("elearningdetail:allowenroll","")},error:function(e,t){n.trigger("elearningdetail:allowcomment",!1)}})},loadChapter:function(e){var n=this;(new o).fetch({data:{company_id:t.get("cid"),lms_course_id:n.props.data.id,sort_type:"ASC",sort_by:"display_order",status:(new i).STATUS_ENABLE,page:e},success:function(e,t){var a=$.extend([],n.state.items),i=Math.ceil(t.total/t.limit);if(t.total>0){var r=t.items;r.map(function(e,t){a.push(e)}),n.setState({items:a})}i>t.currentpage&&n.getCategoryList(parseInt(t.currentpage)+1)},error:function(e,t){}})},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){$(".ui.accordion",e.findDOMNode(this)).accordion({}),this.loadChapter(1)},componentDidUpdate:function(){this.loadEnroll(1)},render:function(){var t=this;return e.createElement("div",null,this.state.items.map(function(n,a){return e.createElement(s,{course:t.props.data,data:n,key:n.id})}))}});return l}),define("components/elearning/detail/description",["react","models/course","language/elearning"],function(e,t,n){var a=e.createClass({displayName:"ElearningDetailDescriptionComponent",getDefaultProps:function(){return{data:{}}},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){},componentDidUpdate:function(){},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui stackable relaxed divided grid"},e.createElement("div",{className:"eleven wide column"},e.createElement("div",{className:"elearning-content",dangerouslySetInnerHTML:{__html:this.props.data.description}})),e.createElement("div",{className:"five wide column"},e.createElement("h3",{className:"ui header elearning-uppercase"},n.t("course_features")),e.createElement("table",{className:"ui unstackable very basic table"},e.createElement("tbody",null,e.createElement("tr",{className:"middle aligned"},e.createElement("td",{className:"collapsing"},e.createElement("i",{className:"tc-file elearning-format-icon"})),e.createElement("td",{className:""},n.t("lectures")),e.createElement("td",{className:""},e.createElement("strong",null,this.props.data.count_lecture))),e.createElement("tr",{className:"middle aligned"},e.createElement("td",{className:"collapsing"},e.createElement("i",{className:"tc-clock elearning-format-icon"})),e.createElement("td",{className:""},n.t("duration")),e.createElement("td",{className:""},e.createElement("strong",null,this.props.data.duration_inminute))),e.createElement("tr",{className:"middle aligned"},e.createElement("td",{className:"collapsing"},e.createElement("i",{className:"tc-file elearning-format-icon"})),e.createElement("td",{className:""},n.t("skilllevel")),e.createElement("td",{className:""},e.createElement("strong",null,(new t).getSkill(this.props.data.skill_level).text))),e.createElement("tr",{className:"middle aligned"},e.createElement("td",{className:"collapsing"},e.createElement("i",{className:"tc-globe elearning-format-icon"})),e.createElement("td",{className:""},n.t("language")),e.createElement("td",{className:""},e.createElement("strong",null,this.props.data.language))),e.createElement("tr",{className:"middle aligned"},e.createElement("td",{className:"collapsing"},e.createElement("i",{className:"tc-users elearning-format-icon"})),e.createElement("td",{className:""},n.t("students")),e.createElement("td",{className:""},e.createElement("strong",null,this.props.data.count_enroll))))))))}});return a}),define("components/elearning/detail/instructor",["react","pref","eventbus","collections/course-teacher-rel","components/elearning/author-list"],function(e,t,n,a,i){var r=e.createClass({displayName:"ElearningDetailInstructorComponent",getDefaultProps:function(){return{data:{}}},getInitialState:function(){return{items_rel:[],items:[]}},loadTeacher:function(){var e=this;(new a).fetch({data:{company_id:t.get("cid"),lms_course_id:e.props.data.id},success:function(t,n){if(n.total>0){var a=[],i=n.items;i.map(function(e,t){a.push(e.lms_teacher_id)}),e.setState({items_rel:a})}},error:function(){}})},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){this.loadTeacher(1)},componentDidUpdate:function(){},render:function(){return e.createElement("div",null,e.createElement(i,{key:moment().valueOf(),items:this.state.items_rel}))}});return r}),define("components/elearning/rating-detail-item",["react"],function(e){var t=e.createClass({displayName:"ElearningRatingDetailItemComponent",getDefaultProps:function(){return{value:0,label:"",total:5}},componentWillUnmount:function(){},componentWillMount:function(){},initBar:function(){$(e.findDOMNode(this.refs.progress)).progress({value:this.props.value,total:this.props.total,autoSuccess:!1,showActivity:!1})},componentDidMount:function(){this.initBar()},componentDidUpdate:function(){this.initBar()},render:function(){return e.createElement("tr",null,e.createElement("td",{className:"collapsing"},e.createElement("strong",null,this.props.title)),e.createElement("td",{style:{padding:0}},e.createElement("div",{ref:"progress",className:"ui yellow small progress"},e.createElement("div",{className:"bar"}))),e.createElement("td",{className:"collapsing"},this.props.value))}});return t}),define("components/elearning/pagination-comment-item",["react","eventbus"],function(e,t){var n=e.createClass({displayName:"PaginationItemComponent",getDefaultProps:function(){return{page:0,current_page:1}},changePage:function(e){e.preventDefault();var n=$(e.target).attr("data-page");t.trigger("elearningdetailrating:changepage",n)},render:function(){return e.createElement("li",null,this.props.current_page==this.props.page?e.createElement("span",{className:"page-numbers current"},this.props.page):e.createElement("a",{className:"page-numbers",href:"javascript:void(0)",onClick:this.changePage,"data-page":this.props.page},this.props.page))}});return n}),define("components/elearning/pagination-comment",["react","helper","eventbus","components/elearning/pagination-comment-item"],function(e,t,n,a){var i=e.createClass({displayName:"PaginationCommentComponent",getDefaultProps:function(){return{total:0,perPage:9,current_page:1}},getInitialState:function(){var e=this;return{page_list:[],current_page:parseInt(e.props.current_page)>=1?e.props.current_page:1}},changePage:function(e){e.preventDefault();var t=$(e.target).attr("data-page");n.trigger("elearningdetailrating:changepage",t)},componentDidMount:function(){var e=parseInt(this.props.total);if(e>0){var t=Math.ceil(e/parseInt(this.props.perPage));if(t>1){for(var n=[],a=1;t>=a;a++)n.push(a);this.setState({page_list:n})}}},componentDidUpdate:function(){},render:function(){var t=this,n="";this.state.page_list.length&&(n="none");var i=this.state.page_list;if(i.length>5){var r=[];i.map(function(e,n){e>t.state.current_page-3&&e<t.state.current_page&&r.push(e),e==t.state.current_page&&r.push(e),e<t.state.current_page+3&&e>t.state.current_page&&r.push(e)}),i=r}return console.log(i),e.createElement("nav",{className:"learn-press-pagination elearning-navigation elearning-pagination",style:{textAlign:"right",marginTop:0,marginBottom:"16px"}},e.createElement("ul",{className:"page-numbers"},parseInt(t.state.current_page)>1?e.createElement("li",null,e.createElement("a",{className:"next page-numbers",href:"javascript:void(0)",onClick:this.changePage,"data-page":1},"←")):"",i.map(function(n,i){return e.createElement(a,{key:i+"_"+moment().valueOf(),current_page:t.state.current_page,page:n})}),parseInt(t.state.current_page)<this.state.page_list.length?e.createElement("li",null,e.createElement("a",{className:"next page-numbers",href:"javascript:void(0)",onClick:this.changePage,"data-page":t.state.page_list.length},"→")):""))}});return i}),define("components/elearning/detail/review",["react","pref","eventbus","language/course","collections/course-rating","components/elearning/comment-list","components/elearning/comment-post","components/elearning/rating-detail-item","components/elearning/pagination-comment"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ElearningDetailReviewComponent",getInitialState:function(){return{items:[],summary:[],items_summary:[],total:0,current_page:0,summary:[],total_rating:0,average:0}},getDefaultProps:function(){return{data:{}}},loadRatingSummary:function(e){var n=this;(new i).fetch({data:{company_id:t.get("cid"),lms_course_id:n.props.data.id,page:e,limit:50},success:function(e,t){var a=$.extend([],n.state.items_summary),i=Math.ceil(t.total/t.limit);if(t.total>0){var r=t.items;r.map(function(e,t){a.push(e)}),n.setState({items_summary:a})}i>t.currentpage?n.loadRatingSummary(parseInt(t.currentpage)+1):n.summary(a)},error:function(e,t){}})},loadRating:function(e){var n=this;(new i).fetch({data:{company_id:t.get("cid"),lms_course_id:n.props.data.id,page:e,limit:5},success:function(e,t){var a=[];if(Math.ceil(t.total/t.limit),t.total>0){var i=t.items;i.map(function(e,t){a.push(e)})}n.setState({items:a,total:t.total,current_page:t.currentpage})},error:function(e,t){}})},updateList:function(e,t){var n=this,a=$.extend([],n.state.items),i=$.extend([],n.state.items_summary);n.state.total,"add"==e&&(1==this.state.current_page&&a.unshift(t),i.unshift(t)),this.setState({items:a,items_summary:i,total:i.length}),this.summary(a)},summary:function(e){if(e.length){var t=[0,0,0,0,0],n=e.length,a=0;e.map(function(e,n){t[parseInt(e.rating)-1]+=1,a+=parseInt(e.rating)}),this.setState({summary:t,total_rating:n,average:Math.ceil(a/n)})}},allowcomment:function(t){t?($(e.findDOMNode(this.refs.line_1)).show(),$(e.findDOMNode(this.refs.line_2)).show(),this.refs.comment.show()):($(e.findDOMNode(this.refs.line_1)).hide(),$(e.findDOMNode(this.refs.line_2)).hide(),this.refs.comment.hide())},changepage:function(e){this.loadRating(e)},componentWillUnmount:function(){n.off("elearningdetailrating:updateList",this.updateList),n.off("elearningdetail:allowcomment",this.allowcomment),n.off("elearningdetailrating:changepage",this.changepage)},componentWillMount:function(){},componentDidMount:function(){this.loadRating(1),this.loadRatingSummary(1),$(e.findDOMNode(this.refs.rating)).rating({initialRating:4,interactive:!1,maxRating:5}),n.on("elearningdetailrating:updateList",this.updateList),n.on("elearningdetail:allowcomment",this.allowcomment),n.on("elearningdetailrating:changepage",this.changepage)},componentDidUpdate:function(){var t=this;$(e.findDOMNode(this.refs.rating)).rating({initialRating:t.state.average,interactive:!1,maxRating:5}),n.trigger("elearningdetail:updatecountrating",this.state.items_summary.length)},render:function(){var t=this;return e.createElement("div",null,e.createElement("div",{className:"ui stackable grid"},e.createElement("div",{className:"five wide column"},e.createElement("p",null,a.t("average_rating")),e.createElement("div",{className:"elearning-rating-box"},e.createElement("div",{className:"ui large yellow statistic elearning-rating-statistic"},e.createElement("div",{className:"value"},this.state.average),e.createElement("div",{ref:"rating",className:"ui rating elearning-rating"}),e.createElement("div",{className:"label"},this.state.total_rating," ",a.t("reviews"))))),this.state.summary.length?e.createElement("div",{className:"seven wide column"},e.createElement("p",null,a.t("detailed_rating")),e.createElement("div",{className:"elearning-rating-box"},e.createElement("table",{className:"ui very basic table elearning-rating-detail-list"},e.createElement("tbody",null,this.state.summary.map(function(n,i){return e.createElement(s,{key:i,value:n,total:t.state.total_rating,title:i+1+" "+a.t("rating")})}))))):""),e.createElement("div",{className:"ui divider",ref:"line_1"}," "),e.createElement(o,{data:this.props.data,ref:"comment"}),e.createElement("div",{className:"ui divider",ref:"line_2"}," "),this.state.total>0?e.createElement(l,{key:"page_"+moment().valueOf(),total:this.state.total,perPage:5,current_page:this.state.current_page}):null,e.createElement(r,{items:this.state.items}))}});return c}),define("components/elearning/label-price",["react","helper","companysetting"],function(e,t,n){var a=e.createClass({displayName:"ElearningLabelPriceComponent",getDefaultProps:function(){return{value:0}},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){$(e.findDOMNode(this.refs.price_sell)).autoNumeric(n.numberoption())},componentDidUpdate:function(){},render:function(){var n=this.props.data?t.strToNumber(this.props.data.price):0;return e.createElement("span",null,n>0?e.createElement("span",{ref:"price_sell",className:"elearning-price-sell"},n):e.createElement("span",{className:"elearning-price-free"},e.createElement("b",null,"Free")))}});return a}),define("components/elearning/item-horizontal",["react","helper","eventbus","models/course-teacher","components/elearning/label-price","language/elearning"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"ElearningItemHorizontalComponent",getDefaultProps:function(){return{data:{}}},update_teacher:function(t,n){var i=this,r=n[this.props.data.id];r&&$.inArray(t.id,r)>=0&&t.status==(new a).STATUS_ENABLE&&"0"==$(e.findDOMNode(i.refs.teacher_name)).attr("data-update")&&(t.avatar&&$(e.findDOMNode(i.refs.teacher)).attr("src",t.avatar),$(e.findDOMNode(i.refs.teacher_name)).text(t.name).attr("data-update","1"),$(e.findDOMNode(this.refs.teacher_div)).show())},windowResizeHandle:function(){$(e.findDOMNode(this)).fadeIn(1e3)},componentWillUnmount:function(){$(window).off("resize",this.windowResizeHandle),n.off("elearningitemverical:updateteacher",this.update_teacher)},componentWillMount:function(){},componentDidMount:function(){$(e.findDOMNode(this.refs.rating)).rating({initialRating:this.props.data.avgrating,interactive:!1,maxRating:5}),$(e.findDOMNode(this)).hide().fadeIn(1e3),$(window).on("resize",this.windowResizeHandle),n.on("elearningitemverical:updateteacher",this.update_teacher)},componentDidUpdate:function(){},render:function(){var t=this;return e.createElement("div",{className:"item elearning-item"},e.createElement("a",{href:"#elearning/detail/"+this.props.data.id,className:"ui image elearning-thumb"},e.createElement("img",{src:this.props.data.thumbnail})),e.createElement("div",{className:"content"},e.createElement("a",{href:"#elearning/detail/"+this.props.data.id,className:"header"},this.props.data.name),e.createElement("div",{className:"meta",style:{textAlign:"left"}},e.createElement("div",{className:"ui relaxed divided horizontal list"},e.createElement("div",{className:"top aligned item",ref:"teacher_div"},e.createElement("img",{className:"ui avatar image","data-update":"0",ref:"teacher"}),e.createElement("div",{className:"content"},e.createElement("div",{className:"description"},r.t("teacher")),e.createElement("div",{className:"header elearning-uppercase",ref:"teacher_name","data-update":"0"}," - "))),e.createElement("div",{
className:"top aligned item"},e.createElement("div",{className:"content"},e.createElement("div",{className:"description"},r.t("review")),e.createElement("div",{className:"header elearning-uppercase"},e.createElement("span",{ref:"rating",className:"ui rating elearning-rating","data-rating":this.props.data.avgrating}),"( ",this.props.data.count_comment+" "+r.t("review"),")"))),e.createElement("div",{className:"top aligned item"},e.createElement("div",{className:"content"},e.createElement("div",{className:"description"},this.props.data.count_enroll+" "+r.t("students")))))),e.createElement("div",{className:"description elearning-item-horizotal-description"},e.createElement("div",{dangerouslySetInnerHTML:{__html:t.props.data.description}})),e.createElement("div",{className:"extra"},e.createElement("a",{href:"#elearning/detail/"+this.props.data.id,className:"right floated elearning-read-more elearning-uppercase"},r.t("read_more")),e.createElement(i,{data:this.props.data}))))}});return o}),define("components/elearning/item-vertical",["react","helper","eventbus","models/course-teacher","language/elearning","components/elearning/label-price"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"ElearningItemVerticalComponent",getDefaultProps:function(){return{data:{}}},windowResizeHandle:function(){$(e.findDOMNode(this)).fadeIn(1e3)},update_teacher:function(n){var i=this;n.lms_course_id==this.props.data.id&&n.status==(new a).STATUS_ENABLE&&($(e.findDOMNode(i.refs.teacher)).empty().append(e.renderToString(e.createElement("img",{className:"ui avatar image",src:t.getAvatarPath(n.avatar)}))),$(e.findDOMNode(this.refs.teacher_name)).text(n.name),$(e.findDOMNode(i.refs.teacher)).show())},componentWillUnmount:function(){$(window).off("resize",this.windowResizeHandle),n.off("elearningitemverical:updateteacher",this.update_teacher)},componentWillMount:function(){},componentDidMount:function(){$(e.findDOMNode(this)).hide().fadeIn(1e3),$(window).on("resize",this.windowResizeHandle),n.on("elearningitemverical:updateteacher",this.update_teacher)},componentDidUpdate:function(){},render:function(){return e.createElement("div",{className:"ui card elearning-card"},e.createElement("div",{className:"image elearning-course-cover"},e.createElement("img",{src:this.props.data.thumbnail}),e.createElement("a",{href:"#elearning/detail/"+this.props.data.id,className:"elearning-read-more elearning-uppercase"},i.t("read_more"))),e.createElement("div",{className:"content"},e.createElement("div",{className:"meta",ref:"meta"},e.createElement("div",{className:"author"},e.createElement("div",{className:"ui mini circular image",ref:"teacher",style:{display:"none"}}),e.createElement("div",{ref:"teacher_name"}))),e.createElement("a",{href:"#elearning/detail/"+this.props.data.id,className:"header"},this.props.data.name)),e.createElement("div",{className:"extra content",style:{borderTop:"1px solid #d4d4d5 !important"}},e.createElement("span",{className:"right floated"},e.createElement(r,{data:this.props.data})),e.createElement("span",null,e.createElement("i",{className:"tc-users icon"})," ",t.numberFormat(this.props.data.count_enroll)),"  ",e.createElement("span",null,e.createElement("i",{className:"tc-comments icon"})," ",t.numberFormat(this.props.data.count_comment))))}});return o}),define("components/elearning/learn/lecture-item",["react","backbone","querystring","helper","pref","eventbus","models/course-enroll","collections/course-lecture","collections/course-lecture-content","collections/course-chapter","models/course-lecture","language/courselecture","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"CourseLectureItemComponent",getInitialState:function(){return{items:[],enroll:{},item:[]}},getLink:function(){return"#elearning/learn/course/"+this.props.data.lms_course_id+"/lecture/"+this.props.data.id},updateEnroll:function(){var e=this.props.enroll;$.isEmptyObject(e)||(e.current_lecture_id=this.props.data.id,e.user_id=e.user_id,new o({id:e.id}).save(e,{success:function(){},error:function(){}}))},componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidMount:function(){$.isEmptyObject(this.props.enroll)?1==this.props.data.is_free?($(e.findDOMNode(this.refs.btn_preview)).show().attr("href",this.getLink()),$(e.findDOMNode(this.refs.link_study)).removeAttr("title")):($(e.findDOMNode(this.refs.link_study)).attr("style","color: #999999"),$(e.findDOMNode(this.refs.link_study)).removeAttr("href",this.getLink())):($(e.findDOMNode(this.refs.link_study)).attr("href",this.getLink()),$(e.findDOMNode(this.refs.link_study)).removeAttr("title"))},render:function(){var t="",a="";parseInt(n.get("lecture"))==this.props.data.id&&(t="activerow",a="activerow-bg");var i="tc-checkboxcircle";return this.props.data.type==(new d).TYPE_LECTURE&&(i="tc-file"),e.createElement("tr",{className:"top aligned "+a,"data-id":this.props.data.id,"data-free":this.props.data.is_free},e.createElement("td",{className:"collapsing "+t},e.createElement("i",{className:i+" elearning-format-icon"})),e.createElement("td",{className:"collapsing"},this.props.index,"."),e.createElement("td",null,e.createElement("strong",null," ",e.createElement("a",{href:"javascript:void(0)",onClick:this.updateEnroll,title:u.t("title_enroll_note"),style:{color:"black"},ref:"link_study"},this.props.data.title," "))),e.createElement("td",{width:"95"},"  ",e.createElement("a",{style:{display:"none"},href:"javascript:void(0)",ref:"btn_preview",className:"ui green tiny label"},u.t("study"))))}});return p}),define("components/elearning/learn/lecture-list",["react","backbone","querystring","helper","pref","eventbus","components/elearning/learn/lecture-item","language/courselecture","language/default"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"CourseLectureListComponent",getInitialState:function(){return{items:[],item:[]}},getDefaultProps:function(){return{active:"active"}},componentDidUpdate:function(){},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){},render:function(){var t=this,n=0;return e.createElement("div",{className:"content"+this.props.active},e.createElement("table",{className:"ui unstackable very basic table elearning-menu-learn",id:"elearning-learn-menulist"},e.createElement("tbody",null,t.props.lecture_list.map(function(a,i){return a.lms_course_chapter_id==t.props.chapter.id?(n+=1,e.createElement(o,{key:a.id,index:n,data:a,enroll:t.props.enroll})):void 0}))))}});return c}),define("components/elearning/learn/chapter-item",["react","backbone","helper","pref","eventbus","language/courselecture","language/default","components/elearning/learn/lecture-list"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"CourseChapterItemComponent",getInitialState:function(){return{items:[],active:this.props.active,item:[]}},getDefaultProps:function(){return{active:"active"}},componentDidUpdate:function(){$(e.findDOMNode(this.refs.chapter_list)).accordion()},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){$(e.findDOMNode(this.refs.chapter_list)).accordion()},render:function(){var t=this;return e.createElement("div",{className:"ui active accordion elearning-accordion",ref:"chapter_list"},e.createElement("div",{className:"title elearning-uppercase "+this.state.active},e.createElement("i",{className:"tc-right icon noboder"}),this.props.data.name),e.createElement(s,{active:t.state.active,enroll:t.props.enroll,lecture_list:t.props.lecture_list,chapter:t.props.data}))}});return l}),define("components/elearning/learn/chapter-list",["react","backbone","helper","pref","eventbus","language/courselecture","language/default","models/course-lecture","models/course-lecture-content","models/course-chapter","models/course-lecture","models/course-lecture-content","collections/course-lecture","collections/course-lecture-content","collections/course-chapter","components/elearning/learn/lecture-list","components/elearning/learn/chapter-item"],function(e,t,n,a,i,r,o,s,l,c,c,d,u,m,p,h,f){var g=e.createClass({displayName:"CourseChapterListComponent",getInitialState:function(){return{lecture_list:[],chapter_list:[]}},componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidMount:function(){},render:function(){var t=this;return e.createElement("span",null,t.props.chapter_list.map(function(n,a){return e.createElement(f,{key:n.id+"_"+moment().valueOf(),data:n,enroll:t.props.enroll,lecture_list:t.props.lecture_list,chapter_list:t.props.chapter_list})}))}});return g}),define("components/elearning/learn/lecture-content-quiz-answer-item",["react","backbone","helper","pref","querystring","eventbus","collections/course-lecture-content","models/course-lecture-content","language/courselecture","language/default"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"CourseLectureContentQuizAnswerItemComponent",getInitialState:function(){return{}},getValue:function(){var t=this,n={type:t.props.type,value:""};return"text"!=this.props.type?n.value=$(e.findDOMNode(this.refs.answer)).checkbox("is checked"):n.value=$(e.findDOMNode(this.refs.answer)).val(),n},componentWillMount:function(){},componentDidUpdate:function(){},componentDidMount:function(){var t=this;if("text"!=this.props.type){$(e.findDOMNode(t.refs.answer)).checkbox();var n=this.props.answer.selected_option_index;n&&n.length&&n.map(function(n,a){n==t.props.index&&$(e.findDOMNode(t.refs.answer)).checkbox("set checked")})}else $(e.findDOMNode(this.refs.answer)).val(this.props.answer.free_text)},render:function(){return e.createElement("div",{className:"item"},e.createElement("div",{className:"content"},e.createElement("div",{className:"description"},"radio"==this.props.type?e.createElement("div",{className:"ui radio checkbox",ref:"answer"},e.createElement("input",{type:"radio",name:"radio"}),e.createElement("label",null,this.props.data.name_answer)):null,"checkbox"==this.props.type?e.createElement("div",{className:"ui checkbox",ref:"answer"},e.createElement("input",{type:"checkbox"}),e.createElement("label",null,this.props.data.name_answer)):null,"text"==this.props.type?e.createElement("textarea",{style:{width:"100%"},rows:4,ref:"answer"}):null)))}});return d}),define("components/elearning/learn/lecture-content-quiz-answer-list",["react","backbone","helper","pref","querystring","eventbus","collections/course-quiz-question","models/course-quiz-question","components/elearning/learn/lecture-content-quiz-answer-item","language/courselecture","language/default"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"CourseLectureContentQuizAnswerListComponent",getInitialState:function(){return{next_lecture_name:"",next_lecture_url:"",option_list:[],type:"checkbox"}},getAnswer:function(){var e=this,t={question_id:e.props.data.id,free_text:"",selected_option_index:[],selected_option_value:[]};return this.state.option_list.map(function(n,a){var i="row_"+a;if(e.refs[i]){var r=e.refs[i].getValue();"text"==r.type?t.free_text=r.value:r.value&&(t.selected_option_index.push(a),t.selected_option_value.push(n.name_answer))}}),t},componentWillMount:function(){},componentDidUpdate:function(){},componentDidMount:function(){var e=[],t="checkbox";this.props.data.type!=(new s).TYPE_TEXTBOX&&this.props.data.options.length?(e=this.props.data.options,this.props.data.type==(new s).TYPE_SINGLE_CHOICE&&(t="radio")):(e.push({}),t="text"),this.setState({option_list:e,type:t})},render:function(){var t=this;return e.createElement("div",{className:"ui middle aligned divided list question-list",style:{clear:"both"}},e.createElement("div",{className:"item"},e.createElement("div",{className:"content"},e.createElement("div",{className:"header"},e.createElement("h3",null,e.createElement("b",null," ",e.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.index+1+". "+t.props.data.content}})))))),this.state.option_list.map(function(n,a){return e.createElement(l,{data:n,index:a,answer:t.props.current_answer,ref:"row_"+a,key:a+"_"+moment().valueOf(),type:t.state.type})}))}});return u}),define("components/elearning/learn/lecture-content-quiz-answer",["react","backbone","helper","pref","querystring","eventbus","collections/course-quiz-take-answer","collections/course-quiz-take","models/course-quiz-take","models/course-quiz-take-answer","components/elearning/learn/lecture-content-quiz-answer-list","language/courselecture","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"CourseLectureContentQuizAnswerComponent",getInitialState:function(){return{current_question:{},current_take:this.props.current_take,index_current_question:0,current_question_answer:{},take_answer_list:this.props.take_answer_list,next_lecture_name:"",next_lecture_url:""}},finish:function(e){var t=($.extend({},this.state.current_take),$(e.target));if(this.refs.answer_list){var n=this.refs.answer_list.getAnswer();this.updateAnswer(n,t,!0)}},getCurrentTakeAnswer:function(e,t){var n={},a=this;return a.state.take_answer_list.length&&a.state.take_answer_list.map(function(a,i){a.lms_quiz_take_id==e.id&&a.lms_quiz_id==e.lms_quiz_id&&a.lms_quiz_question_id==t&&(n=a)}),n},getCurrentQuestion:function(){var t=this;if(this.props.question_list)if(this.props.question_list.length){$(e.findDOMNode(this.refs.empty)).hide();var n=this.props.question_list[0],a=$.extend({},t.state.current_take);$.isEmptyObject(a)||this.props.question_list.map(function(e,t){e.id==a.current_question_id&&(n=e)}),t.setState({current_question:n})}else $(e.findDOMNode(this.refs.empty)).show()},getQuetionByAction:function(e,t){e=parseInt(e),"next"==t?e+=1:"back"==t?e-=1:e=parseInt(t);var n={};return this.props.question_list[e]&&(n={current_question:this.props.question_list[e],index_current_question:e}),n},updatedata:function(e,t,n){if(this.state[n]){var a=$.extend([],this.state[n]);switch(e){case"update":a.map(function(e,n){t.id==e.id&&(a[n]=t)});break;case"add":a.unshift(t);break;case"delete":a.map(function(e,n){e.id==t.id&&delete a[n]})}return a}},changeQuestion:function(e){var t=$(e.target);if(t.is("div")&&(t=t.closest("a")),this.refs.answer_list){var n=this.refs.answer_list.getAnswer();this.updateAnswer(n,t)}},updateAnswer:function(t,a,i){var o=this,s=$.extend({},o.state.current_take);if(!$.isEmptyObject(s)&&!$(e.findDOMNode(this.refs.div_btn)).hasClass("loading")){var l=this.getCurrentTakeAnswer(s,t.question_id),d=$.extend({},l);d.id=l.id,d.free_text=t.free_text,d.question_id=t.question_id,d.selected_option_index=t.selected_option_index,d.selected_option_value=t.selected_option_value;var p={id:d.id};parseInt(p.id)>0&&(n.showLoader(),this.toggleLoading("add"),new c(p).save(d,{success:function(e,t){var n=a.attr("data-action"),l=o.state.index_current_question;$(".ui.button",o.getDOMNode()).show();var c=o.getQuetionByAction(l,n),d=!1,u=o.getQuetionByAction(l+1,n);$.isEmptyObject(u)||(d=!0),d||a.hide();var m=o.updatedata("update",t,"take_answer_list");c.take_answer_list=m,o.updateCountDoing(m),o.setState(c),i&&r.trigger("elearningquiz:finish",s)},error:function(e,t){n.notifyError(t,u,m.t("error_update"))},complete:function(e,t){n.hideLoader(),o.toggleLoading("remove")}}))}},toggleLoading:function(t){"add"==t?($(e.findDOMNode(this.refs.div_btn)).addClass("loading"),$(e.findDOMNode(this.refs.div_btn)).find("span").addClass("loading")):($(e.findDOMNode(this.refs.div_btn)).removeClass("loading"),$(e.findDOMNode(this.refs.div_btn)).find("span").removeClass("loading"))},updateCountDoing:function(e){var t=0;e.map(function(e,n){r.trigger("elearningquiz:changedoing",e),e.is_correct!=(new c).CORRECT_NEW&&(t+=1)}),r.trigger("elearningquiz:updatecountdoing",t)},componentWillUnmount:function(){r.off("elearningcontentquizanswer:changeQuestion",this.changeQuestion)},componentWillMount:function(){},componentDidUpdate:function(){},componentDidMount:function(){this.getCurrentQuestion(),this.updateCountDoing(this.state.take_answer_list),r.on("elearningcontentquizanswer:changeQuestion",this.changeQuestion)},render:function(){var t=this,n={};return this.state.take_answer_list.length&&this.state.take_answer_list.map(function(e,a){e.lms_quiz_question_id==t.state.current_question.id&&(n=e)}),e.createElement("div",null,$.isEmptyObject(t.state.current_question)?null:e.createElement(d,{ref:"answer_list",key:t.state.current_question.id,current_answer:n,index:t.state.index_current_question,data:t.state.current_question}),$.isEmptyObject(t.state.current_question)?null:e.createElement("div",{ref:"div_btn",className:""},e.createElement("span",{className:"ui button black",style:{display:"none"},onClick:this.changeQuestion,"data-action":"back"},"Quay lại"),e.createElement("span",{className:"ui button black",onClick:this.changeQuestion,"data-action":"next"},"Tiếp"),e.createElement("br",null),e.createElement("br",null),e.createElement("span",{className:"ui button green ",style:{float:"right"},onClick:this.finish},"Hoàn thành trắc nghiệm")),e.createElement("b",{ref:"empty",style:{display:"none"}},"Trắc nghiệm chua có câu hỏi"))}});return p}),define("components/elearning/learn/lecture-content-quiz-summary",["react","backbone","helper","pref","querystring","eventbus","collections/course-lecture-content","models/course-quiz-take-answer","models/course-quiz","language/coursequiztakeanswer","language/default"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"CourseLectureContentQuizSummaryComponent",getInitialState:function(){return{next_lecture_name:"",next_lecture_url:"",empty_count:0,correct_count:0,fail_count:0,point:0,total_point:0,time:"00:00"}},componentWillMount:function(){},componentDidUpdate:function(){},componentDidMount:function(){var e=0,t=0,a=0,i=0,r=0;this.props.take_answer_list.map(function(o,l){o.is_correct==(new s).CORRECT_NEW&&(e+=1),o.is_correct==(new s).CORRECT_PASS&&(t+=1,i=n.calcDecimal(i,o.mark,"+",2)),o.is_correct==(new s).CORRECT_FAIL&&(a+=1),r=n.calcDecimal(r,o.mark,"+",2)});var o=this.state.time;if(!$.isEmptyObject(this.props.current_take)){var l=this.props.current_take.date_ended;this.props.current_take.date_finish>0&&(l=this.props.current_take.date_finish);var c=l-this.props.current_take.date_started,d=0;c>=60&&(d=Math.floor(c/60).toFixed(0));var u=c%60;d=d>9?d:"0"+d,u=u>9?u:"0"+u,o=d+":"+u}r=r%1==0?parseFloat(r).toFixed(0):parseFloat(r).toFixed(2).replace(/0+$/,""),i=i%1==0?parseFloat(i).toFixed(0):parseFloat(i).toFixed(2).replace(/0+$/,""),this.setState({empty_count:e,correct_count:t,fail_count:a,point:i,total_point:r,time:o})},render:function(){var t="",n="",a="";return this.props.quiz.mark_type==(new l).MARKTYPE_POINT?(n=this.state.point+"/"+this.state.total_point,a=" "+c.t("point"),t=c.t("you_have_reached")+n+a):(n=this.state.correct_count+"/"+this.props.take_answer_list.length,a=c.t("answer"),t=c.t("you_have_question")+n+a),e.createElement("div",{className:"lp-group-content-wrap quiz-results"},e.createElement("h3",{className:"result-title"},t),e.createElement("div",{className:"result-summary"},e.createElement("div",{className:"result-field correct"},e.createElement("span",null,c.t("CORRECT_PASS")),e.createElement("span",{className:"value"},this.state.correct_count)),e.createElement("div",{className:"result-field wrong"},e.createElement("span",null,c.t("CORRECT_FAIL")),e.createElement("span",{className:"value"},this.state.fail_count)),e.createElement("div",{className:"result-field empty"},e.createElement("span",null,c.t("CORRECT_NEW")),e.createElement("span",{className:"value"},this.state.empty_count)),e.createElement("div",{className:"result-field points"},e.createElement("span",null,c.t("result")),e.createElement("span",{className:"value",style:{fontSize:"15px"}},n)),e.createElement("div",{className:"result-field time"},e.createElement("span",null,c.t("time")),e.createElement("span",{className:"value"},this.state.time))),e.createElement("div",{className:"clearfix"}),e.createElement("div",{className:1==parseInt(this.props.current_take.is_pass)?"ui success message":"ui error message"},c.t("your_quiz_grade")," ",e.createElement("b",null,1==parseInt(this.props.current_take.is_pass)?c.t("quiz_pass"):c.t("quiz_fail")),". ",c.t("quiz_required")," ",e.createElement("b",null,this.props.quiz.mark_to_pass," ",a)),e.createElement("div",{className:"clearfix"}))}});return u}),define("components/elearning/learn/lecture-question-option-item",["react","backbone","models/course-quiz-question"],function(e,t,n){var a=e.createClass({displayName:"QuestionOptionItemComponent",getInitialState:function(){return{}},getDefaultProps:function(){return{}},setChecked:function(){var t=this;$(e.findDOMNode(this.refs.select)).checkbox(),this.props.take_answer_list.length&&this.props.take_answer_list.map(function(n,a){if(n.lms_quiz_question_id==t.props.question.id){var i=n.selected_option_index;i.map(function(n,a){n==t.props.index&&$(e.findDOMNode(t.refs.select)).checkbox("set checked")})}})},componentWillUnmount:function(){},componentWillMount:function(){},componentDidUpdate:function(){this.setChecked()},componentDidMount:function(){this.setChecked()},render:function(){return e.createElement("div",{className:"item"},e.createElement("div",{className:"middle aligned content"},this.props.type==(new n).TYPE_MULTIPLE?e.createElement("div",{className:"ui checkbox disabled",ref:"select"},e.createElement("input",{type:"checkbox",name:"question_"+this.props.value}),e.createElement("label",null,this.props.index+1,". ",this.props.value)):e.createElement("div",{className:"ui radio checkbox disabled",ref:"select"},e.createElement("input",{type:"radio",name:"question_"+this.props.value}),e.createElement("label",null,this.props.index+1,". ",this.props.value))))}});return a}),define("components/elearning/learn/lecture-question-option-item-text",["react","backbone","models/course-quiz-question"],function(e,t,n){var a=e.createClass({displayName:"QuestionOptionItemTextComponent",getInitialState:function(){return{}},getDefaultProps:function(){return{}},setText:function(){var t=this;$(e.findDOMNode(this.refs.select)).checkbox(),this.props.take_answer_list.length&&this.props.take_answer_list.map(function(n,a){n.lms_quiz_question_id==t.props.question.id&&$(e.findDOMNode(t.refs.select)).text(n.free_text)})},componentWillUnmount:function(){},componentWillMount:function(){},componentDidUpdate:function(){this.setText()},componentDidMount:function(){this.setText()},render:function(){return e.createElement("div",{className:"item"},e.createElement("div",{className:"middle aligned content",ref:"select"},this.props.value))}});return a}),define("components/elearning/learn/lecture-question-option-list",["react","backbone","models/course-quiz-question","components/elearning/learn/lecture-question-option-item","components/elearning/learn/lecture-question-option-item-text"],function(e,t,n,a,i){var r=e.createClass({displayName:"QuestionOptionItemListComponent",getInitialState:function(){return{}},getDefaultProps:function(){return{}},componentWillUnmount:function(){},componentWillMount:function(){},componentDidUpdate:function(){},componentDidMount:function(){$(e.findDOMNode(this.refs.select)).checkbox()},render:function(){var t=this;return e.createElement("div",{className:"description",style:{marginTop:"16px"}},e.createElement("div",{className:"ui divided items"},this.props.data.type==(new n).TYPE_TEXTBOX?e.createElement(i,{key:"",take_answer_list:t.props.take_answer_list,question:t.props.data}):null,this.props.data.options.map(function(n,i){return e.createElement(a,{type:t.props.data.type,index:i,key:i,question:t.props.data,take_answer_list:t.props.take_answer_list,value:n.name_answer})})))}});return r}),define("components/elearning/learn/quiz-question-item",["react","backbone","helper","pref","querystring","eventbus","collections/course-lecture-content","models/course-quiz-question","models/course-quiz-take-answer","models/course-quiz-take","components/elearning/learn/lecture-question-option-list","language/courselecture","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"QuizItemComponent",getInitialState:function(){return{next_lecture_name:"",next_lecture_url:""}},changecolor:function(t){if(t.lms_quiz_question_id==this.props.data.id){var n=$(e.findDOMNode(this.refs.icon)),a=n.attr("class");t.is_correct==(new l).CORRECT_FAIL&&n.attr("class",a+" fail-answer"),t.is_correct==(new l).CORRECT_PASS&&n.attr("class",a+" correct-answer"),t.is_correct==(new l).CORRECT_NEW&&n.attr("class",a+" empty-answer")}},changedoing:function(t){t.lms_quiz_question_id==this.props.data.id&&(t.is_correct!=(new l).CORRECT_NEW?$(e.findDOMNode(this.refs.name_answer)).attr("style","color: black"):$(e.findDOMNode(this.refs.name_answer)).attr("style",""))},changeQuestion:function(e){r.trigger("elearningcontentquizanswer:changeQuestion",e)},componentWillUnmount:function(){r.off("elearningquiz:changedoing",this.changedoing),r.off("elearningquiz:quizlist",this.changecolor)},componentWillMount:function(){},componentDidUpdate:function(){},componentDidMount:function(){r.on("elearningquiz:changedoing",this.changedoing),r.on("elearningquiz:quizlist",this.changecolor)},render:function(){var t=this,n=!1;return this.props.take.status==(new c).STATUS_FINISH&&(n=!0),e.createElement("div",{className:"item"},this.props.data.type==(new s).TYPE_TEXTBOX?e.createElement("i",{ref:"icon",className:"icon tc-filetext"}):this.props.data.type==(new s).TYPE_SINGLE_CHOICE?e.createElement("i",{ref:"icon",className:"icon tc-checkboxcircle"}):e.createElement("i",{ref:"icon",className:"icon tc-checkboxsquare"}),e.createElement("div",{className:"content",style:{width:"100%"}},e.createElement("div",{className:"header"},this.props.start?e.createElement("a",{ref:"name_answer",onClick:this.changeQuestion,"data-action":this.props.index},e.createElement("div",{style:{height:"19px",overflow:"hidden"},dangerouslySetInnerHTML:{__html:this.props.index+1+". "+t.props.data.content}})):e.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.index+1+". "+t.props.data.content}})),n?e.createElement(d,{data:this.props.data,take_answer_list:t.props.take_answer_list}):null))}});return p}),define("components/elearning/learn/quiz-question-list",["react","backbone","helper","pref","querystring","eventbus","collections/course-lecture-content","models/course-lecture-content","components/elearning/learn/quiz-question-item","language/coursequiz","language/default"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"QuizListComponent",getInitialState:function(){return{next_lecture_name:"",next_lecture_url:""}},changecolor:function(){},render:function(){var t=this;return e.createElement("div",{className:"ui middle aligned divided list question-list"},e.createElement("div",{className:"item"},e.createElement("div",{className:"content"},e.createElement("div",{className:"header"},e.createElement("h3",null,c.t("listquestion"))))),this.props.question_list.map(function(n,a){return e.createElement(l,{data:n,index:a,key:n.id,take:t.props.take,take_answer_list:t.props.take_answer_list,start:t.props.start})}))}});return u}),define("components/elearning/learn/lecture-content-quiz",["react","backbone","helper","pref","querystring","eventbus","collections/course-quiz-take-answer","collections/course-quiz-take","models/course-quiz-take","models/course-quiz-take-answer","components/elearning/learn/lecture-content-quiz-summary","components/elearning/learn/lecture-content-quiz-answer","components/elearning/learn/quiz-question-list","language/coursequiz","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"CourseLectureContentQuizComponent",getInitialState:function(){return{current_lecture:{},current_take:{},take_list:[],take_answer_list:[],start:!1,new:!0,question:[],next_lecture_name:"",next_lecture_url:""}},getDefaultProps:function(){return{quiz_question_list:[]}},startTake:function(){var e=this;n.showLoader();var t=0;this.state.question.length&&(t=this.state.question[0].id),(new l).save({company_id:a.get("cid"),creator_id:a.get("uid"),lms_course_id:e.props.quiz.lms_course_id,lms_quiz_id:e.props.quiz.id,status:(new l).STATUS_DOING,date_started:moment().unix(),current_question_id:t},{success:function(t,n){var a=$.extend([],e.state.take_list);a.push(n),e.getTakeAnswer(1,n),e.setState({take_list:a,current_take:n,start:!0,new:!1})},error:function(e,t){n.notifyError(t,p,h.t("error_add"))},complete:function(e,t){n.hideLoader()}})},autoFinish:function(e){var t=this;n.showLoader();var a=e.date_ended;if(!$.isEmptyObject(e)){var i=$.extend({},e);i.status=(new l).STATUS_FINISH,i.date_finish=a,new l({id:i.id}).save(i,{success:function(e,n){var a=$.extend([],t.state.take_list);a.map(function(e,t){e.id==n.id&&(a[t]=n)}),t.getTakeOnTime(a)},error:function(e,t){n.notifyError(t,p,h.t("error_add"))},complete:function(e,t){n.hideLoader()}})}},finish:function(e,t){var a=this;if(n.showLoader(),t||(t=moment().unix()),!$.isEmptyObject(e)){var i=$.extend({},e);i.status=(new l).STATUS_FINISH,i.date_finish=t,new l({id:i.id}).save(i,{success:function(e,t){var n=$.extend([],a.state.take_list);n.map(function(e,a){e.id==t.id&&(n[a]=t)}),a.getTakeOnTime(n)},error:function(e,t){n.notifyError(t,p,h.t("error_add"))},complete:function(e,t){n.hideLoader(),clearInterval(a.countdown),clearInterval(a.timechangecolor)}})}},getTakeOnTime:function(e){var t=!1,n=!0,a={},i={},r=0;e.length?(e.map(function(e,t){var n=0;e.status==(new l).STATUS_DOING&&(n=moment().unix()-e.date_ended,0>n&&(a=e,r=n))}),i=e[0]):t=!0,$.isEmptyObject(a)&&(n=!1,a=i),$.isEmptyObject(a)||(a.status!=(new l).STATUS_FINISH&&r>=0&&this.autoFinish(a),this.getTakeAnswer(1,a)),this.setState({take_list:e,new:t,start:n,current_take:a})},getTake:function(e){var t=this;(new s).fetch({data:{company_id:a.get("cid"),creator_id:a.get("uid"),lms_quiz_id:t.props.quiz.id,order_by:"id",order_type:"DESC",page:1},success:function(e,n){var a=$.extend([],t.state.take_list),i=Math.ceil(n.total/n.limit);if(n.total>0){var r=n.items;r.map(function(e,t){a.push(e)}),t.getTakeOnTime(a)}i>n.currentpage&&t.getTake(parseInt(n.currentpage)+1)},error:function(){}})},getTakeAnswer:function(e,t){var n=this;$.isEmptyObject(t)||(new o).fetch({data:{company_id:a.get("cid"),creator_id:a.get("uid"),page:1,lms_quiz_take_id:t.id},success:function(t,a){var i=[];e>1&&(i=$.extend([],n.state.take_answer_list));var r=Math.ceil(a.total/a.limit);if(a.total>0){var o=a.items;o.map(function(e,t){i.push(e)}),n.setState({take_answer_list:i})}r>a.currentpage&&n.getTakeAnswer(parseInt(a.currentpage)+1)},error:function(){}})},appendNext:function(){var t="",n="";if($(e.findDOMNode(this.refs.content)),$("#elearning-left-column").length){var a=$("#elearning-left-column"),i=a.find("tr.activerow-bg"),r=a.find("tr"),o=[],s=(i.attr("data-free"),i.attr("data-id"));if($.each(r,function(e,t){o.push({id:$(t).attr("data-id"),free:$(t).attr("data-free"),index:e})}),o.length){var l=-1,c=0,d="0";o.map(function(e,t){parseInt(s)==parseInt(e.id)&&0>l&&(l=parseInt(e.index)),parseInt(s)!=parseInt(e.id)&&parseInt(e.index)>l&&l>=0&&0==c&&(c=e.id,d=e.free.toString())})}c>0&&(t=this.getLink()+c,"1"!=d&&$.isEmptyObject(this.props.enroll)||(this.props.lecture_list.map(function(e,t){e.id==c&&(n=e.title)}),""!=n&&this.setState({next_lecture_url:t,next_lecture_name:n})))}},countdown:{},timechangecolor:{},initCountDown:function(){var t=moment().unix()+n.calcDecimal(this.props.quiz.duration,60,"*")+1;if(!$.isEmptyObject(this.state.current_take))var t=this.state.current_take.date_ended+1;var a=1e3*t,i=this;this.countdown=setInterval(function(){function t(){--d,0>d&&(d=c.length-1);for(var e=0;e<u.length;e++)u[e].style.color=c[(d+e)%c.length]}var n=(new Date).getTime(),r=a-n,o=Math.floor(r/6e4),s=Math.floor(r%6e4/1e3);10>o&&(o="0"+o),10>s&&(s="0"+s);var l=o+":"+s;if($(e.findDOMNode(i.refs.countdown)).text(l),1e4>=r&&r>0&&"object"==typeof i.timechangecolor){var c=["red","#ffb606"],d=0,u=$(e.findDOMNode(i.refs.countdown));i.timechangecolor=setInterval(t,100);
}0>r&&(clearInterval(this.timechangecolor),clearInterval(this.countdown),$(e.findDOMNode(i.refs.countdown)).text(p.t("over_time")),$(e.findDOMNode(i.refs.countdown)).attr("style","color: '#ffb606'"),i.finish(i.state.current_take,i.state.current_take.date_ended))},1e3)},getLink:function(){return"#elearning/learn/course/"+i.get("course")+"/lecture/"},updatecountdoing:function(t){this.refs.count_doing&&$(e.findDOMNode(this.refs.count_doing)).text(t+"/")},componentWillMount:function(){var e=this,t=[];this.props.hasOwnProperty("quiz_question_list")&&this.props.quiz_question_list&&this.props.quiz_question_list.map(function(n,a){n.lms_quiz_id==e.props.quiz.id&&t.push(n)}),this.setState({question:t})},componentWillUnmount:function(){r.off("elearningquiz:finish",this.finish),r.off("elearningquiz:updatecountdoing",this.updatecountdoing)},componentDidUpdate:function(){this.state.start&&"object"==typeof this.countdown&&this.initCountDown(),this.state.start||this.state.new||this.state.take_answer_list.map(function(e,t){r.trigger("elearningquiz:quizlist",e)})},componentDidMount:function(){this.getTake(1),this.state.start&&this.initCountDown(),r.on("elearningquiz:finish",this.finish),r.on("elearningquiz:updatecountdoing",this.updatecountdoing)},render:function(){var t=this,n=parseInt(this.props.quiz.duration);9>n&&(n="0"+n);var a=0;this.state.take_answer_list.map(function(e,t){e.is_correct!=(new c).CORRECT_NEW&&(a+=1)});var i="0/";return a>0&&(i=a+"/"),e.createElement("div",{id:"lecture-content"},e.createElement("div",{ref:"content",id:"elearning-quiz"},e.createElement("div",{className:"lesson-heading"},this.props.quiz.title),e.createElement("div",{className:"lesson-description"},this.props.lecture.summary),e.createElement("div",{className:"lesson-info"},e.createElement("div",{className:"quiz-total"},e.createElement("div",{className:"quiz-text"},e.createElement("i",{className:"icon tc-checkboxcircle"}," ")," ",e.createElement("span",{className:"number"},t.state.start?e.createElement("span",{ref:"count_doing"},i):null,this.state.question.length," ")," ",p.t("question"))),e.createElement("div",{className:"quiz-countdown quiz-timer"},e.createElement("div",{id:"quiz-countdown",className:"quiz-countdown","data-value":"100"},e.createElement("div",{className:"countdown"},e.createElement("i",{className:"icon tc-clock"}," ")," ",e.createElement("span",{className:"quiz-text"},p.t("time")," "),e.createElement("span",{className:"number",ref:"countdown"},t.state.start?null:n+":00",t.state.start?"00:00":null),"  ")))),t.state.new?e.createElement("div",{className:"clear"}," "):null,t.state.new?e.createElement("div",{ref:"start",onClick:t.startTake,className:"ui button teal"},p.t("start")):null,t.state.start?e.createElement(u,{key:"answer_"+moment().valueOf(),question_list:t.state.question,current_take:this.state.current_take,take_answer_list:this.state.take_answer_list}):null,t.state.start||t.state.new?null:e.createElement(d,{key:"sumany_"+moment().valueOf(),quiz:this.props.quiz,current_take:this.state.current_take,take_answer_list:this.state.take_answer_list}),e.createElement("div",{className:"clear"}," "),e.createElement(m,{question_list:this.state.question,take_answer_list:this.state.take_answer_list,take:this.state.current_take,start:this.state.start})))}});return f}),define("components/elearning/learn/lecture-content-text",["react","backbone","helper","pref","querystring","eventbus","collections/course-lecture-content","models/course-lecture-content","language/courselecture","language/default"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"CourseLectureContentTextComponent",getInitialState:function(){return{embed_url:this.props.lecture_content.hasOwnProperty("embed_url")?this.props.lecture_content.embed_url:"",content:this.props.lecture_content.hasOwnProperty("content")?this.props.lecture_content.content:"",next_lecture_name:"",next_lecture_url:""}},appendNext:function(){var t="",n="";if($(e.findDOMNode(this.refs.content)),$("#elearning-left-column").length){var a=$("#elearning-left-column"),i=a.find("tr.activerow-bg"),r=a.find("tr"),o=[],s=(i.attr("data-free"),i.attr("data-id"));if($.each(r,function(e,t){o.push({id:$(t).attr("data-id"),free:$(t).attr("data-free"),index:e})}),o.length){var l=-1,c=0,d="0";o.map(function(e,t){parseInt(s)==parseInt(e.id)&&0>l&&(l=parseInt(e.index)),parseInt(s)!=parseInt(e.id)&&parseInt(e.index)>l&&l>=0&&0==c&&(c=e.id,d=e.free.toString())})}c>0&&(t=this.getLink()+c,"1"!=d&&$.isEmptyObject(this.props.enroll)||(this.props.lecture_list.map(function(e,t){e.id==c&&(n=e.title)}),""!=n&&this.setState({next_lecture_url:t,next_lecture_name:n})))}},getLink:function(){return"#elearning/learn/course/"+i.get("course")+"/lecture/"},componentWillMount:function(){},componentDidUpdate:function(){},componentDidMount:function(){this.appendNext()},render:function(){var t=this;return e.createElement("span",{ref:"content_text",id:"lecture-content"},""!=t.state.embed_url?e.createElement("iframe",{width:"100%",height:"500",src:t.state.embed_url,frameBorder:"0",allowFullScreen:""}):"",""!=t.state.content?e.createElement("div",{style:{marginLeft:"15%",marginRight:"15%"},dangerouslySetInnerHTML:{__html:t.state.content}}):"",t.state.next_lecture_name&&""!=t.state.next_lecture_name&&t.state.next_lecture_url&&""!=t.state.next_lecture_url?e.createElement("div",{style:{borderTop:"1px solid",borderStyle:"dashed",borderBottom:"none",marginTop:"20px"}}):null,t.state.next_lecture_name&&""!=t.state.next_lecture_name&&t.state.next_lecture_url&&""!=t.state.next_lecture_url?e.createElement("div",{style:{textAlign:"right",padding:"8px",color:"#666",marginBottom:"60px"}},c.t("next"),e.createElement("br",null),e.createElement("a",{href:t.state.next_lecture_url,style:{color:"black"}},e.createElement("b",null,t.state.next_lecture_name))):null)}});return d}),define("components/elearning/learn/lecture-content",["react","backbone","helper","pref","querystring","eventbus","collections/course-lecture-content","models/course-lecture-content","models/course-lecture","components/elearning/learn/lecture-content-text","components/elearning/learn/lecture-content-quiz","language/courselecture","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"CourseLectureContentComponent",getInitialState:function(){return{content:{},enroll:{},item:[],current_lecture:{},current_lecture_content:{}}},getLecture:function(){var e={};return this.props.lecture_list.length&&this.props.lecture_list.map(function(t,n){t.id==i.get("lecture")&&(e=t)}),e},changeLecture:function(){var a=this,r=!1,o=!1,s=this.getLecture(),c='<div style="font-size:20px;color:#bbb;margin-top: 40px">'+u.t("empty_lecture_content")+"</div>";if($(e.findDOMNode(a.refs.content)),$(e.findDOMNode(a.refs.content)).empty(),1==this.props.havegetenroll){if(!$.isEmptyObject(s))if(1!=s.is_free&&$.isEmptyObject(a.props.enroll))o=!0;else{var d=[];s.type==(new l).TYPE_LECTURE?this.props.content_list&&this.props.content_list.length&&(d=this.props.content_list):this.props.quiz_list&&this.props.quiz_list.length&&(d=this.props.quiz_list),d.map(function(e,t){r=!0;var n={};if(s.type==(new l).TYPE_LECTURE){if(e.lms_course_lecture_id==s.id)var n={current_lecture_content:e}}else if(e.id==s.quiz_id)var n={current_lecture_quiz:e};n.current_lecture=s,a.setState(n)})}o&&setTimeout(function(){t.history.navigate("#elearning/detail/"+i.get("course"),{trigger:!0})},500),r||$(e.findDOMNode(a.refs.content)).append(c)}else $(e.findDOMNode(a.refs.content)).append(c),n.addLoader(),setTimeout(function(){a.changeLecture(),n.removeLoader()},1e3)},updateenroll:function(e){this.setState({enroll:e})},componentWillMount:function(){r.on("elearningcontent:updateenroll",this.updateenroll)},updateRightWidth:function(){var e=this,t=$(window).width(),n=($(window).height(),$("#elearning-right-column")),a=(n.height(),t-315+"px");return e.state.current_lecture.type==(new l).TYPE_QUIZ&&(a="100%"),"width:"+a},setHeight:function(){var e=this,t=($(body).width(),$("#page").height()),n=$("#elearning-right-column"),a=$("#elearning-left-column"),i=$("#elearing-left-content");a.height(t-40);var n=$("#elearning-right-column"),r=["padding:8px",e.updateRightWidth()];i.width()<314?r.push("left: 300px"):r.push("left: 315px"),n.attr("style",r.join(";")),$(window).resize(function(){var t=($(body).width(),$("#page").height());a.height(t-40);var r=["padding:8px",e.updateRightWidth()];i.width()<314?r.push("left: 300px"):r.push("left: 315px"),n.attr("style",r.join(";"))})},componentDidUpdate:function(){this.setHeight()},componentWillUnmount:function(){r.off("elearningcontent:updateenroll",this.updateenroll)},componentDidMount:function(){this.changeLecture(),this.setHeight()},render:function(){var t=this;return e.createElement("div",{id:"elearning-right-column",ref:"content"},t.state.current_lecture.type==(new l).TYPE_LECTURE?e.createElement(c,{lecture:t.state.current_lecture,lecture_content:t.state.current_lecture_content,enroll:t.props.enroll,lecture_list:this.props.lecture_list}):null,t.state.current_lecture.type==(new l).TYPE_QUIZ?e.createElement(d,{lecture:t.state.current_lecture,quiz:t.state.current_lecture_quiz,quiz_question_list:t.props.quiz_question_list,enroll:t.props.enroll,lecture_list:this.props.lecture_list}):null)}});return p}),define("components/elearning/list-horizontal",["react","pref","helper","eventbus","collections/course","models/course","collections/course-teacher-rel","collections/course-teacher","components/elearning/item-horizontal"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ElearningListHorizontalComponent",getInitialState:function(){return{teacher_list:{}}},getDefaultProps:function(){return{items:[]}},loadTeacher:function(){var e=this.props.data;if(e.length){var a=[];if(e.map(function(e,t){a.push(e.id)}),a=$.unique(a),a.length){var i=this,r={company_id:t.get("cid"),lms_course_id_list:a.join(",")};n.showLoader(),(new o).fetch({data:r,success:function(e,t){var n=t.items;i.loadTeachDetail(n)},error:function(e,t){},complete:function(){n.hideLoader()}})}}},loadTeachDetail:function(e){if(e.length){var t=[],i={};e.map(function(e,n){t.push(e.lms_teacher_id),i.hasOwnProperty(e.lms_course_id)||(i[e.lms_course_id]=[]),i[e.lms_course_id].push(e.lms_teacher_id)}),t=$.unique(t),t.length&&(n.showLoader(),(new s).getFromIdList({ids:t,success:function(e){var t=e.items;t.map(function(e,t){a.trigger("elearningitemverical:updateteacher",e,i)})},error:function(e,t){},complete:function(){n.hideLoader()}}))}},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){this.loadTeacher()},componentDidUpdate:function(){this.loadTeacher()},render:function(){return e.createElement("div",{className:"ui relaxed divided items"},this.props.data.map(function(t){return e.createElement(l,{key:t.id+"_"+moment().valueOf(),data:t})}))}});return c}),define("components/elearning/list-vertical",["react","pref","helper","eventbus","collections/course","models/course","collections/course-teacher-rel","collections/course-teacher","components/elearning/item-vertical"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ElearningListVerticalComponent",getInitialState:function(){return{teacher_list:{}}},loadTeacher:function(){var e=this.props.data;if(e.length){var a=[];if(e.map(function(e,t){a.push(e.id)}),a=$.unique(a),a.length){var i=this,r={company_id:t.get("cid"),lms_course_id_list:a.join(",")};n.showLoader(),(new o).fetch({data:r,success:function(e,t){var n=t.items;i.loadTeachDetail(n)},error:function(e,t){},complete:function(){n.hideLoader()}})}}},loadTeachDetail:function(e){if(e.length){var t=[];e.map(function(e,n){t.push(e.lms_teacher_id)}),t=$.unique(t);var i={};t.length&&(n.showLoader(),(new s).getFromIdList({ids:t,success:function(t){var n=t.items;e.map(function(e,t){n.map(function(t,n){i.hasOwnProperty(e.lms_teacher_id)||t.id==e.lms_teacher_id&&(t.lms_course_id=e.lms_course_id,a.trigger("elearningitemhorizontal:updateteacher",t),a.trigger("elearningitemverical:updateteacher",t))})})},error:function(e,t){},complete:function(){n.hideLoader()}}))}},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){this.loadTeacher()},componentDidUpdate:function(){},render:function(){var t=this;return e.createElement("div",{className:"ui stackable three cards"},this.props.data.map(function(n){var a={};return t.state.teacher_list.hasOwnProperty(n.id)&&(a=t.state.teacher_list[n.id]),e.createElement(l,{teacher:a,key:n.id+"_"+moment().valueOf(),data:n})}))}});return c}),define("components/elearning/pagination-item",["react"],function(e){var t=e.createClass({displayName:"PaginationItemComponent",getDefaultProps:function(){return{page:0,current_page:1}},render:function(){return e.createElement("li",null,this.props.current_page==this.props.page?e.createElement("span",{className:"page-numbers current"},this.props.page):e.createElement("a",{className:"page-numbers",href:"#elearning/_s/page/"+this.props.page},this.props.page))}});return t}),define("components/elearning/pagination",["react","helper","eventbus","components/elearning/pagination-item"],function(e,t,n,a){var i=e.createClass({displayName:"PaginationComponent",getDefaultProps:function(){return{total:0,perPage:9,current_page:1}},getInitialState:function(){var e=this;return{page_list:[],current_page:parseInt(e.props.current_page)>=1?e.props.current_page:1}},componentDidMount:function(){var e=parseInt(this.props.total);if(e>0){var t=Math.ceil(e/parseInt(this.props.perPage));if(t>1){for(var n=[],a=1;t>=a;a++)n.push(a);this.setState({page_list:n})}}},componentDidUpdate:function(){},render:function(){var t=this,n="";return this.state.page_list.length&&(n="none"),e.createElement("nav",{className:"learn-press-pagination elearning-navigation elearning-pagination",style:{display:""}},e.createElement("ul",{className:"page-numbers"},parseInt(t.state.current_page)>1?e.createElement("li",null,e.createElement("a",{className:"next page-numbers",href:"#elearning/_s/page/"+(parseInt(t.state.current_page)-1)},"←")):"",this.state.page_list.map(function(n,i){return e.createElement(a,{key:i+"_"+moment().valueOf(),current_page:t.state.current_page,page:n})}),parseInt(t.state.current_page)<this.state.page_list.length?e.createElement("li",null,e.createElement("a",{className:"next page-numbers",href:"#elearning/_s/page/"+(parseInt(t.state.current_page)+1)},"→")):""))}});return i}),define("components/elearning/related",["react","pref","collections/course","models/course","components/elearning/list-vertical"],function(e,t,n,a,i){var r=e.createClass({displayName:"ElearningRelatedComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{title:"Related Courses",data:{}}},loadData:function(){var e=this,i={company_id:t.get("cid"),diff_id:e.props.data?e.props.data.id:0,status:(new a).STATUS_ENABLE,lms_course_category_id:e.props.data?this.props.data.lms_course_category_id:0};(new n).fetch({data:i,success:function(t,n){if(n.total>0){var a=[],i=n.items;i.map(function(e,t){a.push(e)}),e.setState({items:a})}},complete:function(){}})},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){this.loadData()},componentDidUpdate:function(){},render:function(){var t="";return this.state.items.length||(t="none"),e.createElement("div",{className:"elearning-related",style:{display:t}},e.createElement("h2",{className:"elearning-related-title elearning-uppercase ui header"},this.props.title),e.createElement("div",{className:"elearning-related-content"},e.createElement(i,{data:this.state.items})))}});return r}),define("components/elearning/widget-category",["react","pref","querystring","language/elearning","collections/lmscoursecategory","models/lmscoursecategory"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"ElearningWidgetMyEnrollComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{title:a.t("all_courses")}},loadData:function(e){var n=this,a={company_id:t.get("cid"),status:(new r).STATUS_ENABLE,page:e,sort_type:"ASC",sort_by:"display_order"};(new i).fetch({data:a,success:function(e,t){var a=n.state.items.concat(t.items);n.setState({items:a}),Math.ceil(t.total/t.limit)<t.currentpage&&n.loadData(t.currentpage+1)},error:function(e,t){n.setState({items:[]})}})},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){this.loadData()},componentDidUpdate:function(){},render:function(){return e.createElement("div",{className:"elearning-widget"},e.createElement("h2",{className:"elearning-widget-header elearning-uppercase ui header"},this.props.title),e.createElement("div",{className:"elearning-widget-content"},e.createElement("div",{className:"ui relaxed list elearning-widget-cat"},this.state.items.map(function(t){var a="";return n.get("category_id")==t.id&&(a=" elearning-current-cat"),e.createElement("div",{key:t.id,className:"item elearning-widget-item"},e.createElement("a",{href:"#elearning/_s/category_id/"+t.id,className:"content elearning-widget-link elearning-uppercase"+a},t.name))}))))}});return o}),define("components/elearning/widget-courses",["react","pref","querystring","language/elearning","collections/lmscourse","models/lmscourse","components/elearning/label-price"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"ElearningWidgetCoursesComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{title:a.t("latest_courses")}},loadData:function(){var e=this,a={company_id:t.get("cid"),status:(new r).STATUS_ENABLE,is_remain_time:moment().unix(),diff_id:n.get("id"),limit:3,sort_type:"DESC",sort_by:"id"};(new i).fetch({data:a,success:function(t,n){e.setState({items:n.items})},error:function(t,n){e.setState({items:[]})}})},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){this.loadData()},componentDidUpdate:function(){},render:function(){return e.createElement("div",{className:"elearning-widget"},e.createElement("h2",{className:"elearning-widget-header elearning-uppercase ui header"},this.props.title),e.createElement("div",{className:"elearning-widget-content"},e.createElement("div",{className:"ui relaxed list elearning-widget-courses"},this.state.items.map(function(t){return e.createElement("div",{key:t.id,className:"item elearning-widget-item"},e.createElement("div",{className:"ui tiny image"},e.createElement("img",{src:t.thumbnail})),e.createElement("div",{className:"content"},e.createElement("a",{href:"#elearning/detail/"+t.id,className:"header elearning-widget-link"},t.name),e.createElement("div",{className:"description"},e.createElement(o,{data:t}))))}))))}});return s}),define("components/elearning/widget-my-enroll",["react","pref","querystring","language/elearning","collections/lmscoursecategory","models/lmscoursecategory"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"ElearningWidgetEnrollComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{title:a.t("all_courses")}},loadData:function(e){var n=this,a={company_id:t.get("cid"),status:(new r).STATUS_ENABLE,page:e,sort_type:"ASC",sort_by:"display_order"};(new i).fetch({data:a,success:function(e,t){var a=n.state.items.concat(t.items);n.setState({items:a}),Math.ceil(t.total/t.limit)<t.currentpage&&n.loadData(t.currentpage+1)},error:function(e,t){n.setState({items:[]})}})},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){this.loadData()},componentDidUpdate:function(){},render:function(){return e.createElement("div",{className:"elearning-widget"},e.createElement("h2",{className:"elearning-widget-header elearning-uppercase ui header"},a.t("my_enroll")),e.createElement("div",{className:"elearning-widget-content"},e.createElement("div",{className:"ui relaxed list elearning-widget-cat"},e.createElement("div",{className:"item elearning-widget-item"},e.createElement("a",{href:"#elearning/enroll",className:"content elearning-widget-link elearning-uppercase"},a.t("my_enroll_list"))))))}});return o}),define("components/elearning/widget-setting",["react","pref","role","querystring","language/elearning","collections/lmscoursecategory","models/lmscoursecategory"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"ElearningWidgetManageComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{title:i.t("all_courses")}},loadData:function(e){var n=this,a={company_id:t.get("cid"),status:(new o).STATUS_ENABLE,page:e,sort_type:"ASC",sort_by:"display_order"};(new r).fetch({data:a,success:function(e,t){var a=n.state.items.concat(t.items);n.setState({items:a}),Math.ceil(t.total/t.limit)<t.currentpage&&n.loadData(t.currentpage+1)},error:function(e,t){n.setState({items:[]})}})},componentWillUnmount:function(){},componentWillMount:function(){n.hasById(n.ELEARNING_MANAGE)||$(e.findDOMNode(this.refs.setting)).hide()},componentDidMount:function(){this.loadData()},componentDidUpdate:function(){},render:function(){return e.createElement("div",{className:"elearning-widget",ref:"setting",style:{border:"none"}},e.createElement("div",{className:"elearning-widget-content",style:{paddingLeft:"0"}},e.createElement("div",{className:"ui relaxed list elearning-widget-cat"},e.createElement("div",{className:"item elearning-widget-item"},e.createElement("a",{href:"#course",className:"ui fluid button big teal"},i.t("manage_course"))))))}});return s}),define("components/employeepicker",["react","helper","pref","cacheddata","models/user","models/employee","collections/employee"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"EmployeePickerComponent",getDefaultProps:function(){return{inputname:"",inputid:"",defaulttext:"------",defaultvalue:[],ignoreuserid:0,allowuseridlist:[],getgroup:!1,max:200,multiple:!0}},updateEmployeeToView:function(n){var a=this,o=a.props.allowuseridlist||[],s=n.length,l=0;$.each(n,function(n,c){c.is_group_id>0?a.props.getgroup?new r({id:c.id}).fetch({error:function(){l++},success:function(n,i){l++,html='<div class="item" data-value="g'+i.is_group_id+'" data-text="'+i.full_name+'"><img class="ui mini avatar image" style="width: 24px; height: 24px; max-height: initial;" src="'+t.getAvatarPath("")+'" />'+i.full_name+"</div>",$(e.findDOMNode(a.refs.employeelist)).append(html)},complete:function(){l==s&&a._initDropdown()}}):s--:c.user_id==a.props.ignoreuserid||0!=o.length&&!a.isAllowUserID(c.user_id)?s--:new i({id:c.user_id}).fetch({error:function(){l++},success:function(n,i){l++,html='<div class="item" data-value="'+i.id+'" data-text="'+i.fullname+'"><img class="ui mini avatar image" style="width: 24px; height: 24px; max-height: initial;" src="'+t.getAvatarPath(i.avatar)+'" />'+i.fullname+"<br /></div>",$(e.findDOMNode(a.refs.employeelist)).append(html)},complete:function(){l==s&&a._initDropdown()}})}),a._initDropdown()},isAllowUserID:function(e){for(var t=!1,n=this.props.allowuseridlist,a=0;a<n.length;a++){var i=parseInt(n[a]);if(i==e){t=!0;break}}return t},componentWillUpdate:function(){},componentDidMount:function(){var t=this,i=[];a.has("employee")?(i=a.get("employee"),this.updateEmployeeToView(i().get())):($(e.findDOMNode(this.refs.dropdown)).addClass("loading"),(new o).fetch({data:{company_id:n.get("cid"),limit:200,is_not_deleted:1},success:function(e,n){t.updateEmployeeToView(n.items)},complete:function(){$(e.findDOMNode(t.refs.dropdown)).removeClass("loading")}})),$(e.findDOMNode(this.refs.dropdown)).dropdown({maxSelections:this.props.max,fullTextSearch:!0,onAdd:function(n,a,i){t._onLabelSelect(n,a,i),$(e.findDOMNode(t.refs.dropdown)).dropdown("hide")},onChange:function(e,n,a){t._onChange(e,n,a)}})},_initDropdown:function(){if($(e.findDOMNode(this.refs.dropdown)).dropdown("refresh"),this.props.defaultvalue.length>0){var t=[];this.props.defaultvalue.forEach(function(e,n){t.push(e.toString())}),$(e.findDOMNode(this.refs.dropdown)).dropdown("set selected",t)}},_onChange:function(e,t,n){"function"==typeof this.props.onChange&&this.props.onChange(e,t,n)},_onLabelSelect:function(e,t,n){"function"==typeof this.props.callbackSelected&&this.props.callbackSelected(e,t,n)},restoreDefaults:function(){$(e.findDOMNode(this.refs.dropdown)).dropdown("restore defaults")},setList:function(t){var n=[];t.forEach(function(e,t){n.push(e.toString())}),$(e.findDOMNode(this.refs.dropdown)).dropdown("set selected",n)},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.dropdown)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},render:function(){var t=this.props.defaulttext;return e.createElement("div",{ref:"dropdown",className:"ui fluid "+(this.props.multiple?"multiple":"")+" search selection dropdown "+this.props.disabled},e.createElement("input",{type:"hidden",name:this.props.inputname,id:this.props.inputid}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},t),e.createElement("div",{className:"menu",ref:"employeelist"}))}});return s}),define("components/email/desktop/compose",["react","helper","eventbus","pref","language/message","language/default","components/employeepicker","components/tinymce","models/file","models/message"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"MailComposeComponent",alreadyInitFileUpload:!1,formError:{subject:["error_subject_required"],message:["error_message_required","error_message_too_short","error_message_too_long"],employee:["error_empty_to"]},getDefaultProps:function(){return{recipients:[]}},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.employees)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},createMailHandle:function(r){var o=this,s=$(e.findDOMNode(this.refs.form));s.addClass("loading");var l=$(e.findDOMNode(this.refs.submit));l.addClass("loading");var d=[];$(e.findDOMNode(o)).find(".attachedfileid").each(function(e){d.push($(this).attr("data-id"))});var u=o.refs.editor.getEditor(),m="";null!=u&&(m=u.getContent(),m=t.trimEmptyParagraph(m)),(new c).save({company_id:a.get("cid"),creator_id:a.get("uid"),subject:$(e.findDOMNode(o.refs.subject)).val(),message:m,file_list:d,to:o.getSelectedUserIdList()},{success:function(a){t.showSuccess(i.t("success_add")),$(e.findDOMNode(o)).find(".uploadifive-queue-item").hide(),o.hidePopup(),n.trigger("mailleft:activemenu","sent"),n.trigger("maillist:load","sent")},error:function(e,n){t.notifyErrorAndForm(n,i,"error_add",s,o.formError)},complete:function(){s.removeClass("loading"),l.removeClass("loading")}})},formSubmit:function(){$(e.findDOMNode(this.refs.form)).submit()},hidePopup:function(){$(e.findDOMNode(this.refs.mailcompose)).modal("hide"),n.trigger("compose:unmount")},showPopup:function(){var t=this;$(e.findDOMNode(this.refs.mailcompose)).modal({context:this.getDOMNode(),closable:!1,autofocus:!1,onHidden:function(){t.hidePopup()},onVisible:function(){setTimeout(function(){$(e.findDOMNode(t.refs.subject)).focus()},200)}}).modal("show")},handleKeyup:function(e,t){e.preventDefault(),e.keyCode?e.keyCode:e.which},handleEditorFocus:function(e,t){},handleEditorBlur:function(e,t){},componentWillUnmount:function(){},componentWillUpdate:function(){this.showPopup()},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.form)).form({fields:{subject:{identifier:"subject",rules:[{type:"empty",prompt:i.t("error_subject_required")}]},message:{identifier:"message"},employee:{identifier:"employee",rules:[{type:"empty",prompt:i.t("error_empty_to")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.createMailHandle()}}),this.alreadyInitFileUpload||((new l).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new l).OBJECTTYPE_MESSAGE,"ffile",(new l).STATUS_ENABLE),this.alreadyInitFileUpload=!0),this.showPopup()},render:function(){var t=[];this.props.recipients.length>0&&(t=this.props.recipients);var n={autoresize_min_height:170,autoresize_max_height:170,toolbar:"bold italic underline | link unlink"};return e.createElement("div",{id:"mailcompose-inner"},e.createElement("div",{className:"ui modal",ref:"mailcompose"},e.createElement("div",{className:"header"},i.t("new_mail")),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"field"},e.createElement("label",null,i.t("recipient")),e.createElement(o,{defaultvalue:t,ref:"employees",inputname:"employee"})),e.createElement("div",{className:"field"},e.createElement("label",null,i.t("subject")),e.createElement("input",{type:"text",ref:"subject",name:"subject"})),e.createElement("div",{className:"field"},e.createElement("label",null,i.t("message")),e.createElement(s,{ref:"editor",id:"message",name:"message",content:"",autoLoad:!0,config:n,onKeyup:this.handleKeyup,onFocus:this.handleEditorFocus,onBlur:this.handleEditorBlur})),e.createElement("div",{className:"field"},e.createElement("div",{style:{marginRight:120}},e.createElement("input",{type:"file",ref:"fileinput",id:"ffile",name:"ffile",multiple:"multiple",className:"hide"}))))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui cancel close button"},r.t("close")),e.createElement("a",{className:"ui green button",href:"javascript: void(0)",ref:"submit",onClick:this.formSubmit},r.t("send")))))}});return d}),define("components/mail/desktop/replyform",["react","helper","eventbus","pref","language/mail","components/employeepicker","components/tinymce","models/file","models/mail"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"MailReplyComponent",alreadyInitFileUpload:!1,allowSend:!0,formError:{subject:["error_subject_required"],message:["error_message_required","error_message_too_short","error_message_too_long"],employee:["error_empty_to"]},getDefaultProps:function(){return{data:null,type:"reply"}},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.employees)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},handleKeyup:function(e,t){e.preventDefault(),e.keyCode?e.keyCode:e.which},handleEditorFocus:function(t,n){$(e.findDOMNode(this)).find(".full_input").show(),$("#mailreplyaction").hide(),this.initForm()},handleEditorBlur:function(e,t){},createMailHandle:function(n){var r=this;if(r.allowSend){r.allowSend=!1;var o=$(e.findDOMNode(this.refs.form));o.addClass("loading");var s=$(e.findDOMNode(this.refs.submit));s.addClass("loading");var c=r.refs.editor.getFileList();$(e.findDOMNode(r)).find(".uploadifive-queue-item").hide();var d=r.refs.editor.getEditor(),u="";null!=d&&(u=d.getContent(),u=t.trimEmptyParagraph(u)),(new l).save({company_id:a.get("cid"),creator_id:a.get("uid"),type:r.props.type,subject:$(e.findDOMNode(r.refs.subject)).val(),content:u,file_list:c,to:r.getSelectedUserIdList()},{success:function(e){t.showSuccess(i.t("success_add")),r.resetMessage()},error:function(e,n){t.notifyErrorAndForm(n,i,"error_add",o,r.formError)},complete:function(){o.removeClass("loading"),s.removeClass("loading"),r.allowSend=!0}})}},formSubmit:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.form)).submit()},blur:function(t){t.preventDefault(),t.stopPropagation(),$(e.findDOMNode(this.refs.avatar)).show(),$(e.findDOMNode(this.refs.editorwrapper)).css({marginLeft:40}),$("#mailreplyaction").show(),this.resetMessage()},initForm:function(){var t=new l,n="",a=this.refs.editor.getEditor();n="reply"==this.props.type||"reply_all"==this.props.type?t.getQuotedText(this.props.data,this.props.sender):t.getForwardedText(this.props.data,this.props.sender,this.props.recipients),null!=a&&a.setContent(n),$(e.findDOMNode(this.refs.avatar)).hide(),$(e.findDOMNode(this.refs.editorwrapper)).css({marginLeft:0})},focusMessage:function(){this.refs.editor.focusToInit()},resetMessage:function(){var t=this.refs.editor.getEditor();null!=t&&(t.setContent(""),this.refs.editor._remove()),$(e.findDOMNode(this)).find(".full_input").hide(),
$(e.findDOMNode(this)).find(".avatar").show(),$(e.findDOMNode(this.refs.editorwrapper)).css({marginLeft:40}),n.trigger("replyform:reset")},componentWillUpdate:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.form)).form({fields:{subject:{identifier:"subject",rules:[{type:"empty",prompt:i.t("error_subject_required")}]},message:{identifier:"message",rules:[{type:"empty",prompt:i.t("error_message_required")},{type:"minLength[5]",prompt:i.t("error_message_too_short")},{type:"maxLength[4000]",prompt:i.t("error_message_too_long")}]},employee:{identifier:"employee",rules:[{type:"empty",prompt:i.t("error_empty_to")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.createMailHandle()}})},render:function(){var n=this,s=[],l="";if(null!=n.props.data&&"undefined"!=typeof n.props.data.id)if(l="forward"==n.props.type?"Fw: ":"Re: ",l+=n.props.data.subject.replace(/Fw:|Re:/g,"").trim(),"reply_all"==n.props.type&&n.props.data.to.length>0){var c=n.props.data.to;s.push(n.props.data.creator_id.toString());for(var d=0;d<c.length;d++)""!=c[d]&&-1==$.inArray(c[d],s)&&s.push(c[d].toString())}else"reply"==n.props.type&&s.push(n.props.data.creator_id.toString());var u={autoresize_min_height:150,toolbar:"send | bold italic underline strikethrough | fontsizeselect forecolor backcolor | bullist numlist indent outdent | alignleft aligncenter alignright | link unlink | teamcropfilepicker attachment | trash"},m=[{name:"send",text:i.t("send"),subtype:"custom ui green button",style:"background: #21BA45!important;color: #FFF!important",onClick:n.formSubmit},{name:"attachment",text:"",tooltip:i.t("attachment")},{name:"trash",icon:"trash",tooltip:i.t("cancel"),style:"position: absolute; right: 0",onClick:n.blur}];return e.createElement("div",{ref:"mailreply"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"fields full_input",style:{display:"none"}},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("to")),e.createElement(r,{key:moment().unix(),defaultvalue:s,getgroup:!0,ref:"employees",inputname:"employee"}))),e.createElement("div",{className:"fields full_input",style:{display:"none"}},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("subject")),e.createElement("input",{ref:"subject",name:"subject",defaultValue:l}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("a",{className:"avatar",ref:"avatar",style:{float:"left"}},e.createElement("img",{className:"ui avatar image",src:t.getAvatarPath(a.get("avatar"))})),e.createElement("div",{className:"content",ref:"editorwrapper",style:{marginLeft:40,marginBottom:20}},e.createElement(o,{ref:"editor",rows:"3",id:this.props.type+"-"+this.props.data.id,content:"",autofocus:!0,config:u,focusToInitHandle:this.editorInitHandle,toolbarlocation:"bottom",buttons:m,onKeyup:this.handleKeyup,onFocus:this.handleEditorFocus,onBlur:this.handleEditorBlur}))))))}});return c}),define("components/email/desktop/detail",["react","pref","helper","eventbus","querystring","language/mail","language/group","components/mail/desktop/replyform","components/filestrip","models/user","models/group","models/mail"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"MailDetailComponent",replyForm:null,replyAllForm:null,forwardForm:null,getInitialState:function(){return{data:{message_text:{subject:"",text:""}}}},hideHandler:function(){$(e.findDOMNode(this.refs.moreactiondetail)).dropdown("hide"),$(e.findDOMNode(this.refs.detailinfo)).dropdown("hide"),$(e.findDOMNode(this)).hide()},showHandler:function(t){$(e.findDOMNode(this)).show(),this.loadData(t)},loadData:function(t){var n=this;$(e.findDOMNode(n.refs.loader)).addClass("active"),new u({id:t}).fetch({success:function(e,t){n.setState({data:t}),a.trigger("maildetail:showtoolbar",t),a.trigger("mailleft:countinbox")},complete:function(){$(e.findDOMNode(n.refs.loader)).removeClass("active")}}),$(e.findDOMNode(n.refs.detailinfo)).dropdown()},loadToolBar:function(){$(e.findDOMNode(this.refs.moreactiondetail)).dropdown()},toggleStarred:function(n){n.preventDefault();var a=this.state.data,i=$(e.findDOMNode(this.refs.isstarred)),r={company_id:t.get("cid"),creator_id:t.get("uid")};$.ajax({type:"PUT",dataType:"json",url:(new u).urlRoot+"/starred/"+a.id,data:r,success:function(e){i.hasClass("isstarred")?i.removeClass("isstarred"):i.addClass("isstarred")},error:function(){}})},messageReply:function(t){switch(t=t||"reply",$(e.findDOMNode(this)).find(".reply_form").hide(),t){case"reply":$(e.findDOMNode(this.refs.reply_form)).show(),this.replyForm.focusMessage();break;case"reply_all":$(e.findDOMNode(this.refs.reply_all_form)).show(),this.replyAllForm.focusMessage();break;case"forward":$(e.findDOMNode(this.refs.forward_form)).show(),this.forwardForm.focusMessage()}},messageTrash:function(e){var t=i.get("mailbox");e>0&&new u({id:e}).destroy({success:function(){Backbone.history.navigate("mail/index/mailbox/"+t),a.trigger("maillist:load",t)},error:function(e,t){},complete:function(){}})},messageQuoteToggle:function(e){e.preventDefault();var t=e.currentTarget;$(t).next().toggle()},compactReply:function(){var t=this,n=e.createElement("a",{className:"quotedmessagetoggle",href:"#"},e.createElement("i",{className:"tc-more"}));$(e.findDOMNode(this)).find(".quotedmessage").before(e.renderToString(n)),$(e.findDOMNode(this)).find(".quotedmessage").toggle(),$(e.findDOMNode(this)).find(".quotedmessagetoggle").on("click",function(e){t.messageQuoteToggle(e)})},renderReplyForm:function(t,n){var a=this,i=a.state.data;e.render(e.createElement(s,{type:"reply",key:i.text_id,data:i,sender:t,recipients:n}),e.findDOMNode(a.refs.reply_form),function(){a.replyForm=this}),e.render(e.createElement(s,{type:"reply_all",key:i.text_id,data:i,sender:t,recipients:n}),e.findDOMNode(a.refs.reply_all_form),function(){a.replyAllForm=this}),e.render(e.createElement(s,{type:"forward",key:i.text_id,data:i,sender:t,recipients:n}),e.findDOMNode(a.refs.forward_form),function(){a.forwardForm=this})},composeHandle:function(e){var t=e.attr("href")||e.attr("data-id");t=parseInt(t),t>0&&a.trigger("mail:compose",[t])},updateReceiptHtml:function(t,n){$(e.findDOMNode(this.refs.receiver)).html(t),$(e.findDOMNode(this.refs.receiverinfo)).html(n)},componentDidUpdate:function(){var a=this,i=t.get("uid"),s=[],l=[],u={},m=[],p=2,h=0;if(1==this.state.data.is_multi_recipient&&(s=this.state.data.recipients.user_ids||s,l=this.state.data.recipients.group_ids||l,p=s.length+l.length+1),this.state.data.creator_id>0&&new c({id:this.state.data.creator_id}).fetch({success:function(t,i){e.render(e.createElement("img",{className:"ui avatar image",src:n.getAvatarPath(i.avatar)}),e.findDOMNode(a.refs.avatar)),$(e.findDOMNode(a.refs.sender)).html(i.fullname),$(e.findDOMNode(a.refs.senderinfo)).html(i.fullname),u=i,h++,h==p&&(a.updateReceiptHtml(f,g),a.renderReplyForm(u,m))},complete:function(){}}),1==this.state.data.is_multi_recipient){for(var f="",g="",_=0;_<s.length;_++){var v=s[_];new c({id:v}).fetch({success:function(e,t){var o=(t.fullname.split(" "),t.fullname),l=o;s.length>1&&(l=n.getShortName(o)),""!=f&&(f+=", ",g+="<br />"),f+=s[_]!=i?l:r.t("me"),g+=o,m.push(t),h++,h==p&&(f=r.t("to")+" "+f,a.updateReceiptHtml(f,g),a.renderReplyForm(u,m))},complete:function(){}})}for(var _=0;_<l.length;_++){var y=l[_].replace(/g/,"");new d({id:y}).fetch({success:function(e,t){""!=f&&(f+=", ",g+="<br />"),f+=o.t("group")+" "+t.name,g+=o.t("group")+" "+t.name,m.push(t)},complete:function(){h++,console.log(h,p),h==p&&(f=r.t("to")+" "+f,a.updateReceiptHtml(f,g),a.renderReplyForm(u,m))}})}}else this.state.data.receiver_id>0&&(this.state.data.receiver_id==t.get("uid")&&$(e.findDOMNode(a.refs.receiver)).html(r.t("to")+" "+r.t("me")),new c({id:this.state.data.receiver_id}).fetch({success:function(n,i){a.state.data.receiver_id!=t.get("uid")&&$(e.findDOMNode(a.refs.receiver)).html(i.fullname),$(e.findDOMNode(a.refs.receiverinfo)).html(i.fullname),m.push(i),h++,h==p&&a.renderReplyForm(u,m)}}));$(e.findDOMNode(this.refs.moreactiondetail)).dropdown(),$(e.findDOMNode(a.refs.detailinfo)).dropdown(),$(e.findDOMNode(a.refs.mailtext)).find(".forwardedmessagefrom a").each(function(){$(this).on("click",function(e){e.preventDefault(),a.composeHandle($(this))})}),$(e.findDOMNode(a.refs.mailtext)).find(".forwardedmessageto a").each(function(){$(this).on("click",function(e){e.preventDefault(),a.composeHandle($(this))})}),this.compactReply()},componentWillUnmount:function(){a.off("maildetail:hide",this.hideHandler),a.off("maildetail:show",this.showHandler)},componentDidMount:function(){var t=this;a.on("maildetail:hide",t.hideHandler),a.on("maildetail:show",t.showHandler),$(e.findDOMNode(t.refs.moreactiondetail)).dropdown()},render:function(){var t=this,a=t.state.data;if(a.id>0){var i=moment.unix(a.date_created),o=i.format("HH:mm")+" "+r.t("day")+" "+i.format("DD")+" "+r.t("month")+" "+i.format("MM")+" "+r.t("year")+" "+i.format("YYYY"),s=a.message_text.text.replace(/\{quoted_sender_time\}/g,r.t("quoted_sender_time"));return s=s.replace(/\{quoted_sender_write\}/g,r.t("quoted_sender_write")),s=s.replace(/\{forwarded_head\}/g,r.t("forwarded_head")),s=s.replace(/\{forwarded_from\}/g,r.t("forwarded_from")),s=s.replace(/\{forwarded_date\}/g,r.t("forwarded_date")),s=s.replace(/\{forwarded_to\}/g,r.t("forwarded_to")),e.createElement("div",{id:"maildetail",key:a.id},e.createElement("div",{className:"ui loader",ref:"loader"}),e.createElement("div",{id:"mailsubject"},e.createElement("h3",null,a.subject)),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"ui items"},e.createElement("div",{className:"item"},e.createElement("div",{ref:"avatar"}),e.createElement("div",{className:"left aligned content"},e.createElement("div",{className:"meta"},e.createElement("span",{ref:"sender"}),e.createElement("br",null),e.createElement("span",{ref:"receiver"}),e.createElement("div",{className:"ui pointing top left dropdown",id:"detailinfo",ref:"detailinfo"},e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item"},e.createElement("table",{className:"ui very basic table"},e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{width:"70",className:"right aligned",style:{verticalAlign:"top"}},r.t("from"),":"),e.createElement("td",{ref:"senderinfo"})),e.createElement("tr",null,e.createElement("td",{className:"right aligned",style:{verticalAlign:"top"}},r.t("to"),":"),e.createElement("td",{ref:"receiverinfo"})),e.createElement("tr",null,e.createElement("td",{className:"right aligned",style:{verticalAlign:"top"}},r.t("date"),":"),e.createElement("td",{ref:"dateinfo"},o)),e.createElement("tr",null,e.createElement("td",{className:"right aligned",style:{verticalAlign:"top"}},r.t("subject"),":"),e.createElement("td",{ref:"dateinfo"},a.subject))))))))),e.createElement("div",{className:"right aligned content clearing"},e.createElement("div",{className:"ui right floated"},e.createElement("span",{className:"detaildatecreated"},i.format("DD")," ",r.t("month")," ",i.format("MM")," (",n.relativeTime(a.date_created),")"),e.createElement("a",{ref:"isstarred",href:"#",onClick:this.toggleStarred,className:"mailstar "+(1==a.isstarred?"isstarred":"")},e.createElement("i",{className:"icon tc-star"})),e.createElement("div",{className:"ui mini buttons",style:{marginLeft:"5px"}},e.createElement("div",{className:"ui button",onClick:this.messageReply.bind(this,"reply")},r.t("reply")),e.createElement("div",{className:"ui floating dropdown icon button",ref:"moreactiondetail"},e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item",onClick:this.messageReply.bind(this,"reply")},r.t("reply")),1==a.is_multi_recipient?e.createElement("div",{className:"item",onClick:this.messageReply.bind(this,"reply_all")},r.t("reply_all")):"",e.createElement("div",{className:"item",onClick:this.messageReply.bind(this,"forward")},r.t("forward")),e.createElement("div",{className:"item",onClick:this.messageTrash.bind(this,a.text_id)},r.t("delete_this"))))))))),e.createElement("div",{id:"mailtext",ref:"mailtext",key:moment().unix(),dangerouslySetInnerHTML:{__html:s}}),a.files.length>0?e.createElement("div",{id:"mailfile"},e.createElement("div",{className:"ui divider"}),e.createElement("p",null,e.createElement("strong",null,a.files.length," ",r.t("attachment"))),e.createElement(l,{files:a.files})):"",e.createElement("div",{className:"ui divider"}),e.createElement("div",{ref:"reply_form",className:"reply_form"}),e.createElement("div",{ref:"reply_all_form",className:"reply_form",style:{display:"none"}}),e.createElement("div",{ref:"forward_form",className:"reply_form",style:{display:"none"}}))}return e.createElement("div",{id:"maildetail"},e.createElement("div",{id:"mailtext"},"..."))}});return m}),define("components/mail/desktop/mailleft",["backbone","react","pref","helper","eventbus","querystring","language/mail","collections/mail","models/mail"],function(e,t,n,a,i,r,o,s,l){var c=t.createClass({displayName:"MailLeftComponent",getDefaultProps:function(){return{defaultmailbox:"inbox"}},composeHandler:function(){i.trigger("mail:compose")},loadMail:function(t,n){this.activeMenu(t),e.history.navigate("mail/index/mailbox/"+t),i.trigger("maillist:load",{mailbox:t}),n.preventDefault()},activeMenu:function(e){$(t.findDOMNode(this)).find("ul li").each(function(){$(this).attr("data-menu")==e?($(this).addClass("active"),$(this).append('<div class="ui loader active"></div>')):$(this).removeClass("active")})},getMailboxTotal:function(){var e=this,a={company_id:n.get("cid"),creator_id:n.get("uid")};$.ajax({url:(new l).urlRoot+"/unread",method:"GET",data:a,dataType:"json",success:function(n){var a="";n.total>0&&(a="("+n.total+")"),$(t.findDOMNode(e.refs.totalinbox)).html(a)}})},mailLoadCompletedHandler:function(){$(t.findDOMNode(this)).find(".ui.loader").remove()},componentWillUnmount:function(){i.off("mailleft:countinbox",this.getMailboxTotal),i.off("mailleft:activemenu",this.activeMenu),i.off("maillist:completed",this.mailLoadCompletedHandler)},componentDidMount:function(){var e=$("#chattab").outerHeight();$(t.findDOMNode(this.refs.mailleft)).height(a.getFullHeight()-e).niceScroll({autohidemode:!0,cursoropacitymax:.5}),i.on("mailleft:countinbox",this.getMailboxTotal),i.on("mailleft:activemenu",this.activeMenu),i.on("maillist:completed",this.mailLoadCompletedHandler),i.trigger("mailleft:activemenu",this.props.defaultmailbox),this.getMailboxTotal()},render:function(){return t.createElement("div",{id:"mailleft",ref:"mailleft"},this.props.mobile?"":t.createElement("div",{id:"mailcomposebuttonwrapper"},t.createElement("a",{className:"ui fluid button orange",style:{textTransform:"uppercase"},onClick:this.composeHandler},o.t("compose"))),t.createElement("ul",null,t.createElement("li",{"data-menu":"inbox"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"inbox")},o.t("inbox")," ",t.createElement("span",{ref:"totalinbox"}))),t.createElement("li",{"data-menu":"instarred"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"instarred")},o.t("starred"))),t.createElement("li",{"data-menu":"insent"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"insent")},o.t("insent"))),t.createElement("li",{"data-menu":"intrash"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"intrash")},o.t("intrash")))),n.get("uid")==n.get("owner")?t.createElement("div",{style:{position:"fixed",bottom:15,left:15}},t.createElement("a",{href:"#mail/manage",className:"ui basic noborder mini labeled icon button"},t.createElement("i",{className:"icon tc-gear"})," ",o.t("mail_manager"))):"")}});return c}),define("components/mail/desktop/mailitem",["react","pref","helper","eventbus","querystring","language/mail","models/user","models/group","models/mail","components/datetime"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"MailItemComponent",getDefaultProps:function(){return{layout:"two-columns"}},onFilter:function(t){var n=this.props.data,a=$(e.findDOMNode(this.refs.checkbox));switch(a.checkbox("set unchecked"),t){case"all":a.checkbox("set checked");break;case"none":a.checkbox("set unchecked");break;case"read":1==n.is_read&&a.checkbox("set checked");break;case"unread":0==n.is_read&&a.checkbox("set checked");break;case"starred":1==n.is_favourite&&a.checkbox("set checked");break;case"unstarred":0==n.is_favourite&&a.checkbox("set checked")}this.onSelected(),this.props.onFilterChange()},onTrash:function(){if(this.isChecked()){var e=this.props.data.id,t=i.get("mailbox");new l({id:e}).destroy({success:function(){a.trigger("maillist:load",{mailbox:t})},error:function(e,t){},complete:function(){}})}},onSelected:function(){var t=$(e.findDOMNode(this.refs.checkbox));t.checkbox("is checked")?$(e.findDOMNode(this)).addClass("selected"):$(e.findDOMNode(this)).removeClass("selected")},gotoDetail:function(e){i.set("id",this.props.data.id),a.trigger("mail:open",this.props.data.id)},isChecked:function(){return $(e.findDOMNode(this.refs.checkbox)).checkbox("is checked")},toggleStarred:function(n){n.preventDefault();var a=this.props.data,i=$(e.findDOMNode(this.refs.isstarred)),r={company_id:t.get("cid"),creator_id:t.get("uid")};$.ajax({type:"PUT",dataType:"json",url:(new l).urlRoot+"/starred/"+a.id,data:r,success:function(e){i.hasClass("isstarred")?i.removeClass("isstarred"):i.addClass("isstarred")},error:function(){}})},onRestore:function(){if(this.isChecked()){var e=this.props.data,n=i.get("mailbox"),r={company_id:t.get("cid"),creator_id:t.get("uid")};$.ajax({type:"PUT",dataType:"json",url:(new l).urlRoot+"/restore/"+e.id,data:r,success:function(e){a.trigger("maillist:load",{mailbox:n})}})}},updateHandler:function(t){var n=(t.type+"_"+t.item.id,t.item);"group"==t.type&&$.inArray("g"+n.id,this.props.data.to)>=0&&$(e.findDOMNode(this.refs["user_g"+n.id])).html(n.name)},markUnreadHandler:function(){var n=this;n.isChecked()&&new l({id:this.props.data.id}).save({company_id:t.get("cid"),creator_id:t.get("uid"),is_read:0},{success:function(t){$(e.findDOMNode(n)).addClass("unread")}})},markReadHandler:function(){var n=this;n.isChecked()&&new l({id:this.props.data.id}).save({company_id:t.get("cid"),creator_id:t.get("uid"),is_read:1},{success:function(t){$(e.findDOMNode(n)).removeClass("unread")}})},markFavoriteHandler:function(){var n=this;n.isChecked()&&new l({id:this.props.data.id}).save({company_id:t.get("cid"),creator_id:t.get("uid"),is_favourite:1},{success:function(t){$(e.findDOMNode(n.refs.isstarred)).addClass("isstarred")}})},markUnfavouriteHandler:function(){var n=this;n.isChecked()&&new l({id:this.props.data.id}).save({company_id:t.get("cid"),creator_id:t.get("uid"),is_favourite:0},{success:function(t){$(e.findDOMNode(n.refs.isstarred)).removeClass("isstarred")}})},activeItemHandler:function(t){this.props.data.id==t.id?$(e.findDOMNode(this)).addClass("active").removeClass("unread"):$(e.findDOMNode(this)).removeClass("active")},componentDidUpdate:function(){},componentWillUnmount:function(){var e=this;a.off("maillist:filter",e.onFilter),a.off("maillist:trashitem",e.onTrash),a.off("maillist:restoreitem",e.onRestore),a.off("mailitem:update",e.updateHandler),a.off("mailitem:markunread",e.markUnreadHandler),a.off("mailitem:markfavourite",e.markFavoriteHandler),a.off("mailitem:markunfavourite",e.markUnfavouriteHandler),a.off("maildetail:showtoolbar",e.activeItemHandler)},componentDidMount:function(){var s=this,l=s.props.data,c=s.props.mailbox,d=parseInt(t.get("uid")),u=i.get("id");if(u==l.id&&$(e.findDOMNode(this)).addClass("active").removeClass("unread"),"insent"==c){var m=(parseInt(l.receiver_id),l.to||[]);if(m.length>0)for(var p=0;p<m.length;p++){var h=m[p];/g/.test(h)||(h!=d?new o({id:h}).fetch({success:function(t,a){var i=a.fullname;m.length>1&&(i=n.getShortName(i)),$(e.findDOMNode(s.refs["user_"+h])).html(i)}}):$(e.findDOMNode(s.refs["user_"+h])).html(r.t("me")))}}else l.creator_id>0&&new o({id:l.creator_id}).fetch({success:function(t,n){$(e.findDOMNode(s.refs.creator)).html(n.fullname)}});$(e.findDOMNode(this.refs.checkbox)).checkbox({onChange:function(){s.onSelected(),s.props.onFilterChange()}}),$(e.findDOMNode(s)).find("td").not(".nod").on("click",function(e){s.gotoDetail(e)}),a.on("maillist:filter",s.onFilter),a.on("maillist:trashitem",s.onTrash),a.on("maillist:restoreitem",s.onRestore),a.on("mailitem:update",s.updateHandler),a.on("mailitem:markunread",s.markUnreadHandler),a.on("mailitem:markread",s.markReadHandler),a.on("mailitem:markfavourite",s.markFavoriteHandler),a.on("mailitem:markunfavourite",s.markUnfavouriteHandler),a.on("maildetail:showtoolbar",s.activeItemHandler)},renderReceipts:function(){var t=this.props.data,n=t.to||[];return e.createElement("div",null,e.createElement("span",null,r.t("to"),": "),n.map(function(t,n){return e.createElement("span",{key:"recipient_"+n},n>0?", ":"",e.createElement("span",{ref:"user_"+t}))}))},renderCreator:function(){return e.createElement("span",{ref:"creator"})},renderReceiptsAndCreator:function(){var t=this.props.data,n=t.to||[];return 1==t.inbox?e.createElement("div",null,e.createElement("span",{ref:"creator"})," ",e.createElement("span",{className:"ui tiny label"},r.t("inbox"))):1==t.insent?e.createElement("div",null,e.createElement("span",null,r.t("to"),": "),n.map(function(t,n){return e.createElement("span",{key:"recipient_"+n},n>0?", ":"",e.createElement("span",{ref:"user_"+t}))}),e.createElement("span",{className:"ui tiny label"},r.t("insent"))):void 0},renderTwoColumns:function(){var t,n,a=this.props.data,i=(a.to||[],moment.unix(a.date_created)),o=parseInt(a.files.length),s=a.is_read;if(""!=a.summary){var l=a.summary.replace(/\{quoted_sender_time\}/,r.t("quoted_sender_time"));l=l.replace(/\{quoted_sender_write\}/,r.t("quoted_sender_write")),l=l.replace(/\{forwarded_head\}/,""),l=l.replace(/\{forwarded_from\}/,r.t("forwarded_from")),l=l.replace(/\{forwarded_date\}/,r.t("forwarded_date")),l=l.replace(/\{forwarded_to\}/,r.t("forwarded_to")),t=e.createElement("span",{className:"shortsumary"}," - ",l)}return o>0&&(n=e.createElement("i",{className:"icon tc-attach"})),"insent"==this.props.mailbox&&(s=1),e.createElement("tr",{className:0==s?"unread":""},e.createElement("td",{width:"33",className:"nod"},e.createElement("div",{ref:"checkbox",className:"ui checkbox"},e.createElement("input",{type:"checkbox"}),e.createElement("label",null))),e.createElement("td",{width:"33",className:"nod"},e.createElement("a",{ref:"isstarred",onClick:this.toggleStarred,href:"#",className:"mailstar "+(1==a.is_favourite?"isstarred":"")},e.createElement("i",{className:"icon tc-star"}))),e.createElement("td",{ref:"userfrom",className:"cellnowrap",width:"200"},"insent"==this.props.mailbox?this.renderReceipts():this.renderCreator()),e.createElement("td",{className:"maillistsumary"},e.createElement("div",{className:"mailitemsumary"},a.subject," ",t)),e.createElement("td",{width:"33"},n),e.createElement("td",{width:"100",className:"right aligned"},i.format("DD/MM/YYYY")))},renderThreeColumns:function(){var t,n,a=this.props.data,i=(a.to||[],parseInt(a.files.length)),o=a.is_read;if(""!=a.summary){var s=a.summary.replace(/\{quoted_sender_time\}/,r.t("quoted_sender_time"));s=s.replace(/\{quoted_sender_write\}/,r.t("quoted_sender_write")),s=s.replace(/\{forwarded_head\}/,""),s=s.replace(/\{forwarded_from\}/,r.t("forwarded_from")),s=s.replace(/\{forwarded_date\}/,r.t("forwarded_date")),s=s.replace(/\{forwarded_to\}/,r.t("forwarded_to")),t=e.createElement("span",{className:"shortsumary"},s)}return i>0&&(n=e.createElement("i",{className:"icon tc-attach"})),"insent"==this.props.mailbox&&(o=1),e.createElement("tr",{className:0==o?"unread":""},e.createElement("td",{width:"33",className:"nod"},e.createElement("div",{ref:"checkbox",className:"ui checkbox"},e.createElement("input",{type:"checkbox"}),e.createElement("label",null))),e.createElement("td",{width:"33",className:"nod"},e.createElement("a",{ref:"isstarred",onClick:this.toggleStarred,href:"#",className:"mailstar "+(1==a.is_favourite?"isstarred":"")},e.createElement("i",{className:"icon tc-star"}))),e.createElement("td",{className:"maillistsumary"},e.createElement("div",{className:"mailitemtitle"},a.subject),e.createElement("div",null,"insent"==this.props.mailbox?this.renderReceipts():"inbox"==this.props.mailbox?this.renderCreator():this.renderReceiptsAndCreator()),e.createElement("div",{className:"mailitemsumary"},t)),e.createElement("td",{width:"20",style:{paddingLeft:0,paddingRight:0}},n),e.createElement("td",{width:"90",className:"right aligned",style:{paddingLeft:0}},e.createElement(c,{ts:a.date_created,timeformat:"HH:MM, ",format:"DD/MM"})))},render:function(){return"three-columns"==this.props.layout?this.renderThreeColumns():this.renderTwoColumns()}});return d}),define("components/mail/desktop/maillist",["react","helper","eventbus","pref","phonegap","querystring","language/mail","components/mail/desktop/mailitem","collections/group","collections/mail"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"MailListComponent",changeDelay:500,changeTimer:null,loadDelay:400,loadTimer:null,init:!1,cacheItems:{inbox:[],insent:[],instarred:[],intrash:[]},getInitialState:function(){return{items:[],length:0,total:0,hmac:""}},getDefaultProps:function(){return{layout:"two-columns",hideoninit:!1,defaultmailbox:"inbox"}},hideHandler:function(){$(e.findDOMNode(this)).hide()},showHandler:function(){$(e.findDOMNode(this)).show()},loadMail:function(t){n.trigger("maillist:show"),"three-columns"!=this.props.layout&&n.trigger("maildetail:hide"),from=t.from||"menu",mailbox=t.mailbox,keyword=r.get("keyword"),"undefined"!=typeof t.keyword&&(keyword=t.keyword);var i=r.get("sender")||0;"undefined"!=typeof t.sender&&(i=t.sender);var o=r.get("receiver")||0;"undefined"!=typeof t.receiver&&(o=t.receiver),this.loadTimer>0&&clearTimeout(this.loadTimer);var s=this,l=50,d=r.get("mailbox")||"inbox",u=!1;console.log("querystring page",r.get("page")),this.loadTimer=setTimeout(function(){(d!=mailbox||"menu"==from)&&(console.log("reset page to 1",d,mailbox,from),r.set("page",1),d!=mailbox&&(u=!0)),n.trigger("mailfilter:setcheckbox","uncheck"),r.set("mailbox",mailbox);var t={company_id:a.get("cid"),mailbox:mailbox,keyword:keyword,page:r.get("page")||1,limit:l,sort_by:"id",sort_type:"DESC"};console.log(t),i>0&&(t.sender=i),o>0&&(t.receiver=o),(new c).fetch({data:t,success:function(e,t){n.trigger("mailpagination:change",e),s.setState(t)},complete:function(){n.trigger("maillist:completed"),$(e.findDOMNode(s.refs.loader)).removeClass("active")}})},this.loadDelay)},setPage:function(e){e=e||1,1>e&&(e=1),r.set("page",e),a.set("mail_page",e);var t=r.get("mailbox")||"inbox";this.loadMail({mailbox:t,from:"list"})},_onFilterChange:function(){this.changeTimer>0&&clearTimeout(this.changeTimer);var e=this,t=0,a=0,i=r.get("mailbox");this.changeTimer=setTimeout(function(){e.state.items.map(function(n,r){var o=i+n.id;e.refs[o].isChecked()?t++:a++}),0==a?n.trigger("mailfilter:setcheckbox","check"):0==t?n.trigger("mailfilter:setcheckbox","uncheck"):n.trigger("mailfilter:setcheckbox","indeterminate")},this.changeDelay)},getDataIds:function(e,t,a){(new e).getFromIdList({ids:t,success:function(e){$.each(e.items,function(e,t){n.trigger("mailitem:update",{type:a,item:t})})}})},loadMoreInfo:function(){var e=[],t=[];this.state.items.map(function(n,a){if(n.to.length>0)for(var i=0;i<n.to.length;i++)recipientID=n.to[i],/g/.test(recipientID)?e.push(recipientID.replace(/g/,"")):t.push(recipientID)}),this.getDataIds(l,e,"group")},componentDidUpdate:function(){this.loadMoreInfo()},componentWillUnmount:function(){n.off("maillist:load",this.loadMail),n.off("maillist:setpage",this.setPage),n.off("maillist:hide",this.hideHandler),n.off("maillist:show",this.showHandler),i.destroyPullToRefresh()},componentDidMount:function(){var a=60,o=$("#chattab").outerHeight();$(e.findDOMNode(this.refs.maillist)).height(t.getFullHeight()-a-o).niceScroll({autohidemode:!0,cursoropacitymax:.5}),n.on("maillist:load",this.loadMail),n.on("maillist:setpage",this.setPage),n.on("maillist:hide",this.hideHandler),n.on("maillist:show",this.showHandler),this.props.hideoninit||this.loadMail({chain:"init",mailbox:this.props.defaultmailbox,sender:r.get("sender"),receiver:r.get("receiver")}),this.init=!0,i.enablePullToRefresh(this.loadMail)},render:function(){var t,n=this,a=r.get("mailbox");return 0==n.state.total&&this.init&&(t=e.createElement("tr",{className:"row-emptyemail"},e.createElement("td",{colSpan:"5"},e.createElement("div",{className:"empty-mail"},e.createElement("i",{className:"icon tc-search"})," ",o.t("empty"))))),e.createElement("div",{id:"maillist",ref:"maillist",className:this.props.hideoninit?"hide":""},e.createElement("div",{className:"ui loader",ref:"loader"}),e.createElement("table",{style:{margin:"-1px 0 0 0"},className:"ui small fixed table"},e.createElement("tbody",null,n.state.total>0?n.state.items.map(function(t,i){var r=t;return e.createElement(s,{ref:a+r.id,onFilterChange:n._onFilterChange,key:a+r.id+moment().unix(),data:r,mailbox:a,layout:n.props.layout})}):t)))}});return d}),define("components/mail/desktop/mailfilter",["react","eventbus","language/mail"],function(e,t,n){var a=e.createClass({displayName:"Pagination",total:0,getInitialState:function(){return{}},componentDidMount:function(){var n=this;t.on("mailfilter:setcheckbox",n.setCheckbox),t.on("mailpagination:change",n.setTotal),$(e.findDOMNode(n.refs.dropdown)).dropdown({onChange:function(a,i,r){t.trigger("maillist:filter",a),"none"==a&&$(e.findDOMNode(n.refs["checkbox-filter"])).checkbox("set unchecked")}}),$(e.findDOMNode(n.refs["checkbox-filter"])).checkbox({beforeChecked:function(){console.log(n.total);var e=!0;return 0==n.total&&(e=!1),e},onChange:function(){var t=$(e.findDOMNode(n.refs["checkbox-filter"])).checkbox("is checked");t?$(e.findDOMNode(n.refs.dropdown)).dropdown("set selected","all"):$(e.findDOMNode(n.refs.dropdown)).dropdown("set selected","none")}})},componentWillUnmount:function(){t.off("mailfilter:setcheckbox",self.setCheckbox),t.off("mailpagination:change",self.setTotal)},setTotal:function(t){this.total=t.total,0==this.total?$(e.findDOMNode(this.refs["checkbox-filter"])).checkbox("set disabled"):$(e.findDOMNode(this.refs["checkbox-filter"])).checkbox("set enabled")},setCheckbox:function(t){var n=$(e.findDOMNode(this.refs["checkbox-filter"]));"check"==t?n.checkbox("set checked"):"uncheck"==t?n.checkbox("set unchecked"):n.checkbox("set indeterminate")},render:function(){return e.createElement("div",{id:"mail-filter"},e.createElement("div",{className:"ui buttons small"},e.createElement("div",{ref:"checkbox-filter",className:"ui checkbox button"},e.createElement("input",{type:"checkbox"}),e.createElement("label",null)),e.createElement("div",{ref:"dropdown",className:"ui top left floating pointing dropdown icon button"},e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item","data-value":"all"},n.t("filter_all")),e.createElement("div",{className:"item","data-value":"none"},n.t("filter_none")),e.createElement("div",{className:"item","data-value":"read"},n.t("filter_read")),e.createElement("div",{className:"item","data-value":"unread"},n.t("filter_unread")),e.createElement("div",{className:"item","data-value":"starred"},n.t("filter_starred")),e.createElement("div",{className:"item","data-value":"unstarred"},n.t("filter_unstarred"))))))}});return a}),define("components/mail/desktop/mailtoolbar",["backbone","react","pref","helper","eventbus","querystring","language/mail","models/mail"],function(e,t,n,a,i,r,o,s){var l=t.createClass({displayName:"MailToolbarComponent",getInitialState:function(){return{
mailbox:r.get("mailbox")}},setMailbox:function(e){this.setState({mailbox:e.mailbox})},goBack:function(t){t.preventDefault();var a=this.state.mailbox;r.set("id","");var o=parseInt(n.get("mail_page"));e.history.navigate("mail/index/mailbox/"+a+"/page/"+o),i.trigger("maillist:load",{mailbox:a,from:"inbox"})},deleteSelectedMail:function(t){t.preventDefault();var n=this.props.mail_id||0,a=this.state.mailbox;n>0?new s({id:n}).destroy({success:function(){e.history.navigate("mail/index/mailbox/"+a),i.trigger("maillist:load",{mailbox:a})},error:function(e,t){},complete:function(){}}):i.trigger("maillist:trashitem")},restoreSelectedMail:function(){var t=this.props.mail_id||0,a=this.state.mailbox;if(t>0){var r={company_id:n.get("cid"),creator_id:n.get("uid")};$.ajax({type:"PUT",dataType:"json",url:(new s).urlRoot+"/restore/"+t,data:r,success:function(t){e.history.navigate("mail/index/mailbox/"+a),i.trigger("maillist:load",{mailbox:a})}})}else i.trigger("maillist:restoreitem")},markUnreadHandler:function(e){var t=e.currentTarget;$(t).removeClass("active selected"),i.trigger("mailitem:markunread")},markReadHandler:function(e){var t=e.currentTarget;$(t).removeClass("active selected"),i.trigger("mailitem:markread")},markFavoriteHandler:function(e){var t=e.currentTarget;$(t).removeClass("active selected"),i.trigger("mailitem:markfavourite")},markUnfavouriteHandler:function(e){var t=e.currentTarget;$(t).removeClass("active selected"),i.trigger("mailitem:markunfavourite")},componentWillUnmount:function(){i.off("maillist:load",this.setMailbox)},componentDidMount:function(){i.on("maillist:load",this.setMailbox),$(t.findDOMNode(this.refs.otheraction)).dropdown()},render:function(){return t.createElement("div",null,t.createElement("div",{ref:"mailtoolbar"},this.props.mail_id>0?t.createElement("a",{href:"#",onClick:this.goBack,className:"ui icon default button",style:{fontSize:"0.930571rem",marginRight:"5px"},title:o.t("back")},o.t("back")):"",t.createElement("a",{href:"#",className:"ui button default small",onClick:this.deleteSelectedMail,style:{padding:"0.885714em 1.0em 0.78571429em",marginRight:"5px"},title:o.t("delete")},"intrash"==this.state.mailbox?o.t("delete_permanent"):o.t("delete")),"intrash"==this.state.mailbox?t.createElement("a",{href:"#",className:"ui button default small",onClick:this.restoreSelectedMail,style:{padding:"0.885714em 1.0em 0.78571429em"},title:o.t("restore")},o.t("restore")):"",t.createElement("div",{className:"ui dropdown button otheraction",ref:"otheraction"},o.t("other_action")," ",t.createElement("i",{className:"dropdown icon"}),t.createElement("div",{className:"menu"},t.createElement("div",{className:"item",onClick:this.markReadHandler},o.t("mark_read")),t.createElement("div",{className:"item",onClick:this.markUnreadHandler},o.t("mark_unread")),t.createElement("div",{className:"item",onClick:this.markFavoriteHandler},o.t("mark_favourite")),t.createElement("div",{className:"item",onClick:this.markUnfavouriteHandler},o.t("mark_unfavourite"))))))}});return l}),define("components/mail/desktop/pagination",["react","eventbus","language/default"],function(e,t,n){var a=e.createClass({displayName:"Pagination",getInitialState:function(){return{totalPage:1,currentPage:1,total:0,startRecord:1,endRecord:50}},componentDidMount:function(){var e=this;t.on("mailpagination:change",e._onChange)},componentWillUnmount:function(){t.off("mailpagination:change",this._onChange)},_onChange:function(e){var t=this,n=Math.ceil(e.total/e.limit),a=(e.currentpage-1)*e.limit,i=a+e.limit;i>e.total&&(i=e.total);var r={totalPage:n,currentPage:e.currentpage,total:e.total,startRecord:a+1,endRecord:i};t.setState(r)},_handleClick:function(e){if(e.preventDefault(),$(e.target).hasClass("item")?ele=$(e.target):ele=$(e.target).parents(".item").eq(0),!ele.hasClass("active")&&!ele.hasClass("disabled")){var n=ele.attr("href").replace("#","");t.trigger("maillist:setpage",n)}},render:function(){var t=this.state.total,a=(this.state.currentPage-2,this.state.currentPage+2,this.state.startRecord),i=this.state.endRecord;0==t&&(a=0,i=0);var r=parseInt(this.state.currentPage),o=parseInt(this.state.totalPage);return e.createElement("div",{id:"mail-pagination"},e.createElement("span",{className:"item pagination-info"},e.createElement("strong",null,a," - ",i),"  ",n.t("in_total").toLowerCase()," ",e.createElement("strong",null,t)),e.createElement("div",{onClick:this._handleClick,className:"ui pagination menu small"},e.createElement("a",{href:"#"+(r-1),title:n.t("newer"),className:"icon item "+(1==r?"disabled":"")},e.createElement("i",{className:"tc-left icon"})),e.createElement("a",{href:"#"+(r+1),title:n.t("older"),className:"icon item "+(0==t||r==o?"disabled":"")},e.createElement("i",{className:"tc-right icon"}))))}});return a}),define("components/quicksearch/searchmulti",["react","backbone","pref","helper","cacheddata","eventbus","querystring","models/user"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"SearchBoxComponent",timer:null,getInitialState:function(){return{items:{}}},getDefaultProps:function(){return{ignore_words_list:[],placeholder:"Tìm kiếm nhanh...",size:"small",fluid:!0,endpointSettings:[],defaultKeyword:"",onPressEnter:function(e){}}},reset:function(){$(e.findDOMNode(this.refs.input)).val(""),$(e.findDOMNode(this.refs.results)).removeClass("visible")},setText:function(t){$(e.findDOMNode(this.refs.input)).val(t)},loadData:function(t){for(var r=this,l=r.props.endpointSettings.length,c=0,d={},u=0;u<this.props.ignore_words_list.length;u++){var m=this.props.ignore_words_list[u];t=t.replace(m,"").trim()}""!=t?(r.props.endpointSettings.map(function(e,u){var m=1e4,p=0;if(isNaN(e.limit)||(m=e.limit),e.cache){if(i.has(e.cachename)){var h=i.get(e.cachename),f=h().get();$.each(f,function(n,i){if("employee"==e.cachename)for(var r=0;""==i[e.field.title]&&(new s({id:i.user_id}).fetch({success:function(t,n){t[e.field.title]=n.fullname,r++}}),100!=r););var o=a.codau2khongdau(i[e.field.title].toLowerCase());return!((i[e.field.title].toLowerCase().indexOf(t.toLowerCase())>=0||o.indexOf(t)>=0)&&("function"!=typeof e.filter||e.filter(i))&&("undefined"==typeof d[e.name]&&(d[e.name]={name:e.text,onClick:e.onClick,results:[]}),d[e.name].results.push({value:i[e.field.value],title:i[e.field.title],description:i[e.field.description]}),p++,p>=m))&&void 0})}c++}else if(""!=e.url){var g={company_id:n.get("cid"),keyword:t};"mail"==e.name&&(g.mailbox=o.get("mailbox")),$.ajax({method:"GET",url:e.url,data:g,dataType:"json",success:function(t){if(t.items.length>0)for(var n=0;n<t.items.length;n++){var a=t.items[n];m>p&&("function"!=typeof e.filter||e.filter(a))&&("undefined"==typeof d[e.name]&&(d[e.name]={name:e.text,onClick:e.onClick,results:[]}),d[e.name].results.push({value:a[e.field.value],title:a[e.field.title],description:a.hasOwnProperty(e.field.description)?a[e.field.description]:""}),p++)}},complete:function(){c++,c==l&&r.setState({items:d})}})}}),c==l&&r.setState({items:d})):($(e.findDOMNode(r.refs.results)).removeClass("visible"),r.setState({items:[]}))},onKeyupHandler:function(t){var n=this,a=t.keyCode?t.keyCode:t.which,i=$(e.findDOMNode(n.refs.input)).val();n.timer>0&&clearTimeout(n.timer),13==a?(n.props.onPressEnter(i),$(e.findDOMNode(n.refs.results)).removeClass("visible")):n.timer=setTimeout(function(){$(e.findDOMNode(n.refs.results)).addClass("visible"),n.loadData(i)},500)},hideResults:function(){$(e.findDOMNode(this.refs.results)).removeClass("visible")},onFocusEvent:function(){var t=this;$(e.findDOMNode(this.refs.input)).on("click",function(n){n.preventDefault(),n.stopPropagation();var a=$(e.findDOMNode(t.refs.input)).val();""!=a&&(t.timer>0&&clearTimeout(t.timer),console.log(a),t.timer=setTimeout(function(){$(e.findDOMNode(t.refs.results)).addClass("visible"),t.loadData(a)},500))})},onBlurEvent:function(){$("#container").off("click",this.onClickBody).on("click",this.onClickBody)},onClickBody:function(t){clearTimeout(this.timer),$(e.findDOMNode(this.refs.results)).removeClass("visible"),this.hideResults()},onClickItem:function(e,t,n){this.hideResults(),"function"==typeof n&&n(e,t)},componentDidUpdate:function(){var t=this;t.onBlurEvent(),t.onFocusEvent();for(property in t.state.items)for(var n=t.state.items[property],a=0;a<n.results.length;a++){var i=n.results[a],r=property+"_"+i.value;$(e.findDOMNode(t.refs[r])).off("click").on("click",function(e){e.preventDefault(),e.stopPropagation();var n=$(this).attr("data-value"),a=$(this).attr("data-name");t.onClickItem(n,$(this),t.state.items[a].onClick)})}},componentWillUnmount:function(){$("#container").off("click",this.onClickBody)},componentDidMount:function(){0==this.props.endpointSettings.length&&$(e.findDOMNode(this.refs.searchwrapper)).hide(),this.onBlurEvent(),this.onFocusEvent()},render:function(){var t=this,n=t.state.items,a=Object.keys(n).length,i=[];if(a>0)for(var r in n){var o=n[r],s=e.createElement("div",{className:"category",ref:r,key:r},e.createElement("div",{className:"name"},o.name),o.results.map(function(t,n){return e.createElement("a",{className:"result "+r+"-"+t.value,"data-name":r,ref:r+"_"+t.value,"data-value":t.value,key:r+t.value+n},e.createElement("div",{className:"content"},e.createElement("div",{className:"title"},t.title),e.createElement("div",{className:"description"},t.description)))}));i.push(s)}else{var s=e.createElement("div",{className:"category",key:r+moment().unix()},e.createElement("a",{className:"result notfound"},e.createElement("div",{className:"content"},e.createElement("div",{className:"title"},"Không tìm thấy kết quả nào!"))));i.push(s)}return e.createElement("div",{ref:"searchwrapper",id:"searchwrapper"},e.createElement("div",{className:"ui category fluid search"},e.createElement("div",{className:"ui icon input "+this.props.size+(this.props.fluid?" fluid":"")},e.createElement("input",{type:"text",ref:"input",defaultValue:this.props.defaultKeyword,placeholder:this.props.placeholder,onKeyUp:this.onKeyupHandler}),e.createElement("i",{className:"tc-search icon"})),e.createElement("div",{className:"results transition",ref:"results"},i)))}});return l}),define("components/mail/desktop/mailheadtoolbar",["react","helper","eventbus","pref","setting","querystring","language/mail","components/mail/desktop/mailfilter","components/mail/desktop/mailtoolbar","components/mail/desktop/pagination","components/quicksearch/searchmulti","models/user"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"MailHeadToolbarComponent",getDefaultProps:function(){return{layout:"two-columns"}},currentData:{mailbox:""!=r.get("mailbox")?r.get("mailbox"):"inbox",keyword:r.get("keyword"),sender:r.get("sender"),receiver:r.get("receiver")},showListToolBar:function(t){t=t||"uncheck","uncheck"!=t?(e.unmountComponentAtNode(e.findDOMNode(this.refs.moretoolbar)),e.render(e.createElement(l,{key:moment.unix()}),e.findDOMNode(this.refs.moretoolbar)),$(e.findDOMNode(this.refs.moretoolbar)).show()):$(e.findDOMNode(this.refs.moretoolbar)).hide(),$(e.findDOMNode(this.refs.mailfilter)).show(),$(e.findDOMNode(this.refs.searchmulti)).show(),$(e.findDOMNode(this.refs.pagination)).show(),$(e.findDOMNode(this.refs.changelayoutbox)).show()},mailListHandler:function(e){this.showListToolBar("uncheck");var t=e.keyword||"";this.currentData.keyword=t,this.currentData.mailbox=e.mailbox,"undefined"!=typeof e.sender?r.set("sender",e.sender):r.set("sender",0),"undefined"!=typeof e.receiver?r.set("receiver",e.receiver):r.set("receiver",0),""==t&&this.refs.searchmulti.reset(),this.forceUpdate()},showDetailToolBar:function(t){"two-columns"==this.props.layout?(e.unmountComponentAtNode(e.findDOMNode(this.refs.moretoolbar)),e.render(e.createElement(l,{key:t.id,mail:t,mail_id:t.id}),e.findDOMNode(this.refs.moretoolbar)),$(e.findDOMNode(this.refs.mailfilter)).hide(),$(e.findDOMNode(this.refs.searchmulti)).hide(),$(e.findDOMNode(this.refs.pagination)).hide(),$(e.findDOMNode(this.refs.moretoolbar)).show(),$(e.findDOMNode(this.refs.changelayoutbox)).hide()):($(e.findDOMNode(this.refs.mailfilter)).show(),$(e.findDOMNode(this.refs.searchmulti)).show(),$(e.findDOMNode(this.refs.pagination)).show(),$(e.findDOMNode(this.refs.moretoolbar)).hide(),$(e.findDOMNode(this.refs.changelayoutbox)).show())},keywordPressHandler:function(t){if(13==t.keyCode){var a=$(e.findDOMNode(this.refs.keyword)).val(),i=r.get("sender"),o=r.get("receiver");""==a&&(i=0,o=0);var s={mailbox:r.get("mailbox"),keyword:a,sender:i,receiver:o};if(this.currentData.mailbox!=s.mailbox||this.currentData.keyword!=s.keyword||this.currentData.sender!=s.sender||this.currentData.receiver!=s.receiver){this.currentData=s;var l="mail/index/mailbox/"+(""!=s.mailbox?s.mailbox:"inbox");""!=s.keyword&&(l+="/keyword/"+s.keyword),Backbone.history.navigate(l),n.trigger("maillist:load",s)}}},onClickMailItem:function(e,t){e>0&&n.trigger("mail:open",e)},onClickUserItem:function(e,t){var a="mail/index/mailbox/"+this.currentData.mailbox;switch(this.currentData.mailbox){case"inbox":case"instarred":case"intrash":r.set("sender",e),this.currentData.sender=e,a+="/sender/"+e,Backbone.history.navigate(a),n.trigger("maillist:load",{mailbox:this.currentData.mailbox,sender:e});break;case"insent":r.set("receiver",e),this.currentData.receiver=e,a+="/receiver/"+e,Backbone.history.navigate(a),n.trigger("maillist:load",{mailbox:this.currentData.mailbox,receiver:e})}},onPressEnter:function(e){var t={mailbox:r.get("mailbox"),keyword:e,sender:r.get("sender"),receiver:r.get("receiver")};if(""==e&&(t.sender=0,t.receiver=0),this.currentData.mailbox!=t.mailbox||this.currentData.keyword!=t.keyword||this.currentData.sender!=t.sender||this.currentData.receiver!=t.receiver){this.currentData=t;var a="mail/index/mailbox/"+t.mailbox;""!=t.keyword&&(a+="/keyword/"+t.keyword),Backbone.history.navigate(a),n.trigger("maillist:load",t)}},changeLayoutHandler:function(t,i){var r=i.currentTarget;$(e.findDOMNode(this.refs.changelayoutbox)).find(".active").removeClass("active"),$(r).addClass("active"),a.set("maillayout",t),n.trigger("mail:changelayout",t)},initData:function(){var e=this;r.get("sender")>0&&new u({id:r.get("sender")}).fetch({success:function(t,n){e.refs.searchmulti.setText(o.t("sender")+": "+n.fullname)}}),r.get("receiver")>0&&new u({id:r.get("receiver")}).fetch({success:function(t,n){e.refs.searchmulti.setText(o.t("receiver")+": "+n.fullname)}})},componentDidUpdate:function(){this.initData(),t.initMyTip($(e.findDOMNode(this.refs.changelayoutbox)).find("a"))},componentWillUnmount:function(){n.off("maillist:load",this.mailListHandler),n.off("mailfilter:setcheckbox",this.showListToolBar),n.off("maildetail:showtoolbar",this.showDetailToolBar)},componentDidMount:function(){n.on("maillist:load",this.mailListHandler),n.on("mailfilter:setcheckbox",this.showListToolBar),n.on("maildetail:showtoolbar",this.showDetailToolBar),this.initData(),t.initMyTip($(e.findDOMNode(this.refs.changelayoutbox)).find("a"))},render:function(){var t=this.props.layout,n=o.t("inbox"),a=o.t("sender");"instarred"==this.currentData.mailbox?(n=o.t("starred"),a=o.t("sender")):"insent"==this.currentData.mailbox?(n=o.t("insent"),a=o.t("receiver")):"intrash"==this.currentData.mailbox&&(n=o.t("intrash"),a=o.t("sender"));var r=[{name:"user",text:a,cache:!0,cachename:"employee",field:{value:"user_id",title:"full_name",description:"job_title"},filter:function(e){return 0==e.is_group_id},limit:3,onClick:this.onClickUserItem},{name:"mail",text:n,field:{value:"id",title:"subject",description:"summary"},url:i.rooturl+"v1/mails?sort_by=id&sort_type=DESC",limit:5,onClick:this.onClickMailItem}],l=[o.t("sender")+":",o.t("receiver")+":"];return e.createElement("div",{id:"mailheadtoolbar",ref:"mailheadtoolbar"},e.createElement("div",{ref:"listtoolbar"},e.createElement("div",{id:"mailheadtoolbarleft"},e.createElement(s,{ref:"mailfilter"}),e.createElement("div",{id:"moretoolbar",ref:"moretoolbar"})),e.createElement("div",{id:"mailheadtoolbarright"},e.createElement("div",{className:"changelayoutbox",ref:"changelayoutbox"},e.createElement("a",{href:"javascript:void(0)",title:o.t("two_columns"),className:"two-columns"==t?"active":"",onClick:this.changeLayoutHandler.bind(this,"two-columns")},e.createElement("i",{className:"tc-two-col"})),e.createElement("a",{href:"javascript:void(0)",title:o.t("three_columns"),className:"three-columns"==t?"active":"",onClick:this.changeLayoutHandler.bind(this,"three-columns")},e.createElement("i",{className:"tc-three-col"}))),e.createElement("div",{style:{float:"left",width:"320px"}},e.createElement(d,{ref:"searchmulti",ignore_words_list:l,defaultKeyword:this.currentData.keyword,placeholder:o.t("keyword_placeholder"),endpointSettings:r,onPressEnter:this.onPressEnter})),e.createElement(c,{ref:"pagination"}))))}});return m}),define("components/mail/desktop/detail",["react","pref","helper","eventbus","querystring","language/mail","language/default","components/mail/desktop/replyform","components/filestrip","models/user","models/group","models/employee","models/mail"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"MailDetailComponent",replyForm:null,replyAllForm:null,forwardForm:null,currentID:0,getInitialState:function(){return{data:{id:0,to:[]}}},hideHandler:function(){$(e.findDOMNode(this.refs.moreactiondetail)).dropdown("hide"),$(e.findDOMNode(this.refs.detailinfo)).dropdown("hide"),$(e.findDOMNode(this)).hide()},showHandler:function(t){$(e.findDOMNode(this)).show(),this.currentID!=t?(this.currentID=t,this.loadData(t)):a.trigger("maildetail:showtoolbar",this.state.data)},loadData:function(t){var n=this;$(e.findDOMNode(n.refs.loader)).addClass("active"),new m({id:t}).fetch({success:function(e,t){n.setState({data:t}),a.trigger("maildetail:showtoolbar",t),a.trigger("mailleft:countinbox")},complete:function(){n.currentID=t,$(e.findDOMNode(n.refs.loader)).removeClass("active"),a.trigger("maillist:completed")}}),$(e.findDOMNode(n.refs.detailinfo)).dropdown()},loadToolBar:function(){$(e.findDOMNode(this.refs.moreactiondetail)).dropdown()},toggleStarred:function(n){n.preventDefault();var a=this.state.data,i=$(e.findDOMNode(this.refs.isstarred)),r={company_id:t.get("cid"),creator_id:t.get("uid")};$.ajax({type:"PUT",dataType:"json",url:(new m).urlRoot+"/starred/"+a.id,data:r,success:function(e){i.hasClass("isstarred")?i.removeClass("isstarred"):i.addClass("isstarred")},error:function(){}})},resetReplyFormHandler:function(){$(e.findDOMNode(this.refs.mailreplyaction)).show()},messageReply:function(t){switch(t=t||"reply",$(e.findDOMNode(this)).find(".reply_form").hide(),$(e.findDOMNode(this.refs.mailreplyaction)).hide(),t){case"reply":$(e.findDOMNode(this.refs.reply_form)).show(),this.replyForm.focusMessage();break;case"reply_all":$(e.findDOMNode(this.refs.reply_all_form)).show(),this.replyAllForm.focusMessage();break;case"forward":$(e.findDOMNode(this.refs.forward_form)).show(),this.forwardForm.focusMessage()}},messageTrash:function(e){var t=i.get("mailbox");e>0&&new m({id:e}).destroy({success:function(){Backbone.history.navigate("mail/index/mailbox/"+t),a.trigger("maillist:load",{mailbox:t})},error:function(e,t){},complete:function(){}})},messageQuoteToggle:function(e){e.preventDefault();var t=e.currentTarget;$(t).next().toggle()},compactReply:function(){var t=this,n=e.createElement("a",{className:"quotedmessagetoggle",href:"#"},e.createElement("i",{className:"tc-more"}));$(e.findDOMNode(this)).find(".quotedmessage").before(e.renderToString(n)),$(e.findDOMNode(this)).find(".quotedmessage").toggle(),$(e.findDOMNode(this)).find(".quotedmessagetoggle").on("click",function(e){t.messageQuoteToggle(e)})},renderReplyForm:function(t,n){var a=this,i=a.state.data;e.render(e.createElement(s,{type:"reply",key:"reply_"+i.id,data:i,sender:t,recipients:n}),e.findDOMNode(a.refs.reply_form),function(){a.replyForm=this}),e.render(e.createElement(s,{type:"reply_all",key:"reply_all_"+i.id,data:i,sender:t,recipients:n}),e.findDOMNode(a.refs.reply_all_form),function(){a.replyAllForm=this}),e.render(e.createElement(s,{type:"forward",key:"forward_"+i.id,data:i,sender:t,recipients:n}),e.findDOMNode(a.refs.forward_form),function(){a.forwardForm=this})},composeHandle:function(e){var t=e.attr("href")||e.attr("data-id");t=parseInt(t),t>0&&a.trigger("mail:compose",[t])},updateReceiptHtml:function(t,n){$(e.findDOMNode(this.refs.receiver)).html(t),$(e.findDOMNode(this.refs.receiverinfo)).html(n)},markUnreadHandler:function(){var n=this;"detail"==this.view&&"two-columns"==t.get("maillayout")&&new m({id:this.state.data.id}).save({company_id:t.get("cid"),creator_id:t.get("uid"),is_read:0},{success:function(t){$(e.findDOMNode(n)).addClass("unread")}})},markReadHandler:function(){var n=this;"detail"==this.view&&"two-columns"==t.get("maillayout")&&new m({id:this.state.data.id}).save({company_id:t.get("cid"),creator_id:t.get("uid"),is_read:1},{success:function(t){$(e.findDOMNode(n)).removeClass("unread")}})},markFavoriteHandler:function(){var n=this;"detail"==this.view&&"two-columns"==t.get("maillayout")&&new m({id:this.state.data.id}).save({company_id:t.get("cid"),creator_id:t.get("uid"),is_favourite:1},{success:function(t){$(e.findDOMNode(n.refs.isstarred)).addClass("isstarred")}})},markUnfavouriteHandler:function(){var n=this;"detail"==this.view&&"two-columns"==t.get("maillayout")&&new m({id:this.state.data.id}).save({company_id:t.get("cid"),creator_id:t.get("uid"),is_favourite:0},{success:function(t){$(e.findDOMNode(n.refs.isstarred)).removeClass("isstarred")}})},markOnList:function(){this.view="list"},markOnDetail:function(){this.view="detail"},unmountDynamicComponents:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.reply_form)),e.unmountComponentAtNode(e.findDOMNode(this.refs.reply_all_form)),e.unmountComponentAtNode(e.findDOMNode(this.refs.forward_form)),e.unmountComponentAtNode(e.findDOMNode(this.refs.avatar))},componentDidUpdate:function(){var a=this,i=t.get("uid"),o=[],s={},l=[],u=2,m=0;o=this.state.data.to||o,u=o.length+1,this.state.data.creator_id>0&&new c({id:this.state.data.creator_id}).fetch({success:function(t,i){e.render(e.createElement("img",{className:"ui avatar image",src:n.getAvatarPath(i.avatar)}),e.findDOMNode(a.refs.avatar)),$(e.findDOMNode(a.refs.sender)).html(i.fullname),$(e.findDOMNode(a.refs.senderinfo)).html(i.fullname),s=i,m++,m==u&&(a.updateReceiptHtml(p,h),a.renderReplyForm(s,l))},complete:function(){}});for(var p="",h="",f=0;f<o.length;f++){var g=o[f];/g/.test(g)?new d({id:g.replace(/g/,"")}).fetch({success:function(e,t){""!=p&&(p+=", ",h+="<br />"),t.fullname=t.name,p+=t.name,h+=t.name,l.push(t),m++,m==u&&(p=r.t("to")+" "+p,a.updateReceiptHtml(p,h),a.renderReplyForm(s,l))},complete:function(){m++,m==u&&(p=r.t("to")+" "+p,a.updateReceiptHtml(p,h),a.renderReplyForm(s,l))}}):new c({id:g}).fetch({success:function(e,t){var c=(t.fullname.split(" "),t.fullname),d=c;o.length>1&&(d=n.getShortName(c)),""!=p&&(p+=", ",h+="<br />"),p+=o[f]!=i?d:r.t("me"),h+=c,l.push(t),m++,m==u&&(p=r.t("to")+" "+p,a.updateReceiptHtml(p,h),a.renderReplyForm(s,l))},complete:function(){}})}$(e.findDOMNode(this.refs.moreactiondetail)).dropdown(),$(e.findDOMNode(a.refs.detailinfo)).dropdown(),$(e.findDOMNode(a.refs.mailtext)).find("a.mailto").each(function(){$(this).on("click",function(e){e.preventDefault(),a.composeHandle($(this))})}),$(e.findDOMNode(a.refs.mailtext)).find("a.mailto").each(function(){$(this).on("click",function(e){e.preventDefault(),a.composeHandle($(this))})}),this.compactReply()},componentWillUnmount:function(){a.off("maildetail:hide",this.hideHandler),a.off("maildetail:show",this.showHandler),a.off("replyform:reset",this.resetReplyFormHandler),a.off("mailitem:markunread",self.markUnreadHandler),a.off("mailitem:markread",self.markReadHandler),a.off("mailitem:markfavourite",self.markFavoriteHandler),a.off("mailitem:markunfavourite",self.markUnfavouriteHandler),a.off("mailfilter:setcheckbox",this.markOnList),a.off("maildetail:showtoolbar",this.markOnDetail),this.unmountDynamicComponents()},componentDidMount:function(){var t=this,i=60,r=$("#chattab").outerHeight();$(e.findDOMNode(this.refs.maildetail)).height(n.getFullHeight()-i-r).niceScroll({autohidemode:!0,cursoropacitymax:.5}),a.on("maildetail:hide",t.hideHandler),a.on("maildetail:show",t.showHandler),a.on("replyform:reset",this.resetReplyFormHandler),t.loadData(this.props.id),$(e.findDOMNode(t.refs.moreactiondetail)).dropdown(),a.on("mailitem:markunread",t.markUnreadHandler),a.on("mailitem:markread",t.markReadHandler),a.on("mailitem:markfavourite",t.markFavoriteHandler),a.on("mailitem:markunfavourite",t.markUnfavouriteHandler),a.on("mailfilter:setcheckbox",this.markOnList),a.on("maildetail:showtoolbar",this.markOnDetail)},render:function(){var t=this,a=t.state.data;if(a.id>0){var i=moment.unix(a.date_created),s=i.format("HH:mm")+" "+r.t("day")+" "+i.format("DD")+" "+r.t("month")+" "+i.format("MM")+" "+r.t("year")+" "+i.format("YYYY"),c=a.content.replace(/\{quoted_sender_time\}/g,r.t("quoted_sender_time"));c=c.replace(/\{quoted_sender_write\}/g,r.t("quoted_sender_write")),c=c.replace(/\{forwarded_head\}/g,r.t("forwarded_head")),c=c.replace(/\{forwarded_from\}/g,r.t("forwarded_from")),c=c.replace(/\{forwarded_date\}/g,r.t("forwarded_date")),c=c.replace(/\{forwarded_to\}/g,r.t("forwarded_to"));var d=!1;return a.to.length>1?d=!0:1==a.to.length&&/g/.test(a.to[0])&&(d=!0),e.createElement("div",{id:"maildetail",key:a.id,ref:"maildetail"},e.createElement("div",{id:"maildetailleft"},e.createElement("div",{className:"ui loader",ref:"loader"}),e.createElement("div",{id:"mailsubject"},e.createElement("h3",null,a.subject)),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"ui items maildetailmetabox"},e.createElement("div",{className:"item"},e.createElement("div",{ref:"avatar"}),e.createElement("div",{className:"left aligned content"},e.createElement("div",{className:"meta"},e.createElement("span",{ref:"sender"}),e.createElement("br",null),e.createElement("span",{ref:"receiver"}),e.createElement("div",{className:"ui pointing top left dropdown",id:"detailinfo",ref:"detailinfo"},e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item"},e.createElement("table",{className:"ui very basic table"},e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{width:"70",className:"right aligned",style:{verticalAlign:"top"}},r.t("from"),":"),e.createElement("td",{ref:"senderinfo"})),e.createElement("tr",null,e.createElement("td",{className:"right aligned",style:{verticalAlign:"top"}},r.t("to"),":"),e.createElement("td",{ref:"receiverinfo"})),e.createElement("tr",null,e.createElement("td",{className:"right aligned",style:{verticalAlign:"top"}},r.t("date"),":"),e.createElement("td",{ref:"dateinfo"},s)),e.createElement("tr",null,e.createElement("td",{className:"right aligned",style:{verticalAlign:"top"}},r.t("subject"),":"),e.createElement("td",{ref:"dateinfo"},a.subject))))))))),e.createElement("div",{className:"right aligned content clearing"},e.createElement("div",{className:"ui right floated"},e.createElement("span",{className:"detaildatecreated"},i.format("DD")," ",r.t("month")," ",i.format("MM")," (",n.relativeTime(a.date_created),")"),e.createElement("a",{ref:"isstarred",href:"#",onClick:this.toggleStarred,className:"mailstar "+(1==a.isstarred?"isstarred":"")},e.createElement("i",{className:"icon tc-star"})),e.createElement("div",{className:"ui mini buttons",style:{marginLeft:"5px"}},e.createElement("div",{className:"ui button",onClick:this.messageReply.bind(this,"reply")},r.t("reply")),e.createElement("div",{className:"ui floating dropdown icon button",ref:"moreactiondetail"},e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item",onClick:this.messageReply.bind(this,"reply")},r.t("reply")),d?e.createElement("div",{className:"item",onClick:this.messageReply.bind(this,"reply_all")},r.t("reply_all")):"",e.createElement("div",{className:"item",onClick:this.messageReply.bind(this,"forward")},r.t("forward")),e.createElement("div",{className:"item",onClick:this.messageTrash.bind(this,a.id)},r.t("delete_this"))))))))),e.createElement("div",{id:"mailtext",ref:"mailtext",key:moment().unix(),dangerouslySetInnerHTML:{__html:c}}),a.files.length>0?e.createElement("div",{id:"mailfile"},e.createElement("div",{className:"ui divider"}),e.createElement("p",null,e.createElement("strong",null,a.files.length," ",r.t("attachment"))),e.createElement(l,{enableRenderBigOnSinglePhoto:!1,files:a.files})):"",e.createElement("div",{className:"ui divider"}),e.createElement("div",{id:"mailreplybox"},e.createElement("div",{id:"mailreplyaction",ref:"mailreplyaction"},o.t("link_click_to_do")," ",e.createElement("a",{href:"javascript:void(0)",onClick:this.messageReply.bind(this,"reply")},r.t("reply")),d?e.createElement("span",null,","," ",e.createElement("a",{href:"javascript:void(0)",onClick:this.messageReply.bind(this,"reply_all")},r.t("reply_all"))):null," ",o.t("or").toLowerCase()," ",e.createElement("a",{href:"javascript:void(0)",onClick:this.messageReply.bind(this,"forward")},r.t("forward"))),e.createElement("div",{ref:"reply_form",className:"reply_form"}),e.createElement("div",{ref:"reply_all_form",className:"reply_form",style:{display:"none"}}),e.createElement("div",{ref:"forward_form",className:"reply_form",style:{display:"none"}}))),e.createElement("div",{id:"maildetailright"}),e.createElement("div",{style:{clear:"both"}}))}return e.createElement("div",{id:"maildetail",ref:"maildetail"},e.createElement("div",{id:"maildetailleft"},e.createElement("div",{className:"ui loader",ref:"loader"})))}});return p}),define("components/mail/desktop/compose",["react","helper","eventbus","pref","language/mail","language/default","components/employeepicker","components/tinymce","models/file","models/mail","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"MailComposeComponent",alreadyInitFileUpload:!1,allowSend:!0,formError:{subject:["error_subject_required"],message:["error_message_required","error_message_too_short","error_message_too_long"],employee:["error_empty_to"]},getDefaultProps:function(){return{popup:!0,recipients:[]}},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.employees)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},createMailHandle:function(r){var o=this;if(o.allowSend){o.allowSend=!1;var s=$(e.findDOMNode(this.refs.form));s.addClass("loading");var l=$(e.findDOMNode(this.refs.submit));l.addClass("loading");var d=[];$(e.findDOMNode(o)).find(".attachedfileid").each(function(e){d.push($(this).attr("data-id"))});var u=o.refs.editor.getEditor(),m="";null!=u&&(m=u.getContent(),m=t.trimEmptyParagraph(m)),(new c).save({company_id:a.get("cid"),creator_id:a.get("uid"),subject:$(e.findDOMNode(o.refs.subject)).val(),content:m,file_list:d,to:o.getSelectedUserIdList()},{success:function(a,r){t.showSuccess(i.t("success_add")),$(e.findDOMNode(o)).find(".uploadifive-queue-item").hide(),o.props.popup?(o.hidePopup(),n.trigger("mailleft:activemenu","insent"),n.trigger("maillist:load",{mailbox:"insent"})):Backbone.history.navigate("mail/index/mailbox/insent/id/"+r.id,{trigger:!0})},error:function(e,n){t.notifyErrorAndForm(n,i,"error_add",s,o.formError)},complete:function(){s.removeClass("loading"),l.removeClass("loading"),o.allowSend=!0}})}},formSubmit:function(){this.refs.editor.getEditor().save(),$(e.findDOMNode(this.refs.form)).submit()},hidePopup:function(){$(e.findDOMNode(this.refs.mailcompose)).modal("hide"),n.trigger("compose:unmount")},showPopup:function(){var t=this;this.props.popup&&$(e.findDOMNode(this.refs.mailcompose)).modal({context:this.getDOMNode(),closable:!1,autofocus:!1,onHidden:function(){t.hidePopup()},onVisible:function(){setTimeout(function(){$(e.findDOMNode(t.refs.subject)).focus()},200)}}).modal("show")},handleKeyup:function(e,t){e.preventDefault(),e.keyCode?e.keyCode:e.which},handleEditorFocus:function(e,t){},
handleEditorBlur:function(e,t){},componentWillUnmount:function(){},componentWillUpdate:function(){this.showPopup()},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.form)).form({fields:{subject:{identifier:"subject",rules:[{type:"empty",prompt:i.t("error_subject_required")}]},message:{identifier:"message",rules:[{type:"empty",prompt:i.t("error_message_required")}]},employee:{identifier:"employee",rules:[{type:"empty",prompt:i.t("error_empty_to")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.createMailHandle()}}),this.alreadyInitFileUpload||((new l).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new l).OBJECTTYPE_MESSAGE,"ffile",(new l).STATUS_ENABLE),this.alreadyInitFileUpload=!0),this.showPopup()},render:function(){var t=[];this.props.recipients.length>0&&(t=this.props.recipients);var n={menubar:!0,autoresize_min_height:170,autoresize_max_height:170,toolbar:"formatselect | bold italic underline | alignleft aligncenter alignright | bullist numlist | indent outdent | link unlink  teamcropfilepicker"};return e.createElement("div",{id:"mailcompose-inner"},e.createElement("div",{className:"ui "+(this.props.popup?"modal":""),ref:"mailcompose"},this.props.popup?e.createElement("div",{className:"header"},i.t("new_mail")):null,e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"field",style:{marginBottom:this.props.popup?0:15}},e.createElement("label",null,i.t("recipient")),e.createElement(o,{defaultvalue:t,getgroup:!0,ref:"employees",inputname:"employee"})),e.createElement("div",{className:"field",style:{marginBottom:this.props.popup?0:15}},e.createElement("label",null,i.t("subject")),e.createElement("input",{type:"text",ref:"subject",name:"subject"})),e.createElement("div",{className:"field",style:{marginBottom:this.props.popup?0:15}},e.createElement("label",null,i.t("message")),e.createElement(s,{ref:"editor",id:"message",name:"message",content:"",autoLoad:!0,config:n,onKeyup:this.handleKeyup,onFocus:this.handleEditorFocus,onBlur:this.handleEditorBlur})),e.createElement("div",{className:"field",style:{marginBottom:this.props.popup?0:15}},e.createElement("div",{style:{marginRight:120}},e.createElement("input",{type:"file",ref:"fileinput",id:"ffile",name:"ffile",multiple:"multiple",className:"hide"}))),this.props.popup?null:e.createElement(d,{required:!1,leftwide:"hide"},e.createElement("a",{className:"ui teal button",href:"javascript: void(0)",ref:"submit",onClick:this.formSubmit},r.t("send"))))),this.props.popup?e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic cancel close button"},r.t("close")),e.createElement("a",{className:"ui teal button",href:"javascript: void(0)",ref:"submit",onClick:this.formSubmit},r.t("send"))):null))}});return u}),define("components/email/desktop/index",["backbone","react","helper","eventbus","querystring","components/mail/desktop/mailleft","components/mail/desktop/maillist","components/mail/desktop/mailheadtoolbar","components/mail/desktop/detail","components/mail/desktop/compose"],function(e,t,n,a,i,r,o,s,l,c){var d=t.createClass({displayName:"MailDesktopComponent",openHandler:function(t){e.history.navigate("mail/index/mailbox/"+i.get("mailbox")+"/id/"+t),a.trigger("maillist:hide"),a.trigger("maildetail:show",t)},composeHandler:function(e){e=e||[],t.render(t.createElement(c,{recipients:e}),t.findDOMNode(this.refs.mailcompose))},unmountCompose:function(){t.unmountComponentAtNode(t.findDOMNode(this.refs.mailcompose))},checkOpenDetail:function(){""!=i.get("id")?a.trigger("mail:open",i.get("id")):(a.trigger("maildetail:hide"),a.trigger("maillist:load",i.get("mailbox")))},componentDidUpdate:function(){this.checkOpenDetail()},componentWillUnmount:function(){this.unmountCompose(),a.off("mail:open",this.openHandler),a.off("mail:compose",this.composeHandler),a.off("compose:unmount",this.unmountCompose)},componentDidMount:function(){a.on("mail:open",this.openHandler),a.on("mail:compose",this.composeHandler),a.on("compose:unmount",this.unmountCompose),this.checkOpenDetail()},render:function(){var e="inbox";return""!=i.get("mailbox")&&(e=i.get("mailbox")),t.createElement("div",{id:"mailbox"},t.createElement(r,{defaultmailbox:e}),t.createElement("div",{id:"mailcontainer"},t.createElement(s,null),t.createElement(o,{defaultmailbox:e,hideoninit:""!=i.get("id")}),t.createElement(l,null)),t.createElement("div",{ref:"mailcompose"}))}});return d}),define("components/email/desktop/mailfilter",["react","eventbus","language/mail"],function(e,t,n){var a=e.createClass({displayName:"Pagination",total:0,getInitialState:function(){return{}},componentDidMount:function(){var n=this;t.on("mailfilter:setcheckbox",n.setCheckbox),t.on("mailpagination:change",n.setTotal),$(e.findDOMNode(n.refs.dropdown)).dropdown({onChange:function(a,i,r){t.trigger("maillist:filter",a),"none"==a&&$(e.findDOMNode(n.refs["checkbox-filter"])).checkbox("set unchecked")}}),$(e.findDOMNode(n.refs["checkbox-filter"])).checkbox({beforeChecked:function(){console.log(n.total);var e=!0;return 0==n.total&&(e=!1),e},onChange:function(){var t=$(e.findDOMNode(n.refs["checkbox-filter"])).checkbox("is checked");t?$(e.findDOMNode(n.refs.dropdown)).dropdown("set selected","all"):$(e.findDOMNode(n.refs.dropdown)).dropdown("set selected","none")}})},componentWillUnmount:function(){t.off("mailfilter:setcheckbox",self.setCheckbox),t.off("mailpagination:change",self.setTotal)},setTotal:function(t){this.total=t.total,0==this.total?$(e.findDOMNode(this.refs["checkbox-filter"])).checkbox("set disabled"):$(e.findDOMNode(this.refs["checkbox-filter"])).checkbox("set enabled")},setCheckbox:function(t){var n=$(e.findDOMNode(this.refs["checkbox-filter"]));"check"==t?n.checkbox("set checked"):"uncheck"==t?n.checkbox("set unchecked"):n.checkbox("set indeterminate")},render:function(){return e.createElement("div",{id:"mail-filter"},e.createElement("div",{className:"ui buttons small"},e.createElement("div",{ref:"checkbox-filter",className:"ui checkbox button"},e.createElement("input",{type:"checkbox"}),e.createElement("label",null)),e.createElement("div",{ref:"dropdown",className:"ui top left floating pointing dropdown icon button"},e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item","data-value":"all"},n.t("filter_all")),e.createElement("div",{className:"item","data-value":"none"},n.t("filter_none")),e.createElement("div",{className:"item","data-value":"read"},n.t("filter_read")),e.createElement("div",{className:"item","data-value":"unread"},n.t("filter_unread")),e.createElement("div",{className:"item","data-value":"starred"},n.t("filter_starred")),e.createElement("div",{className:"item","data-value":"unstarred"},n.t("filter_unstarred"))))))}});return a}),define("components/email/desktop/mailheadtoolbar",["react","helper","eventbus","components/mail/desktop/mailfilter","components/mail/desktop/mailtoolbar","components/mail/desktop/pagination"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"MailHeadToolbarComponent",componentWillUnmount:function(){n.off("mailfilter:setcheckbox",this.showListToolBar),n.off("maillist:load",this.showListToolBar.bind(this,"uncheck")),n.off("maildetail:showtoolbar",this.showDetailToolBar)},componentDidMount:function(){n.on("maillist:load",this.showListToolBar.bind(this,"uncheck")),n.on("mailfilter:setcheckbox",this.showListToolBar),n.on("maildetail:showtoolbar",this.showDetailToolBar)},showListToolBar:function(t){t=t||"uncheck","uncheck"!=t?(e.unmountComponentAtNode(e.findDOMNode(this.refs.moretoolbar)),e.render(e.createElement(i,{key:moment.unix()}),e.findDOMNode(this.refs.moretoolbar)),$(e.findDOMNode(this.refs.moretoolbar)).show()):$(e.findDOMNode(this.refs.moretoolbar)).hide(),$(e.findDOMNode(this.refs.mailfilter)).show(),$(e.findDOMNode(this.refs.pagination)).show()},showDetailToolBar:function(t){e.unmountComponentAtNode(e.findDOMNode(this.refs.moretoolbar)),e.render(e.createElement(i,{key:t.id,text_id:t.text_id,mail_id:t.id}),e.findDOMNode(this.refs.moretoolbar)),$(e.findDOMNode(this.refs.mailfilter)).hide(),$(e.findDOMNode(this.refs.pagination)).hide(),$(e.findDOMNode(this.refs.moretoolbar)).show()},render:function(){return e.createElement("div",{id:"mailheadtoolbar",ref:"mailheadtoolbar"},e.createElement("div",{ref:"listtoolbar"},e.createElement("div",{id:"mailheadtoolbarleft"},e.createElement(a,{ref:"mailfilter"}),e.createElement("div",{id:"moretoolbar",ref:"moretoolbar"})),e.createElement("div",{id:"mailheadtoolbarright"},e.createElement(r,{ref:"pagination"}))))}});return o}),define("components/email/desktop/mailitem",["react","pref","helper","eventbus","querystring","language/message","models/user","models/message"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"MailItemComponent",onFilter:function(t){var n=this.props.data,a=$(e.findDOMNode(this.refs.checkbox));switch(a.checkbox("set unchecked"),t){case"all":a.checkbox("set checked");break;case"none":a.checkbox("set unchecked");break;case"read":1==n.isread&&a.checkbox("set checked");break;case"unread":0==n.isread&&a.checkbox("set checked");break;case"starred":1==n.isstarred&&a.checkbox("set checked");break;case"unstarred":0==n.isstarred&&a.checkbox("set checked")}this.onSelected(),this.props.onFilterChange()},onTrash:function(){if(this.isChecked()){var e=this.props.data.text_id,t=i.get("mailbox");new s({id:e}).destroy({success:function(){a.trigger("maillist:load",t)},error:function(e,t){},complete:function(){}})}},onSelected:function(){var t=$(e.findDOMNode(this.refs.checkbox));t.checkbox("is checked")?$(e.findDOMNode(this)).addClass("selected"):$(e.findDOMNode(this)).removeClass("selected")},gotoDetail:function(e){a.trigger("mail:open",this.props.data.id)},isChecked:function(){return $(e.findDOMNode(this.refs.checkbox)).checkbox("is checked")},toggleStarred:function(n){n.preventDefault();var a=this.props.data,i=$(e.findDOMNode(this.refs.isstarred)),r={company_id:t.get("cid"),creator_id:t.get("uid")};$.ajax({type:"PUT",dataType:"json",url:(new s).urlRoot+"/starred/"+a.id,data:r,success:function(e){i.hasClass("isstarred")?i.removeClass("isstarred"):i.addClass("isstarred")},error:function(){}})},componentDidUpdate:function(){},componentWillUnmount:function(){a.off("maillist:filter",self.onFilter),a.off("maillist:trashitem",self.onTrash)},componentDidMount:function(){var i=this,s=i.props.data,l=i.props.mailbox,c=parseInt(t.get("uid"));if("sent"==l){var d=parseInt(s.receiver_id),u=s.recipients.user_ids||[];if(u.length>0){for(var m=r.t("to")+": ",p=0;p<u.length;p++)p>0&&(m+=", "),u[p]!=c?new o({id:u[p]}).fetch({success:function(e,t){var a=(t.fullname.split(" "),t.fullname);u.length>1&&(a=n.getShortName(a)),m+=a}}):m+=r.t("me");$(e.findDOMNode(i.refs.userfrom)).html(m)}else d>0&&(d!=c?new o({id:d}).fetch({success:function(t,n){$(e.findDOMNode(i.refs.userfrom)).html(r.t("to")+": "+n.fullname)}}):$(e.findDOMNode(i.refs.userfrom)).html(r.t("to")+": "+r.t("me")))}else s.creator_id>0&&new o({id:s.creator_id}).fetch({success:function(t,n){$(e.findDOMNode(i.refs.userfrom)).html(n.fullname)}});$(e.findDOMNode(this.refs.checkbox)).checkbox({onChange:function(){i.onSelected(),i.props.onFilterChange()}}),$(e.findDOMNode(i)).find("td").not(".nod").on("click",function(e){i.gotoDetail(e)}),a.on("maillist:filter",i.onFilter),a.on("maillist:trashitem",i.onTrash)},render:function(){var t,n,a=this.props.data,i=moment.unix(a.date_created),o=parseInt(a.count_file),s=a.isread;if(""!=a.summary){var l=a.summary.replace(/\{quoted_sender_time\}/,r.t("quoted_sender_time"));l=l.replace(/\{quoted_sender_write\}/,r.t("quoted_sender_write")),l=l.replace(/\{forwarded_head\}/,""),l=l.replace(/\{forwarded_from\}/,r.t("forwarded_from")),l=l.replace(/\{forwarded_date\}/,r.t("forwarded_date")),l=l.replace(/\{forwarded_to\}/,r.t("forwarded_to")),t=e.createElement("span",{className:"shortsumary"}," - ",l)}return o>0&&(n=e.createElement("i",{className:"icon tc-attach"})),"sent"==this.props.mailbox&&(s=1),e.createElement("tr",{className:0==s?"unread":""},e.createElement("td",{width:"33",className:"nod"},e.createElement("div",{ref:"checkbox",className:"ui checkbox"},e.createElement("input",{type:"checkbox"}),e.createElement("label",null))),e.createElement("td",{width:"33",className:"nod"},e.createElement("a",{ref:"isstarred",onClick:this.toggleStarred,href:"#",className:"mailstar "+(1==a.isstarred?"isstarred":"")},e.createElement("i",{className:"icon tc-star"}))),e.createElement("td",{ref:"userfrom",className:"cellnowrap",width:"200"}),e.createElement("td",{className:"maillistsumary"},e.createElement("div",{className:"mailitemsumary"},a.subject," ",t)),e.createElement("td",{width:"33"},n),e.createElement("td",{width:"100",className:"right aligned"},i.format("DD/MM/YYYY")))}});return l}),define("components/email/desktop/mailleft",["backbone","react","pref","helper","eventbus","querystring","language/mail","collections/mail","models/mail"],function(e,t,n,a,i,r,o,s,l){var c=t.createClass({displayName:"MailLeftComponent",getDefaultProps:function(){return{defaultmailbox:"inbox"}},composeHandler:function(){i.trigger("mail:compose")},loadMail:function(t,n){this.activeMenu(t),e.history.navigate("mail/index/mailbox/"+t),i.trigger("maillist:load",t),n.preventDefault()},activeMenu:function(e){$(t.findDOMNode(this)).find("ul li").each(function(){$(this).attr("data-menu")==e?$(this).addClass("active"):$(this).removeClass("active")})},getMailboxTotal:function(){var e=this,a={company_id:n.get("cid"),creator_id:n.get("uid")};$.ajax({url:(new l).urlRoot+"/unread",method:"GET",data:a,dataType:"json",success:function(n){n.total>0&&$(t.findDOMNode(e.refs.totalinbox)).html("("+n.total+")")}})},componentWillUnmount:function(){i.off("mailleft:countinbox",this.getMailboxTotal),i.off("mailleft:activemenu",this.activeMenu)},componentDidMount:function(){$(t.findDOMNode(this.refs.mailleft)).height(a.getFullHeight()).niceScroll({autohidemode:!0,cursoropacitymax:.5}),i.on("mailleft:countinbox",this.getMailboxTotal),i.on("mailleft:activemenu",this.activeMenu),i.trigger("mailleft:activemenu",this.props.defaultmailbox),this.getMailboxTotal()},render:function(){return t.createElement("div",{id:"mailleft",ref:"mailleft"},this.props.mobile?"":t.createElement("div",{id:"mailcomposebuttonwrapper"},t.createElement("a",{className:"ui fluid button orange",style:{textTransform:"uppercase"},onClick:this.composeHandler},o.t("compose"))),t.createElement("ul",null,t.createElement("li",{"data-menu":"inbox"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"inbox")},o.t("inbox")," ",t.createElement("span",{ref:"totalinbox"}))),t.createElement("li",{"data-menu":"isstarred"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"isstarred")},o.t("starred"))),t.createElement("li",{"data-menu":"sent"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"sent")},o.t("sent"))),t.createElement("li",{"data-menu":"intrash"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"intrash")},o.t("intrash")))))}});return c}),define("components/email/desktop/maillist",["react","helper","eventbus","pref","querystring","language/message","components/mail/desktop/mailitem","collections/messages"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"MailListComponent",changeDelay:500,changeTimer:null,loadDelay:400,loadTimer:null,init:!1,getInitialState:function(){return{models:[],length:0,total:0,hmac:""}},getDefaultProps:function(){return{hideoninit:!1,defaultmailbox:"inbox"}},hideHandler:function(){$(e.findDOMNode(this)).hide()},showHandler:function(){$(e.findDOMNode(this)).show()},loadMail:function(t,r){r=r||"menu",this.loadTimer>0&&clearTimeout(this.loadTimer);var o=this,l=50,c=i.get("mailbox")||"inbox";this.loadTimer=setTimeout(function(){$(e.findDOMNode(o.refs.loader)).addClass("active"),n.trigger("maillist:show"),n.trigger("maildetail:hide"),(c!=t||"menu"==r)&&i.set("page",1),n.trigger("mailfilter:setcheckbox","uncheck"),i.set("mailbox",t);var d={company_id:a.get("cid"),mailbox:t,keyword:i.get("keyword")||"",page:i.get("page")||1,limit:l,sort_by:"id",sort_type:"DESC"};(new s).fetch({data:d,success:function(e,t){n.trigger("mailpagination:change",e),o.setState(e)},complete:function(){$(e.findDOMNode(o.refs.loader)).removeClass("active")}})},this.loadDelay)},setPage:function(e){e=e||1,1>e&&(e=1),i.set("page",e);var t=i.get("mailbox")||"inbox";this.loadMail(t,"list")},_onFilterChange:function(){this.changeTimer>0&&clearTimeout(this.changeTimer);var e=this,t=0,a=0,r=i.get("mailbox");this.changeTimer=setTimeout(function(){e.state.models.map(function(n,i){var o=r+n.id;e.refs[o].isChecked()?t++:a++}),0==a?n.trigger("mailfilter:setcheckbox","check"):0==t?n.trigger("mailfilter:setcheckbox","uncheck"):n.trigger("mailfilter:setcheckbox","indeterminate")},this.changeDelay)},componentWillUnmount:function(){n.off("maillist:load",this.loadMail),n.off("maillist:setpage",this.setPage),n.off("maillist:hide",this.hideHandler),n.off("maillist:show",this.showHandler)},componentDidMount:function(){var a=60,i=$("#chattab").outerHeight();$(e.findDOMNode(this.refs.maillist)).height(t.getFullHeight()-a-i).niceScroll({autohidemode:!0,cursoropacitymax:.5}),n.on("maillist:load",this.loadMail),n.on("maillist:setpage",this.setPage),n.on("maillist:hide",this.hideHandler),n.on("maillist:show",this.showHandler),this.props.hideoninit||this.loadMail(this.props.defaultmailbox),this.init=!0},render:function(){var t,n=this,a=i.get("mailbox");return 0==n.state.total&&this.init&&(t=e.createElement("tr",{className:"row-emptyemail"},e.createElement("td",{colSpan:"5"},e.createElement("div",{className:"empty-mail"},e.createElement("i",{className:"icon tc-search"})," ",r.t("empty"))))),e.createElement("div",{id:"maillist",ref:"maillist",className:this.props.hideoninit?"hide":""},e.createElement("div",{className:"ui loader",ref:"loader"}),e.createElement("table",{style:{margin:"-1px 0 0 0"},className:"ui small fixed table"},e.createElement("tbody",null,n.state.total>0?n.state.models.map(function(t,i){var r=t.toJSON();return e.createElement(o,{ref:a+r.id,onFilterChange:n._onFilterChange,key:a+r.id+moment().unix(),data:r,mailbox:a})}):t)))}});return l}),define("components/email/desktop/mailtoolbar",["backbone","react","pref","helper","eventbus","querystring","language/mail","models/mail"],function(e,t,n,a,i,r,o,s){var l=t.createClass({displayName:"MailToolbarComponent",getInitialState:function(){return{mailbox:r.get("mailbox")}},componentWillUnmount:function(){i.off("maillist:load",this.setMailbox)},componentDidMount:function(){i.on("maillist:load",this.setMailbox)},setMailbox:function(e){this.setState({mailbox:e})},goBack:function(t){t.preventDefault();var n=this.state.mailbox;e.history.navigate("mail/index/mailbox/"+n),i.trigger("maillist:load",n)},deleteSelectedMail:function(t){t.preventDefault();var n=this.props.text_id||0,a=this.state.mailbox;n>0?new s({id:n}).destroy({success:function(){e.history.navigate("mail/index/mailbox/"+a),i.trigger("maillist:load",a)},error:function(e,t){},complete:function(){}}):i.trigger("maillist:trashitem")},render:function(){return t.createElement("div",null,this.props.mail_id>0?t.createElement("div",{className:"ui buttons small",style:{marginRight:"5px"}},t.createElement("a",{href:"#",onClick:this.goBack,className:"ui icon button",title:o.t("back")},o.t("back"))):"",t.createElement("div",{ref:"mailtoolbar",className:"ui buttons small"},t.createElement("a",{href:"#",onClick:this.deleteSelectedMail,style:{fontSize:"0.930571rem"},className:"ui icon button",title:o.t("delete")},"intrash"==this.state.mailbox?o.t("delete_permanent"):o.t("delete"))))}});return l}),define("components/email/desktop/pagination",["react","eventbus","language/default"],function(e,t,n){var a=e.createClass({displayName:"Pagination",getInitialState:function(){return{totalPage:1,currentPage:1,total:50,startRecord:1,endRecord:50}},componentDidMount:function(){var e=this;t.on("mailpagination:change",e._onChange)},componentWillUnmount:function(){t.off("mailpagination:change",this._onChange)},_onChange:function(e){var t=this,n=Math.ceil(e.total/e.limit),a=(e.currentpage-1)*e.limit,i=a+e.limit;i>e.total&&(i=e.total);var r={totalPage:n,currentPage:e.currentpage,total:e.total,startRecord:a+1,endRecord:i};t.setState(r)},_handleClick:function(e){if(e.preventDefault(),$(e.target).hasClass("item")?ele=$(e.target):ele=$(e.target).parents(".item").eq(0),!ele.hasClass("active")&&!ele.hasClass("disabled")){var n=ele.attr("href").replace("#","");t.trigger("maillist:setpage",n)}},render:function(){var t=(this.state.currentPage-2,this.state.currentPage+2,this.state.startRecord),a=this.state.endRecord,i=this.state.total,r=parseInt(this.state.currentPage),o=parseInt(this.state.totalPage);return e.createElement("div",{id:"mail-pagination"},e.createElement("span",{className:"item pagination-info"},e.createElement("strong",null,t," - ",a)," ",n.t("in_total").toLowerCase()," ",e.createElement("strong",null,i)),e.createElement("div",{onClick:this._handleClick,className:"ui pagination menu small"},e.createElement("a",{href:"#"+(r-1),title:n.t("newer"),className:"icon item "+(1==r?"disabled":"")},e.createElement("i",{className:"tc-left icon"})),e.createElement("a",{href:"#"+(r+1),title:n.t("older"),className:"icon item "+(r==o?"disabled":"")},e.createElement("i",{className:"tc-right icon"}))))}});return a}),define("components/email/desktop/replyform",["react","helper","eventbus","pref","language/mail","components/employeepicker","components/tinymce","models/file","models/mail"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"MailReplyComponent",alreadyInitFileUpload:!1,formError:{subject:["error_subject_required"],message:["error_message_required","error_message_too_short","error_message_too_long"],employee:["error_empty_to"]},getDefaultProps:function(){return{data:null,type:"reply"}},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.employees)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},handleKeyup:function(e,t){e.preventDefault(),e.keyCode?e.keyCode:e.which},handleEditorFocus:function(t,n){$(e.findDOMNode(this)).find(".full_input").show(),this.initForm(),this.alreadyInitFileUpload?this.alreadyInitFileUpload&&$(e.findDOMNode(this)).find(".uploadifive-button").show():((new s).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new s).OBJECTTYPE_MESSAGE,this.props.data.id,(new s).STATUS_ENABLE),this.alreadyInitFileUpload=!0)},handleEditorBlur:function(e,t){},createMailHandle:function(n){var r=this,o=$(e.findDOMNode(this.refs.form));o.addClass("loading");var s=$(e.findDOMNode(this.refs.submit));s.addClass("loading");var c=[];$(e.findDOMNode(r)).find(".attachedfileid").each(function(e){c.push($(this).attr("data-id"))}),$(e.findDOMNode(r)).find(".uploadifive-queue-item").hide();var d=r.refs.editor.getEditor(),u="";null!=d&&(u=d.getContent(),u=t.trimEmptyParagraph(u)),(new l).save({company_id:a.get("cid"),creator_id:a.get("uid"),text_id:r.props.data.text_id,type:r.props.type,subject:$(e.findDOMNode(r.refs.subject)).val(),message:u,file_list:c,to:r.getSelectedUserIdList()},{success:function(e){t.showSuccess(i.t("success_add")),r.resetMessage()},error:function(e,n){t.notifyErrorAndForm(n,i,"error_add",o,r.formError)},complete:function(){o.removeClass("loading"),s.removeClass("loading")}})},formSubmit:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.form)).submit()},blur:function(t){t.preventDefault(),t.stopPropagation(),this.alreadyInitFileUpload&&$(e.findDOMNode(this)).find(".uploadifive-button").hide(),$(e.findDOMNode(this.refs.avatar)).show(),$(e.findDOMNode(this.refs.editorwrapper)).css({marginLeft:40}),this.resetMessage()},initForm:function(){var t=new l,n="",a=this.refs.editor.getEditor();n="reply"==this.props.type||"reply_all"==this.props.type?t.getQuotedText(this.props.data,this.props.sender):t.getForwardedText(this.props.data,this.props.sender,this.props.recipients),null!=a&&a.setContent(n),$(e.findDOMNode(this.refs.avatar)).hide(),$(e.findDOMNode(this.refs.editorwrapper)).css({marginLeft:0})},focusMessage:function(){this.refs.editor.focusToInit()},resetMessage:function(){var t=this.refs.editor.getEditor();null!=t&&(t.setContent(""),this.refs.editor._remove()),$(e.findDOMNode(this)).find(".full_input").hide(),n.trigger("replyform:reset")},componentWillUpdate:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.form)).form({fields:{subject:{identifier:"subject",rules:[{type:"empty",prompt:i.t("error_subject_required")}]},message:{identifier:"message",rules:[{type:"empty",prompt:i.t("error_message_required")},{type:"minLength[5]",prompt:i.t("error_message_too_short")},{type:"maxLength[4000]",prompt:i.t("error_message_too_long")}]},employee:{identifier:"employee",rules:[{type:"empty",prompt:i.t("error_empty_to")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.createMailHandle()}})},render:function(){var n=this,s=[],l="";if(null!=n.props.data&&"undefined"!=typeof n.props.data.id)if(l="forward"==n.props.type?"Fw: ":"Re: ",l+=n.props.data.subject,"reply_all"==n.props.type&&1==n.props.data.is_multi_recipient){var c=n.props.data.recipients.user_ids,d=n.props.data.recipients.group_ids;s.push(n.props.data.creator_id.toString());for(var u=0;u<c.length;u++)c[u]>0&&s.push(c[u].toString());for(var u=0;u<d.length;u++)s.push("g"+d[u])}else"reply"==n.props.type&&s.push(n.props.data.creator_id.toString());var m={autoresize_min_height:150,toolbar:"bold italic underline | link unlink"};return e.createElement("div",{ref:"mailreply"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"fields full_input",style:{display:"none"}},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("to")),e.createElement(r,{defaultvalue:s,ref:"employees",inputname:"employee"}))),e.createElement("div",{className:"fields full_input",style:{display:"none"}},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("subject")),e.createElement("input",{ref:"subject",name:"subject",defaultValue:l}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("a",{className:"avatar",ref:"avatar",style:{float:"left"}},e.createElement("img",{className:"ui avatar image",src:t.getAvatarPath(a.get("avatar"))})),e.createElement("div",{className:"content",ref:"editorwrapper",style:{marginLeft:40,marginBottom:20}},e.createElement(o,{ref:"editor",id:this.props.type+"-"+this.props.data.id,content:"",autofocus:!0,config:m,focusToInitHandle:this.editorInitHandle,onKeyup:this.handleKeyup,onFocus:this.handleEditorFocus,onBlur:this.handleEditorBlur}),e.createElement("div",{className:"ui right floated buttons full_input",style:{display:"none",marginTop:5}},e.createElement("button",{className:"ui button icon",onClick:n.blur,style:{marginRight:5}},e.createElement("i",{className:"icon tc-trash"})),e.createElement("button",{className:"ui green button",onClick:n.formSubmit},i.t("send"))),e.createElement("div",{style:{marginRight:120}},e.createElement("input",{type:"file",ref:"fileinput",id:"ffile-"+this.props.data.id,name:"ffile",multiple:"multiple",className:"hide"})),e.createElement("div",{className:"clear"}))))))}});return c}),define("components/email/mobile/compose",["react","helper","eventbus","pref","language/message","language/default","components/employeepicker","components/tinymce","models/file","models/message"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"MailComposeComponent",alreadyInitFileUpload:!1,formError:{subject:["error_subject_required"],message:["error_message_required","error_message_too_short","error_message_too_long"],employee:["error_empty_to"]},getDefaultProps:function(){return{recipients:[]}},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.employees)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},createMailHandle:function(r){var o=this,s=$(e.findDOMNode(this.refs.form));s.addClass("loading");var l=$(e.findDOMNode(this.refs.submit));l.addClass("loading");var d=[];$(e.findDOMNode(o)).find(".attachedfileid").each(function(e){d.push($(this).attr("data-id"))});var u=o.refs.editor.getEditor(),m="";null!=u&&(m=u.getContent(),m=t.trimEmptyParagraph(m)),(new c).save({company_id:a.get("cid"),creator_id:a.get("uid"),subject:$(e.findDOMNode(o.refs.subject)).val(),message:m,file_list:d,to:o.getSelectedUserIdList()},{success:function(a){t.showSuccess(i.t("success_add")),$(e.findDOMNode(o)).find(".uploadifive-queue-item").hide(),o.hidePopup(),n.trigger("mailleft:activemenu","sent"),n.trigger("maillist:load","sent")},error:function(e,n){t.notifyErrorAndForm(n,i,"error_add",s,o.formError)},complete:function(){s.removeClass("loading"),l.removeClass("loading")}})},formSubmit:function(){$(e.findDOMNode(this.refs.form)).submit()},hidePopup:function(){$(e.findDOMNode(this.refs.mailcompose)).modal("hide"),n.trigger("compose:unmount")},showPopup:function(){var t=this;$(e.findDOMNode(this.refs.mailcompose)).modal({context:this.getDOMNode(),closable:!1,onHidden:function(){t.hidePopup()},onVisible:function(){setTimeout(function(){$(e.findDOMNode(t.refs.subject)).focus()},200)}}).modal("show")},handleKeyup:function(e,t){e.preventDefault(),e.keyCode?e.keyCode:e.which},handleEditorFocus:function(e,t){},handleEditorBlur:function(e,t){},componentWillUnmount:function(){},componentWillUpdate:function(){this.showPopup()},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.form)).form({fields:{subject:{identifier:"subject",rules:[{type:"empty",prompt:i.t("error_subject_required")}]},message:{identifier:"message"},employee:{identifier:"employee",rules:[{type:"empty",prompt:i.t("error_empty_to")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.createMailHandle()}}),this.alreadyInitFileUpload||((new l).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new l).OBJECTTYPE_MESSAGE,"ffile",(new l).STATUS_ENABLE),this.alreadyInitFileUpload=!0),this.showPopup()},render:function(){var t=[];this.props.recipients.length>0&&(t=this.props.recipients);var n={autoresize_min_height:170,autoresize_max_height:170,toolbar:"bold italic underline | link unlink"};return e.createElement("div",{id:"mailcompose-inner"},e.createElement("div",{className:"ui modal",ref:"mailcompose"},e.createElement("div",{className:"header"},i.t("new_mail")),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"field"},e.createElement("label",null,i.t("recipient")),e.createElement(o,{defaultvalue:t,ref:"employees",inputname:"employee"})),e.createElement("div",{className:"field"},e.createElement("label",null,i.t("subject")),e.createElement("input",{type:"text",ref:"subject",name:"subject"})),e.createElement("div",{className:"field"},e.createElement("label",null,i.t("message")),e.createElement(s,{ref:"editor",id:"message",name:"message",content:"",autoLoad:!0,config:n,onKeyup:this.handleKeyup,onFocus:this.handleEditorFocus,onBlur:this.handleEditorBlur})),e.createElement("div",{className:"field"},e.createElement("div",{style:{marginRight:120}},e.createElement("input",{type:"file",ref:"fileinput",id:"ffile",name:"ffile",multiple:"multiple",className:"hide"}))))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui cancel close button"},r.t("close")),e.createElement("a",{className:"ui green button",href:"javascript: void(0)",ref:"submit",onClick:this.formSubmit},r.t("send")))))}});return d}),define("components/mail/mobile/replyform",["react","helper","eventbus","pref","language/mail","components/employeepicker","components/tinymce","models/file","models/mail"],function(e,t,n,a,i,r,o,s,l){
var c=e.createClass({displayName:"MailReplyComponent",alreadyInitFileUpload:!1,allowSend:!0,formError:{subject:["error_subject_required"],message:["error_message_required","error_message_too_short","error_message_too_long"],employee:["error_empty_to"]},getDefaultProps:function(){return{data:null,type:"reply"}},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.employees)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},handleKeyup:function(e,t){e.preventDefault(),e.keyCode?e.keyCode:e.which},handleEditorFocus:function(t,n){$(e.findDOMNode(this)).find(".full_input").show(),this.initForm(),this.alreadyInitFileUpload?this.alreadyInitFileUpload&&$(e.findDOMNode(this)).find(".uploadifive-button").show():((new s).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new s).OBJECTTYPE_MESSAGE,this.props.data.id,(new s).STATUS_ENABLE),this.alreadyInitFileUpload=!0)},handleEditorBlur:function(e,t){},createMailHandle:function(n){var r=this;if(r.allowSend){r.allowSend=!1;var o=$(e.findDOMNode(this.refs.form));o.addClass("loading");var s=$(e.findDOMNode(this.refs.submit));s.addClass("loading");var c=[];$(e.findDOMNode(r)).find(".attachedfileid").each(function(e){c.push($(this).attr("data-id"))}),$(e.findDOMNode(r)).find(".uploadifive-queue-item").hide();var d=r.refs.editor.getEditor(),u="";null!=d&&(u=d.getContent(),u=t.trimEmptyParagraph(u)),(new l).save({company_id:a.get("cid"),creator_id:a.get("uid"),type:r.props.type,subject:$(e.findDOMNode(r.refs.subject)).val(),content:u,file_list:c,to:r.getSelectedUserIdList()},{success:function(e){t.showSuccess(i.t("success_add")),r.resetMessage()},error:function(e,n){t.notifyErrorAndForm(n,i,"error_add",o,r.formError)},complete:function(){o.removeClass("loading"),s.removeClass("loading"),r.allowSend=!0}})}},formSubmit:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.form)).submit()},blur:function(t){t.preventDefault(),t.stopPropagation(),this.alreadyInitFileUpload&&$(e.findDOMNode(this)).find(".uploadifive-button").hide(),$(e.findDOMNode(this.refs.avatar)).show(),$(e.findDOMNode(this.refs.editorwrapper)).css({marginLeft:40}),this.resetMessage()},initForm:function(){var t=new l,n="",a=this.refs.editor.getEditor();n="reply"==this.props.type||"reply_all"==this.props.type?t.getQuotedText(this.props.data,this.props.sender):t.getForwardedText(this.props.data,this.props.sender,this.props.recipients),null!=a&&a.setContent(n),$(e.findDOMNode(this.refs.avatar)).hide(),$(e.findDOMNode(this.refs.editorwrapper)).css({marginLeft:0})},focusMessage:function(){this.refs.editor.focusToInit(),t.scrollTo($(e.findDOMNode(this.refs.mailreply)))},resetMessage:function(){var t=this.refs.editor.getEditor();null!=t&&(t.setContent(""),this.refs.editor._remove()),$(e.findDOMNode(this)).find(".full_input").hide()},componentWillUpdate:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.form)).form({fields:{subject:{identifier:"subject",rules:[{type:"empty",prompt:i.t("error_subject_required")}]},message:{identifier:"message",rules:[{type:"empty",prompt:i.t("error_message_required")},{type:"minLength[5]",prompt:i.t("error_message_too_short")},{type:"maxLength[4000]",prompt:i.t("error_message_too_long")}]},employee:{identifier:"employee",rules:[{type:"empty",prompt:i.t("error_empty_to")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.createMailHandle()}})},render:function(){var n=this,s=[],l="";if(null!=n.props.data&&"undefined"!=typeof n.props.data.id)if(l="forward"==n.props.type?"Fw: ":"Re: ",l+=n.props.data.subject.replace(/Fw:|Re:/g,"").trim(),"reply_all"==n.props.type&&n.props.data.to.length>0){var c=n.props.data.to;s.push(n.props.data.creator_id.toString());for(var d=0;d<c.length;d++)s.push(c[d].toString())}else"reply"==n.props.type&&s.push(n.props.data.creator_id.toString());var u={autoresize_min_height:150,toolbar:"bold italic underline | link unlink"};return e.createElement("div",{ref:"mailreply"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"fields full_input",style:{display:"none"}},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("to")),e.createElement(r,{defaultvalue:s,getgroup:!0,ref:"employees",inputname:"employee"}))),e.createElement("div",{className:"fields full_input",style:{display:"none"}},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("subject")),e.createElement("input",{ref:"subject",name:"subject",defaultValue:l}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("a",{className:"avatar",ref:"avatar",style:{float:"left"}},e.createElement("img",{className:"ui avatar image",src:t.getAvatarPath(a.get("avatar"))})),e.createElement("div",{className:"content",ref:"editorwrapper",style:{marginLeft:40,marginBottom:20}},e.createElement(o,{ref:"editor",id:this.props.type+"-"+this.props.data.id,content:"",autofocus:!0,config:u,placeholder:i.t("reply_placeholder"),focusToInitHandle:this.editorInitHandle,onKeyup:this.handleKeyup,onFocus:this.handleEditorFocus,onBlur:this.handleEditorBlur}),e.createElement("div",{className:"ui right floated buttons full_input",style:{display:"none",marginTop:5}},e.createElement("button",{className:"ui button icon",onClick:n.blur,style:{marginRight:5}},e.createElement("i",{className:"icon tc-trash"})),e.createElement("button",{className:"ui green button",onClick:n.formSubmit},i.t("send"))),e.createElement("div",{style:{marginRight:120}},e.createElement("input",{type:"file",ref:"fileinput",id:"ffile-"+this.props.data.id,name:"ffile",multiple:"multiple",className:"hide"})),e.createElement("div",{className:"clear"}))))))}});return c}),define("components/mail/mobile/replychoice",["react","helper","eventbus","pref","language/mail"],function(e,t,n,a,i){var r=e.createClass({displayName:"MailComposeComponent",getDefaultProps:function(){return{replyall:!1}},hidePopup:function(){$(e.findDOMNode(this.refs.replychoice)).modal("hide"),n.trigger("replychoice:unmount")},showPopup:function(){var t=this;$(e.findDOMNode(this.refs.replychoice)).modal({context:this.getDOMNode(),closable:!1,onHidden:function(){t.hidePopup()},onVisible:function(){setTimeout(function(){$(e.findDOMNode(t.refs.subject)).focus()},200)}}).modal("show")},triggerReply:function(t,a){a.preventDefault(),n.trigger("maildetail:reply",t),$(e.findDOMNode(this.refs.replychoice)).modal("hide")},componentWillUnmount:function(){},componentWillUpdate:function(){},componentDidMount:function(){this.showPopup()},render:function(){return e.createElement("div",{id:"replychoice-inner"},e.createElement("div",{className:"ui small modal",ref:"replychoice",style:{padding:5}},e.createElement("button",{className:"ui fluid teal button",onClick:this.triggerReply.bind(this,"reply")},i.t("reply")),this.props.replyall?e.createElement("button",{className:"ui fluid teal button",onClick:this.triggerReply.bind(this,"reply_all")},i.t("reply_all")):"",e.createElement("button",{className:"ui fluid teal button",onClick:this.triggerReply.bind(this,"forward")},i.t("forward")),e.createElement("div",{className:"actions"},e.createElement("button",{className:"ui close cancel fluid button"},i.t("cancel")))))}});return r}),define("components/email/mobile/detail",["react","pref","helper","eventbus","querystring","language/mail","components/mail/mobile/replyform","components/mail/mobile/replychoice","components/filestrip","models/user","models/mail"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"MailDetailComponent",replyForm:null,replyAllForm:null,forwardForm:null,getInitialState:function(){return{data:{subject:"",message_text:{subject:"",text:""},files:[],date_created:moment().unix()}}},hideHandler:function(){$(e.findDOMNode(this.refs.moreactiondetail)).dropdown("hide"),$(e.findDOMNode(this.refs.detailinfo)).dropdown("hide"),$(e.findDOMNode(this)).removeClass("active")},showHandler:function(t){$(e.findDOMNode(this)).addClass("active"),this.loadData(t)},loadData:function(t){var n=this;$(e.findDOMNode(n.refs.loader)).addClass("active"),$(e.findDOMNode(n.refs.maildetail)).hide();var r=i.get("mailbox")||"inbox";new d({id:t}).fetch({data:{mailbox:r},success:function(t,i){n.setState({data:i}),$(e.findDOMNode(n.refs.maildetail)).show(),a.trigger("maildetail:loaded",i)},complete:function(){$(e.findDOMNode(n.refs.loader)).removeClass("active")}}),$(e.findDOMNode(n.refs.detailinfo)).dropdown()},toggleStarred:function(n){n.preventDefault();var a=this.state.data,i=$(e.findDOMNode(this.refs.isstarred)),r={company_id:t.get("cid"),creator_id:t.get("uid")};$.ajax({type:"PUT",dataType:"json",url:(new d).urlRoot+"/starred/"+a.id,data:r,success:function(e){i.hasClass("isstarred")?i.removeClass("isstarred"):i.addClass("isstarred")},error:function(){}})},messageReply:function(t){switch(t=t||"reply",$(e.findDOMNode(this)).find(".reply_form").hide(),t){case"reply":$(e.findDOMNode(this.refs.reply_form)).show(),this.replyForm.focusMessage();break;case"reply_all":$(e.findDOMNode(this.refs.reply_all_form)).show(),this.replyAllForm.focusMessage();break;case"forward":$(e.findDOMNode(this.refs.forward_form)).show(),this.forwardForm.focusMessage()}},messageTrash:function(e){var t=i.get("mailbox");e>0&&new d({id:e}).destroy({success:function(){Backbone.history.navigate("mail/index/mailbox/"+t),a.trigger("maillist:load",t)},error:function(e,t){},complete:function(){}})},messageQuoteToggle:function(e){e.preventDefault();var t=e.currentTarget;$(t).next().toggle()},compactReply:function(){var t=this,n=e.createElement("a",{className:"quotedmessagetoggle",href:"#"},e.createElement("i",{className:"tc-more"}));$(e.findDOMNode(this)).find(".quotedmessage").before(e.renderToString(n)),$(e.findDOMNode(this)).find(".quotedmessage").toggle(),$(e.findDOMNode(this)).find(".quotedmessagetoggle").on("click",function(e){t.messageQuoteToggle(e)})},renderReplyForm:function(t,n){var a=this,i=a.state.data;e.render(e.createElement(o,{type:"reply",key:i.text_id,data:i,sender:t,recipients:n}),e.findDOMNode(a.refs.reply_form),function(){a.replyForm=this}),e.render(e.createElement(o,{type:"reply_all",key:i.text_id,data:i,sender:t,recipients:n}),e.findDOMNode(a.refs.reply_all_form),function(){a.replyAllForm=this}),e.render(e.createElement(o,{type:"forward",key:i.text_id,data:i,sender:t,recipients:n}),e.findDOMNode(a.refs.forward_form),function(){a.forwardForm=this})},composeHandler:function(e){var t=e.attr("href")||e.attr("data-id");t=parseInt(t),t>0&&a.trigger("mail:compose",[t])},toggleMoreMetaHandler:function(t){t.preventDefault();var n=t.currentTarget,a="";$(n).hasClass("active")?(a=r.t("detail"),$(n).removeClass("active"),$(e.findDOMNode(this.refs.metadatecreated)).show()):(a=r.t("hide_detail"),$(n).addClass("active"),$(e.findDOMNode(this.refs.metadatecreated)).hide()),$(e.findDOMNode(this.refs.detailinfo)).slideToggle(),$(n).text(a)},openReplyChoiceHanlder:function(t){t.preventDefault(),e.render(e.createElement(s,{replyall:1==this.state.data.is_multi_recipient}),e.findDOMNode(this.refs.replychoice))},unmountReplyChoiceHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.replychoice))},componentDidUpdate:function(){var a=this,i=t.get("uid"),o=[],s={},l=[],d=2,u=0;if(1==this.state.data.is_multi_recipient&&(o=this.state.data.recipients.user_ids||o,d=o.length+1),this.state.data.creator_id>0&&new c({id:this.state.data.creator_id}).fetch({success:function(t,i){e.render(e.createElement("img",{className:"ui avatar image",src:n.getAvatarPath(i.avatar)}),e.findDOMNode(a.refs.avatar)),$(e.findDOMNode(a.refs.sender)).html(i.fullname),s=i,u++,u==d&&a.renderReplyForm(s,l)}}),1==this.state.data.is_multi_recipient){for(var m=r.t("to")+" ",p="",h=0;h<o.length;h++)h>0&&(m+=", "),new c({id:o[h]}).fetch({success:function(e,t){var c=(t.fullname.split(" "),t.fullname),f=c;o.length>1&&(f=n.getShortName(c)),m+=o[h]!=i?f:r.t("me");var g='<img class="ui avatar image" src="'+n.getAvatarPath(t.avatar)+'" title="'+c+'" />';p+='<a class="ui image label mailmobileavatar">'+g+c+"</a>",l.push(t),u++,u==d&&a.renderReplyForm(s,l)}});$(e.findDOMNode(a.refs.receiver)).html(m),$(e.findDOMNode(a.refs.receiverinfo)).html(p)}else this.state.data.receiver_id>0&&(this.state.data.receiver_id==t.get("uid")&&$(e.findDOMNode(a.refs.receiver)).html(r.t("to")+" "+r.t("me")),new c({id:this.state.data.receiver_id}).fetch({success:function(n,i){a.state.data.receiver_id!=t.get("uid")&&$(e.findDOMNode(a.refs.receiver)).html(i.fullname),$(e.findDOMNode(a.refs.receiverinfo)).html(i.fullname),l.push(i),u++,u==d&&a.renderReplyForm(s,l)}}));$(e.findDOMNode(this.refs.moreactiondetail)).dropdown(),$(e.findDOMNode(a.refs.detailinfo)).dropdown(),$(e.findDOMNode(a.refs.mailtext)).find(".forwardedmessagefrom a").each(function(){$(this).on("click",function(e){e.preventDefault(),a.composeHandler($(this))})}),$(e.findDOMNode(a.refs.mailtext)).find(".forwardedmessageto a").each(function(){$(this).on("click",function(e){e.preventDefault(),a.composeHandler($(this))})}),this.compactReply()},componentWillUnmount:function(){a.off("maildetail:hide",this.hideHandler),a.off("maildetail:show",this.showHandler),a.off("maildetail:reply",self.messageReply),a.off("replychoice:unmount",self.unmountReplyChoiceHandler)},componentDidMount:function(){var t=this;a.on("maildetail:hide",t.hideHandler),a.on("maildetail:show",t.showHandler),a.on("maildetail:reply",t.messageReply),a.on("replychoice:unmount",t.unmountReplyChoiceHandler),$(e.findDOMNode(t.refs.moreactiondetail)).dropdown()},render:function(){var t=this,a=t.state.data,i=moment.unix(a.date_created),o=r.t("day")+" "+i.format("DD")+" "+r.t("month")+" "+i.format("MM")+" "+r.t("year")+" "+i.format("YYYY")+", "+i.format("HH:mm"),s=a.message_text.text.replace(/\{quoted_sender_time\}/g,r.t("quoted_sender_time"));return s=s.replace(/\{quoted_sender_write\}/g,r.t("quoted_sender_write")),s=s.replace(/\{forwarded_head\}/g,r.t("forwarded_head")),s=s.replace(/\{forwarded_from\}/g,r.t("forwarded_from")),s=s.replace(/\{forwarded_date\}/g,r.t("forwarded_date")),s=s.replace(/\{forwarded_to\}/g,r.t("forwarded_to")),e.createElement("div",{id:"maildetail",className:"mailpush mailpushright",style:{top:50}},e.createElement("div",{className:"ui loader",ref:"loader"}),e.createElement("div",{ref:"maildetail"},e.createElement("div",{id:"mailsubjectmobile"},e.createElement("h3",null,a.subject),e.createElement("a",{ref:"isstarred",href:"#",onClick:this.toggleStarred,className:"detailstarredtoggle "+(1==a.isstarred?"isstarred":"")},e.createElement("i",{className:"icon tc-star"}))),e.createElement("div",{className:"mobilecontent",style:{background:"#FFF",padding:"10px",position:"relative"}},e.createElement("div",{className:"ui items"},e.createElement("div",{className:"item",style:{marginBottom:0}},e.createElement("div",{ref:"avatar",className:"mailmobileavatar"}),e.createElement("div",{className:"left aligned content"},e.createElement("div",{className:"meta"},e.createElement("span",{ref:"sender"}),e.createElement("br",null),e.createElement("span",{ref:"receiver"}),e.createElement("br",null),e.createElement("span",{ref:"metadatecreated"},n.relativeTime(a.date_created)),e.createElement("a",{ref:"viewmoremeta",style:{color:"#009c95"},onClick:t.toggleMoreMetaHandler},r.t("detail"))))),e.createElement("div",{id:"detailinfo",className:"mailmobile hide",ref:"detailinfo"},e.createElement("table",{className:"ui very basic unstackable table"},e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{className:"right aligned",style:{verticalAlign:"top"}},r.t("to"),":"),e.createElement("td",{ref:"receiverinfo"})),e.createElement("tr",null,e.createElement("td",{className:"right aligned",style:{verticalAlign:"top"}},r.t("date"),":"),e.createElement("td",{ref:"dateinfo"},o)))))),e.createElement("div",{className:"mobilereplybutton"},e.createElement("a",{href:"#",onClick:this.openReplyChoiceHanlder},e.createElement("i",{className:"tc-compose"}))),e.createElement("div",{id:"mailtext",ref:"mailtext",key:moment().unix(),dangerouslySetInnerHTML:{__html:s}}),a.files.length>0?e.createElement("div",{id:"mailfile"},e.createElement("div",{className:"ui divider"}),e.createElement("p",null,e.createElement("strong",null,a.files.length," ",r.t("attachment"))),e.createElement(l,{files:a.files})):"",e.createElement("div",{className:"ui divider"}),e.createElement("div",{ref:"reply_form",className:"reply_form"}),e.createElement("div",{ref:"reply_all_form",className:"reply_form",style:{display:"none"}}),e.createElement("div",{ref:"forward_form",className:"reply_form",style:{display:"none"}}),e.createElement("div",{ref:"replychoice"}))))}});return u}),define("components/mail/mobile/mailleft",["backbone","react","helper","eventbus","language/mail"],function(e,t,n,a,i){var r=t.createClass({displayName:"MailLeftComponent",getDefaultProps:function(){return{defaultmailbox:"inbox"}},loadMail:function(t,n){n.preventDefault(),this.toggleHandler(),this.activeMenu(t),e.history.navigate("mail/index/mailbox/"+t),a.trigger("maillist:load",t)},activeMenu:function(e){$(t.findDOMNode(this)).find("ul li").each(function(){$(this).attr("data-menu")==e?$(this).addClass("active"):$(this).removeClass("active")})},toggleHandler:function(){$(t.findDOMNode(this)).toggleClass("active")},componentWillUnmount:function(){a.off("mailleft:activemenu",this.activeMenu)},componentDidMount:function(){$(t.findDOMNode(this.refs.mailleft)).height(n.getFullHeight()),a.on("mailleft:activemenu",this.activeMenu),a.on("mailleft:toggle",this.toggleHandler),a.trigger("mailleft:activemenu",this.props.defaultmailbox)},render:function(){return t.createElement("div",{id:"mailleftmobile",className:"mailpushleft",ref:"mailleft"},t.createElement("ul",null,t.createElement("li",{"data-menu":"inbox"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"inbox")},i.t("inbox"))),t.createElement("li",{"data-menu":"instarred"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"instarred")},i.t("instarred"))),t.createElement("li",{"data-menu":"insent"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"insent")},i.t("insent"))),t.createElement("li",{"data-menu":"intrash"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"intrash")},i.t("intrash")))))}});return r}),define("components/mail/mobile/mailitem",["react","pref","helper","eventbus","querystring","language/mail","models/user","models/group","models/mail"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"MailItemComponent",getDefaultProps:function(){return{onItemCheckHandler:function(e){}}},onFilter:function(t){var n=this.props.data,a=$(e.findDOMNode(this.refs.checkbox));switch(a.checkbox("set unchecked"),t){case"all":a.checkbox("set checked");break;case"none":a.checkbox("set unchecked");break;case"read":1==n.isread&&a.checkbox("set checked");break;case"unread":0==n.isread&&a.checkbox("set checked");break;case"starred":1==n.isstarred&&a.checkbox("set checked");break;case"unstarred":0==n.isstarred&&a.checkbox("set checked")}this.onSelected()},onTrash:function(){var e=this;if(this.isChecked()){var t=this.props.data.id;i.get("mailbox"),new l({id:t}).destroy({success:function(){e.props.onItemDeletedHandler()},error:function(e,t){},complete:function(){}})}},onSelected:function(){var t=$(e.findDOMNode(this.refs.checkbox));t.checkbox("is checked")?$(e.findDOMNode(this)).addClass("selected"):$(e.findDOMNode(this)).removeClass("selected"),this.props.onItemCheckHandler(t.checkbox("is checked"))},gotoDetail:function(e){a.trigger("mail:open",this.props.data.id)},isChecked:function(){return $(e.findDOMNode(this.refs.checkbox)).checkbox("is checked")},toggleStarred:function(n){n.preventDefault(),n.stopPropagation();var a=this.props.data,i=$(e.findDOMNode(this.refs.isstarred)),r={company_id:t.get("cid"),creator_id:t.get("uid")};$.ajax({type:"PUT",dataType:"json",url:(new l).urlRoot+"/starred/"+a.id,data:r,success:function(e){i.hasClass("isstarred")?i.removeClass("isstarred"):i.addClass("isstarred")},error:function(){}})},updateHandler:function(t){var n=(t.type+"_"+t.item.id,t.item);"group"==t.type&&$.inArray("g"+n.id,this.props.data.to)>=0&&$(e.findDOMNode(this.refs["user_g"+n.id])).html(n.name)},componentDidUpdate:function(){},componentWillUnmount:function(){a.off("maillist:filter",self.onFilter),a.off("maillist:trashitem",self.onTrash),a.off("mailitem:update",self.updateHandler)},componentDidMount:function(){var i=this,s=i.props.data,l=i.props.mailbox,c=parseInt(t.get("uid"));if("insent"==l){var d=(parseInt(s.receiver_id),s.to||[]);if(d.length>0)for(var u=0;u<d.length;u++){var m=d[u];/g/.test(m)||(m!=c?new o({id:m}).fetch({success:function(t,a){var r=a.fullname;d.length>1&&(r=n.getShortName(r)),$(e.findDOMNode(i.refs["user_"+m])).html(r)}}):$(e.findDOMNode(i.refs["user_"+m])).html(r.t("me")))}}else s.creator_id>0&&new o({id:s.creator_id}).fetch({success:function(t,n){$(e.findDOMNode(i.refs.creator)).html(n.fullname)}});$(e.findDOMNode(this.refs.checkbox)).checkbox({onChange:function(){i.onSelected()}}),$(e.findDOMNode(i)).find("td").not(".nod").on("click",function(e){i.gotoDetail(e)}),a.on("maillist:filter",i.onFilter),a.on("maillist:trashitem",i.onTrash),a.on("mailitem:update",i.updateHandler)},render:function(){var t,n,a=this.props.data,i=a.to,o=moment.unix(a.date_created),s=parseInt(a.files.length),l=a.is_read;if(""!=a.summary){var c=a.summary.replace(/\{quoted_sender_time\}/,r.t("quoted_sender_time"));c=c.replace(/\{quoted_sender_write\}/,r.t("quoted_sender_write")),c=c.replace(/\{forwarded_head\}/,""),c=c.replace(/\{forwarded_from\}/,r.t("forwarded_from")),c=c.replace(/\{forwarded_date\}/,r.t("forwarded_date")),c=c.replace(/\{forwarded_to\}/,r.t("forwarded_to")),t=e.createElement("span",{className:"shortsumary"},c)}return s>0&&(n=e.createElement("i",{className:"icon tc-attach"})),"sent"==this.props.mailbox&&(l=1),e.createElement("tr",{className:0==l?"unread":""},e.createElement("td",{width:"33",className:"nod"},e.createElement("div",{ref:"checkbox",className:"ui checkbox"},e.createElement("input",{type:"checkbox"}),e.createElement("label",null))),e.createElement("td",{className:"maillistsumary"},e.createElement("div",{ref:"userfrom",className:"mailitemuser"},"insent"==this.props.mailbox?e.createElement("div",null,e.createElement("span",null,r.t("to"),": "),i.map(function(t,n){return e.createElement("span",{key:"recipient"+n},n>0?", ":"",e.createElement("span",{ref:"user_"+t}))})):e.createElement("span",{ref:"creator"})),e.createElement("div",{className:"mailitemsubject"},a.subject),e.createElement("div",{className:"mailitemsumary"},t)),e.createElement("td",{width:"100",className:"right aligned",style:{lineHeight:"30px"}},e.createElement("div",null,n," ",o.format("DD")+" thg "+o.format("MM")),e.createElement("a",{ref:"isstarred",onClick:this.toggleStarred,href:"#",className:"mailstar "+(1==a.is_favourite?"isstarred":"")},e.createElement("i",{className:"icon tc-star"}))))}});return c}),define("components/mail/mobile/maillist",["react","helper","eventbus","pref","phonegap","querystring","language/mail","components/mail/mobile/mailitem","collections/group","collections/mail"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"MailListComponent",changeDelay:500,changeTimer:null,loadDelay:400,loadTimer:null,allowLoadData:!0,checkedCounter:0,init:!1,changeInbox:!0,getInitialState:function(){return{items:[],length:0,total:0,hmac:""}},getDefaultProps:function(){return{hideoninit:!1,defaultmailbox:"inbox"}},hideHandler:function(){$(e.findDOMNode(this)).hide()},showHandler:function(){$(e.findDOMNode(this)).show()},loadData:function(){var e=r.get("mailbox");this.loadMail(e)},loadMail:function(t){this.loadTimer>0&&clearTimeout(this.loadTimer);var i=this,o=r.get("mailbox")||"inbox";if(o!=t&&(i.allowLoadData=!0,i.changeInbox=!0,r.set("page",1)),i.allowLoadData){var s=50;this.loadTimer=setTimeout(function(){$(e.findDOMNode(i.refs.loader)).addClass("active"),n.trigger("maillist:show"),n.trigger("maildetail:hide"),n.trigger("mailfilter:setcheckbox","uncheck"),r.set("mailbox",t);var o=r.get("page")||1,l={company_id:a.get("cid"),mailbox:t,keyword:r.get("keyword")||"",page:r.get("page")||1,limit:s,sort_by:"id",sort_type:"DESC"};(new c).fetch({data:l,success:function(e,t){t.items.length>0?1==o?i.setState(t):i.setState({items:i.state.items.concat(t.items)}):(i.allowLoadData=!1,i.changeInbox?i.setState(t):i.forceUpdate())},complete:function(){$(e.findDOMNode(i.refs.loader)).removeClass("active")}})},this.loadDelay)}},setPage:function(e){e=e||1,1>e&&(e=1),r.set("page",e);var t=r.get("mailbox")||"inbox";this.loadMail(t)},detectScrollBottom:function(){var t=this;$(e.findDOMNode(t.refs.maillist)).on("scroll",function(){if($(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight){var e=r.get("page")||1;e++,t.setPage(e)}})},onItemCheckHandler:function(e){e?this.checkedCounter=this.checkedCounter+1:this.checkedCounter=this.checkedCounter-1,n.trigger("mailitem:checked",this.checkedCounter)},onItemDeletedHandler:function(){var e=r.get("mailbox");this.checkedCounter=this.checkedCounter-1,n.trigger("maillist:load",e),n.trigger("mailitem:checked",this.checkedCounter)},getDataIds:function(e,t,a){(new e).getFromIdList({ids:t,success:function(e){$.each(e.items,function(e,t){n.trigger("mailitem:update",{type:a,item:t})})}})},loadMoreInfo:function(){var e=[],t=[];this.state.items.map(function(n,a){if(n.to.length>0)for(var i=0;i<n.to.length;i++)recipientID=n.to[i],/g/.test(recipientID)?e.push(recipientID.replace(/g/,"")):t.push(recipientID)}),this.getDataIds(l,e,"group")},componentDidUpdate:function(){this.loadMoreInfo(),this.changeInbox=!1},componentWillUnmount:function(){n.off("maillist:load",this.loadMail),n.off("maillist:setpage",this.setPage),n.off("maillist:hide",this.hideHandler),n.off("maillist:show",this.showHandler),i.destroyPullToRefresh()},componentDidMount:function(){var a=$("#mailheadtoolbar").outerHeight();$(e.findDOMNode(this.refs.maillist)).height(t.getFullHeight()-a),n.on("maillist:load",this.loadMail),n.on("maillist:setpage",this.setPage),n.on("maillist:hide",this.hideHandler),n.on("maillist:show",this.showHandler),this.props.hideoninit||this.loadMail(this.props.defaultmailbox),this.init=!0,this.changeInbox=!1,this.detectScrollBottom(),i.enablePullToRefresh(this.loadData)},render:function(){var t,n=this,a=r.get("mailbox");return 0==parseInt(n.state.total)&&this.init&&(t=e.createElement("tr",{className:"row-emptyemail"},e.createElement("td",{colSpan:"5"},e.createElement("div",{className:"empty-mail"},e.createElement("i",{className:"icon tc-search"})," ",o.t("empty"))))),e.createElement("div",{id:"maillist",ref:"maillist",className:this.props.hideoninit?"hide":"",style:{overflow:"auto"}},e.createElement("div",{className:"ui loader",ref:"loader"}),e.createElement("table",{style:{margin:"-1px 0 0 0"},className:"ui small fixed unstackable table"},e.createElement("tbody",null,parseInt(n.state.total)>0?n.state.items.map(function(t,i){var r=t;return e.createElement(s,{ref:a+r.id,key:a+"-"+r.id+moment().unix(),data:r,onItemCheckHandler:n.onItemCheckHandler,onItemDeletedHandler:n.onItemDeletedHandler,mailbox:a})}):t)))}});return d}),define("components/mail/mobile/mailfilter",["react","eventbus","language/mail"],function(e,t,n){var a=e.createClass({displayName:"Pagination",total:0,getInitialState:function(){return{}},componentDidMount:function(){var n=this;t.on("mailfilter:setcheckbox",n.setCheckbox),t.on("mailpagination:change",n.setTotal),$(e.findDOMNode(n.refs.dropdown)).dropdown({onChange:function(a,i,r){t.trigger("maillist:filter",a),"none"==a&&$(e.findDOMNode(n.refs["checkbox-filter"])).checkbox("set unchecked")}}),$(e.findDOMNode(n.refs["checkbox-filter"])).checkbox({beforeChecked:function(){console.log(n.total);var e=!0;return 0==n.total&&(e=!1),e},onChange:function(){var t=$(e.findDOMNode(n.refs["checkbox-filter"])).checkbox("is checked");t?$(e.findDOMNode(n.refs.dropdown)).dropdown("set selected","all"):$(e.findDOMNode(n.refs.dropdown)).dropdown("set selected","none")}})},componentWillUnmount:function(){t.off("mailfilter:setcheckbox",self.setCheckbox),t.off("mailpagination:change",self.setTotal)},setTotal:function(t){this.total=t.total,0==this.total?$(e.findDOMNode(this.refs["checkbox-filter"])).checkbox("set disabled"):$(e.findDOMNode(this.refs["checkbox-filter"])).checkbox("set enabled")},setCheckbox:function(t){var n=$(e.findDOMNode(this.refs["checkbox-filter"]));"check"==t?n.checkbox("set checked"):"uncheck"==t?n.checkbox("set unchecked"):n.checkbox("set indeterminate")},render:function(){return e.createElement("div",{id:"mail-filter"},e.createElement("div",{className:"ui buttons small"},e.createElement("div",{ref:"checkbox-filter",className:"ui checkbox button"},e.createElement("input",{type:"checkbox"}),e.createElement("label",null)),e.createElement("div",{ref:"dropdown",className:"ui top left floating pointing dropdown icon button"},e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item","data-value":"all"},n.t("filter_all")),e.createElement("div",{className:"item","data-value":"none"},n.t("filter_none")),e.createElement("div",{className:"item","data-value":"read"},n.t("filter_read")),e.createElement("div",{className:"item","data-value":"unread"},n.t("filter_unread")),e.createElement("div",{className:"item","data-value":"starred"},n.t("filter_starred")),e.createElement("div",{className:"item","data-value":"unstarred"},n.t("filter_unstarred"))))))}});return a}),define("components/mail/mobile/mailtoolbar",["backbone","react","pref","helper","eventbus","querystring","language/mail","models/mail"],function(e,t,n,a,i,r,o,s){var l=t.createClass({displayName:"MailToolbarComponent",getInitialState:function(){return{mailbox:r.get("mailbox")}},componentWillUnmount:function(){i.off("maillist:load",this.setMailbox)},componentDidMount:function(){i.on("maillist:load",this.setMailbox)},setMailbox:function(e){this.setState({mailbox:e})},goBack:function(t){t.preventDefault();var n=this.state.mailbox;e.history.navigate("mail/index/mailbox/"+n),i.trigger("maillist:load",n)},deleteSelectedMail:function(t){t.preventDefault();var n=this.props.text_id||0,a=this.state.mailbox;n>0?new s({id:n}).destroy({success:function(){e.history.navigate("mail/index/mailbox/"+a),i.trigger("maillist:load",a)},error:function(e,t){},complete:function(){}}):i.trigger("maillist:trashitem")},render:function(){return t.createElement("div",null,this.props.mail_id>0?t.createElement("div",{className:"ui buttons small",style:{marginRight:"5px"}},t.createElement("a",{href:"#",onClick:this.goBack,className:"ui icon button",title:o.t("back")},o.t("back"))):"",t.createElement("div",{ref:"mailtoolbar",className:"ui buttons small"},t.createElement("a",{href:"#",onClick:this.deleteSelectedMail,style:{fontSize:"0.930571rem"},className:"ui icon button",title:o.t("delete")},"intrash"==this.state.mailbox?o.t("delete_permanent"):o.t("delete"))))}});return l}),define("components/mail/mobile/pagination",["react","eventbus","language/default"],function(e,t,n){var a=e.createClass({displayName:"Pagination",getInitialState:function(){return{totalPage:1,currentPage:1,total:50,startRecord:1,endRecord:50}},componentDidMount:function(){var e=this;t.on("mailpagination:change",e._onChange)},componentWillUnmount:function(){t.off("mailpagination:change",this._onChange)},_onChange:function(e){var t=this,n=Math.ceil(e.total/e.limit),a=(e.currentpage-1)*e.limit,i=a+e.limit;i>e.total&&(i=e.total);var r={totalPage:n,currentPage:e.currentpage,total:e.total,startRecord:a+1,endRecord:i};t.setState(r)},_handleClick:function(e){if(e.preventDefault(),$(e.target).hasClass("item")?ele=$(e.target):ele=$(e.target).parents(".item").eq(0),!ele.hasClass("active")&&!ele.hasClass("disabled")){var n=ele.attr("href").replace("#","");
t.trigger("maillist:setpage",n)}},render:function(){var t=this.state.total,a=(this.state.currentPage-2,this.state.currentPage+2,this.state.startRecord),i=this.state.endRecord;0==t&&(a=0,i=0);var r=parseInt(this.state.currentPage),o=parseInt(this.state.totalPage);return e.createElement("div",{id:"mail-pagination"},e.createElement("span",{className:"item pagination-info"},e.createElement("strong",null,a," - ",i)," ",n.t("in_total").toLowerCase(),e.createElement("strong",null,t)),e.createElement("div",{onClick:this._handleClick,className:"ui pagination menu small"},e.createElement("a",{href:"#"+(r-1),title:n.t("newer"),className:"icon item "+(1==r?"disabled":"")},e.createElement("i",{className:"tc-left icon"})),e.createElement("a",{href:"#"+(r+1),title:n.t("older"),className:"icon item "+(0==t||r==o?"disabled":"")},e.createElement("i",{className:"tc-right icon"}))))}});return a}),define("components/mail/mobile/mailheadtoolbar",["react","helper","eventbus","querystring","language/mail","components/mail/mobile/mailfilter","components/mail/mobile/mailtoolbar","components/mail/mobile/pagination","models/mail"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"MailHeadToolbarComponent",mailData:0,composeHandler:function(){Backbone.history.navigate("mail/add",{trigger:!0})},reloadHandler:function(t){t=t||"inbox",$(e.findDOMNode(this.refs.mailheadtitle)).html(i.t(t)),$(e.findDOMNode(this)).find(".toolllist").show(),$(e.findDOMNode(this)).find(".tooldetail").hide()},trashAllHandler:function(e){e.preventDefault(),n.trigger("maillist:trashitem")},trashHandler:function(e,t){t.preventDefault(),e=e||"inbox",this.mailData.id>0&&new l({id:this.mailData.id}).destroy({success:function(){Backbone.history.navigate("mail/index/mailbox/"+e),n.trigger("maildetail:hide"),n.trigger("maillist:load",e)},error:function(e,t){},complete:function(){}})},goBack:function(e,t){t.preventDefault(),n.trigger("maildetail:hide"),n.trigger("maillist:show"),n.trigger("maillist:load",e),Backbone.history.navigate("mail/index/mailbox/"+e)},leftToggle:function(e){e.preventDefault(),n.trigger("mailleft:toggle")},loadedHandler:function(e){this.mailData=e},showDetailToolbarHandler:function(){$(e.findDOMNode(this)).find(".toolllist").hide(),$(e.findDOMNode(this)).find(".tooldetail").show()},toggleDeleteItemHandler:function(t){t>0?$(e.findDOMNode(this.refs.maildeleteall)).show():$(e.findDOMNode(this.refs.maildeleteall)).hide()},componentWillUnmount:function(){n.off("maillist:load",this.reloadHandler),n.off("maildetail:loaded",this.loadedHandler),n.off("maildetail:show",this.showDetailToolbarHandler),n.off("mailitem:checked",this.toggleDeleteItemHandler)},componentDidMount:function(){n.on("maillist:load",this.reloadHandler),n.on("maildetail:loaded",this.loadedHandler),n.on("maildetail:show",this.showDetailToolbarHandler),n.on("mailitem:checked",this.toggleDeleteItemHandler)},render:function(){var t=a.get("mailbox")||"inbox";return e.createElement("div",{id:"mailheadtoolbar",ref:"mailheadtoolbar",className:"mailheadmobile"},e.createElement("div",{ref:"listtoolbar"},e.createElement("div",{id:"mailheadmobiletoolbarleft"},e.createElement("div",{className:"toolllist"},e.createElement("a",{href:"#",onClick:this.leftToggle,className:"toollistlefticon"},e.createElement("i",{className:"tc-mail"}))),e.createElement("div",{className:"tooldetail"},e.createElement("a",{href:"#",onClick:this.goBack.bind(this,t),className:"toollistlefticon"},e.createElement("i",{className:"icon tc-left"})))),e.createElement("div",{id:"mailheadmobiletoolbarcenter"},e.createElement("h4",{className:"mailheadtitle",ref:"mailheadtitle"},i.t(t))),e.createElement("div",{id:"mailheadmobiletoolbarright"},e.createElement("div",{className:"toolllist"},e.createElement("a",{href:"#",onClick:this.trashAllHandler,ref:"maildeleteall",className:"mailmobile iconbutton maildeleteall"},e.createElement("i",{className:"tc-trash"})),e.createElement("a",{className:"ui tiny button orange",style:{textTransform:"uppercase"},onClick:this.composeHandler},i.t("compose"))),e.createElement("div",{className:"tooldetail"},e.createElement("a",{href:"#",onClick:this.trashHandler.bind(this,t),className:"mailmobile iconbutton"},e.createElement("i",{className:"tc-trash"}))))))}});return c}),define("components/mail/mobile/detail",["react","pref","helper","eventbus","querystring","language/mail","components/mail/mobile/replyform","components/mail/mobile/replychoice","components/filestrip","models/user","models/group","models/mail"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"MailDetailComponent",replyForm:null,replyAllForm:null,forwardForm:null,getInitialState:function(){return{data:{subject:"",content:"",to:[],files:[],date_created:moment().unix()}}},hideHandler:function(){$(e.findDOMNode(this.refs.moreactiondetail)).dropdown("hide"),$(e.findDOMNode(this.refs.detailinfo)).dropdown("hide"),$(e.findDOMNode(this)).removeClass("active")},showHandler:function(t){$(e.findDOMNode(this)).addClass("active"),this.loadData(t)},loadData:function(t){var n=this;$(e.findDOMNode(n.refs.loader)).addClass("active"),$(e.findDOMNode(n.refs.maildetail)).hide();var r=i.get("mailbox")||"inbox";new u({id:t}).fetch({data:{mailbox:r},success:function(t,i){n.setState({data:i}),$(e.findDOMNode(n.refs.maildetail)).show(),a.trigger("maildetail:loaded",i)},complete:function(){$(e.findDOMNode(n.refs.loader)).removeClass("active")}}),$(e.findDOMNode(n.refs.detailinfo)).dropdown()},toggleStarred:function(n){n.preventDefault();var a=this.state.data,i=$(e.findDOMNode(this.refs.isstarred)),r={company_id:t.get("cid"),creator_id:t.get("uid")};$.ajax({type:"PUT",dataType:"json",url:(new u).urlRoot+"/starred/"+a.id,data:r,success:function(e){i.hasClass("isstarred")?i.removeClass("isstarred"):i.addClass("isstarred")},error:function(){}})},messageReply:function(t){switch(t=t||"reply",$(e.findDOMNode(this)).find(".reply_form").hide(),t){case"reply":$(e.findDOMNode(this.refs.reply_form)).show(),this.replyForm.focusMessage();break;case"reply_all":$(e.findDOMNode(this.refs.reply_all_form)).show(),this.replyAllForm.focusMessage();break;case"forward":$(e.findDOMNode(this.refs.forward_form)).show(),this.forwardForm.focusMessage()}},messageTrash:function(e){var t=i.get("mailbox");e>0&&new u({id:e}).destroy({success:function(){Backbone.history.navigate("mail/index/mailbox/"+t),a.trigger("maillist:load",t)},error:function(e,t){},complete:function(){}})},messageQuoteToggle:function(e){e.preventDefault();var t=e.currentTarget;$(t).next().toggle()},compactReply:function(){var t=this,n=e.createElement("a",{className:"quotedmessagetoggle",href:"#"},e.createElement("i",{className:"tc-more"}));$(e.findDOMNode(this)).find(".quotedmessage").before(e.renderToString(n)),$(e.findDOMNode(this)).find(".quotedmessage").toggle(),$(e.findDOMNode(this)).find(".quotedmessagetoggle").on("click",function(e){t.messageQuoteToggle(e)})},renderReplyForm:function(t,n){var a=this,i=a.state.data;e.render(e.createElement(o,{type:"reply",key:"reply_"+i.id,data:i,sender:t,recipients:n}),e.findDOMNode(a.refs.reply_form),function(){a.replyForm=this}),e.render(e.createElement(o,{type:"reply_all",key:"reply_all_"+i.id,data:i,sender:t,recipients:n}),e.findDOMNode(a.refs.reply_all_form),function(){a.replyAllForm=this}),e.render(e.createElement(o,{type:"forward",key:"forward_"+i.id,data:i,sender:t,recipients:n}),e.findDOMNode(a.refs.forward_form),function(){a.forwardForm=this})},composeHandler:function(e){var t=e.attr("href")||e.attr("data-id");t=parseInt(t),t>0&&a.trigger("mail:compose",[t])},toggleMoreMetaHandler:function(t){t.preventDefault();var n=t.currentTarget,a="";$(n).hasClass("active")?(a=r.t("detail"),$(n).removeClass("active"),$(e.findDOMNode(this.refs.metadatecreated)).show()):(a=r.t("hide_detail"),$(n).addClass("active"),$(e.findDOMNode(this.refs.metadatecreated)).hide()),$(e.findDOMNode(this.refs.detailinfo)).slideToggle(),$(n).text(a)},openReplyChoiceHanlder:function(t){t.preventDefault();var n=this.state.data,a=!1;n.to.length>1?a=!0:1==n.to.length&&/g/.test(n.to[0])&&(a=!0),e.render(e.createElement(s,{replyall:a}),e.findDOMNode(this.refs.replychoice))},unmountReplyChoiceHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.replychoice))},unmountDynamicComponents:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.reply_form)),e.unmountComponentAtNode(e.findDOMNode(this.refs.reply_all_form)),e.unmountComponentAtNode(e.findDOMNode(this.refs.forward_form)),e.unmountComponentAtNode(e.findDOMNode(this.refs.avatar))},updateReceiptHtml:function(t,n){$(e.findDOMNode(this.refs.receiver)).html(t),$(e.findDOMNode(this.refs.receiverinfo)).html(n)},componentDidUpdate:function(){var a=this,i=t.get("uid"),o=[],s={},l=[],u=2,m=0;o=this.state.data.to||o,u=o.length+1,this.state.data.creator_id>0&&new c({id:this.state.data.creator_id}).fetch({success:function(t,i){e.render(e.createElement("img",{className:"ui avatar image",src:n.getAvatarPath(i.avatar)}),e.findDOMNode(a.refs.avatar)),$(e.findDOMNode(a.refs.sender)).html(i.fullname),s=i,m++,m==u&&a.renderReplyForm(s,l)}});for(var p="",h="",f=0;f<o.length;f++){var g=o[f];/g/.test(g)?new d({id:g.replace(/g/,"")}).fetch({success:function(e,t){""!=p&&(p+=", ",h+="<br />"),t.fullname=t.name,p+=t.name,h+=t.name,l.push(t),m++,m==u&&(p=r.t("to")+" "+p,a.updateReceiptHtml(p,h),a.renderReplyForm(s,l))}}):new c({id:g}).fetch({success:function(e,t){var c=(t.fullname.split(" "),t.fullname),d=c;o.length>1&&(d=n.getShortName(c)),""!=p&&(p+=", ",h+="<br />"),p+=o[f]!=i?d:r.t("me"),h+=c,l.push(t),m++,m==u&&(p=r.t("to")+" "+p,a.updateReceiptHtml(p,h),a.renderReplyForm(s,l))}})}$(e.findDOMNode(this.refs.moreactiondetail)).dropdown(),$(e.findDOMNode(a.refs.detailinfo)).dropdown(),$(e.findDOMNode(a.refs.mailtext)).find(".forwardedmessagefrom a").each(function(){$(this).on("click",function(e){e.preventDefault(),a.composeHandler($(this))})}),$(e.findDOMNode(a.refs.mailtext)).find(".forwardedmessageto a").each(function(){$(this).on("click",function(e){e.preventDefault(),a.composeHandler($(this))})}),this.compactReply()},componentWillUnmount:function(){a.off("maildetail:hide",this.hideHandler),a.off("maildetail:show",this.showHandler),a.off("maildetail:reply",self.messageReply),a.off("replychoice:unmount",self.unmountReplyChoiceHandler),this.unmountDynamicComponents()},componentDidMount:function(){var t=this;a.on("maildetail:hide",t.hideHandler),a.on("maildetail:show",t.showHandler),a.on("maildetail:reply",t.messageReply),a.on("replychoice:unmount",t.unmountReplyChoiceHandler),$(e.findDOMNode(t.refs.moreactiondetail)).dropdown()},render:function(){var t=this,a=t.state.data,i=moment.unix(a.date_created),o=r.t("day")+" "+i.format("DD")+" "+r.t("month")+" "+i.format("MM")+" "+r.t("year")+" "+i.format("YYYY")+", "+i.format("HH:mm"),s=a.content.replace(/\{quoted_sender_time\}/g,r.t("quoted_sender_time"));return s=s.replace(/\{quoted_sender_write\}/g,r.t("quoted_sender_write")),s=s.replace(/\{forwarded_head\}/g,r.t("forwarded_head")),s=s.replace(/\{forwarded_from\}/g,r.t("forwarded_from")),s=s.replace(/\{forwarded_date\}/g,r.t("forwarded_date")),s=s.replace(/\{forwarded_to\}/g,r.t("forwarded_to")),e.createElement("div",{id:"maildetail",ref:"detailwrapper",className:"mailpush mailpushright",style:{top:50}},e.createElement("div",{className:"ui loader",ref:"loader"}),e.createElement("div",{ref:"maildetail"},e.createElement("div",{id:"mailsubjectmobile"},e.createElement("h3",null,a.subject),e.createElement("a",{ref:"isstarred",href:"#",onClick:this.toggleStarred,className:"detailstarredtoggle "+(1==a.is_favourite?"isstarred":"")},e.createElement("i",{className:"icon tc-star"}))),e.createElement("div",{className:"mobilecontent",style:{background:"#FFF",padding:"10px",position:"relative"}},e.createElement("div",{className:"ui items"},e.createElement("div",{className:"item",style:{marginBottom:0}},e.createElement("div",{ref:"avatar",className:"mailmobileavatar"}),e.createElement("div",{className:"left aligned content"},e.createElement("div",{className:"meta"},e.createElement("span",{ref:"sender"}),e.createElement("br",null),e.createElement("span",{ref:"receiver"}),e.createElement("br",null),e.createElement("span",{ref:"metadatecreated"},n.relativeTime(a.date_created)),e.createElement("a",{ref:"viewmoremeta",style:{color:"#009c95"},onClick:t.toggleMoreMetaHandler},r.t("detail"))))),e.createElement("div",{id:"detailinfo",className:"mailmobile hide",ref:"detailinfo"},e.createElement("table",{className:"ui very basic unstackable table"},e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{className:"right aligned",style:{verticalAlign:"top"}},r.t("to"),":"),e.createElement("td",{ref:"receiverinfo"})),e.createElement("tr",null,e.createElement("td",{className:"right aligned",style:{verticalAlign:"top"}},r.t("date"),":"),e.createElement("td",{ref:"dateinfo"},o)))))),e.createElement("div",{className:"mobilereplybutton"},e.createElement("a",{href:"#",onClick:this.openReplyChoiceHanlder},e.createElement("i",{className:"tc-compose"}))),e.createElement("div",{id:"mailtext",ref:"mailtext",key:moment().unix(),dangerouslySetInnerHTML:{__html:s}}),a.files.length>0?e.createElement("div",{id:"mailfile"},e.createElement("div",{className:"ui divider"}),e.createElement("p",null,e.createElement("strong",null,a.files.length," ",r.t("attachment"))),e.createElement(l,{files:a.files})):"",e.createElement("div",{className:"ui divider"}),e.createElement("div",{ref:"reply_form",className:"reply_form"}),e.createElement("div",{ref:"reply_all_form",className:"reply_form",style:{display:"none"}}),e.createElement("div",{ref:"forward_form",className:"reply_form",style:{display:"none"}}),e.createElement("div",{ref:"replychoice"}))))}});return m}),define("components/mail/mobile/compose",["react","helper","eventbus","pref","language/mail","language/default","components/employeepicker","components/tinymce","models/file","models/mail","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"MailComposeComponent",alreadyInitFileUpload:!1,allowSend:!0,formError:{subject:["error_subject_required"],message:["error_message_required","error_message_too_short","error_message_too_long"],employee:["error_empty_to"]},getDefaultProps:function(){return{popup:!0,recipients:[]}},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.employees)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},createMailHandle:function(r){var o=this;if(o.allowSend){o.allowSend=!1;var s=$(e.findDOMNode(this.refs.form));s.addClass("loading");var l=$(e.findDOMNode(this.refs.submit));l.addClass("loading");var d=[];$(e.findDOMNode(o)).find(".attachedfileid").each(function(e){d.push($(this).attr("data-id"))});var u=o.refs.editor.getEditor(),m="";null!=u&&(m=u.getContent(),m=t.trimEmptyParagraph(m)),(new c).save({company_id:a.get("cid"),creator_id:a.get("uid"),subject:$(e.findDOMNode(o.refs.subject)).val(),content:m,file_list:d,to:o.getSelectedUserIdList()},{success:function(a,r){t.showSuccess(i.t("success_add")),$(e.findDOMNode(o)).find(".uploadifive-queue-item").hide(),o.props.popup?(o.hidePopup(),n.trigger("mailleft:activemenu","insent"),n.trigger("maillist:load","insent")):Backbone.history.navigate("mail/index/mailbox/insent/id/"+r.id,{trigger:!0})},error:function(e,n){t.notifyErrorAndForm(n,i,"error_add",s,o.formError)},complete:function(){s.removeClass("loading"),l.removeClass("loading"),o.allowSend=!0}})}},formSubmit:function(){$(e.findDOMNode(this.refs.form)).submit()},hidePopup:function(){$(e.findDOMNode(this.refs.mailcompose)).modal("hide"),n.trigger("compose:unmount")},showPopup:function(){var t=this;this.props.popup&&$(e.findDOMNode(this.refs.mailcompose)).modal({context:this.getDOMNode(),closable:!1,onHidden:function(){t.hidePopup()},onVisible:function(){setTimeout(function(){$(e.findDOMNode(t.refs.subject)).focus()},200)}}).modal("show")},handleKeyup:function(e,t){e.preventDefault(),e.keyCode?e.keyCode:e.which},handleEditorFocus:function(e,t){},handleEditorBlur:function(e,t){},componentWillUnmount:function(){},componentWillUpdate:function(){this.showPopup()},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.form)).form({fields:{subject:{identifier:"subject",rules:[{type:"empty",prompt:i.t("error_subject_required")}]},message:{identifier:"message"},employee:{identifier:"employee",rules:[{type:"empty",prompt:i.t("error_empty_to")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.createMailHandle()}}),this.alreadyInitFileUpload||((new l).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new l).OBJECTTYPE_MESSAGE,"ffile",(new l).STATUS_ENABLE),this.alreadyInitFileUpload=!0),this.showPopup()},render:function(){var t=[];this.props.recipients.length>0&&(t=this.props.recipients);var n={autoresize_min_height:170,autoresize_max_height:170,toolbar:"bold italic underline | link unlink"};return e.createElement("div",{id:"mailcompose-inner"},e.createElement("div",{className:"ui "+(this.props.popup?"modal":""),ref:"mailcompose"},this.props.popup?e.createElement("div",{className:"header"},i.t("new_mail")):null,e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"field",style:{marginBottom:this.props.popup?0:15}},e.createElement("label",null,i.t("recipient")),e.createElement(o,{defaultvalue:t,getgroup:!0,ref:"employees",inputname:"employee"})),e.createElement("div",{className:"field",style:{marginBottom:this.props.popup?0:15}},e.createElement("label",null,i.t("subject")),e.createElement("input",{type:"text",ref:"subject",name:"subject"})),e.createElement("div",{className:"field",style:{marginBottom:this.props.popup?0:15}},e.createElement("label",null,i.t("message")),e.createElement(s,{ref:"editor",id:"message",name:"message",content:"",autoLoad:!0,config:n,onKeyup:this.handleKeyup,onFocus:this.handleEditorFocus,onBlur:this.handleEditorBlur})),e.createElement("div",{className:"field",style:{marginBottom:this.props.popup?0:15}},e.createElement("div",{style:{marginRight:120}},e.createElement("input",{type:"file",ref:"fileinput",id:"ffile",name:"ffile",multiple:"multiple",className:"hide"}))),this.props.popup?null:e.createElement(d,{required:!1,leftwide:"hide"},e.createElement("a",{className:"ui teal button",href:"javascript: void(0)",ref:"submit",onClick:this.formSubmit},r.t("send"))))),this.props.popup?e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic cancel close button"},r.t("close")),e.createElement("a",{className:"ui teal button",href:"javascript: void(0)",ref:"submit",onClick:this.formSubmit},r.t("send"))):null))}});return u}),define("components/email/mobile/index",["backbone","react","helper","eventbus","querystring","components/mail/mobile/mailleft","components/mail/mobile/maillist","components/mail/mobile/mailheadtoolbar","components/mail/mobile/detail","components/mail/mobile/compose"],function(e,t,n,a,i,r,o,s,l,c){var d=t.createClass({displayName:"MailMobileComponent",openHandler:function(t){e.history.navigate("mail/index/mailbox/"+i.get("mailbox")+"/id/"+t),a.trigger("maillist:hide"),a.trigger("maildetail:show",t)},composeHandler:function(e){e=e||[],t.render(t.createElement(c,{recipients:e}),t.findDOMNode(this.refs.mailcompose))},unmountCompose:function(){t.unmountComponentAtNode(t.findDOMNode(this.refs.mailcompose))},checkOpenDetail:function(){""!=i.get("id")?a.trigger("mail:open",i.get("id")):(a.trigger("maildetail:hide"),a.trigger("maillist:load",i.get("mailbox")))},componentDidUpdate:function(){this.checkOpenDetail()},componentWillUnmount:function(){this.unmountCompose(),a.off("mail:open",this.openHandler),a.off("mail:compose",this.composeHandler),a.off("compose:unmount",this.unmountCompose)},componentDidMount:function(){a.on("mail:open",this.openHandler),a.on("mail:compose",this.composeHandler),a.on("compose:unmount",this.unmountCompose),this.checkOpenDetail()},render:function(){var e="inbox";return""!=i.get("mailbox")&&(e=i.get("mailbox")),t.createElement("div",{id:"mailbox",className:"mailboxmobile"},t.createElement(r,{defaultmailbox:e}),t.createElement("div",{id:"mailcontainermobile"},t.createElement(s,null),t.createElement(o,{defaultmailbox:e,hideoninit:""!=i.get("id")}),t.createElement(l,null)),t.createElement("div",{ref:"mailcompose"}),t.createElement("div",{style:{clear:"both"}}))}});return d}),define("components/email/mobile/mailfilter",["react","eventbus","language/mail"],function(e,t,n){var a=e.createClass({displayName:"Pagination",total:0,getInitialState:function(){return{}},componentDidMount:function(){var n=this;t.on("mailfilter:setcheckbox",n.setCheckbox),t.on("mailpagination:change",n.setTotal),$(e.findDOMNode(n.refs.dropdown)).dropdown({onChange:function(a,i,r){t.trigger("maillist:filter",a),"none"==a&&$(e.findDOMNode(n.refs["checkbox-filter"])).checkbox("set unchecked")}}),$(e.findDOMNode(n.refs["checkbox-filter"])).checkbox({beforeChecked:function(){console.log(n.total);var e=!0;return 0==n.total&&(e=!1),e},onChange:function(){var t=$(e.findDOMNode(n.refs["checkbox-filter"])).checkbox("is checked");t?$(e.findDOMNode(n.refs.dropdown)).dropdown("set selected","all"):$(e.findDOMNode(n.refs.dropdown)).dropdown("set selected","none")}})},componentWillUnmount:function(){t.off("mailfilter:setcheckbox",self.setCheckbox),t.off("mailpagination:change",self.setTotal)},setTotal:function(t){this.total=t.total,0==this.total?$(e.findDOMNode(this.refs["checkbox-filter"])).checkbox("set disabled"):$(e.findDOMNode(this.refs["checkbox-filter"])).checkbox("set enabled")},setCheckbox:function(t){var n=$(e.findDOMNode(this.refs["checkbox-filter"]));"check"==t?n.checkbox("set checked"):"uncheck"==t?n.checkbox("set unchecked"):n.checkbox("set indeterminate")},render:function(){return e.createElement("div",{id:"mail-filter"},e.createElement("div",{className:"ui buttons small"},e.createElement("div",{ref:"checkbox-filter",className:"ui checkbox button"},e.createElement("input",{type:"checkbox"}),e.createElement("label",null)),e.createElement("div",{ref:"dropdown",className:"ui top left floating pointing dropdown icon button"},e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item","data-value":"all"},n.t("filter_all")),e.createElement("div",{className:"item","data-value":"none"},n.t("filter_none")),e.createElement("div",{className:"item","data-value":"read"},n.t("filter_read")),e.createElement("div",{className:"item","data-value":"unread"},n.t("filter_unread")),e.createElement("div",{className:"item","data-value":"starred"},n.t("filter_starred")),e.createElement("div",{className:"item","data-value":"unstarred"},n.t("filter_unstarred"))))))}});return a}),define("components/email/mobile/mailheadtoolbar",["react","helper","eventbus","querystring","language/mail","components/mail/mobile/mailfilter","components/mail/mobile/mailtoolbar","components/mail/mobile/pagination","models/mail"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"MailHeadToolbarComponent",mailData:0,composeHandler:function(){n.trigger("mail:compose")},reloadHandler:function(t){t=t||"inbox",$(e.findDOMNode(this.refs.mailheadtitle)).html(i.t(t)),$(e.findDOMNode(this)).find(".toolllist").show(),$(e.findDOMNode(this)).find(".tooldetail").hide()},trashAllHandler:function(e){e.preventDefault(),n.trigger("maillist:trashitem")},trashHandler:function(e,t){t.preventDefault(),e=e||"inbox",this.mailData.message_text.id>0&&new l({id:this.mailData.message_text.id}).destroy({success:function(){Backbone.history.navigate("mail/index/mailbox/"+e),n.trigger("maildetail:hide"),n.trigger("maillist:load",e)},error:function(e,t){},complete:function(){}})},goBack:function(e,t){t.preventDefault(),n.trigger("maildetail:hide"),n.trigger("maillist:load",e),Backbone.history.navigate("mail/index/mailbox/"+e)},leftToggle:function(e){e.preventDefault(),n.trigger("mailleft:toggle")},loadedHandler:function(e){this.mailData=e},showDetailToolbarHandler:function(){$(e.findDOMNode(this)).find(".toolllist").hide(),$(e.findDOMNode(this)).find(".tooldetail").show()},toggleDeleteItemHandler:function(t){t>0?$(e.findDOMNode(this.refs.maildeleteall)).show():$(e.findDOMNode(this.refs.maildeleteall)).hide()},componentWillUnmount:function(){n.off("maillist:load",this.reloadHandler),n.off("maildetail:loaded",this.loadedHandler),n.off("maildetail:show",this.showDetailToolbarHandler),n.off("mailitem:checked",this.toggleDeleteItemHandler)},componentDidMount:function(){n.on("maillist:load",this.reloadHandler),n.on("maildetail:loaded",this.loadedHandler),n.on("maildetail:show",this.showDetailToolbarHandler),n.on("mailitem:checked",this.toggleDeleteItemHandler)},render:function(){var t=a.get("mailbox")||"inbox";return e.createElement("div",{id:"mailheadtoolbar",ref:"mailheadtoolbar",className:"mailheadmobile"},e.createElement("div",{ref:"listtoolbar"},e.createElement("div",{id:"mailheadmobiletoolbarleft"},e.createElement("div",{className:"toolllist"},e.createElement("a",{href:"#",onClick:this.leftToggle,className:"ui tiny button"},e.createElement("i",{className:"tc-hamburger"}))),e.createElement("div",{className:"tooldetail"},e.createElement("a",{href:"#",onClick:this.goBack.bind(this,t),className:"ui icon tiny button"},e.createElement("i",{className:"icon tc-left"})))),e.createElement("div",{id:"mailheadmobiletoolbarcenter"},e.createElement("h4",{className:"mailheadtitle",ref:"mailheadtitle"},i.t(t))),e.createElement("div",{id:"mailheadmobiletoolbarright"},e.createElement("div",{className:"toolllist ui buttons"},e.createElement("a",{href:"#",onClick:this.trashAllHandler,ref:"maildeleteall",className:"mailmobile iconbutton maildeleteall"},e.createElement("i",{className:"tc-trash"})),e.createElement("a",{className:"ui tiny button orange",style:{textTransform:"uppercase"},onClick:this.composeHandler},e.createElement("i",{className:"tc-pencil"}))),e.createElement("div",{className:"tooldetail"},e.createElement("a",{href:"#",onClick:this.trashHandler.bind(this,t),className:"mailmobile iconbutton"},e.createElement("i",{className:"tc-trash"}))))))}});return c}),define("components/email/mobile/mailitem",["react","pref","helper","eventbus","querystring","language/mail","models/user","models/mail"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"MailItemComponent",getDefaultProps:function(){return{onItemCheckHandler:function(e){}}},onFilter:function(t){var n=this.props.data,a=$(e.findDOMNode(this.refs.checkbox));switch(a.checkbox("set unchecked"),t){case"all":a.checkbox("set checked");break;case"none":a.checkbox("set unchecked");break;case"read":1==n.isread&&a.checkbox("set checked");break;case"unread":0==n.isread&&a.checkbox("set checked");break;case"starred":1==n.isstarred&&a.checkbox("set checked");break;case"unstarred":0==n.isstarred&&a.checkbox("set checked")}this.onSelected()},onTrash:function(){var e=this;if(this.isChecked()){var t=this.props.data.text_id;i.get("mailbox"),new s({id:t}).destroy({success:function(){e.props.onItemDeletedHandler()},error:function(e,t){},complete:function(){}})}},onSelected:function(){var t=$(e.findDOMNode(this.refs.checkbox));t.checkbox("is checked")?$(e.findDOMNode(this)).addClass("selected"):$(e.findDOMNode(this)).removeClass("selected"),this.props.onItemCheckHandler(t.checkbox("is checked"))},gotoDetail:function(e){a.trigger("mail:open",this.props.data.id)},isChecked:function(){return $(e.findDOMNode(this.refs.checkbox)).checkbox("is checked")},toggleStarred:function(n){n.preventDefault();var a=this.props.data,i=$(e.findDOMNode(this.refs.isstarred)),r={company_id:t.get("cid"),creator_id:t.get("uid")};$.ajax({type:"PUT",dataType:"json",url:(new s).urlRoot+"/starred/"+a.id,data:r,success:function(e){i.hasClass("isstarred")?i.removeClass("isstarred"):i.addClass("isstarred")},error:function(){}})},componentDidUpdate:function(){},componentWillUnmount:function(){a.off("maillist:filter",self.onFilter),a.off("maillist:trashitem",self.onTrash)},componentDidMount:function(){var i=this,s=i.props.data,l=i.props.mailbox,c=parseInt(t.get("uid"));if("sent"==l){var d=parseInt(s.receiver_id),u=s.recipients.user_ids||[];if(u.length>0){for(var m=r.t("to")+": ",p=0;p<u.length;p++)p>0&&(m+=", "),u[p]!=c?new o({id:u[p]}).fetch({success:function(e,t){var a=(t.fullname.split(" "),t.fullname);u.length>1&&(a=n.getShortName(a)),m+=a}}):m+=r.t("me");$(e.findDOMNode(i.refs.userfrom)).html(m)}else d>0&&(d!=c?new o({id:d}).fetch({success:function(t,n){$(e.findDOMNode(i.refs.userfrom)).html(r.t("to")+": "+n.fullname)}}):$(e.findDOMNode(i.refs.userfrom)).html(r.t("to")+": "+r.t("me")))}else s.creator_id>0&&new o({id:s.creator_id}).fetch({success:function(t,n){$(e.findDOMNode(i.refs.userfrom)).html(n.fullname)}});$(e.findDOMNode(this.refs.checkbox)).checkbox({onChange:function(){i.onSelected()}}),$(e.findDOMNode(i)).find("td").not(".nod").on("click",function(e){i.gotoDetail(e)}),a.on("maillist:filter",i.onFilter),a.on("maillist:trashitem",i.onTrash)},render:function(){var t,n,a=this.props.data,i=moment.unix(a.date_created),o=parseInt(a.count_file),s=a.isread;if(""!=a.summary){var l=a.summary.replace(/\{quoted_sender_time\}/,r.t("quoted_sender_time"));l=l.replace(/\{quoted_sender_write\}/,r.t("quoted_sender_write")),l=l.replace(/\{forwarded_head\}/,""),l=l.replace(/\{forwarded_from\}/,r.t("forwarded_from")),l=l.replace(/\{forwarded_date\}/,r.t("forwarded_date")),l=l.replace(/\{forwarded_to\}/,r.t("forwarded_to")),t=e.createElement("span",{className:"shortsumary"},l)}return o>0&&(n=e.createElement("i",{className:"icon tc-attach"})),"sent"==this.props.mailbox&&(s=1),e.createElement("tr",{className:0==s?"unread":""},e.createElement("td",{width:"33",className:"nod"},e.createElement("div",{ref:"checkbox",className:"ui checkbox"},e.createElement("input",{type:"checkbox"}),e.createElement("label",null))),e.createElement("td",{className:"maillistsumary"},e.createElement("div",{ref:"userfrom",className:"mailitemuser"}),e.createElement("div",{className:"mailitemsubject"},a.subject),e.createElement("div",{className:"mailitemsumary"},t)),e.createElement("td",{width:"100",className:"right aligned",style:{lineHeight:"30px"}},e.createElement("div",null,n," ",i.format("DD")+" thg "+i.format("MM")),e.createElement("a",{ref:"isstarred",onClick:this.toggleStarred,href:"#",className:"mailstar "+(1==a.isstarred?"isstarred":"")},e.createElement("i",{className:"icon tc-star"}))))}});return l}),define("components/email/mobile/mailleft",["backbone","react","helper","eventbus","language/mail"],function(e,t,n,a,i){var r=t.createClass({displayName:"MailLeftComponent",getDefaultProps:function(){return{defaultmailbox:"inbox"}},loadMail:function(t,n){n.preventDefault(),this.toggleHandler(),this.activeMenu(t),e.history.navigate("mail/index/mailbox/"+t),a.trigger("maillist:load",t)},activeMenu:function(e){$(t.findDOMNode(this)).find("ul li").each(function(){$(this).attr("data-menu")==e?$(this).addClass("active"):$(this).removeClass("active")})},toggleHandler:function(){$(t.findDOMNode(this)).toggleClass("active")},componentWillUnmount:function(){a.off("mailleft:activemenu",this.activeMenu)},componentDidMount:function(){$(t.findDOMNode(this.refs.mailleft)).height(n.getFullHeight()).niceScroll({autohidemode:!0,cursoropacitymax:.5}),a.on("mailleft:activemenu",this.activeMenu),a.on("mailleft:toggle",this.toggleHandler),a.trigger("mailleft:activemenu",this.props.defaultmailbox)},render:function(){return t.createElement("div",{id:"mailleftmobile",className:"mailpushleft",ref:"mailleft"},t.createElement("ul",null,t.createElement("li",{"data-menu":"inbox"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"inbox")},i.t("inbox"))),t.createElement("li",{"data-menu":"isstarred"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"isstarred")},i.t("starred"))),t.createElement("li",{
"data-menu":"sent"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"sent")},i.t("sent"))),t.createElement("li",{"data-menu":"intrash"},t.createElement("a",{href:"#",onClick:this.loadMail.bind(this,"intrash")},i.t("intrash")))))}});return r}),define("components/email/mobile/maillist",["react","helper","eventbus","pref","querystring","language/message","components/mail/mobile/mailitem","collections/messages"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"MailListComponent",changeDelay:500,changeTimer:null,loadDelay:400,loadTimer:null,allowLoadData:!0,checkedCounter:0,init:!1,getInitialState:function(){return{items:[],length:0,total:0,hmac:""}},getDefaultProps:function(){return{hideoninit:!1,defaultmailbox:"inbox"}},hideHandler:function(){$(e.findDOMNode(this)).hide()},showHandler:function(){$(e.findDOMNode(this)).show()},loadMail:function(t){this.loadTimer>0&&clearTimeout(this.loadTimer);var r=this,o=i.get("mailbox")||"inbox";if(o!=t&&(r.allowLoadData=!0,i.set("page",1)),r.allowLoadData){var l=50;this.loadTimer=setTimeout(function(){$(e.findDOMNode(r.refs.loader)).addClass("active"),n.trigger("maillist:show"),n.trigger("maildetail:hide"),n.trigger("mailfilter:setcheckbox","uncheck"),i.set("mailbox",t);var o=i.get("page")||1,c={company_id:a.get("cid"),mailbox:t,keyword:i.get("keyword")||"",page:i.get("page")||1,limit:l,sort_by:"id",sort_type:"DESC"};(new s).fetch({data:c,success:function(e,t){t.items.length>0?1==o?r.setState(t):r.setState({items:r.state.items.concat(t.items)}):(r.allowLoadData=!1,r.init?r.forceUpdate():r.setState(t))},complete:function(){$(e.findDOMNode(r.refs.loader)).removeClass("active")}})},this.loadDelay)}},setPage:function(e){e=e||1,1>e&&(e=1),i.set("page",e);var t=i.get("mailbox")||"inbox";this.loadMail(t)},detectScrollBottom:function(){var t=this;$(e.findDOMNode(t.refs.maillist)).on("scroll",function(){if($(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight){var e=i.get("page")||1;e++,t.setPage(e)}})},onItemCheckHandler:function(e){e?this.checkedCounter=this.checkedCounter+1:this.checkedCounter=this.checkedCounter-1,n.trigger("mailitem:checked",this.checkedCounter)},onItemDeletedHandler:function(){var e=i.get("mailbox");this.checkedCounter=this.checkedCounter-1,n.trigger("maillist:load",e),n.trigger("mailitem:checked",this.checkedCounter)},componentWillUnmount:function(){n.off("maillist:load",this.loadMail),n.off("maillist:setpage",this.setPage),n.off("maillist:hide",this.hideHandler),n.off("maillist:show",this.showHandler)},componentDidMount:function(){$(e.findDOMNode(this.refs.maillist)).height(t.getFullHeight()),n.on("maillist:load",this.loadMail),n.on("maillist:setpage",this.setPage),n.on("maillist:hide",this.hideHandler),n.on("maillist:show",this.showHandler),this.props.hideoninit||this.loadMail(this.props.defaultmailbox),this.init=!0,this.detectScrollBottom()},render:function(){var t,n=this,a=i.get("mailbox");return 0==parseInt(n.state.total)&&this.init&&(t=e.createElement("tr",{className:"row-emptyemail"},e.createElement("td",{colSpan:"5"},e.createElement("div",{className:"empty-mail"},e.createElement("i",{className:"icon tc-search"})," ",r.t("empty"))))),e.createElement("div",{id:"maillist",ref:"maillist",className:this.props.hideoninit?"hide":"",style:{overflow:"auto"}},e.createElement("div",{className:"ui loader",ref:"loader"}),e.createElement("table",{style:{margin:"-1px 0 0 0"},className:"ui small fixed unstackable table"},e.createElement("tbody",null,n.state.total>0?n.state.items.map(function(t,i){var r=t;return e.createElement(o,{ref:a+r.id,key:a+r.id+moment().unix(),data:r,onItemCheckHandler:n.onItemCheckHandler,onItemDeletedHandler:n.onItemDeletedHandler,mailbox:a})}):t)))}});return l}),define("components/email/mobile/mailtoolbar",["backbone","react","pref","helper","eventbus","querystring","language/mail","models/mail"],function(e,t,n,a,i,r,o,s){var l=t.createClass({displayName:"MailToolbarComponent",getInitialState:function(){return{mailbox:r.get("mailbox")}},componentWillUnmount:function(){i.off("maillist:load",this.setMailbox)},componentDidMount:function(){i.on("maillist:load",this.setMailbox)},setMailbox:function(e){this.setState({mailbox:e})},goBack:function(t){t.preventDefault();var n=this.state.mailbox;e.history.navigate("mail/index/mailbox/"+n),i.trigger("maillist:load",n)},deleteSelectedMail:function(t){t.preventDefault();var n=this.props.text_id||0,a=this.state.mailbox;n>0?new s({id:n}).destroy({success:function(){e.history.navigate("mail/index/mailbox/"+a),i.trigger("maillist:load",a)},error:function(e,t){},complete:function(){}}):i.trigger("maillist:trashitem")},render:function(){return t.createElement("div",null,this.props.mail_id>0?t.createElement("div",{className:"ui buttons small",style:{marginRight:"5px"}},t.createElement("a",{href:"#",onClick:this.goBack,className:"ui icon button",title:o.t("back")},o.t("back"))):"",t.createElement("div",{ref:"mailtoolbar",className:"ui buttons small"},t.createElement("a",{href:"#",onClick:this.deleteSelectedMail,style:{fontSize:"0.930571rem"},className:"ui icon button",title:o.t("delete")},"intrash"==this.state.mailbox?o.t("delete_permanent"):o.t("delete"))))}});return l}),define("components/email/mobile/pagination",["react","eventbus","language/default"],function(e,t,n){var a=e.createClass({displayName:"Pagination",getInitialState:function(){return{totalPage:1,currentPage:1,total:50,startRecord:1,endRecord:50}},componentDidMount:function(){var e=this;t.on("mailpagination:change",e._onChange)},componentWillUnmount:function(){t.off("mailpagination:change",this._onChange)},_onChange:function(e){var t=this,n=Math.ceil(e.total/e.limit),a=(e.currentpage-1)*e.limit,i=a+e.limit;i>e.total&&(i=e.total);var r={totalPage:n,currentPage:e.currentpage,total:e.total,startRecord:a+1,endRecord:i};t.setState(r)},_handleClick:function(e){if(e.preventDefault(),$(e.target).hasClass("item")?ele=$(e.target):ele=$(e.target).parents(".item").eq(0),!ele.hasClass("active")&&!ele.hasClass("disabled")){var n=ele.attr("href").replace("#","");t.trigger("maillist:setpage",n)}},render:function(){var t=(this.state.currentPage-2,this.state.currentPage+2,this.state.startRecord),a=this.state.endRecord,i=this.state.total,r=parseInt(this.state.currentPage),o=parseInt(this.state.totalPage);return e.createElement("div",{id:"mail-pagination"},e.createElement("span",{className:"item pagination-info"},e.createElement("strong",null,t," - ",a)," ",n.t("in_total").toLowerCase()," ",e.createElement("strong",null,i)),e.createElement("div",{onClick:this._handleClick,className:"ui pagination menu small"},e.createElement("a",{href:"#"+(r-1),title:n.t("newer"),className:"icon item "+(1==r?"disabled":"")},e.createElement("i",{className:"tc-left icon"})),e.createElement("a",{href:"#"+(r+1),title:n.t("older"),className:"icon item "+(r==o?"disabled":"")},e.createElement("i",{className:"tc-right icon"}))))}});return a}),define("components/email/mobile/replychoice",["react","helper","eventbus","pref","language/mail"],function(e,t,n,a,i){var r=e.createClass({displayName:"MailComposeComponent",getDefaultProps:function(){return{replyall:!1}},hidePopup:function(){$(e.findDOMNode(this.refs.replychoice)).modal("hide"),n.trigger("replychoice:unmount")},showPopup:function(){var t=this;$(e.findDOMNode(this.refs.replychoice)).modal({context:this.getDOMNode(),closable:!1,onHidden:function(){t.hidePopup()},onVisible:function(){setTimeout(function(){$(e.findDOMNode(t.refs.subject)).focus()},200)}}).modal("show")},triggerReply:function(t,a){a.preventDefault(),n.trigger("maildetail:reply",t),$(e.findDOMNode(this.refs.replychoice)).modal("hide")},componentWillUnmount:function(){},componentWillUpdate:function(){},componentDidMount:function(){this.showPopup()},render:function(){return e.createElement("div",{id:"replychoice-inner"},e.createElement("div",{className:"ui small modal",ref:"replychoice",style:{padding:5}},e.createElement("button",{className:"ui fluid teal button",onClick:this.triggerReply.bind(this,"reply")},i.t("reply")),this.props.replyall?e.createElement("button",{className:"ui fluid teal button",onClick:this.triggerReply.bind(this,"reply_all")},i.t("reply_all")):"",e.createElement("button",{className:"ui fluid teal button",onClick:this.triggerReply.bind(this,"forward")},i.t("forward")),e.createElement("div",{className:"actions"},e.createElement("button",{className:"ui close cancel fluid button"},i.t("cancel")))))}});return r}),define("components/email/mobile/replyform",["react","helper","eventbus","pref","language/mail","components/employeepicker","components/tinymce","models/file","models/mail"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"MailReplyComponent",alreadyInitFileUpload:!1,formError:{subject:["error_subject_required"],message:["error_message_required","error_message_too_short","error_message_too_long"],employee:["error_empty_to"]},getDefaultProps:function(){return{data:null,type:"reply"}},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.employees)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},handleKeyup:function(e,t){e.preventDefault(),e.keyCode?e.keyCode:e.which},handleEditorFocus:function(t,n){$(e.findDOMNode(this)).find(".full_input").show(),this.initForm(),this.alreadyInitFileUpload?this.alreadyInitFileUpload&&$(e.findDOMNode(this)).find(".uploadifive-button").show():((new s).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new s).OBJECTTYPE_MESSAGE,this.props.data.id,(new s).STATUS_ENABLE),this.alreadyInitFileUpload=!0)},handleEditorBlur:function(e,t){},createMailHandle:function(n){var r=this,o=$(e.findDOMNode(this.refs.form));o.addClass("loading");var s=$(e.findDOMNode(this.refs.submit));s.addClass("loading");var c=[];$(e.findDOMNode(r)).find(".attachedfileid").each(function(e){c.push($(this).attr("data-id"))}),$(e.findDOMNode(r)).find(".uploadifive-queue-item").hide();var d=r.refs.editor.getEditor(),u="";null!=d&&(u=d.getContent(),u=t.trimEmptyParagraph(u)),(new l).save({company_id:a.get("cid"),creator_id:a.get("uid"),text_id:r.props.data.text_id,type:r.props.type,subject:$(e.findDOMNode(r.refs.subject)).val(),message:u,file_list:c,to:r.getSelectedUserIdList()},{success:function(e){t.showSuccess(i.t("success_add")),r.resetMessage()},error:function(e,n){t.notifyErrorAndForm(n,i,"error_add",o,r.formError)},complete:function(){o.removeClass("loading"),s.removeClass("loading")}})},formSubmit:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.form)).submit()},blur:function(t){t.preventDefault(),t.stopPropagation(),this.alreadyInitFileUpload&&$(e.findDOMNode(this)).find(".uploadifive-button").hide(),$(e.findDOMNode(this.refs.avatar)).show(),$(e.findDOMNode(this.refs.editorwrapper)).css({marginLeft:40}),this.resetMessage()},initForm:function(){var t=new l,n="",a=this.refs.editor.getEditor();n="reply"==this.props.type||"reply_all"==this.props.type?t.getQuotedText(this.props.data,this.props.sender):t.getForwardedText(this.props.data,this.props.sender,this.props.recipients),null!=a&&a.setContent(n),$(e.findDOMNode(this.refs.avatar)).hide(),$(e.findDOMNode(this.refs.editorwrapper)).css({marginLeft:0})},focusMessage:function(){this.refs.editor.focusToInit(),t.scrollTo($(e.findDOMNode(this.refs.mailreply)))},resetMessage:function(){var t=this.refs.editor.getEditor();null!=t&&(t.setContent(""),this.refs.editor._remove()),$(e.findDOMNode(this)).find(".full_input").hide()},componentWillUpdate:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.form)).form({fields:{subject:{identifier:"subject",rules:[{type:"empty",prompt:i.t("error_subject_required")}]},message:{identifier:"message",rules:[{type:"empty",prompt:i.t("error_message_required")},{type:"minLength[5]",prompt:i.t("error_message_too_short")},{type:"maxLength[4000]",prompt:i.t("error_message_too_long")}]},employee:{identifier:"employee",rules:[{type:"empty",prompt:i.t("error_empty_to")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.createMailHandle()}})},render:function(){var n=this,s=[],l="";if(null!=n.props.data&&"undefined"!=typeof n.props.data.id)if(l="forward"==n.props.type?"Fw: ":"Re: ",l+=n.props.data.subject,"reply_all"==n.props.type&&1==n.props.data.is_multi_recipient){var c=n.props.data.recipients.user_ids;s.push(n.props.data.creator_id.toString());for(var d=0;d<c.length;d++)s.push(c[d].toString())}else"reply"==n.props.type&&s.push(n.props.data.creator_id.toString());var u={autoresize_min_height:150,toolbar:"bold italic underline | link unlink"};return e.createElement("div",{ref:"mailreply"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"fields full_input",style:{display:"none"}},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("to")),e.createElement(r,{defaultvalue:s,ref:"employees",inputname:"employee"}))),e.createElement("div",{className:"fields full_input",style:{display:"none"}},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("subject")),e.createElement("input",{ref:"subject",name:"subject",defaultValue:l}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("a",{className:"avatar",ref:"avatar",style:{float:"left"}},e.createElement("img",{className:"ui avatar image",src:t.getAvatarPath(a.get("avatar"))})),e.createElement("div",{className:"content",ref:"editorwrapper",style:{marginLeft:40,marginBottom:20}},e.createElement(o,{ref:"editor",id:this.props.type+"-"+this.props.data.id,content:"",autofocus:!0,config:u,focusToInitHandle:this.editorInitHandle,onKeyup:this.handleKeyup,onFocus:this.handleEditorFocus,onBlur:this.handleEditorBlur}),e.createElement("div",{className:"ui right floated buttons full_input",style:{display:"none",marginTop:5}},e.createElement("button",{className:"ui button icon",onClick:n.blur,style:{marginRight:5}},e.createElement("i",{className:"icon tc-trash"})),e.createElement("button",{className:"ui green button",onClick:n.formSubmit},i.t("send"))),e.createElement("div",{style:{marginRight:120}},e.createElement("input",{type:"file",ref:"fileinput",id:"ffile-"+this.props.data.id,name:"ffile",multiple:"multiple",className:"hide"})),e.createElement("div",{className:"clear"}))))))}});return c}),define("components/select-department",["react","pref","language/default","querystring","collections/department","components/department/select-parent","models/department"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"SelectDepartmentComponent",getDefaultProps:function(){return{name:"department_id",value:0,placeholder:"-----"}},getInitialState:function(){return{models:[],parentlist:[]}},componentDidUpdate:function(){$(this.getDOMNode()).dropdown("refresh").dropdown("set selected",this.props.value)},_loadData:function(){$(".ui.modal").modal();var e=this;$("#body-loader").addClass("active");var n={company_id:t.get("cid"),limit:50,page:a.get("page")||1,is_not_deleted:1,sort_by:a.get("sort_by")||"display_order",sort_type:a.get("sort_type")||"ASC"};(new i).fetch({data:n,success:function(t,n){var a=[];$.each(n.items,function(t,i){if(0==i.parent_id){i.childlist=e.formatData(n,i.id);var r=i;a.push(r)}});var i=0;a.map(function(e){i+=e.childlist.length+1}),e.setState(t),e.getData()},complete:function(){$("#body-loader").removeClass("active")}})},formatData:function(e,t){var n=[],a=this;return $.each(e.items,function(i,r){if(r.parent_id==t){var o=a.formatData(e,r.id);jQuery.isEmptyObject(o)||(r.childlist={},r.childlist=o),n.push(r)}}),n},getData:function(){var e=this.formatDataParent(0,"» ",""),t=[];$.each(e,function(e,n){t.push({key:e,name:n})}),this.setState({parentlist:t})},formatDataParent:function(e,t,n){var a={},i=this;return this.state.models.map(function(r){if(r=r.toJSON(),r.parent_id==e){n=0==r.parent_id?r.name:n+"_"+r.name;var o=t+r.name;a[n+"#"+r.id]=o;var s=i.formatDataParent(r.id,o+" » ",n);jQuery.extend(a,s)}}),a},componentWillMount:function(){this._loadData()},componentDidMount:function(){var e=this;$(this.getDOMNode()).dropdown({fullTextSearch:!0,message:{noResults:n.t("search_no_result")},onShow:e.props.onShow,onHide:e.props.onHide,onChange:e.props.onChange})},render:function(){var t=this,n=this.props.placeholder;return e.createElement("div",{ref:"dropdown",className:"ui "+this.props.className+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},n),e.createElement("div",{className:"menu",ref:"parentlist"},t.state.parentlist.map(function(t){var n=t.key.split("#"),a=n[n.length-1];return e.createElement("div",{className:"item",key:t.key,"data-value":a},t.name)})))}});return s}),define("components/employee/add",["react","backbone","helper","pref","cacheddata","language/employee","language/default","models/employee","models/user","components/select-status","components/select-office","components/select-department","components/heading","components/tinymce","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"EmployeeAddComponent",getInitialState:function(){return{modelitems:[],allowPassword:!1,password:"1234567"}},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.ignore)).checkbox(),$(e.findDOMNode(t.refs.gender)).dropdown()},createEmployee:function(i){var o=$(".ui.form",this.getDOMNode());o.addClass("loading");var l=$.trim($('[name="email"]',o).val()),c={company_id:a.get("cid"),creator_id:a.get("uid"),full_name:$('[name="fullname"]',o).val(),office_id:$(e.findDOMNode(this.refs.office)).dropdown("get value"),department_id:$(e.findDOMNode(this.refs.department)).dropdown("get value"),position_id:$(e.findDOMNode(this.refs.positionid)).dropdown("get value"),gender:$(e.findDOMNode(this.refs.gender)).dropdown("get value"),type:$(e.findDOMNode(this.refs.type)).dropdown("get value"),email:l,is_external_partner:0,job_title:$('[name="jobtitle"]',o).val(),internal_id:$('[name="internalid"]',o).val(),phone:$('[name="phone"]',o).val(),ignore_ip_checkin:$(e.findDOMNode(this.refs.ignore)).checkbox("is checked")?1:0,status:(new s).STATUS_ENABLED,password:""};e.findDOMNode(this.refs.password)&&(c.password=$.trim(e.findDOMNode(this.refs.password).value)),$(".prompt").remove(),$(".error").removeClass("error"),(new s).save(c,{success:function(e,n){alert(r.t("success_add")),t.history.navigate("employee/detail/"+n.id,{trigger:!0})},error:function(e,t){n.notifyErrorAndForm(t,r,"error_add",o,{department:["error_department_id_notfound","error_company_id_invalid"],email:["error_email_invalid","error_email_required","error_email_existed"],phone:["error_phone_required"],fullname:["error_fullname_required"],mypass:["error_password_too_short"]})},complete:function(){o.removeClass("loading")}})},emailChange:function(e){var t=e.currentTarget.value,n=a.get("domain"),i=!1,r=$.trim(t),o=r.indexOf("@"+n);n&&o>=0&&r.substring(o)=="@"+n&&(i=!0),this.setState({allowPassword:i})},passwordChange:function(e){var t=e.currentTarget.value;this.setState({password:t})},_save:function(e){e.preventDefault();var t=!1;this.state.haveUserID||(t=!0),this.createEmployee(t)},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},render:function(){var t=this,n=(new s).getStatusList();n.map(function(e,t){e.text=r.t("STATUS_"+e.text)});var i=(new s).getPositionList();$.each(i,function(e,t){t.text=r.t(t.text)});var p=(new s).getTypeList();return $.each(p,function(e,t){t.text=r.t("TYPE_"+t.text)}),e.createElement("div",{className:"ui segments"},e.createElement(m,{link:"#employee",text:r.t("employee"),subtext:o.t("insert")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("input",{type:"hidden",value:"",ref:"itemselect"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,r.t("profile_title"))),e.createElement("p",null)),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide required four"},e.createElement("label",null,r.t("fullname")),e.createElement("input",{name:"fullname"})),e.createElement("div",{className:"field four wide"},e.createElement("label",null,r.t("gender")),e.createElement("div",{ref:"gender",className:"ui fluid search selection dropdown"},e.createElement("input",{type:"hidden",name:"gender"}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"}),e.createElement("div",{className:"menu"},(new l).getGenderList().map(function(t,n){return e.createElement("div",{className:"item",key:t.code,"data-value":t.code},t.text)}))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,r.t("email")),e.createElement("input",{name:"email",type:"text",className:"red",onChange:this.emailChange}),this.state.allowPassword?null:e.createElement("div",{style:{lineHeight:1.2,marginTop:5,color:"red",fontSize:11}},r.t("email_help"))),e.createElement("div",{className:" four  wide field"},e.createElement("label",null,r.t("phone")),e.createElement("input",{name:"phone",type:"text"}))),this.state.allowPassword?e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field required"},e.createElement("label",null,r.t("password")),e.createElement("input",{ref:"password",name:"password",defaultValue:this.state.password,onChange:this.passwordChange}))):null)),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,r.t("employee_info_title"))),e.createElement("p",null,r.t("employee_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:" four  wide field"},e.createElement("label",null,r.t("office")),e.createElement(d,{ref:"office",placeholder:"-----"})),e.createElement("div",{className:" four wide field"},e.createElement("label",null,r.t("type")),e.createElement(c,{ref:"type",placeholder:"-----",data:p}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,r.t("department")),e.createElement(u,{name:"department",ref:"department",placeholder:"-----",onChange:t.selectDepartment})),e.createElement("div",{className:"four wide field"},e.createElement("label",null,r.t("position")),e.createElement(c,{ref:"positionid",placeholder:"-----",data:i}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,r.t("internal_id"),e.createElement("a",{className:"icon tc-info",title:r.t("discription2")})),e.createElement("div",{className:"ui right labeled input"},e.createElement("input",{name:"internalid",type:"text"}),e.createElement("div",{className:"ui grey label"},"@"+a.get("screenname")))),e.createElement("div",{className:"required four  wide field"},e.createElement("label",null,r.t("jobtitle")),e.createElement("input",{defaultValue:"",name:"jobtitle",type:"text"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:" three   field"},e.createElement("label",null,r.t("ignore_ip_checkin")),e.createElement("div",{className:"ui toggle checkbox",ref:"ignore"},e.createElement("input",{type:"checkbox",name:"public",defaultChecked:"checked"}),e.createElement("label",null," ")))))),e.createElement(h,{required:!0},e.createElement("button",{className:"ui teal button",type:"submit",onClick:this._save},o.t("add"))))))}});return f}),define("language/profile",["baselanguage"],function(e){var t={vn:{heading_notify:"Cấu hình nhận thông báo",update_profile:"Cập nhật",email:"Email đăng nhập",old_password:"Mật khẩu cũ",new_password:"Mật khẩu mới",confirm_new_password:"Xác nhận mật khẩu mới",notify_channel:"Kênh",notify_channel_des:"Cấu hình nhận thông báo web, email & push notification",notify_email:"Thông báo qua email",notify_web:"Thông báo trên web",notify_pushnotification:"Push notification cho ứng dụng",notify_type:"Loại",notify_type_des:"Cấu hình nhận thông báo cho dự án, công việc, vấn đề...",notify_projectadd:"Tạo dự án",notify_projectassign:"Gán vào dự án",notify_projecttaskadd:"Tạo công việc",notify_projecttaskassign:"Gán vào công việc",notify_projecttaskupdatestatus:"Cập nhật trạng thái công việc",notify_projecttaskcommentadd:"Bình luận công việc",notify_projectissueadd:"Tạo vấn đế",notify_projectissueassign:"Gán vào vấn đế",notify_projectissueupdatestatus:"Cập nhật trạng thái vấn đề",notify_projectissuecommentadd:"Bình luận vấn đế",notify_mailadd:"Thư nội bộ",notify_employeeprofile:"Cập nhật thông tin nhân viên",notify_employeecontractadd:"Tạo hợp đồng cho nhân viên",notify_employeecontractedit:"Cập nhật thông tin hợp đồng",notify_employeeprogressadd:"Thêm thông tin quá trình làm việc",notify_employeeprogressedit:"Cập nhật thông tin quá trình làm việc",notify_worktimeedit:"Cập nhật thông tin chấm công",notify_worktimereview:"Xác nhận giờ công",notify_worktimereviewcancel:"Hủy bỏ xác nhận giờ công",notify_salaryadd:"Tạo thông tin tiền lương",notify_salaryedit:"Cập nhật thông tin tiền lương",notify_employeepointadd:"Chấm điểm nhân viên",notify_leaveneedreview:"Chờ duyệt nghỉ phép",notify_leaveacceptpartial:"Đã duyệt và chờ duyệt vòng tiếp theo",notify_leaveaccept:"Đơn xin nghỉ phép đã được duyệt",notify_leavereject:"Đơn xin nghỉ phép đã bị từ chối",notify_orderadd:"Tạo đơn hàng",notify_orderedit:"Cập nhật thông tin đơn hàng",notify_orderstatuschange:"Đổi trạng thái đơn hàng",notify_orderproductadd:"Thêm sản phẩm vào đơn hàng",notify_orderproductedit:"Cập nhật sản phẩm trong đơn hàng",notify_orderproductdelete:"Xóa sản phẩm trong đơn hàng",notify_shippingadd:"Tạo vận đơn",notify_shippingstatuschange:"Cập nhật trạng thái giao hàng",notify_shippingdelete:"Xóa vận đơn",notify_productreceiptadd:"Tạo phiếu nhập/xuất",notify_productreceiptstatuschange:"Thay đổi trạng thái của phiếu nhập/xuất",notify_productreceiptproductchange:"Thay đổi sản phẩm của phiếu nhập/xuất",notify_cashflowadd:"Tạo phiếu thu/chi",notify_cashflowedit:"Cập nhật thông tin phiếu thu/chi",notify_cashflowstatuschange:"Thay đổi trạng thái của phiếu thu/chi",notify_customeradd:"Thêm khách hàng",notify_customeredit:"Tạo công việc với khách hàng",notify_customerassign:"Gán theo dõi khách hàng",notify_customernoteadd:"Tạo ghi chú cho khách hàng",notify_customertaskadd:"Tạo công việc với khách hàng",notify_customereventadd:"Tạo sự kiện với khách hàng",notify_customersmsadd:"SMS cho khách hàng",notify_customeremailadd:"Email cho khách hàng",notify_poadd:"Tạo PO",notify_poedit:"Cập nhật thông tin PO",notify_postatuschange:"Thay đổi trạng thái của PO",notify_poproductadd:"Thêm sản phẩm vào PO",notify_poproductedit:"Thay đổi sản phẩm của PO",notify_poproductdelete:"Xóa sản phẩm của PO",toggle_notification_success_on:"Đã bật thông báo ",toggle_notification_success_off:"Đã tắt thông báo ",remove_avatar:"Xóa ảnh",change_password:"Đổi mật khẩu",profile:"Thông tin cá nhân",password_info_title:"Thông tin",password_info_content:"Thông tin của bạn & Mật khẩu mới để thay đổi mật khẩu",success_update:"Cập nhật thành công!",success_change_password:"Cập nhật mật khẩu thành công!",error_change_password:"Cập nhật mật khẩu thất bại. Vui lòng thử lại sau!",error_fullname_required:"Bạn chưa nhập họ và tên",error_user_edit:"Cập nhật thất bại. Vui lòng thử lại sau!",error_old_password_required:"Bạn chưa nhập mật khẩu cũ!",error_old_password_invalid:"Mật khẩu cũ không hợp lệ!",error_new_password_required:"Bạn chưa nhập mật khẩu mới!",error_new_password_must_different:"Mật khẩu mới không được giống mật khẩu cũ!",error_confirm_new_password_required:"Bạn chưa xác nhận mật khẩu mới!",error_confirm_password:"Xác nhận mật khẩu không khớp!",error_password_too_short:"Mật khẩu quá ngắn! (Ít nhất 6 ký tự)",leave_company_text:"Không tham gia vào công ty hiện tại"},en:{heading_notify:"Cấu hình nhận thông báo",update_profile:"Cập nhật",email:"Email đăng nhập",old_password:"Mật khẩu cũ",new_password:"Mật khẩu mới",confirm_new_password:"Xác nhận mật khẩu mới",notify_channel:"Kênh",notify_channel_des:"Cấu hình nhận thông báo web, email & push notification",notify_email:"Thông báo qua email",notify_web:"Thông báo trên web",notify_pushnotification:"Push notification cho ứng dụng",notify_type:"Loại",notify_type_des:"Cấu hình nhận thông báo cho dự án, công việc, vấn đề...",notify_projectadd:"Tạo dự án",notify_projectassign:"Gán vào dự án",notify_projecttaskadd:"Tạo công việc",notify_projecttaskassign:"Gán vào công việc",notify_projecttaskupdatestatus:"Cập nhật trạng thái công việc",notify_projecttaskcommentadd:"Bình luận công việc",notify_projectissueadd:"Tạo vấn đế",notify_projectissueassign:"Gán vào vấn đế",notify_projectissueupdatestatus:"Cập nhật trạng thái vấn đề",notify_projectissuecommentadd:"Bình luận vấn đế",notify_mailadd:"Thư nội bộ",notify_employeeprofile:"Cập nhật thông tin nhân viên",notify_employeecontractadd:"Tạo hợp đồng cho nhân viên",notify_employeecontractedit:"Cập nhật thông tin hợp đồng",notify_employeeprogressadd:"Thêm thông tin quá trình làm việc",notify_employeeprogressedit:"Cập nhật thông tin quá trình làm việc",notify_worktimeedit:"Cập nhật thông tin chấm công",notify_worktimereview:"Xác nhận giờ công",notify_worktimereviewcancel:"Hủy bỏ xác nhận giờ công",notify_salaryadd:"Tạo thông tin tiền lương",notify_salaryedit:"Cập nhật thông tin tiền lương",notify_employeepointadd:"Chấm điểm nhân viên",notify_leaveneedreview:"Chờ duyệt nghỉ phép",notify_leaveacceptpartial:"Đã duyệt và chờ duyệt vòng tiếp theo",notify_leaveaccept:"Đơn xin nghỉ phép đã được duyệt",notify_leavereject:"Đơn xin nghỉ phép đã bị từ chối",notify_orderadd:"Tạo đơn hàng",notify_orderedit:"Cập nhật thông tin đơn hàng",notify_orderstatuschange:"Đổi trạng thái đơn hàng",notify_orderproductadd:"Thêm sản phẩm vào đơn hàng",notify_orderproductedit:"Cập nhật sản phẩm trong đơn hàng",notify_orderproductdelete:"Xóa sản phẩm trong đơn hàng",notify_shippingadd:"Tạo vận đơn",notify_shippingstatuschange:"Cập nhật trạng thái giao hàng",notify_shippingdelete:"Xóa vận đơn",notify_productreceiptadd:"Tạo phiếu nhập/xuất",notify_productreceiptstatuschange:"Thay đổi trạng thái của phiếu nhập/xuất",notify_productreceiptproductchange:"Thay đổi sản phẩm của phiếu nhập/xuất",notify_cashflowadd:"Tạo phiếu thu/chi",notify_cashflowedit:"Cập nhật thông tin phiếu thu/chi",notify_cashflowstatuschange:"Thay đổi trạng thái của phiếu thu/chi",notify_customeradd:"Thêm khách hàng",notify_customeredit:"Tạo công việc với khách hàng",notify_customerassign:"Gán theo dõi khách hàng",notify_customernoteadd:"Tạo ghi chú cho khách hàng",notify_customertaskadd:"Tạo công việc với khách hàng",notify_customereventadd:"Tạo sự kiện với khách hàng",notify_customersmsadd:"SMS cho khách hàng",notify_customeremailadd:"Email cho khách hàng",notify_poadd:"Tạo PO",notify_poedit:"Cập nhật thông tin PO",notify_postatuschange:"Thay đổi trạng thái của PO",notify_poproductadd:"Thêm sản phẩm vào PO",notify_poproductedit:"Thay đổi sản phẩm của PO",notify_poproductdelete:"Xóa sản phẩm của PO",toggle_notification_success_on:"Đã bật thông báo ",toggle_notification_success_off:"Đã tắt thông báo ",remove_avatar:"Xóa ảnh",change_password:"Đổi mật khẩu",profile:"Thông tin cá nhân",password_info_title:"Thông tin",password_info_content:"Thông tin của bạn & Mật khẩu mới để thay đổi mật khẩu",success_update:"Cập nhật thành công!",success_change_password:"Cập nhật mật khẩu thành công!",
error_change_password:"Cập nhật mật khẩu thất bại. Vui lòng thử lại sau!",error_fullname_required:"Bạn chưa nhập họ và tên",error_user_edit:"Cập nhật thất bại. Vui lòng thử lại sau!",error_old_password_required:"Bạn chưa nhập mật khẩu cũ!",error_old_password_invalid:"Mật khẩu cũ không hợp lệ!",error_new_password_required:"Bạn chưa nhập mật khẩu mới!",error_new_password_must_different:"Mật khẩu mới không được giống mật khẩu cũ!",error_confirm_new_password_required:"Bạn chưa xác nhận mật khẩu mới!",error_confirm_password:"Xác nhận mật khẩu không khớp!",error_password_too_short:"Mật khẩu quá ngắn! (Ít nhất 6 ký tự)",leave_company_text:"Không tham gia vào công ty hiện tại"}};return new e({lang:t})}),define("components/employee/changepassword",["react","helper","pref","language/employee","language/default","language/profile","models/employee"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"EmployeeChangePasswordComponent",save:function(){var r=this;if(!$(e.findDOMNode(this.refs.button_save)).hasClass("loading")){this.abortXhr();var s={company_id:n.get("cid"),creator_id:n.get("uid"),newpass:e.findDOMNode(this.refs.new_password).value},l=$(e.findDOMNode(this.refs.form));$(e.findDOMNode(this.refs.button_save)).addClass("loading"),this.xhr=(new o).createRequest({action:"setpass/"+this.props.data.id,type:"put",contentType:"application/json",data:JSON.stringify(s),success:function(n,a){$(e.findDOMNode(r.refs.button_save)).removeClass("loading"),t.showSuccess(i.t("update_success")),$(e.findDOMNode(r.refs.modal)).modal("hide")},error:function(n,i){var o={};$(e.findDOMNode(r.refs.button_save)).removeClass("loading"),t.notifyErrorAndForm(i,a,"error",l,o)}})}},abortXhr:function(){this.xhr&&this.xhr.abort()},componentDidMount:function(){var n=this;$(e.findDOMNode(this.refs.form)).form({fields:{new_password:{identifier:"new_password",rules:[{type:"empty",prompt:r.t("error_new_password_required")},{type:"minLength[6]",prompt:r.t("error_password_too_short")}]},confirm_password:{identifier:"confirm_new_password",rules:[{type:"empty",prompt:r.t("error_confirm_new_password_required")},{type:"minLength[6]",prompt:r.t("error_password_too_short")},{type:"match[new_password]",prompt:r.t("error_confirm_password")}]}},inline:!0,onFailure:function(){return t.showError(i.t("error")),!1},onSuccess:function(e){e.preventDefault(),n.save()}}),$(e.findDOMNode(this.refs.modal)).modal({context:e.findDOMNode(this),closable:!1,onShow:function(){$("body").addClass("has-modal")},onHide:function(){$("body").removeClass("has-modal")},onDeny:function(){n.abortXhr()},onApprove:function(){return $(e.findDOMNode(n.refs.form)).form("submit"),!1}}).modal("show")},render:function(){return e.createElement("div",null,e.createElement("div",{ref:"modal",className:"ui small modal",style:{maxWidth:500}},e.createElement("i",{className:"close icon tc-cross"}),e.createElement("div",{className:"header"},a.t("set_password")),e.createElement("div",{className:"content"},e.createElement("form",{ref:"form",className:"ui small form"},e.createElement("div",{className:"field required"},e.createElement("label",null,r.t("new_password")),e.createElement("input",{name:"new_password",type:"password",ref:"new_password"})),e.createElement("div",{className:"field required"},e.createElement("label",null,r.t("confirm_new_password")),e.createElement("input",{name:"confirm_new_password",type:"password"})))),e.createElement("div",{className:"actions"},e.createElement("a",{ref:"button_save",className:"ui tiny green button approve"},i.t("save")))))}});return s}),define("components/employee/confirm",["react","language/default"],function(e,t){var n=e.createClass({displayName:"ConfirmComponent",getDefaultProps:function(){return{message:t.t("confirm_msg_default"),confirmText:t.t("confirm_text_default"),cancelText:t.t("confirm_cancel_default"),confirmClass:"red confirm",cancelClass:"cancel",onConfirm:function(e){e.preventDefault(),console.log("Confirmed!")},onCancel:function(e){e.preventDefault(),console.log("Cancelled!")}}},render:function(){return e.createElement("div",{className:"ui flowing popup top left transition hidden"},e.createElement("h4",{ref:"message"},this.props.message),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:this.props.onConfirm,className:"ui mini button "+this.props.confirmClass,href:"javascript:void(0)"},this.props.confirmText),e.createElement("a",{onClick:this.props.onCancel,className:"ui mini button "+this.props.cancelClass,href:"javascript:void(0)"},this.props.cancelText)))}});return n}),define("components/employeepoint/employee-detail-point-item",["react","helper","pref","role","models/employeepoint","models/employeepointtopic","models/office","models/user","language/employeepoint","language/default","components/datetime"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"EmployeePointComponent",_filterStatus:function(t){t.preventDefault();var n=$(e.findDOMNode(this.refs.status)).attr("href").replace("#","");this.props.filterStatus(n)},getInitialState:function(){return{topictype:0,topicname:""}},_getTopic:function(){var e=this;new r({id:this.props.data.topic_id}).fetch({success:function(t,n){e.setState({topictype:n.type}),e.setState({topicname:n.name})}})},_getOffice:function(){var t=this;new o({id:this.props.data.office_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.officename)).text(a.name)}})},_getUser:function(t,n){var a=this;t>0&&new s({id:t}).fetch({success:function(t,i){e.render(e.createElement("span",null,i.fullname),a.refs[n].getDOMNode())}})},showEditActionSheet:function(e){e.preventDefault();var n={buttons:[{text:c.t("update"),href:"#employeepoint/edit/"+this.props.data.id}]};t.showActionSheet(n)},componentDidUpdate:function(t,n){a.hasById(264)||$(e.findDOMNode(this.refs.btnedit)).html("")},componentDidMount:function(){this._getTopic(),this._getOffice(),this._getUser(this.props.data.employee_id,"employeename"),this._getUser(this.props.data.creator_id,"creatorname"),a.hasById(264)||$(e.findDOMNode(this.refs.btnedit)).html("")},renderMobile:function(){var t=(new i).getStatus(this.props.data.status),n=(new r).getType(this.state.topictype),a=this;return e.createElement("tr",null,e.createElement("td",null,e.createElement("div",{className:"mitemdotleft"},e.createElement("span",{className:"mitemdot mitemdot"+t.color})),e.createElement("div",{className:"mitemdotright"},e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading"},e.createElement("a",{className:"nocolor",ref:"employeename",href:"#employeepoint/detail/"+this.props.data.employee_id}),e.createElement("span",{className:"ui mini pull-right basic label "+n.color},a.props.data.point),e.createElement("span",{className:"ui mini pull-right basic label",ref:"officename"})),e.createElement("div",{className:"mitemmeta clear"},a.state.topicname," · ",e.createElement("br",null),e.createElement(d,{ts:this.props.data.date_created})," ",e.createElement("em",null,c.t("by"))," ",e.createElement("span",{ref:"creatorname"})))))},renderDesktop:function(){var t=(new i).getStatus(this.props.data.status),n=(new r).getType(this.state.topictype),a=this;return e.createElement("tr",null,e.createElement("td",null,e.createElement("span",{ref:"employeename"})),e.createElement("td",{ref:"officename"}),e.createElement("td",{ref:"topicname"},e.createElement("span",{ref:"type",className:"ui basic label noborder "+n.color},a.state.topicname)),e.createElement("td",null,a.props.data.point),e.createElement("td",{ref:"creatorname"}),e.createElement("td",null,e.createElement("span",{className:"ui small simple label "+t.color},t.text)),e.createElement("td",null,moment.unix(a.props.data.date_created).format("HH:mm, DD/MM/YYYY")))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return u}),define("components/employeepoint/employee-detail-point",["react","eventbus","basecontroller","pref","helper","role","setting","language/default","language/employeepoint","querystring","collections/employeepoint","collections/employeepointtopic","models/user","models/employeepoint","models/employeepointtopic","components/employeepoint/employee-detail-point-item","components/filter-employee","components/semantic-datepicker","components/mixin/listsearch","components/headingfull","components/search-keyword"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E){var b=e.createClass({displayName:"DetailPointComponent",getInitialState:function(){return{hmac:"",topic:[],models:[],length:0,total:0,roleid:264,currentpage:c.get("page")}},_loadData:function(){$(".ui.modal").modal();var e=this;$("#body-loader").addClass("active");var t={company_id:a.get("cid"),limit:10,type:(new p).TYPE_OFFICE,employee_id:e.props.data.user_id||null,sort_by:c.get("sort_by")||"id",sort_type:c.get("sort_type")||"DESC"};(new d).fetch({data:t,success:function(t){e.setState(t)},complete:function(){$("#body-loader").removeClass("active")}})},_getTopic:function(){$(".ui.modal").modal();var e=this;$("#body-loader").addClass("active");var t={company_id:a.get("cid"),limit:20,page:c.get("page")||1,status:(new h).STATUS_ENABLE,is_not_deleted:1,sort_by:c.get("sort_by")||"id",sort_type:c.get("sort_type")||"DESC"};(new u).fetch({data:t,success:function(t){var n=[];t.models.map(function(e,t){e=e.attributes,n.push({id:e.id,name:e.name})}),e.setState({topic:n})},complete:function(){$("#body-loader").removeClass("active")}})},componentDidUpdate:function(e,t){},componentWillMount:function(){c.initFilter(this.filters)},componentDidMount:function(){this._loadData(),this._getTopic(),(new n).setTcScrollMinHeight()},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,l.t("employee")),e.createElement("th",null,l.t("office")),e.createElement("th",null,l.t("topic")),e.createElement("th",null,l.t("point")),e.createElement("th",null,l.t("creator")),e.createElement("th",null,l.t("status")),e.createElement("th",null,l.t("datecreated")))},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement("div",{style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{className:i.tableclass(),ref:"employeepointtable"},e.createElement("thead",null,this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){return n=n.toJSON(),e.createElement(f,{key:n.id,viewDetail:t._viewDetail,filterStatus:t._filterStatus,data:n})}))),e.createElement("a",{href:"#employeepoint/_s/employee_id/"+this.props.data.user_id,className:"ui mini basic blue button"},s.t("view_more"))))}});return b}),define("components/salary/employee-detail-salary-item",["react","helper","pref","role","models/salary","models/user","language/salary","language/default","components/datetime"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"SalaryComponent",formattime:function(){var t=this.props.data.time.split("-");MSalary=new i;var n="-",a=this.props.data.type;a==MSalary.TYPE_DAILY?n=t[2]+"/"+t[1]+"/"+t[0]:a==MSalary.TYPE_MONTHLY?n=t[1]+"/"+t[0]:a==MSalary.TYPE_YEARLY&&(n=t[0]),$(e.findDOMNode(this.refs.time)).text(n)},getUserName:function(t,n){var a=this;t>0&&new r({id:t}).fetch({success:function(t,i){$(e.findDOMNode(a.refs[n])).append(i.fullname)},complete:function(){$("#body-loader").removeClass("active")}})},checkPermisson:function(){var t=this,i=a.hasById(262),r=["btnedit"];r.length&&$.each(r,function(a,r){i?t.props.data.creator_id!=n.get("uid")&&$(e.findDOMNode(t.refs[r])).attr("href","#salary/detail/"+t.props.data.id).html('<i className="icon tc-info"></i> '+s.t("detail")):$(e.findDOMNode(t.refs[r])).attr("href","#salary/detail/"+t.props.data.id).html('<i className="icon tc-info"></i> '+s.t("detail"))})},showEditActionSheet:function(e){e.preventDefault();var n={buttons:[{text:s.t("update"),href:"#salary/edit/"+this.props.data.id}]};t.showActionSheet(n)},componentDidMount:function(){this.getUserName(this.props.data.user_id,"employee"),this.getUserName(this.props.data.creator_id,"creator"),this.formattime(),this.checkPermisson()},componentDidUpdate:function(e,t){this.checkPermisson()},renderMobile:function(){var n=(new i).getStatus(this.props.data.status),a=((new i).getSource(this.props.data.source).text,(new i).getType(this.props.data.type).text);return e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading"},this.props.data.title,e.createElement("span",{className:"ui mini basic label pull-right "+n.color},t.smartNumberFormat(this.props.data.total))),e.createElement("div",{className:"mitemmeta"},e.createElement("span",{ref:"employee"})," · ",o.t(a),e.createElement("br",null)," ",e.createElement(l,{ts:this.props.data.date_created}))))},renderDesktop:function(){var n=(new i).getStatus(this.props.data.status),a=(new i).getSource(this.props.data.source).text,r=(new i).getType(this.props.data.type).text;return e.createElement("tr",null,e.createElement("td",{ref:"employee"}),e.createElement("td",null,o.t(a)),e.createElement("td",null,this.props.data.title),e.createElement("td",{className:"right aligned"},t.smartNumberFormat(this.props.data.total)),e.createElement("td",null,o.t(r)),e.createElement("td",{ref:"time"},this.props.data.time),e.createElement("td",null,this.props.data.paid_index),e.createElement("td",null,e.createElement("span",{ref:"status",className:"ui small simple label "+n.color},n.text)),e.createElement("td",{ref:"creator"}),e.createElement("td",null,moment.unix(this.props.data.date_created).format("HH:mm, DD/MM/YYYY")),e.createElement("td",{style:{textAlign:"right"}},e.createElement("a",{href:"#salary/edit/"+this.props.data.id,className:"ui basic noborder button mini",ref:"btnedit"},o.t("update"))))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return c}),define("components/pagination",["react"],function(e){var t=e.createClass({displayName:"Pagination",_handleClick:function(e){e.preventDefault(),$(e.target).hasClass("item")?ele=$(e.target):ele=$(e.target).parents(".item").eq(0),ele.hasClass("active")||ele.hasClass("disabled")||this.props.onClick(ele.attr("href").replace("#",""))},render:function(){for(var t=[],n=this.props.currentPage-2,a=this.props.currentPage+2;1>=n;)n++;for(;a>=this.props.totalPage&&!(n>a);)a--;n>2&&t.push(e.createElement("span",{key:"1",className:"item disabled"},"..."));for(var i=n;a>=i;i++)t.push(e.createElement("a",{key:i,href:"#"+i,className:"item icon "+(this.props.currentPage==i?"active green":"")},i));return a<this.props.totalPage-1&&t.push(e.createElement("span",{key:this.props.totalPage,className:"item disabled"},"...")),e.createElement("div",{onClick:this._handleClick,className:"ui  pagination menu small"},e.createElement("a",{href:"#"+(this.props.currentPage-1),className:"icon item "+(1==this.props.currentPage?"disabled":"")},e.createElement("i",{className:"tc-left icon"})),e.createElement("a",{href:"#1",className:"icon item "+(1==this.props.currentPage?"active green":"")},"1"),t,e.createElement("a",{href:"#"+this.props.totalPage,className:"icon item "+(this.props.currentPage==this.props.totalPage?"active green":"")},this.props.totalPage),e.createElement("a",{href:"#"+(this.props.currentPage+1),className:"icon item "+(this.props.currentPage==this.props.totalPage?"disabled":"")},e.createElement("i",{className:"tc-right icon"})))}});return t}),define("components/salary/employee-detail-salary",["react","eventbus","basecontroller","pref","role","helper","setting","language/salary","language/default","querystring","collections/salary","models/salary","models/user","components/mixin/listsearch","components/headingfull","components/salary/employee-detail-salary-item","components/filter-employee","components/pagination","components/semantic-datepicker","components/mixin/listsearch","components/headingfull","components/search-keyword"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,p,h,y){var E=e.createClass({displayName:"DetailSalaryComponent",getInitialState:function(){return{hmac:"",models:[],length:0,total:0,currentpage:c.get("page")}},_loadData:function(){var e=this;$("#body-loader").addClass("active");var t={company_id:a.get("cid"),limit:10,creator_id:c.get("creator_id")||null,user_id:e.props.data.user_id,is_not_deleted:1,sort_by:c.get("sort_by")||"id",sort_type:c.get("sort_type")||"DESC"};(new d).fetch({data:t,success:function(t){e.setState(t)},complete:function(){$("#body-loader").removeClass("active")}})},componentWillMount:function(){c.initFilter(this.filters)},componentDidMount:function(){this._loadData(),$(e.findDOMNode(this.refs["setting-checkin"])).dropdown(),(new n).setTcScrollMinHeight()},componentDidUpdate:function(){r.isMobileScreen()||$(e.findDOMNode(this.refs.salarytable)).columntoggle({key:"salary",isSmallScreen:r.isSmallScreen()})},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,s.t("employee")),e.createElement("th",null,s.t("source")),e.createElement("th",null,s.t("title")),e.createElement("th",{className:"right aligned"},s.t("total")),e.createElement("th",null,s.t("type")),e.createElement("th",null,s.t("time")),e.createElement("th",null,s.t("paidindex")),e.createElement("th",null,s.t("status")),e.createElement("th",null,s.t("creator")),e.createElement("th",null,s.t("datecreated")),e.createElement("th",null))},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement("div",{style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{className:r.tableclass(),ref:"salarytable"},e.createElement("thead",null,this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){return n=n.toJSON(),e.createElement(f,{key:n.id,viewDetail:t._viewDetail,filterStatus:t._filterStatus,data:n})}))),e.createElement("a",{href:"#salary/_s/employee/"+this.props.data.user_id,className:"ui mini basic blue button"},l.t("view_more"))),e.createElement("span",{ref:"modal-wrapper",id:"loaddetail"}))}});return E}),define("components/hrmleave/popup-approve",["react","helper","language/hrmleave"],function(e,t,n){var a=e.createClass({displayName:"ApproveComponent",getDefaultProps:function(){return{note:"",confirmText:n.t("approve"),cancelText:n.t("reject"),confirmClass:"green confirm",cancelClass:"red cancel"}},render:function(){var a=t.isMobileScreen()?220:300;return e.createElement("div",null,e.createElement("div",null,e.createElement("p",null,e.createElement("strong",null,n.t("content"))),e.createElement("textarea",{ref:"note",defaultValue:this.props.note,className:"leave-approve-note",style:{width:a},rows:"3"})),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"two ui buttons"},e.createElement("a",{className:"ui mini button "+this.props.cancelClass,href:"javascript:void(0)"},this.props.cancelText),e.createElement("a",{className:"ui mini button "+this.props.confirmClass,href:"javascript:void(0)"},this.props.confirmText)))}});return a}),define("components/hrmleave/employee-detail-hrmleave-item",["react","pref","backbone","helper","querystring","eventbus","language/hrmleave","components/employee-avatar","components/confirm","components/datetime","components/hrmleave/popup-approve","models/hrmleave"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"HrmLeaveItemComponent",allowApprove:!0,getDefaultProps:function(){return{openPopupUpdateStatus:function(e){}}},getInitialState:function(){return{reload:0}},showEditActionSheet:function(e){e.preventDefault();var n=this,i=this.state.data,r=[];r.push({text:o.t("view_detail"),onClick:function(e){n.loadDetailHandler(e)}}),t.get("uid")==i.creator_id&&0==i.reviewer[0].id&&r.push({text:o.t("delete"),color:"#ff0000",onClick:function(e){n.removeItem()}});var s={buttons:r};a.showActionSheet(s)},componentDidUpdate:function(){},componentWillMount:function(){this.setState({data:this.props.data})},componentWillUnmount:function(){},componentDidMount:function(){},renderMobile:function(){var t=this,n=t.state.data,a=(new u).getStatus(n.status),i=moment.unix(n.from),r=moment.unix(n.to);return e.createElement("tr",null,e.createElement("td",null,e.createElement("div",{className:"mitemdotleft"},e.createElement("span",{className:"mitemdot",style:{backgroundColor:a.color}})),e.createElement("div",{className:"mitemdotright"},e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading mitemnoavatar",onClick:this.loadDetailHandler},e.createElement(s,{id:n.creator_id,hover:!1,onClick:this.loadDetailHandler})),e.createElement("div",{className:"mitemmeta"},n.reason," · ",i.format("DD/MM")," - ",r.format("DD/MM"),e.createElement("div",{className:"clear",style:{opacity:.4}},this.renderButtonOne(),this.renderButtonTwo(),this.renderButtonThree())))))},renderDesktop:function(){var t=this,n=t.state.data,a=moment.unix(n.from),i=moment.unix(n.to),r=(new u).getStatus(n.status);return e.createElement("tr",{className:"top aligned"},e.createElement("td",null,e.createElement(s,{id:n.creator_id,hover:!1})),e.createElement("td",null,n.reason),e.createElement("td",null,a.format("DD/MM")," - ",i.format("DD/MM")),e.createElement("td",null,e.createElement("span",{className:"ui small simple label "+r.color},r.text)),e.createElement("td",null,e.createElement(c,{ts:n.date_created,relativelevel:0,format:"DD/MM/YYYY"})))},render:function(){return this.renderDesktop()}});return m}),define("components/hrmleave/item-expand",["react","eventbus","language/hrmleave","components/employee-avatar","models/hrmleave"],function(e,t,n,a,i){var r=e.createClass({displayName:"ProjectTaskItemExpandComponent",allowApprove:!0,handleCloseClick:function(e){e.preventDefault();var n=$.extend({},this.props.data,{id:this.props.data.id.toString().replace(/-expand/g,"")});t.trigger("hrmleave:expand",n)},componentDidMount:function(){},render:function(){var t=this,r=t.props.data,o=moment.unix(r.from),s=moment.unix(r.to);return e.createElement("tr",{className:"row-expand"},e.createElement("td",{colSpan:"8"},e.createElement("div",{ref:"wrapper",className:"row-expand-wrapper"},e.createElement("div",{style:{float:"right",padding:5}},e.createElement("a",{onClick:this.handleCloseClick,href:"javascript:void(0)",style:{display:"inline-block",padding:3}},e.createElement("i",{className:"tc-cross"}))),e.createElement("div",{style:{backgroundColor:"#f0f0f0",padding:15}},e.createElement("h3",null,n.t("detail_leave"))),e.createElement("div",{style:{clear:"both"}}),e.createElement("div",{className:"ui segment"},e.createElement("p",null,n.t("duration"),": ",o.format("DD/MM/YYYY")," - ",s.format("DD/MM/YYYY")),e.createElement("p",null,n.t("count_hour_leave"),": ",r.duration),e.createElement("p",null,n.t("count_paid"),": ",r.count_paid),e.createElement("p",null,n.t("count_no_paid"),": ",r.count_no_paid),e.createElement("p",null,n.t("reason"),": ",r.reason),""!=r.note?e.createElement("p",null,n.t("note"),": ",r.note):"",e.createElement("hr",null),e.createElement("div",{className:"ui width stackable grid",style:{marginTop:0}},r.reviewer.map(function(o,s){if(0!=t.props.setting.default_reviewer[s]){var l=n.t("review1");1==s?l=n.t("review2"):2==s&&(l=n.t("review3"));var c=n.t("reject"),d="red";return o.id>0?o.status==(new i).STATUS_REVIEW_APPROVE&&(c=n.t("approve"),d="green"):(r.status==(new i).STATUS_PENDING_ONE||r.status==(new i).STATUS_PENDING_TWO||r.status==(new i).STATUS_PENDING_THREE)&&(c=n.t("pending_approve"),d="#cacbcd"),e.createElement("div",{className:"four wide column",key:s},e.createElement("div",{className:"ui list"},e.createElement("div",{className:"item"},e.createElement("span",{style:{float:"left"}},l,":")),e.createElement("div",{className:"item"},e.createElement(a,{id:o.id,hover:!1})),e.createElement("div",{className:"item"}),e.createElement("div",{className:"item"},n.t("status"),": ",e.createElement("span",{className:"ui small label "+d},c),e.createElement("br",null)),""!=o.note?e.createElement("div",{className:"item"},n.t("reason"),": ",o.note):""))}}))),e.createElement("div",{style:{clear:"both"}}))))}});return r}),define("components/hrmleave/employee-detail-hrmleave-list",["react","basecontroller","backbone","helper","pref","querystring","role","eventbus","language/hrmleave","language/default","collections/hrmleave","models/hrmleave","components/hrmleave/employee-detail-hrmleave-item","components/hrmleave/item-expand","components/filter-employee","models/user","components/mixin/listsearch","components/headingfull"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_){var v=e.createClass({displayName:"HrmLeaveListComponent",getDefaultProps:function(){return{did:0,object_type:10,object_id:0}},getInitialState:function(){return{total:0,items:[],length:0,currentpage:r.get("page")}},getQuerysting:function(){var e={limit:10,company_id:i.get("cid"),creator_id:this.props.data.user_id,sort_by:"id",sort_type:"DESC"};return(o.hasById(o.EMPLOYEE_DETAIL)||o.hasById(o.EMPLOYEE_MANAGE))&&!isNaN(r.get("creator_id"))&&r.get("creator_id")>0&&(e.creator_id=r.get("creator_id")),e},loadData:function(){var e=new d,t=this;e.fetch({data:t.getQuerysting(),success:function(e,n){t.setState(n)}})},componentDidUpdate:function(){},componentWillUnmount:function(){},componentWillMount:function(){r.initFilter(this.filters)},componentDidMount:function(){this.init=!1,this.loadData(),(new t).setTcScrollMinHeight()},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",{width:"200"},l.t("employee")),e.createElement("th",null,l.t("reason")),e.createElement("th",{className:"tcw100"},l.t("duration")),e.createElement("th",null,l.t("status")),e.createElement("th",null,l.t("date_created")))},render:function(){for(var t=this,n=5,i=0;i<t.props.setting.default_reviewer.length;i++)0!=t.props.setting.default_reviewer[i]&&n++;return e.createElement("div",{className:"ui segments"},e.createElement("div",{className:"ui segment tctabledata tc-scrolled"},e.createElement("table",{ref:"leavelist",className:a.tableclass()},e.createElement("thead",null,this.renderTableHeaderDesktop()),e.createElement("tbody",null,t.state.items.map(function(n,a){return e.createElement(m,{key:n.id,data:n,setting:t.props.setting,onFilterEmployee:t.filterEmployeeHanlder})}))),e.createElement("a",{href:"#hrmleave/_s/creator_id/"+this.props.data.user_id,className:"ui mini basic blue button"},c.t("view_more"))))}});return v}),define("models/hrmleavesetting",["basemodel"],function(e){var t=e.extend({urlRoot:"v1/hrmleavesettings",getSetting:function(e,t){var n=this.urlRoot;$.ajax({url:n,type:"GET",data:e,success:function(e){t(e)},error:function(e){}})},saveSetting:function(e,t){var n=this.urlRoot+"/"+e.id;$.ajax({url:n,type:"PUT",data:e,success:function(e,n,a){"function"!=typeof t.success||201!=a.status&&200!=a.status||t.success(e,a),"function"!=typeof t.error||422!=a.status&&422!=a.status||t.error(e,a)},error:function(e,n,a){"function"==typeof t.error&&t.error(e)},complete:function(e){"function"==typeof t.complete&&t.complete(e)}})}});return t}),define("components/hrmleave/employee-detail-hrmleave",["react","pref","basecontroller","querystring","helper","components/hrmleave/employee-detail-hrmleave-list","models/hrmleavesetting"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"DetailHrmLeaveComponent",componentDidMount:function(){var n=this,a={company_id:t.get("cid")};(new o).getSetting(a,function(t){e.render(e.createElement(r,{setting:t,data:n.props.data}),e.findDOMNode(n.refs.container))})},render:function(){return e.createElement("div",{ref:"container"})}});return s}),define("components/employeebank/employee-detail-bank-item",["react","helper","eventbus","companysetting","pref","role","models/employeebank","models/user","models/employee","models/department","models/office","models/file","language/employeebank","language/default","components/filestrip","components/datetime"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"EmployeeBankComponent",checkPermisson:function(){var t=this,n=r.hasById(262),a=["btnedit"];a.length&&$.each(a,function(a,r){n?t.props.data.creator_id!=i.get("uid")&&$(e.findDOMNode(t.refs[r])).attr("href","#employeeprogress/detail/"+t.props.data.id).html('<i className="icon tc-info"></i> '+p.t("detail")):$(e.findDOMNode(t.refs[r])).attr("href","#employeeprogress/detail/"+t.props.data.id).html('<i className="icon tc-info"></i> '+p.t("detail"))})},showEditActionSheet:function(e){e.preventDefault();var n={buttons:[{text:p.t("update"),href:"#employeeprogress/edit/"+this.props.data.id}]};t.showActionSheet(n)},_cancelDelete:function(e){e.preventDefault(),$(this.refs.delete.getDOMNode()).popup("hide")},_delete:function(e){e.preventDefault();var a=this;$(this.refs.delete.getDOMNode()).popup("hide"),new o({id:this.props.data.id}).destroy({success:function(){t.showSuccess(p.t("delete_success")),n.trigger("employeebank:delete",a.props.data.id)},error:function(){t.showError(p.t("delete_fail"))},complete:function(){}})},update:function(n){data=n.item;var a=this;switch(n.type){case"signer":this.props.data.signer>0&&data.id==this.props.data.signer&&$(e.findDOMNode(a.refs.signer)).empty().append(e.renderToString(e.createElement("img",{className:"ui avatar image",src:t.getAvatarPath(data.avatar)}))).append(data.fullname)}},showPicture:function(){var t=this,n=[];if(""!=this.props.data.file_id_list){var a=this.props.data.file_id_list.split(",");a.map(function(e,t){n.push(e)})}n.length&&($(e.findDOMNode(this.refs.btnpicture)).hide(),e.render(e.createElement(h,{files:n}),e.findDOMNode(t.refs.picture)))},progressedit:function(e){e.preventDefault(),n.trigger("employeedetail:showeditmodal",this.props.data,"bank")},componentWillUnmount:function(){n.off("employeebankitem:update",this.update)},componentDidMount:function(){$(this.refs.delete.getDOMNode()).popup({on:"click",position:"left center",popup:this.refs["delete-confirm"].getDOMNode()}),n.on("employeebankitem:update",this.update),this.checkPermisson(),$(e.findDOMNode(this.refs.salary_net)).add($(e.findDOMNode(this.refs.salary_gross))).autoNumeric(a.numberoption())},componentDidUpdate:function(){this.checkPermisson(),$(e.findDOMNode(this.refs.salary_net)).autoNumeric("set",this.props.data.salary_net||0),$(e.findDOMNode(this.refs.salary_gross)).autoNumeric("set",this.props.data.salary_gross||0)},renderMobile:function(){},renderDesktop:function(){var t=(new o).getStatus(this.props.data.status);return e.createElement("tr",null,e.createElement("td",null,this.props.data.bank),e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.progressedit},this.props.data.number)),e.createElement("td",null,this.props.data.note),e.createElement("td",null,e.createElement("span",{ref:"status",className:"ui small simple label "+t.color},t.text)),e.createElement("td",{className:this.props.isedit?"":"hide"},e.createElement("a",{href:"#",onClick:this.progressedit,className:"ui noborder icon basic button mini"},e.createElement("i",{className:"icon tc-pencil"})),e.createElement("a",{style:{width:"36px"},ref:"delete",className:"ui noborder icon basic button mini"},e.createElement("i",{className:"icon tc-trash"})),e.createElement("div",{ref:"delete-confirm",className:"ui flowing popup top left transition hidden"},e.createElement("h4",null,p.t("delete_confirm")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:this._delete,className:"ui button mini red",href:"#"
},p.t("delete_button")),e.createElement("a",{onClick:this._cancelDelete,className:"ui button mini",href:"#"},p.t("cancel_button"))))))},render:function(){return this.renderDesktop()}});return g}),define("components/mixin/select",["react","backbone","cacheddata","language/default"],function(e,t,n,a){return{getDefaultProps:function(){return{name:"",value:"",className:"fluid",itemPrefixText:"",emptyOption:!0,emptyOptionText:a.t("filterOptionAll"),onChange:function(){}}},getInitialState:function(){return{items:[]}},val:function(e){return"undefined"==typeof e?this.getValue():void this.setValue(e)},getText:function(){var t=e.findDOMNode(this).value,n=$(e.findDOMNode(this.refs[t])).text();return n},getValue:function(){return e.findDOMNode(this).value},setValue:function(t){$(e.findDOMNode(this)).val(t).trigger("refresh")},onChangeProxy:function(){"function"==typeof this.props.onChange&&this.props.onChange($(e.findDOMNode(this)).val())},_load:function(e){var t=n.get(e);void 0===t?this._loadDataLive(1):this.setState({items:t().get()})},componentDidUpdate:function(){("string"==typeof this.props.value&&this.props.value.length>0||"number"==typeof this.props.value)&&$(e.findDOMNode(this)).val(this.props.value),$(e.findDOMNode(this)).trigger("render")},componentDidMount:function(){this._loadData(),$(e.findDOMNode(this)).customSelect()},renderItem:function(){var t=this;return e.createElement("select",{onChange:this.onChangeProxy,name:this.props.name,defaultValue:this.props.value,className:this.props.className},this.props.emptyOption?e.createElement("option",{value:""},this.props.emptyOptionText):"",this.state.items.map(function(n,a){var i=n.name;return""!=t.props.itemPrefixText&&(i=t.props.itemPrefixText+" "+n.name),e.createElement("option",{key:n.id,value:n.id,ref:n.id},i)}))}}}),define("components/select/office",["react","pref","cacheddata","collections/office","models/office","components/mixin/select"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"SelectOfficeComponent",mixins:[r],_loadDataLive:function(e){var n=this;(new a).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,status:(new i).STATUS_ENABLE,sort_by:"name",sort_type:"ASC",page:e},success:function(e,t){n.setState({items:n.state.items.concat(t.items)}),Math.ceil(t.total/t.limit)>t.currentpage&&n._loadDataLive(t.currentpage+1)}})},_loadData:function(){this._load((new i).cacheName)},render:function(){return this.renderItem()}});return o}),define("components/select/department",["react","pref","collections/department","models/department","components/mixin/select"],function(e,t,n,a,i){var r=e.createClass({displayName:"SelectDepartmentComponent",mixins:[i],_loadDataLive:function(e){var a=this;(new n).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,sort_by:"display_order",sort_type:"ASC"},success:function(e,t){a.setState({items:a.state.items.concat(t.items)}),Math.ceil(t.total/t.limit)>t.currentpage&&a._loadDataLive(t.currentpage+1)}})},_loadData:function(){this._load((new a).cacheName)},render:function(){return this.renderItem()}});return r}),define("components/select/position",["react","pref","models/employee","components/mixin/select"],function(e,t,n,a){var i=e.createClass({displayName:"SelectComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getPositionList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/select/employeetype",["react","pref","models/employee","language/employee","components/mixin/select"],function(e,t,n,a,i){var r=e.createClass({displayName:"SelectComponent",mixins:[i],_loadData:function(e){var t=[];(new n).getTypeList().map(function(e,n){t.push({id:e.code,name:a.t("TYPE_"+e.text)})}),this.setState({items:t})},render:function(){return this.renderItem()}});return r}),define("components/filtersidebar",["react","pref","helper","eventbus","querystring","language/default"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"StatusComponent",getDefaultProps:function(){return{name:"",heading:r.t("filter_sidebar_heading"),showkeyword:!0,datepicker:!1,datepickerLabel:r.t("filter_sidebar_date_picker_label"),date_started:0,date_ended:0,keyword:"",maxItem:5,minusIcon:"tc-minus",filterIcon:"tc-search",hideTitle:r.t("filter_sidebar_hide_title"),showTitle:r.t("filter_sidebar_show_title"),offsetTop:0}},getSavedName:function(){var e=this.props.name;return 0==this.props.name.length&&(e=i.get("_controller").replace("/","_")),"hidesidebar_"+e},toggleMinimize:function(n){"undefined"!=typeof n&&n.preventDefault();var a=$(e.findDOMNode(this.refs.icon));a.hasClass(this.props.minusIcon)?(a.removeClass(this.props.minusIcon).addClass(this.props.filterIcon),a.parent().attr("title",this.props.showTitle),t.set(this.getSavedName(),1)):(a.removeClass(this.props.filterIcon).addClass(this.props.minusIcon),a.parent().attr("title",this.props.hideTitle),$(e.findDOMNode(this.refs.filtermenuitem)).show(),t.set(this.getSavedName(),0)),$("#page").toggleClass("pageminimize"),$(window).trigger("resize")},getKeyword:function(){var t="";if(this.props.showkeyword){t=$(e.findDOMNode(this.refs.keyword)).val(),t=$.trim(t);var n=new RegExp("[\\f\\n\\r\\t\\v​]|%","g");t=t.replace(n,"")}return t},getDateStarted:function(){return this.refs.daterange.getDateStarted()},getDateEnded:function(){return this.refs.daterange.getDateEnded()},keywordPressHandler:function(e){13==e.keyCode&&this.props.onSubmit()},submitDump:function(e){e.preventDefault(),e.stopPropagation()},updateSize:function(){var t=300;n.isSmallScreen()||(t=$(window).height()-128-this.props.offsetTop,$(e.findDOMNode(this.refs.filtermenuitem)).height(t).niceScroll({preservenativescrolling:!1}))},filterSidebarToggleHandler:function(){$(e.findDOMNode(this)).toggle()},componentDidUpdate:function(){n.isSmallScreen()&&$("body, document").scrollTop(50)},componentWillUnmount:function(){},componentDidMount:function(){var a=this;(n.isSmallScreen()||1==t.get(this.getSavedName()))&&this.toggleMinimize();var i=$(e.findDOMNode(this)).find("form .field").length;if(i>this.props.maxItem){var o=null;$(e.findDOMNode(this)).find("form .field").each(function(e,t){e==a.props.maxItem&&(o=t),e>a.props.maxItem-1&&$(this).hide()});var s=$('<a href="" class="ui small noborder blue basic label filtermenumore">'+r.t("view_more")+"</a>");$(o).before(s),$(e.findDOMNode(this)).find(".filtermenumore").bind("click",function(t){t.preventDefault(),$(this).hide(),$(e.findDOMNode(a)).find(".field").show()})}this.updateSize(),$(e.findDOMNode(this.refs.minimizebutton)).fastClick(this.toggleMinimize)},render:function(){return n.isPhonegap(),e.createElement("div",{className:"ui vertical menu filtermenu"},e.createElement("h3",{className:"item filtermenuheading"},e.createElement("a",{href:"#",ref:"minimizebutton",title:this.props.hideTitle,className:"ui icon noborder big basic button pull-right"},e.createElement("i",{ref:"icon",className:"icon "+this.props.minusIcon})),e.createElement("span",null,this.props.heading)),e.createElement("div",{className:"item filtermenuitem",ref:"filtermenuitem",style:{display:n.isSmallScreen()?"none":""}},e.createElement("form",{className:"ui form",onSubmit:this.submitDump},this.props.showkeyword?e.createElement("div",{className:"field"},e.createElement("label",null,r.t("filterKeywordLabel")),e.createElement("div",{className:"ui small input icon"},e.createElement("input",{type:"text",ref:"keyword",name:"keyword",onKeyUp:this.keywordPressHandler,defaultValue:this.props.keyword,placeholder:r.t("filterKeywordPlaceholder")}))):"",this.props.children,e.createElement("button",{className:"ui small blue fluid button",type:"button",onClick:this.props.onSubmit},r.t("search_btn")))))}});return o}),define("components/employeebank/employee-detail-bank",["react","basecontroller","eventbus","pref","role","helper","querystring","language/employeebank","language/default","models/employee","collections/employeebank","models/department","collections/department","models/office","models/user","collections/office","components/mixin/listsearch","components/querytag","components/querytaglist","components/employeebank/employee-detail-bank-item","components/headingfull","components/floatpagination","components/select/office","components/select/department","components/select/position","components/select/employeetype","components/filtersidebar"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T){var x=e.createClass({displayName:"EmployeeBankList",getInitialState:function(){return{total:"--",items:[],length:0,currentpage:o.get("page")}},_loadData:function(){var e=this;$("#body-loader").addClass("active");var t={company_id:a.get("cid"),user_id:e.props.data.user_id,limit:30,page:this.state.currentpage,sort_by:"id",sort_type:"DESC"};(new d).fetch({data:t,success:function(t,n){e.setState(n)},complete:function(){$("#body-loader").removeClass("active")}})},remove:function(e){var t=this.state.items;t.map(function(n,a){n.id==e&&t.splice(a,1)}),this.setState({items:t,total:t.length})},updatelist:function(e,t){var n=this.state.items;switch(t){case"add":n.unshift(e);break;default:n.map(function(t,a){t.id==e.id&&(n[a]=e)})}this.setState({items:n})},checkPermisson:function(){var t=this,n=i.hasById(262),a=["btnadd","setting-checkin","manage"];a.length&&$.each(a,function(a,i){n||$(e.findDOMNode(t.refs[i])).hide()})},componentWillUnmount:function(){n.off("employeebank:delete",this.remove),n.off("employeebank:edit",this.updatelist),n.off("employeebank:add",this.updatelist)},componentDidMount:function(){this._loadData(),this.checkPermisson(),n.on("employeebank:delete",this.remove),n.on("employeebank:edit",this.updatelist),n.on("employeebank:add",this.updatelist),(new t).setTcScrollMinHeight()},showModal:function(){n.trigger("employeedetail:showaddmodal","bank")},componentDidUpdate:function(){this.checkPermisson()},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,s.t("bank")),e.createElement("th",null,s.t("number")),e.createElement("th",null,s.t("note")),e.createElement("th",null,s.t("status")),e.createElement("th",{className:"col_action_2button"}))},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement("div",{style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{ref:"employeetable",id:"employeetable",style:{margin:0},className:r.tableclass()},e.createElement("thead",null,this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.items.map(function(n,a){return e.createElement(y,{manage:t.state.permission,isedit:i.hasById(i.EMPLOYEE_MANAGE),key:n.id,data:n})}))),e.createElement("br",null),e.createElement("a",{ref:"btnadd",className:"ui mini grey labeled icon button",onClick:this.showModal},e.createElement("i",{className:"icon tc-plus",title:s.t("add_tk")}),s.t("add_tk"))))}});return x}),define("language/employeeprogress",["baselanguage"],function(e){var t={vn:{heading:"Danh sách nhân viên",heading_update:"Cập nhật quá trình làm việc",heading_insert:"Thêm quá trình làm việc",workspace:"Làm việc tại ",title:"Tiêu đề ",time:"Thời gian",office:"Chuyển trụ sở mới",department:"Chuyển phòng ban mới",datecreated:"Ngày tạo",email:"Email",internalid:"Mã nội bộ",jobtitle:"Chuyển chức vụ mới",filterOffice:"Tìm bởi văn phòng",filterOfficeAll:"Tất cả văn phòng",filterDepartment:"Tìm bởi phòng ban",filterDepartmentAll:"Tất cả phòng ban",filterPosition:"Tìm bởi chức vụ",filterPositionAll:"Tất cả chức vụ",load_more_employee:"Xem thêm",filter_not_found:"Không tìm thấy kết quả.",filter_type:"Loại hình công việc",filter_office_id:"Trụ sở",filter_department_id:"Phòng ban",filter_position_id:"Cấp bậc",filter_keyword:"Từ khóa",STATUS_UNACTIVATED:"Chưa hiệu lực",STATUS_ENABLE:"Bật",STATUS_DISABLE:"Tắt",STATUS_DELETED:"Xóa",POSITION_INTERNSHIP:"Mới tốt nghiệp / Thực tập",POSITION_STAFF:"Nhân viên",POSITION_GROUP_LEAD:"Trưởng nhóm / Giám sát",POSITION_ASSISTANT_MANAGER:"Phó phòng",POSITION_MANAGER:"Trưởng phòng",POSITION_SUBDIRECTOR:"Phó giám đốc",POSITION_DIRECTOR:"Giám đốc",POSITION_CEO:"Giám đốc điều hành",POSITION_SUBCHAIRMAN:"Phó chủ tịch",POSITION_CHAIRMAIN:"Chủ tịch",POSITION_STORE_ASSISTANT_MANAGER:"Trợ lý quản lý cửa hàng",POSITION_STORE_MANAGER:"Quản lý cửa hàng",TYPE_FULLTIME:"Nhân viên chính thức",TYPE_PARTTIME:"Bán thời gian",TYPE_PREFLIGHT:"Thử việc",TYPE_OVERTIME:"Làm thêm ngoài giờ",TYPE_SEASONAL:"Nhân viên thời vụ",TYPE_PROJECT:"Làm dự án",user_info_title:"Tạo thành viên",user_info_content:"Không thể tìm thấy bất kỳ người dùng với email được chọn. Sử dụng mẫu sau để tạo người dùng mới với email được chọn.",employee_import_info_title:"Import tập tin Excel",error_employee_invalid:"Nhân viên không hợp lệ",employee_import_info_content:'Upload tập tin Excel với định dạng sau:<br /><a href="/files/employee-import-format.xls">Tải file mẫu</a>',search:"Tìm kiếm...",employee:"Nhân viên",Password:"Mật khẩu",fullname:"Họ tên",status:"Trạng thái",workTimeReport:"Tổng hợp giờ công",employee_info_title:"Thông tin nhân viên",employee_info_content:"Thông tin chi tiết nhân viên",no_import_data:"Không có dữ liệu",heading_import_data:"Import nhân viên",checkinHistory:"Lịch sử chấm công",checkInOut:"Chấm công",position:"Chuyển cấp bậc mới",creator:"Người tạo",name:"Tên",note:"Ghi chú",close:"Đóng",phone:"Điện thoại",type:"Chuyển loại hình công việc mới",import_finished:"Import hoàn tất",file_excel:"Tập tin excel",upload_file:"Upload tập tin",error_data_null:"Vui lòng nhập dữ liệu",error_email_invalid:"Email sai định dạng",error_email_required:"Vui lòng nhập Email",error_phone_required:"Vui lòng nhập số điện thoại",error_user_id_required:"Email chưa được đăng ký",error_user_id_notfound:"Email chưa được đăng ký, Vui lòng điền thông tin bên dưới để đăng ký",error_department_id_notfound:"Phòng ban không tồn tại",error_company_id_invalid:"Công ty không tồn tại",error_user_id_existed:"thành viên đã là nhân viên",error_job_title_is_require:"Vui lòng nhập chức vụ",error_import:"Đã xảy ra lỗi. Vui lòng thử lại!",error_data_invalid:"Không đúng định dạng file!",error_file_invalid:"Không đúng định dạng file!",error_file_required:"Vui lòng chọn file!",error_file_size:"Dữ liệu file lớn hơn 100mb!",error_fullname_required:"Vui lòng nhập họ tên!",error_email_existed:"Email đã được đăng ký!",error_password_too_short:"Mật khẩu quá ngắn (ít nhất 7 ký tự)!",error_interal_id_exist:"Internal ID đã tồn tại!",tab_syll:"Sơ yếu lý lịch",tab_hd:"Hợp đồng",tab_qtlav:"Quá trình làm việc",tab_tk:"Tài khoản",tab_cc:"Chấm công",tab_l:"Lương",tab_np:"Nghỉ phép",tab_ct:"Công tác",tab_ktkl:"Khen thưởng kỉ luật"},en:{heading:"Danh sách nhân viên",heading_update:"Cập nhật quá trình làm việc",heading_insert:"Thêm quá trình làm việc",workspace:"Làm việc tại ",title:"Tiêu đề ",time:"Thời gian",office:"Chuyển trụ sở mới",department:"Chuyển phòng ban mới",datecreated:"Ngày tạo",email:"Email",internalid:"Mã nội bộ",jobtitle:"Chuyển chức vụ mới",filterOffice:"Tìm bởi văn phòng",filterOfficeAll:"Tất cả văn phòng",filterDepartment:"Tìm bởi phòng ban",filterDepartmentAll:"Tất cả phòng ban",filterPosition:"Tìm bởi chức vụ",filterPositionAll:"Tất cả chức vụ",load_more_employee:"Xem thêm",filter_not_found:"Không tìm thấy kết quả.",filter_type:"Loại hình công việc",filter_office_id:"Trụ sở",filter_department_id:"Phòng ban",filter_position_id:"Cấp bậc",filter_keyword:"Từ khóa",STATUS_UNACTIVATED:"Chưa hiệu lực",STATUS_ENABLE:"Bật",STATUS_DISABLE:"Tắt",STATUS_DELETED:"Xóa",POSITION_INTERNSHIP:"Mới tốt nghiệp / Thực tập",POSITION_STAFF:"Nhân viên",POSITION_GROUP_LEAD:"Trưởng nhóm / Giám sát",POSITION_ASSISTANT_MANAGER:"Phó phòng",POSITION_MANAGER:"Trưởng phòng",POSITION_SUBDIRECTOR:"Phó giám đốc",POSITION_DIRECTOR:"Giám đốc",POSITION_CEO:"Giám đốc điều hành",POSITION_SUBCHAIRMAN:"Phó chủ tịch",POSITION_CHAIRMAIN:"Chủ tịch",POSITION_STORE_ASSISTANT_MANAGER:"Trợ lý quản lý cửa hàng",POSITION_STORE_MANAGER:"Quản lý cửa hàng",TYPE_FULLTIME:"Nhân viên chính thức",TYPE_PARTTIME:"Bán thời gian",TYPE_PREFLIGHT:"Thử việc",TYPE_OVERTIME:"Làm thêm ngoài giờ",TYPE_SEASONAL:"Nhân viên thời vụ",TYPE_PROJECT:"Làm dự án",user_info_title:"Tạo thành viên",user_info_content:"Không thể tìm thấy bất kỳ người dùng với email được chọn. Sử dụng mẫu sau để tạo người dùng mới với email được chọn.",employee_import_info_title:"Import tập tin Excel",error_employee_invalid:"Nhân viên không hợp lệ",employee_import_info_content:'Upload tập tin Excel với định dạng sau:<br /><a href="/files/employee-import-format.xls">Tải file mẫu</a>',search:"Tìm kiếm...",employee:"Nhân viên",Password:"Mật khẩu",fullname:"Họ tên",status:"Trạng thái",workTimeReport:"Tổng hợp giờ công",employee_info_title:"Thông tin nhân viên",employee_info_content:"Thông tin chi tiết nhân viên",no_import_data:"Không có dữ liệu",heading_import_data:"Import nhân viên",checkinHistory:"Lịch sử chấm công",checkInOut:"Chấm công",position:"Chuyển cấp bậc mới",creator:"Người tạo",name:"Tên",note:"Ghi chú",close:"Đóng",phone:"Điện thoại",type:"Chuyển loại hình công việc mới",import_finished:"Import hoàn tất",file_excel:"Tập tin excel",upload_file:"Upload tập tin",error_data_null:"Vui lòng nhập dữ liệu",error_email_invalid:"Email sai định dạng",error_email_required:"Vui lòng nhập Email",error_phone_required:"Vui lòng nhập số điện thoại",error_user_id_required:"Email chưa được đăng ký",error_user_id_notfound:"Email chưa được đăng ký, Vui lòng điền thông tin bên dưới để đăng ký",error_department_id_notfound:"Phòng ban không tồn tại",error_company_id_invalid:"Công ty không tồn tại",error_user_id_existed:"thành viên đã là nhân viên",error_job_title_is_require:"Vui lòng nhập chức vụ",error_import:"Đã xảy ra lỗi. Vui lòng thử lại!",error_data_invalid:"Không đúng định dạng file!",error_file_invalid:"Không đúng định dạng file!",error_file_required:"Vui lòng chọn file!",error_file_size:"Dữ liệu file lớn hơn 100mb!",error_fullname_required:"Vui lòng nhập họ tên!",error_email_existed:"Email đã được đăng ký!",error_password_too_short:"Mật khẩu quá ngắn (ít nhất 7 ký tự)!",error_interal_id_exist:"Internal ID đã tồn tại!",tab_syll:"Sơ yếu lý lịch",tab_hd:"Hợp đồng",tab_qtlav:"Quá trình làm việc",tab_tk:"Tài khoản",tab_cc:"Chấm công",tab_l:"Lương",tab_np:"Nghỉ phép",tab_ct:"Công tác",tab_ktkl:"Khen thưởng kỉ luật"}};return new e({lang:t})}),define("components/employeeprogress/employee-detail-progress-item",["react","helper","eventbus","pref","role","models/employeeprogress","models/user","models/file","models/employee","models/department","models/office","language/employeeprogress","language/default","components/filestrip","components/datetime"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"EmployeeProgressComponent",getUserName:function(t,n){var a=this;t>0&&new o({id:t}).fetch({success:function(t,i){$(e.findDOMNode(a.refs[n])).append(i.fullname)},complete:function(){$("#body-loader").removeClass("active")}})},checkPermisson:function(){i.hasById(262)||$(e.findDOMNode(this.refs.tdbtn)).hide()},showEditActionSheet:function(e){e.preventDefault();var n={buttons:[{text:m.t("update"),href:"#employeeprogress/edit/"+this.props.data.id}]};t.showActionSheet(n)},_cancelDelete:function(e){e.preventDefault(),$(this.refs.delete.getDOMNode()).popup("hide")},_delete:function(e){e.preventDefault();var a=this;$(this.refs.delete.getDOMNode()).popup("hide"),new r({id:this.props.data.id}).destroy({success:function(){t.showSuccess(m.t("delete_success")),n.trigger("progress:delete",a.props.data.id)},error:function(){t.showError(m.t("delete_fail"))},complete:function(){}})},getDeparment:function(t,n,a){var i=this;$(e.findDOMNode(i.refs[a])).empty().append("<code> - </code>"),n>0&&new c({id:n}).fetch({success:function(t,n){var r="";$(e.findDOMNode(i.refs[a])).html(r+n.name)}})},getOffice:function(t,n,a){var i=this;$(e.findDOMNode(i.refs[a])).html("-"),n>0&&new d({id:n}).fetch({success:function(t,n){var r="";$(e.findDOMNode(i.refs[a])).html(r+n.name)}})},getPosition:function(){var t="-",n=this;if(this.props.data.to_position>-1){var a="";t=a+(new l).getPosition(this.props.data.to_position).text}if(this.props.data.from_position==this.props.data.to_position)var t="-";$(e.findDOMNode(n.refs.position)).empty().append(t)},getType:function(){var t="-",n=this;if(this.props.data.to_type){var a="";t=a+u.t("TYPE_"+(new l).getType(this.props.data.to_type).text)}$(e.findDOMNode(n.refs.type)).empty().append(t)},getjobtitle:function(){var t="-",n=this;if(this.props.data.to_jobtitle){var a="";t=a+this.props.data.to_jobtitle}$(e.findDOMNode(n.refs.jobtitle)).empty().append(t)},getdate:function(){var t="-",n=this;if(this.props.data.to_date){var a="";t=a+moment.unix(this.props.data.to_date).format("DD/MM/YYYY")}$(e.findDOMNode(n.refs.date)).empty().append(t)},showPicture:function(){var t=this,n=[];if(""!=this.props.data.file_id_list){var a=this.props.data.file_id_list.split(",");a.map(function(e,t){n.push(e)})}n.length&&($(e.findDOMNode(this.refs.btnpicture)).hide(),e.render(e.createElement(p,{files:n}),e.findDOMNode(t.refs.picture)))},progressedit:function(e){e.preventDefault(),n.trigger("employeedetail:showeditmodal",this.props.data)},renderFile:function(){var t=this.props.data.filedetail;if(t){var n="";t.map(function(e,t){var a=new s(e),i=a.getDownloadUrl(),r=e.title;n+='<a class="icon tc-attach" href="'+i+'" title="'+r+'"></a>'}),$(e.findDOMNode(this.refs.filelist)).html(n)}},componentDidMount:function(){this.renderFile(),$(this.refs.delete.getDOMNode()).popup({on:"click",popup:this.refs["delete-confirm"].getDOMNode()}),this.getUserName(this.props.data.user_id,"employee"),this.getUserName(this.props.data.creator_id,"creator"),this.getOffice(this.props.data.from_office,this.props.data.to_office,"office"),this.getDeparment(this.props.data.from_department,this.props.data.to_department,"department"),this.getPosition(),this.getType(),this.getjobtitle(),this.getdate(),this.checkPermisson()},componentDidUpdate:function(e,t){this.checkPermisson(),this.renderFile()},renderMobile:function(){var n=(new r).getStatus(this.props.data.status),a=((new l).getSource(this.props.data.source).text,(new l).getType(this.props.data.to_type).text);return e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading"},this.props.data.title,e.createElement("span",{className:"ui mini basic label pull-right "+n.color},t.smartNumberFormat(this.props.data.total))),e.createElement("div",{className:"mitemmeta"},e.createElement("span",{ref:"employee"})," · ",u.t(a),e.createElement("br",null)," ",e.createElement(h,{ts:this.props.data.date_created}))))},renderDesktop:function(){var t=((new r).getStatus(this.props.data.status),"-");return this.props.data.to_type&&(t=(new l).getType(this.props.data.to_type).text),e.createElement("tr",null,e.createElement("td",{ref:"date"}),e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.progressedit},this.props.data.title)),e.createElement("td",{ref:"office"}),e.createElement("td",{ref:"department"}),e.createElement("td",{ref:"jobtitle"}),e.createElement("td",{ref:"type"}),e.createElement("td",{ref:"position"}),e.createElement("td",{ref:"filelist"}),e.createElement("td",{ref:"tdbtn"},e.createElement("a",{onClick:this.progressedit,className:"ui noborder icon basic button mini"},e.createElement("i",{className:"icon tc-pencil"})),e.createElement("a",{style:{width:"36px"},ref:"delete",className:"ui noborder icon basic button mini"},e.createElement("i",{className:"icon tc-trash"})),e.createElement("div",{ref:"delete-confirm",className:"ui flowing popup top left transition hidden"},e.createElement("h4",null,m.t("delete_confirm")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:this._delete,className:"ui button mini red",href:"#"},m.t("delete_button")),e.createElement("a",{onClick:this._cancelDelete,className:"ui button mini",href:"#"},m.t("cancel_button"))))))},render:function(){return this.renderDesktop()}});return f}),define("components/employeeprogress/employee-detail-progress-add",["react","backbone","eventbus","helper","pref","cacheddata","language/employeeprogress","language/employee","language/default","models/employeeprogress","models/employee","models/user","models/file","components/select-status","components/select-office","components/select-department","components/semantic-datepicker","components/tinymce"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_){var v=e.createClass({displayName:"EmployeeProgressAddComponent",getInitialState:function(){return{modelitems:[],reset:1}},save:function(){var t=this,n={department_id:"to_department_id",office_id:"to_office_id",position_id:"to_position_id",type:"to_type",job_title:"to_jobtitle"},i={},r=!1;$.each(n,function(n,a){var o=t.props.data[n],s=$(e.findDOMNode(t.refs[a])).val();"to_jobtitle"!=a&&(s=$(e.findDOMNode(t.refs[a])).dropdown("get value")),a=a.replace("_id",""),n=n.replace("_id",""),o!=s&&(r=!0,i["from_"+n]=o,i[a]=s)}),r?this.createEmployeeProgress(i):a.showError(o.t("error_data_null"))},createEmployeeProgress:function(t){var r=$(".ui.form",this.getDOMNode());r.addClass("loading");var o=this,d=[];$("#uploadifive-ffile-"+this.props.data.id+"-queue").find(".attachedfileid").each(function(e){d.push($(this).attr("data-id"))}),dataExtend={company_id:i.get("cid"),creator_id:i.get("uid"),title:$(e.findDOMNode(o.refs.title)).val(),note:$(e.findDOMNode(o.refs.note)).val(),employee_id:o.props.data.id,file_id_list:d.join(","),from_date:$(e.findDOMNode(o.refs.date_started)).val(),to_date:$(e.findDOMNode(o.refs.date_ended)).val(),creator_id:i.get("uid"),status:(new c).STATUS_ENABLE},console.log(dataExtend),$.extend(t,dataExtend),$(".prompt").remove(),$(".error").removeClass("error"),(new c).save(t,{success:function(e,t){a.showSuccess(l.t("insert_success")),$(".ui.modal",o.getDOMNode()).modal("hide"),n.trigger("progress:add",e)},error:function(e,t){a.notifyErrorAndForm(t,s,"error_add",r,{department:["error_to_department_not_valid"],office:["error_to_office_not_valid"],type:["error_to_type_not_valid"],position:["error_to_position_not_valid"],status:["error_status_require","error_status_invalid"],title:["error_title_require"]})},complete:function(){r.removeClass("loading")}})},progreslist:function(){n.trigger("employeedetail:progreslist")},componentDidUpdate:function(){(new m).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new m).OBJECTTYPE_WORKGROUP,0,(new m).STATUS_ENABLE)},componentDidMount:function(){var t=this;(new m).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new m).OBJECTTYPE_WORKGROUP,0,(new m).STATUS_ENABLE),$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.save()}}),$(".ui.modal",this.getDOMNode()).modal({context:this.getDOMNode(),onHidden:function(){n.trigger("modal:hide")}}).modal("show")},render:function(){var t=this,n=(new c).getStatusList();n.map(function(e,t){e.text=o.t("STATUS_"+e.text)});var a=(new d).getPositionList();$.each(a,function(e,t){t.text=o.t(t.text)});var i=(new d).getTypeList();$.each(i,function(e,t){t.text=o.t("TYPE_"+t.text)});var r="ffile-"+this.props.data.id;return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",refs:"modal"},e.createElement("div",{className:"header"},o.t("heading_insert")),e.createElement("div",{className:"content"},e.createElement("div",{className:"ui segments"},e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,o.t("title")),e.createElement("input",{key:t.state.reset+"title",ref:"title",name:"title",type:"text"})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("jobtitle")),e.createElement("input",{key:t.state.reset+"to_jobtitle",ref:"to_jobtitle",name:"to_jobtitle",type:"text"})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("office")),e.createElement(h,{key:t.state.reset+"to_office_id",ref:"to_office_id",name:"to_office_id",placeholder:"----"})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("department")),e.createElement(f,{key:t.state.reset+"to_department_id",ref:"to_department_id",name:"to_department_id",placeholder:"----"})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("type")),e.createElement(p,{key:t.state.reset+"to_type",ref:"to_type",name:"to_type",placeholder:"-----",data:i})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("position")),e.createElement(p,{key:t.state.reset+"to_position_id",ref:"to_position_id",name:"to_position_id",placeholder:"----",data:a})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("note")),e.createElement("input",{ref:"note",key:t.state.reset,name:"note",type:"text"})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("time")),e.createElement("input",{type:"hidden",ref:"date_started",value:moment().unix()}),e.createElement("input",{type:"hidden",ref:"date_ended",value:moment().add(30,"days").unix()}),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(g,{options:{format:"DD/MM/YYYY",endDate:moment().add(30,"days"),timePicker:!0,identifier:"daterange",opens:"left",applyClass:"ui button green",cancelClass:"ui button secondary"},callBack:function(n,a,i){$(e.findDOMNode(t.refs.date_started)).val(n.unix()),$(e.findDOMNode(t.refs.date_ended)).val(a.unix())}}))),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("File")),e.createElement("div",{className:"comment"},e.createElement("div",{className:"content"},e.createElement("input",{key:t.state.reset+"file",type:"file",ref:"fileinput",id:r,name:"ffile",multiple:"multiple"})))))))),e.createElement("div",{className:"actions"},e.createElement("span",{className:"ui noborder basic button cancel",onClick:this.progreslist},l.t("close")),e.createElement("button",{className:"ui teal button",onClick:this.save},l.t("add")))))}});return v}),define("components/employeeprogress/employee-detail-progress",["react","eventbus","basecontroller","pref","role","helper","setting","language/employeeprogress","language/default","querystring","collections/employeeprogress","models/employeeprogress","models/user","components/mixin/listsearch","components/headingfull","components/employeeprogress/employee-detail-progress-item","components/employeeprogress/employee-detail-progress-add","components/filter-employee","components/semantic-datepicker","components/mixin/listsearch","components/headingfull","components/search-keyword"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,p,h,y){var E=e.createClass({displayName:"DetailEmployeeProgressComponent",getInitialState:function(){return{hmac:"",models:[],length:0,total:0,currentpage:c.get("page")}},_loadData:function(){var e=this;$("#body-loader").addClass("active");var t={company_id:a.get("cid"),limit:50,user_id:e.props.data.user_id,is_not_deleted:1,sort_by:c.get("sort_by")||"id",sort_type:c.get("sort_type")||"DESC"};(new d).fetch({data:t,success:function(t){e.setState(t)},complete:function(){$("#body-loader").removeClass("active")}})},addprogress:function(e){var t=$.extend([],this.state.models);t.unshift(e),this.setState({models:t})},editprogress:function(e){var t=$.extend([],this.state.models);t.map(function(n,a){var i=n.toJSON(),r=e.toJSON();i.id==r.id&&(t[a]=e)}),this.setState({models:t})},deleteprogress:function(e){var t=this.state.models;t.map(function(n,a){n.id==e&&t.splice(a,1)}),this.setState({models:t})},showModal:function(){t.trigger("employeedetail:showaddmodal")},checkPermisson:function(){i.hasById(262)||($(e.findDOMNode(this.refs.thbtn)).hide(),
$(e.findDOMNode(this.refs.btnadd)).hide())},componentWillMount:function(){t.off("progress:add",this.addprogress),t.off("progress:edit",this.editprogress),t.off("progress:delete",this.deleteprogress)},componentDidMount:function(){t.on("progress:add",this.addprogress),t.on("progress:delete",this.deleteprogress),t.on("progress:edit",this.editprogress),this._loadData(),this.checkPermisson()},showaddprogress:function(){t.trigger("employeedetail:progressadd")},componentDidUpdate:function(){this.checkPermisson()},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,s.t("time")),e.createElement("th",null,s.t("title")),e.createElement("th",null,s.t("office")),e.createElement("th",null,s.t("department")),e.createElement("th",null,s.t("jobtitle")),e.createElement("th",null,s.t("type")),e.createElement("th",null,s.t("position")),e.createElement("th",null,s.t("File")),e.createElement("th",{ref:"thbtn",className:"col_action_2button"}))},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement("div",{style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{className:r.tableclass(),ref:"salarytable"},e.createElement("thead",null,this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){return n=n.toJSON(),e.createElement(f,{key:n.id+moment().unix(),viewDetail:t._viewDetail,filterStatus:t._filterStatus,data:n})}))),e.createElement("a",{ref:"btnadd",className:"ui mini grey labeled icon button",onClick:this.showModal},e.createElement("i",{style:{marginRight:"0px"},className:"icon tc-plus",title:s.t("heading_insert")}),s.t("heading_insert"))),e.createElement("div",{ref:"modalwrapper",id:"loaddetail"}))}});return E}),define("components/employeeprogress/employee-detail-progress-edit",["react","backbone","eventbus","helper","pref","cacheddata","language/employeeprogress","language/employee","language/default","models/employeeprogress","models/employee","models/user","models/file","components/select-status","components/select-office","components/select-department","components/semantic-datepicker","components/filestrip","components/tinymce"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v){var y=e.createClass({displayName:"EmployeeProgressEditComponent",getInitialState:function(){return{modelitems:[],reset:1}},save:function(){var t=this,n={department_id:"to_department_id",office_id:"to_office_id",position_id:"to_position_id",type:"to_type",job_title:"to_jobtitle"},i={},r=!1;$.each(n,function(n,a){var o=t.props.data[n],s=$(e.findDOMNode(t.refs[a])).val();"to_jobtitle"!=a&&(s=$(e.findDOMNode(t.refs[a])).dropdown("get value")),a=a.replace("_id",""),n=n.replace("_id",""),o!=s&&(r=!0,i["from_"+n]=o,i[a]=s)}),r?this.updateEmployeeProgress(i):a.showError(o.t("error_data_null"))},updateEmployeeProgress:function(t){var r=$(".ui.form",this.getDOMNode());r.addClass("loading");var o=this,d=[];$("#uploadifive-ffile-"+this.props.data.id+"-queue").find(".attachedfileid").each(function(e){d.push($(this).attr("data-id"))}),d=d.filter(function(e){return void 0!=e});var u=d.join(",");""!=this.props.dataItem.file_id_list&&""!=u?u+=","+this.props.dataItem.file_id_list:""==u&&(u=this.props.dataItem.file_id_list),dataExtend={company_id:i.get("cid"),creator_id:i.get("uid"),title:$(e.findDOMNode(o.refs.title)).val(),note:$(e.findDOMNode(o.refs.note)).val(),employee_id:o.props.data.user_id,file_id_list:u,creator_id:i.get("uid"),from_date:$('[name="from_date"]',r).val(),to_date:$('[name="to_date"]',r).val(),status:(new c).STATUS_ENABLE},$.extend(t,dataExtend),$(".prompt").remove(),$(".error").removeClass("error"),new c({id:this.props.dataItem.id}).save(t,{success:function(e,t){a.showSuccess(l.t("update_success")),n.trigger("progress:edit",e),$(".ui.modal",o.getDOMNode()).modal("hide"),n.trigger("employeedetail:progreslist")},error:function(e,t){a.notifyErrorAndForm(t,s,"error_add",r,{department:["error_to_department_not_valid"],office:["error_to_office_not_valid"],type:["error_to_type_not_valid"],position:["error_to_position_not_valid"],status:["error_status_require","error_status_invalid"],title:["error_title_require"]})},complete:function(){r.removeClass("loading")}})},progreslist:function(){n.trigger("employeedetail:progreslist")},componentDidUpdate:function(){(new m).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new m).OBJECTTYPE_WORKGROUP,0,(new m).STATUS_ENABLE)},componentDidMount:function(){var t=this;(new m).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new m).OBJECTTYPE_WORKGROUP,0,(new m).STATUS_ENABLE),$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.save()}}),$(".ui.modal",this.getDOMNode()).modal({context:this.getDOMNode(),onHidden:function(){n.trigger("modal:hide")}}).modal("show")},render:function(){var t=this,n=(new c).getStatusList();n.map(function(e,t){e.text=o.t("STATUS_"+e.text)});var a=(new d).getPositionList();$.each(a,function(e,t){t.text=o.t(t.text)});var i=(new d).getTypeList();$.each(i,function(e,t){t.text=o.t("TYPE_"+t.text)});var r="ffile-"+this.props.data.id,s=moment(),u=moment().add(30,"days");return this.props.dataItem.from_date&&(s=moment.unix(this.props.dataItem.from_date).format("DD/MM/YYYY")),this.props.dataItem.to_date&&(u=moment.unix(this.props.dataItem.to_date).format("DD/MM/YYYY")),e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",refs:"modal"},e.createElement("div",{className:"header"},o.t("heading_update")),e.createElement("div",{className:"content"},e.createElement("div",{className:"ui segments"},e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,o.t("title")),e.createElement("input",{key:t.state.reset+"title",ref:"title",name:"title",type:"text",defaultValue:this.props.dataItem.title})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("jobtitle")),e.createElement("input",{key:t.state.reset+"to_jobtitle",ref:"to_jobtitle",name:"to_jobtitle",type:"text",defaultValue:this.props.dataItem.to_jobtitle})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("office")),e.createElement(h,{key:t.state.reset+"to_office_id",ref:"to_office_id",name:"to_office_id",placeholder:"----",value:this.props.dataItem.to_office})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("department")),e.createElement(f,{key:t.state.reset+"to_department_id",ref:"to_department_id",name:"to_department_id",placeholder:"-----",value:this.props.dataItem.to_department})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("type")),e.createElement(p,{key:t.state.reset+"to_type",ref:"to_type",name:"to_type",placeholder:"-----",data:i,value:this.props.dataItem.to_type})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("position")),e.createElement(p,{key:t.state.reset+"to_position_id",ref:"to_position_id",name:"to_position_id",placeholder:"-----",data:a,value:this.props.dataItem.to_position})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("note")),e.createElement("input",{ref:"note",key:t.state.reset,name:"note",type:"text",defaultValue:this.props.dataItem.note})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("time")),e.createElement("input",{defaultValue:moment().unix(),ref:"from_date",name:"from_date",type:"hidden"}),e.createElement("input",{defaultValue:moment().add(30,"days").unix(),ref:"to_date",name:"to_date",type:"hidden"}),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(g,{options:{format:"DD/MM/YYYY",startDate:s,endDate:u,timePicker:!0,identifier:"daterange",opens:"left",applyClass:"ui button green",cancelClass:"ui button secondary"},callBack:function(n,a,i){$(e.findDOMNode(t.refs.from_date)).val(n.unix()),$(e.findDOMNode(t.refs.to_date)).val(a.unix())}}))),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("File")),e.createElement("div",{className:"comment"},e.createElement("div",{className:"content"},e.createElement("input",{key:t.state.reset+"file",type:"file",ref:"fileinput",id:r,name:"ffile",multiple:"multiple"})),e.createElement("div",{id:"mailfile"},e.createElement(_,{files:this.props.dataItem.filedetail})))))))),e.createElement("div",{className:"actions"},e.createElement("span",{className:"ui noborder basic button cancel",onClick:this.progreslist},l.t("close")),e.createElement("button",{className:"ui teal button",onClick:this.save},l.t("save")))))}});return y}),define("language/employeemore",["baselanguage"],function(e){var t={vn:{employeemore:"Sơ yếu lý lịch",birth_place:"Nơi sinh",birth_day:"Ngày sinh",origin_place:"Quê quán",ethnic_group:"Dân tộc",religious:"Tôn giáo",normal_address:"Địa chỉ thường trú",temporary_address:"Địa chỉ tạm trú",tax_number:"Mã số thuế",social:"Thông tin thẻ",social_number:"Số CMND",social_number_date:"Ngày cấp CMND",social_number_address:"Nơi cấp CMND",education_level:"Trình độ văn hóa",academic_level:"Trình độ học vấn",professional:"Chuyên ngành",foreign_language:"Ngoại ngữ",computer:"Trình độ tin học",health:"Sức khỏe",weight:"Cân nặng",height:"Chiều cao",ensurance_number:"Số bảo hiểm",ensurance_date:"Ngày tham gia bảo hiểm",error_office_id_notfound:"Mã văn phòng không hợp lệ",error_employee_internal_id_not_valid:"Internal ID không hợp lệ",ensurance_address:"Địa chỉ đăng ký",ensurance_hospital:"Nơi khám chữa bệnh",employee_import_info_content:'Upload tập tin Excel với định dạng sau:<br /><a href="/files/employeemore-import-format.xls">&raquo; Nhấn vào đây để tải file mẫu</a>',employee_import_info_title:"Import tập tin Excel",workspace:"Làm việc tại ",title:"Tiêu đề ",time:"Thời gian",office:"Chuyển trụ sở",department:"Chuyển phòng ban",datecreated:"Ngày tạo",email:"Email",internalid:"Mã nội bộ",jobtitle:"Chuyển chức vụ",externalpartner:"Thành viên này chỉ là một đối tác bên ngoài.",discription:"(Đối tác bên ngoài chỉ có thể truy cập vào các dự án của mình, hoạt động & Chat)",discription2:"Nếu công ty của bạn / nhóm đang chạy (hoặc có) một hệ thống để quản lý tất cả các tài khoản, trường này sẽ lưu trữ ID người dùng của hệ thống hiện tại của bạn. (Cho phép A-Z, 0-9 ký tự). Vídụ",personal:"Cá nhân",contact:"Liên lạc",specialize:"Chuyên môn",filterOffice:"Tìm bởi văn phòng",filterOfficeAll:"Tất cả văn phòng",filterDepartment:"Tìm bởi phòng ban",filterDepartmentAll:"Tất cả phòng ban",filterPosition:"Tìm bởi chức vụ",filterPositionAll:"Tất cả chức vụ",load_more_employee:"Xem thêm",filter_not_found:"Không tìm thấy kết quả.",filter_type:"Loại hình công việc",filter_office_id:"Trụ sở",filter_department_id:"Phòng ban",filter_position_id:"Cấp bậc",filter_keyword:"Từ khóa",STATUS_UNACTIVATED:"Chưa hiệu lực",STATUS_ENABLE:"Bật",STATUS_DISABLE:"Tắt",STATUS_DELETED:"Xóa",POSITION_INTERNSHIP:"Mới tốt nghiệp / Thực tập",POSITION_STAFF:"Nhân viên",POSITION_GROUP_LEAD:"Trưởng nhóm / Giám sát",POSITION_ASSISTANT_MANAGER:"Phó phòng",POSITION_MANAGER:"Trưởng phòng",POSITION_SUBDIRECTOR:"Phó giám đốc",POSITION_DIRECTOR:"Giám đốc",POSITION_CEO:"Giám đốc điều hành",POSITION_SUBCHAIRMAN:"Phó chủ tịch",POSITION_CHAIRMAIN:"Chủ tịch",POSITION_STORE_ASSISTANT_MANAGER:"Trợ lý quản lý cửa hàng",POSITION_STORE_MANAGER:"Quản lý cửa hàng",TYPE_FULLTIME:"Nhân viên chính thức",TYPE_PARTTIME:"Bán thời gian",TYPE_PREFLIGHT:"Thử việc",TYPE_OVERTIME:"Làm thêm ngoài giờ",TYPE_SEASONAL:"Nhân viên thời vụ",TYPE_PROJECT:"Làm dự án",user_info_title:"Tạo thành viên",user_info_content:"Không thể tìm thấy bất kỳ người dùng với email được chọn. Sử dụng mẫu sau để tạo người dùng mới với email được chọn.",search:"Tìm kiếm...",employee:"Nhân viên",Password:"Mật khẩu",fullname:"Họ tên",status:"Trạng thái",workTimeReport:"Tổng hợp giờ công",employee_info_title:"Thông tin nhân viên",employee_info_content:"Thông tin chi tiết nhân viên",no_import_data:"Không có dữ liệu",heading_import_data:"Import nhân viên",checkinHistory:"Lịch sử chấm công",checkInOut:"Chấm công",position:"Chuyển cấp bậc",creator:"Người tạo",name:"Tên",note:"Ghi chú",close:"Đóng",phone:"Điện thoại",type:"Chuyển loại hình công việc",import_finished:"Import hoàn tất",file_excel:"Tập tin excel",upload_file:"Upload tập tin",error_email_invalid:"Email sai định dạng",error_email_required:"Vui lòng nhập Email",error_phone_required:"Vui lòng nhập số điện thoại",error_user_id_required:"Email chưa được đăng ký",error_user_id_notfound:"Email chưa được đăng ký, Vui lòng điền thông tin bên dưới để đăng ký",error_department_id_notfound:"Phòng ban không tồn tại",error_company_id_invalid:"Công ty không tồn tại",error_user_id_existed:"thành viên đã là nhân viên",error_job_title_is_require:"Vui lòng nhập chức vụ",error_import:"Đã xảy ra lỗi. Vui lòng thử lại!",error_data_invalid:"Không đúng định dạng file!",error_file_invalid:"Không đúng định dạng file!",error_file_required:"Vui lòng chọn file!",error_file_size:"Dữ liệu file lớn hơn 100mb!",error_fullname_required:"Vui lòng nhập họ tên!",error_email_existed:"Email đã được đăng ký!",error_password_too_short:"Mật khẩu quá ngắn (ít nhất 7 ký tự)!",error_interal_id_exist:"Internal ID đã tồn tại!",tab_syll:"Sơ yếu lý lịch",tab_hd:"Hợp đồng",tab_qtlav:"Quá trình làm việc",tab_tk:"Tài khoản",tab_cc:"Chấm công",tab_l:"Lương",tab_np:"Nghỉ phép",tab_ct:"Công tác",tab_ktkl:"Khen thưởng kỉ luật"},en:{employeemore:"Sơ yếu lý lịch",birth_place:"Nơi sinh",birth_day:"Ngày sinh",origin_place:"Quê quán",ethnic_group:"Dân tộc",religious:"Tôn giáo",normal_address:"Địa chỉ thường trú",temporary_address:"Địa chỉ tạm trú",tax_number:"Mã số thuế",social:"Thông tin thẻ",social_number:"Số CMND",social_number_date:"Ngày cấp CMND",social_number_address:"Nơi cấp CMND",education_level:"Trình độ văn hóa",academic_level:"Trình độ học vấn",professional:"Chuyên ngành",foreign_language:"Ngoại ngữ",computer:"Trình độ tin học",health:"Sức khỏe",weight:"Cân nặng",height:"Chiều cao",ensurance_number:"Số bảo hiểm",ensurance_date:"Ngày tham gia bảo hiểm",error_office_id_notfound:"Mã văn phòng không hợp lệ",error_employee_internal_id_not_valid:"Internal ID không hợp lệ",ensurance_address:"Địa chỉ đăng ký",ensurance_hospital:"Nơi khám chữa bệnh",employee_import_info_content:'Upload tập tin Excel với định dạng sau:<br /><a href="/files/employeemore-import-format.xls">&raquo; Nhấn vào đây để tải file mẫu</a>',employee_import_info_title:"Import tập tin Excel",workspace:"Làm việc tại ",title:"Tiêu đề ",time:"Thời gian",office:"Chuyển trụ sở",department:"Chuyển phòng ban",datecreated:"Ngày tạo",email:"Email",internalid:"Mã nội bộ",jobtitle:"Chuyển chức vụ",externalpartner:"Thành viên này chỉ là một đối tác bên ngoài.",discription:"(Đối tác bên ngoài chỉ có thể truy cập vào các dự án của mình, hoạt động & Chat)",discription2:"Nếu công ty của bạn / nhóm đang chạy (hoặc có) một hệ thống để quản lý tất cả các tài khoản, trường này sẽ lưu trữ ID người dùng của hệ thống hiện tại của bạn. (Cho phép A-Z, 0-9 ký tự). Vídụ",personal:"Cá nhân",contact:"Liên lạc",specialize:"Chuyên môn",filterOffice:"Tìm bởi văn phòng",filterOfficeAll:"Tất cả văn phòng",filterDepartment:"Tìm bởi phòng ban",filterDepartmentAll:"Tất cả phòng ban",filterPosition:"Tìm bởi chức vụ",filterPositionAll:"Tất cả chức vụ",load_more_employee:"Xem thêm",filter_not_found:"Không tìm thấy kết quả.",filter_type:"Loại hình công việc",filter_office_id:"Trụ sở",filter_department_id:"Phòng ban",filter_position_id:"Cấp bậc",filter_keyword:"Từ khóa",STATUS_UNACTIVATED:"Chưa hiệu lực",STATUS_ENABLE:"Bật",STATUS_DISABLE:"Tắt",STATUS_DELETED:"Xóa",POSITION_INTERNSHIP:"Mới tốt nghiệp / Thực tập",POSITION_STAFF:"Nhân viên",POSITION_GROUP_LEAD:"Trưởng nhóm / Giám sát",POSITION_ASSISTANT_MANAGER:"Phó phòng",POSITION_MANAGER:"Trưởng phòng",POSITION_SUBDIRECTOR:"Phó giám đốc",POSITION_DIRECTOR:"Giám đốc",POSITION_CEO:"Giám đốc điều hành",POSITION_SUBCHAIRMAN:"Phó chủ tịch",POSITION_CHAIRMAIN:"Chủ tịch",POSITION_STORE_ASSISTANT_MANAGER:"Trợ lý quản lý cửa hàng",POSITION_STORE_MANAGER:"Quản lý cửa hàng",TYPE_FULLTIME:"Nhân viên chính thức",TYPE_PARTTIME:"Bán thời gian",TYPE_PREFLIGHT:"Thử việc",TYPE_OVERTIME:"Làm thêm ngoài giờ",TYPE_SEASONAL:"Nhân viên thời vụ",TYPE_PROJECT:"Làm dự án",user_info_title:"Tạo thành viên",user_info_content:"Không thể tìm thấy bất kỳ người dùng với email được chọn. Sử dụng mẫu sau để tạo người dùng mới với email được chọn.",search:"Tìm kiếm...",employee:"Nhân viên",Password:"Mật khẩu",fullname:"Họ tên",status:"Trạng thái",workTimeReport:"Tổng hợp giờ công",employee_info_title:"Thông tin nhân viên",employee_info_content:"Thông tin chi tiết nhân viên",no_import_data:"Không có dữ liệu",heading_import_data:"Import nhân viên",checkinHistory:"Lịch sử chấm công",checkInOut:"Chấm công",position:"Chuyển cấp bậc",creator:"Người tạo",name:"Tên",note:"Ghi chú",close:"Đóng",phone:"Điện thoại",type:"Chuyển loại hình công việc",import_finished:"Import hoàn tất",file_excel:"Tập tin excel",upload_file:"Upload tập tin",error_email_invalid:"Email sai định dạng",error_email_required:"Vui lòng nhập Email",error_phone_required:"Vui lòng nhập số điện thoại",error_user_id_required:"Email chưa được đăng ký",error_user_id_notfound:"Email chưa được đăng ký, Vui lòng điền thông tin bên dưới để đăng ký",error_department_id_notfound:"Phòng ban không tồn tại",error_company_id_invalid:"Công ty không tồn tại",error_user_id_existed:"thành viên đã là nhân viên",error_job_title_is_require:"Vui lòng nhập chức vụ",error_import:"Đã xảy ra lỗi. Vui lòng thử lại!",error_data_invalid:"Không đúng định dạng file!",error_file_invalid:"Không đúng định dạng file!",error_file_required:"Vui lòng chọn file!",error_file_size:"Dữ liệu file lớn hơn 100mb!",error_fullname_required:"Vui lòng nhập họ tên!",error_email_existed:"Email đã được đăng ký!",error_password_too_short:"Mật khẩu quá ngắn (ít nhất 7 ký tự)!",error_interal_id_exist:"Internal ID đã tồn tại!",tab_syll:"Sơ yếu lý lịch",tab_hd:"Hợp đồng",tab_qtlav:"Quá trình làm việc",tab_tk:"Tài khoản",tab_cc:"Chấm công",tab_l:"Lương",tab_np:"Nghỉ phép",tab_ct:"Công tác",tab_ktkl:"Khen thưởng kỉ luật"}};return new e({lang:t})}),define("components/employeemore/employee-detail-more-item",["react","helper","eventbus","pref","role","models/employeeprogress","models/user","models/employee","models/department","models/office","language/employeeprogress","language/default","components/filestrip","components/datetime"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"EmployeeProgressComponent",getUserName:function(t,n){var a=this;t>0&&new o({id:t}).fetch({success:function(t,i){$(e.findDOMNode(a.refs[n])).append(i.fullname)},complete:function(){$("#body-loader").removeClass("active")}})},checkPermisson:function(){var t=this,n=i.hasById(262),r=["btnedit"];r.length&&$.each(r,function(i,r){n?t.props.data.creator_id!=a.get("uid")&&$(e.findDOMNode(t.refs[r])).attr("href","#employeeprogress/detail/"+t.props.data.id).html('<i className="icon tc-info"></i> '+u.t("detail")):$(e.findDOMNode(t.refs[r])).attr("href","#employeeprogress/detail/"+t.props.data.id).html('<i className="icon tc-info"></i> '+u.t("detail"))})},showEditActionSheet:function(e){e.preventDefault();var n={buttons:[{text:u.t("update"),href:"#employeeprogress/edit/"+this.props.data.id}]};t.showActionSheet(n)},_cancelDelete:function(e){e.preventDefault(),$(this.refs.delete.getDOMNode()).popup("hide")},_delete:function(e){e.preventDefault();var a=this;$(this.refs.delete.getDOMNode()).popup("hide"),new r({id:this.props.data.id}).destroy({success:function(){t.showSuccess(u.t("delete_success")),n.trigger("progress:delete",a.props.data.id)},error:function(){t.showError(u.t("delete_fail"))},complete:function(){}})},getDeparment:function(t,n,a){var i=this;$(e.findDOMNode(i.refs[a])).empty().append("<code> - </code>"),t>0&&new l({id:t}).fetch({success:function(t,n){$(e.findDOMNode(i.refs[a])).empty().append(n.name)}}),n>0&&new l({id:n}).fetch({success:function(t,n){var r=" <i class='icon tc-arrowright'></i> ";$(e.findDOMNode(i.refs[a])).append(r+"<code>"+n.name+"</code>")}})},getOffice:function(t,n,a){var i=this;$(e.findDOMNode(i.refs[a])).empty().append("<code> - </code>"),t>0&&new c({id:t}).fetch({success:function(t,n){$(e.findDOMNode(i.refs[a])).empty().append("<code>"+n.name+"</code>")}}),n>0&&new c({id:n}).fetch({success:function(t,n){var r=" <i class='icon tc-arrowright'></i> ";$(e.findDOMNode(i.refs[a])).append(r+"<code>"+n.name+"</code>")}})},getPosition:function(){var t="-",n=this;if(this.props.data.from_position>-1&&(t="<code>"+(new s).getPosition(this.props.data.from_position).text+"</code>"),this.props.data.to_position>-1){var a=" <i class='icon tc-arrowright'></i> ";t+=a+"<code>"+(new s).getPosition(this.props.data.to_position).text+"</code>"}if(this.props.data.from_position==this.props.data.to_position)var t="-";$(e.findDOMNode(n.refs.position)).empty().append(t)},getType:function(){var t="-",n=this;if(this.props.data.from_type&&(t="<code>"+d.t("TYPE_"+(new s).getType(this.props.data.from_type).text)+"</code>"),this.props.data.to_type){var a=" <i class='icon tc-arrowright'></i> ";t+=a+"<code>"+d.t("TYPE_"+(new s).getType(this.props.data.to_type).text)+"</code>"}$(e.findDOMNode(n.refs.type)).empty().append(t)},getjobtitle:function(){var t="-",n=this;if(this.props.data.from_jobtitle&&(t="<code>"+this.props.data.from_jobtitle+"</code>"),this.props.data.to_jobtitle){var a=" <i class='icon tc-arrowright'></i> ";t+=a+"<code>"+this.props.data.to_jobtitle+"</code>"}$(e.findDOMNode(n.refs.jobtitle)).empty().append(t)},getdate:function(){var t="-",n=this;if(this.props.data.from_date&&(t="<code>"+moment.unix(this.props.data.from_date).format("DD/MM/YYYY")+"</code>"),this.props.data.to_date){var a=" <i class='icon tc-arrowright'></i> ";t+=a+"<code>"+moment.unix(this.props.data.to_date).format("DD/MM/YYYY")+"</code>"}$(e.findDOMNode(n.refs.date)).empty().append(t)},showPicture:function(){console.log("aaa");var t=this,n=[];if(""!=this.props.data.file_id_list){var a=this.props.data.file_id_list.split(",");a.map(function(e,t){n.push(e)})}n.length&&($(e.findDOMNode(this.refs.btnpicture)).hide(),e.render(e.createElement(m,{files:n}),e.findDOMNode(t.refs.picture)))},progressedit:function(){n.trigger("employeedetail:progressedit",this.props.data)},componentDidMount:function(){$(this.refs.delete.getDOMNode()).popup({on:"click",popup:this.refs["delete-confirm"].getDOMNode()}),this.getUserName(this.props.data.user_id,"employee"),this.getUserName(this.props.data.creator_id,"creator"),this.getOffice(this.props.data.from_office,this.props.data.to_office,"office"),this.getDeparment(this.props.data.from_department,this.props.data.to_department,"department"),this.getPosition(),this.getType(),this.getjobtitle(),this.getdate(),this.checkPermisson()},componentDidUpdate:function(e,t){this.checkPermisson()},renderMobile:function(){var n=(new r).getStatus(this.props.data.status),a=((new s).getSource(this.props.data.source).text,(new s).getType(this.props.data.to_type).text);return e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading"},this.props.data.title,e.createElement("span",{className:"ui mini basic label pull-right "+n.color},t.smartNumberFormat(this.props.data.total))),e.createElement("div",{className:"mitemmeta"},e.createElement("span",{ref:"employee"})," · ",d.t(a),e.createElement("br",null)," ",e.createElement(p,{ts:this.props.data.date_created}))))},renderDesktop:function(){var t=((new r).getStatus(this.props.data.status),"-");return this.props.data.to_type&&(t=(new s).getType(this.props.data.to_type).text),e.createElement("tr",null,e.createElement("td",null,this.props.data.title),e.createElement("td",{ref:"office"}),e.createElement("td",{ref:"department"}),e.createElement("td",{ref:"jobtitle"}),e.createElement("td",{ref:"type"}),e.createElement("td",{ref:"position"}),e.createElement("td",{ref:"date"}),e.createElement("td",{ref:"creator"}),e.createElement("td",null,e.createElement("div",{id:"mailfile"},e.createElement(m,{files:this.props.data.filedetail}))),e.createElement("td",null,moment.unix(this.props.data.date_created).format("HH:mm, DD/MM/YYYY")),e.createElement("td",null,e.createElement("a",{onClick:this.progressedit,className:"ui noborder icon basic button mini"},e.createElement("i",{className:"icon tc-pencil"})),e.createElement("a",{style:{width:"36px"},ref:"delete",className:"ui noborder icon basic button mini"},e.createElement("i",{className:"icon tc-trash"})),e.createElement("div",{ref:"delete-confirm",className:"ui flowing popup top left transition hidden"},e.createElement("h4",null,u.t("delete_confirm")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:this._delete,className:"ui button mini red",href:"#"},u.t("delete_button")),e.createElement("a",{onClick:this._cancelDelete,className:"ui button mini",href:"#"},u.t("cancel_button"))))))},render:function(){return this.renderDesktop()}});return h}),define("components/employeemore/employee-detail-more",["react","eventbus","basecontroller","pref","role","helper","setting","language/employeemore","language/default","querystring","collections/employeemore","models/employeemore","models/user","components/mixin/listsearch","components/headingfull","components/employeemore/employee-detail-more-item","components/filter-employee","components/semantic-datepicker","components/mixin/listsearch","components/headingfull","components/search-keyword"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,p,h,v){var y=e.createClass({displayName:"DetailEmployeeMoreComponent",getInitialState:function(){var e=this;return{hmac:"",dataMore:this.props.dataMore,models:[],length:0,total:0,permission:e.checkPermisson(),currentpage:c.get("page")}},setData:function(){var t=this;jQuery.isEmptyObject(this.state.dataMore)||(items=this.state.dataMore,$(e.findDOMNode(t.refs.birth_place)).val(items.birth_place),$(e.findDOMNode(t.refs.origin_place)).val(items.origin_place),$(e.findDOMNode(t.refs.ethnic_group)).val(items.ethnic_group),$(e.findDOMNode(t.refs.religious)).val(items.religious),$(e.findDOMNode(t.refs.normal_address)).val(items.normal_address),$(e.findDOMNode(t.refs.temporary_address)).val(items.temporary_address),$(e.findDOMNode(t.refs.tax_number)).val(items.tax_number),$(e.findDOMNode(t.refs.social_number)).val(items.social_number),$(e.findDOMNode(t.refs.social_number_address)).val(items.social_number_address),$(e.findDOMNode(t.refs.education_level)).val(items.education_level),$(e.findDOMNode(t.refs.academic_level)).val(items.academic_level),$(e.findDOMNode(t.refs.professional)).val(items.professional),$(e.findDOMNode(t.refs.foreign_language)).val(items.foreign_language),$(e.findDOMNode(t.refs.computer)).val(items.computer),$(e.findDOMNode(t.refs.health)).val(items.health),$(e.findDOMNode(t.refs.weight)).val(items.weight),$(e.findDOMNode(t.refs.height)).val(items.height),$(e.findDOMNode(t.refs.ensurance_number)).val(items.ensurance_number),$(e.findDOMNode(t.refs.ensurance_address)).val(items.ensurance_address),$(e.findDOMNode(t.refs.ensurance_hospital)).val(items.ensurance_hospital))},savedata:function(t){var n=$(".ui.form",this.getDOMNode());n.addClass("loading");var i=this,o=this.refs.ensurance_date.getDatePicker().element.context.value,s=this.refs.social_number_date.getDatePicker().element.context.value,c=moment(this.refs.birth_day.getDatePicker().element.context.value,"DD/MM/YYYY").format("YYYY-MM-DD");data={company_id:a.get("cid"),creator_id:a.get("uid"),employee_id:this.props.data.id,birth_place:$(e.findDOMNode(i.refs.birth_place)).val(),birth_day:c,origin_place:$(e.findDOMNode(i.refs.origin_place)).val(),ethnic_group:$(e.findDOMNode(i.refs.ethnic_group)).val(),religious:$(e.findDOMNode(i.refs.religious)).val(),normal_address:$(e.findDOMNode(i.refs.normal_address)).val(),temporary_address:$(e.findDOMNode(i.refs.temporary_address)).val(),tax_number:$(e.findDOMNode(i.refs.tax_number)).val(),social_number:$(e.findDOMNode(i.refs.social_number)).val(),social_number_date:moment(s,"DD/MM/YYYY").unix(),social_number_address:$(e.findDOMNode(i.refs.social_number_address)).val(),education_level:$(e.findDOMNode(i.refs.education_level)).val(),academic_level:$(e.findDOMNode(i.refs.academic_level)).val(),professional:$(e.findDOMNode(i.refs.professional)).val(),foreign_language:$(e.findDOMNode(i.refs.foreign_language)).val(),computer:$(e.findDOMNode(i.refs.computer)).val(),health:$(e.findDOMNode(i.refs.health)).val(),weight:$(e.findDOMNode(i.refs.weight)).val(),height:$(e.findDOMNode(i.refs.height)).val(),ensurance_number:$(e.findDOMNode(i.refs.ensurance_number)).val(),ensurance_date:moment(o,"DD/MM/YYYY").unix(),ensurance_address:$(e.findDOMNode(i.refs.ensurance_address)).val(),ensurance_hospital:$(e.findDOMNode(i.refs.ensurance_hospital)).val()},$(".prompt").remove(),$(".error").removeClass("error"),t.save(data,{success:function(e,t){i.setState({dataMore:t}),r.showSuccess(l.t("update_success"))},error:function(e,t){r.showError(l.t("error_update"))},complete:function(){n.removeClass("loading")}})},loadblock:function(t){var n=$(t.target),a=$(e.findDOMNode(this.refs["menu-more"])).find(".active"),i=n.attr("data-block"),r=a.attr("data-block");n.is("a")||(n=$(t.target).parent(),i=n.attr("data-block")),i!=r&&($(e.findDOMNode(this.refs[i])).show(),$(e.findDOMNode(this.refs[r])).hide(),n.addClass("active"),a.removeClass("active"))},save:function(){if(this.state.dataMore.id>0)var e=new u({id:this.state.dataMore.id});else var e=new u;this.savedata(e)},checkPermisson:function(){return i.hasById(262)},componentWillMount:function(){},componentDidUpdate:function(){this.setData()},componentDidMount:function(){var e=this;this.setState({dataMore:this.state.dataMore}),$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e.save()}}),$(".step").attr("style","cursor:pointer")},showaddprogress:function(){t.trigger("employeedetail:progressadd")},componentDidUpdate:function(){},render:function(){var t=this,n={format:"DD/MM/YYYY",singleDatePicker:!0,showDropdowns:!0,applyClass:"ui button green",cancelClass:"ui button secondary"},a={},i={},r={};a.startDate=moment.unix(moment().unix()).format("DD/MM/YYYY"),i.startDate=moment.unix(moment().unix()).format("DD/MM/YYYY"),r.startDate=moment.unix(moment().unix()).format("DD/MM/YYYY"),this.state.dataMore.ensurance_date>0&&(a.startDate=moment.unix(this.state.dataMore.ensurance_date).format("DD/MM/YYYY")),this.state.dataMore.social_number_date>0&&(i.startDate=moment.unix(this.state.dataMore.social_number_date).format("DD/MM/YYYY")),$.isEmptyObject(this.state.dataMore)||"0000-00-00"==this.state.dataMore.birth_day||""==this.state.dataMore.birth_day||(r.startDate=moment(this.state.dataMore.birth_day,"YYYY-MM-DD").format("DD/MM/YYYY")),a=$.extend(a,n),i=$.extend(i,n),r=$.extend(r,n);var o="";return this.state.permission||(o=" disabled"),e.createElement("div",{className:"ui grid"},e.createElement("div",{className:"two wide column",ref:"menu-more"},e.createElement("div",{className:"ui vertical labeled icon menu"},e.createElement("a",{className:"item active","data-block":"blockprivate",onClick:this.loadblock},e.createElement("i",{className:"icon tc-user"}),s.t("personal")),e.createElement("a",{className:"item ","data-block":"blockcontact",onClick:this.loadblock},e.createElement("i",{className:"icon tc-home"}),s.t("contact")),e.createElement("a",{className:"item","data-block":"blockstudy",onClick:this.loadblock},e.createElement("i",{
className:"icon tc-briefcase"}),s.t("specialize")),e.createElement("a",{className:"item ","data-block":"blockhealth",onClick:this.loadblock},e.createElement("i",{className:"icon tc-heartfill"}),s.t("health")))),e.createElement("div",{className:"fourteen wide column",id:"employeedetail"},e.createElement("div",{className:"ui segment"},e.createElement("div",{className:"ui segment",style:{paddingTop:"8px",paddingBottom:"8px"}},e.createElement("form",{className:"ui form"},e.createElement("div",{ref:"blockprivate"},e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("birth_place"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"birth_place",name:"birth_place",type:"text",defaultValue:t.props.dataMore.birth_place}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("origin_place"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"origin_place",name:"origin_place",type:"text",defaultValue:t.props.dataMore.origin_place}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("ethnic_group"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"ethnic_group",name:"ethnic_group",type:"text",defaultValue:t.props.dataMore.ethnic_group}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("religious"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"religious",name:"religious",type:"text",defaultValue:t.props.dataMore.religious}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("normal_address"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"normal_address",name:"normal_address",type:"text",defaultValue:t.props.dataMore.normal_address}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("temporary_address"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"temporary_address",name:"temporary_address",type:"text",defaultValue:t.props.dataMore.temporary_address}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("birth_day"))),e.createElement("div",{className:"eight wide field"},e.createElement(_,{ref:"birth_day",options:r})))),e.createElement("div",{ref:"blockhealth",style:{display:"none"}},e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("ensurance_number"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"ensurance_number",name:"ensurance_number",type:"text",defaultValue:t.props.dataMore.ensurance_number}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("ensurance_date"))),e.createElement("div",{className:"eight wide field"},e.createElement(_,{ref:"ensurance_date",key:moment().unix(),options:a}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("ensurance_address"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"ensurance_address",name:"ensurance_address",type:"text",defaultValue:t.props.dataMore.ensurance_address}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("ensurance_hospital"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"ensurance_hospital",name:"ensurance_hospital",type:"text",defaultValue:t.props.dataMore.ensurance_hospital}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("health"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"health",name:"health",type:"text",defaultValue:t.props.dataMore.health}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("weight"))),e.createElement("div",{className:"eight wide field"},e.createElement("div",{className:"ui right labeled input"},e.createElement("input",{ref:"weight",name:"weight",type:"text",defaultValue:t.props.dataMore.weight}),e.createElement("div",{className:"ui basic label"},"kg")))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("height"))),e.createElement("div",{className:"eight wide field"},e.createElement("div",{className:"ui right labeled input"},e.createElement("input",{ref:"height",name:"height",type:"text",defaultValue:t.props.dataMore.height}),e.createElement("div",{className:"ui basic label"},"cm"))))),e.createElement("div",{ref:"blockcontact",style:{display:"none"}},e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("tax_number"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"tax_number",name:"tax_number",type:"text",defaultValue:t.props.dataMore.tax_number}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("social_number"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"social_number",name:"social_number",type:"text",defaultValue:t.props.dataMore.social_number}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("social_number_address"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"social_number_address",name:"social_number_address",type:"text",defaultValue:t.props.dataMore.social_number_address}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("social_number_date"))),e.createElement("div",{className:"eight wide field"},e.createElement(_,{ref:"social_number_date",options:i})))),e.createElement("div",{ref:"blockstudy",style:{display:"none"}},e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("foreign_language"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"foreign_language",name:"foreign_language",type:"text",defaultValue:t.props.dataMore.foreign_language}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("computer"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"computer",name:"computer",type:"text",defaultValue:t.props.dataMore.computer}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("education_level"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"education_level",name:"education_level",type:"text",defaultValue:t.props.dataMore.education_level}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("academic_level"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"academic_level",name:"academic_level",type:"text",defaultValue:t.props.dataMore.academic_level}))),e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null,s.t("professional"))),e.createElement("div",{className:"eight wide field"},e.createElement("input",{ref:"professional",name:"professional",type:"text",defaultValue:t.props.dataMore.professional})))),e.createElement("div",{className:"field"+o,style:{marginBottom:"8px"}},e.createElement("div",{className:"two fields"},e.createElement("div",{className:"two wide field"},e.createElement("label",null," ")),e.createElement("div",{className:"eight wide field"},e.createElement("button",{className:"ui teal button ",type:"submit"},l.t("save"))))))))))}});return y}),define("components/employeecontract/employee-detail-contract-item",["react","helper","eventbus","companysetting","pref","role","models/employeecontract","models/user","models/employee","models/department","models/office","models/file","language/employeecontract","language/default","components/filestrip","components/datetime"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"EmployeeProgressComponent",getUserName:function(t,n){var a=this;t>0&&new s({id:t}).fetch({success:function(t,i){$(e.findDOMNode(a.refs[n])).append(i.fullname)},complete:function(){$("#body-loader").removeClass("active")}})},checkPermisson:function(){var t=this,n=r.hasById(262),a=["btnedit"];a.length&&$.each(a,function(a,r){n?t.props.data.creator_id!=i.get("uid")&&$(e.findDOMNode(t.refs[r])).attr("href","#employeeprogress/detail/"+t.props.data.id).html('<i className="icon tc-info"></i> '+p.t("detail")):$(e.findDOMNode(t.refs[r])).attr("href","#employeeprogress/detail/"+t.props.data.id).html('<i className="icon tc-info"></i> '+p.t("detail"))})},showEditActionSheet:function(e){e.preventDefault();var n={buttons:[{text:p.t("update"),href:"#employeeprogress/edit/"+this.props.data.id}]};t.showActionSheet(n)},_cancelDelete:function(e){e.preventDefault(),$(this.refs.delete.getDOMNode()).popup("hide")},_delete:function(e){e.preventDefault();var a=this;$(this.refs.delete.getDOMNode()).popup("hide"),new o({id:this.props.data.id}).destroy({success:function(){t.showSuccess(p.t("delete_success")),n.trigger("employeecontract:delete",a.props.data.id)},error:function(){t.showError(p.t("delete_fail"))},complete:function(){}})},update:function(n){data=n.item;var a=this;switch(n.type){case"signer":this.props.data.signer>0&&data.id==this.props.data.signer&&$(e.findDOMNode(a.refs.signer)).empty().append(e.renderToString(e.createElement("img",{className:"ui avatar image",src:t.getAvatarPath(data.avatar)}))).append(data.fullname)}},showPicture:function(){console.log("aaa");var t=this,n=[];if(""!=this.props.data.file_id_list){var a=this.props.data.file_id_list.split(",");a.map(function(e,t){n.push(e)})}n.length&&($(e.findDOMNode(this.refs.btnpicture)).hide(),e.render(e.createElement(h,{files:n}),e.findDOMNode(t.refs.picture)))},progressedit:function(e){e.preventDefault(),n.trigger("employeedetail:showeditmodal",this.props.data,"contract")},renderFile:function(){var t=this.props.data.filedetail;if(t){var n="";t.map(function(e,t){var a=new u(e),i=a.getDownloadUrl(),r=e.title;n+='<a class="icon tc-attach" href="'+i+'" title="'+r+'"></a>'}),$(e.findDOMNode(this.refs.filelist)).html(n)}},componentWillUnmount:function(){n.off("employeecontractitem:update",this.update)},componentDidMount:function(){$(this.refs.delete.getDOMNode()).popup({on:"click",popup:this.refs["delete-confirm"].getDOMNode()}),n.on("employeecontractitem:update",this.update),this.checkPermisson(),this.renderFile(),$(e.findDOMNode(this.refs.salary_net)).add($(e.findDOMNode(this.refs.salary_gross))).autoNumeric(a.numberoption())},componentDidUpdate:function(){this.checkPermisson(),this.renderFile(),$(e.findDOMNode(this.refs.salary_net)).autoNumeric("set",this.props.data.salary_net||0),$(e.findDOMNode(this.refs.salary_gross)).autoNumeric("set",this.props.data.salary_gross||0)},renderMobile:function(){var t=((new l).getSource(this.props.data.source).text,(new l).getType(this.props.data.to_type).text);return e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemmeta"},e.createElement("span",{ref:"employee"})," · ",m.t(t),e.createElement("br",null)," ",e.createElement(f,{ts:this.props.data.date_created}))))},renderDesktop:function(){var t="-";return t=(new o).getType(this.props.data.type).text,e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.progressedit},this.props.data.name)),e.createElement("td",null,this.props.data.number),e.createElement("td",null,t),e.createElement("td",{ref:"salary_gross"},this.props.data.salary_gross),e.createElement("td",{ref:"salary_net"},this.props.data.salary_net),e.createElement("td",{ref:"time"},moment.unix(this.props.data.date_started).format("DD/MM/YYYY")," - ",moment.unix(this.props.data.date_ended).format("DD/MM/YYYY")),e.createElement("td",{ref:"signer"}),e.createElement("td",{ref:"filelist"}),e.createElement("td",{className:this.props.manage?"":"hide"},e.createElement("a",{href:"#",onClick:this.progressedit,className:"ui noborder icon basic button mini"},e.createElement("i",{className:"icon tc-pencil"})),e.createElement("a",{style:{width:"36px"},ref:"delete",className:"ui noborder icon basic button mini"},e.createElement("i",{className:"icon tc-trash"})),e.createElement("div",{ref:"delete-confirm",className:"ui flowing popup top left transition hidden"},e.createElement("h4",null,p.t("delete_confirm")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:this._delete,className:"ui button mini red",href:"#"},p.t("delete_button")),e.createElement("a",{onClick:this._cancelDelete,className:"ui button mini",href:"#"},p.t("cancel_button"))))))},render:function(){return this.renderDesktop()}});return g}),define("components/employeecontract/employee-detail-contract",["react","basecontroller","eventbus","pref","role","helper","querystring","language/employeecontract","language/default","models/employee","collections/employeecontract","models/department","collections/department","models/office","models/user","collections/office","components/mixin/listsearch","components/querytag","components/querytaglist","components/employeecontract/employee-detail-contract-item","components/headingfull","components/floatpagination","components/select/office","components/select/department","components/select/position","components/select/employeetype","components/filtersidebar"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T){var x=e.createClass({displayName:"EmployeeContractList",mixins:[g],getInitialState:function(){return{total:"--",items:[],length:0,currentpage:o.get("page")}},filters:{keyword:null,office_id:null,department_id:null,position_id:null,type:null,date_started:null,date_ended:null},loadFilterQueryTagData:function(e){var t=null;switch(e){case"department_id":t=new u;break;case"office_id":t=new p;break;case"position_id":var a=(new c).getPosition(this.filters[e]),i=s.t(a.text);n.trigger("querytag:updatetext",{field:e,text:i});break;case"type":var r=(new c).getType(this.filters[e]),l=s.t("TYPE_"+r.text);n.trigger("querytag:updatetext",{field:e,text:l})}null!=t&&o.requestFilterQueryTag(t,this.filters,e)},loadDepartments:function(){var e=[];$.each(this.state.items,function(t,n){e.push(n.department_id)}),(new m).getFromIdList({ids:e,success:function(e){$.each(e.items,function(e,t){n.trigger("employeecontractitem:update",{type:"department",item:t})})}})},loadOffices:function(){var e=[];$.each(this.state.items,function(t,n){e.push(n.office_id)}),(new f).getFromIdList({ids:e,success:function(e){$.each(e.items,function(e,t){n.trigger("employeecontractitem:update",{type:"office",item:t})})}})},loadSinger:function(){$.each(this.state.items,function(e,t){new h({id:t.signer}).fetch({success:function(e,t){n.trigger("employeecontractitem:update",{type:"signer",item:t})}})})},_loadData:function(){var e=this;$("#body-loader").addClass("active");var t={company_id:a.get("cid"),user_id:e.props.data.user_id,limit:30,is_not_deleted:1,ignore_group:1,page:this.state.currentpage,office_id:this.filters.office_id,department_id:this.filters.department_id,position_id:this.filters.position_id,type:this.filters.type,sort_by:"id",sort_type:"DESC",keyword:o.get("keyword")};(new d).fetch({data:t,success:function(t,n){e.setState(n)},complete:function(){$("#body-loader").removeClass("active")}})},remove:function(e){var t=this.state.items;t.map(function(n,a){n.id==e&&t.splice(a,1)}),this.setState({items:t,total:t.length})},updatelist:function(e,t){var n=this.state.items;switch(t){case"add":n.unshift(e);break;default:n.map(function(t,a){t.id==e.id&&(n[a]=e)})}this.setState({items:n})},checkPermisson:function(){var t=this,n=i.hasById(262),a=["btnadd","setting-checkin","manage"];a.length&&$.each(a,function(a,i){n||$(e.findDOMNode(t.refs[i])).hide()})},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),office_id:this.refs.filteroffice.val(),department_id:this.refs.filterdepartment.val(),position_id:this.refs.filterposition.val(),type:this.refs.filtertype.val()};this.doFilters(e)},componentWillUnmount:function(){n.off("employeecontract:delete",this.remove),n.off("employeecontract:edit",this.updatelist),n.off("employeecontract:add",this.updatelist)},componentWillMount:function(){o.initFilter(this.filters)},componentDidMount:function(){this._loadData(),this.checkPermisson(),n.on("employeecontract:delete",this.remove),n.on("employeecontract:edit",this.updatelist),n.on("employeecontract:add",this.updatelist),(new t).setTcScrollMinHeight()},showModal:function(){n.trigger("employeedetail:showaddmodal","contract")},componentDidUpdate:function(){this.loadSinger(),this.checkPermisson()},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,s.t("name")),e.createElement("th",null,s.t("number")),e.createElement("th",null,s.t("type")),e.createElement("th",null,s.t("salary_gross")),e.createElement("th",null,s.t("salary_net")),e.createElement("th",null,s.t("date_started")," "),e.createElement("th",null,s.t("signer")),e.createElement("th",null,s.t("File")),e.createElement("th",{className:"col_action_2button"}))},render:function(){return e.createElement("div",{className:"ui segments"},e.createElement("div",{style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{ref:"employeetable",id:"employeetable",style:{margin:0},className:r.tableclass()},e.createElement("thead",null,this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.items.map(function(t,n){return e.createElement(y,{manage:i.hasById(262),key:t.id,data:t})}))),e.createElement("br",null),e.createElement("a",{className:"ui mini grey labeled icon button",ref:"btnadd",onClick:this.showModal},e.createElement("i",{style:{marginRight:"0px"},className:"icon tc-plus",title:s.t("add_hd")}),s.t("add_hd"))))}});return x}),define("components/employeecontract/employee-detail-contract-add",["react","backbone","eventbus","companysetting","helper","pref","cacheddata","language/employeecontract","language/employee","language/default","models/employeecontract","models/employee","models/user","models/file","components/select-status","components/select-office","components/select-department","components/select-employee","components/semantic-datepicker","components/tinymce"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y){var E=e.createClass({displayName:"EmployeeProgressAddComponent",getInitialState:function(){return{modelitems:[],reset:1}},save:function(){var t=$(".ui.form",this.getDOMNode());t.addClass("loading");var a=this,o=[];$("#uploadifive-ffile-"+this.props.data.id+"-queue").find(".attachedfileid").each(function(){o.push($(this).attr("data-id"))});var l=moment(this.refs.date_ended.getDatePicker().element.context.value,"DD/MM/YYYY").unix(),u=moment(this.refs.date_started.getDatePicker().element.context.value,"DD/MM/YYYY").unix(),m=moment(this.refs.date_signed.getDatePicker().element.context.value,"DD/MM/YYYY").unix();o=o.filter(function(e){return void 0!=e});var p=$(e.findDOMNode(a.refs.signer_position)).dropdown("get value");console.log(p),$(".prompt").remove(),$(".error").removeClass("error"),(new d).save({company_id:r.get("cid"),creator_id:r.get("uid"),name:$(e.findDOMNode(a.refs.name)).val(),number:$(e.findDOMNode(a.refs.number)).val(),date_started:u,date_ended:l,employee_id:a.props.data.id,salary_type:$(e.findDOMNode(a.refs.salary_type)).dropdown("get value"),type:$(e.findDOMNode(a.refs.type)).dropdown("get value"),salary_gross:parseFloat($(e.findDOMNode(a.refs.salary_gross)).autoNumeric("get")),salary_net:parseFloat($(e.findDOMNode(a.refs.salary_net)).autoNumeric("get")),salary_basic:parseFloat($(e.findDOMNode(a.refs.salary_basic)).autoNumeric("get")),salary_ensurance:parseFloat($(e.findDOMNode(a.refs.salary_ensurance)).autoNumeric("get")),salary_ratio:parseFloat($(e.findDOMNode(a.refs.salary_ratio)).autoNumeric("get")),salary_support:parseFloat($(e.findDOMNode(a.refs.salary_support)).autoNumeric("get")),date_signed:m,signer:$(e.findDOMNode(a.refs.signer)).dropdown("get value"),signer_position:p,office_id:$(e.findDOMNode(a.refs.office)).dropdown("get value"),department_id:$(e.findDOMNode(a.refs.department)).dropdown("get value"),position:$(e.findDOMNode(a.refs.position)).dropdown("get value"),employee_type:$(e.findDOMNode(a.refs.employee_type)).dropdown("get value"),file_id_list:o.join(","),note:$(e.findDOMNode(a.refs.note)).val(),status:(new d).STATUS_ENABLE},{success:function(e,t){i.showSuccess(c.t("insert_success")),$(".ui.modal",a.getDOMNode()).modal("hide"),n.trigger("employeecontract:add",t,"add")},error:function(e,t){i.notifyError(t,s,c.t("error_add"))},complete:function(){t.removeClass("loading")}})},progreslist:function(){n.trigger("employeedetail:progreslist")},componentDidUpdate:function(){(new p).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new p).OBJECTTYPE_WORKGROUP,0,(new p).STATUS_ENABLE)},emptyField:function(e){var t=parseFloat($(e.target).autoNumeric("get"));0==t?$(e.target).val(""):$(e.target).autoNumeric("set",t)},componentDidMount:function(){var t=this;(new p).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new p).OBJECTTYPE_WORKGROUP,0,(new p).STATUS_ENABLE),$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.save()}}),$(".ui.modal",this.getDOMNode()).modal({context:this.getDOMNode(),onHidden:function(){n.trigger("modal:hide")}}).modal("show"),$(e.findDOMNode(this.refs.salary_net)).add($(e.findDOMNode(this.refs.salary_basic))).add($(e.findDOMNode(this.refs.salary_gross))).add($(e.findDOMNode(this.refs.salary_ensurance))).add($(e.findDOMNode(this.refs.salary_support))).add($(e.findDOMNode(this.refs.salary_ratio))).autoNumeric(a.numberoption())},render:function(){var t=this,n={format:"DD/MM/YYYY",startDate:moment.unix(moment().unix()).format("DD/MM/YYYY"),endDate:moment.unix(moment().unix()).format("DD/MM/YYYY"),showDropdowns:!0,singleDatePicker:!0,applyClass:"ui button green",cancelClass:"ui button secondary"},a="ffile-"+this.props.data.id,i=[];return(new u).getTypeList().map(function(e,t){e.text=l.t("TYPE_"+e.text),i.push(e)}),e.createElement("div",null,e.createElement("div",{className:"ui modal",ref:"modal"},e.createElement("i",{className:"close icon"}),e.createElement("div",{className:"header"},s.t("add_hd")),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide"},e.createElement("table",{className:"ui table",style:{border:"none"},id:"tableemployeecontract"},e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{className:"tdlabel field required"},e.createElement("label",null,s.t("number"))),e.createElement("td",null,e.createElement("input",{ref:"number",name:"number"})),e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("date_signed"))),e.createElement("td",null,e.createElement(v,{ref:"date_signed",key:moment().unix(),options:n}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel field required"},e.createElement("label",null,s.t("name"))),e.createElement("td",{colSpan:"3"},e.createElement("input",{ref:"name",name:"name"}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("type"))),e.createElement("td",null,e.createElement(h,{ref:"type",data:(new d).getTypeList()})),e.createElement("td",{className:"tdlabel field",style:{display:"none"}},e.createElement("label",null,s.t("parent_id"))),e.createElement("td",{style:{display:"none"}},e.createElement("input",{ref:"parent_id",name:"parent_id"}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("date_started"))),e.createElement("td",null,e.createElement(v,{ref:"date_started",key:moment().unix(),options:n})),e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("date_ended"))),e.createElement("td",null,e.createElement(v,{ref:"date_ended",key:moment().unix(),options:n}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("department"))),e.createElement("td",null,e.createElement(g,{ref:"department"})),e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("office"))),e.createElement("td",null,e.createElement(f,{ref:"office"}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("type_employee"))),e.createElement("td",null,e.createElement(h,{data:i,ref:"employee_type"})),e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("position"))),e.createElement("td",null,e.createElement(h,{data:(new u).getPositionList(),ref:"position"}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("salary_gross"))),e.createElement("td",null,e.createElement("input",{ref:"salary_gross",placeholder:"0",onKeyUp:this.emptyField,onFocus:this.emptyField,onClick:this.emptyField,name:"salary_gross"})),e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("salary_net"))),e.createElement("td",null,e.createElement("input",{ref:"salary_net",placeholder:"0",onKeyUp:this.emptyField,onFocus:this.emptyField,onClick:this.emptyField,name:"salary_net"}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("salary_basic"))),e.createElement("td",null,e.createElement("input",{ref:"salary_basic",placeholder:"0",onKeyUp:this.emptyField,onFocus:this.emptyField,onClick:this.emptyField,name:"salary_basic"})),e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("salary_type"))),e.createElement("td",null,e.createElement(h,{data:(new d).getSalaryTypeList(),ref:"salary_type"}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("salary_ensurance"))),e.createElement("td",null,e.createElement("input",{ref:"salary_ensurance",placeholder:"0",onKeyUp:this.emptyField,onFocus:this.emptyField,onClick:this.emptyField,name:"salary_ensurance"})),e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("salary_ratio"))),e.createElement("td",null,e.createElement("input",{ref:"salary_ratio",placeholder:"0",onKeyUp:this.emptyField,onFocus:this.emptyField,onClick:this.emptyField,name:"salary_ratio"}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("salary_support"))),e.createElement("td",{colSpan:"3"},e.createElement("input",{ref:"salary_support",placeholder:"0",onKeyUp:this.emptyField,onFocus:this.emptyField,onClick:this.emptyField,name:"salary_support"}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("signer"))),e.createElement("td",null,e.createElement(_,{ref:"signer"})),e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("signer_position"))),e.createElement("td",null,e.createElement(h,{data:(new u).getPositionList(),ref:"signer_position"}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("note"))),e.createElement("td",{colSpan:"3"},e.createElement("input",{ref:"note",name:"note"}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel field"},e.createElement("label",null,s.t("File"))),e.createElement("td",{colSpan:"3"},e.createElement("div",{className:"comment"},e.createElement("div",{className:"content"},e.createElement("input",{key:t.state.reset+"file",type:"file",ref:"fileinput",id:a,name:"ffile",multiple:"multiple"}))))))))))),e.createElement("div",{className:"actions"},e.createElement("span",{className:"ui noborder basic button cancel",onClick:this.progreslist},c.t("close")),e.createElement("button",{className:"ui teal button",onClick:this.save},c.t("insert")))))}});return E}),define("components/employeecontract/employee-detail-contract-edit",["react","backbone","eventbus","companysetting","helper","role","pref","cacheddata","language/employeecontract","language/employee","language/default","models/employeecontract","models/employee","models/user","models/file","components/select-status","components/select-office","components/select-department","components/select-employee","components/semantic-datepicker","components/tinymce"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E){var b=e.createClass({displayName:"EmployeeProgressEditComponent",getInitialState:function(){return{modelitems:[],reset:1}},save:function(){var t=$(".ui.form",this.getDOMNode());t.addClass("loading");var a=this,r=[];$("#uploadifive-ffile-"+this.props.data.id+"-queue").find(".attachedfileid").each(function(){r.push($(this).attr("data-id"))}),r=r.filter(function(e){return void 0!=e});var s=r.join(",");""!=this.props.dataItem.file_id_list&&""!=s?s+=","+this.props.dataItem.file_id_list:""==s&&(s=this.props.dataItem.file_id_list);var c=moment(this.refs.date_ended.getDatePicker().element.context.value,"DD/MM/YYYY").unix(),m=moment(this.refs.date_started.getDatePicker().element.context.value,"DD/MM/YYYY").unix(),p=moment(this.refs.date_signed.getDatePicker().element.context.value,"DD/MM/YYYY").unix();data={company_id:o.get("cid"),creator_id:o.get("uid"),name:$(e.findDOMNode(a.refs.name)).val(),number:$(e.findDOMNode(a.refs.number)).val(),date_started:m,date_ended:c,employee_id:a.props.data.id,salary_type:$(e.findDOMNode(this.refs.salary_type)).dropdown("get value"),type:$(e.findDOMNode(this.refs.type)).dropdown("get value"),salary_gross:parseFloat($(e.findDOMNode(this.refs.salary_gross)).autoNumeric("get")),salary_net:parseFloat($(e.findDOMNode(this.refs.salary_net)).autoNumeric("get")),salary_basic:parseFloat($(e.findDOMNode(this.refs.salary_basic)).autoNumeric("get")),salary_ensurance:parseFloat($(e.findDOMNode(this.refs.salary_ensurance)).autoNumeric("get")),salary_ratio:parseFloat($(e.findDOMNode(this.refs.salary_ratio)).autoNumeric("get")),salary_support:parseFloat($(e.findDOMNode(this.refs.salary_support)).autoNumeric("get")),date_signed:p,signer:$(e.findDOMNode(this.refs.signer)).dropdown("get value"),signer_position:$(e.findDOMNode(this.refs.signer_position)).dropdown("get value"),office_id:$(e.findDOMNode(this.refs.office)).dropdown("get value"),department_id:$(e.findDOMNode(this.refs.department)).dropdown("get value"),position:$(e.findDOMNode(this.refs.position)).dropdown("get value"),employee_type:$(e.findDOMNode(this.refs.employee_type)).dropdown("get value"),
file_id_list:s,note:$(e.findDOMNode(a.refs.note)).val(),status:(new u).STATUS_ENABLE},$(".prompt").remove(),$(".error").removeClass("error"),new u({id:this.props.dataItem.id}).save(data,{success:function(e,t){i.showSuccess(d.t("update_success")),a.setState({reset:a.state.reset+1}),$(".ui.modal",a.getDOMNode()).modal("hide"),n.trigger("employeecontract:edit",t,"edit")},error:function(e,t){i.notifyError(t,l,d.t("error_edit"))},complete:function(){t.removeClass("loading")}})},progreslist:function(){n.trigger("employeedetail:progreslist")},checkpermission:function(){r.hasById(r.EMPLOYEE_MANAGE)||$(e.findDOMNode(this.refs.salary_net)).add($(e.findDOMNode(this.refs.salary_basic))).add($(e.findDOMNode(this.refs.salary_gross))).add($(e.findDOMNode(this.refs.name))).add($(e.findDOMNode(this.refs.number))).add($(e.findDOMNode(this.refs.note))).add($(e.findDOMNode(this.refs.parent_id))).add($(e.findDOMNode(this.refs.date_signed))).add($(e.findDOMNode(this.refs.date_started))).add($(e.findDOMNode(this.refs.date_ended))).add($(e.findDOMNode(this.refs.employee_type))).add($(e.findDOMNode(this.refs.position))).add($(e.findDOMNode(this.refs.type))).add($(e.findDOMNode(this.refs.btnsave))).add($(e.findDOMNode(this.refs.salary_type))).add($(e.findDOMNode(this.refs.note))).add($(e.findDOMNode(this.refs.signer))).add($(e.findDOMNode(this.refs.signer_position))).add($(e.findDOMNode(this.refs.department))).add($(e.findDOMNode(this.refs.office))).add($(e.findDOMNode(this.refs.salary_gross))).add($(e.findDOMNode(this.refs.salary_ensurance))).add($(e.findDOMNode(this.refs.salary_support))).add($(e.findDOMNode(this.refs.salary_ratio))).prop({disabled:!0}).addClass("disabled")},componentDidUpdate:function(){(new h).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new h).OBJECTTYPE_WORKGROUP,0,(new h).STATUS_ENABLE),this.checkpermission()},componentDidMount:function(){var t=this;this.checkpermission(),(new h).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new h).OBJECTTYPE_WORKGROUP,0,(new h).STATUS_ENABLE),$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.save()}}),$(".ui.modal",this.getDOMNode()).modal({context:this.getDOMNode(),onHidden:function(){n.trigger("modal:hide")}}).modal("show"),$(e.findDOMNode(this.refs.salary_net)).add($(e.findDOMNode(this.refs.salary_basic))).add($(e.findDOMNode(this.refs.salary_gross))).add($(e.findDOMNode(this.refs.salary_ensurance))).add($(e.findDOMNode(this.refs.salary_support))).add($(e.findDOMNode(this.refs.salary_ratio))).autoNumeric(a.numberoption())},render:function(){var t=this,n={format:"DD/MM/YYYY",singleDatePicker:!0,showDropdowns:!0,applyClass:"ui button green",cancelClass:"ui button secondary"},a={},i={},r={};a.startDate=moment.unix(this.props.dataItem.date_started).format("DD/MM/YYYY"),i.startDate=moment.unix(this.props.dataItem.date_ended).format("DD/MM/YYYY"),r.startDate=moment.unix(this.props.dataItem.date_signed).format("DD/MM/YYYY"),a=$.extend(a,n),i=$.extend(i,n),r=$.extend(r,n);var o="ffile-"+this.props.data.id,s=[];return(new m).getTypeList().map(function(e,t){e.text=c.t("TYPE_"+e.text),s.push(e)}),e.createElement("div",null,e.createElement("div",{className:"ui modal",ref:"modal"},e.createElement("i",{className:"close icon"}),e.createElement("div",{className:"header"},l.t("edit_hd")),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide"},e.createElement("table",{className:"ui table",style:{border:"none"},id:"tableemployeecontract"},e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{className:"tdlabel required field"},e.createElement("label",null,l.t("number"))),e.createElement("td",null,e.createElement("input",{ref:"number",name:"number",defaultValue:this.props.dataItem.number})),e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("date_signed"))),e.createElement("td",null,e.createElement(y,{ref:"date_signed",key:moment().unix(),options:r}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel required field"},e.createElement("label",null,l.t("name"))),e.createElement("td",{colSpan:"3"},e.createElement("input",{ref:"name",name:"name",defaultValue:this.props.dataItem.name}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("type"))),e.createElement("td",null,e.createElement(f,{ref:"type",data:(new u).getTypeList(),value:this.props.dataItem.type})),e.createElement("td",{className:"tdlabel",style:{display:"none"}},e.createElement("label",null,l.t("parent_id"))),e.createElement("td",{style:{display:"none"}},e.createElement("input",{ref:"parent_id",name:"parent_id",defaultValue:this.props.dataItem.number}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("date_started"))),e.createElement("td",null,e.createElement(y,{ref:"date_started",key:moment().unix(),options:a})),e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("date_ended"))),e.createElement("td",null,e.createElement(y,{ref:"date_ended",key:moment().unix(),options:i}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("department"))),e.createElement("td",null,e.createElement(_,{ref:"department",value:this.props.dataItem.department})),e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("office"))),e.createElement("td",null,e.createElement(g,{ref:"office",value:this.props.dataItem.office}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("type_employee"))),e.createElement("td",null,e.createElement(f,{data:s,ref:"employee_type",value:this.props.dataItem.employee_type})),e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("position"))),e.createElement("td",null,e.createElement(f,{data:(new m).getPositionList(),ref:"position",value:this.props.dataItem.position}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("salary_gross"))),e.createElement("td",null,e.createElement("input",{ref:"salary_gross",name:"salary_gross",defaultValue:this.props.dataItem.salary_gross})),e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("salary_net"))),e.createElement("td",null,e.createElement("input",{ref:"salary_net",name:"salary_net",defaultValue:this.props.dataItem.salary_net}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("salary_basic"))),e.createElement("td",null,e.createElement("input",{ref:"salary_basic",name:"salary_basic",defaultValue:this.props.dataItem.salary_basic})),e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("salary_type"))),e.createElement("td",null,e.createElement(f,{data:(new u).getSalaryTypeList(),ref:"salary_type",value:this.props.dataItem.salary_type}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("salary_ensurance"))),e.createElement("td",null,e.createElement("input",{ref:"salary_ensurance",name:"salary_ensurance",defaultValue:this.props.dataItem.salary_ensurance})),e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("salary_ratio"))),e.createElement("td",null,e.createElement("input",{ref:"salary_ratio",name:"salary_ratio",defaultValue:this.props.dataItem.salary_ratio}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("salary_support"))),e.createElement("td",{colSpan:"3"},e.createElement("input",{ref:"salary_support",name:"salary_support",defaultValue:this.props.dataItem.salary_support}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("signer"))),e.createElement("td",null,e.createElement(v,{ref:"signer",defaultValue:[this.props.dataItem.signer]})),e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("signer_position"))),e.createElement("td",null,e.createElement(f,{data:(new m).getPositionList(),ref:"signer_position",value:this.props.dataItem.signer_position}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("note"))),e.createElement("td",{colSpan:"3"},e.createElement("input",{ref:"note",name:"note",defaultValue:this.props.dataItem.note}))),e.createElement("tr",null,e.createElement("td",{className:"tdlabel"},e.createElement("label",null,l.t("File"))),e.createElement("td",{colSpan:"3"},e.createElement("div",{className:"comment"},e.createElement("div",{className:"content"},e.createElement("input",{key:t.state.reset+"file",type:"file",ref:"fileinput",id:o,name:"ffile",multiple:"multiple"}))))))))))),e.createElement("div",{className:"actions"},e.createElement("span",{className:"ui noborder basic button cancel",onClick:this.progreslist},d.t("close")),e.createElement("button",{className:"ui teal button",ref:"btnsave",onClick:this.save},d.t("save")))))}});return b}),define("components/employeebank/employee-detail-bank-add",["react","backbone","eventbus","companysetting","helper","pref","cacheddata","language/employeebank","language/employee","language/default","models/employeebank"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"EmployeeBankAddComponent",getInitialState:function(){return{modelitems:[],reset:1}},save:function(){var t=$(".ui.form",this.getDOMNode());t.addClass("loading");var a=this;data={company_id:r.get("cid"),creator_id:r.get("uid"),user_id:this.props.data.user.id,bank:$(e.findDOMNode(a.refs.bank)).val(),number:$(e.findDOMNode(a.refs.number)).val(),note:$(e.findDOMNode(a.refs.note)).val(),status:(new d).STATUS_ENABLE},$(".prompt").remove(),$(".error").removeClass("error"),(new d).save(data,{success:function(e,t){i.showSuccess(c.t("insert_success")),a.setState({reset:a.state.reset+1}),$(".ui.modal",a.getDOMNode()).modal("hide"),n.trigger("employeebank:add",t,"add")},error:function(e,t){i.notifyError(t,s,c.t("error_add"))},complete:function(){t.removeClass("loading")}})},progreslist:function(){n.trigger("employeedetail:progreslist")},componentDidUpdate:function(){},emptyField:function(e){var t=parseFloat($(e.target).autoNumeric("get"));0==t?$(e.target).val(""):$(e.target).autoNumeric("set",t)},componentDidMount:function(){var e=this;$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e.save()}}),$(".ui.modal",this.getDOMNode()).modal({context:this.getDOMNode(),onHidden:function(){n.trigger("modal:hide")}}).modal("show")},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("i",{className:"close icon"}),e.createElement("div",{className:"header"},s.t("add_tk")),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,s.t("bank")),e.createElement("input",{ref:"bank",name:"bank"})),e.createElement("div",{className:"field required"},e.createElement("label",null,s.t("number")),e.createElement("input",{ref:"number",name:"number"})),e.createElement("div",{className:"field"},e.createElement("label",null,s.t("note")),e.createElement("input",{ref:"note",name:"note"})))),e.createElement("div",{className:"actions"},e.createElement("span",{className:"ui noborder basic button cancel",onClick:this.progreslist},c.t("close")),e.createElement("button",{className:"ui teal button",onClick:this.save},c.t("insert")))))}});return m}),define("components/employeebank/employee-detail-bank-edit",["react","backbone","eventbus","companysetting","helper","pref","cacheddata","language/employeebank","language/employee","language/default","models/employeebank","components/select-status"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"EmployeeBanEditComponent",getInitialState:function(){return{modelitems:[],reset:1}},save:function(){var t=$(".ui.form",this.getDOMNode());t.addClass("loading");var a=this;data={company_id:r.get("cid"),creator_id:r.get("uid"),bank:$(e.findDOMNode(a.refs.bank)).val(),number:$(e.findDOMNode(a.refs.number)).val(),note:$(e.findDOMNode(a.refs.note)).val(),status:$(e.findDOMNode(this.refs.status)).dropdown("get value")},$(".prompt").remove(),$(".error").removeClass("error"),new d({id:this.props.dataItem.id}).save(data,{success:function(e,t){i.showSuccess(c.t("update_success")),a.setState({reset:a.state.reset+1}),$(".ui.modal",a.getDOMNode()).modal("hide"),n.trigger("employeebank:add",t,"add")},error:function(e,t){i.notifyError(t,s,c.t("error_add"))},complete:function(){t.removeClass("loading")}})},progreslist:function(){n.trigger("employeedetail:progreslist")},componentDidUpdate:function(){},emptyField:function(e){var t=parseFloat($(e.target).autoNumeric("get"));0==t?$(e.target).val(""):$(e.target).autoNumeric("set",t)},componentDidMount:function(){var e=this;$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e.save()}}),$(".ui.modal",this.getDOMNode()).modal({context:this.getDOMNode(),onHidden:function(){n.trigger("modal:hide")}}).modal("show")},render:function(){var t=(new d).getStatusList();return console.log(t),e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("i",{className:"close icon"}),e.createElement("div",{className:"header"},s.t("edit_tk")),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field required"},e.createElement("label",null,s.t("bank")),e.createElement("input",{ref:"bank",name:"bank",defaultValue:this.props.dataItem.bank})),e.createElement("div",{className:"field required"},e.createElement("label",null,s.t("number")),e.createElement("input",{ref:"number",name:"number",defaultValue:this.props.dataItem.number})),e.createElement("div",{className:"field"},e.createElement("label",null,s.t("note")),e.createElement("input",{ref:"note",name:"note",defaultValue:this.props.dataItem.note})),e.createElement("div",{className:"field"},e.createElement("label",null,s.t("status")),e.createElement(u,{ref:"status",data:t,value:this.props.dataItem.status})))),e.createElement("div",{className:"actions"},e.createElement("span",{className:"ui noborder basic button cancel",onClick:this.progreslist},c.t("close")),e.createElement("button",{className:"ui teal button",onClick:this.save},c.t("save")))))}});return m}),define("components/employee/detail",["react","backbone","eventbus","helper","pref","role","language/employee","language/default","models/employee","models/user","models/department","models/office","collections/employeemore","components/select-status","components/select-office","components/select-department","components/employeepoint/employee-detail-point","components/salary/employee-detail-salary","components/checkin/employee-detail-checkin","components/hrmleave/employee-detail-hrmleave","components/employeebank/employee-detail-bank","components/employeeprogress/employee-detail-progress","components/employeeprogress/employee-detail-progress-add","components/employeeprogress/employee-detail-progress-edit","components/employeemore/employee-detail-more","components/employeecontract/employee-detail-contract","components/employeecontract/employee-detail-contract-add","components/employeecontract/employee-detail-contract-edit","components/employeebank/employee-detail-bank-add","components/employeebank/employee-detail-bank-edit","components/heading","components/tinymce"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M,S,O){var I=e.createClass({displayName:"EmployeeDetailComponent",getInitialState:function(){return{modelitems:[],eidt_progress:0,eidt_progress_item:{},dataMore:{}}},showTab:function(e){},checkPermisson:function(){var t=r.hasById(r.EMPLOYEE_MANAGE);t||(t=r.hasById(r.EMPLOYEE_DETAIL)),t||i.get("uid")==this.props.data.user_id||$(e.findDOMNode(this.refs.tabheader)).hide()},unmountModal:function(){e.findDOMNode(this.refs.loadmodal),e.unmountComponentAtNode(e.findDOMNode(this.refs.loadmodal))},showaddmodal:function(t){var n=this;switch(t){case"contract":e.render(e.createElement(T,{data:n.props.data}),e.findDOMNode(n.refs.loadmodal));break;case"bank":e.render(e.createElement(C,{data:n.props.data}),e.findDOMNode(n.refs.loadmodal));break;default:e.render(e.createElement(N,{data:n.props.data}),e.findDOMNode(n.refs.loadmodal))}},showeditmodal:function(t,n){var a=this;switch(n){case"contract":e.render(e.createElement(x,{data:a.props.data,dataItem:t}),e.findDOMNode(a.refs.loadmodal));break;case"bank":e.render(e.createElement(M,{data:a.props.data,dataItem:t}),e.findDOMNode(a.refs.loadmodal));break;default:e.render(e.createElement(w,{data:a.props.data,dataItem:t}),e.findDOMNode(a.refs.loadmodal))}},showlistprogress:function(){this.setState({edit_progress:0})},_loadDataMore:function(){var t=this;$("#body-loader").addClass("active");var n={company_id:i.get("cid"),limit:50,employee_id:t.props.data.id,is_not_deleted:1,sort_by:"id",sort_type:"DESC"};(new m).fetch({data:n,success:function(n,a){var i={};a.total>0&&(i=a.items[0]),e.render(e.createElement(k,{data:t.props.data,dataMore:i}),e.findDOMNode(t.refs.employeemore))},complete:function(){$("#body-loader").removeClass("active")}})},componentWillMount:function(){this._loadDataMore()},componentWillUnmount:function(){n.off("employeedetail:showaddmodal",this.showaddmodal),n.off("employeedetail:progreslist",this.showlistprogress),n.off("employeedetail:showeditmodal",this.showeditprogress),n.off("modal:hide",this.unmountModal)},componentDidMount:function(){var t=this;this.checkPermisson(),n.on("employeedetail:showaddmodal",this.showaddmodal),n.on("employeedetail:progreslist",this.showlistprogress),n.on("employeedetail:showeditmodal",this.showeditmodal),n.on("modal:hide",this.unmountModal),this.props.data.user_id>0&&new c({id:this.props.data.user_id}).fetch({success:function(n,i){$(e.findDOMNode(t.refs.user)).empty().append(i.fullname);var r=new Image;r.src=a.getAvatarPath(i.avatar),r.onload=function(){var n=175;$(e.findDOMNode(t.refs.avatar)).attr("src",a.getAvatarPath(i.avatar)),$(e.findDOMNode(t.refs.avatar)).attr("style","width:"+n+"px;height:"+n+"px")}}}),new d({id:this.props.data.department_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.department)).empty().append(a.name)}}),new u({id:this.props.data.office_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.office)).empty().append(a.name)}}),$(e.findDOMNode(this.refs.tabheader)).find(".menu .item").tab()},render:function(){var t=this,n="",a="",i=(new l).getPositionList();$.each(i,function(e,a){t.props.data.position_id==a.code&&(n=o.t(a.text))});var r=(new l).getStatusList();r.map(function(e,n){t.props.data.position==n.code&&(e.text=o.t("STATUS_"+e.text))});var c=(new l).getTypeList();$.each(c,function(e,n){t.props.data.type==n.code&&(a=o.t("TYPE_"+n.text))});var d="none",u="none";return this.state.edit_progress?d="":u="",e.createElement("div",{className:"ui segments"},e.createElement(S,{link:"#employee",text:o.t("employee"),subtext:s.t("update")}),e.createElement("div",{className:"ui segment form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide"},e.createElement("div",{className:"ui items"},e.createElement("div",{className:"item"},e.createElement("div",{className:"image"},e.createElement("img",{ref:"avatar",src:"http://semantic-ui.com/images/wireframe/image.png"})),e.createElement("div",{className:"content"},e.createElement("a",{className:"header",ref:"user"}),e.createElement("div",{className:"meta"},e.createElement("span",{ref:"office"})," - ",e.createElement("span",{ref:"department"})),e.createElement("div",{className:"meta"},e.createElement("span",null,n)," - ",e.createElement("span",null,a)),e.createElement("div",{className:"description"},this.props.data.email," ",this.props.data.phone)))),e.createElement("div",{ref:"tabheader",className:"field sixteen wide"},e.createElement("div",{className:"ui pointing secondary menu"},e.createElement("a",{onClick:this.showTab,className:"item active","data-tab":"syll"},o.t("tab_syll")),e.createElement("a",{onClick:this.showTab,className:"item","data-tab":"tk"},o.t("tab_tk")),e.createElement("a",{onClick:this.showTab,className:"item","data-tab":"hd"},o.t("tab_hd")),e.createElement("a",{onClick:this.showTab,className:"item ","data-tab":"qtlav"},o.t("tab_qtlav")),e.createElement("a",{onClick:this.showTab,className:"item","data-tab":"cc"},o.t("tab_cc")),e.createElement("a",{onClick:this.showTab,className:"item","data-tab":"luong"},o.t("tab_l")),e.createElement("a",{onClick:this.showTab,className:"item ","data-tab":"np"},o.t("tab_np")),e.createElement("a",{onClick:this.showTab,id:"defaulttab",className:"item","data-tab":"ktkl"},o.t("tab_ktkl"))),e.createElement("div",{className:"ui tab active","data-tab":"syll",ref:"employeemore"}),e.createElement("div",{className:"ui tab","data-tab":"tk",ref:"employeebank"},e.createElement(E,{data:t.props.data})),e.createElement("div",{className:"ui tab","data-tab":"hd",ref:"hd"},e.createElement(D,{data:t.props.data})),e.createElement("div",{className:"ui tab ","data-tab":"qtlav",ref:"qtlav"},e.createElement(b,{data:t.props.data})),e.createElement("div",{className:"ui tab","data-tab":"cc",ref:"cc"},e.createElement(v,{data:t.props.data})),e.createElement("div",{className:"ui tab","data-tab":"luong",ref:"luong"},e.createElement(_,{data:t.props.data})),e.createElement("div",{className:"ui tab","data-tab":"np",ref:"np"},e.createElement(y,{data:t.props.data})),e.createElement("div",{className:"ui tab","data-tab":"ktkl",ref:"ktkl"},e.createElement(g,{data:t.props.data})))))),e.createElement("br",null),e.createElement("div",{ref:"loadmodal",id:"loadmodal"}))}});return I}),define("components/employee/edit",["react","backbone","helper","pref","language/employee","language/default","models/employee","components/select-status","components/select-office","components/select-department","components/heading","components/tinymce","models/user","components/employee/changepassword","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"EmployeeEditComponent",getInitialState:function(){return{modelitems:[]}},componentDidMount:function(){var t=this;$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t._save()}});var n="set unchecked";this.props.data.ignore_ip_checkin>0&&(n="set checked"),$(e.findDOMNode(this.refs.ignore)).checkbox(n),$(e.findDOMNode(t.refs.gender)).dropdown().dropdown("set selected",this.props.data.gender)},_save:function(){var s=$(".ui.form",this.getDOMNode());s.addClass("loading");var l=this;$(".prompt").remove(),$(".error").removeClass("error"),new o({id:this.props.data.id}).save({company_id:a.get("cid"),creator_id:a.get("uid"),office_id:$(e.findDOMNode(this.refs.office)).dropdown("get value"),department_id:$(e.findDOMNode(this.refs.department)).dropdown("get value"),position_id:$(e.findDOMNode(this.refs.positionid)).dropdown("get value"),type:$(e.findDOMNode(this.refs.type)).dropdown("get value"),email:$('[name="email"]',s).val(),full_name:$('[name="fullname"]',s).val(),is_external_partner:$(e.findDOMNode(this.refs.externalpartner)).prop("checked")?1:0,job_title:$('[name="jobtitle"]',s).val(),internal_id:$('[name="internalid"]',s).val(),phone:$('[name="phone"]',s).val(),ignore_ip_checkin:$(e.findDOMNode(this.refs.ignore)).checkbox("is checked")?1:0,status:$(e.findDOMNode(this.refs.status)).dropdown("get value"),gender:$(e.findDOMNode(l.refs.gender)).dropdown("get value")},{success:function(){n.showSuccess(r.t("update_success")),t.history.navigate("employee",{trigger:!0})},error:function(e,t){var a=[];t.responseJSON.error.map(function(e,t){a.push(i.t(e))}),""==a?n.showError(r.t("update_fail")):n.showError(a.join(", "))},complete:function(){s.removeClass("loading")}})},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},changePassword:function(t){t.preventDefault();var n=e.createElement(p,{key:moment().valueOf(),data:this.props.data});e.render(n,e.findDOMNode(this.refs.modal_wrapper))},render:function(){var t=this,n=(new o).getPositionList();$.each(n,function(e,t){t.text=i.t(t.text)});var u=(new o).getStatusList();u.map(function(e,t){e.text=r.t("STATUS_"+e.text)});var p=(new o).getTypeList();$.each(p,function(e,t){t.text=i.t("TYPE_"+t.text)});var f=a.get("domain"),g=!1,_=this.props.data.email.indexOf("@"+f);return f&&_>=0&&this.props.data.email.substring(_)=="@"+f&&(g=!0),e.createElement("div",{className:"ui segments"},e.createElement(d,{link:"#employee",text:i.t("employee"),subtext:r.t("update")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,i.t("profile_title"))),e.createElement("p",null)),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide required four"},e.createElement("label",null,i.t("fullname")),e.createElement("input",{defaultValue:t.props.data.full_name,name:"fullname"})),e.createElement("div",{className:"field four wide"},e.createElement("label",null,i.t("gender")),e.createElement("div",{ref:"gender",className:"ui fluid search selection dropdown"},e.createElement("input",{type:"hidden",name:"gender"}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"}),e.createElement("div",{className:"menu"},(new m).getGenderList().map(function(t,n){return e.createElement("div",{className:"item",key:t.code,"data-value":t.code},t.text)}))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four  wide field"},e.createElement("label",null,i.t("email")),e.createElement("input",{name:"email",type:"text",disabled:"disabled",value:t.props.data.email}),g?e.createElement("div",{style:{marginTop:5}},e.createElement("a",{href:"",onClick:this.changePassword},i.t("set_password"))):null),e.createElement("div",{className:" four  wide field"},e.createElement("label",null,i.t("phone")),e.createElement("input",{name:"phone",type:"text",defaultValue:t.props.data.phone}))))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,i.t("employee_info_title"))),e.createElement("p",null,i.t("employee_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("office")),e.createElement(l,{ref:"office",placeholder:"-----",value:t.props.data.office_id})),e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("type")),e.createElement(s,{ref:"type",placeholder:"-----",data:p,value:this.props.data.type}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("department")),e.createElement(c,{name:"department",ref:"department",placeholder:"-----",value:t.props.data.department_id})),e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("position")),e.createElement(s,{ref:"positionid",data:n,placeholder:"-----",value:this.props.data.position_id}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:" four  wide field"},e.createElement("label",null,i.t("internal_id"),e.createElement("a",{className:"icon tc-info",title:i.t("discription2")})),e.createElement("div",{className:"ui right labeled input"},e.createElement("input",{name:"internalid",type:"text",defaultValue:t.props.data.internal_id}),e.createElement("div",{className:"ui grey label"},"@"+a.get("screenname")))),e.createElement("div",{className:"required four  wide field"},e.createElement("label",null,i.t("jobtitle")),e.createElement("input",{name:"jobtitle",type:"text",defaultValue:t.props.data.job_title}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide   field"},e.createElement("label",null,i.t("ignore_ip_checkin")),e.createElement("div",{className:"ui toggle checkbox",ref:"ignore"},e.createElement("input",{type:"checkbox",name:"public",defaultChecked:"checked"}),e.createElement("label",null," ")))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("status")),e.createElement(s,{ref:"status",data:u,value:this.props.data.status}))))),e.createElement(h,{required:!0},e.createElement("button",{className:"ui teal button primary",type:"submit"},r.t("save"))))),e.createElement("div",{ref:"modal_wrapper"}),e.createElement("br",null))}});return f}),define("components/employee/export",["react","backbone","helper","pref","role","setting","querystring","language/employee","language/default","components/semantic-datepicker","components/checkin/filter-employee","components/heading","components/select-office","components/select-department"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"CheckInExportComponent",getInitialState:function(){return{models:[],hmac:""}},componentDidMount:function(){var e=this;$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}})},filter_employee:function(e){o.set("creator_id",e)},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},_export:function(t){var i=this,o=t.nativeEvent;o.preventDefault();var s=r.rooturl+$(e.findDOMNode(this.refs.export)).attr("data-url");if(""!=i.state.hmac){var l=i._getExportUrl(s,i.state.hmac);window.open(l,n.getWindowTarget())}else{var c={company_id:a.get("cid"),user_id:a.get("uid")};$.ajax({url:s,method:"GET",data:c,dataType:"json",success:function(e){if(""!=e.hmac){var t=i._getExportUrl(s,e.hmac);i.setState({hmac:e.hmac}),window.open(t,n.getWindowTarget())}}})}},_getDataQuery:function(t){var n=(t?1:o.get("page"),{company_id:a.get("cid"),user_id:a.get("uid"),department_id:$(e.findDOMNode(this.refs["select-department"])).dropdown("get value"),office_id:$(e.findDOMNode(this.refs["select-office"])).dropdown("get value")});return n},_getExportUrl:function(e,t){var n=this._getDataQuery(!0),i="";return $.each(n,function(e,t){i+=(""!=i?"&":"")+e+"="+t}),i+=(""!=i?"&":"")+"user_id="+a.get("uid"),i+=(""!=i?"&":"")+"hmac="+encodeURIComponent(t),e+="?"+i},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement(u,{link:"#employee",text:s.t("employee"),subtext:s.t("exportexcel")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide"},e.createElement("h4",null,e.createElement("strong",null,s.t("employee_export_info_title"))),e.createElement("p",null,s.t("employee_export_info_content"))),e.createElement("div",{
className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide"},e.createElement("div",{className:"ten  wide field"},e.createElement("label",null,s.t("office")),e.createElement(m,{ref:"select-office"})))),e.createElement("div",{className:"fields",ref:"select-employee"},e.createElement("div",{className:"field four wide"},e.createElement("div",{className:"ten  wide field"},e.createElement("label",null,s.t("department")),e.createElement(p,{ref:"select-department"})))))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"field"},e.createElement("div",{className:"pull-left"},e.createElement("p",null,"* ",l.t("required"))),e.createElement("div",{className:"pull-right",ref:"btnupdate"},e.createElement("span",{className:"ui green button small ",onClick:t._export,ref:"export","data-url":"v1/employees/export"},s.t("exportexcel"))),e.createElement("div",{style:{clear:"both"}})))))}});return h}),define("components/employee/import-item",["react","language/employee","language/default"],function(e,t,n){var a=e.createClass({displayName:"ImportItemComponent",componentDidMount:function(){$(e.findDOMNode(this)).find(".employeepopup").popup({inline:!0,hoverable:!0,position:"top right"}),$(this.refs.delete.getDOMNode()).popup({on:"click",popup:this.refs["delete-confirm"].getDOMNode()})},remove:function(t){t.preventDefault();var n=this,a=t.target;$(a).addClass("loading");var i=$(e.findDOMNode(this)).data("row");n.props.onRemove(i),$(e.findDOMNode(this)).remove(),$(a).removeClass("loading")},showError:function(n){var a,i="";if(n.length>0){for(var r=0;r<n.length;r++){var o=n[r];i+="<p>"+t.t(o)+"</p>"}a=e.createElement("a",{href:"javascript:void(0)","data-html":i,className:"ui button mini icon employeepopup"},e.createElement("i",{className:"tc-error icon"})),$(e.findDOMNode(this)).removeClass("positive").addClass("error"),$(e.findDOMNode(this.refs.error)).find(".employeepopup").remove(),e.render(a,e.findDOMNode(this.refs.error)),$(e.findDOMNode(this.refs.error)).find(".employeepopup").popup("destroy"),$(e.findDOMNode(this.refs.error)).find(".employeepopup").popup({inline:!0,hoverable:!0,position:"top right"})}},showSuccess:function(){$(e.findDOMNode(this.refs.error)).find(".employeepopup").popup("destroy"),$(e.findDOMNode(this)).removeClass("error").addClass("positive"),$(e.findDOMNode(this.refs.error)).find(".employeepopup").remove()},_cancelDelete:function(e){e.preventDefault(),$(this.refs.delete.getDOMNode()).popup("hide")},render:function(){var a,i=this,r=i.props.item,o="";if(r.error.length>0){for(var s=0;s<r.error.length;s++){var l=r.error[s];o+="<p>"+t.t(l)+"</p>"}a=e.createElement("a",{href:"javascript:void(0)","data-html":o,className:"ui button mini icon employeepopup"},e.createElement("i",{className:"tc-error icon"}))}return e.createElement("tr",{"data-row":r.data.row,className:0==r.valid?"error":""},e.createElement("td",null,r.data.row),i.props.headers.map(function(t,n){return e.createElement("td",{key:"col"+n},r.data[t])}),e.createElement("td",{className:"right aligned"},e.createElement("div",{ref:"button",className:"ui buttons mini icon basic"},e.createElement("div",{ref:"error"},a),e.createElement("a",{ref:"delete","data-content":t.t("delete"),className:"ui button mini icon remove employeepopup"},e.createElement("i",{className:"tc-trash"}))),e.createElement("div",{ref:"delete-confirm",className:"ui flowing popup top left transition hidden"},e.createElement("h4",null,n.t("delete_confirm")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:i.remove,className:"ui button mini red",href:"#"},n.t("delete_button")),e.createElement("a",{onClick:this._cancelDelete,className:"ui button mini",href:"#"},n.t("cancel_button"))))))}});return a}),define("components/employee/import-office-preview",["react","pref","setting","eventbus","helper","backbone","language/employee","language/employee","components/employee/import-item"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ImportPreviewModalComponent",getDefaultProps:function(){return{afterImport:function(){}}},getInitialState:function(){return{items:[],headers:[]}},componentDidMount:function(){var t=this;$(this.getDOMNode()).modal({context:$(this.getDOMNode()).parent(),onHidden:function(){a.trigger("modal:hide")}}).modal("show"),this.props.data.rows.length>0?($(e.findDOMNode(this.refs["data-import"])).show(),this.setState({headers:t.props.data.headers}),this.setState({items:t.props.data.rows})):$(e.findDOMNode(this.refs["no-data"])).show()},importAction:function(t){t.preventDefault();var n=this;$(e.findDOMNode(n.refs["btn-import"])).addClass("loading");var a=n.state.items,i=(a.filter(function(e,t){return 1==e.valid}),20),r=0,o=i;n.doImport(r,o,i,a)},doImport:function(e,a,i,r){var o=this,s=r.slice(e,a);if(s.length>0){var l={company_id:t.get("cid"),creator_id:t.get("uid"),items:this.repairData(s)};$.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(l),url:n.rooturl+"v1/employees/importoffice",success:function(e){if(e.error_items.length>0)for(var t=0;t<e.error_items.length;t++){var n=e.error_items[t];"undefined"!=typeof n.rowIndex&&null!=n.rowIndex&&o.refs["row-"+n.rowIndex].showError(n.error)}if(e.success_items.length>0)for(var t=0;t<e.success_items.length;t++){var a=e.success_items[t];"undefined"!=typeof a.rowIndex&&null!=a.rowIndex&&o.refs["row-"+a.rowIndex].showSuccess()}},error:function(){},complete:function(){e=a,a=e+i,o.doImport(e,a,i,r)}})}else o.afterImport()},afterImport:function(){i.showSuccess(o.t("import_finished")),$(e.findDOMNode(this.refs["btn-import"])).removeClass("loading").hide(),this.props.afterImport()},repairData:function(e){var t=[];if(e.length>0)for(var n=0;n<e.length;n++)t.push(e[n].data);return t},removeItem:function(e){var t=this.state.items,n=t.filter(function(t,n){return t.data.row!=e});this.setState({items:n})},render:function(){var t=this,n={fullname:200,address:200};return e.createElement("div",{className:"ui long modal fullscreen"},e.createElement("div",{className:"header"},o.t("heading_import_data")),e.createElement("div",{style:{textAlign:"center"},className:"content"},e.createElement("div",{className:"ui segment"},e.createElement("div",{ref:"data-import",className:"tc-scrolled",style:{display:"none"}},e.createElement("table",{style:{margin:0},className:"ui small striped selectable unstackable table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"STT"),t.props.data.headers.map(function(t,a){var i=n[t]?n[t]+"px":"";return e.createElement("th",{key:"header-"+a,style:{width:i}},t)}),e.createElement("th",null))),e.createElement("tbody",null,t.props.data.rows.map(function(n,a){return e.createElement(l,{ref:"row-"+n.data.row,key:"item-"+a,item:n,onRemove:t.removeItem,headers:t.props.data.headers})}))))),e.createElement("p",{ref:"no-data",style:{display:"none"}},o.t("no_import_data"))),e.createElement("div",{className:"actions"},e.createElement("a",{className:"ui button cancel close"},o.t("close")),e.createElement("a",{className:"ui button green",ref:"btn-import",onClick:t.importAction},o.t("Import"))))}});return c}),define("components/upload",["react","models/file","language/default"],function(e,t,n){var a=e.createClass({displayName:"UploadComponent",value:0,getDefaultProps:function(){return{objectType:(new t).OBJECTTYPE_MESSAGE,ajaxUpload:!1,file:{id:0,name:""},placeholder:n.t("choose_file"),buttonClass:"",onChange:function(e){},onUploadComplete:function(e){}}},_fileInput:function(t){var n=t.currentTarget;this.props.ajaxUpload?$(e.findDOMNode(this.refs.file)).next("input").trigger("click"):$(n).hasClass("button")||$(e.findDOMNode(this.refs.button)).trigger("click")},_onChange:function(t){e.findDOMNode(this.refs.input).value=t.target.value,this.props.onChange(t.target)},empty:function(){e.findDOMNode(this.refs.input).value="",e.findDOMNode(this.refs.file).value=""},addLoading:function(){$(e.findDOMNode(this.refs.button)).addClass("loading")},removeLoading:function(){$(e.findDOMNode(this.refs.button)).removeClass("loading")},getValue:function(){return this.value},uploadAjaxCompleted:function(t,n){$(e.findDOMNode(this.refs.input)).val(t.name),this.value=n.id,this.props.onUploadComplete(n.id)},initAjaxUpload:function(){var n={onUploadComplete:this.uploadAjaxCompleted},a=new t;a.initAjaxUpload($(e.findDOMNode(this.refs.file)),0,this.props.objectType,this.props.name,a.STATUS_ENABLE,n)},componentDidMount:function(){this.props.ajaxUpload&&this.initAjaxUpload(),this.props.file.id>0&&(this.value=this.props.file.id,$(e.findDOMNode(this.refs.input)).val(this.props.file.title))},render:function(){return e.createElement("div",{id:"uploadcomponent",className:"ui fluid action input",key:this.props.file.id},e.createElement("input",{onClick:this._fileInput,readOnly:!0,placeholder:this.props.placeholder,type:"text",ref:"input"}),e.createElement("label",{ref:"button",onClick:this._fileInput,className:"ui labeled icon "+this.props.buttonClass+" button"},e.createElement("i",{className:"tc-upload icon"}),n.t("choose_file"),e.createElement("input",{onChange:this._onChange,type:"file",disabled:this.props.ajaxUpload,name:this.props.name,id:this.props.name,ref:"file",style:{display:"none"}})))}});return a}),define("components/employee/noteImport",["react"],function(e){var t=e.createClass({displayName:"EmployeeImporNotetComponent",render:function(){return e.createElement("div",{className:"ui list"},this.props.data.map(function(t){return e.createElement("div",{className:"item",key:t.id},e.createElement("label",{className:"ui label",style:{background:"none",width:"80px"}},t.code)," : ",e.createElement("label",{className:"ui horizontal small label",style:{backgroundColor:"#"+t.color,color:"#FFF"}},t.name))}))}});return t}),define("components/employee/import-office",["react","pref","setting","eventbus","helper","models/office","models/department","collections/office","collections/department","components/upload","components/employee/import-office-preview","components/heading","components/employee/noteImport","components/formfieldaction","language/employee","models/employee"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"EmployeeImportComponent",getInitialState:function(){return{employee_type_list:[],employee_status_list:[],employee_origin_list:[],region_list:[],office_list:[],department_list:[]}},previewAction:function(a){var r=this;if($(".ui.form",this.getDOMNode()),void 0!==window.FormData){var o=new FormData,s=$(this.refs.file.getDOMNode()).find('[name="file"]');o.append("company_id",t.get("cid")),o.append("creator_id",t.get("uid")),o.append("file",s[0].files[0]),$(r.refs["btn-upload"].getDOMNode()).addClass("loading"),$.ajax({type:"POST",dataType:"json",processData:!1,contentType:!1,url:n.rooturl+"v1/employees/readimportfile",data:o,success:function(t){e.render(e.createElement(d,{afterImport:r.afterImport,data:t}),e.findDOMNode(r.refs["modal-wrapper"]))},error:function(e){i.notifyError(e,h,"error_import")},complete:function(){$(r.refs["btn-upload"].getDOMNode()).removeClass("loading")}})}else i.showError(h.t("error_browser_unsuport"))},afterImport:function(){this.refs.file.empty()},loadDeparment:function(e){var n=this;$(this.getDOMNode()).addClass("loading"),(new l).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,page:e},success:function(e,t){var a=n.state.department_list;t.items.map(function(e,t){var n={id:e.id,color:"ac725e",name:e.name,code:e.id};a.push(n)}),n.setState({department_list:a}),Math.ceil(t.total/t.limit)>t.currentpage&&n.loadOffice(t.currentpage+1)},complete:function(){$(n.getDOMNode()).removeClass("loading")}})},loadOffice:function(e){var n=this;$(this.getDOMNode()).addClass("loading"),(new s).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,status:(new r).STATUS_ENABLE,page:e},success:function(e,t){var a=n.state.office_list;t.items.map(function(e,t){var n={id:e.id,color:"ac725e",name:e.name,code:e.id};a.push(n)}),n.setState({office_list:a}),Math.ceil(t.total/t.limit)>t.currentpage&&n.loadOffice(t.currentpage+1)},complete:function(){$(n.getDOMNode()).removeClass("loading")}})},toggleFieldInformation:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.fieldinformation)).toggle()},unmountmodal:function(){e.findDOMNode(this.refs["modal-wrapper"]),e.unmountComponentAtNode(e.findDOMNode(this.refs["modal-wrapper"]))},componentWillMount:function(){a.off("modal:hide",this.unmountmodal)},componentDidMount:function(){var e=this;this.loadOffice(1),this.loadDeparment(1),a.on("modal:hide",this.unmountmodal),{company_id:t.get("cid"),limit:100,page:1,status:(new f).STATUS_ENABLE,sort_by:"displayorder",sort_type:"ASC"},$(".ui.form",this.getDOMNode()).form({fields:{file:{identifier:"file",rules:[{type:"empty",prompt:h.t("error_file_required")}]}},inline:!0,keyboardShortcuts:!1,templates:{error:function(e){var t='<div class="ui list">';return $.each(e,function(e,n){t+='<div class="item"><i class="tc-bug icon"></i> <div class="content">'+n+"</div></div>"}),t+="</div>",$(t)}},onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e.previewAction()}})},render:function(){return e.createElement("div",{className:"ui segments"},e.createElement(u,{link:"#employee",text:h.t("employee"),subtext:"Import"}),e.createElement("form",{className:"ui segment form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four"},e.createElement("h2",null,h.t("employee_import_info_title")),e.createElement("div",{dangerouslySetInnerHTML:{__html:h.t("employee_import_office_info_content")}})),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide required eight"},e.createElement("label",null,h.t("file_excel")),e.createElement(c,{name:"file",ref:"file"}))),e.createElement("div",null,e.createElement("a",{href:"#",title:h.t("note_column_info_content"),className:"mytip_onpage",onClick:this.toggleFieldInformation},"» ",h.t("note_column_info_title")),e.createElement("table",{className:"ui striped unstackable table hide",style:{marginBottom:"32px"},ref:"fieldinformation"},e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",null,h.t("department")),e.createElement("td",null,e.createElement(m,{data:this.state.department_list}))),e.createElement("tr",null,e.createElement("td",null,h.t("office")),e.createElement("td",null,e.createElement(m,{data:this.state.office_list})))))))),e.createElement(p,null,e.createElement("button",{ref:"btn-upload",className:"ui teal button"},h.t("upload_file")))),e.createElement("div",{ref:"modal-wrapper"}))}});return g}),define("components/employee/import-preview",["react","pref","setting","eventbus","helper","backbone","language/employee","language/employee","components/employee/import-item"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ImportPreviewModalComponent",getDefaultProps:function(){return{afterImport:function(){}}},getInitialState:function(){return{items:[],headers:[]}},componentDidMount:function(){var t=this;$(this.getDOMNode()).modal({context:$(this.getDOMNode()).parent(),onHidden:function(){a.trigger("modal:hide")}}).modal("show"),this.props.data.rows.length>0?($(e.findDOMNode(this.refs["data-import"])).show(),this.setState({headers:t.props.data.headers}),this.setState({items:t.props.data.rows})):$(e.findDOMNode(this.refs["no-data"])).show()},importAction:function(t){t.preventDefault();var n=this;$(e.findDOMNode(n.refs["btn-import"])).addClass("loading");var a=n.state.items,i=(a.filter(function(e,t){return 1==e.valid}),20),r=0,o=i;n.doImport(r,o,i,a)},doImport:function(e,a,i,r){var o=this,s=r.slice(e,a);if(s.length>0){var l={company_id:t.get("cid"),creator_id:t.get("uid"),items:this.repairData(s)};$.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(l),url:n.rooturl+"v1/employees/import",success:function(e){if(e.error_items.length>0)for(var t=0;t<e.error_items.length;t++){var n=e.error_items[t];"undefined"!=typeof n.rowIndex&&null!=n.rowIndex&&o.refs["row-"+n.rowIndex].showError(n.error)}if(e.success_items.length>0)for(var t=0;t<e.success_items.length;t++){var a=e.success_items[t];"undefined"!=typeof a.rowIndex&&null!=a.rowIndex&&o.refs["row-"+a.rowIndex].showSuccess()}},error:function(){},complete:function(){e=a,a=e+i,o.doImport(e,a,i,r)}})}else o.afterImport()},afterImport:function(){i.showSuccess(o.t("import_finished")),$(e.findDOMNode(this.refs["btn-import"])).removeClass("loading").hide(),this.props.afterImport()},repairData:function(e){var t=[];if(e.length>0)for(var n=0;n<e.length;n++)t.push(e[n].data);return t},removeItem:function(e){var t=this.state.items,n=t.filter(function(t,n){return t.data.row!=e});this.setState({items:n})},render:function(){var t=this,n={fullname:200,address:200};return e.createElement("div",{className:"ui long modal fullscreen"},e.createElement("div",{className:"header"},o.t("heading_import_data")),e.createElement("div",{style:{textAlign:"center"},className:"content"},e.createElement("div",{className:"ui segment"},e.createElement("div",{ref:"data-import",className:"tc-scrolled",style:{display:"none"}},e.createElement("table",{style:{margin:0},className:"ui small striped selectable unstackable table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"STT"),t.props.data.headers.map(function(t,a){var i=n[t]?n[t]+"px":"";return e.createElement("th",{key:"header-"+a,style:{width:i}},t)}),e.createElement("th",null))),e.createElement("tbody",null,t.props.data.rows.map(function(n,a){return e.createElement(l,{ref:"row-"+n.data.row,key:"item-"+a,item:n,onRemove:t.removeItem,headers:t.props.data.headers})}))))),e.createElement("p",{ref:"no-data",style:{display:"none"}},o.t("no_import_data"))),e.createElement("div",{className:"actions"},e.createElement("a",{className:"ui button cancel close"},o.t("close")),e.createElement("a",{className:"ui button green",ref:"btn-import",onClick:t.importAction},o.t("Import"))))}});return c}),define("components/employee/import",["react","pref","setting","eventbus","helper","models/office","collections/office","collections/department","components/upload","components/employee/import-preview","components/heading","components/employee/noteImport","components/formfieldaction","language/employee","models/employee"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"EmployeeImportComponent",getInitialState:function(){return{employee_type_list:[],employee_status_list:[],employee_origin_list:[],region_list:[],office_list:[],department_list:[]}},previewAction:function(a){var r=this;if($(".ui.form",this.getDOMNode()),void 0!==window.FormData){var o=new FormData,s=$(this.refs.file.getDOMNode()).find('[name="file"]');o.append("company_id",t.get("cid")),o.append("creator_id",t.get("uid")),o.append("file",s[0].files[0]),$(r.refs["btn-upload"].getDOMNode()).addClass("loading"),$.ajax({type:"POST",dataType:"json",processData:!1,contentType:!1,url:n.rooturl+"v1/employees/readimportfile",data:o,success:function(t){e.render(e.createElement(c,{afterImport:r.afterImport,data:t}),e.findDOMNode(r.refs["modal-wrapper"]))},error:function(e){i.notifyError(e,p,"error_import")},complete:function(){$(r.refs["btn-upload"].getDOMNode()).removeClass("loading")}})}else i.showError(p.t("error_browser_unsuport"))},afterImport:function(){this.refs.file.empty()},loadDeparment:function(e){var n=this;$(this.getDOMNode()).addClass("loading"),(new s).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,page:e},success:function(e,t){var a=n.state.department_list;t.items.map(function(e,t){var n={id:e.id,color:"ac725e",name:e.name,code:e.id};a.push(n)}),n.setState({department_list:a}),Math.ceil(t.total/t.limit)>t.currentpage&&n.loadOffice(t.currentpage+1)},complete:function(){$(n.getDOMNode()).removeClass("loading")}})},loadOffice:function(e){var n=this;$(this.getDOMNode()).addClass("loading"),(new o).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,status:(new r).STATUS_ENABLE,page:e},success:function(e,t){var a=n.state.office_list;t.items.map(function(e,t){var n={id:e.id,color:"ac725e",name:e.name,code:e.id};a.push(n)}),n.setState({office_list:a}),Math.ceil(t.total/t.limit)>t.currentpage&&n.loadOffice(t.currentpage+1)},complete:function(){$(n.getDOMNode()).removeClass("loading")}})},toggleFieldInformation:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.fieldinformation)).toggle()},unmountmodal:function(){e.findDOMNode(this.refs["modal-wrapper"]),e.unmountComponentAtNode(e.findDOMNode(this.refs["modal-wrapper"]))},componentWillMount:function(){a.off("modal:hide",this.unmountmodal)},componentDidMount:function(){var n=this;this.loadOffice(1),this.loadDeparment(1),a.on("modal:hide",this.unmountmodal),{company_id:t.get("cid"),limit:100,page:1,status:(new h).STATUS_ENABLE,sort_by:"displayorder",sort_type:"ASC"},$(".ui.form",this.getDOMNode()).form({fields:{file:{identifier:"file",rules:[{type:"empty",prompt:p.t("error_file_required")}]}},inline:!0,keyboardShortcuts:!1,templates:{error:function(e){var t='<div class="ui list">';return $.each(e,function(e,n){t+='<div class="item"><i class="tc-bug icon"></i> <div class="content">'+n+"</div></div>"}),t+="</div>",$(t)}},onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,t){e.preventDefault(),n.previewAction()}}),i.initMyTip($(e.findDOMNode(this)).find(".mytip_onpage"),null,null,!1)},render:function(){return e.createElement("div",{className:"ui segments"},e.createElement(d,{link:"#employee",text:p.t("employee"),subtext:p.t("import")}),e.createElement("form",{className:"ui segment form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four"},e.createElement("h2",null,p.t("employee_import_info_title")),e.createElement("div",{dangerouslySetInnerHTML:{__html:p.t("employee_import_info_content")}})),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide required eight"},e.createElement("label",null,p.t("file_excel")),e.createElement(l,{name:"file",ref:"file"}))),e.createElement("div",null,e.createElement("a",{href:"#",title:p.t("note_column_info_content"),className:"mytip_onpage",onClick:this.toggleFieldInformation},"» ",p.t("note_column_info_title")),e.createElement("table",{className:"ui striped selectable unstackable table hide",ref:"fieldinformation"},e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{width:"170"},"FULLNAME"),e.createElement("td",null,p.t("fullname"))),e.createElement("tr",null,e.createElement("td",{width:"170"},"GENDER"),e.createElement("td",null,e.createElement(u,{data:(new h).getGenderList()}))),e.createElement("tr",null,e.createElement("td",null,"EMAIL"),e.createElement("td",null,p.t("email"))),e.createElement("tr",null,e.createElement("td",null,"PASSWORD"),e.createElement("td",null,p.t("password"))),e.createElement("tr",null,e.createElement("td",null,"JOB_TITLE"),e.createElement("td",null,p.t("jobtitle"))),e.createElement("tr",null,e.createElement("td",null,"DEPARTMENT_ID"),e.createElement("td",null,e.createElement(u,{data:this.state.department_list}))),e.createElement("tr",null,e.createElement("td",null,"OFFICE_ID"),e.createElement("td",null,e.createElement(u,{data:this.state.office_list}))),e.createElement("tr",null,e.createElement("td",null,"PHONE"),e.createElement("td",null,p.t("phone")))))))),e.createElement(m,null,e.createElement("button",{ref:"btn-upload",className:"ui teal button"},p.t("upload_file")))),e.createElement("div",{ref:"modal-wrapper"}))}});return f}),define("components/employee/item-expand",["react","language/employee","eventbus","backbone","models/employee","helper","models/user","models/office","models/department"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"EmployeeComponent",componentDidMount:function(){},render:function(){return e.createElement("tr",{className:"row-expand"},e.createElement("td",{colSpan:"8"},e.createElement("div",{className:"row-expand-wrapper"},"Hello ",e.createElement("br",null),"Hello ",e.createElement("br",null),"Hello ",e.createElement("br",null),"Hello ",e.createElement("br",null),"Hello ",e.createElement("br",null),"Hello ",e.createElement("br",null),"Hello ",e.createElement("br",null),"Hello ",e.createElement("br",null),"Hello ",e.createElement("br",null),"Hello ",e.createElement("br",null),"Hello ",e.createElement("br",null))))}});return c}),define("components/employee/item",["react","pref","role","language/employee","language/default","eventbus","backbone","models/employee","helper","models/user","models/office","components/datetime","components/table/updatebutton","components/table/deletebutton","components/row-creator","models/department"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"EmployeeComponent",_handleOfficeFilter:function(t){t.preventDefault(),this.props.filterOffice($(e.findDOMNode(this.refs.office)).attr("href").replace("#",""))},_handleDepartmentFilter:function(t){t.preventDefault(),this.props.filterDepartment($(e.findDOMNode(this.refs.department)).attr("href").replace("#",""))},employeeDetailHandler:function(e){e.preventDefault()},checkPermisson:function(){var t=this,a=n.hasById(262),i=["manage"];i.length&&$.each(i,function(n,i){a||$(e.findDOMNode(t.refs[i])).hide()})},_remove:function(){var e=this;new s({id:e.props.data.id}).destroy({success:function(t){l.showSuccess(i.t("delete_success")),r.trigger("employeelist:delete",e.props.data.id)},error:function(e){l.showError(i.t("delete_fail"))}})},loadOffice:function(){var t=this;this.props.data.office_id>0&&new d({id:this.props.data.office_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.office)).text(a.name)}})},loadDepartment:function(){var t=this;this.props.data.department_id>0&&new f({id:this.props.data.department_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.department)).text(a.name)}})},showEditActionSheet:function(e){e.preventDefault();var t=this,n={buttons:[{text:i.t("update"),href:"#employee/edit/"+this.props.data.id},{text:i.t("delete"),color:"#ff0000",onClick:function(e){1==confirm(i.t("confirm_msg_default"))&&t._remove()}}]};l.showActionSheet(n)},componentDidUpdate:function(){this.checkPermisson()},componentWillUnmount:function(){$(e.findDOMNode(this.refs.checkbox_action)).checkbox("destroy")},renfullname:function(t,n){var a=this;l.isSmallScreen()?$(e.findDOMNode(a.refs.user)).empty().append(t).append(e.renderToString(e.createElement("img",{className:"ui avatar image pull-left",src:l.getAvatarPath(n)}))):($(e.findDOMNode(a.refs.user)).empty().append(t),$(e.findDOMNode(a.refs.user_avatar)).empty().append(e.renderToString(e.createElement("img",{className:"cellavatar",style:{width:32,height:32},src:l.getAvatarPath(n)}))))},componentDidMount:function(){var n=this;this.checkPermisson(),this.props.data.user_id>0?new c({id:this.props.data.user_id}).fetch({success:function(e,t){n.renfullname(t.fullname,t.avatar)}}):n.renfullname(this.props.data.full_name,""),(this.props.data.user_id==t.get("uid")||this.props.data.user_id==t.get("owner"))&&$(e.findDOMNode(this.refs.remove)).hide(),$(e.findDOMNode(this.refs.checkbox_action)).checkbox({onChange:function(){$.isFunction(n.props.toggleButtonDoAction)&&n.props.toggleButtonDoAction(),$(e.findDOMNode(n)).toggleClass("positive")}}),l.isSmallScreen()||l.initMyTip($(e.findDOMNode(this)).find(".mytip")),this.loadOffice(),this.loadDepartment()},renderMobile:function(){var t=(new s).getPosition(this.props.data.position_id),n=t.text,i=(new s).getType(this.props.data.type),r=a.t("TYPE_"+i.text);return e.createElement("tr",null,e.createElement("td",null,e.createElement("div",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("h3",{ref:"user"}),e.createElement("div",{style:{marginLeft:40,marginTop:0}},e.createElement("div",null,this.props.data.job_title," - ",e.createElement("span",{ref:"department"})),e.createElement("div",{style:{marginTop:5}},e.createElement("span",{ref:"office"})," · ",e.createElement("span",null,n)," · ",e.createElement("span",null,r)),e.createElement("div",null,this.props.data.email," ",this.props.data.phone)))))},renderDesktop:function(){var r=(new s).getPosition(this.props.data.position_id),o=r.text,l=(new s).getType(this.props.data.type),c=a.t("TYPE_"+l.text),d=n.hasById(n.EMPLOYEE_DETAIL)||n.hasById(n.EMPLOYEE_MANAGE)||t.get("uid")==this.props.data.user_id;return e.createElement("tr",null,e.createElement("td",{className:"collapsing"},e.createElement("div",{className:"ui checkbox checkbox-action"+(this.props.data.user_id==t.get("uid")?" disabled":""),ref:"checkbox_action",style:{fontSize:11}},e.createElement("input",{type:"checkbox",value:this.props.data.id}))),e.createElement("td",null,d?e.createElement("a",{href:"#employee/detail/"+this.props.data.id,title:a.t("detail_tooltip"),className:"mytip"},this.props.data.id):e.createElement("span",null,this.props.data.id)),e.createElement("td",{className:"collapsing"},e.createElement("a",{ref:"user_avatar",href:"#employee/detail/"+this.props.data.id})),e.createElement("td",null,d?e.createElement("a",{href:"#employee/detail/"+this.props.data.id,title:a.t("detail_tooltip"),className:"mytip"},e.createElement("strong",{ref:"user"})):e.createElement("strong",{ref:"user"}),this.props.data.user_id==t.get("owner")?e.createElement("span",{className:"ui mini label orange",style:{marginLeft:5}},"Administrator"):"",e.createElement("br",null),e.createElement("span",null,this.props.data.job_title," ",e.createElement("span",{style:{color:"#999"}},"@")," ",e.createElement("span",{ref:"department"}))),e.createElement("td",{ref:"office"}),e.createElement("td",{ref:"position"},o),e.createElement("td",{ref:"type"},c),e.createElement("td",null,this.props.data.email,e.createElement("br",null),this.props.data.phone),e.createElement("td",null,this.props.data.internal_id),e.createElement("td",null,e.createElement("span",{className:"ui small label simple "+(new s).getStatus(this.props.data.status).color},i.t("STATUS_"+(new s).getStatus(this.props.data.status).text))),e.createElement(h,{id:this.props.data.creator_id}),e.createElement("td",null,e.createElement(u,{ts:this.props.data.date_created})),e.createElement("td",{className:"collapsing"},e.createElement("span",{ref:"manage"},e.createElement(m,{link:"#employee/edit/"+this.props.data.id}),e.createElement(p,{onRemove:this._remove,ref:"remove"}))))},render:function(){return l.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return g}),define("components/employee/listwidget",["react","helper","cacheddata","eventbus","socket","models/user","models/employee"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"EmployeeListWidgetComponent",getDefaultProps:function(){return{employeeIdList:[]}},loadEmployee:function(a){var i=this;$(e.findDOMNode(this.refs.employeelist)).html(""),0==a.length?n.has("employee")&&(employees=n.get("employee"),this.updateEmployeeToView(employees().get())):$.each(a,function(n,a){new r({id:a}).fetch({success:function(n,r){html='<div class="item" data-id="'+a+'"><img class="ui avatar image" src="'+t.getAvatarPath(r.avatar)+'" /><div class="content">'+r.fullname+"</div>"+i.getOnlineStatusIndicator(a)+"</div>",$(e.findDOMNode(i.refs.employeelist)).append(html)}})})},updateEmployeeToView:function(n){var a=this;$.each(n,function(n,i){new r({id:i.user_id}).fetch({success:function(n,r){html='<div class="item" data-id="'+i.user_id+'"><img class="ui avatar image" src="'+t.getAvatarPath(r.avatar)+'" /><div class="content">'+r.fullname+"</div>"+a.getOnlineStatusIndicator(i.user_id)+"</div>",$(e.findDOMNode(a.refs.employeelist)).append(html);
}})})},getOnlineStatusIndicator:function(e){var t="";return i.checkPresenceMember(e)&&(t='<strong title="Online" class="employeeonlineindicator" style="border-radius: 8px; width: 8px; height: 8px; margin-top:8px; background: #3498db;display: block; float:right;"></strong>'),t},socketPresenceUpdate:function(t){var n=this;$(e.findDOMNode(this.refs.employeelist)).find(".item").each(function(e,t){i.checkPresenceMember($(this).attr("data-id"))?0==$(this).find(".employeeonlineindicator").length&&$(this).append(n.getOnlineStatusIndicator($(this).attr("data-id"))):$(this).find(".employeeonlineindicator").remove()})},componentWillUpdate:function(){},componentWillUnmount:function(){a.off("employeewidget:load",this.loadEmployee),a.off("presence:update",this.socketPresenceUpdate)},componentDidMount:function(){a.on("employeewidget:load",this.loadEmployee),a.on("presence:update",this.socketPresenceUpdate),this.props.employeeIdList.length>0&&this.loadEmployee(this.props.employeeIdList)},render:function(){return e.createElement("div",{className:"ui small middle aligned list",ref:"employeelist"})}});return s}),define("components/employee/select-position",["react","pref","language/employee","models/employee"],function(e,t,n,a){var i=e.createClass({displayName:"SelectPositionComponent",getDefaultProps:function(){return{name:"position",ignoreList:[],value:0,className:"",placeholder:"------"}},getInitialState:function(){return{items:[]}},componentDidMount:function(){this.loadData(),$(this.getDOMNode()).dropdown({fullTextSearch:!0,message:{noResults:n.t("filter_not_found")},onChange:this.props.onChange}).dropdown("set selected",0)},loadData:function(){var e=this,t=(new a).getPositionList();t.length>0&&e.setState({items:t})},render:function(){return e.createElement("div",{className:"ui "+this.props.className+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item","data-value":"-1"},this.props.placeholder),this.state.items.map(function(t){return e.createElement("div",{key:t.code,className:"item","data-value":t.code},t.text)})))}});return i}),define("components/employee/select-type",["react","pref","language/employee","models/employee"],function(e,t,n,a){var i=e.createClass({displayName:"SelectPositionComponent",getDefaultProps:function(){return{name:"type",ignoreList:[],value:0,className:"",placeholder:"------"}},getInitialState:function(){return{items:[]}},componentDidMount:function(){this.loadData(),$(this.getDOMNode()).dropdown({fullTextSearch:!0,message:{noResults:n.t("filter_not_found")},onChange:this.props.onChange}).dropdown("set selected",0)},loadData:function(){var e=this,t=(new a).getTypeList();t.length>0&&e.setState({items:t})},render:function(){return e.createElement("div",{className:"ui "+this.props.className+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item","data-value":"-1"},this.props.placeholder),this.state.items.map(function(t){var a=n.t("TYPE_"+t.text);return e.createElement("div",{key:t.code,className:"item","data-value":t.code},a)})))}});return i}),define("components/employeemore/employee-detail-more-add",["react","backbone","eventbus","helper","pref","cacheddata","language/employeeprogress","language/employee","language/default","models/employeeprogress","models/employee","models/user","models/file","components/select-status","components/select-office","components/select-department","components/semantic-datepicker","components/tinymce"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_){var v=e.createClass({displayName:"EmployeeProgressAddComponent",getInitialState:function(){return{modelitems:[],reset:1}},save:function(){var t=this,n={department_id:"to_department_id",office_id:"to_office_id",position_id:"to_position_id",type:"to_type",job_title:"to_jobtitle"},i={},r=!1;$.each(n,function(n,a){var o=t.props.data[n],s=$(e.findDOMNode(t.refs[a])).val();"to_jobtitle"!=a&&(s=$(e.findDOMNode(t.refs[a])).dropdown("get value")),a=a.replace("_id",""),n=n.replace("_id",""),s&&o?o!=s&&(r=!0,i["from_"+n]=o,i[a]=s):(i["from_"+n]="","to_position_id"!=a?i[a]="":i[a]="-1")}),r?this.createEmployeeProgress(i):a.showError(o.t("error_data_null"))},createEmployeeProgress:function(t){var r=$(".ui.form",this.getDOMNode());r.addClass("loading");var o=this,d=[];$("#uploadifive-ffile-"+this.props.data.id+"-queue").find(".attachedfileid").each(function(e){d.push($(this).attr("data-id"))}),dataExtend={company_id:i.get("cid"),creator_id:i.get("uid"),title:$(e.findDOMNode(o.refs.title)).val(),note:$(e.findDOMNode(o.refs.note)).val(),employee_id:o.props.data.user_id,file_id_list:d.join(","),creator_id:i.get("uid"),status:(new c).STATUS_ENABLE},$.extend(t,dataExtend),$(".prompt").remove(),$(".error").removeClass("error"),(new c).save(t,{success:function(e,t){a.showSuccess(l.t("insert_success")),o.setState({reset:o.state.reset+1}),n.trigger("progress:add",e)},error:function(e,t){a.notifyErrorAndForm(t,s,"error_add",r,{department:["error_to_department_not_valid"],office:["error_to_office_not_valid"],type:["error_to_type_not_valid"],position:["error_to_position_not_valid"],status:["error_status_require","error_status_invalid"],title:["error_title_require"]})},complete:function(){r.removeClass("loading")}})},progreslist:function(){n.trigger("employeedetail:progreslist")},componentDidUpdate:function(){(new m).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new m).OBJECTTYPE_WORKGROUP,0,(new m).STATUS_ENABLE)},componentDidMount:function(){var t=this;(new m).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new m).OBJECTTYPE_WORKGROUP,0,(new m).STATUS_ENABLE),$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.save()}})},render:function(){var t=this,n=(new c).getStatusList();n.map(function(e,t){e.text=o.t("STATUS_"+e.text)});var a=(new d).getPositionList();$.each(a,function(e,t){t.text=o.t(t.text)});var i=(new d).getTypeList();$.each(i,function(e,t){t.text=o.t("TYPE_"+t.text)});var r="ffile-"+this.props.data.id;return e.createElement("div",{className:"ui segments"},e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide"},e.createElement("div",{className:"fields",style:{marginBottom:"8px"}},e.createElement("div",{className:"four field wide"},e.createElement("label",null,o.t("title")),e.createElement("input",{key:t.state.reset+"title",ref:"title",name:"title",type:"text"})),e.createElement("div",{className:"four field wide "},e.createElement("label",null,o.t("jobtitle")),e.createElement("input",{key:t.state.reset+"to_jobtitle",ref:"to_jobtitle",name:"to_jobtitle",type:"text"}))),e.createElement("div",{className:"fields",style:{marginBottom:"8px"}},e.createElement("div",{className:"two field"},e.createElement("label",null,o.t("office")),e.createElement(h,{key:t.state.reset+"to_office_id",ref:"to_office_id",name:"to_office_id",placeholder:"-----"})),e.createElement("div",{className:"two field"},e.createElement("label",null,o.t("department")),e.createElement(f,{key:t.state.reset+"to_department_id",ref:"to_department_id",name:"to_department_id",placeholder:"-----"})),e.createElement("div",{className:"two field"},e.createElement("label",null,o.t("type")),e.createElement(p,{key:t.state.reset+"to_type",ref:"to_type",name:"to_type",placeholder:"-----",data:i})),e.createElement("div",{className:"two field"},e.createElement("label",null,o.t("position")),e.createElement(p,{key:t.state.reset+"to_position_id",ref:"to_position_id",name:"to_position_id",placeholder:"-----",data:a}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four field"},e.createElement("label",null,o.t("note")),e.createElement("input",{ref:"note",key:t.state.reset,name:"note",type:"text"})),e.createElement("div",{className:"three field wide"},e.createElement("label",null,o.t("time")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(g,{options:{format:"DD/MM/YYYY HH:mm:ss",endDate:moment().add(30,"days"),timePicker:!0,identifier:"daterange",opens:"left",applyClass:"ui button green",cancelClass:"ui button secondary"},callBack:function(n,a,i){$(e.findDOMNode(t.refs.date_started)).val(n.unix()),$(e.findDOMNode(t.refs.date_ended)).val(a.unix())}}))),e.createElement("div",{className:"four field wide",id:"aaa"},e.createElement("label",null,o.t("File")),e.createElement("div",{className:"comment"},e.createElement("div",{className:"content"},e.createElement("input",{key:t.state.reset+"file",type:"file",ref:"fileinput",id:r,name:"ffile",multiple:"multiple"}))))),e.createElement("div",{className:"field"},e.createElement("div",{className:"pull-right"},e.createElement("span",{className:"ui basic button small ",onClick:this.progreslist},l.t("back")),e.createElement("button",{className:"ui basic button small ",type:"submit"},l.t("insert"))),e.createElement("div",{style:{clear:"both"}})))))))}});return v}),define("components/employeemore/employee-detail-more-edit",["react","backbone","eventbus","helper","pref","cacheddata","language/employeeprogress","language/employee","language/default","models/employeeprogress","models/employee","models/user","models/file","components/select-status","components/select-office","components/select-department","components/semantic-datepicker","components/filestrip","components/tinymce"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v){var y=e.createClass({displayName:"EmployeeProgressEditComponent",getInitialState:function(){return{modelitems:[],reset:1}},save:function(){var t=this,n={department_id:"to_department_id",office_id:"to_office_id",position_id:"to_position_id",type:"to_type",job_title:"to_jobtitle"},i={},r=!1;$.each(n,function(n,a){var o=t.props.data[n],s=$(e.findDOMNode(t.refs[a])).val();"to_jobtitle"!=a&&(s=$(e.findDOMNode(t.refs[a])).dropdown("get value")),a=a.replace("_id",""),n=n.replace("_id",""),s&&o?o!=s&&(r=!0,i["from_"+n]=o,i[a]=s):(i["from_"+n]="","to_position_id"!=a?i[a]="":i[a]="-1")}),r?this.updateEmployeeProgress(i):a.showError(o.t("error_data_null"))},updateEmployeeProgress:function(t){var r=$(".ui.form",this.getDOMNode());r.addClass("loading");var o=this,d=[];$("#uploadifive-ffile-"+this.props.data.id+"-queue").find(".attachedfileid").each(function(e){d.push($(this).attr("data-id"))}),dataExtend={company_id:i.get("cid"),creator_id:i.get("uid"),title:$(e.findDOMNode(o.refs.title)).val(),note:$(e.findDOMNode(o.refs.note)).val(),employee_id:o.props.data.user_id,file_id_list:d.join(","),creator_id:i.get("uid"),from_date:$('[name="from_date"]',r).val(),to_date:$('[name="to_date"]',r).val(),status:(new c).STATUS_ENABLE},$.extend(t,dataExtend),$(".prompt").remove(),$(".error").removeClass("error"),new c({id:this.props.dataItem.id}).save(t,{success:function(e,t){a.showSuccess(l.t("update_success")),o.setState({reset:o.state.reset+1}),n.trigger("progress:edit",e),n.trigger("employeedetail:progreslist")},error:function(e,t){a.notifyErrorAndForm(t,s,"error_add",r,{department:["error_to_department_not_valid"],office:["error_to_office_not_valid"],type:["error_to_type_not_valid"],position:["error_to_position_not_valid"],status:["error_status_require","error_status_invalid"],title:["error_title_require"]})},complete:function(){r.removeClass("loading")}})},progreslist:function(){n.trigger("employeedetail:progreslist")},componentDidUpdate:function(){(new m).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new m).OBJECTTYPE_WORKGROUP,0,(new m).STATUS_ENABLE)},componentDidMount:function(){var t=this;(new m).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new m).OBJECTTYPE_WORKGROUP,0,(new m).STATUS_ENABLE),$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.save()}})},render:function(){var t=this,n=(new c).getStatusList();n.map(function(e,t){e.text=o.t("STATUS_"+e.text)});var a=(new d).getPositionList();$.each(a,function(e,t){t.text=o.t(t.text)});var i=(new d).getTypeList();$.each(i,function(e,t){t.text=o.t("TYPE_"+t.text)});var r="ffile-"+this.props.data.id,s=moment(),u=moment().add(30,"days");return this.props.dataItem.from_date&&(s=this.props.dataItem.from_date),this.props.dataItem.to_date&&(u=this.props.dataItem.to_date),e.createElement("div",{className:"ui segments"},e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide"},e.createElement("div",{className:"fields",style:{marginBottom:"8px"}},e.createElement("div",{className:"four field wide"},e.createElement("label",null,o.t("title")),e.createElement("input",{key:t.state.reset+"title",ref:"title",name:"title",type:"text",defaultValue:this.props.dataItem.title})),e.createElement("div",{className:"four field wide "},e.createElement("label",null,o.t("jobtitle")),e.createElement("input",{key:t.state.reset+"to_jobtitle",ref:"to_jobtitle",name:"to_jobtitle",type:"text",defaultValue:this.props.dataItem.to_jobtitle}))),e.createElement("div",{className:"fields",style:{marginBottom:"8px"}},e.createElement("div",{className:"two field"},e.createElement("label",null,o.t("office")),e.createElement(h,{key:t.state.reset+"to_office_id",ref:"to_office_id",name:"to_office_id",placeholder:"-----",value:this.props.dataItem.to_office})),e.createElement("div",{className:"two field"},e.createElement("label",null,o.t("department")),e.createElement(f,{key:t.state.reset+"to_department_id",ref:"to_department_id",name:"to_department_id",placeholder:"-----",value:this.props.dataItem.to_department})),e.createElement("div",{className:"two field"},e.createElement("label",null,o.t("type")),e.createElement(p,{key:t.state.reset+"to_type",ref:"to_type",name:"to_type",placeholder:"----",data:i,value:this.props.dataItem})),e.createElement("div",{className:"two field"},e.createElement("label",null,o.t("position")),e.createElement(p,{key:t.state.reset+"to_position_id",ref:"to_position_id",name:"to_position_id",placeholder:"-----",data:a,value:this.props.dataItem.to_position}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four field"},e.createElement("label",null,o.t("note")),e.createElement("input",{ref:"note",key:t.state.reset,name:"note",type:"text",defaultValue:this.props.dataItem.note})),e.createElement("div",{className:"three field wide"},e.createElement("label",null,o.t("time")),e.createElement("input",{defaultValue:moment().unix(),ref:"from_date",name:"from_date",type:"hidden"}),e.createElement("input",{defaultValue:moment().add(30,"days").unix(),ref:"to_date",name:"to_date",type:"hidden"}),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(g,{options:{format:"DD/MM/YYYY HH:mm:ss",startDate:s,endDate:u,timePicker:!0,identifier:"daterange",opens:"left",applyClass:"ui button green",cancelClass:"ui button secondary"},callBack:function(n,a,i){$(e.findDOMNode(t.refs.from_date)).val(n.unix()),$(e.findDOMNode(t.refs.to_date)).val(a.unix())}}))),e.createElement("div",{className:"four field wide",id:"aaa"},e.createElement("label",null,o.t("File")),e.createElement("div",{className:"comment"},e.createElement("div",{className:"content"},e.createElement("input",{key:t.state.reset+"file",type:"file",ref:"fileinput",id:r,name:"ffile",multiple:"multiple"})),e.createElement("div",{id:"mailfile"},e.createElement(_,{files:this.props.dataItem.filedetail}))))),e.createElement("div",{className:"field"},e.createElement("div",{className:"pull-right"},e.createElement("span",{className:"ui basic button small ",onClick:this.progreslist},l.t("back")),e.createElement("button",{className:"ui basic button small ",type:"submit"},l.t("update"))),e.createElement("div",{style:{clear:"both"}})))))))}});return y}),define("components/employeemore/import-item",["react","language/employeemore","language/default"],function(e,t,n){var a=e.createClass({displayName:"ImportItemComponent",componentDidMount:function(){$(e.findDOMNode(this)).find(".employeepopup").popup({inline:!0,hoverable:!0,position:"top right"}),$(this.refs.delete.getDOMNode()).popup({on:"click",popup:this.refs["delete-confirm"].getDOMNode()})},remove:function(t){t.preventDefault();var n=this,a=t.target;$(a).addClass("loading");var i=$(e.findDOMNode(this)).data("row");n.props.onRemove(i),$(e.findDOMNode(this)).remove(),$(a).removeClass("loading")},showError:function(n){var a,i="";if(n.length>0){for(var r=0;r<n.length;r++){var o=n[r];i+="<p>"+t.t(o)+"</p>"}a=e.createElement("a",{href:"javascript:void(0)","data-html":i,className:"ui button mini icon employeepopup"},e.createElement("i",{className:"tc-error icon"})),$(e.findDOMNode(this)).removeClass("positive").addClass("error"),$(e.findDOMNode(this.refs.error)).find(".employeepopup").remove(),e.render(a,e.findDOMNode(this.refs.error)),$(e.findDOMNode(this.refs.error)).find(".employeepopup").popup("destroy"),$(e.findDOMNode(this.refs.error)).find(".employeepopup").popup({inline:!0,hoverable:!0,position:"top right"})}},showSuccess:function(){$(e.findDOMNode(this.refs.error)).find(".employeepopup").popup("destroy"),$(e.findDOMNode(this)).removeClass("error").addClass("positive"),$(e.findDOMNode(this.refs.error)).find(".employeepopup").remove()},_cancelDelete:function(e){e.preventDefault(),$(this.refs.delete.getDOMNode()).popup("hide")},render:function(){var a,i=this,r=i.props.item,o="";if(r.error.length>0){for(var s=0;s<r.error.length;s++){var l=r.error[s];o+="<p>"+t.t(l)+"</p>"}a=e.createElement("a",{href:"javascript:void(0)","data-html":o,className:"ui button mini icon employeepopup"},e.createElement("i",{className:"tc-error icon"}))}return e.createElement("tr",{"data-row":r.data.row,className:0==r.valid?"error":""},e.createElement("td",null,r.data.row),i.props.headers.map(function(t,n){return e.createElement("td",{key:"col"+n},r.data[t])}),e.createElement("td",{className:"right aligned"},e.createElement("div",{ref:"button",className:"ui buttons mini icon basic"},e.createElement("div",{ref:"error"},a),e.createElement("a",{ref:"delete","data-content":t.t("delete"),className:"ui button mini icon remove employeepopup"},e.createElement("i",{className:"tc-trash"}))),e.createElement("div",{ref:"delete-confirm",className:"ui flowing popup top left transition hidden"},e.createElement("h4",null,n.t("delete_confirm")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:i.remove,className:"ui button mini red",href:"#"},n.t("delete_button")),e.createElement("a",{onClick:this._cancelDelete,className:"ui button mini",href:"#"},n.t("cancel_button"))))))}});return a}),define("components/employeemore/import-preview",["react","pref","setting","eventbus","helper","backbone","language/employeemore","language/default","components/employeemore/import-item"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ImportPreviewModalComponent",getDefaultProps:function(){return{afterImport:function(){}}},getInitialState:function(){return{items:[],headers:[]}},componentDidMount:function(){var t=this;$(this.getDOMNode()).modal({context:$(this.getDOMNode()).parent(),onHidden:function(){a.trigger("modal:hide")}}).modal("show"),this.props.data.rows.length>0?($(e.findDOMNode(this.refs["data-import"])).show(),this.setState({headers:t.props.data.headers}),this.setState({items:t.props.data.rows})):$(e.findDOMNode(this.refs["no-data"])).show()},importAction:function(t){t.preventDefault();var n=this;$(e.findDOMNode(n.refs["btn-import"])).addClass("loading");var a=n.state.items,i=(a.filter(function(e,t){return 1==e.valid}),100),r=0,o=i;n.doImport(r,o,i,a)},doImport:function(e,a,i,r){var o=this,s=r.slice(e,a);if(s.length>0){var l={company_id:t.get("cid"),creator_id:t.get("uid"),items:this.repairData(s)};$.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(l),url:n.rooturl+"v1/employeemores/import",success:function(e){if(e.error_items.length>0)for(var t=0;t<e.error_items.length;t++){var n=e.error_items[t];"undefined"!=typeof n.rowIndex&&null!=n.rowIndex&&o.refs["row-"+n.rowIndex].showError(n.error)}if(e.success_items.length>0)for(var t=0;t<e.success_items.length;t++){var a=e.success_items[t];"undefined"!=typeof a.rowIndex&&null!=a.rowIndex&&o.refs["row-"+a.rowIndex].showSuccess()}},error:function(){},complete:function(){e=a,a=e+i,o.doImport(e,a,i,r)}})}else o.afterImport()},afterImport:function(){i.showSuccess(o.t("import_finished")),$(e.findDOMNode(this.refs["btn-import"])).removeClass("loading").hide(),this.props.afterImport()},repairData:function(e){var t=[];if(e.length>0)for(var n=0;n<e.length;n++)t.push(e[n].data);return t},removeItem:function(e){var t=this.state.items,n=t.filter(function(t,n){return t.data.row!=e});this.setState({items:n})},render:function(){var t=this,n={fullname:200,address:200};return e.createElement("div",{className:"ui long modal fullscreen"},e.createElement("div",{className:"header"},o.t("heading_import_data")),e.createElement("div",{style:{textAlign:"center"},className:"content"},e.createElement("div",{className:"ui segment"},e.createElement("div",{ref:"data-import",className:"tc-scrolled",style:{display:"none"}},e.createElement("table",{style:{margin:0},className:"ui small striped selectable unstackable table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"STT"),t.props.data.headers.map(function(t,a){var i=n[t]?n[t]+"px":"";return e.createElement("th",{key:"header-"+a,style:{width:i}},t)}),e.createElement("th",null))),e.createElement("tbody",null,t.props.data.rows.map(function(n,a){return e.createElement(l,{ref:"row-"+n.data.row,key:"item-"+a,item:n,onRemove:t.removeItem,headers:t.props.data.headers})}))))),e.createElement("p",{ref:"no-data",style:{display:"none"}},o.t("no_import_data"))),e.createElement("div",{className:"actions"},e.createElement("a",{className:"ui button cancel close"},o.t("close")),e.createElement("a",{className:"ui button green",ref:"btn-import",onClick:t.importAction},o.t("Import"))))}});return c}),define("components/employeemore/import",["react","pref","setting","eventbus","helper","components/upload","components/employeemore/import-preview","components/heading","components/formfieldaction","language/employee","language/employeemore"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"EmployeeMoreImportComponent",getInitialState:function(){return{employee_type_list:[],employee_status_list:[],employee_origin_list:[],region_list:[]}},previewAction:function(a){var r=this;if($(".ui.form",this.getDOMNode()),void 0!==window.FormData){var s=new FormData,l=$(this.refs.file.getDOMNode()).find('[name="file"]');s.append("company_id",t.get("cid")),s.append("creator_id",t.get("uid")),s.append("file",l[0].files[0]),$(r.refs["btn-upload"].getDOMNode()).addClass("loading"),$.ajax({type:"POST",dataType:"json",processData:!1,contentType:!1,url:n.rooturl+"v1/employees/readimportfile",data:s,success:function(t){e.render(e.createElement(o,{afterImport:r.afterImport,data:t}),e.findDOMNode(r.refs["modal-wrapper"]))},error:function(e){i.notifyError(e,d,"error_import")},complete:function(){$(r.refs["btn-upload"].getDOMNode()).removeClass("loading")}})}else i.showError(d.t("error_browser_unsuport"))},afterImport:function(){this.refs.file.empty()},unmountmodal:function(){e.findDOMNode(this.refs["modal-wrapper"]),e.unmountComponentAtNode(e.findDOMNode(this.refs["modal-wrapper"]))},componentWillMount:function(){a.off("modal:hide",this.unmountmodal)},componentDidMount:function(){var e=this;a.on("modal:hide",this.unmountmodal),{company_id:t.get("cid"),limit:100,page:1,sort_by:"displayorder",sort_type:"ASC"},$(".ui.form",this.getDOMNode()).form({fields:{file:{identifier:"file",rules:[{type:"empty",prompt:d.t("error_file_required")}]}},inline:!0,keyboardShortcuts:!1,templates:{error:function(e){var t='<div class="ui list">';return $.each(e,function(e,n){t+='<div class="item"><i class="tc-bug icon"></i> <div class="content">'+n+"</div></div>"}),t+="</div>",$(t)}},onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e.previewAction()}})},render:function(){return e.createElement("div",{className:"ui segments"},e.createElement(s,{link:"#employee",text:c.t("employee"),subtext:c.t("import_profile")}),e.createElement("form",{className:"ui segment form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four"},e.createElement("h2",null,d.t("employee_import_info_title")),e.createElement("div",{dangerouslySetInnerHTML:{__html:d.t("employee_import_info_content")}})),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide required eight"},e.createElement("label",null,d.t("file_excel")),e.createElement(r,{name:"file",ref:"file"}))))),e.createElement(l,null,e.createElement("button",{ref:"btn-upload",className:"ui teal button"},d.t("upload_file")))),e.createElement("div",{ref:"modal-wrapper"}))}});return u}),define("components/employeepoint/employeepicker",["react","pref","helper"],function(e,t,n){var a=e.createClass({displayName:"EmployeePickerComponent",updateEmployeeToView:function(t){var a=this,i={};t.items.map(function(e,t){i[t]=e.user});var r="";$(e.findDOMNode(a.refs.employeelist)).html(r),$.each(i,function(e,t){r+="<div  data-topicid="+a.props.topic_id+'  class="item" data-value="'+t.id+'" data-text="'+t.fullname+'"><img class="ui mini avatar image" src="'+n.getAvatarPath(t.avatar)+'" />'+t.fullname+"</div>"}),$(e.findDOMNode(a.refs.employeelist)).html(r),$(e.findDOMNode(this.refs.dropdown)).dropdown({maxSelections:this.props.max,onAdd:this.props.pickeronadd,onRemove:this.props.pickeronremove,fullTextSearch:!0})},getDefaultProps:function(){return{inputname:"",inputid:"",defaulttext:"----",defaultvalue:[],max:200}},componentWillUpdate:function(){},_setAll:function(t){var n=[];t.items.forEach(function(e,t){var a=e.user;n.push(a.id.toString())}),$(e.findDOMNode(this.refs.dropdown)).dropdown("set selected",n)},componentDidUpdate:function(){this._init()},_init:function(){jQuery.isEmptyObject(this.props.store_member)||(this.updateEmployeeToView(this.props.store_member),this.props.selectall&&this._setAll(this.props.store_member))},componentDidMount:function(){this._init()},setList:function(t){var n=[];t.forEach(function(e,t){n.push(e.toString())}),$(e.findDOMNode(this.refs.dropdown)).dropdown("set selected",n)},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.dropdown)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},render:function(){return defaultText=this.props.defaulttext,e.createElement("div",{ref:"dropdown",className:"ui fluid multiple search selection dropdown"+this.props.disabled,style:{minWidth:"150px"}},e.createElement("input",{type:"hidden",name:this.props.inputname,id:this.props.inputid}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},defaultText),e.createElement("div",{className:"menu",ref:"employeelist"}))}});return a}),define("components/employeepoint/additem",["react","helper","pref","querystring","models/employeepoint","models/employeepointtopic","models/file","collections/employeepointtopic","collections/employee","components/employeepoint/employeepicker","language/employeepoint"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"EmployeePointAddItemComponent",_filterStatus:function(t){t.preventDefault();var n=$(e.findDOMNode(this.refs.status)).attr("href").replace("#","");this.props.filterStatus(n)},getInitialState:function(){return{models:[],employees:[],selectall:!1,employee_list:this.props.employee_list}},getDefaultProps:function(){return{employee_list:[]}},componentDidMount:function(){(new o).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new o).OBJECTTYPE_WORKGROUP,0,(new o).STATUS_ENABLE)},_selectAll:function(){this.setState({selectall:!0})},_removeAll:function(){this.setState({selectall:!1}),this.props.pickerremoveall(this.props.data.id)},save:function(){},renderMobile:function(){var t=this,n=(new r).getType(this.props.data.type),a="ffile-"+this.props.data.id;return e.createElement("tr",null,e.createElement("td",null,e.createElement("div",{className:""},e.createElement("a",{className:"mitemheading mitemheadingnormal mitemheadingnomargin"},e.createElement("span",{className:"pull-right ui label tiny "+n.color}," ",t.props.data.point),parseInt(t.props.index)+1,".  ",t.props.data.name),e.createElement("div",{style:{marginTop:10},className:"mitemmeta"},e.createElement("div",null,e.createElement(c,{ref:"picker_"+t.props.data.id,key:"picker_"+moment().unix(),store_member:t.state.employee_list,topic_id:t.props.data.id,pickeronadd:t.props.pickeronadd,pickeronremove:t.props.pickeronremove,disabled:"",inputname:"employee",selectall:t.state.selectall})),e.createElement("div",{className:"ui horizontal list"},e.createElement("a",{href:"javascript:void(0)",className:"item",onClick:t._selectAll},e.createElement("small",null,d.t("addall"))),e.createElement("a",{href:"javascript:void(0)",className:"item",onClick:t._removeAll},e.createElement("small",null,d.t("removeall")))),e.createElement("div",null,e.createElement("input",{type:"text",style:{minWidth:"200px"},name:"note["+t.props.data.id+"]"})),e.createElement("div",null,e.createElement("div",{className:"comment"},e.createElement("div",{className:"content"},e.createElement("input",{type:"file",ref:"fileinput",id:a,name:"ffile",multiple:"multiple"}))))))))},renderDesktop:function(){var t=this,n=(new r).getType(this.props.data.type),a="ffile-"+this.props.data.id;return e.createElement("tr",null,e.createElement("td",null,parseInt(t.props.index)+1,".  ",t.props.data.name),e.createElement("td",null,e.createElement(c,{ref:"picker_"+t.props.data.id,key:"picker_"+moment().unix(),store_member:t.state.employee_list,topic_id:t.props.data.id,pickeronadd:t.props.pickeronadd,pickeronremove:t.props.pickeronremove,disabled:"",inputname:"employee",selectall:t.state.selectall})),e.createElement("td",null,e.createElement("div",{style:{width:"80px !important"}}),e.createElement("a",{href:"javascript:void(0)",className:"ui",onClick:t._selectAll},e.createElement("small",null,d.t("addall"))),e.createElement("br",null),e.createElement("a",{href:"javascript:void(0)",className:"ui",onClick:t._removeAll},e.createElement("small",null,d.t("removeall")))),e.createElement("td",null,e.createElement("input",{type:"text",style:{minWidth:"200px"},name:"note["+t.props.data.id+"]"})),e.createElement("td",{id:"aaaa"},e.createElement("div",{className:"comment"},e.createElement("div",{className:"content"},e.createElement("input",{type:"file",ref:"fileinput",id:a,name:"ffile",multiple:"multiple"})))),e.createElement("td",null,e.createElement("a",{href:"javascript:void(0)",className:"ui label tiny "+n.color}," ",t.props.data.point)))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return u}),define("components/employeepoint/select-topic",["react","pref","querystring","language/default","collections/employeepointtopic","models/employeepointtopic"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"SelectTopicComponent",getDefaultProps:function(){return{name:"topic_id"}},
getInitialState:function(){return{models:[]}},componentDidUpdate:function(){$(this.getDOMNode()).dropdown({fullTextSearch:!0,message:{noResults:a.t("search_no_result")}}).dropdown("set selected",this.props.value)},componentDidMount:function(){this._getTopic()},_getTopic:function(){var e=this;$("#body-loader").addClass("active");var a={company_id:t.get("cid"),limit:50,page:1,status:(new r).STATUS_ENABLE,is_not_deleted:1,sort_by:n.get("sort_by")||"type",sort_type:n.get("sort_type")||"ASC"};(new i).fetch({data:a,success:function(t){e.setState(t)},complete:function(){$("#body-loader").removeClass("active")}})},render:function(){var t=this;return e.createElement("div",{className:"ui "+this.props.className+" search selection dropdown eight"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},t.props.placeholder),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item","data-value":"0"},t.props.placeholder),this.state.models.map(function(t){t=t.toJSON();var n="green";return t.type==(new r).TYPE_BAD&&(n="red"),e.createElement("div",{className:"item",key:t.id,"data-value":t.id,style:{color:n}},t.name)})))}});return o}),define("components/employeepoint/add",["react","backbone","helper","pref","language/employeepoint","language/default","models/employeepoint","models/employeepointtopic","models/file","collections/employeepointtopic","collections/employee","collections/user","components/employeepoint/additem","components/employeepoint/select-topic","components/select-office","components/heading","components/select-status","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_){var v=e.createClass({displayName:"EmployeePointAddComponent",getInitialState:function(){return{modelitems:[],models:[],office_selected:0,employee_select:{},full_employee:(new d).fetchFromCache({limit:3e4}),employee_list:{}}},componentDidMount:function(){var e=this;this._getEmployeeTopic(),$(".ui.form",this.getDOMNode()).form({inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}})},_save:function(){var e=$(".ui.form",this.getDOMNode());e.addClass("loading");var s=this.state.employee_select,l=this,c=0,d=0;$.each(s,function(e,t){""!=t&&(d=e)}),$.each(s,function(s,u){if(""!=u){var m=u.split(",");m.length>0&&$.each(m,function(u,p){if(parseInt(p)>0){c=1;var h=[];$("#uploadifive-ffile-"+s+"-queue").find(".attachedfileid").each(function(e){h.push($(this).attr("data-id"))}),(new o).save({company_id:a.get("cid"),creator_id:a.get("uid"),store_id:0,office_id:l.state.office_selected,topic_id:s,type:(new o).TYPE_OFFICE,file_id_list:h.join(","),note:$('[name="note['+s+']"]',e).val(),status:(new o).STATUS_ENABLE,employee_id:p},{success:function(e){n.showSuccess(r.t("insert_success")),parseInt(s)==parseInt(d)&&parseInt(u)==m.length-1&&t.history.navigate("employeepoint",{trigger:!0})},error:function(e,t){c=2;var a=[];t.responseJSON.error.map(function(e,t){a.push(i.t(e))}),""==a?n.showError(r.t("insert_fail")):n.showError(a.join(", "))},complete:function(){parseInt(s)==parseInt(d)&&parseInt(u)==m.length-1&&e.removeClass("loading")}})}})}}),0==c&&(n.showError(i.t("error_employee_is_require")),e.removeClass("loading"))},_getEmployeeTopic:function(){var e=this;$("#body-loader").addClass("active");var t={company_id:a.get("cid"),limit:200,status:(new s).STATUS_ENABLE,is_not_deleted:1,sort_by:"display_order",sort_type:"ASC"};(new c).fetch({data:t,success:function(t){e._setEmployee(t),e.setState(t)},complete:function(){$("#body-loader").removeClass("active")}})},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},_getEmployeeByOffice:function(e){var t=this.state.full_employee,n={items:[]};return t.total>0&&t.items.map(function(t,a){if(parseInt(t.office_id)==parseInt(e)){var i=(new u).fetchFromCache({id:t.user_id});i.items.length&&(t.user=i.items[0],n.items.push(t))}}),n},_officeOnchange:function(){var t=$(".ui.form",this.getDOMNode()),n=$(e.findDOMNode(this.refs.store)).dropdown("get value"),a=this._getEmployeeByOffice(n);this.setState({office_selected:n,employee_list:a});var i=this.state.office_selected;this._setEmployee({}),i>0?$(".tableSelect",t).attr("style",""):$(".tableSelect",t).attr("style","display:none")},_setEmployee:function(e){var t={};jQuery.isEmptyObject(e)?this.state.models.map(function(e,n){var a=e.attributes;t[a.id]=""}):e.models.map(function(e,n){var a=e.attributes;t[a.id]=""}),this.setState({employee_select:t})},pickeronadd:function(e,t,n){var a=n.data("topicid"),i=this.state.employee_select;if(i.hasOwnProperty(a)&&""!=e){var r=i[a],o=[];""!=r&&(o=r.split(",")),o.push(e),i[a]=o.join(",")}},pickeronremove:function(e,t,n){var a=n.data("topicid"),i=this.state.employee_select;if(i.hasOwnProperty(a)&&""!=e){var r=i[a],o=[];if(""!=r){o=r.split(",");var s=o.indexOf(e.toString());s>=0&&(o.splice(s,1),i[a]=o.join(","))}}},pickerremoveall:function(e){var t=this.state.employee_select;t[e]=""},_showError:function(e){this.state.office_selected>0&&(n.showError(e),this.setState({office_selected:0}))},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,i.t("topic")),e.createElement("th",null,i.t("employee")),e.createElement("th",{width:"150"}),e.createElement("th",null,i.t("note")),e.createElement("th",null,i.t("file")),e.createElement("th",null,i.t("point")))},render:function(){var t=this,a={};return 0==this.state.office_selected&&(a={display:"none"}),e.createElement("div",{className:"ui segments"},e.createElement(f,{link:"#employeepoint",text:i.t("employeepoint"),subtext:r.t("insert")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,i.t("employeepoint_info_title"))),e.createElement("p",null,i.t("employeepoint_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide  field"},e.createElement("label",null,i.t("office")),e.createElement(h,{onChange:t._officeOnchange,ref:"store",value:t.state.office_selected}))))),e.createElement("div",{className:"ui divider tableSelect",style:{display:"none"}}),e.createElement("div",{className:"fields tableSelect tc-scrolled",style:{display:"none"}},e.createElement("table",{className:"ui small striped selectable unstackable table"},e.createElement("thead",null,n.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,t.state.models.map(function(n,a){return n=n.toJSON(),t.state.office_selected>0?e.createElement(m,{ref:"additem",showerror:t._showError,key:n.id+"_"+moment().unix(),data:n,index:a,pickeronclick:t.pickeronclick,pickeronremove:t.pickeronremove,pickerremoveall:t.pickerremoveall,pickeronadd:t.pickeronadd,employee_list:t.state.employee_list,office_id:t.state.office_selected}):void 0})))),e.createElement(_,null,e.createElement("button",{className:"ui teal button",type:"submit"},r.t("add"))))))}});return v}),define("components/employeepoint/detailitem",["react","helper","querystring","pref","role","models/employeepoint","models/employeepointtopic","models/user","language/employeepoint","language/default","components/datetime"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"EmployeePointDetailItemComponent",_filterStatus:function(t){t.preventDefault();var n=$(e.findDOMNode(this.refs.status)).attr("href").replace("#","");this.props.filterStatus(n)},getInitialState:function(){return{models:[]}},_getUser:function(){$(".ui.modal").modal();var t=this;$("#body-loader").addClass("active"),new s({id:this.props.data.creator_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.employeename)).text(a.fullname)},complete:function(){$("#body-loader").removeClass("active")}})},showEditActionSheet:function(e){e.preventDefault();var n={buttons:[{text:c.t("update"),href:"#employeepoint/edit/"+this.props.data.id}]};t.showActionSheet(n)},componentDidUpdate:function(t,n){i.hasById(264)||$(e.findDOMNode(this.refs.btnedit)).html("")},componentDidMount:function(){this._getUser(),i.hasById(264)||$(e.findDOMNode(this.refs.btnedit)).html("")},renderMobile:function(){var t=this,n=(new o).getType(t.props.data.topicinfo.type);return(new r).getStatus(t.props.data.status),e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading mitemheadingnormal"},t.props.data.topicinfo.name,e.createElement("span",{className:"ui pull-right label small "+n.color},t.props.data.point)),e.createElement("div",{className:"mitemmeta"},e.createElement(d,{ts:this.props.data.date_created})," ",e.createElement("em",null,c.t("by"))," ",e.createElement("span",{ref:"employeename"}))))},renderDesktop:function(){var t=this,n=(new o).getType(t.props.data.topicinfo.type),a=(new r).getStatus(t.props.data.status);return e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{ref:"type",href:"#"+n.code,className:"ui label tiny "+n.color},t.props.data.topicinfo.name)),e.createElement("td",null,e.createElement("a",{href:"javascript:void(0)",className:"ui label tiny "},t.props.data.point)),e.createElement("td",{ref:"employeename"}),e.createElement("td",null," ",e.createElement("a",{ref:"type",href:"#"+a.code,className:"ui label tiny "+a.color},a.text)),e.createElement("td",null,moment.unix(t.props.data.date_created).format("HH:mm, DD/MM/YYYY")),e.createElement("td",{ref:"btnedit"},e.createElement("a",{href:"#employeepoint/edit/"+this.props.data.id,className:"ui basic button mini"},e.createElement("i",{className:"icon tc-pencil"}),l.t("update"))))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return u}),define("components/employeepoint/detail",["react","helper","eventbus","querystring","pref","models/employeepointtopic","models/employeepoint","models/user","collections/employeepoint","components/employeepoint/detailitem","components/semantic-datepicker","components/pagination","language/employeepoint","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"EmployeePointDetailComponent",_filterStatus:function(t){t.preventDefault();var n=$(e.findDOMNode(this.refs.status)).attr("href").replace("#","");this.props.filterStatus(n)},getInitialState:function(){return{models:[],length:0,total:0,currentpage:1,calcreator:{}}},_getEmployeePoint:function(){$(".ui.modal").modal();var e=this;$("#body-loader").addClass("active");var t={company_id:i.get("cid"),limit:20,page:a.get("page")||1,keyword:a.get("keyword")||"",status:a.get("status")||null,type:(new o).TYPE_OFFICE,store_id:a.get("store_id")||null,creator_id:a.get("creator_id")||null,date_started:a.get("date_started")||null,date_ended:a.get("date_ended")||null,employee_id:e.props.data.id||null,gettopicinfo:1,is_not_deleted:1,sort_by:a.get("sort_by")||"id",sort_type:a.get("sort_type")||"DESC"};(new l).fetch({data:t,success:function(t){e.setState(t),e._calCreator()},complete:function(){$("#body-loader").removeClass("active")}})},_pagiLoad:function(e){a.set("page",e),this._getEmployeePoint()},_calCreator:function(){$("#body-loader").addClass("active");var t=this,n={company_id:i.get("cid"),status:(new o).STATUS_ENABLE,employee_id:t.props.data.id||null,date_started:a.get("date_started")||null,date_ended:a.get("date_ended")||null,is_not_deleted:1};(new o).getSummary(n,function(n){var a={},i=n.items,r=i.created_by;t._calRenderTotal(i);var o=0,l=0;$(e.findDOMNode(t.refs.calcreator)).html("");var c=Object.keys(r)[Object.keys(r).length-1];$.each(r,function(n,r){a.hasOwnProperty(n)||new s({id:n}).fetch({success:function(e,t){a[t.id]=t.fullname}});var d=r.bad,u=r.good,p=Math.floor(100*u/i.good),h=Math.floor(100*d/i.bad);c==n?(p=100-o,h=100-l):(o+=p,l+=h);var f=e.renderToStaticMarkup(e.createElement("tr",null,e.createElement("td",null,a[n]),e.createElement("td",{className:"employeepointaddpoint",style:{backgroundSize:p+"%"},title:p+"%"},r.good+" "+m.t("point").toLowerCase()),e.createElement("td",{className:"employeepointsubpoint",style:{backgroundSize:h+"%"},title:h+"%"},r.bad+" "+m.t("point").toLowerCase()),e.createElement("td",null,r.topic+" "+m.t("topic").toLowerCase())));$(e.findDOMNode(t.refs.calcreator)).append(f)})})},_calRenderTotal:function(t){var n=t.good,a=t.bad,i=0,r=n-a,o="green";r>0?i=n+a:o="red",$(e.findDOMNode(this.refs.totalgood)).text(n+0+m.t("point").toLowerCase()),$(e.findDOMNode(this.refs.totalbad)).text(a+0+m.t("point").toLowerCase()),$(e.findDOMNode(this.refs.subtotal)).text(r+0+m.t("point").toLowerCase()).attr("style","color:"+o),$("#body-loader").removeClass("active")},_selectInit:function(){var e=this;$(this.refs["filter-status"].getDOMNode()).dropdown({onShow:this._filterShow,onHide:this._filterHide,fullTextSearch:!0,message:{noResults:p.t("search_no_result")},onChange:function(t,n){a.set("page",1),a.set("status",t),e._getEmployeePoint()}})},_filterShow:function(){var e=400+$(".tc-scrolled table",this.getDOMNode()).outerHeight(!0);$(".tc-scrolled",this.getDOMNode()).css({minHeight:e})},_filterHide:function(){$(".tc-scrolled",this.getDOMNode()).eq(0).css({minHeight:0})},_resetQuery:function(t){t.preventDefault(),$(this.refs["filter-status"].getDOMNode()).dropdown("destroy").dropdown("clear"),this._selectInit(),$(e.findDOMNode(this.refs.datePicker.refs.bootstrap_datepicker_input)).data("daterangepicker").setStartDate(moment([]).subtract(44,"days")),$(e.findDOMNode(this.refs.datePicker.refs.bootstrap_datepicker_input)).data("daterangepicker").setEndDate(moment()),a.reset(),a.set("date_started",moment([]).subtract(44,"days").unix({h:0,m:0,s:0})),a.set("date_ended",moment().unix({h:23,m:59,s:59})),this._getEmployeePoint()},componentDidMount:function(){a.set("date_started",moment([]).subtract(44,"days").unix({h:0,m:0,s:0})),a.set("date_ended",moment().unix({h:23,m:59,s:59})),this._getEmployeePoint(),this._selectInit()},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){var t=this;return e.createElement("tr",null,e.createElement("th",null,m.t("topic")),e.createElement("th",null,m.t("point")),e.createElement("th",null,m.t("creator")),e.createElement("th",null,m.t("status")," ",e.createElement("div",{ref:"filter-status",className:"ui pointing top left dropdown",onHide:t._filterHide,onShow:t._filterShow},e.createElement("a",{className:"tc-filter icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"scrolling menu"},e.createElement("div",{"data-value":"",className:"item"},p.t("all")),e.createElement("div",{className:"divider"}),(new o).getStatusList().map(function(t){return e.createElement("div",{"data-value":t.code,key:t.code,className:"item"},t.text)}))))),e.createElement("th",null,m.t("datecreated")),e.createElement("th",null))},render:function(){var n=this,i={},r=p.t("relativeToday"),o=p.t("relativeYesterday"),s=p.t("rel7Day"),l=p.t("rel7Day"),h=p.t("relMonthAgo"),f=p.t("relMonthNow");return i[r]=[moment([]),moment()],i[o]=[moment().subtract(1,"days"),moment()],i[s]=[moment().subtract(6,"days"),moment()],i[l]=[moment().subtract(29,"days"),moment()],i[h]=[moment().startOf("month"),moment().endOf("month")],i[f]=[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],e.createElement("div",{className:"ui segment",id:"employeepointdetail"},e.createElement("div",{className:"ui form"},e.createElement("div",{className:"ui clearing segment",style:{paddingLeft:0}},e.createElement("h3",{className:"pull-left"},e.createElement("a",{href:"#employeepoint",onClick:n._resetQuery}," ",m.t("employeepoint")," / ",m.t("detail")," - ",m.t("employee"),": ",n.props.data.fullname)),e.createElement("div",{className:"pull-right"},e.createElement("div",{className:"ui horizontal list mini"},e.createElement("div",{style:{verticalAlign:"middle"},className:"item"},e.createElement(d,{ref:"datePicker",options:{format:"DD/MM/YYYY",startDate:moment([]).subtract(44,"days"),endDate:moment(),ranges:i,opens:"left",timePicker:!0,timePickerIncrement:1,timePicker12Hour:!1,applyClass:"ui button green",cancelClass:"ui button secondary"},callBack:function(e,t){a.set("page",1),a.set("date_started",e.unix()),a.set("date_ended",t.unix()),n._getEmployeePoint()}}))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field eight wide"},e.createElement("table",{className:"ui  selectable unstackable table scrollbar"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,m.t("type")),e.createElement("th",null))),e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",null,m.t("point_good")),e.createElement("td",{style:{color:"green"},ref:"totalgood"})),e.createElement("tr",null,e.createElement("td",null,m.t("point_bad")),e.createElement("td",{style:{color:"red"},ref:"totalbad"})),e.createElement("tr",null,e.createElement("td",null,m.t("point_good")," - ",m.t("point_bad")),e.createElement("td",{ref:"subtotal"}))))),e.createElement("div",{className:"field eight wide"},e.createElement("div",{className:"fields"},e.createElement("table",{className:"ui selectable unstackable table scrollbar"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,m.t("")),e.createElement("th",null,m.t("good")),e.createElement("th",null,m.t("bad")),e.createElement("th",null,m.t("totaltopiccheked")))),e.createElement("tbody",{ref:"calcreator"})))))),e.createElement("table",{className:t.tableclass()},e.createElement("thead",null,t.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,n.state.models.map(function(t,n){return t=t.toJSON(),e.createElement(c,{key:t.id+"_"+moment.unix(),data:t})}))),e.createElement("div",{className:"ui right aligned"},Math.ceil(this.state.total/this.state.limit)>1?e.createElement(u,{onClick:this._pagiLoad,currentPage:this.state.currentpage,totalPage:Math.ceil(this.state.total/this.state.limit)}):""))}});return h}),define("components/employeepoint/filethumbnail",["react","setting","models/file"],function(e,t,n){var a=e.createClass({displayName:"FileThumbnailComponent",remove:function(){this.props.remove(this.props.data.id)},componentDidMount:function(){$.inArray(this.props.data.extension,["jpg","png","jpeg"])>=0&&$(e.findDOMNode(this.refs.image)).colorbox({rel:"gal",maxWidth:"100%"})},componentWillUnmount:function(){},render:function(){var t=new n(this.props.data),a=this;return e.createElement("div",{className:"column"},e.createElement("div",{className:"ui tiny fluid image"},e.createElement("a",{className:"ui red right corner label tiny"},e.createElement("i",{className:"icon tc-trash",onClick:a.remove})),e.createElement("a",{href:t.getDownloadUrl(),title:this.props.data.title,ref:"image",rel:"gal"},e.createElement("img",{src:t.getThumbnail()}))))},getThumbnailFromExtension:function(e){}});return a}),define("components/employeepoint/filestrip",["react","components/employeepoint/filethumbnail"],function(e,t){var n=e.createClass({displayName:"FileStripComponent",getDefaultProps:function(){return{files:[]}},getInitialState:function(){return{files:this.props.files,file_delete:[]}},remove:function(e){var t=this.state.files,n=this.state.file_delete;this.state.files.map(function(a,i){e==a.id&&(t.splice(i,1),n.push(e))}),this.setState({files:t,file_delete:n})},getFilelist:function(){var e=[];return this.state.files.map(function(t,n){e.push(t.id)}),e},getFileDeletelist:function(){var e=[];return this.state.file_delete.map(function(t,n){e.push(t)}),e},componentDidMount:function(){},componentWillUnmount:function(){},render:function(){var n=this;return e.createElement("div",{className:"ui tiny images",style:{marginTop:"8px"}},this.state.files.map(function(a,i){return e.createElement(t,{data:a,key:a.id,remove:n.remove})}))}});return n}),define("components/employeepoint/edit",["react","backbone","helper","pref","language/employeepoint","language/default","models/employeepoint","models/employeepointtopic","models/user","models/office","models/file","components/employeepoint/filestrip","components/select-status","components/heading","components/employeepoint/select-topic","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"EmployeePointEditComponent",getInitialState:function(){return{checkeditems:""}},_getStore:function(){var t=this;new c({id:this.props.data.office_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.office)).val(a.name)}})},_getUser:function(){var t=this;new l({id:this.props.data.creator_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.creator)).val(a.fullname)}})},getFileList:function(){var t=this.props.data.file_id_list,n=[],a=this.props.data.file_id_list.split(",");if(a.length){var i=this.refs.filestrip.getFileDeletelist();i.length&&($.each(i,function(e,t){var n=t.toString(),i=jQuery.inArray(n,a);i>-1&&a.splice(i,1)}),t=a.join(","))}return $(e.findDOMNode(this)).find(".attachedfileid").each(function(e){n.push($(this).attr("data-id"))}),filelist=t,n.length&&(""!=filelist?filelist=filelist+","+n.join(","):filelist=n.join(",")),filelist},_save:function(){var s=$(".ui.form",this.getDOMNode());s.addClass("loading"),filelist=this.getFileList(),new o({id:this.props.data.id}).save({company_id:a.get("cid"),creator_id:a.get("uid"),note:$('[name="note"]',s).val(),file_id_list:filelist,topic_id:$(e.findDOMNode(this.refs.topic)).dropdown("get value"),status:$(e.findDOMNode(this.refs.status)).dropdown("get value")},{success:function(){n.showSuccess(r.t("update_success")),t.history.navigate("employeepoint",{trigger:!0})},error:function(e,t){var a=[];t.responseJSON.error.map(function(e,t){a.push(i.t(e))}),""==a?n.showError(r.t("update_fail")):n.showError(a.join(", "))},complete:function(){s.removeClass("loading")}})},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},componentDidMount:function(){var t=this;this._getUser(),this._getStore(),(new d).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new d).OBJECTTYPE_WORKGROUP,0,(new d).STATUS_ENABLE),$(".ui.form",this.getDOMNode()).form({fields:{name:{identifier:"name",rules:[{type:"empty",prompt:i.t("error_name_is_require")}]},point:{identifier:"point",rules:[{type:"empty",prompt:i.t("error_point_is_require")}]}},inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t._save()}})},render:function(){var t=this,n="ffile-"+this.props.data.id;return e.createElement("div",{className:"ui segments"},e.createElement(p,{link:"#employeepoint",text:i.t("employeepoint"),subtext:r.t("update")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,i.t("employeepoint_info_title"))),e.createElement("p",null,i.t("employeepoint_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide  field"},e.createElement("label",null,i.t("office")),e.createElement("input",{disabled:!0,ref:"office"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,i.t("creator")),e.createElement("input",{disabled:!0,ref:"creator",type:"text"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four field wide"},e.createElement("label",null,i.t("topic")),e.createElement(h,{key:a.get("uid"),ref:"topic",value:t.props.data.topic_id,placeholder:i.t("placeholder")}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"twelve wide  field"},e.createElement("label",null,i.t("note")),e.createElement("input",{name:"note",type:"text",defaultValue:t.props.data.note}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight field wide",id:"employeepointfile"},e.createElement("label",null,i.t("file")),e.createElement("input",{type:"file",ref:"fileinput",id:n,name:"ffile",multiple:"multiple"}),e.createElement(u,{ref:"filestrip",files:t.props.data.filedetail}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("status")),e.createElement(m,{key:a.get("uid"),ref:"status",data:(new o).getStatusList(),value:t.props.data.status}))))),e.createElement(f,null,e.createElement("button",{className:"ui teal button",type:"submit"},r.t("save"))))))}});return g}),define("components/employeepoint/employee",["react","helper","pref","querystring","models/employeepoint","models/employeepointtopic","models/user","collections/employeepoint","language/employeepoint"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"EmployeePointEmployeeComponent",_filterStatus:function(t){t.preventDefault();var n=$(e.findDOMNode(this.refs.status)).attr("href").replace("#","");this.props.filterStatus(n)},getInitialState:function(){return{topictype:0,totaltopic:0,goodpoint:0,badpoint:0}},componentDidMount:function(){this._getUser(this.props.data.user_id,"employeename"),this._getEmployeePoint(1)},_getEmployeePoint:function(t){$(".ui.modal").modal();var o=this;$("#body-loader").addClass("active");var c=50,d={company_id:n.get("cid"),limit:c,page:t||1,date_started:o.props.datestarted,date_ended:o.props.dateended,gettopicinfo:1,status:(new i).STATUS_ENABLE,type:(new i).TYPE_OFFICE,employee_id:o.props.data.user_id||null,sort_by:a.get("sort_by")||"id",sort_type:a.get("sort_type")||"DESC"};(new s).fetch({data:d,success:function(n,a){var i=a.total,s=a.items,d=s.length,u=0,m=0,p=(new r).TYPE_GOOD;if(s.map(function(e){var t=e.topicinfo;"undefined"!=typeof t&&(t.type==p?u+=parseInt(e.point):m+=parseInt(e.point))}),d>0){o.setState({totaltopic:i});var h=parseInt(o.state.goodpoint)+parseInt(u),f=parseInt(o.state.badpoint)+parseInt(m);o.setState({goodpoint:h}),o.setState({badpoint:f}),d==c&&o._getEmployeePoint(parseInt(t)+1)}d>0&&i>0&&e.render(e.createElement("a",{href:"#employeepoint/detail/"+o.props.data.user_id,className:"ui basic button mini"},l.t("detail")),o.refs.btndetail.getDOMNode())},complete:function(){$("#body-loader").removeClass("active")}})},_getUser:function(t,n){var a=this;new o({id:t}).fetch({success:function(t,i){e.render(e.createElement("span",null,i.fullname),a.refs[n].getDOMNode())}})},renderMobile:function(){var t=this,n=this.state.goodpoint-this.state.badpoint,a=classTotal="tag disabled";return a=0>n?"red":n>0?"green":"disabled",e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#employeepoint/detail/"+this.props.data.user_id,className:"mitemheading mitemheadingnormal mitemheadingnomargin"},e.createElement("span",{ref:"employeename"}),e.createElement("span",{className:"pull-right ui label small "+a},n)),e.createElement("div",{className:"mitemmeta"},t.props.data.office.name," ·",l.t("plus")+": "+t.state.totaltopic+" ("+l.t("plus")+": "+t.state.goodpoint+", "+l.t("minus")+": "+t.state.badpoint+" )")))},renderDesktop:function(){var t=this,n=this.state.goodpoint-this.state.badpoint,a=classTotal="tag disabled";return a=0>n?"red":n>0?"green":"disabled",this.state.totaltopic>0&&(classTotal="blue tag"),e.createElement("tr",null,e.createElement("td",null,t.props.data.office.name),e.createElement("td",{ref:"employeename"}),e.createElement("td",null,e.createElement("a",{className:"ui label small tcw50 "+classTotal},t.state.totaltopic)),e.createElement("td",null,e.createElement("a",{className:"ui label small tcw30 "+(t.state.goodpoint>0?"basic green":"disabled")},t.state.goodpoint)),e.createElement("td",null,"-"),e.createElement("td",null,e.createElement("a",{className:"ui label small tcw30 "+(t.state.goodpoint>0?"basic red":"disabled")},t.state.badpoint)),e.createElement("td",null,"="),e.createElement("td",null,e.createElement("a",{className:"ui label small tcw30 "+a},n)),e.createElement("td",{style:{textAlign:"right"},ref:"btndetail"}))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return c}),define("components/employeepoint/item",["react","helper","pref","role","eventbus","models/employeepoint","models/employeepointtopic","models/user","collections/office","language/employeepoint","language/default","components/datetime","components/table/updatebutton"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"EmployeePointComponent",_filterStatus:function(e){e.preventDefault(),this.props.filter("status",this.props.data.status)},_filterTopic:function(e){e.preventDefault(),this.props.filter("topic_id",this.props.data.topic_id)},getInitialState:function(){return{topictype:0,topicname:""}},renderData:function(t){var n=t.action,a=t.data;if("topic"==n&&a.id==this.props.data.topic_id){var i=(new o).getType(a.type);$(e.findDOMNode(this.refs.topicname)).text(a.name),$(e.findDOMNode(this.refs.typetopic)).text(i.text)}},_getUser:function(t,n){var a=this;new s({id:t}).fetch({success:function(t,i){e.render(e.createElement("span",null,i.fullname),a.refs[n].getDOMNode())}})},showEditActionSheet:function(e){e.preventDefault();var n={buttons:[{text:d.t("update"),href:"#employeepoint/edit/"+this.props.data.id}]};t.showActionSheet(n)},componentWillUnmount:function(){i.off("employeepointitem:render",this.renderData)},componentDidUpdate:function(t,n){a.hasById(264)||$(e.findDOMNode(this.refs.btnedit)).html("")},componentDidMount:function(){this._getUser(this.props.data.employee_id,"employeename"),this._getUser(this.props.data.creator_id,"creatorname"),i.on("employeepointitem:render",this.renderData),a.hasById(264)||$(e.findDOMNode(this.refs.btnedit)).html("")},renderMobile:function(){var t=(new r).getStatus(this.props.data.status),n=(new o).getType(this.state.topictype),a=this,i="";return this.props.office_list.map(function(e,t){a.props.data.office_id==e.id&&(i=e.name)}),e.createElement("tr",null,e.createElement("td",null,e.createElement("div",{className:"mitemdotleft"},e.createElement("span",{className:"mitemdot mitemdot"+t.color})),e.createElement("div",{className:"mitemdotright"},e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading"},e.createElement("a",{className:"nocolor",ref:"employeename",href:"#employeepoint/detail/"+this.props.data.employee_id}),e.createElement("span",{className:"ui mini pull-right basic label "+n.color},a.props.data.point),e.createElement("span",{className:"ui mini pull-right basic label",ref:"officename"},i)),e.createElement("div",{className:"mitemmeta clear"},a.state.topicname," · ",e.createElement("br",null),e.createElement(u,{ts:this.props.data.date_created})," ",e.createElement("em",null,d.t("by"))," ",e.createElement("span",{ref:"creatorname"})))))},renderDesktop:function(){var t=(new r).getStatus(this.props.data.status),n="",a=this;this.props.office_list.map(function(e,t){a.props.data.office_id==e.id&&(n=e.name)});var a=this;return e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#employeepoint/detail/"+this.props.data.employee_id},this.props.data.id)),e.createElement("td",null,e.createElement("span",{
ref:"employeename"})),e.createElement("td",{ref:"officename"},n),e.createElement("td",null,e.createElement("span",{ref:"topicname"})),e.createElement("td",null,e.createElement("span",{ref:"typetopic"})),e.createElement("td",null,a.props.data.point),e.createElement("td",null,e.createElement("span",{className:"ui small label simple "+t.color},t.text)),e.createElement("td",{ref:"creatorname"}),e.createElement("td",null,moment.unix(a.props.data.date_created).format("HH:mm, DD/MM/YYYY")),e.createElement("td",{className:"right aligned collapsing",ref:"btnedit"},e.createElement(m,{link:"#employeepoint/edit/"+this.props.data.id})))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return p}),define("components/employeepoint/modal-export",["react","backbone","eventbus","setting","helper","language/employeepoint","language/default","components/select/office","components/select-employee","components/headingdatepicker"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"ModalExportSummaryComponent",doExport:function(t){t.preventDefault();var n=this.props.query,a={};a.date_started=this.refs.time.getDateStart(),a.date_ended=this.refs.time.getDateEnd();var r=$(e.findDOMNode(this.refs.office)).dropdown("get value");r>0&&(a.office_id=r);var o=$(e.findDOMNode(this.refs.employee)).dropdown("get value");o>0&&(a.employee_id=o),$(this.getDOMNode()).modal("hide"),$.isEmptyObject(a)||(n+="&"+$.param(a)),window.open(n,i.getWindowTarget())},componentDidMount:function(){$(".ui.modal",e.findDOMNode(this)).modal({context:e.findDOMNode(this),autofocus:!1,onShow:function(){},onHide:function(){n.trigger("employeepoint:modalhide")}}).modal("show")},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal"},e.createElement("div",{className:"header"},r.t("heading_export")),e.createElement("div",{className:"content"},e.createElement("div",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,r.t("filter_office_id")),e.createElement(s,{value:this.props.query.office_id,ref:"office"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,r.t("employee")),e.createElement(l,{className:"fluid",ref:"employee"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,r.t("time")),e.createElement(c,{start:this.props.query.date_started,end:this.props.query.date_ended,ref:"time"}))))),e.createElement("div",{className:"actions"},e.createElement("a",{className:"ui noborder basic button cancel close"},o.t("close")),e.createElement("a",{onClick:this.doExport,className:"ui button teal"},r.t("download_excel")))))}});return d}),define("components/employeepointtopic/add",["react","backbone","helper","pref","language/employeepointtopic","language/setting","language/default","models/employeepointtopic","components/heading","components/select-status","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"EmployeePointTopicAddComponent",getInitialState:function(){return{modelitems:[],checkeditems:""}},componentDidMount:function(){var e=this;$(".ui.form",this.getDOMNode()).form({fields:{name:{identifier:"name",rules:[{type:"empty",prompt:i.t("error_title_is_require")}]},point:{identifier:"point",rules:[{type:"empty",prompt:i.t("error_point_is_require")},{type:"regExp[/[0-9]/]",prompt:i.t("error_point_is_require")}]}},inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}})},_save:function(){var r=$(".ui.form",this.getDOMNode());r.addClass("loading"),(new s).save({company_id:a.get("cid"),creator_id:a.get("uid"),name:$('[name="name"]',r).val(),point:$('[name="point"]',r).val(),type:$(e.findDOMNode(this.refs.type)).dropdown("get value"),status:(new s).STATUS_ENABLE},{success:function(){n.showSuccess(o.t("insert_success")),t.history.navigate("employeepointtopic",{trigger:!0})},error:function(e,t){var a=[];t.responseJSON.error.map(function(e,t){a.push(i.t(e))}),""==a?n.showError(o.t("insert_fail")):n.showError(a.join(", "))},complete:function(){r.removeClass("loading")}})},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement(l,{link:"#employeepointtopic",text:i.t("employeepointtopic"),subtext:o.t("insert")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,i.t("employeepointtopic_info_title"))),e.createElement("p",null,i.t("employeepointtopic_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,i.t("name")),e.createElement("input",{name:"name",type:"text"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,i.t("type")),e.createElement(c,{key:a.get("uid"),ref:"type",data:(new s).getTypeList(),value:(new s).TYPE_GOOD}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,i.t("point")),e.createElement("input",{name:"point",onInput:t._unsignedInput,type:"number"}))))),e.createElement(d,null,e.createElement("button",{className:"ui teal button",type:"submit"},o.t("add"))))))}});return u}),define("components/employeepointtopic/edit",["react","backbone","helper","pref","language/employeepointtopic","language/default","language/setting","models/employeepointtopic","components/heading","components/select-status","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"EmployeePointTopicEditComponent",getInitialState:function(){return{modelitems:[],checkeditems:"",storeselected:0}},componentDidMount:function(){var e=this;$(".ui.form",this.getDOMNode()).form({fields:{name:{identifier:"name",rules:[{type:"empty",prompt:i.t("error_name_is_require")}]},point:{identifier:"point",rules:[{type:"empty",prompt:i.t("error_point_is_require")}]}},inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}})},_save:function(){var o=$(".ui.form",this.getDOMNode());o.addClass("loading"),new s({id:this.props.data.id}).save({company_id:a.get("cid"),creator_id:a.get("uid"),name:$('[name="name"]',o).val(),display_order:$('[name="displayorder"]',o).val(),point:$('[name="point"]',o).val(),type:$(e.findDOMNode(this.refs.type)).dropdown("get value"),status:$(e.findDOMNode(this.refs.status)).dropdown("get value")},{success:function(){n.showSuccess(r.t("update_success")),t.history.navigate("employeepointtopic",{trigger:!0})},error:function(e,t){var a=[];t.responseJSON.error.map(function(e,t){a.push(i.t(e))}),""==a?n.showError(r.t("update_fail")):n.showError(a.join(", "))},complete:function(){o.removeClass("loading")}})},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement(l,{link:"#employeepointtopic",text:i.t("employeepointtopic"),subtext:r.t("update")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,i.t("employeepointtopic_info_title"))),e.createElement("p",null,i.t("employeepointtopic_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,i.t("name")),e.createElement("input",{name:"name",type:"text",defaultValue:t.props.data.name}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,i.t("type")),e.createElement(c,{key:a.get("uid"),ref:"type",data:(new s).getTypeList(),value:t.props.data.type}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,i.t("point")),e.createElement("input",{name:"point",defaultValue:t.props.data.point,onInput:t._unsignedInput,type:"number"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("displayorder")),e.createElement("input",{name:"displayorder",onInput:t._unsignedInput,type:"number",defaultValue:t.props.data.display_order}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("status")),e.createElement(c,{key:a.get("uid"),ref:"status",data:(new s).getStatusList(),value:t.props.data.status}))))),e.createElement(d,null,e.createElement("button",{className:"ui teal button",type:"submit"},r.t("save"))))))}});return u}),define("components/employeepointtopic/item",["react","eventbus","helper","pref","models/employeepointtopic","language/employeepointtopic","components/table/updatebutton","components/row-creator","components/datetime"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"EmployeePointTopicComponent",_filterStatus:function(e){e.preventDefault(),this.props.filter("status",this.props.data.status)},_filterCreator:function(e){e.preventDefault(),this.props.filter("creator_id",this.props.data.creator_id)},_filterType:function(e){e.preventDefault(),this.props.filter("type",this.props.data.type)},showEditActionSheet:function(e){e.preventDefault();var t={buttons:[{text:r.t("update"),href:"#employeepointtopic/edit/"+this.props.data.id}]};n.showActionSheet(t)},componentWillUnmount:function(){},componentDidMount:function(){},renderMobile:function(){var t=(new i).getStatus(this.props.data.status),n=(new i).getType(this.props.data.type),a=this;return e.createElement("tr",null,e.createElement("td",null,e.createElement("div",{className:"mitemdotleft"},e.createElement("span",{className:"mitemdot mitemdot"+t.color})),e.createElement("div",{className:"mitemdotright"},e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading"},e.createElement("a",{className:"nocolor"},this.props.data.name),e.createElement("span",{className:"ui mini pull-right basic label "+n.color},a.props.data.point)))))},renderDesktop:function(){var t=(new i).getStatus(this.props.data.status),n=(new i).getType(this.props.data.type);return e.createElement("tr",null,e.createElement("td",null,this.props.data.id),e.createElement("td",null,e.createElement("a",{href:"#employeepointtopic/edit/"+this.props.data.id},this.props.data.name)),e.createElement("td",null,n.text),e.createElement("td",{className:"center aligned"},this.props.data.display_order),e.createElement("td",{className:"center aligned"},this.props.data.point),e.createElement("td",null,e.createElement("span",{className:"ui small simple label "+t.color},t.text)),e.createElement(s,{id:this.props.data.creator_id}),e.createElement("td",null,e.createElement(l,{ts:this.props.data.date_created})),e.createElement("td",{className:"right aligned"},e.createElement(o,{link:"#employeepointtopic/edit/"+this.props.data.id})))},render:function(){return n.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return c}),define("components/expandemployeepicker",["react","helper","pref","cacheddata","models/user","language/default","collections/employee","collections/group"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"ExpandEmployeePickerComponent",updateEmployeeToView:function(n){var a=this;$.each(n,function(n,r){new i({id:r.user_id}).fetch({success:function(n,i){html='<div class="item" data-value="'+i.id+'" data-text="'+i.fullname+'"><img class="ui mini avatar image" style="width: 24px; height: 24px; max-height: initial;" src="'+t.getAvatarPath(i.avatar)+'" />'+i.fullname+"</div>",$(e.findDOMNode(a.refs.employeelist)).append(html)}})})},updateGroupToView:function(n){var a=this;$.each(n,function(n,i){html='<div class="item" data-value="g'+i.id+'" data-text="'+i.name+'"><img class="ui mini avatar image" style="width: 24px; height: 24px; max-height: initial;" src="'+t.getAvatarPath("")+'" />'+i.name+"</div>",$(e.findDOMNode(a.refs.employeelist)).append(html)})},getDefaultProps:function(){return{inputname:"",inputid:"",defaulttext:"----",disabled:"",defaultvalue:[],max:200}},initSelected:function(){this.props.defaultvalue.length>0&&this.setList(this.props.defaultvalue)},componentWillUpdate:function(){},componentDidMount:function(){var t=this,i='<div class="header">'+r.t("employee")+'</div><div class="divider"></div>',l=2,c=0;$(e.findDOMNode(t.refs.employeelist)).append(i);var d=[];a.has("employee")?(d=a.get("employee"),this.updateEmployeeToView(d().get()),c++):($(e.findDOMNode(this.refs.dropdown)).addClass("loading"),(new o).fetch({data:{company_id:n.get("cid"),limit:200,is_not_deleted:1},success:function(e,n){t.updateEmployeeToView(n.items)},complete:function(){c++,c==l&&($(e.findDOMNode(t.refs.dropdown)).removeClass("loading"),t.initSelected())}})),(new s).fetch({data:{company_id:n.get("cid"),limit:200,is_not_deleted:1},success:function(n,a){a.items.length>0?($(e.findDOMNode(t.refs.employeelist)).append('<div class="header">Nhóm</div><div class="divider"></div>'),t.updateGroupToView(a.items)):($(e.findDOMNode(t.refs.employeelist)).find(".header").remove(),$(e.findDOMNode(t.refs.employeelist)).find(".divider").remove())},complete:function(){c++,c==l&&($(e.findDOMNode(t.refs.dropdown)).removeClass("loading"),t.initSelected())}}),$(e.findDOMNode(this.refs.dropdown)).dropdown({maxSelections:this.props.max,fullTextSearch:!0,onAdd:function(n,a,i){t._onLabelSelect(n,a,i),$(e.findDOMNode(t.refs.dropdown)).dropdown("hide")},onChange:function(e,n,a){t._onChange(e,n,a)}}),c==l&&this.initSelected()},_onChange:function(e,t,n){"function"==typeof this.props.onChange&&this.props.onChange(e,t,n)},_onLabelSelect:function(e,t,n){"function"==typeof this.props.callbackSelected&&this.props.callbackSelected(e,t,n)},restoreDefaults:function(){$(e.findDOMNode(this.refs.dropdown)).dropdown("restore defaults")},setList:function(t){var n=[];t.forEach(function(e,t){n.push(e.toString())}),$(e.findDOMNode(this.refs.dropdown)).dropdown("refresh").dropdown("set selected",n)},getSelectedUserIdList:function(){var t=[],n=$(e.findDOMNode(this.refs.dropdown)).dropdown("get value");return n.length>0&&(t=n.split(",")),t},render:function(){return defaultText=this.props.defaulttext,e.createElement("div",{ref:"dropdown",className:"ui fluid multiple search selection dropdown "+this.props.disabled},e.createElement("input",{type:"hidden",name:this.props.inputname,id:this.props.inputid}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},defaultText),e.createElement("div",{className:"menu",ref:"employeelist"}))}});return l}),define("components/file/item",["react","setting","backbone","helper","eventbus","role","models/user","models/file","language/file","language/default","components/confirm","components/employee-avatar"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"FileItemComponent",editHandler:function(e){e.preventDefault(),i.trigger("file:edit",this.props.data)},deleteHandler:function(){i.trigger("file:delete",this.props.data),$(e.findDOMNode(this.refs.deletebuttonicon)).hide(),a.loaderAppend($(e.findDOMNode(this.refs.deletebutton)))},removeLoaderIndicator:function(t){this.props.data.id==t.id&&($(e.findDOMNode(this.refs.deletebuttonicon)).show(),a.loaderRemove($(e.findDOMNode(this.refs.deletebutton))))},getDownloadUrl:function(){var e="";return e=t.rooturl+"v1/files/download?id="+this.props.data.id+"&hash="+this.props.data.md5_hash+"&path="+encodeURIComponent(this.props.data.file_path)},getIcon:function(){var e="";return 1==this.props.data.is_directory?e="imgs/filetype/folder_special.png":(e=""==this.props.data.extension?"folder.png":$.inArray(this.props.data.extension,["jpg","jpeg","png","gif","ai","psd","tiff"])>=0?"jpg.png":"pdf"==this.props.data.extension?"pdf.png":"html"==this.props.data.extension?"html.png":"xls"==this.props.data.extension||"xlsx"==this.props.data.extension?"xls.png":$.inArray(this.props.data.extension,["mp3","ogg","wav","wma"])>=0?"mp3.png":$.inArray(this.props.data.extension,["mp4","mov","avi"])>=0?"mov.png":$.inArray(this.props.data.extension,["ppt","pptx"])>=0?"ppt.png":$.inArray(this.props.data.extension,["doc","docx"])>=0?"doc.png":$.inArray(this.props.data.extension,["zip","gz","bzip","gzip","7z"])>=0?"zip.png":$.inArray(this.props.data.extension,["rar"])>=0?"rar.png":"html.png",e="imgs/filetype/"+e),e},getIconWidth:function(){return 1==this.props.data.is_directory?32:24},isDirectory:function(){return 1==this.props.data.is_directory},showCreator:function(){var t=this;new o({id:this.props.data.creator_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.creator)).empty().append(n.toJSON().fullname)}})},getLinkTooltip:function(){return this.isDirectory()?l.t("click_to_open"):l.t("click_to_view")},showEditActionSheet:function(e){e.preventDefault();var t=this,n=new s(this.props.data),i=[];n.isDirectory()||i.push({text:l.t("download"),href:n.getDownloadUrl()}),i.push({text:l.t("rename")+" "+(n.isDirectory()?l.t("this_dir").toLowerCase():l.t("this_file").toLowerCase()),onClick:function(e){t.editHandler(e)}}),i.push({text:l.t("remove")+" "+(n.isDirectory()?l.t("this_dir").toLowerCase():l.t("this_file").toLowerCase()),color:"#ff0000",onClick:function(e){1==confirm(c.t("confirm_msg_default"))&&t.deleteHandler()}});var r={text:l.t("choose_function"),buttons:i};a.showActionSheet(r)},updateInfo:function(){var t=this;this.props.data.creator_id>0&&e.findDOMNode(this.refs.creator)&&new o({id:this.props.data.creator_id}).fetch({success:function(n,a){e.render(e.createElement("span",null,a.fullname),e.findDOMNode(t.refs.creator))}})},clickHandler:function(e){if(this.isDirectory()){var t="/file";this.props.data.id>0&&(t+="/index/did/"+this.props.data.id),n.history.navigate(t,{trigger:!0})}else this.doFilePreview(e);e.preventDefault()},componentWillUnmount:function(){i.off("fileitem:removeloader",this.removeLoaderIndicator)},componentDidMount:function(){i.on("fileitem:removeloader",this.removeLoaderIndicator),this.updateInfo();var t=this;$(e.findDOMNode(this.refs.deletebutton)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(d,null)),onShow:function(){$(this).find(".confirm").fastClick(function(n){n.preventDefault(),$(e.findDOMNode(t.refs.deletebutton)).popup("hide"),t.deleteHandler()}),$(this).find(".cancel").fastClick(function(n){n.preventDefault(),$(e.findDOMNode(t.refs.deletebutton)).popup("hide")})}}),$(e.findDOMNode(this.refs.removeme)).remove(),a.isSmallScreen()||(a.initMyTip($(e.findDOMNode(this)).find(".mytip")),a.initMyTip($(e.findDOMNode(this)).find(".mytip_onpage"),null,null,!1))},doFilePreview:function(e){e.preventDefault(),i.trigger("filepreview",this.props.data)},renderMobile:function(){var t=(moment(moment.unix(this.props.data.date_created)),!r.hasById(230),new s(this.props.data));return e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("a",{href:"#",className:"pull-left",onClick:this.clickHandler,title:this.getLinkTooltip()},e.createElement("img",{width:this.getIconWidth(),src:t.getThumbnail()})),e.createElement("div",{style:{marginLeft:45},className:"mitemheading mitemheadingnormal"},e.createElement("a",{className:"nocolor",href:"#",onClick:this.clickHandler,title:this.getLinkTooltip(),ref:"title",style:{display:"block",paddingTop:t.isDirectory()?6:0}},this.props.data.title),e.createElement("div",{className:"mitemmeta"},e.createElement("small",null,t.getSize())))))},renderDesktop:function(){var t=moment(moment.unix(this.props.data.date_created)),n=!r.hasById(230),i=new s(this.props.data);return e.createElement("tr",null,e.createElement("td",{className:"center aligned"},e.createElement("a",{href:"#",onClick:this.clickHandler,title:this.getLinkTooltip()},e.createElement("img",{width:this.getIconWidth(),src:i.getThumbnail()}))),e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.clickHandler,title:this.getLinkTooltip(),className:"mytip_onpage",ref:"title"},this.props.data.title)),e.createElement("td",null,i.getDisplayType()),e.createElement("td",{className:"right aligned"},i.getSize()),e.createElement("td",{className:"center aligned"},t.format("HH:mm, DD/MM/YYYY")),e.createElement("td",{ref:"creator"}),e.createElement("td",{style:{textAlign:"right"}},i.isDirectory()?"":e.createElement("a",{onClick:this.doFilePreview,className:a.rowButtonClass()+" mytip_onpage",title:l.t("button_preview")},e.createElement("i",{className:"tc-eye icon"})),i.isDirectory()?e.createElement("a",{title:l.t("button_open"),href:"#",className:a.rowButtonClass()+" mytip_onpage",onClick:this.clickHandler},e.createElement("i",{className:"tc-search icon"})):e.createElement("a",{href:i.getDownloadUrl(),className:a.rowButtonClass()+" mytip",target:"_blank",title:l.t("button_download")},e.createElement("i",{className:"tc-download icon"})),e.createElement("a",{href:"#",title:l.t("button_edit"),onClick:this.editHandler,className:a.rowButtonClass()+" mytip_onpage"+(n?" hide":"")},e.createElement("i",{className:"tc-gear icon"})),e.createElement("a",{ref:"deletebutton",title:i.isDirectory()?l.t("button_delete_directory"):l.t("button_delete_file"),className:a.rowButtonClass()+" mytip_onpage"+(n?" hide":"")},e.createElement("i",{className:"tc-trash icon",ref:"deletebuttonicon"}))))},render:function(){return a.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return m}),define("components/zerodata",["react","pref","helper","eventbus","querystring","language/default"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"ZeroDataComponent",getDefaultProps:function(){return{icon:"general",alreadyloaddata:!1,text:r.t("zerodata_text"),subtext:r.t("zerodata_subtext"),buttontext:r.t("zerodata_buttontext"),buttonlink:""}},getInitialState:function(){return{alreadyloaddata:this.props.alreadyloaddata}},componentWillReceiveProps:function(e){this.setState({alreadyloaddata:e.alreadyloaddata})},componentWillUnmount:function(){},componentDidMount:function(){},render:function(){var t="/imgs/zerodata/"+this.props.icon+".png";return e.createElement("div",{className:"zerodata"},this.state.alreadyloaddata?e.createElement("div",null,e.createElement("div",{className:"zerodataimage"},e.createElement("img",{src:t,width:"256",height:"256"})),e.createElement("h3",null,this.props.text),e.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.subtext}}),e.createElement("div",{className:"zerodatabutton"},this.props.buttontext.length>0?e.createElement("a",{className:"ui button",href:this.props.buttonlink},this.props.buttontext):"",this.props.children)):e.createElement("div",null))}});return o}),define("components/tabletheadfixedonscroll",["react"],function(e){var t=e.createClass({displayName:"TableTheadFixedOnScrollComponent",getDefaultProps:function(){return{timeoutUpdateWidth:2e3}},getInitialState:function(){return{cloneElement:null}},windowOnScroll:function(t){if(this.state.cloneElement){var n=$("#header").height(),a=this.state.cloneElement.getBoundingClientRect();this.state.widthUpdated&&a.top<n?$(e.findDOMNode(this)).css({top:n,left:a.left}).show():$(e.findDOMNode(this)).hide()}},triggerWindowScroll:function(){var e=$.Event("scroll",{currentTarget:window});this.windowOnScroll(e)},updateWidth:function(){if(this.state.cloneElement){var e=this;clearTimeout(this.timeoutUpdateWidth),this.timeoutUpdateWidth=setTimeout(function(){e.state.widthUpdated=!0,e.setCellWidth(),e.triggerWindowScroll()},this.props.timeoutUpdateWidth)}},setCellWidth:function(){var t=$("> thead > tr > *",e.findDOMNode(this));$(e.findDOMNode(this)).css({width:$(this.state.cloneElement).width()}),$("> thead > tr > *",this.state.cloneElement).each(function(e){var n=$(this).outerWidth();$(t[e]).css({width:n})})},doClone:function(t){if(!t||"table"!=t.tagName.toLowerCase())return this;this.state.cloneElement=t,$cloneElement=$(t).clone(),$("*",$cloneElement).each(function(){$(this).removeAttr("data-reactid")});var n=$cloneElement.attr("class");return $(e.findDOMNode(this)).prop({class:n+" tctableclone"}),$(e.findDOMNode(this)).html($("thead",$cloneElement)),$("> thead > tr > *",e.findDOMNode(this)).each(function(e){var t=$(this).attr("data-clonetext");void 0===t&&(t=$(this).text()),$(this).text(t)}),this.setCellWidth(),this},componentWillUnmount:function(){$(window).off("scroll",this.windowOnScroll),clearTimeout(this.timeoutUpdateWidth)},componentDidMount:function(){$(window).on("scroll",this.windowOnScroll),this.props.cloneElement&&this.doClone(this.props.cloneElement)},render:function(){return e.createElement("table",null)}});return t}),define("components/file/list",["react","backbone","helper","pref","phonegap","eventbus","querystring","collections/file","models/file","language/file","role","components/headingfull","components/file/item","components/file/directoryadd","components/file/directoryedit","components/file/fileadd","components/file/fileedit","components/mixin/listsearch","components/zerodata","components/tabletheadfixedonscroll"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y){var E=e.createClass({displayName:"FileListComponent",mixins:[_],getInitialState:function(){return{alreadyloaddata:!1,items:[]}},getDefaultProps:function(){return{did:0,object_type:10,object_id:0}},filters:{did:null,sort_by:null,sort_type:null},loadFilterQueryTagData:function(e){var t=null,n="name",a=null;null!=t?o.requestFilterQueryTag(t,this.filters,e,n):null!=a&&r.trigger("querytag:updatetext",{field:e,text:a.text})},addDirectoryHandler:function(t){t.preventDefault();var n={did:this.props.did,object_type:this.props.object_type,object_id:this.props.object_id};e.render(e.createElement(p,{key:this.props.did,data:n}),e.findDOMNode(this.refs.directoryadd))},editHandler:function(e){1==e.is_directory?this.doEditDirectory(e):this.doEditFile(e)},deleteHandler:function(e){1==e.is_directory?this.doDeleteDirectory(e):this.doDeleteFile(e)},doEditDirectory:function(t){e.render(e.createElement(h,{key:t.id,data:t}),e.findDOMNode(this.refs.directoryedit))},doEditFile:function(t){e.render(e.createElement(g,{key:t.id,data:t}),e.findDOMNode(this.refs.fileedit))},doDeleteDirectory:function(e){var t=new l(e);t.destroy({success:function(t,a){n.showSuccess(c.t("remove_dir_success")+' "'+e.title+'".'),r.trigger("file:remove",{id:e.id})},error:function(e,t){n.notifyError(t,c,"error_delete")},complete:function(){r.trigger("fileitem:removeloader",e)}})},doDeleteFile:function(e){var t=new l(e);t.destroy({success:function(t,a){n.showSuccess(c.t("remove_file_success")+' "'+e.title+'".'),r.trigger("file:remove",{id:e.id})},error:function(e,t){n.notifyError(t,c,"error_delete")},complete:function(){r.trigger("fileitem:removeloader",e)}})},addFileHandler:function(t){t.preventDefault();var n={did:this.props.did,object_type:this.props.object_type,object_id:this.props.object_id};e.render(e.createElement(f,{key:this.props.did,data:n}),e.findDOMNode(this.refs.fileadd))},parentDirectoryId:0,doCloneThead:function(){var t=e.findDOMNode(this.refs.filelist);this.refs.table_clone.doClone(t).updateWidth()},loadData:function(t){var i=new s,r=this;n.showContentLoader($(e.findDOMNode(r.refs.list_wrapper))),i.fetch({data:{company_id:a.get("cid"),did:this.filters.did,object_type:this.props.object_type,object_id:0,sort_by:this.filters.sort_by,sort_type:this.filters.sort_type},success:function(e,t){r.setState({items:t.items,alreadyloaddata:!0})},complete:function(){n.isSmallScreen()||r.doCloneThead(),n.hideContentLoader($(e.findDOMNode(r.refs.list_wrapper)))}})},updateBreadcrumbs:function(n,a){var i=$(e.findDOMNode(this)).find(".breadcrumb");i.find("a").unbind("click");var r='<a data-id="0" href="#" class="section">'+c.t("heading")+"</a>";0==n.length||(n.reverse(),$.each(n,function(e,t){r+='<i class="right tc-right icon divider"></i><a data-id="'+t.id+'" href="#" class="section">'+t.title+"</a>"})),a.length>0&&(r+='<i class="right tc-right icon divider"></i><a class="active section">'+a+"</a>"),i.html(r),i.find("a").fastClick(function(e){e.preventDefault();var n="/file";$(this).attr("data-id")>0&&(n+="/index/did/"+$(this).attr("data-id")),t.history.navigate(n,{trigger:!0})}),(n.length>0||a.length>0)&&($(e.findDOMNode(this.refs.gotoparentbutton)).show(),n.length>0&&(this.parentDirectoryId=n[n.length-1].id))},getCurrentDirectoryDetail:function(){var e=this;0==this.props.did?e.updateBreadcrumbs([],""):new l({id:this.props.did}).fetch({data:{object_id:this.props.object_id},success:function(t,n){e.updateBreadcrumbs(t.toJSON().parents,t.toJSON().title)}})},fileAppendHandler:function(e){this.state.items.push(e),this.forceUpdate()},fileUpdateHandler:function(e){for(var t=[],n=0;n<this.state.items.length;n++)e.id==this.state.items[n].id?t.push(e):t.push(this.state.items[n]);this.setState({items:t})},removeHandler:function(e){for(var t=[],n=0;n<this.state.items.length;n++)e.id!=this.state.items[n].id&&t.push(this.state.items[n]);this.setState({items:t})},unmountDirectoryAddFormHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.directoryadd))},unmountDirectoryEditFormHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.directoryedit))},unmountFileAddFormHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.fileadd))},unmountFileEditFormHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.fileedit))},sortFiles:function(){if(null==this.filters.sort_by||""==this.filters.sort_by){var e=[],t=[];return $.each(this.state.items,function(n,a){1==a.is_directory?t.push(a):e.push(a)}),t.sort(function(e,t){return e.title.localeCompare(t.title)}),e.sort(function(e,t){return e.title.localeCompare(t.title)}),t.concat(e)}return this.state.items},gotoParent:function(e){e.preventDefault(),t.history.navigate("/file/index/did/"+this.parentDirectoryId,{trigger:!0})},componentWillUnmount:function(){r.off("file:edit",this.editHandler),r.off("file:delete",this.deleteHandler),r.off("file:remove",this.removeHandler),r.off("file:append",this.fileAppendHandler),r.off("file:update",this.fileUpdateHandler),r.off("file:unmountdirectoryaddform",this.unmountDirectoryAddFormHandler),r.off("file:unmountdirectoryeditform",this.unmountDirectoryEditFormHandler),r.off("file:unmountfileaddform",this.unmountFileAddFormHandler),r.off("file:unmountfileeditform",this.unmountFileEditFormHandler),r.off("list:reload",this.loadData),e.unmountComponentAtNode(e.findDOMNode(this.refs.directoryadd)),e.unmountComponentAtNode(e.findDOMNode(this.refs.directoryedit)),i.destroyPullToRefresh()},componentWillMount:function(){o.initFilter(this.filters)},componentDidMount:function(){this.loadData({}),this.initSortable(),r.on("file:edit",this.editHandler),r.on("file:delete",this.deleteHandler),r.on("file:remove",this.removeHandler),r.on("file:append",this.fileAppendHandler),r.on("file:update",this.fileUpdateHandler),
r.on("file:unmountdirectoryaddform",this.unmountDirectoryAddFormHandler),r.on("file:unmountdirectoryeditform",this.unmountDirectoryEditFormHandler),r.on("file:unmountfileaddform",this.unmountFileAddFormHandler),r.on("file:unmountfileeditform",this.unmountFileEditFormHandler),r.on("list:reload",this.loadData),this.getCurrentDirectoryDetail(),i.enablePullToRefresh(this.loadData)},componentDidUpdate:function(){},renderTableHeaderMobile:function(){return e.createElement("tr",null,e.createElement("th",{width:"50"},e.createElement("a",{className:"hide",title:c.t("gotoparentTooltip"),ref:"gotoparentbutton",href:"#",onClick:this.gotoParent},e.createElement("span",{className:"mitemheading mitemheadingnormal"},e.createElement("i",{className:"icon tc-left"}),c.t("to_parent_dir")))))},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",{width:"50",className:"center aligned"},e.createElement("a",{className:"hide",title:c.t("gotoparentTooltip"),ref:"gotoparentbutton",href:"#",onClick:this.gotoParent},e.createElement("i",{className:"icon tc-folder"}))),e.createElement("th",null,c.t("name")),e.createElement("th",null,c.t("type")),e.createElement("th",{className:"right aligned"},c.t("size")),e.createElement("th",{className:"center aligned"},e.createElement("a",{href:"javascript:void(0)",className:"sortable","data-sortby":"date_created"},c.t("date_created"))),e.createElement("th",null,c.t("creator_id")),e.createElement("th",null))},render:function(){var t=n.isZeroData("file",this.state.items.length),a=(!d.hasById(268),this.sortFiles());return e.createElement("div",{className:"ui segments"},e.createElement(u,{link:"#file",text:c.t("heading"),lang:c,loadFilterQueryTagData:this.loadFilterQueryTagData,total:"",limit:"100",currentpage:"1",hidekeywordsearch:"true",hidepagination:"true",hidefiltertoggle:"true",hidetab:"true",querytaghide:["did"]},d.hasById(d.FILE_MANAGE)?e.createElement("a",{href:"#",onClick:this.addFileHandler},e.createElement("i",{className:"icon tc-upload"}),e.createElement("span",null,c.t("upload_file"))):"",d.hasById(d.FILE_MANAGE)?e.createElement("a",{href:"#",onClick:this.addDirectoryHandler},e.createElement("i",{className:"icon tc-folder"}),e.createElement("span",null,c.t("create_dir"))):""),e.createElement("div",{ref:"list_wrapper",style:{minHeight:200,paddingTop:0,paddingBottom:0,marginTop:0},className:"ui segment tc-scrolled"},t?e.createElement(v,{alreadyloaddata:this.state.alreadyloaddata,text:c.t("zerodata_text"),subtext:c.t("zerodata_subtext"),buttontext:""},e.createElement("a",{className:"ui button",href:"#",onClick:this.addDirectoryHandler},c.t("create_dir")),e.createElement("a",{className:"ui button",href:"#",onClick:this.addFileHandler},c.t("upload_file"))):e.createElement("table",{ref:"filelist",className:n.tableclass()},e.createElement("thead",null,n.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,a.map(function(t,n){return e.createElement(m,{key:t.id,data:t})})))),e.createElement("div",{ref:"directoryadd"}),e.createElement("div",{ref:"directoryedit"}),e.createElement("div",{ref:"fileadd"}),e.createElement("div",{ref:"fileedit"}),e.createElement(y,{ref:"table_clone"}))}});return E}),define("components/filter-region",["react","pref","language/default","collections/region","models/region"],function(e,t,n,a,i){var r=e.createClass({displayName:"FilterRegionComponent",getInitialState:function(){return{items:[]}},componentDidMount:function(){var e=this;this._loadData(),$(this.getDOMNode()).dropdown({fullTextSearch:!0,message:{noResults:n.t("search_no_result")},onShow:e.props.onShow,onHide:e.props.onHide,onChange:e.props.onChange})},_loadData:function(e){var n=this;(new a).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,parent_id:this.props.parent_id,country:this.props.country,status:(new i).STATUS_ENABLE,page:e,sort_by:"display_order",sort_type:"ASC"},success:function(e,t){n.setState({items:n.state.items.concat(t.items)}),$(n.getDOMNode()).dropdown("refresh"),Math.ceil(t.total/t.limit)>t.currentpage&&n._loadData(t.currentpage+1)}})},render:function(){return e.createElement("div",{className:"ui pointing top left dropdown"},e.createElement("a",{className:"tc-filter icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"ui icon search input"},e.createElement("i",{className:"tc-search icon"}),e.createElement("input",{type:"text",placeholder:n.t("search")})),e.createElement("div",{className:"scrolling menu"},e.createElement("div",{"data-value":"0",className:"item"},n.t("all")),e.createElement("div",{className:"divider"}),this.state.items.map(function(t,n){return e.createElement("div",{key:t.id,"data-value":t.id,className:"item"},t.name)}))))}});return r}),define("components/filter-status",["react","pref","cacheddata","language/default"],function(e,t,n,a){var i=e.createClass({displayName:"FilterStatusComponent",getInitialState:function(){return{items:this.props.items||[]}},getInitProps:function(){return{position_class:"left",items:[]}},restoreDefaults:function(){$(this.getDOMNode()).dropdown("restore defaults")},componentDidMount:function(){var e=this,t={fullTextSearch:!0,onShow:e.props.onShow,onHide:e.props.onHide,onChange:e.props.onChange,message:{noResults:a.t("search_no_result")}};$(this.getDOMNode()).dropdown(t)},render:function(){var t=!1;return 1==this.props.itemall&&(t=!0),e.createElement("div",{className:this.props.position_class+" ui pointing top dropdown"},e.createElement("a",{className:"tc-filter icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"scrolling menu"},t?e.createElement("div",{"data-value":"-1",className:"item"},a.t("all")):"",this.state.items.length>0?e.createElement("div",{className:"divider"}):"",this.state.items.map(function(t,n){return e.createElement("div",{key:t.code,"data-value":t.code,className:"item",dangerouslySetInnerHTML:{__html:t.text}})}))))}});return i}),define("components/filterbar",["react","pref","helper","eventbus","querystring","components/dropdown/daterange","language/default"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"FilterBarComponent",getDefaultProps:function(){return{name:"",showkeyword:!0,keywordlabel:"",datepicker:!1,datepickerLabel:o.t("filter_sidebar_date_picker_label"),date_started:0,date_ended:0,keyword:"",force_show:!1,nomargin:!1}},getKeyword:function(){var t="";if(this.props.showkeyword){t=$(e.findDOMNode(this.refs.keyword)).val(),t=$.trim(t);var n=new RegExp("[\\f\\n\\r\\t\\v​]|%","g");t=t.replace(n,"")}return t},hide:function(){$(e.findDOMNode(this)).hide()},show:function(){$(e.findDOMNode(this)).show()},getDateStarted:function(){return this.refs.datepicker.getDateStarted()},getDateEnded:function(){return this.refs.datepicker.getDateEnded()},keywordPressHandler:function(e){13==e.keyCode&&this.props.onSubmit()},submitDump:function(e){e.preventDefault(),e.stopPropagation()},updateSize:function(){var t=300;n.isSmallScreen()||(t=$(window).height()-128-this.props.offsetTop,$(e.findDOMNode(this.refs.filtermenuitem)).height(t).niceScroll({preservenativescrolling:!1}))},handleListSearchUpdateSize:function(){if($("#page > .heading").length){var t=$("#page > .heading").height()+2;$(e.findDOMNode(this)).css("margin-top",t+"px")}},handleToggle:function(){$(e.findDOMNode(this)).toggleClass("filterbarhide"),$("html, body").animate({scrollTop:0},100),this.refs.hasOwnProperty("keyword")&&$(e.findDOMNode(this.refs.keyword)).trigger("focus"),n.isMobileScreen()},componentDidUpdate:function(){n.isSmallScreen()},componentWillUnmount:function(){a.off("listsearch:updatesize",this.handleListSearchUpdateSize),a.off("filterbar:toggle",this.handleToggle)},componentDidMount:function(){a.on("listsearch:updatesize",this.handleListSearchUpdateSize),a.on("filterbar:toggle",this.handleToggle)},render:function(){return n.isPhonegap(),e.createElement("div",{className:"filterbar"+(this.props.force_show?"":" filterbarhide")+(this.props.nomargin?" filterbarnomargin":"")},e.createElement("form",{className:"ui form",onSubmit:this.submitDump},e.createElement("div",{className:"inline fields"},this.props.showkeyword?e.createElement("div",{className:"field fieldinput"},this.props.keywordlabel.length>0?e.createElement("label",null,this.props.keywordlabel):e.createElement("span",{style:{marginRight:0}}),e.createElement("div",{className:"ui small input"},e.createElement("input",{type:"text",ref:"keyword",name:"keyword",onKeyUp:this.keywordPressHandler,defaultValue:this.props.keyword,placeholder:o.t("filterKeywordPlaceholder")}))):"",this.props.datepicker?e.createElement("div",{className:"field fielddatepicker"},e.createElement("label",null,this.props.datepickerLabel,":"),e.createElement(r,{ref:"datepicker",date_started:this.props.date_started,date_ended:this.props.date_ended})):"",this.props.children,e.createElement("button",{className:"ui small blue button",type:"button",onClick:this.props.onSubmit},o.t("search_btn")))))}});return s});define("components/filterbarfull",["react","pref","helper","eventbus","querystring","components/dropdown/daterange","language/default"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"FilterBarFullComponent",getDefaultProps:function(){return{name:"",showkeyword:!0,keywordlabel:o.t("filterKeywordLabel"),datepicker:!1,datepickerLabel:o.t("filter_sidebar_date_picker_label"),date_started:0,date_ended:0,keyword:"",nomargin:!1}},getKeyword:function(){var t="";if(this.props.showkeyword){t=$(e.findDOMNode(this.refs.keyword)).val(),t=$.trim(t);var n=new RegExp("[\\f\\n\\r\\t\\v​]|%","g");t=t.replace(n,"")}return t},closeFilterbar:function(e){e.preventDefault(),a.trigger("filterbar:toggle"),a.trigger("headingtabfilter:unactive")},hide:function(){$(e.findDOMNode(this)).slideUp()},show:function(){$(e.findDOMNode(this)).slideDown()},getDateStarted:function(){return this.refs.datepicker.getDateStarted()},getDateEnded:function(){return this.refs.datepicker.getDateEnded()},keywordPressHandler:function(e){13==e.keyCode&&this.props.onSubmit()},submitDump:function(e){e.preventDefault(),e.stopPropagation()},updateSize:function(){var t=300;n.isSmallScreen()||(t=$(window).height()-128-this.props.offsetTop,$(e.findDOMNode(this.refs.filtermenuitem)).height(t).niceScroll({preservenativescrolling:!1}))},handleListSearchUpdateSize:function(){if($("#page > .heading").length){var t=$("#page > .heading").height()+2;$(e.findDOMNode(this)).css("margin-top",t+"px")}},handleToggle:function(){$(e.findDOMNode(this)).toggleClass("filterbarhide"),this.refs.hasOwnProperty("keyword")&&$(e.findDOMNode(this.refs.keyword)).trigger("focus")},hideHandler:function(){var t=$(e.findDOMNode(this));t.hasClass("filterbarhide")||t.addClass("filterbarhide")},componentDidUpdate:function(){n.isSmallScreen()},setPosition:function(){if(!n.isSmallScreen()){var t=130,a=0,i=$(".filtertogglewrapper");if(i.length)var t=i.offset().top,a=i.offset().left;$(e.findDOMNode(this)).css("top",t+"px").css("left",a+"px")}},componentWillUnmount:function(){a.off("listsearch:updatesize",this.handleListSearchUpdateSize),a.off("filterbar:toggle",this.handleToggle),a.off("filterbar:hide",this.hideHandler)},componentDidMount:function(){this.setPosition(),a.on("listsearch:updatesize",this.handleListSearchUpdateSize),a.on("filterbar:toggle",this.handleToggle),a.on("filterbar:hide",this.hideHandler)},render:function(){return e.createElement("div",{className:"filterbarfull filterbar filterbarhide "+(this.props.nomargin?" filterbarnomargin":"")},e.createElement("form",{className:"ui form",onSubmit:this.submitDump},e.createElement("table",{width:"100%",cellPadding:"10",className:""},this.props.showkeyword?e.createElement("tr",null,e.createElement("td",{style:{textAlign:"right"}},this.props.keywordlabel.length>0?e.createElement("label",null,this.props.keywordlabel):e.createElement("span",{style:{marginRight:0}})),e.createElement("td",null,e.createElement("div",{className:"field small"},e.createElement("input",{type:"text",ref:"keyword",name:"keyword",onKeyUp:this.keywordPressHandler,defaultValue:this.props.keyword})))):"",this.props.children,this.props.datepicker?e.createElement("tr",null,e.createElement("td",null,this.props.datepickerLabel),e.createElement("td",null,e.createElement(r,{className:"fluid",ref:"datepicker",date_started:this.props.date_started,date_ended:this.props.date_ended}))):"",e.createElement("tr",null,e.createElement("td",{colSpan:"2"},e.createElement("button",{className:"ui fluid blue small button",type:"button",onClick:this.props.onSubmit},o.t("search_btn")))),e.createElement("tr",null,e.createElement("td",{colSpan:"2",style:{textAlign:"center"}},e.createElement("a",{href:"#",onClick:this.closeFilterbar},o.t("close")))))))}});return s});define("components/filterbartoggle",["react","helper","language/default","eventbus"],function(e,t,n,a){var i=e.createClass({displayName:"FilterBarToggleComponent",getDefaultProps:function(){return{}},clickHandle:function(e){e.preventDefault(),a.trigger("filterbar:toggle")},componentDidMount:function(){t.initMyTip($(e.findDOMNode(this)),null,null,!1)},render:function(){return e.createElement("span",null)}});return i}),define("components/form/singledate",["react","pref"],function(e,t){var n=e.createClass({displayName:"SingleDateComponent",getDefaultProps:function(){return{defaultValue:"",inputLength:10,placeholder:"N/a",clearButtonTitle:"Clear",format:"DD/MM/YYYY",returnTimestamp:!1,autoClose:!0,singleMonth:!0,showShortcuts:!1,shortcuts:{"prev-days":[1,3,5,7],"next-days":[3,5,7],prev:["week","month","year"],next:["week","month","year"]}}},getInitialState:function(){return{date:this.refineInitValue(this.props.defaultValue),clearHover:!1}},toggleHover:function(){this.setState({clearHover:!this.state.clearHover})},refineInitValue:function(e){var t="";return 0===e?t="":e.toString().length>0&&(t=moment.unix(e).isValid()?moment.unix(e).format(this.props.format):e),t},setValue:function(e){this.setState({date:this.refineInitValue(e)})},getValue:function(){var e=this.state.date;return this.props.returnTimestamp&&(e=this.state.date.length>0?moment(this.state.date,this.props.format).unix():0),e},clearInput:function(e){e.preventDefault(),this.setValue("")},getEl:function(){return $(e.findDOMNode(this.refs.date))},componentDidMount:function(){var t=this;this.getEl().dateRangePicker({singleDate:!0,container:e.findDOMNode(this),format:this.props.format,autoClose:this.props.autoClose,singleMonth:this.props.singleMonth,showShortcuts:this.props.showShortcuts,shortcuts:this.props.shortcuts,setValue:function(e){t.setState({date:e})}})},render:function(){var t;return t=this.state.clearHover?"#000":"#ccc",e.createElement("div",{className:"ui small left icon input"},e.createElement("input",{style:{cursor:"pointer"},readOnly:!0,placeholder:this.props.placeholder,size:this.props.inputLength,ref:"date",value:this.state.date}),e.createElement("i",{className:"tc-calendar icon"}),this.state.date.length>0?e.createElement("a",{title:this.props.clearButtonTitle,style:{position:"relative",margin:"10px 0 0 -25px",cursor:"pointer",color:t},onClick:this.clearInput,onMouseEnter:this.toggleHover,onMouseLeave:this.toggleHover},e.createElement("i",{className:"icon tc-cross"})):"")}});return n}),define("language/groupdetail",["baselanguage"],function(e){var t={vn:{rule:"Rule",value_type:"Loại giá trị",value:"Giá trị",value_end:"Giá trị kết thúc",ip_address:"Địa chỉ IP",date_created:"Ngày tạo",date_modified:"Ngày cập nhật",notfound:"Không tìm dữ liệu nào!",filter_not_found:"Không tìm thấy kết quả.",add:"Thêm",RULE_ID:"Nhân viên",RULE_GENDER:"Giới tính",RULE_POSITION:"Cấp bậc",RULE_OFFICE:"Văn phòng làm việc",RULE_DEPARTMENT:"Phòng ban",RULE_BIRTHDAY:"Ngày sinh",RULE_PHONE:"Điện thoại",RULE_EMAIL:"Email",RULE_REGION:"Tỉnh/Thành",RULE_TYPE:"Loại hình công việc",VALUETYPE_NUMBER:"Loại số",VALUETYPE_EXACTSTRING:"Có chứa chính xác chuỗi",VALUETYPE_CONTAINSTRING:"Có chứa chuỗi",VALUETYPE_REGEXSTRING:"Regex",addrulebutton:"Thêm Rule đã chọn"},en:{rule:"Rule",value_type:"Loại giá trị",value:"Giá trị",value_end:"Giá trị kết thúc",ip_address:"Địa chỉ IP",date_created:"Ngày tạo",date_modified:"Ngày cập nhật",notfound:"Không tìm dữ liệu nào!",filter_not_found:"Không tìm thấy kết quả.",add:"Thêm",RULE_ID:"Nhân viên",RULE_GENDER:"Giới tính",RULE_POSITION:"Cấp bậc",RULE_OFFICE:"Văn phòng làm việc",RULE_DEPARTMENT:"Phòng ban",RULE_BIRTHDAY:"Ngày sinh",RULE_PHONE:"Điện thoại",RULE_EMAIL:"Email",RULE_REGION:"Tỉnh/Thành",RULE_TYPE:"Loại hình công việc",VALUETYPE_NUMBER:"Loại số",VALUETYPE_EXACTSTRING:"Có chứa chính xác chuỗi",VALUETYPE_CONTAINSTRING:"Có chứa chuỗi",VALUETYPE_REGEXSTRING:"Regex",addrulebutton:"Thêm Rule đã chọn"}};return new e({lang:t})}),define("models/groupdetail",["basemodel","language/groupdetail"],function(e,t){var n=e.extend({urlRoot:"v1/groupdetails",RULE_ID:1,RULE_GENDER:3,RULE_POSITION:5,RULE_OFFICE:7,RULE_DEPARTMENT:9,RULE_REGION:17,RULE_TYPE:19,VALUETYPE_NUMBER:1,VALUETYPE_EXACTSTRING:3,VALUETYPE_CONTAINSTRING:5,VALUETYPE_REGEXSTRING:7,getRuleList:function(){return[{code:this.RULE_ID,text:t.t("RULE_ID")},{code:this.RULE_POSITION,text:t.t("RULE_POSITION")},{code:this.RULE_OFFICE,text:t.t("RULE_OFFICE")},{code:this.RULE_DEPARTMENT,text:t.t("RULE_DEPARTMENT")},{code:this.RULE_REGION,text:t.t("RULE_REGION")},{code:this.RULE_TYPE,text:t.t("RULE_TYPE")}]},getRuleName:function(e){e=parseInt(e);var n="";switch(e){case this.RULE_ID:n=t.t("RULE_ID");break;case this.RULE_POSITION:n=t.t("RULE_POSITION");break;case this.RULE_OFFICE:n=t.t("RULE_OFFICE");break;case this.RULE_DEPARTMENT:n=t.t("RULE_DEPARTMENT");break;case this.RULE_REGION:n=t.t("RULE_REGION");break;case this.RULE_TYPE:n=t.t("RULE_TYPE")}return n},getValueTypeList:function(){return[{code:this.VALUETYPE_NUMBER,text:t.t("VALUETYPE_NUMBER")},{code:this.VALUETYPE_EXACTSTRING,text:t.t("VALUETYPE_EXACTSTRING")},{code:this.VALUETYPE_CONTAINSTRING,text:t.t("VALUETYPE_CONTAINSTRING")},{code:this.VALUETYPE_REGEXSTRING,text:t.t("VALUETYPE_REGEXSTRING")}]},getValueTypeName:function(e){e=parseInt(e);var n="";switch(e){case this.VALUETYPE_NUMBER:n=t.t("VALUETYPE_NUMBER");break;case this.VALUETYPE_EXACTSTRING:n=t.t("VALUETYPE_EXACTSTRING");break;case this.VALUETYPE_CONTAINSTRING:n=t.t("VALUETYPE_CONTAINSTRING");break;case this.VALUETYPE_REGEXSTRING:n=t.t("VALUETYPE_REGEXSTRING")}return n}});return n}),define("components/groupdetail/select-rule",["react","pref","language/groupdetail","models/groupdetail"],function(e,t,n,a){var i=e.createClass({displayName:"SelectRuleComponent",getDefaultProps:function(){return{name:"rule",ignoreList:[],value:0,className:"",placeholder:"------"}},getInitialState:function(){return{items:[]}},componentDidMount:function(){this.loadData(),$(this.getDOMNode()).dropdown({fullTextSearch:!0,message:{noResults:n.t("filter_not_found")},onChange:this.props.onChange}).dropdown("set selected",0)},loadData:function(){var e=this,t=(new a).getRuleList();t.length>0&&e.setState({items:t})},render:function(){return e.createElement("div",{className:"ui "+this.props.className+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item","data-value":"0"},this.props.placeholder),this.state.items.map(function(t){return e.createElement("div",{key:t.code,className:"item","data-value":t.code},t.text)})))}});return i}),define("components/groupdetail/add",["react","pref","language/groupdetail","components/select-region","components/select-office","components/select-department","components/employee/select-position","components/employee/select-type","components/groupdetail/select-rule","components/employeepicker","models/region","models/user","models/office","models/department","models/groupdetail"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"GroupDetailAddComponent",getDefaultProps:function(){return{items:[]}},getInitialState:function(){return{items:[],itemDeleted:[]}},onRuleChange:function(t){t=parseInt(t)||0;var n=new h,a="";switch($(e.findDOMNode(this)).find(".custom").hide(),this.getNode("value_type").dropdown("set selected",0),this.getNode("value").val(""),this.getNode("value_end").val(""),t){case n.RULE_ID:a="rule_employee",this.getNode("value_type").dropdown("set selected",n.VALUETYPE_NUMBER);break;case n.RULE_REGION:a="rule_region",this.getNode("value_type").dropdown("set selected",n.VALUETYPE_NUMBER);break;case n.RULE_GENDER:a="rule_gender",this.getNode("value_type").dropdown("set selected",n.VALUETYPE_NUMBER);break;case n.RULE_POSITION:a="rule_position",this.getNode("value_type").dropdown("set selected",n.VALUETYPE_NUMBER);break;case n.RULE_OFFICE:a="rule_office",this.getNode("value_type").dropdown("set selected",n.VALUETYPE_NUMBER);break;case n.RULE_DEPARTMENT:a="rule_department",this.getNode("value_type").dropdown("set selected",n.VALUETYPE_NUMBER);break;case n.RULE_TYPE:a="rule_type",this.getNode("value_type").dropdown("set selected",n.VALUETYPE_NUMBER)}a.length>0&&this.getNode(a).show()},getValue:function(){return this.state.items},getItemDeleted:function(){return this.state.itemDeleted},getValueByRule:function(e,t,n){e=parseInt(e);var a=new h,i=t,r=n||"";switch(e){case a.RULE_REGION:i=$(this.getNode("region_id").dropdown("get item",t)).text();break;case a.RULE_GENDER:i=$(this.getNode("gender").dropdown("get item",t)).text();break;case a.RULE_POSITION:i=$(this.getNode("position_id").dropdown("get item",t)).text();break;case a.RULE_OFFICE:i=$(this.getNode("office_id").dropdown("get item",t)).text();break;case a.RULE_DEPARTMENT:i=$(this.getNode("department_id").dropdown("get item",t)).text();break;case a.RULE_TYPE:i=$(this.getNode("type_id").dropdown("get item",t)).text()}return{value:t,text:i,value_end:n,text_end:r}},getInputValueByRule:function(e){e=parseInt(e);var t=new h,n=this.getNode("value").val(),a=n,i=this.getNode("value_end").val(),r=i;switch(e){case t.RULE_ID:n=this.refs.employee_id.getSelectedUserIdList(),a=this.getNode("employee_id").dropdown("get text"),i="";break;case t.RULE_REGION:n=this.getNode("region_id").dropdown("get value"),a=this.getNode("region_id").dropdown("get text"),i="";break;case t.RULE_GENDER:n=this.getNode("gender").dropdown("get value"),a=this.getNode("gender").dropdown("get text"),-1==n&&(n=null,a=""),i="";break;case t.RULE_POSITION:n=parseInt(this.getNode("position_id").dropdown("get value")),-1==n&&(n=""),a=this.getNode("position_id").dropdown("get text"),i="";break;case t.RULE_OFFICE:n=this.getNode("office_id").dropdown("get value"),a=this.getNode("office_id").dropdown("get text"),i="";break;case t.RULE_DEPARTMENT:n=this.getNode("department_id").dropdown("get value"),a=this.getNode("department_id").dropdown("get text"),i="";break;case t.RULE_TYPE:n=this.getNode("type_id").dropdown("get value"),a=this.getNode("type_id").dropdown("get text"),i=""}var o=[];if(e==t.RULE_ID)for(var s=0;s<n.length;s++){var l=n[s];l>0&&o.push({value:l,text:this.getNode("employee_id").dropdown("get item",l).text(),value_end:"",text_end:""})}else isNaN(n)&&""==n&&(n=null,a=""),""==i&&(r=""),o.push({value:n,text:a,value_end:i,text_end:r});return o},getNode:function(t){var n=this;return"undefined"!=typeof t&&(n=this.refs[t]),$(e.findDOMNode(n))},isExists:function(e,t){var n=!1;if(t.length>0)for(var a=0;a<t.length;a++){var i=t[a];if(i.rule==e.rule&&i.value_type==e.value_type&&i.value==e.value&&i.value_end==e.value_end){n=!0;break}}return n},addDetail:function(e){e.preventDefault();var t=this.state.items,n=this.getNode("rule").dropdown("get value"),a=this.getNode("value_type").dropdown("get value"),i=this.getInputValueByRule(n);if(n>0&&i.length>0){for(var r=0;r<i.length;r++){var o=i[r];if(null!=o.value){var s={id:0,rule:n,value_type:a,value:o.value,text:o.text,value_end:o.value_end,text_end:o.text_end};this.isExists(s,t)||t.push(s)}}this.setState({items:t})}},removeItem:function(e){e.preventDefault();var t=e.currentTarget,n=this.state.items,a=this.state.itemDeleted,i=$(t).data("index");n[i].id>0&&a.push(n[i].id),n.splice(i,1),this.setState({items:n,itemDeleted:a})},onInit:function(){var e=this;e.props.items.length>0&&this.setState({items:e.props.items})},componentDidUpdate:function(){var e=this,t=new h;e.state.items.map(function(n,a){var i=e.getNode("detail-"+a),r="",o=n.text;""==o&&(o=n.value);var s=n.value_end,l=!0;switch(i.find(".text").html(o),i.find(".text_end").html(s),parseInt(n.rule)){case t.RULE_ID:l=!1,new u({id:n.value}).fetch({success:function(e,t){i.find(".text").html(t.fullname)}});break;case t.RULE_REGION:l=!1,new d({id:n.value}).fetch({success:function(e,t){i.find(".text").html(t.name)}});break;case t.RULE_GENDER:r=$(e.getNode("gender").html());break;case t.RULE_OFFICE:l=!1,new m({id:n.value}).fetch({success:function(e,t){i.find(".text").html(t.name)}});break;case t.RULE_POSITION:r=$(e.getNode("position_id").html());break;case t.RULE_DEPARTMENT:l=!1,new p({id:n.value}).fetch({success:function(e,t){i.find(".text").html(t.name)}});break;case t.RULE_TYPE:r=$(e.getNode("type_id").html())}l&&(o=r.find(".item[data-value="+n.value+"]").text(),i.find(".text").html(o))})},componentDidMount:function(){var t=this;t.onInit(),$(e.findDOMNode(t.refs.gender)).dropdown().dropdown("set selected",-1),$(e.findDOMNode(t)).find(".custom").hide()},render:function(){var t,d=this,m=new h;return 0==d.state.items.length&&(t=e.createElement("tr",{className:"center aligned"},e.createElement("td",{colSpan:"5"},e.createElement("i",{className:"icon tc-info"})," ",n.t("notfound")))),e.createElement("div",null,e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four"},e.createElement("label",null,n.t("rule")),e.createElement(l,{ref:"rule",onChange:d.onRuleChange})),e.createElement("div",{className:"field wide twelve custom",ref:"rule_employee"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,n.t("RULE_ID")),e.createElement(c,{ref:"employee_id"})))),e.createElement("div",{className:"field wide four custom",ref:"rule_region"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,n.t("RULE_REGION")),e.createElement(a,{parent_id:"0",ref:"region_id"})))),e.createElement("div",{className:"field wide twelve custom",ref:"rule_gender"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide six"},e.createElement("label",null,n.t("RULE_GENDER")),e.createElement("div",{ref:"gender",className:"ui fluid search selection dropdown"},e.createElement("input",{type:"hidden",name:"gender"}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item","data-value":"-1"},"------"),(new u).getGenderList().map(function(t){return e.createElement("div",{className:"item",key:t.code,"data-value":t.code},t.text)})))))),e.createElement("div",{className:"field wide four custom",ref:"rule_office"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,n.t("RULE_OFFICE")),e.createElement(i,{ref:"office_id"})))),e.createElement("div",{className:"field wide four custom",ref:"rule_position"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,n.t("RULE_POSITION")),e.createElement(o,{ref:"position_id"})))),e.createElement("div",{className:"field wide four custom",ref:"rule_department"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,n.t("RULE_DEPARTMENT")),e.createElement(r,{ref:"department_id"})))),e.createElement("div",{className:"field wide four custom",ref:"rule_type"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,n.t("RULE_TYPE")),e.createElement(s,{ref:"type_id"}))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("button",{ref:"btn-adddetail",onClick:d.addDetail,className:"ui mini grey button"},n.t("addrulebutton")))),e.createElement("div",{className:"tc-scrolled"},e.createElement("table",{style:{margin:0},className:"ui small striped selectable unstackable table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{width:"24%"},n.t("rule")),e.createElement("th",{width:"24%"},n.t("value_type")),e.createElement("th",{width:"24%"},n.t("value")),e.createElement("th",{width:"24%"},n.t("value_end")),e.createElement("th",{width:"50"}))),e.createElement("tbody",null,d.state.items.map(function(t,n){return e.createElement("tr",{ref:"detail-"+n,key:"detail-"+n},e.createElement("td",null,m.getRuleName(t.rule)),e.createElement("td",null,m.getValueTypeName(t.value_type)),e.createElement("td",{className:"text"},t.text),e.createElement("td",{className:"text_end"},t.text_end),e.createElement("td",null,e.createElement("button",{onClick:d.removeItem,"data-index":n,className:"ui icon noborder button basic mini"},e.createElement("i",{className:"icon tc-trash"}))))}),t))))}});return f}),define("components/group/add",["react","backbone","pref","helper","language/group","language/default","language/setting","components/groupdetail/add","components/colorpicker","components/heading","components/formfieldaction","models/group"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"GroupAddComponent",formError:{name:["error_name_required"],code:["error_code_invalid","error_code_exists"]},_save:function(){var e=this,r=$(".ui.form",this.getDOMNode());r.addClass("loading"),(new u).save({company_id:n.get("cid"),creator_id:n.get("uid"),code:$('[name="code"]',r).val().trim(),name:$('[name="name"]',r).val(),color:$('[name="color"]',r).val().replace("#",""),description:$('[name="description"]',r).val(),details:this.refs.detail.getValue()},{success:function(e){a.showSuccess(i.t("success_add")),$('[name="name"]',r).val(""),t.history.navigate("group",{trigger:!0})},error:function(t,n){a.notifyErrorAndForm(n,i,"error_update",r,e.formError)},complete:function(){r.removeClass("loading")}})},componentDidMount:function(){var e=this;$('[name="name"]').focus(),$(".ui.form",this.getDOMNode()).form({fields:{name:{identifier:"name",rules:[{type:"empty",prompt:i.t("error_name_required")}]},code:{identifier:"code"}},inline:!0,keyboardShortcuts:!1,templates:{error:function(e){var t='<div class="ui list">';return $.each(e,function(e,n){t+='<div class="item"><i class="tc-bug icon"></i> <div class="content">'+n+"</div></div>"}),t+="</div>",$(t)}},onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}})},_onlyNumber:function(e){var t=e.target.value.replace(/,/g,"");e.target.value=a.numberFormat(t)},render:function(){return e.createElement("div",{className:"ui segments"},e.createElement(c,{link:"#group",text:i.t("heading"),subtext:i.t("add")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("h2",null,i.t("group_info_title")),e.createElement("div",null,i.t("group_info_content"))),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide required four"},e.createElement("label",null,i.t("name")),e.createElement("input",{name:"name"})),e.createElement("div",{className:"field wide four"},e.createElement("label",null,i.t("color")),e.createElement(l,{name:"color"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four"
},e.createElement("label",null,i.t("code")),e.createElement("input",{name:"code"})),e.createElement("div",{className:"field"})),e.createElement("div",{className:"field"},e.createElement("div",{className:"field wide eight"},e.createElement("label",null,i.t("description")),e.createElement("textarea",{name:"description",rows:"2"}))))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("h2",null,i.t("groupdetail_info_title")),e.createElement("div",null,i.t("groupdetail_info_content"))),e.createElement("div",{className:"field wide twelve"},e.createElement(s,{ref:"detail"}))),e.createElement(d,null,e.createElement("button",{className:"ui teal button"},i.t("add"))))))}});return m}),define("components/group/edit",["react","backbone","pref","helper","language/group","language/default","language/setting","components/groupdetail/add","components/colorpicker","components/heading","components/formfieldaction","models/group"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"GroupEditComponent",formError:{name:["error_name_required"],code:["error_code_invalid","error_code_exists"]},_save:function(){var e=this,t=$(".ui.form",this.getDOMNode());t.addClass("loading"),new u({id:this.props.data.id}).save({company_id:n.get("cid"),creator_id:n.get("uid"),code:$('[name="code"]',t).val().trim(),name:$('[name="name"]',t).val(),color:$('[name="color"]',t).val().replace("#",""),description:$('[name="description"]',t).val(),details:this.refs.detail.getValue(),delete_items:this.refs.detail.getItemDeleted()},{success:function(e){a.showSuccess(i.t("success_update"))},error:function(n,r){a.notifyErrorAndForm(r,i,"error_update",t,e.formError)},complete:function(){t.removeClass("loading")}})},componentDidMount:function(){var t=this;$('[name="name"]').focus(),$(".ui.form",this.getDOMNode()).form({fields:{name:{identifier:"name",rules:[{type:"empty",prompt:i.t("error_name_required")}]},code:{identifier:"code"}},inline:!0,keyboardShortcuts:!1,templates:{error:function(e){var t='<div class="ui list">';return $.each(e,function(e,n){t+='<div class="item"><i class="tc-bug icon"></i> <div class="content">'+n+"</div></div>"}),t+="</div>",$(t)}},onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t._save()}}),$(e.findDOMNode(t.refs.delete_object)).dropdown({}).popup({on:"click",popup:$(e.findDOMNode(t.refs.delete_object_confirm))})},_cancelDelete:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.delete_object)).popup("hide")},_delete:function(n){n.preventDefault();var r=this;$(e.findDOMNode(r.refs.delete_object)).popup("hide"),$(".ui.form",this.getDOMNode()).addClass("loading"),new u({id:this.props.data.id}).destroy({success:function(){a.showSuccess(i.t("success_delete")),t.history.navigate("group",{trigger:!0})},error:function(){a.showError(i.t("error_delete"))},complete:function(){$(".ui.form",r.getDOMNode()).removeClass("loading")}})},_onlyNumber:function(e){var t=e.target.value.replace(/,/g,"");e.target.value=a.numberFormat(t)},render:function(){var t=this,n=t.props.data;return e.createElement("div",{className:"ui segments"},e.createElement(c,{link:"#group",text:i.t("heading"),subtext:i.t("update")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("h2",null,i.t("group_info_title")),e.createElement("div",null,i.t("group_info_content"))),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide required four"},e.createElement("label",null,i.t("name")),e.createElement("input",{name:"name",defaultValue:n.name})),e.createElement("div",{className:"field wide four"},e.createElement("label",null,i.t("color")),e.createElement(l,{name:"color",value:"#"+this.props.data.color}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four"},e.createElement("label",null,i.t("code")),e.createElement("input",{name:"code",defaultValue:this.props.data.code}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("label",null,i.t("description")),e.createElement("textarea",{name:"description",rows:"2",defaultValue:n.description}))))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("h2",null,i.t("groupdetail_info_title")),e.createElement("div",null,i.t("groupdetail_info_content"))),e.createElement("div",{className:"field wide twelve"},e.createElement(s,{items:n.details,ref:"detail"}))),e.createElement(d,null,e.createElement("button",{className:"ui teal button"},r.t("save")),e.createElement("div",{className:"pull-right",style:{marginRight:20}},e.createElement("a",{ref:"delete_object",href:"javascript:void(0)"},i.t("delete_link")),e.createElement("div",{ref:"delete_object_confirm",className:"ui flowing popup top left transition hidden"},e.createElement("h4",null,r.t("delete_confirm")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:t._delete,className:"ui button mini red",href:"#"},r.t("delete_button")),e.createElement("a",{onClick:t._cancelDelete,className:"ui button mini",href:"#"},r.t("cancel_button")))))))))}});return m}),define("components/group/item",["react","eventbus","setting","role","helper","language/default","language/group","components/employee-avatar","components/datetime","components/table/updatebutton","components/table/deletebutton","components/row-creator","models/group"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"GroupComponent",data:{},doSync:function(e){e.preventDefault(),e.stopPropagation();var t=this,n={id:this.props.data.id,success:function(e){t.data=e,i.showSuccess(o.t("success_sync")),t.forceUpdate()},error:function(){i.showError(o.t("error_sync"))}};(new m).syncMember(n)},showEditActionSheet:function(e){e.preventDefault(),e.stopPropagation();var t={buttons:[{text:o.t("sync_list"),href:"#",onClick:this.doSync},{text:o.t("update"),href:"#group/edit/"+this.props.data.id}]};i.showActionSheet(t)},showEmployeeHandler:function(e){e.preventDefault(),t.trigger("group:listemployees",this.data)},componentWillUnmount:function(){},componentWillMount:function(){this.data=this.props.data},componentDidMount:function(){var t=this;$(e.findDOMNode(t.refs.delete_object)).dropdown({}).popup({on:"click",popup:$(e.findDOMNode(t.refs.delete_object_confirm))}),i.isSmallScreen()||(i.initMyTip($(e.findDOMNode(this)).find(".mytip")),i.initMyTip($(e.findDOMNode(this)).find(".mytip_onpage"),null,null,!1))},renderMobile:function(){var t=this.data,n="#"+t.color,i=a.hasById(231);return e.createElement("tr",null,e.createElement("td",null,i?e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})):"",e.createElement("a",{className:"mitemheading mitemheadingnormal",href:i?"#group/edit/id/"+this.props.data.id:"javascript:void(0)"},t.name,e.createElement("span",{className:"pull-right ui small basic label",style:{color:n}},this.props.data.count_user),""!=t.code?e.createElement("span",{className:"pull-right ui mini basic label",style:{color:n}},t.code):""),e.createElement("div",{className:"mitemmeta clear"},t.description?e.createElement("em",null,"- ",t.description):"")))},renderDesktop:function(){var t=this.data,n="#"+t.color,i=a.hasById(231);return e.createElement("tr",{"data-id":this.props.data.id},e.createElement("td",null,this.props.data.id),e.createElement("td",{style:{textAlign:"center"}},e.createElement("span",{className:"ui label",style:{backgroundColor:n}}," ")),e.createElement("td",null,i?e.createElement("a",{href:"#group/edit/"+this.props.data.id,onClick:function(e){e.stopPropagation()},className:"mytip",title:o.t("update")},t.name):e.createElement("span",null,t.name)),e.createElement("td",null,t.code),e.createElement("td",null,t.description),e.createElement("td",{className:"center aligned"},e.createElement("a",{href:"#","data-id":this.props.data.id,onClick:this.showEmployeeHandler},t.count_user)),e.createElement(u,{id:this.props.data.creator_id}),e.createElement("td",null,e.createElement(l,{ts:this.props.data.date_created})),e.createElement("td",{className:"right aligned"},i?e.createElement("div",null,e.createElement(c,{link:"javascript:void(0)",text:o.t("sync_list"),onClick:this.doSync}),e.createElement(c,{link:"#group/edit/"+this.props.data.id})):""))},render:function(){return i.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return p}),define("components/groupdetail/select-valuetype",["react","pref","language/groupdetail","models/groupdetail"],function(e,t,n,a){var i=e.createClass({displayName:"SelectValueTypeComponent",getDefaultProps:function(){return{name:"rule",ignoreList:[],value:0,className:"",placeholder:"------"}},getInitialState:function(){return{items:[]}},componentDidMount:function(){this.loadData(),$(this.getDOMNode()).dropdown({fullTextSearch:!0,message:{noResults:n.t("filter_not_found")}}).dropdown("set selected",0)},loadData:function(){var e=this,t=(new a).getValueTypeList();t.length>0&&e.setState({items:t})},render:function(){return e.createElement("div",{className:"ui "+this.props.className+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item","data-value":"0"},this.props.placeholder),this.state.items.map(function(t){return e.createElement("div",{key:t.code,className:"item","data-value":t.code},t.text)})))}});return i}),define("components/hrmleave/add",["react","backbone","pref","helper","eventbus","language/hrmleave","language/default","models/hrmleave","components/semantic-datepicker","components/heading","components/employeepicker","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"HrmLeaveAddComponent",save:function(){var i=$(".ui.form",this.getDOMNode());i.addClass("loading");var o=$(e.findDOMNode(this.refs.count_day_leave)).val()*this.props.setting.hour_per_day_off*1;(new s).save({company_id:n.get("cid"),creator_id:n.get("uid"),contact_phone:$('[name="contact_phone"]',i).val(),from:$('[name="from"]',i).val(),to:$('[name="to"]',i).val(),duration:o,count_paid:$('[name="count_paid"]',i).val(),count_no_paid:$('[name="count_no_paid"]',i).val(),reason:$('[name="reason"]',i).val(),note:$('[name="note"]',i).val()},{success:function(e){a.showSuccess(r.t("success_add")),t.history.navigate("hrmleave",{trigger:!0})},error:function(e,t){a.notifyError(t,r,"error_add")},complete:function(){i.removeClass("loading")}})},onlyNumber:function(e){var t=e.target.value.replace(/[^\d\.]+/g,"");e.target.value=t},updateTotalHour:function(t){var n=parseFloat(t.target.value)||0,a=n*this.props.setting.hour_per_day_off*1;a>0?$(e.findDOMNode(this.refs.totalhour)).html(a):$(e.findDOMNode(this.refs.totalhour)).html("--")},componentDidMount:function(){var t=this;$('[name="contact_phone"]').focus(),$(e.findDOMNode(t.refs.form)).form({fields:{count_hour_leave:{identifier:"count_hour_leave",rules:[{type:"empty",prompt:r.t("error_count_hour_leave_required")}]},phone:{identifier:"contact_phone",rules:[{type:"empty",prompt:r.t("error_contact_phone_required")}]},reason:{identifier:"reason",rules:[{type:"empty",prompt:r.t("error_reason_required")}]},count_day_leave:{identifier:"count_day_leave",rules:[{type:"empty",prompt:r.t("error_count_day_leave_required")},{type:"regExp[/^0*[1-9][0-9]*(\\.[0-9]+)?|0+\\.[0-9]*[1-9][0-9]*$/]",prompt:r.t("error_count_day_leave_invalid")}]}},inline:!0,keyboardShortcuts:!1,templates:{error:function(e){var t='<div class="ui list">';return $.each(e,function(e,n){t+='<div class="item"><i class="tc-bug icon"></i> <div class="content">'+n+"</div></div>"}),t+="</div>",$(t)}},onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.save()}})},render:function(){var t=this,n=1*t.props.setting.hour_per_day_off;return e.createElement("div",{className:"ui segments"},e.createElement(c,{link:"#hrmleave",text:r.t("heading"),subtext:r.t("create_new")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("h3",null,r.t("leave_info_title")),e.createElement("div",null,r.t("leave_info_content"))),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four required"},e.createElement("label",null,r.t("duration")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement("input",{type:"hidden",ref:"from",name:"from",defaultValue:moment().unix()}),e.createElement("input",{type:"hidden",ref:"to",name:"to",defaultValue:moment().unix()}),e.createElement(l,{options:{format:"DD/MM/YYYY",showDropdowns:!0,opens:"left",autoApply:!0},callBack:function(n,a,i){$(e.findDOMNode(t.refs.from)).val(n.unix()),$(e.findDOMNode(t.refs.to)).val(a.unix());var r=a.diff(n,"days")+1,o=r*t.props.setting.hour_per_day_off;$(e.findDOMNode(t.refs.count_hour_leave)).val(o)}})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four"},e.createElement("label",null,r.t("contact_phone")),e.createElement("input",{name:"contact_phone",ref:"contact_phone"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four"},e.createElement("label",null,r.t("count_day_leave")),e.createElement("div",{className:"ui labeled input"},e.createElement("input",{type:"number",name:"count_day_leave",ref:"count_day_leave",defaultValue:"1",onInput:t.updateTotalHour,style:{borderRadius:"0.28571429rem 0 0 0.28571429rem"}}),e.createElement("div",{className:"ui nocolor label",style:{borderRadius:"0 0.28571429rem 0.28571429rem 0"}}," x 1 ",r.t("day")," (",t.props.setting.hour_per_day_off," ",r.t("hour"),") = ",e.createElement("span",{ref:"totalhour"},n)," ",r.t("hour")))),e.createElement("div",{className:"field wide four"},e.createElement("label",null,r.t("count_paid")),e.createElement("input",{type:"number",name:"count_paid",ref:"count_paid",onInput:t.onlyNumber})),e.createElement("div",{className:"field wide four"},e.createElement("label",null,r.t("count_no_paid")),e.createElement("input",{type:"number",name:"count_no_paid",ref:"count_no_paid",onInput:t.onlyNumber}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide twelve"},e.createElement("label",null,r.t("reason")),e.createElement("input",{name:"reason",ref:"reason"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide twelve"},e.createElement("label",null,r.t("note")),e.createElement("input",{name:"note",ref:"note"}))))),e.createElement(u,null,e.createElement("button",{className:"ui teal button"},o.t("add"))))))}});return m}),define("components/hrmleave/item",["react","pref","backbone","helper","querystring","eventbus","language/hrmleave","language/default","components/employee-avatar","components/confirm","components/datetime","components/hrmleave/popup-approve","models/hrmleave","models/user"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"HrmLeaveItemComponent",allowApprove:!0,getDefaultProps:function(){return{openPopupUpdateStatus:function(e){}}},getInitialState:function(){return{reload:0}},buttonReviewEventHandle:function(){var n=this,a=parseInt(t.get("uid"));"undefined"!=typeof n.refs.buttonone&&$.inArray(a,n.state.data.reviewer[0].actor)>-1&&$(e.findDOMNode(n.refs.buttonone)).popup({on:"click",position:"top center",variation:"very wide",html:e.renderToStaticMarkup(e.createElement(u,{note:n.state.data.reviewer[0].note})),onShow:function(){var e=$(this).find(".confirm"),t=$(this).find(".cancel"),a=$(this).find(".leave-approve-note");n.approveHandle(e,t,a,"one")},onHidden:function(){n.allowApprove=!0}}),"undefined"!=typeof n.refs.buttontwo&&$.inArray(a,n.state.data.reviewer[1].actor)>-1&&$(e.findDOMNode(n.refs.buttontwo)).popup({on:"click",position:"top center",variation:"very wide",html:e.renderToStaticMarkup(e.createElement(u,{note:n.state.data.reviewer[1].note})),onShow:function(){var e=$(this).find(".confirm"),t=$(this).find(".cancel"),a=$(this).find(".leave-approve-note");n.approveHandle(e,t,a,"two")},onHidden:function(){n.allowApprove=!0}}),"undefined"!=typeof n.refs.buttonthree&&$.inArray(a,n.state.data.reviewer[2].actor)>-1&&$(e.findDOMNode(n.refs.buttonthree)).popup({on:"click",position:"top center",variation:"very wide",html:e.renderToStaticMarkup(e.createElement(u,{note:n.state.data.reviewer[2].note})),onShow:function(){var e=$(this).find(".confirm"),t=$(this).find(".cancel"),a=$(this).find(".leave-approve-note");n.approveHandle(e,t,a,"three")},onHidden:function(){n.allowApprove=!0}})},loadDetailHandler:function(e){r.trigger("hrmleave:expand",this.state.data)},removeItem:function(){var t=this;$(e.findDOMNode(this.refs.remove)).popup("hide"),$(e.findDOMNode(this.refs.remove)).addClass("loading"),new m({id:t.props.data.id}).destroy({success:function(n,i){a.showSuccess(o.t("success_delete")),$(e.findDOMNode(t)).hide()},error:function(e,t){a.showError(o.t("error_delete"))},complete:function(){$(e.findDOMNode(this.refs.remove)).removeClass("loading")}})},approveHandle:function(e,t,n,a){var i=this;e.fastClick(function(r){i.allowApprove&&(i.allowApprove=!1,t.addClass("disabled"),e.addClass("loading"),i.doApprove(e,t,n,a))}),t.fastClick(function(r){i.allowApprove&&(i.allowApprove=!1,e.addClass("disabled"),t.addClass("loading"),i.doReject(e,t,n,a))})},doApprove:function(e,n,i,r){var s=this,l=(new m).urlRoot+"/approve",c={company_id:t.get("cid"),creator_id:t.get("uid"),id:s.props.data.id,round:r,note:i.val()};$.ajax({url:l,type:"PUT",data:c,success:function(e){s.setState({data:e})},error:function(e,t,n){a.notifyError(e,o,"error_review")},complete:function(t){s.approveRejectCallbackHandle(e,n)}})},doReject:function(e,n,i,r){var s=this,l=(new m).urlRoot+"/reject",c={company_id:t.get("cid"),creator_id:t.get("uid"),id:s.props.data.id,round:r,note:i.val()};$.ajax({url:l,type:"PUT",data:c,success:function(e){s.setState({data:e})},error:function(e,t,n){a.notifyError(e,o,"error_review")},complete:function(t){s.approveRejectCallbackHandle(e,n)}})},approveRejectCallbackHandle:function(e,t){this.allowApprove=!0,e.removeClass("disabled").removeClass("loading"),t.removeClass("disabled").removeClass("loading"),this.forceUpdate()},filterEmployeeHandler:function(e){this.props.onFilterEmployee(e)},showEditActionSheet:function(e){e.preventDefault();var n=this,i=this.state.data,r=[];r.push({text:s.t("view_detail"),onClick:function(e){n.loadDetailHandler(e)}}),t.get("uid")==i.creator_id&&0==i.reviewer[0].id&&r.push({text:s.t("delete"),color:"#ff0000",onClick:function(e){n.removeItem()}});var o={buttons:r};a.showActionSheet(o)},updateInfo:function(){var t=this;this.props.data.creator_id>0&&e.findDOMNode(this.refs.creator)&&new p({id:this.props.data.creator_id}).fetch({success:function(n,a){e.render(e.createElement(l,{id:a.id,user:a,hover:!1,onClick:t.filterEmployeeHandler}),e.findDOMNode(t.refs.creator))}}),this.props.data.reviewer[0].id>0&&e.findDOMNode(this.refs.reviewerone)&&new p({id:this.props.data.reviewer[0].id}).fetch({success:function(n,a){e.render(e.createElement(l,{id:a.id,user:a,cssStyles:{padding:"0 5px 0 0"}}),e.findDOMNode(t.refs.reviewerone))}}),this.props.data.reviewer[1].id>0&&e.findDOMNode(this.refs.reviewertwo)&&new p({id:this.props.data.reviewer[1].id}).fetch({success:function(n,a){e.render(e.createElement(l,{id:a.id,user:a,cssStyles:{padding:"0 5px 0 0"}}),e.findDOMNode(t.refs.reviewertwo))}}),this.props.data.reviewer[2].id>0&&e.findDOMNode(this.refs.reviewerthree)&&new p({id:this.props.data.reviewer[2].id}).fetch({success:function(n,a){e.render(e.createElement(l,{id:a.id,user:a,cssStyles:{padding:"0 5px 0 0"}}),e.findDOMNode(t.refs.reviewerthree))}})},componentDidUpdate:function(){this.buttonReviewEventHandle()},componentWillMount:function(){this.setState({data:this.props.data})},componentWillUnmount:function(){},componentDidMount:function(){var t=this;this.updateInfo(),$(e.findDOMNode(this.refs.remove)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(c,null)),onShow:function(){$(this).find(".confirm").fastClick(function(e){e.preventDefault(),t.removeItem()}),$(this).find(".cancel").fastClick(function(n){n.preventDefault(),$(e.findDOMNode(t.refs.remove)).popup("hide")})}}),t.buttonReviewEventHandle(),$(e.findDOMNode(t)).find(".hrm-status-round").popup(),i.get("id")==this.state.data.id&&this.loadDetailHandler()},renderButtonOne:function(){var t,n=this.state.data,a=o.t("pending_approve"),i="";return n.reviewer[0].status==(new m).STATUS_REVIEW_APPROVE?(i="green",a=o.t("approved"),t=e.createElement("span",{ref:"reviewerone"})):n.reviewer[0].status==(new m).STATUS_REVIEW_REJECT&&(i="red",a=o.t("reject"),t=e.createElement("span",{ref:"reviewerone"})),e.createElement("button",{className:"ui hrmleavebutton basic mini button "+i,onClick:function(e){e.stopPropagation()},ref:"buttonone"},t," ",a)},renderButtonTwo:function(){var t,n,a=this.state.data,i=this,r=o.t("pending_approve"),s="";return 0!=i.props.setting.default_reviewer[1]&&(a.reviewer[0].status==(new m).STATUS_REVIEW_APPROVE?(a.reviewer[1].status==(new m).STATUS_REVIEW_APPROVE?(s="green",r=o.t("approved"),n=e.createElement("span",{ref:"reviewertwo"})):a.reviewer[1].status==(new m).STATUS_REVIEW_REJECT?(s="red",r=o.t("reject"),n=e.createElement("span",{ref:"reviewertwo"})):r=o.t("pending_approve"),t=e.createElement("button",{className:"ui hrmleavebutton basic mini button "+s,onClick:function(e){e.stopPropagation()},ref:"buttontwo"},n," ",r)):a.reviewer[0].status!=(new m).STATUS_REVIEW_REJECT&&(t=e.createElement("a",{href:"javascript:void(0)",className:"hrm-status-round","data-content":o.t("STATUS_PENDING_ONE")},e.createElement("i",{className:"tc-more"})))),t},renderButtonThree:function(){var t,n,a=this,i=a.state.data,r=o.t("pending_approve"),s="";return 0!=a.props.setting.default_reviewer[2]&&(i.reviewer[1].status==(new m).STATUS_REVIEW_APPROVE?(i.reviewer[2].status==(new m).STATUS_REVIEW_APPROVE?(s="green",r=o.t("approved"),n=e.createElement("span",{ref:"reviewerthree"})):i.reviewer[2].status==(new m).STATUS_REVIEW_REJECT?(s="red",r=o.t("reject"),n=e.createElement("span",{ref:"reviewerthree"})):r=o.t("pending_approve"),t=e.createElement("button",{className:"ui hrmleavebutton basic mini button "+s,onClick:function(e){e.stopPropagation()},ref:"buttonthree"},n," ",r)):i.reviewer[1].status!=(new m).STATUS_REVIEW_REJECT&&(t=e.createElement("a",{href:"javascript:void(0)",className:"hrm-status-round","data-content":o.t("STATUS_PENDING_TWO")},e.createElement("i",{className:"tc-more"})))),t},renderMobile:function(){var t=this,n=t.state.data,a=(new m).getStatus(n.status),i=moment.unix(n.from),r=moment.unix(n.to);return e.createElement("tr",null,e.createElement("td",null,e.createElement("div",{className:"mitemdotleft"},e.createElement("span",{className:"mitemdot",style:{backgroundColor:a.color}})),e.createElement("div",{className:"mitemdotright"},e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading mitemnoavatar",onClick:this.loadDetailHandler},e.createElement(l,{id:n.creator_id,hover:!1,onClick:this.loadDetailHandler})),e.createElement("div",{className:"mitemmeta"},n.reason," · ",i.format("DD/MM")," - ",r.format("DD/MM"),e.createElement("div",{className:"clear",style:{opacity:.4}},this.renderButtonOne(),this.renderButtonTwo(),this.renderButtonThree())))))},renderDesktop:function(){var n=this,i=n.state.data,r=moment.unix(i.from),o=moment.unix(i.to),s=(new m).getStatus(i.status);return e.createElement("tr",{className:"top aligned",onClick:this.loadDetailHandler},e.createElement("td",null,this.props.data.id),e.createElement("td",null,e.createElement("span",{ref:"creator"})),e.createElement("td",null,i.reason),e.createElement("td",null,r.format("DD/MM/YYYY")," - ",o.format("DD/MM/YYYY")),0!=n.props.setting.default_reviewer[0]?e.createElement("td",null,this.renderButtonOne()):null,0!=n.props.setting.default_reviewer[1]?e.createElement("td",null,this.renderButtonTwo()):null,0!=n.props.setting.default_reviewer[2]?e.createElement("td",null,this.renderButtonThree()):null,e.createElement("td",null,e.createElement("span",{className:"ui small label simple "+s.color},s.text)),e.createElement("td",null,e.createElement(d,{ts:i.date_created,relativelevel:0})),e.createElement("td",{className:"right aligned"},t.get("uid")==i.creator_id&&0==i.reviewer[0].id?e.createElement("a",{ref:"remove",href:"javascript:void(0)",onClick:function(e){e.stopPropagation()},className:a.rowButtonClass()},e.createElement("i",{className:"tc-trash icon"})):null))},render:function(){return a.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return h}),define("components/table/idheadcell",["react","helper","language/default"],function(e,t,n){var a=e.createClass({displayName:"TableIdHeadCellComponent",getDefaultProps:function(){return{text:"SID",tooltip:n.t("sid_tooltip"),sortable:!0,sortby:"id"}},componentDidMount:function(){t.isSmallScreen()||t.initMyTip($(e.findDOMNode(this)).find(".mytip"),null,"topright")},renderSortable:function(){return e.createElement("a",{className:"sortable mytip",href:"javascript:(void(0))",title:this.props.tooltip,"data-sortby":this.props.sortby,"data-nameorigin":this.props.text},this.props.text)},render:function(){return this.props.sortable?this.renderSortable():e.createElement("span",{className:"mytip",title:this.props.tooltip},this.props.text)}});return a}),define("components/hrmleave/list",["react","basecontroller","backbone","helper","phonegap","pref","querystring","role","eventbus","language/hrmleave","language/default","collections/user","collections/hrmleave","models/hrmleave","components/hrmleave/item","components/hrmleave/item-expand","models/user","components/mixin/listsearch","components/headingfull","components/filterbarfull","components/filterbartoggle","components/dropdown/employee","components/zerodata","components/table/idheadcell","components/tabletheadfixedonscroll"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k){var D=e.createClass({displayName:"HrmLeaveListComponent",mixins:[_],getDefaultProps:function(){return{did:0,object_type:10,object_id:0}},getInitialState:function(){return{total:0,items:[],length:0,alreadyloaddata:!1,currentpage:o.get("page")}},init:!0,filters:{creator_id:null,keyword:null,date_started:null,date_ended:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),creator_id:this.refs.filtercreator.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),this.doFilters(e)},loadFilterQueryTagData:function(e){var t=null,n="name",a=null;switch(e){case"creator_id":t=new g,n="fullname"}null!=t?o.requestFilterQueryTag(t,this.filters,e,n):null!=a&&l.trigger("querytag:updatetext",{field:e,text:a.text})},approveList:function(){o.set("approver",r.get("uid")),this.loadData()},filterEmployeeHanlder:function(e){this.doFilter("creator_id",e)},getQuerysting:function(){var e=o.get("approver")||0,t={company_id:r.get("cid"),page:this.state.currentpage,approver:o.get("approver")||0,keyword:this.filters.keyword,date_start:this.filters.date_started,date_end:this.filters.date_ended,sort_by:this.filters.sort_by,sort_type:this.filters.sort_type};return s.hasById(s.COMPANY_SETTING)?!isNaN(o.get("creator_id"))&&o.get("creator_id")>0&&(t.creator_id=o.get("creator_id")):0==e&&(t.creator_id=r.get("uid")),t},doCloneThead:function(){var t=e.findDOMNode(this.refs.leavelist);this.refs.table_clone.doClone(t).updateWidth()},loadData:function(){var t=new m,n=this;a.showContentLoader($(e.findDOMNode(this.refs.list_wrapper))),t.fetch({data:n.getQuerysting(),success:function(e,t){t.alreadyloaddata=!0,n.setState(t)},complete:function(){n.doCloneThead(),a.hideContentLoader($(e.findDOMNode(n.refs.list_wrapper)))}})},removeHandler:function(e){for(var t=[],n=0;n<this.state.items.length;n++)e.id!=this.state.items[n].id&&t.push(this.state.items[n]);this.setState({items:t})},expandHandler:function(e){var t=[];a.isExpandIdExisted(this.state.items,e.id)?t=a.removeExpandItem(this.state.items,e.id):$.each(this.state.items,function(n,i){t.push(i);var r=a.cloneObjectData(e);e.id==i.id&&(r.id+="-expand",t.push(r))}),this.setState({items:t})},componentDidUpdate:function(){},componentWillUnmount:function(){l.off("hrmleave:expand",this.expandHandler),l.off("list:reload",this.loadData)},componentWillMount:function(){o.initFilter(this.filters)},componentDidMount:function(){this.init=!1,this.loadData(),this.initSortable(),l.on("hrmleave:expand",this.expandHandler),(new t).setTcScrollMinHeight(),l.on("list:reload",this.loadData),a.isSmallScreen()||a.initMyTip($(e.findDOMNode(this)).find(".mytip"))},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){var t=this;return e.createElement("tr",null,e.createElement("th",null,e.createElement(w,null)),e.createElement("th",null,c.t("employee")),e.createElement("th",null,c.t("reason")),e.createElement("th",{className:"tcw100"},c.t("duration")),0!=t.props.setting.default_reviewer[0]?e.createElement("th",{className:"tcw150"},c.t("review1")):null,0!=t.props.setting.default_reviewer[1]?e.createElement("th",{className:"tcw150"},c.t("review2")):null,0!=t.props.setting.default_reviewer[2]?e.createElement("th",{className:"tcw150"},c.t("review3")):null,e.createElement("th",null,c.t("status")),e.createElement("th",{className:"col_datetime"},c.t("date_created")),e.createElement("th",{className:"col_action_1button"}))},render:function(){for(var t=this,n=5,i=0;i<t.props.setting.default_reviewer.length;i++)0!=t.props.setting.default_reviewer[i]&&n++;var l=a.isZeroData("hrmleave",this.state.total);return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(v,{link:"#hrmleave",text:c.t("heading"),filters:this.filters,lang:c,loadFilterQueryTagData:this.loadFilterQueryTagData,hidekeywordsearch:!0,total:this.state.total,limit:this.state.limit,currentpage:this.state.currentpage},e.createElement(E,null),e.createElement("a",{href:"#hrmleave/add",className:"mytip mainbutton",title:c.t("create_new")},e.createElement("i",{className:"tc-plus-circle icon"}),e.createElement("span",{className:"hideonsmall"},c.t("create_new"))),e.createElement("a",{href:"#hrmleave/index/approver/"+r.get("uid"),className:"mytip",onClick:t.approveList,title:c.t("pending_you_approve")},e.createElement("i",{className:"tc-clock icon"}),e.createElement("span",{className:"hideonsmall"},c.t("pending_you_approve"))),s.hasById(s.COMPANY_SETTING)?e.createElement("a",{href:"#hrmleave/setting",className:"hideonsmall"},e.createElement("i",{className:"icon tc-gear"}),e.createElement("span",{className:"hideonsmall"},c.t("setting"))):null),l?"":e.createElement(y,{ref:"sidebar",datepicker:!0,date_started:o.get("date_started"),date_ended:o.get("date_ended"),datepickerLabel:c.t("date_created"),keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,c.t("employee"))),e.createElement("td",null,e.createElement(b,{
ref:"filtercreator",name:"creator_id",value:this.filters.creator_id,className:"search selection fluid"})))),e.createElement("div",{ref:"list_wrapper",className:"ui segment tctabledata tc-scrolled"},l?e.createElement(N,{alreadyloaddata:this.state.alreadyloaddata,text:c.t("zerodata_text"),subtext:c.t("zerodata_subtext"),buttonlink:"#hrmleave/add"}):e.createElement("table",{ref:"leavelist",className:a.tableclass()},e.createElement("thead",null,a.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,t.init?e.createElement("tr",null,e.createElement("td",{colSpan:n,className:"center aligned"},e.createElement("div",{className:"ui active loader",ref:"loader",style:{marginTop:50}}))):t.state.total>0?t.state.items.map(function(n,i){return a.isExpandId(n.id)?e.createElement(f,{key:n.id,data:n,setting:t.props.setting,openApproveHandle:t.openApproveHandle}):e.createElement(h,{key:n.id,data:n,setting:t.props.setting,onFilterEmployee:t.filterEmployeeHanlder})}):e.createElement("tr",null,e.createElement("td",{colSpan:n,className:"center aligned"},e.createElement("i",{className:"tc-info"})," ",c.t("error_not_found"))))))),e.createElement(k,{ref:"table_clone"}))}});return D}),define("components/select-hour",["react","language/default"],function(e,t){var n=e.createClass({displayName:"SelectMultiComponent",getDefaultProps:function(){return{multiple:!0,options:{fullTextSearch:!0,message:{noResults:t.t("search_no_result")}},value:[1],use24Hour:!0}},componentDidMount:function(){var e=this,t=e.props.options;if(0==e.props.multiple&&(t.keepOnScreen=!1),$(this.getDOMNode()).dropdown(t),1==e.props.multiple){var n=[];if(e.props.value.length>0)for(var a=0;a<e.props.value.length;a++){var i=e.props.value[a].toString();n.push(i)}$(this.getDOMNode()).dropdown("refresh").dropdown("set selected",n)}else $(this.getDOMNode()).dropdown("refresh").dropdown("set selected",e.props.value)},render:function(){for(var n=[],a=1;24>=a;a++){var i=e.createElement("div",{className:"item",key:a,"data-value":a},a+" "+t.t("hour"));this.props.use24Hour||(i=a>12?e.createElement("div",{className:"item",key:a,"data-value":a},a+" "+t.t("PM")):e.createElement("div",{className:"item",key:a,"data-value":a},a+" "+t.t("AM"))),n.push(i)}var r="";return this.props.multiple&&(r="multiple"),e.createElement("div",{className:"ui "+this.props.className+" "+r+" search selection dropdown"},e.createElement("input",{type:"hidden"}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},n))}});return n}),define("components/hrmleave/setting",["react","pref","helper","eventbus","language/hrmleave","language/default","language/setting","components/select-hour","components/heading","components/select-employee","components/formfieldaction","models/hrmleavesetting"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"SettingComponent",save:function(a){var i=this;a.addClass("loading");var o={company_id:t.get("cid"),creator_id:t.get("uid"),id:i.props.setting.id,hour_per_day_off:$(e.findDOMNode(i.refs.hour_per_day_off)).val(),default_reviewer:[$(e.findDOMNode(i.refs.default_reviewer1)).dropdown("get value"),$(e.findDOMNode(i.refs.default_reviewer2)).dropdown("get value"),$(e.findDOMNode(i.refs.default_reviewer3)).dropdown("get value")]};i.saveValidator(o)?(new u).saveSetting(o,{success:function(e,t){n.showSuccess(r.t("update_success"))},error:function(e){n.showError(r.t("update_fail"))},complete:function(){a.removeClass("loading")}}):a.removeClass("loading")},saveValidator:function(e){var t=!0,a=e.default_reviewer;return 0!=a[1]&&0==a[0]?(t=!1,n.showError(i.t("error_default_reviewer_invalid"))):0!=a[2]&&0==a[1]&&(t=!1,n.showError(i.t("error_default_reviewer_invalid"))),t},componentDidMount:function(){var t=this,n=$(e.findDOMNode(t.refs.form));n.form({fields:{},inline:!0,keyboardShortcuts:!1,transition:"fade",onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,a){e.preventDefault(),t.save(n)}})},render:function(){var t=this,n=[{id:0,user_id:0,is_group_id:0,full_name:i.t("employee_position_no_config"),avatar:""},{id:-1,user_id:-1,is_group_id:0,full_name:i.t("employee_position_manager"),avatar:""},{id:-2,user_id:-2,is_group_id:0,full_name:i.t("employee_position_store_manager"),avatar:""}];return e.createElement("div",{className:"ui segments"},e.createElement(l,{rootlink:"#setting/menu/id/other",roottext:o.t("company"),link:"#hrmleave/setting",text:i.t("heading_setting"),hidetab:!0}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui small form",ref:"form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h3",null,i.t("setting")),e.createElement("p",null,i.t("setting_info"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"three wide field",style:{paddingTop:"10px"}},e.createElement("label",{htmlFor:"currencyprefix"},i.t("hour_per_day_off"))),e.createElement("div",{className:"four wide field"},e.createElement("input",{name:"hour_per_day_off",ref:"hour_per_day_off",key:t.props.setting.hour_per_day_off,defaultValue:t.props.setting.hour_per_day_off}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"three wide field",style:{paddingTop:"10px"}},e.createElement("label",{htmlFor:"default_reviewer1"},i.t("default_reviewer1"))),e.createElement("div",{className:"four wide field"},e.createElement(c,{ref:"default_reviewer1",defaultValue:[t.props.setting.default_reviewer[0]],key:"default_reviewer1",excludeZero:!1,ignoregroup:!1,is_employee:!0,optionDefault:n}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"three wide field",style:{paddingTop:"10px"}},e.createElement("label",{htmlFor:"default_reviewer2"},i.t("default_reviewer2"))),e.createElement("div",{className:"four wide field"},e.createElement(c,{ref:"default_reviewer2",key:"default_reviewer2",defaultValue:[t.props.setting.default_reviewer[1]],excludeZero:!1,ignoregroup:!1,is_employee:!0,optionDefault:n}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"three wide field",style:{paddingTop:"10px"}},e.createElement("label",{htmlFor:"default_reviewer3"},i.t("default_reviewer3"))),e.createElement("div",{className:"four wide field"},e.createElement(c,{ref:"default_reviewer3",key:"default_reviewer3",defaultValue:[t.props.setting.default_reviewer[2]],excludeZero:!1,ignoregroup:!1,is_employee:!0,optionDefault:n}))))),e.createElement(d,{required:!1},e.createElement("button",{className:"ui teal button"},r.t("save"))))))}});return m}),define("components/inputnumberformat",["react","helper"],function(e,t){var n=e.createClass({displayName:"InputNumberFormatComponent",getDefaultProps:function(){return{value:0,placeholder:"0",name:"",style:{},readOnly:!1,disabled:!1,decimals:0}},getInitialState:function(){return{value:t.strToNumber(this.props.value),selectionStart:0}},onChange:function(e){var n=this,a=t.strToNumber(e.currentTarget.value);try{var i=new BigNumber(a);a=i.toNumber()}catch(e){a=this.state.value}var r=t.numberFormat(a,this.props.decimals),o=e.currentTarget.selectionStart+(r.length-e.currentTarget.value.length);0>o&&(o=0),this.setState({value:a,selectionStart:o},function(){$.isFunction(n.props.onChange)&&n.props.onChange(a)})},componentDidUpdate:function(){$(e.findDOMNode(this)).is(":focus")&&e.findDOMNode(this).setSelectionRange(this.state.selectionStart,this.state.selectionStart)},componentWillReceiveProps:function(e){this.state.value=t.strToNumber(e.value)},render:function(){return e.createElement("input",{placeholder:this.props.placeholder,size:this.props.size,name:this.props.name,value:this.state.value>0?t.numberFormat(this.state.value,this.props.decimals):"",style:this.props.style,readOnly:this.props.readOnly,disabled:this.props.disabled,onChange:this.onChange})}});return n}),define("components/inputphonenumber",["react","helper"],function(e,t){var n=e.createClass({displayName:"InputPhoneNumberComponent",getDefaultProps:function(){return{value:"",placeholder:"",name:"",style:{},maxCharacters:12,readOnly:!1,disabled:!1}},getInitialState:function(){return{value:this.props.value+"",selectionStart:0}},onChange:function(e){var t=this,n=e.currentTarget.value,a=n.replace(/[^0-9]/gim,"").substr(0,this.props.maxCharacters),i=e.currentTarget.selectionStart+(a.length-n.length);0>i&&(i=0),this.setState({value:a,selectionStart:i},function(){$.isFunction(t.props.onChange)&&t.props.onChange(a)})},componentDidUpdate:function(){$(e.findDOMNode(this)).is(":focus")&&e.findDOMNode(this).setSelectionRange(this.state.selectionStart,this.state.selectionStart)},componentWillReceiveProps:function(e){this.state.value=e.value+""},render:function(){return e.createElement("input",{placeholder:this.props.placeholder,name:this.props.name,value:this.state.value,style:this.props.style,readOnly:this.props.readOnly,disabled:this.props.disabled,onBlur:this.props.onBlur,onChange:this.onChange})}});return n}),define("components/inputquantityformat",["react","helper"],function(e,t){var n=e.createClass({displayName:"InputQuantityFormatComponent",getDefaultProps:function(){return{value:0,placeholder:"0",name:"",style:{},readOnly:!1,disabled:!1}},getInitialState:function(){return{value:t.strToNumber(this.props.value),selectionStart:0}},onChange:function(e){var n=this,a=t.strToNumber(e.currentTarget.value);try{var i=new BigNumber(a);a=i.toNumber()}catch(e){a=this.state.value}var r=t.smartNumberFormat(a),o=e.currentTarget.selectionStart+(r.length-e.currentTarget.value.length);0>o&&(o=0),this.setState({value:a,selectionStart:o},function(){$.isFunction(n.props.onChange)&&n.props.onChange(a)})},componentDidUpdate:function(){$(e.findDOMNode(this)).is(":focus")&&e.findDOMNode(this).setSelectionRange(this.state.selectionStart,this.state.selectionStart)},componentWillReceiveProps:function(e){this.state.value=t.strToNumber(e.value)},render:function(){return e.createElement("input",{placeholder:this.props.placeholder,name:this.props.name,value:this.state.value>0?t.numberFormat(this.state.value,t.quantityDecimal()):"",style:this.props.style,readOnly:this.props.readOnly,disabled:this.props.disabled,onChange:this.onChange})}});return n}),define("components/inputsmartnumberformat",["react","helper"],function(e,t){var n=e.createClass({displayName:"InputSmartNumberFormatComponent",getDefaultProps:function(){return{value:0,placeholder:"0",name:"",style:{},readOnly:!1,disabled:!1}},getInitialState:function(){return{value:t.strToNumber(this.props.value),selectionStart:0}},onChange:function(e){var n=this,a=t.strToNumber(e.currentTarget.value);try{var i=new BigNumber(a);a=i.toNumber()}catch(e){a=this.state.value}var r=t.smartNumberFormat(a),o=e.currentTarget.selectionStart+(r.length-e.currentTarget.value.length);0>o&&(o=0),this.setState({value:a,selectionStart:o},function(){$.isFunction(n.props.onChange)&&n.props.onChange(a)})},componentDidUpdate:function(){$(e.findDOMNode(this)).is(":focus")&&e.findDOMNode(this).setSelectionRange(this.state.selectionStart,this.state.selectionStart)},componentWillReceiveProps:function(e){this.state.value=t.strToNumber(e.value)},render:function(){return e.createElement("input",{placeholder:this.props.placeholder,size:this.props.size,name:this.props.name,value:this.state.value>0?t.smartNumberFormat(this.state.value):"",style:this.props.style,readOnly:this.props.readOnly,disabled:this.props.disabled,onChange:this.onChange})}});return n}),define("components/intro",["react","helper","language/default","eventbus"],function(e,t,n,a){var i=e.createClass({displayName:"IntroComponent",getDefaultProps:function(){return{steps:[],id:""}},componentWillUnmount:function(){},componentDidMount:function(){var e=introJs().onexit(function(){console.log("Exit intro")}).oncomplete(function(){console.log("Completed intro")});e.setOptions({steps:this.props.steps}),e.start()},render:function(){return e.createElement("span",null)}});return i}),define("components/introjs",["react","pref","collections/intro","models/intro"],function(e,t,n,a){var i=e.createClass({displayName:"IntroJsComponent",getDefaultProps:function(){return{section:""}},getInitialState:function(){return{data:{},introJs:null,introJsStart:null}},introJsAddRead:function(){if(this.state.introJs&&!$.isEmptyObject(this.state.data)){var e={company_id:t.get("cid"),creator_id:t.get("uid"),intro_id:this.state.data.id,current_step:this.state.introJs._currentStep+1,duration:moment().unix()-this.state.introJsStart};(new a).save(e,{})}},destroyIntroJs:function(){this.state.introJs&&this.state.introJs.exit()},initIntroJs:function(){var e=this;if(!($.isEmptyObject(this.state.data)||!$.isArray(this.state.data.step_detail)||this.state.data.step_detail.length<=0)){this.destroyIntroJs(),this.state.introJs=introJs("body"),this.state.introJsStart=moment().unix();var t=this.state.data.step_detail.map(function(e){return{element:e.selector||null,intro:e.text||"",position:e.position||"right"}});this.state.introJs.addSteps(t),this.state.introJs.onexit(function(){e.introJsAddRead(),delete e.introJs,delete e.state.data,delete e.introJsStart}),this.state.introJs.start()}},loadData:function(){var e=this;this.props.section&&(new n).fetch({data:{company_id:t.get("cid"),creator_id:t.get("uid"),section:this.props.section},success:function(t,n){$.isArray(n.items)&&n.items.length>0&&(e.state.data=n.items[0],e.initIntroJs())}})},componentWillUnmount:function(){this.destroyIntroJs()},componentDidMount:function(){this.loadData()},render:function(){return e.createElement("div",null)}});return i}),define("components/leftsidebar",["react","pref","helper","eventbus","querystring","language/default"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"StatusComponent",getDefaultProps:function(){return{name:"",heading:r.t("filter_sidebar_heading"),minusIcon:"tc-minus",filterIcon:"tc-search",hideTitle:r.t("filter_sidebar_hide_title"),showTitle:r.t("filter_sidebar_show_title"),offsetTop:0}},getSavedName:function(){var e=this.props.name;return 0==this.props.name.length&&(e=i.get("_controller").replace("/","_")),"hidesidebar_"+e},toggleMinimize:function(n){"undefined"!=typeof n&&n.preventDefault();var a=$(e.findDOMNode(this.refs.icon));a.hasClass(this.props.minusIcon)?(a.removeClass(this.props.minusIcon).addClass(this.props.filterIcon),a.parent().attr("title",this.props.showTitle),t.set(this.getSavedName(),1)):(a.removeClass(this.props.filterIcon).addClass(this.props.minusIcon),a.parent().attr("title",this.props.hideTitle),$(e.findDOMNode(this.refs.filtermenuitem)).show(),t.set(this.getSavedName(),0)),$("#page").toggleClass("pageminimize"),$(window).trigger("resize")},updateSize:function(){var t=300;n.isSmallScreen()||(t=$(window).height()-128-this.props.offsetTop,$(e.findDOMNode(this.refs.filtermenuitem)).height(t).niceScroll({preservenativescrolling:!1}))},filterSidebarToggleHandler:function(){$(e.findDOMNode(this)).toggle()},componentDidUpdate:function(){n.isSmallScreen()&&$("body, document").scrollTop(50)},componentWillUnmount:function(){},componentDidMount:function(){(n.isSmallScreen()||1==t.get(this.getSavedName()))&&this.toggleMinimize(),this.updateSize(),$(e.findDOMNode(this.refs.minimizebutton)).fastClick(this.toggleMinimize)},render:function(){return n.isPhonegap(),e.createElement("div",{className:"ui vertical menu filtermenu"},e.createElement("h3",{className:"item filtermenuheading"},e.createElement("a",{href:"#",ref:"minimizebutton",title:this.props.hideTitle,className:"ui icon noborder big basic button pull-right"},e.createElement("i",{ref:"icon",className:"icon "+this.props.minusIcon})),e.createElement("span",null,this.props.heading)),e.createElement("div",{className:"item filtermenuitem",ref:"filtermenuitem",style:{display:n.isSmallScreen()?"none":""}},e.createElement("form",{className:"ui form"},this.props.children)))}});return o}),define("components/mail/desktop/index",["backbone","react","pref","helper","eventbus","querystring","components/mail/desktop/mailleft","components/mail/desktop/maillist","components/mail/desktop/mailheadtoolbar","components/mail/desktop/detail","components/mail/desktop/compose"],function(e,t,n,a,i,r,o,s,l,c,d){var u=t.createClass({displayName:"MailDesktopComponent",lastMailID:0,getInitialState:function(){return{layout:""!=n.get("maillayout")?n.get("maillayout"):"two-columns"}},openHandler:function(t){var n="inbox";""!=r.get("mailbox")&&(n=r.get("mailbox")),e.history.navigate("mail/index/mailbox/"+n+"/id/"+t),"three-columns"==this.state.layout?i.trigger("maillist:show"):i.trigger("maillist:hide"),this.loadDetailHandler(t)},loadDetailHandler:function(e){this.lastMailID!=e?(this.lastMailID=e,t.unmountComponentAtNode(t.findDOMNode(this.refs.maildetail)),t.render(t.createElement(c,{layout:this.state.layout,id:e}),t.findDOMNode(this.refs.maildetail))):(i.trigger("maildetail:show",e),$(t.findDOMNode(this.refs.maildetail)).show())},changeLayoutHandler:function(e){if(this.state.layout!=e){this.setState({layout:e});var t=r.get("id");"three-columns"==e?t>0&&i.trigger("maillist:show"):t>0&&(i.trigger("maildetail:show",t),i.trigger("maillist:hide"))}},composeHandler:function(e){e=e||[],t.render(t.createElement(d,{recipients:e}),t.findDOMNode(this.refs.mailcompose))},unmountCompose:function(){t.unmountComponentAtNode(t.findDOMNode(this.refs.mailcompose))},checkOpenDetail:function(){""!=r.get("id")&&i.trigger("mail:open",r.get("id"))},componentDidUpdate:function(){this.checkOpenDetail()},componentWillUnmount:function(){this.unmountCompose(),i.off("mail:open",this.openHandler),i.off("mail:compose",this.composeHandler),i.off("compose:unmount",this.unmountCompose),i.off("mail:changelayout",this.changeLayoutHandler)},componentDidMount:function(){i.on("mail:open",this.openHandler),i.on("mail:compose",this.composeHandler),i.on("compose:unmount",this.unmountCompose),i.on("mail:changelayout",this.changeLayoutHandler),this.checkOpenDetail()},render:function(){var e="inbox",n=this.state.layout,a="two-columns",i=""!=r.get("id");return""!=r.get("mailbox")&&(e=r.get("mailbox")),"three-columns"==n&&(a=n,i=!1),t.createElement("div",null,t.createElement("div",{id:"mailbox",ref:"mailboxcontainer",className:a},t.createElement(o,{defaultmailbox:e}),t.createElement("div",{id:"mailcontainer"},t.createElement(l,{layout:n}),t.createElement("div",{id:"maillistcontainer"},t.createElement(s,{defaultmailbox:e,layout:n,hideoninit:i})),t.createElement("div",{ref:"maildetail",id:"maildetailcontainer"})),t.createElement("div",{ref:"mailcompose"})))}});return u}),define("components/mail/manage/detail",["react","pref","helper","eventbus","querystring","language/mail","language/default","components/filestrip","models/user","models/group","models/employee","models/mailmanage"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"MailDetailComponent",getInitialState:function(){return{data:{id:0,to:[]}}},loadData:function(t){var n=this;$(e.findDOMNode(n.refs.loader)).addClass("active"),new u({id:t}).fetch({success:function(e,t){n.setState({data:t}),a.trigger("maildetail:showtoolbar",t),a.trigger("mailleft:countinbox")},complete:function(){$(e.findDOMNode(n.refs.loader)).removeClass("active"),a.trigger("maillist:completed")}}),$(e.findDOMNode(n.refs.detailinfo)).dropdown()},toggleStarred:function(n){n.preventDefault();var a=this.state.data,i=$(e.findDOMNode(this.refs.isstarred)),r={company_id:t.get("cid"),creator_id:t.get("uid")};$.ajax({type:"PUT",dataType:"json",url:(new u).urlRoot+"/starred/"+a.id,data:r,success:function(e){i.hasClass("isstarred")?i.removeClass("isstarred"):i.addClass("isstarred")},error:function(){}})},resetReplyFormHandler:function(){console.log("a"),$(e.findDOMNode(this.refs.mailreplyaction)).show()},messageReply:function(t){switch(t=t||"reply",$(e.findDOMNode(this)).find(".reply_form").hide(),$(e.findDOMNode(this.refs.mailreplyaction)).hide(),t){case"reply":$(e.findDOMNode(this.refs.reply_form)).show(),this.replyForm.focusMessage();break;case"reply_all":$(e.findDOMNode(this.refs.reply_all_form)).show(),this.replyAllForm.focusMessage();break;case"forward":$(e.findDOMNode(this.refs.forward_form)).show(),this.forwardForm.focusMessage()}},messageTrash:function(e){var t=i.get("mailbox");e>0&&new u({id:e}).destroy({success:function(){Backbone.history.navigate("mail/index/mailbox/"+t),a.trigger("maillist:load",{mailbox:t})},error:function(e,t){},complete:function(){}})},messageQuoteToggle:function(e){e.preventDefault();var t=e.currentTarget;$(t).next().toggle()},compactReply:function(){var t=this,n=e.createElement("a",{className:"quotedmessagetoggle",href:"#"},e.createElement("i",{className:"tc-more"}));$(e.findDOMNode(this)).find(".quotedmessage").before(e.renderToString(n)),$(e.findDOMNode(this)).find(".quotedmessage").toggle(),$(e.findDOMNode(this)).find(".quotedmessagetoggle").on("click",function(e){t.messageQuoteToggle(e)})},composeHandle:function(e){var t=e.attr("href")||e.attr("data-id");t=parseInt(t),t>0&&a.trigger("mail:compose",[t])},updateReceiptHtml:function(t,n){$(e.findDOMNode(this.refs.receiver)).html(t),$(e.findDOMNode(this.refs.receiverinfo)).html(n)},markUnreadHandler:function(){var n=this;"detail"==this.view&&"two-columns"==t.get("maillayout")&&new u({id:this.state.data.id}).save({company_id:t.get("cid"),creator_id:t.get("uid"),is_read:0},{success:function(t){$(e.findDOMNode(n)).addClass("unread")}})},markReadHandler:function(){var n=this;"detail"==this.view&&"two-columns"==t.get("maillayout")&&new u({id:this.state.data.id}).save({company_id:t.get("cid"),creator_id:t.get("uid"),is_read:1},{success:function(t){$(e.findDOMNode(n)).removeClass("unread")}})},markFavoriteHandler:function(){var n=this;"detail"==this.view&&"two-columns"==t.get("maillayout")&&new u({id:this.state.data.id}).save({company_id:t.get("cid"),creator_id:t.get("uid"),is_favourite:1},{success:function(t){$(e.findDOMNode(n.refs.isstarred)).addClass("isstarred")}})},markUnfavouriteHandler:function(){var n=this;"detail"==this.view&&"two-columns"==t.get("maillayout")&&new u({id:this.state.data.id}).save({company_id:t.get("cid"),creator_id:t.get("uid"),is_favourite:0},{success:function(t){$(e.findDOMNode(n.refs.isstarred)).removeClass("isstarred")}})},markOnList:function(){this.view="list"},markOnDetail:function(){this.view="detail"},componentDidUpdate:function(){var a=this,i=t.get("uid"),o=[],s={},d=[],u=2,m=0;o=this.state.data.to||o,u=o.length+1,this.state.data.creator_id>0&&new l({id:this.state.data.creator_id}).fetch({success:function(t,i){e.render(e.createElement("img",{className:"ui avatar image",src:n.getAvatarPath(i.avatar)}),e.findDOMNode(a.refs.avatar)),$(e.findDOMNode(a.refs.sender)).html(i.fullname),$(e.findDOMNode(a.refs.senderinfo)).html(i.fullname),s=i,m++,m==u&&a.updateReceiptHtml(p,h)},complete:function(){}});for(var p="",h="",f=0;f<o.length;f++){var g=o[f];/g/.test(g)?new c({id:g.replace(/g/,"")}).fetch({success:function(e,t){""!=p&&(p+=", ",h+="<br />"),t.fullname=t.name,p+=t.name,h+=t.name,d.push(t),m++,m==u&&(p=r.t("to")+" "+p,a.updateReceiptHtml(p,h))},complete:function(){m++,m==u&&(p=r.t("to")+" "+p,a.updateReceiptHtml(p,h))}}):new l({id:g}).fetch({success:function(e,t){var s=(t.fullname.split(" "),t.fullname),l=s;o.length>1&&(l=n.getShortName(s)),""!=p&&(p+=", ",h+="<br />"),p+=o[f]!=i?l:r.t("me"),h+=s,d.push(t),m++,m==u&&(p=r.t("to")+" "+p,a.updateReceiptHtml(p,h))},complete:function(){}})}$(e.findDOMNode(a.refs.detailinfo)).dropdown(),$(e.findDOMNode(a.refs.mailtext)).find("a.mailto").each(function(){$(this).on("click",function(e){e.preventDefault(),a.composeHandle($(this))})}),$(e.findDOMNode(a.refs.mailtext)).find("a.mailto").each(function(){$(this).on("click",function(e){e.preventDefault(),a.composeHandle($(this))})}),this.compactReply()},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.modal)).modal({context:e.findDOMNode(this),closable:!1,onShow:function(){$("body").addClass("has-modal")},onHide:function(){$("body").removeClass("has-modal")}}).modal("show"),t.loadData(this.props.id)},renderContent:function(){var t=this,a=t.state.data,i=moment.unix(a.date_created),o=i.format("HH:mm")+" "+r.t("day")+" "+i.format("DD")+" "+r.t("month")+" "+i.format("MM")+" "+r.t("year")+" "+i.format("YYYY"),l=a.content.replace(/\{quoted_sender_time\}/g,r.t("quoted_sender_time"));return l=l.replace(/\{quoted_sender_write\}/g,r.t("quoted_sender_write")),l=l.replace(/\{forwarded_head\}/g,r.t("forwarded_head")),l=l.replace(/\{forwarded_from\}/g,r.t("forwarded_from")),l=l.replace(/\{forwarded_date\}/g,r.t("forwarded_date")),l=l.replace(/\{forwarded_to\}/g,r.t("forwarded_to")),e.createElement("div",{id:"maildetail",key:a.id,ref:"maildetail"},e.createElement("div",{id:"mailsubject"},e.createElement("h3",null,a.subject)),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"ui items maildetailmetabox"},e.createElement("div",{className:"item"},e.createElement("div",{ref:"avatar"}),e.createElement("div",{className:"left aligned content"},e.createElement("div",{className:"meta"},e.createElement("span",{ref:"sender"}),e.createElement("br",null),e.createElement("span",{ref:"receiver"}),e.createElement("div",{className:"ui pointing top left dropdown",id:"detailinfo",ref:"detailinfo"},e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item"},e.createElement("table",{className:"ui very basic table"},e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{width:"70",className:"right aligned",style:{verticalAlign:"top"}},r.t("from"),":"),e.createElement("td",{ref:"senderinfo"})),e.createElement("tr",null,e.createElement("td",{className:"right aligned",style:{verticalAlign:"top"}},r.t("to"),":"),e.createElement("td",{ref:"receiverinfo"})),e.createElement("tr",null,e.createElement("td",{className:"right aligned",style:{verticalAlign:"top"}},r.t("date"),":"),e.createElement("td",{ref:"dateinfo"},o)),e.createElement("tr",null,e.createElement("td",{className:"right aligned",style:{verticalAlign:"top"}},r.t("subject"),":"),e.createElement("td",{ref:"dateinfo"},a.subject))))))))),e.createElement("div",{className:"right aligned content clearing"},e.createElement("div",{className:"ui right floated"},e.createElement("span",{className:"detaildatecreated"},i.format("DD")," ",r.t("month")," ",i.format("MM")," (",n.relativeTime(a.date_created),")"),e.createElement("a",{ref:"isstarred",href:"#",onClick:this.toggleStarred,className:"mailstar "+(1==a.isstarred?"isstarred":"")},e.createElement("i",{className:"icon tc-star"})))))),e.createElement("div",{id:"mailtext",ref:"mailtext",key:moment().unix(),dangerouslySetInnerHTML:{__html:l}}),a.files.length>0?e.createElement("div",{id:"mailfile"},e.createElement("div",{className:"ui divider"}),e.createElement("p",null,e.createElement("strong",null,a.files.length," ",r.t("attachment"))),e.createElement(s,{enableRenderBigOnSinglePhoto:!1,files:a.files})):null)},renderEmpty:function(){return e.createElement("div",{id:"maildetail",ref:"maildetail"},e.createElement("div",{className:"ui loader",ref:"loader"}))},render:function(){return e.createElement("div",null,e.createElement("div",{ref:"modal",className:"ui modal"},e.createElement("i",{className:"icon close tc-cross"}),e.createElement("div",{className:"content"},this.state.data.id>0?this.renderContent():this.renderEmpty())))}});return m}),define("components/mail/manage/item",["react","backbone","pref","helper","eventbus","components/employee-avatar","components/datetime","language/mail","models/mailmanage","components/confirm"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"MailManageItemComponent",getInitialState:function(){return{data:{}}},showEditActionSheet:function(e){e.preventDefault();var t={buttons:[{text:s.t("view_detail"),href:"#",onClick:this.loadDetailHandler}]};a.showActionSheet(t)},loadData:function(){},doFilter:function(e,t,n){n.preventDefault(),n.stopPropagation(),this.props.doFilter(e,t)},doCreatorFilter:function(e){this.props.doFilter("creator_id",e)},loadDetailHandler:function(e){e.preventDefault(),this.props.openDetail(this.props.data)},removeConfirmCancel:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.remove_link)).popup("hide")},removeConfirmApprove:function(t){t.preventDefault();var n=this,i=$(e.findDOMNode(this.refs.remove_link));i.popup("hide"),i.addClass("loading"),new l(this.props.data).destroy({success:function(e,t){i.removeClass("loading"),n.props.removeItem(n.props.data)},error:function(e,t){i.removeClass("loading"),a.notifyError(t,s,"error")}})},componentDidUpdate:function(){},componentDidMount:function(){$(e.findDOMNode(this.refs.remove_link)).popup({on:"click",popup:e.findDOMNode(this.refs.remove_confirm)})},renderMobile:function(){var t=this,n=t.props.data;return e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemdotright"},e.createElement("a",{className:"mitemheading mitemheadingnormal",href:"javascript:void(0)"},n.subject),e.createElement("div",{className:"mitemmeta clear",id:"crmemailitemmeta"},e.createElement(r,{cssStyles:{padding:0},id:n.creator_id,hover:!1,avatar:!1})," ",e.createElement("em",null,s.t("created_at"))," ",e.createElement(o,{ts:this.props.data.date_created}),e.createElement("br",null)))))},renderDesktop:function(){var t=this,n=t.props.data;return e.createElement("tr",{className:"top aligned"},e.createElement("td",null,n.id),e.createElement("td",{width:"160"},e.createElement(r,{hover:!1,id:n.creator_id,onClick:t.doCreatorFilter})),e.createElement("td",{width:"300"},e.createElement("a",{href:"",onClick:t.loadDetailHandler},n.subject," ")),e.createElement("td",null,n.summary),e.createElement("td",null,n.files.length>0?e.createElement("i",{className:"tc-link"}):null),e.createElement("td",null,e.createElement(o,{ts:n.date_created})),e.createElement("td",{className:"right aligned"},e.createElement("a",{href:"javascript:void(0)",ref:"remove_link",className:"ui icon mini basic button noborder"},e.createElement("i",{className:"tc-trash"})),e.createElement("div",{ref:"remove_confirm",className:"ui popup"},e.createElement(c,{onCancel:this.removeConfirmCancel,onConfirm:this.removeConfirmApprove}))))},render:function(){return a.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return d}),define("components/mail/mobile/index",["backbone","react","helper","eventbus","querystring","components/mail/mobile/mailleft","components/mail/mobile/maillist","components/mail/mobile/mailheadtoolbar","components/mail/mobile/detail","components/mail/mobile/compose"],function(e,t,n,a,i,r,o,s,l,c){var d=t.createClass({displayName:"MailMobileComponent",openHandler:function(t){e.history.navigate("mail/index/mailbox/"+i.get("mailbox")+"/id/"+t),a.trigger("maillist:hide"),a.trigger("maildetail:show",t)},composeHandler:function(e){e=e||[],t.render(t.createElement(c,{recipients:e}),t.findDOMNode(this.refs.mailcompose))},unmountCompose:function(){t.unmountComponentAtNode(t.findDOMNode(this.refs.mailcompose))},checkOpenDetail:function(){""!=i.get("id")?a.trigger("mail:open",i.get("id")):(a.trigger("maildetail:hide"),a.trigger("maillist:load",i.get("mailbox")))},componentDidUpdate:function(){this.checkOpenDetail()},componentWillUnmount:function(){this.unmountCompose(),a.off("mail:open",this.openHandler),a.off("mail:compose",this.composeHandler),a.off("compose:unmount",this.unmountCompose)},componentDidMount:function(){a.on("mail:open",this.openHandler),a.on("mail:compose",this.composeHandler),a.on("compose:unmount",this.unmountCompose),this.checkOpenDetail()},render:function(){var e="inbox";return""!=i.get("mailbox")&&(e=i.get("mailbox")),
t.createElement("div",{id:"mailbox",className:"mailboxmobile"},t.createElement(r,{defaultmailbox:e}),t.createElement("div",{id:"mailcontainermobile"},t.createElement(s,null),t.createElement(o,{defaultmailbox:e,hideoninit:""!=i.get("id")}),t.createElement(l,null)),t.createElement("div",{ref:"mailcompose"}),t.createElement("div",{style:{clear:"both"}}))}});return d}),define("components/menusidebar",["react","pref","helper","language/default"],function(e,t,n,a){var i=e.createClass({displayName:"MenuSidebarComponent",getDefaultProps:function(){return{hideHeading:!1,heading:"Menu",minusIcon:"tc-minus",filterIcon:"tc-filter",hideTitle:a.t("hide"),showTitle:a.t("show")}},toggleMinimize:function(n){"undefined"!=typeof n&&n.preventDefault();var a=$(e.findDOMNode(this.refs.icon));a.hasClass(this.props.minusIcon)?(a.removeClass(this.props.minusIcon).addClass(this.props.filterIcon),a.parent().attr("title",this.props.showTitle),t.set("hidesidebar",1)):(a.removeClass(this.props.filterIcon).addClass(this.props.minusIcon),a.parent().attr("title",this.props.hideTitle),$(e.findDOMNode(this.refs.filtermenuitem)).show(),t.set("hidesidebar",0)),$("#page").toggleClass("pageminimize")},updateSize:function(){var t=300;n.isSmallScreen()||(t=$(window).height()-128,$(e.findDOMNode(this.refs.filtermenuitem)).height(t).niceScroll({preservenativescrolling:!1}))},componentDidUpdate:function(){},componentDidMount:function(){(n.isSmallScreen()||1==t.get("hidesidebar"))&&this.toggleMinimize(),this.updateSize()},render:function(){return e.createElement("div",{className:"ui secondary vertical menu filtermenu"},this.props.hideHeading?"":e.createElement("h3",{className:"item filtermenuheading"},e.createElement("a",{href:"#",ref:"minimizebutton",title:this.props.hideTitle,onClick:this.toggleMinimize,className:"ui icon noborder big basic button pull-right"},e.createElement("i",{ref:"icon",className:"icon "+this.props.minusIcon})),e.createElement("span",null,this.props.heading)),e.createElement("div",{className:"item menuitem",ref:"filtermenuitem",style:{display:n.isSmallScreen()?"none":""}},this.props.children))}});return i}),define("components/more-data-loading",["react"],function(e){var t=e.createClass({displayName:"MoreDataLoadingComponent",getDefaultProps:function(){return{width:"auto",height:"auto",size:"mini",isActive:!1,elementStyle:{}}},render:function(){var t={width:this.props.width,height:this.props.height,display:"inline-block"},n={position:"relative"},a=$.extend(t,this.props.elementStyle,n);return e.createElement("div",{style:a},e.createElement("div",{className:"ui inverted "+(this.props.isActive?"active":"")+" dimmer"},e.createElement("div",{className:"ui "+this.props.size+" loader"})),this.props.children)}});return t}),define("components/office/item-workrange",["react","helper","pref","eventbus","models/office","models/worktrackingrange","language/default","components/colorpicker","components/select-status","components/office/select-time","language/office"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"OfficeItemWorkRangeComponent",getInitialState:function(){return{allowot:0}},deleterange:function(e){e.preventDefault(),$(this.refs.delete.getDOMNode()).popup("hide");var t=0;this.props.data.hasOwnProperty("id")&&(t=this.props.data.id),this.props.deleterange(this.props.index,t)},_cancelDelete:function(e){e.preventDefault(),$(this.refs.delete.getDOMNode()).popup("hide")},_unsignedInput:function(e){var n=t.strToInt(e.target.value);n=Math.abs(n),e.target.value=t.numberFormat(n)},componentDidUpdate:function(){$(this.refs.delete.getDOMNode()).popup({on:"click",popup:this.refs["delete-confirm"].getDOMNode()})},componentDidMount:function(){$(this.refs.delete.getDOMNode()).popup({on:"click",popup:this.refs["delete-confirm"].getDOMNode()}),$(e.findDOMNode(this.refs.ratio)).autoNumeric({aDec:"."}),$(e.findDOMNode(this.refs.ot_ratio)).autoNumeric({wEmpty:"one"});var t="09",n="17",a="00",i="00",o=(new r).STATUS_ENABLE;if(this.props.hasOwnProperty("data")&&!jQuery.isEmptyObject(this.props.data)){if(this.props.data.hasOwnProperty("time_start")&&""!=this.props.data.time_start){var s=this.props.data.time_start.split(":");s.length&&(t=s[0],a=s[1])}if(this.props.data.hasOwnProperty("time_end")&&""!=this.props.data.time_end){var s=this.props.data.time_end.split(":");s.length&&(n=s[0],i=s[1])}o=this.props.data.status}$(e.findDOMNode(this.refs.hourstart)).val(t),$(e.findDOMNode(this.refs.minutestart)).val(a),$(e.findDOMNode(this.refs.hourend)).val(n),$(e.findDOMNode(this.refs.minuteend)).val(i),$(e.findDOMNode(this.refs.status)).dropdown("set selected",o)},render:function(){var t=this,n=0;t.props.data.hasOwnProperty("id")&&(n=t.props.data.id);var a=1;this.props.data.ratio>0&&(a=this.props.data.ratio);var i="";this.props.data.ot_ratio>0&&(i=this.props.data.ot_ratio);var d="";return""!=this.props.data.ignore_duration&&"0"!=this.props.data.ignore_duration&&(d=this.props.data.ignore_duration),e.createElement("tr",{className:"inputworkrange","data-id":n},e.createElement("td",null,e.createElement("input",{name:"display_order",defaultValue:t.props.data.display_order,type:"text",onInput:t._unsignedInput})),e.createElement("td",null,e.createElement("input",{name:"name",defaultValue:t.props.data.name,type:"text"})),e.createElement("td",null,e.createElement(s,{name:"color",ref:"color",value:"#"+t.props.data.color})),e.createElement("td",null,e.createElement("div",{style:{float:"left",width:"45%",marginRight:"8px"}},e.createElement(c,{name:"hourstart",type:"hour",ref:"hourstart"})),e.createElement("div",{style:{float:"left",width:"45%"}},e.createElement(c,{name:"minutestart",type:"minute",ref:"minutestart"}))),e.createElement("td",null,e.createElement("div",{style:{float:"left",width:"45%",marginRight:"8px"}},e.createElement(c,{name:"hourend",type:"hour",ref:"hourend",time_start:!1})),e.createElement("div",{style:{float:"left",width:"45%"}},e.createElement(c,{name:"minuteend",type:"minute",ref:"minuteend"}))),e.createElement("td",{width:"100"},e.createElement(l,{data:(new r).getStatusList(),className:"fluid",name:"status",ref:"status"})),e.createElement("td",null,e.createElement("input",{type:"text",name:"ratio",ref:"ratio",defaultValue:a})),e.createElement("td",null,e.createElement("input",{type:"text",name:"ignore_duration",ref:"ignore_duration",defaultValue:d})),e.createElement("td",null,e.createElement("div",{className:"ui basic button mini",ref:"delete",style:{width:"36px"}},e.createElement("i",{className:"icon tc-trash"})),e.createElement("div",{ref:"delete-confirm",className:"ui flowing popup top left transition hidden"},e.createElement("h4",null,o.t("delete_confirm")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:this.deleterange,className:"ui button mini red",href:"#"},o.t("delete_button")),e.createElement("a",{onClick:this._cancelDelete,className:"ui button mini",href:"#"},o.t("cancel_button"))))))}});return u}),define("components/office/form-modal-add",["react","backbone","helper","setting","eventbus","pref","models/office","models/worktrackingrange","language/office","components/select-region","components/office/select-time","components/office/item-workrange","components/confirm","components/company/ipaddress","language/default"],function(e,t,n,a,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"OfficeAddModalComponent",getInitialState:function(){return{rowdata:[],pass:!0,region:0,office_id:0,rownum:[]}},add:function(){if(this.setState({pass:!0}),$(e.findDOMNode(this.refs.btn_add)).attr("disabled",!0),0==this.state.office_id){var t=$(".ui .form",this.getDOMNode()),a=this;t.addClass("loading");var i=$("#officeinfo");(new s).save({company_id:o.get("cid"),creator_id:o.get("uid"),name:i.find('[name="name"]',t).val(),address:i.find('[name="address"]',t).val(),work_day_allow_ip:i.find('[name="work_day_allow_ip"]',t).val(),region_id:$(e.findDOMNode(a.refs.region)).dropdown("get value"),work_day_start:i.find('[name="hourstart"]',t).val()+":"+i.find('[name="minutestart"]',t).val()+":00",work_day_end:i.find('[name="hourend"]',t).val()+":"+i.find('[name="minuteend"]',t).val()+":00",country:"vn"},{success:function(e,t){a.setState({office_id:t.id}),$(".inputworkrange").length>0?parseInt(t.id)>0&&a.addworktrackingrange(t.id):($(a.getDOMNode()).modal({context:$(a.getDOMNode()).parent()}).modal("hide"),a.props.loaddata())},error:function(e,t){var a=[];t.responseJSON.error.map(function(e){a.push(c.t(e))}),""==a?n.showError(f.t("insert_fail")):n.showError(a.join(", "))},complete:function(){$(e.findDOMNode(a.refs.btn_add)).attr("disabled",!1),t.removeClass("loading")}})}else this.addworktrackingrange(this.state.office_id)},addworktrackingrange:function(e){var t=$(".inputworkrange"),n=this;$.each(t,function(a,i){var r=!1;a==t.length-1&&(r=!0),n.saveworkingtrackingrange($(i),e,r,a+1)})},saveworkingtrackingrange:function(e,t,a,i){var r=$(".ui .form",this.getDOMNode()),s=this,d=e.find('[name="hourstart"]').val()+":"+e.find('[name="minutestart"]').val(),u=e.find('[name="hourend"]').val()+":"+e.find('[name="minuteend"]').val();(new l).save({company_id:o.get("cid"),creator_id:o.get("uid"),name:e.find('[name="name"]').val(),office_id:t,color:e.find('[name="color"]').val(),ratio:e.find('[name="ratio"]').val(),ot_ratio:e.find('[name="ratio"]').val(),ot_allow:0,ignore_duration:e.find('[name="ignore_duration"]').val(),display_order:e.find('[name="display_order"]').val(),status:e.find('[name="status"]').val(),time_started:d,time_ended:u},{success:function(){n.showSuccess(f.t("insert_success")),a&&s.state.pass&&($(".ui.modal",s.getDOMNode()).modal("hide"),s.props.loaddata())},error:function(e,t){var a=[];t.responseJSON.error.map(function(e){a.push(c.t(e))}),""==a?n.showError(f.t("insert_fail")):n.showError(a.join(", ")),s.setState({pass:!1})},complete:function(){r.removeClass("loading")}})},_addrow:function(){var e=$(".inputworkrange"),t=[];for(i=e.length;i>=0;i--)t.push(i);t.reverse(),this.setState({rownum:t})},deleterow:function(e){var t=[];$.each(this.state.rownum,function(n,a){a!=e&&t.push(a)}),this.setState({rownum:t})},_regionOnChange:function(e){this.setState({region:e})},setIP:function(){$(e.findDOMNode(this.refs.ip)).popup({on:"hover",popup:this.refs["ip-info"].getDOMNode()})},getMaxStore:function(){var t=this,n=(new s).urlRoot+"/maxstore?company_id="+o.get("cid");$.get(n,{},function(n){n.maxstore<=n.count?$(e.findDOMNode(t.refs.warningtext)).addClass("visible"):$(e.findDOMNode(t.refs.warningtext)).removeClass("visible")})},componentDidMount:function(){this.getMaxStore(),$(".ui.modal",this.getDOMNode()).modal({context:this.getDOMNode(),onHidden:function(){r.trigger("modal:hide")}}).modal("show"),this.setIP()},render:function(){var t=this,n=8,a=17,i=0,r=0;return e.createElement("div",null,e.createElement("div",{className:"ui modal fullscreen"},e.createElement("div",{className:"header"},c.t("office_info_add")),e.createElement("div",{className:"content"},e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide"},e.createElement("div",{className:"ui warning message",ref:"warningtext"},e.createElement("i",{className:"close icon"}),c.t("error_company_have_maxstore")))),e.createElement("div",{className:"fields",id:"officeinfo"},e.createElement("div",{className:"field four wide"},e.createElement("h4",null,e.createElement("strong",null,c.t("general_information")))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide required"},e.createElement("label",null,c.t("name")),e.createElement("input",{name:"name",type:"text"})),e.createElement("div",{className:"field four wide"},e.createElement("label",null,c.t("address")),e.createElement("input",{name:"address",type:"text"})),e.createElement("div",{className:"field four wide"},e.createElement("label",null,c.t("region")),e.createElement(d,{onChange:t._regionOnChange,key:"region_1",parent_id:"0",ref:"region",value:t.state.region})),e.createElement("div",{className:"field four wide"},e.createElement("label",{ref:"ipworkdayallow"},c.t("restrict_ips")," ",e.createElement("i",{className:"icon tc-info",ref:"ip"})),e.createElement("input",{name:"work_day_allow_ip",type:"text"})),e.createElement("div",{ref:"ip-info",className:"ui flowing popup top left transition hidden"},c.t("current_ip_is")," ",e.createElement(h,null))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide"},e.createElement("label",null,c.t("work_time_start")),e.createElement(u,{key:"start_"+n,name:"hourstart",type:"hour",select:n})),e.createElement("div",{className:"field four wide"},e.createElement("label",null," "),e.createElement(u,{key:"end_"+i,name:"minutestart",type:"minute",select:i})),e.createElement("div",{className:"field four wide"},e.createElement("label",null,c.t("work_time_end")),e.createElement(u,{key:"start_"+a,name:"hourend",type:"hour",select:a})),e.createElement("div",{className:"field four wide"},e.createElement("label",null," "),e.createElement(u,{key:"end_"+r,name:"minuteend",type:"minute",select:r}))))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide"},e.createElement("table",{className:"ui small striped selectable unstackable table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{width:"100"},c.t("display_order")),e.createElement("th",null,c.t("name")),e.createElement("th",{width:"100"},c.t("color")),e.createElement("th",null,c.t("time_start")),e.createElement("th",null,c.t("time_end")),e.createElement("th",{width:"100"},c.t("status")),e.createElement("th",{width:"80"},c.t("workrang_ratio")),e.createElement("th",null,c.t("ignore_duration")," ",e.createElement("i",{className:"tc-info icon",title:c.t("description_ignore_time")})),e.createElement("th",null))),e.createElement("tbody",null,t.state.rownum.map(function(n){var a={};return e.createElement(m,{key:"workrange_"+n,index:n,data:a,deleterange:t.deleterow})}),e.createElement("tr",{ref:"workrangebtn"},e.createElement("td",{colSpan:"15"},e.createElement("div",{className:"ui blue labeled icon button mini",onClick:t._addrow},e.createElement("i",{className:"icon tc-plus"}),c.t("add_workrange_row"))))))))))),e.createElement("div",{className:"actions"},e.createElement("button",{className:"ui noborder basic approve button"},c.t("close")),e.createElement("button",{className:"ui button teal",ref:"btn_add",onClick:t.add},c.t("insert")))))}});return g}),define("components/office/form-modal-edit",["react","backbone","helper","eventbus","querystring","pref","models/office","models/worktrackingrange","language/office","collections/worktrackingrange","components/select-region","components/employeepicker","components/office/select-time","components/office/item-workrange","components/company/ipaddress","components/confirm","language/default"],function(e,t,n,a,r,o,s,l,c,d,u,m,p,h,f,g,_){var v=e.createClass({displayName:"OfficeEditModalComponent",getInitialState:function(){return{rowdata:[],pass:!0,rownum:[]}},componentDidMount:function(){$(".ui.modal",this.getDOMNode()).modal({context:this.getDOMNode(),onHidden:function(){a.trigger("modal:hide")}}).modal("show"),$(e.findDOMNode(this.refs.datereview)).add($(e.findDOMNode(this.refs.allow_late_time))).add($(e.findDOMNode(this.refs.allow_early_time))).autoNumeric({lZero:"deny",mDec:"0",vMin:"0"}),this._getWokingrange(),this.setIP()},_getWokingrange:function(){var e=this;$("#body-loader").addClass("active");var t={company_id:o.get("cid"),office_id:e.props.data.id,limit:100,page:1,is_not_deleted:1,sort_by:r.get("sort_by")||"display_order",sort_type:r.get("sort_type")||"ASC"};(new d).fetch({data:t,success:function(t,n){for(var a=[],t=[],i=n.items,r=0;r<n.total;r++)a.push(r),t.push(i[r]);e.setState({rowdata:t,rownum:a})},complete:function(){$("#body-loader").removeClass("active")}})},edit:function(){var t=$(".ui .form",this.getDOMNode()),a=this,i=$("#officeinfo");$(e.findDOMNode(this.refs.btn_edit)).attr("disabled",!0),new s({id:this.props.data.id}).save({company_id:o.get("cid"),creator_id:o.get("uid"),name:i.find('[name="name"]',t).val(),reviewer:a.refs.employees.getSelectedUserIdList().join(","),status:a.props.data.status,allow_late_time:$(e.findDOMNode(this.refs.allow_late_time)).autoNumeric("get"),allow_early_time:$(e.findDOMNode(this.refs.allow_early_time)).autoNumeric("get"),status:a.props.data.status,address:i.find('[name="address"]',t).val(),work_day_allow_ip:i.find('[name="work_day_allow_ip"]',t).val(),region_id:$(e.findDOMNode(a.refs.region)).dropdown("get value"),work_day_start:i.find('[name="hourstart"]',t).val()+":"+i.find('[name="minutestart"]',t).val()+":00",work_day_end:i.find('[name="hourend"]',t).val()+":"+i.find('[name="minuteend"]',t).val()+":00",date_review_checkin:$(e.findDOMNode(a.refs.datereview)).autoNumeric("get"),country:"vn"},{success:function(){$(".inputworkrange").length>0?a.editworktrackingrange():($(a.getDOMNode()).modal({context:$(a.getDOMNode()).parent()}).modal("hide"),a.props.loaddata())},error:function(e,t){var a=[];t.responseJSON.error.map(function(e){a.push(c.t(e))}),""==a?n.showError(_.t("update_fail")):n.showError(a.join(", "))},complete:function(){$(e.findDOMNode(a.refs.btn_edit)).attr("disabled",!1),t.removeClass("loading")}})},editworktrackingrange:function(){var e=$(".inputworkrange"),t=this;$.each(e,function(n,a){var i=!1;n==e.length-1&&(i=!0),parseInt($(a).attr("data-id"))>0?t.editworkingtrackingrange($(a),$(a).data("id"),i,n+1):t.addworkingtrackingrange($(a),i,n+1)})},addworkingtrackingrange:function(e,t,a){var i=$(".ui .form",this.getDOMNode()),r=this,s=e.find('[name="hourstart"]').val()+":"+e.find('[name="minutestart"]').val(),d=e.find('[name="hourend"]').val()+":"+e.find('[name="minuteend"]').val(),u="Dòng "+a;(new l).save({company_id:o.get("cid"),creator_id:o.get("uid"),name:e.find('[name="name"]').val(),office_id:this.props.data.id,color:e.find('[name="color"]').val(),ratio:e.find('[name="ratio"]').val(),ot_ratio:e.find('[name="ratio"]').val(),ot_allow:0,display_order:e.find('[name="display_order"]').val(),status:e.find('[name="status"]').val(),time_started:s,time_ended:d},{success:function(a,i){n.showSuccess(c.t("insert_success")),e.attr("data-id",i.id),r._getWokingrange(),t&&r.state.pass&&($(r.getDOMNode()).modal({context:$(r.getDOMNode()).parent()}).modal("hide"),r.props.loaddata())},error:function(e,t){var a=[];t.responseJSON.error.map(function(e){a.push(c.t(e))}),""==a?n.showError(u+": "+_.t("insert_fail")):n.showError(u+": "+a.join(", ")),r.setState({pass:!1})},complete:function(){i.removeClass("loading")}})},setIP:function(){$(e.findDOMNode(this.refs.ip)).popup({on:"hover",popup:this.refs["ip-info"].getDOMNode()})},editworkingtrackingrange:function(e,t,a,i){var r=$(".ui .form",this.getDOMNode()),s=this,d=e.find('[name="hourstart"]').val()+":"+e.find('[name="minutestart"]').val(),u=e.find('[name="hourend"]').val()+":"+e.find('[name="minuteend"]').val(),m="Dòng "+i;new l({id:t}).save({company_id:o.get("cid"),creator_id:o.get("uid"),name:e.find('[name="name"]').val(),office_id:this.props.data.id,color:e.find('[name="color"]').val(),ratio:e.find('[name="ratio"]').val(),ot_ratio:e.find('[name="ot_ratio"]').val(),ot_allow:0,ignore_duration:e.find('[name="ignore_duration"]').val(),display_order:e.find('[name="display_order"]').val(),status:e.find('[name="status"]').val(),time_started:d,time_ended:u},{success:function(){n.showSuccess(c.t("update_success")),a&&s.state.pass&&($(s.getDOMNode()).modal({context:$(s.getDOMNode()).parent()}).modal("hide"),s.props.loaddata())},error:function(e,t){var a=[];t.responseJSON.error.map(function(e){a.push(c.t(e))}),""==a?n.showError(m+": "+_.t("update_fail")):n.showError(m+": "+a.join(", ")),s.setState({pass:!1})},complete:function(){r.removeClass("loading")}})},_addrow:function(){var e=$(".inputworkrange"),t=[];for(i=e.length;i>=0;i--)t.push(i);t.reverse(),this.setState({rownum:t})},delete:function(e,t){var a=this;t>0?new l({id:t}).destroy({success:function(){n.showSuccess(_.t("delete_success")),a.deleterow(e)},error:function(){n.showError(_.t("delete_fail"))}}):a.deleterow(e)},deleterow:function(e){var t=[];$.each(this.state.rownum,function(n,a){a!=e&&t.push(a)}),this.setState({rownum:t}),this._getWokingrange()},render:function(){var t=this,n=this.props.data.work_day_start.split(":"),a=this.props.data.work_day_end.split(":"),i=n[0],r=a[0],o=n[1],s=a[1],l=[];return""!=this.props.data.reviewer_list&&(l=this.props.data.reviewer_list.split(",")),e.createElement("div",null,e.createElement("div",{className:"ui modal fullscreen"},e.createElement("div",{className:"header"},c.t("office_info_edit"),": ",t.props.data.name),e.createElement("div",{className:"content"},e.createElement("div",{className:"fields"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields",id:"officeinfo"},e.createElement("div",{className:"field four wide"},e.createElement("h4",null,e.createElement("strong",null,c.t("general_information")))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide required"},e.createElement("label",null,c.t("name")),e.createElement("input",{name:"name",type:"text",defaultValue:t.props.data.name})),e.createElement("div",{className:"field four wide"},e.createElement("label",null,c.t("address")),e.createElement("input",{name:"address",type:"text",defaultValue:t.props.data.address})),e.createElement("div",{className:"field four wide"},e.createElement("label",null,c.t("region")),e.createElement(u,{parent_id:"0",ref:"region",value:t.props.data.region_id})),e.createElement("div",{className:"field four wide"},e.createElement("label",{ref:"ipworkdayallow"},c.t("restrict_ips")," ",e.createElement("i",{className:"icon tc-info",ref:"ip"})),e.createElement("input",{name:"work_day_allow_ip",type:"text",defaultValue:t.props.data.work_day_allow_ip})),e.createElement("div",{ref:"ip-info",className:"ui flowing popup top left transition hidden"},c.t("current_ip_is")," ",e.createElement(f,null))),e.createElement("div",{className:"fields officetime"},e.createElement("div",{className:"field four wide"},e.createElement("label",null,c.t("work_time_start")),e.createElement(p,{key:"start_"+i,name:"hourstart",type:"hour",select:i})),e.createElement("div",{className:"field four wide"},e.createElement("label",null," "),e.createElement(p,{key:"end_"+o,name:"minutestart",type:"minute",select:o})),e.createElement("div",{className:"field four wide"},e.createElement("label",null,c.t("work_time_end")),e.createElement(p,{key:"start_"+r,name:"hourend",time_start:!1,type:"hour",select:r})),e.createElement("div",{className:"field four wide"},e.createElement("label",null," "),e.createElement(p,{key:"end_"+s,name:"minuteend",type:"minute",select:s}))),e.createElement("div",{className:"fields officetime"},e.createElement("div",{className:"field six wide"},e.createElement("label",null,c.t("work_tracking_reviewer")),e.createElement(m,{key:"reviewer"+moment().unix(),defaultvalue:l,ref:"employees",inputname:"employee"})),e.createElement("div",{className:"field four wide"},e.createElement("label",null,c.t("datereview")),e.createElement("input",{type:"text",ref:"datereview",defaultValue:t.props.data.date_review_checkin})),e.createElement("div",{className:"field four wide"},e.createElement("label",null,c.t("allow_late_time")," ",e.createElement("i",{className:"icon tc-info",title:c.t("allow_time_note")})),e.createElement("input",{type:"text",ref:"allow_late_time",defaultValue:t.props.data.allow_late_time})),e.createElement("div",{className:"field four wide"},e.createElement("label",null,c.t("allow_early_time")," ",e.createElement("i",{className:"icon tc-info",title:c.t("allow_time_note")})),e.createElement("input",{type:"text",ref:"allow_early_time",defaultValue:t.props.data.allow_early_time}))))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide"},e.createElement("table",{className:"ui small striped selectable unstackable table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{width:"50"},c.t("display_order")),e.createElement("th",null,c.t("name")),e.createElement("th",{width:"100"},c.t("color")),e.createElement("th",null,c.t("time_start")),e.createElement("th",null,c.t("time_end")),e.createElement("th",{width:"50"},c.t("status")),e.createElement("th",{width:"80"},c.t("workrang_ratio")),e.createElement("th",null,c.t("ignore_duration")," ",e.createElement("i",{className:"tc-info icon",title:c.t("description_ignore_time")})),e.createElement("th",null))),e.createElement("tbody",null,t.state.rownum.map(function(n,a){var i={};return"object"==typeof t.state.rowdata[n]&&(i=t.state.rowdata[n]),e.createElement(h,{key:"workrange_"+n,index:n,data:i,deleterange:t.delete})}),e.createElement("tr",{ref:"workrangebtn"},e.createElement("td",{colSpan:"15"},e.createElement("div",{className:"ui blue labeled icon button mini",onClick:t._addrow},e.createElement("i",{className:"icon tc-plus"}),c.t("add_workrange_row"))))))))))),e.createElement("div",{className:"actions"},e.createElement("button",{className:"ui noborder basic approve button"},c.t("close")),e.createElement("button",{className:"ui button teal",ref:"btn_edit",onClick:t.edit},c.t("update")))))}});return v}),define("components/office/item",["react","helper","eventbus","querystring","role","pref","models/office","models/user","models/region","collections/worktrackingrange","language/default","language/office","components/table/updatebutton","components/table/deletebutton","components/row-creator","components/datetime","components/confirm"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g){var _=e.createClass({displayName:"OfficeItemComponent",updateInfo:function(){var t=this;if(""!=t.props.data.reviewer_list){var n=this.props.data.reviewer_list.split(",");n.map(function(n,a){n>0&&new s({id:n}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.reviewerlist)).append("<div> - "+a.fullname+"</div>")}})})}},_getWokingrange:function(){var n=this;$("#body-loader").addClass("active");var i={company_id:r.get("cid"),office_id:n.props.data.id,limit:10,page:1,is_not_deleted:1,sort_by:a.get("sort_by")||"display_order",sort_type:a.get("sort_type")||"ASC"};(new c).fetch({data:i,success:function(a,i){var r="";$.each(i.items,function(e,n){r+="<div>- "+n.name+" ("+n.time_start+" - "+t.formatTimeEndWorkRange(n.time_end)+")</div>"}),$(e.findDOMNode(n.refs.workrange)).append(r)},complete:function(){$("#body-loader").removeClass("active")}})},deleteOffice:function(){var n=this;$(e.findDOMNode(this.refs.delete)).popup("hide"),new o({id:this.props.data.id}).destroy({success:function(){t.showSuccess(d.t("delete_success")),n.props.loadData()},error:function(){t.showError(d.t("delete_fail"))},complete:function(){$(".ui.form",n.getDOMNode()).removeClass("loading")}})},_getRegion:function(){var t=this;$(e.findDOMNode(t.refs.regionname)).text(""),this.props.data.region_id>0&&new l({id:this.props.data.region_id}).fetch({success:function(n,a){$(e.findDOMNode(t.refs.regionname)).text(a.name)}})},showEditActionSheet:function(e){e.preventDefault();var n=this,a=[];i.hasById(i.COMPANY_SETTING)&&(a.push({text:u.t("update"),onClick:function(e){e.preventDefault(),n.props.openEditModalHandler(n.props.data.id)}}),a.push({text:u.t("delete"),color:"red",onClick:function(e){1==confirm(u.t("cancel_confirm"))&&n.deleteOffice()}}));var r={buttons:a};t.showActionSheet(r)},clearview:function(){$(e.findDOMNode(this.refs.reviewerlist)).html("")},componentWillUnmount:function(){n.off("officeitem:clearview",this.clearview)},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.delete)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(g,{message:u.t("cancel_confirm")})),onShow:function(){$(this).find(".confirm").fastClick(function(e){e.preventDefault(),t.deleteOffice()}),$(this).find(".cancel").fastClick(function(n){n.preventDefault(),$(e.findDOMNode(t.refs.delete)).popup("hide")})}}),n.on("officeitem:clearview",this.clearview),this.updateInfo(),this._getWokingrange(),this._getRegion()},renderMobile:function(){var t=this,n=t.props.data,a=i.hasById(i.COMPANY_SETTING);return e.createElement("tr",null,e.createElement("td",null,a?e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})):"",i.hasById(i.COMPANY_SETTING)?e.createElement("a",{href:"javascript:void(0)",onClick:t.props.openEditModalHandler.bind(this,t.props.data.id),title:u.t("update"),className:"mitemheading mitemheadingnormal"},n.name):e.createElement("a",{className:"mitemheading mitemheadingnormal",href:"javascript:void(0)"},n.name),e.createElement("div",{className:"mitemmeta clear"},n.address?e.createElement("em",null,e.createElement("i",{className:"tc-map-marker"})," ",n.address," ",e.createElement("br",null)):"",e.createElement("p",{ref:"workrange"}))))},renderDesktop:function(){var t={};t.marginTop=0,0!=this.props.index&&(t.display="none");var n=this;return e.createElement("tr",{className:"top aligned"},e.createElement("td",null,this.props.data.id),e.createElement("td",null,i.hasById(i.COMPANY_SETTING)?e.createElement("a",{href:"javascript:void(0)",onClick:n.props.openEditModalHandler.bind(this,n.props.data.id),title:u.t("update")},n.props.data.name):e.createElement("span",null,n.props.data.name)),e.createElement("td",null,n.props.data.address),e.createElement("td",null,e.createElement("div",{ref:"workrange"})),e.createElement("td",null,e.createElement("div",{ref:"reviewerlist"})),e.createElement("td",null,n.props.data.work_day_allow_ip),e.createElement(h,{id:this.props.data.creator_id}),e.createElement("td",null,e.createElement(f,{ts:this.props.data.date_created})),i.hasById(i.COMPANY_SETTING)?e.createElement("td",{className:"right aligned"},e.createElement(m,{link:"javascript:void(0)",onClick:n.props.openEditModalHandler.bind(this,n.props.data.id)}),e.createElement(p,{onRemove:this.deleteOffice})):"")},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return _}),define("components/paginationnew",["react","helper","language/default"],function(e,t,n){var a=e.createClass({displayName:"PipelineDealPaginationComponent",goToPage:function(e,t){t.preventDefault(),$.isFunction(this.props.goToPage)&&this.props.goToPage(e)},currentPageClick:function(n){n.preventDefault(),$(e.findDOMNode(this.refs.current_page)).addClass("show-page-go-to"),$(e.findDOMNode(this.refs.page_go_to_input)).val(t.strToInt(this.props.currentPage)),$(e.findDOMNode(this.refs.page_go_to_input)).focus()},hidePageGoTo:function(){$(e.findDOMNode(this.refs.current_page)).removeClass("show-page-go-to")},goToInputBlurHandler:function(){var e=this;setTimeout(function(){e.hidePageGoTo()},200)},goToInputKeyUpHandler:function(e){var t=e.keyCode||e.which;13==t&&this.goToPageSubmitHandler(new $.Event("click"))},goToPageSubmitHandler:function(n){n.preventDefault(),n.stopPropagation();var a=t.strToInt(this.props.currentPage),i=t.strToInt(this.props.totalPage),r=e.findDOMNode(this.refs.page_go_to_input).value;r=t.strToInt(r),0>=r?r=a:r>i&&(r=i),this.goToPage(r,new $.Event("click")),this.hidePageGoTo()},initPageGoToInput:function(){$(e.findDOMNode(this.refs.page_go_to_input)).autoNumeric({mDec:0,vMin:0,vMax:t.strToInt(this.props.totalPage),wEmpty:!0})},componentDidUpdate:function(){this.initPageGoToInput()},componentDidMount:function(){this.initPageGoToInput()},render:function(){var a=t.strToInt(this.props.currentPage),i=t.strToInt(this.props.totalPage);return e.createElement("div",{className:"ui pagination menu pagination-new"},a>1?e.createElement("a",{className:"item",
onClick:this.goToPage.bind(this,1)},e.createElement("span",{className:"special-character"},"«")):e.createElement("span",{className:"item disabled"},e.createElement("span",{className:"special-character"},"«")),a>1?e.createElement("a",{className:"item",onClick:this.goToPage.bind(this,a-1)},e.createElement("span",{className:"special-character"},"‹")):e.createElement("span",{className:"item disabled"},e.createElement("span",{className:"special-character"},"‹")),e.createElement("div",{ref:"current_page",onClick:this.currentPageClick,className:"item current-page",style:{cursor:"pointer"}},n.t("page")," ",a," / ",i,e.createElement("div",{ref:"page_go_to",className:"page-go-to"},e.createElement("div",{className:"ui action input"},e.createElement("input",{size:4,type:"text",ref:"page_go_to_input",onBlur:this.goToInputBlurHandler,onKeyUp:this.goToInputKeyUpHandler,placeholder:a,style:{textAlign:"center"}}),e.createElement("button",{onClick:this.goToPageSubmitHandler,className:"ui small teal right labeled icon button"},e.createElement("i",{className:"tc-arrowright icon"}),"/ ",this.props.totalPage)))),i>a?e.createElement("a",{className:"item",onClick:this.goToPage.bind(this,a+1)},e.createElement("span",{className:"special-character"},"›")):e.createElement("span",{className:"item disabled"},e.createElement("span",{className:"special-character"},"›")),i>a?e.createElement("a",{className:"item",onClick:this.goToPage.bind(this,i)},e.createElement("span",{className:"special-character"},"»")):e.createElement("span",{className:"item disabled"},e.createElement("span",{className:"special-character"},"»")))}});return a}),define("components/phonenumber",["react","eventbus","helper","companymodule","language/default","components/mobile/action-sheet"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"PhoneNumberComponent",getDefaultProps:function(){return{phone:"",customer:{id:0,fullname:"",gender:0}}},componentWillUnmount:function(){},componentDidMount:function(){n.isSmallScreen()||$(e.findDOMNode(this.refs.dropdown)).dropdown({})},renderActionSheet:function(e){e.preventDefault();var t={text:i.t("phone")+" "+this.props.phone,buttons:[{text:i.t("call"),href:"tel:"+this.props.phone}]};n.showActionSheet(t)},render:function(){return n.isSmallScreen()?e.createElement("span",null,e.createElement("a",{href:"#",onClick:this.renderActionSheet},this.props.phone,e.createElement("i",{className:"icon tc-phone",style:{marginLeft:"0.3em",color:"#ccc"}}))):e.createElement("div",null,e.createElement("div",{className:"ui icon top left pointing dropdown",ref:"dropdown"},this.props.phone,e.createElement("i",{className:"dropdown icon",style:{marginLeft:"0.3em",color:"#ccc"}})))}});return o}),define("components/pipelinedeal/pagination",["react","helper","eventbus","language/default"],function(e,t,n,a){var i=e.createClass({displayName:"PipelineDealPaginationComponent",goToPage:function(e,t){t.preventDefault(),$.isFunction(this.props.goToPage)&&this.props.goToPage(e)},currentPageClick:function(n){n.preventDefault(),$(e.findDOMNode(this.refs.page_go_to)).addClass("active"),$(e.findDOMNode(this.refs.page_go_to_input)).val(t.strToInt(this.props.currentPage)),$(e.findDOMNode(this.refs.page_go_to_input)).focus()},hidePageGoTo:function(){$(e.findDOMNode(this.refs.page_go_to)).removeClass("active")},goToInputBlurHandler:function(){var e=this;setTimeout(function(){e.hidePageGoTo()},200)},goToInputKeyUpHandler:function(e){var t=e.keyCode||e.which;13==t&&this.goToPageSubmitHandler(new $.Event("click"))},goToPageSubmitHandler:function(n){n.preventDefault(),n.stopPropagation();var a=t.strToInt(this.props.currentPage),i=t.strToInt(this.props.totalPage),r=e.findDOMNode(this.refs.page_go_to_input).value;r=t.strToInt(r),0>=r?r=a:r>i&&(r=i),this.goToPage(r,new $.Event("click")),this.hidePageGoTo()},initPageGoToInput:function(){$(e.findDOMNode(this.refs.page_go_to_input)).autoNumeric({mDec:0,vMin:0,vMax:t.strToInt(this.props.totalPage),wEmpty:!0})},componentDidUpdate:function(){this.initPageGoToInput()},componentDidMount:function(){this.initPageGoToInput()},render:function(){var n=t.strToInt(this.props.currentPage),i=t.strToInt(this.props.totalPage);return e.createElement("div",{className:"ui pagination small menu pipeline-deal-pagination "+this.props.className},n>1?e.createElement("a",{className:"item",onClick:this.goToPage.bind(this,n-1)},e.createElement("i",{className:"tc-left"})):e.createElement("span",{className:"item disabled"},e.createElement("i",{className:"tc-left"})),e.createElement("div",{onClick:this.currentPageClick,className:"item current-page",style:{cursor:"pointer"}},a.t("page")," ",n," / ",i,e.createElement("div",{ref:"page_go_to",className:"page-go-to"},e.createElement("div",{className:"ui action input fluid"},e.createElement("input",{type:"text",ref:"page_go_to_input",onBlur:this.goToInputBlurHandler,onKeyUp:this.goToInputKeyUpHandler,placeholder:n,style:{textAlign:"center"}}),e.createElement("button",{onClick:this.goToPageSubmitHandler,className:"ui small teal right labeled icon button"},e.createElement("i",{className:"tc-arrowright icon"}),"/ ",this.props.totalPage)))),i>n?e.createElement("a",{className:"item",onClick:this.goToPage.bind(this,n+1)},e.createElement("i",{className:"tc-right"})):e.createElement("span",{className:"item disabled"},e.createElement("i",{className:"tc-right"})))}});return i}),define("components/popupemployeelist",["react","eventbus","helper","basecontroller","language/employee","language/default","components/heading","components/employee-avatar","collections/user"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"EmployeeListComponent",init:!1,getDefaultProps:function(){return{ids:[]}},getInitialState:function(){return{items:[]}},showPopup:function(){var n=this;$(e.findDOMNode(n.refs.modal)).modal({context:n.getDOMNode(),closable:!1,autofocus:!1,onHidden:function(){t.trigger("group:unmountlistemployees")}}).modal("show")},loadEmployees:function(){var e=this;(new l).getFromIdList({ids:e.props.ids,success:function(t){e.setState({items:t.items})}})},componentWillUnmount:function(){},componentDidMount:function(){(new a).setTcScrollMinHeight(),this.showPopup(),this.loadEmployees(),this.init=!0},render:function(){return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement(o,{link:"javascript:void(0)",text:i.t("heading"),hidetab:!0,nomarginbottom:!0}),e.createElement("div",{className:"content"},this.init?e.createElement("div",{ref:"employeelist",className:"tctabledata tc-scrolled"},e.createElement("table",{className:n.tableclass()},e.createElement("tbody",null,this.state.items.length>0?this.state.items.map(function(t,n){return e.createElement("tr",{key:t.id},e.createElement("td",null,e.createElement(s,{id:t.id,user:t,hover:!1})))}):e.createElement("tr",null,e.createElement("td",null,i.t("empty_list")))))):e.createElement("div",{className:"ui active loader",ref:"loader",style:{marginTop:50,paddingTop:50}})),e.createElement("div",{className:"actions"},e.createElement("button",{className:"ui button cancel close",ref:"close-modal"},r.t("close")))))}});return c}),define("components/profile/changepassword",["react","backbone","pref","helper","language/profile","language/default","components/heading","components/upload","components/select-region","models/user"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"ChangePasswordComponent",formError:{password:["error_old_password_invalid"]},allowAction:!0,save:function(){var t=this;if(t.allowAction){t.allowAction=!1;var r=$(".ui.form",this.getDOMNode());$(e.findDOMNode(t.refs.updatebutton)).addClass("loading");var o={company_id:n.get("cid"),oldpass:$(e.findDOMNode(t.refs.oldpass)).val(),newpass:$(e.findDOMNode(t.refs.newpass)).val()};$.ajax({type:"POST",dataType:"json",url:(new c).urlRoot+"/changepassword/"+n.get("uid"),data:o,success:function(e){a.showSuccess(i.t("success_change_password"))},error:function(e){a.notifyErrorAndForm(e,i,"error_change_password",r,t.formError)},complete:function(){$(e.findDOMNode(t.refs.updatebutton)).removeClass("loading"),t.allowAction=!0}})}},componentDidUpdate:function(){$(e.findDOMNode(this.refs.gender)).dropdown().dropdown("set selected",this.data.gender)},componentWillUnmount:function(){},componentWillMount:function(){this.data=this.props.data},componentDidMount:function(){var t=this,n=t.data;$('[name="password"]').focus(),$(e.findDOMNode(t.refs.gender)).dropdown().dropdown("set selected",n.gender),$(".ui.form",this.getDOMNode()).form({fields:{password:{identifier:"password",rules:[{type:"empty",prompt:i.t("error_old_password_required")},{type:"minLength[6]",prompt:i.t("error_password_too_short")}]},new_password:{identifier:"new_password",rules:[{type:"empty",prompt:i.t("error_new_password_required")},{type:"minLength[6]",prompt:i.t("error_password_too_short")},{type:"different[password]",prompt:i.t("error_new_password_must_different")}]},confirm_new_password:{identifier:"confirm_new_password",rules:[{type:"empty",prompt:i.t("error_confirm_new_password_required")},{type:"minLength[6]",prompt:i.t("error_password_too_short")},{type:"match[new_password]",prompt:i.t("error_confirm_password")}]}},inline:!0,keyboardShortcuts:!1,templates:{error:function(e){var t='<div class="ui list">';return $.each(e,function(e,n){t+='<div class="item"><i class="tc-bug icon"></i> <div class="content">'+n+"</div></div>"}),t+="</div>",$(t)}},onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.save()}})},render:function(){var t=this,n=t.data;return e.createElement("div",{className:"ui segments"},e.createElement(o,{link:"#profile",text:n.fullname,subtext:i.t("change_password"),hidekeywordsearch:"true",hidepagination:"true"}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide five"},e.createElement("h3",null,i.t("password_info_title")),e.createElement("p",null,i.t("password_info_content"))),e.createElement("div",{className:"field wide eleven"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight required"},e.createElement("label",null,i.t("old_password")),e.createElement("input",{type:"password",name:"password",ref:"oldpass"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight required"},e.createElement("label",null,i.t("new_password")),e.createElement("input",{type:"password",name:"new_password",ref:"newpass"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight required"},e.createElement("label",null,i.t("confirm_new_password")),e.createElement("input",{type:"password",name:"confirm_new_password"}))))),e.createElement("div",{className:"ui divider"}),e.createElement("div",null,e.createElement("button",{className:"ui green button pull-right",ref:"updatebutton"},r.t("update")),e.createElement("div",{style:{clear:"both"}})))))}});return d}),define("components/profile/edit",["react","backbone","pref","helper","eventbus","language/profile","language/default","components/heading","components/upload","components/select-region","components/employee/exit","models/user"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"ProfileEditComponent",formError:{fullname:["error_fullname_required"]},allowAction:!0,updateAvatarAction:function(t){var i=this;if(i.allowAction){i.allowAction=!1,i.refs.file.addLoading();var o=new FormData,s=$(e.findDOMNode(i.refs.file)).find('[name="file"]');o.append("company_id",n.get("cid")),o.append("creator_id",n.get("uid")),o.append("file",s[0].files[0]),$.ajax({type:"POST",dataType:"json",processData:!1,contentType:!1,url:(new u).urlRoot+"/avatar/"+n.get("uid"),data:o,success:function(t){n.set("avatar",t.avatar),$(e.findDOMNode(i.refs.avatar)).attr("src",a.getAvatarPath(t.avatar)),a.showSuccess(r.t("success_update"))},error:function(){},complete:function(){i.refs.file.removeLoading(),i.allowAction=!0}})}},exitHandler:function(t){t.preventDefault(),e.render(e.createElement(d,null),e.findDOMNode(this.refs.employeeexit))},unmountEmployeeExitHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.employeeexit))},deleteAvatarAction:function(t){t.preventDefault();var i=this;if(i.allowAction){i.allowAction=!1;var o=t.target;$(o).addClass("loading");var s={company_id:n.get("cid"),delete_avatar:1};$.ajax({type:"POST",dataType:"json",url:(new u).urlRoot+"/avatar/"+n.get("uid"),data:s,success:function(t){n.set("avatar",""),$(e.findDOMNode(i.refs.avatar)).attr("src",a.getAvatarPath(n.get("avatar"))),a.showSuccess(r.t("success_update"))},error:function(){},complete:function(){$(o).removeClass("loading"),i.allowAction=!0}})}},componentDidUpdate:function(){$(e.findDOMNode(this.refs.gender)).dropdown().dropdown("set selected",this.data.gender)},componentWillUnmount:function(){i.off("employee:unmountemployeeexit",this.unmountEmployeeExitHandler)},componentWillMount:function(){this.data=this.props.data},componentDidMount:function(){i.on("employee:unmountemployeeexit",this.unmountEmployeeExitHandler)},render:function(){var t=this,i=t.data;return e.createElement("div",{className:"ui segments"},e.createElement(s,{link:"#profile",text:i.fullname,lang:r,subtext:r.t("update_profile"),hidekeywordsearch:"true",hidepagination:"true"}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide two"},e.createElement("div",{id:"profile-avatar"},e.createElement("div",{className:"avatar-image"},e.createElement("img",{ref:"avatar",src:a.getAvatarPath(n.get("avatar"))})),e.createElement("div",{className:"avatar-buttons"},e.createElement(l,{buttonClass:"teal",name:"file",ref:"file",onChange:t.updateAvatarAction}))),e.createElement("a",{href:"#",className:"ui noborder basic fluid mini button",onClick:t.deleteAvatarAction},r.t("remove_avatar"))),e.createElement("div",{className:"field wide fourteen"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide readonly eight"},e.createElement("label",null,r.t("email")," (",e.createElement("a",{href:"#profile/changepassword",style:{marginTop:20}},e.createElement("small",null,r.t("change_password"))),")"),e.createElement("input",{defaultValue:i.email,disabled:"disabled",readOnly:"readonly"}))),e.createElement("div",{className:"pull-right"},e.createElement("a",{href:"#",onClick:this.exitHandler,style:{color:"red",fontSize:11}},r.t("leave_company_text")+" ("+n.get("company")+")..")))))),e.createElement("div",{ref:"employeeexit"}))}});return m}),define("language/notification",["baselanguage"],function(e){var t={vn:{heading:"Thông báo cho bạn",loadmorenotification:"Xem thêm",you:"bạn",inproject:"trong dự án",feedcomment:"bình luận lên hoạt động",feedcommentfollow:"cũng bình luận hoạt động",feedlike:"thích hoạt động",adduser:"đã thêm",removeuser:"đã xóa",instory:"trong task",storystatusfrom:"đổi trạng thái từ",storystatusto:"thành",storyprogressfrom:"tiến độ từ",storyprogressto:"đến",inissue:"trong issue",issuestatusto:"đổi trạng thái thành",newscomment:"bình luận vào tin",tochannel:"vào channel",flowadd:"đã tạo và gán bạn vào quy trình công việc",flowactionadd:"đã bình luận vào quy trình",success_update:"Lưu thành công!",error_update:"Lưu thất bại. Vui lòng thử lại sau!",POST_STATUS:"Đăng trạng thái",EDIT_PROFILE:"Cập nhật thông tin cá nhân",ADD_COMPANY:"Tạo công ty",ADD_FILE:"Upload tập tin",DELETE_FILE:"Xóa tập tin",ADD_DIRECTORY:"Tạo thư  mục",DELETE_DIRECTORY:"Xóa thư mục",ADD_EMPLOYEE:"Thêm nhân viên",DELETE_EMPLOYEE:"Xóa nhân viên",ADD_PROJECT:"Tạo dự án",DELETE_PROJECT:"Xóa dự án",ADD_ISSUE:"Thêm issue",EDIT_ISSUE:"Sửa issue",DELETE_ISSUE:"Xóa issue",COMMENT_ISSUE:"Bình luận trên issue",ADD_STORY_SCRUM:"Thêm story",ADD_STORY:"Thêm task",EDIT_STORY_SCRUM:"Sửa story",EDIT_STORY:"Sửa task",DELETE_STORY_SCRUM:"Xóa story",DELETE_STORY:"Xóa task",COMMENT_STORY_SCRUM:"Bình luận trên story",COMMENT_STORY:"Bình luận trên task",ADD_ITERATION_SCRUM:"Thêm sprint",ADD_ITERATION:"Thêm milestone",DELETE_ITERATION_SCRUM:"Xóa sprint",DELETE_ITERATION:"Xóa milestone",COMMENT_FILE:"Bình luận trên tập tin",ANNOTATE_FILE:"Tạo chú thích trên hình",SEND_MESSAGE:"Gởi thư",NEWS_COMMENT:"Tin tức"},en:{heading:"Thông báo cho bạn",loadmorenotification:"Xem thêm",you:"bạn",inproject:"trong dự án",feedcomment:"bình luận lên hoạt động",feedcommentfollow:"cũng bình luận hoạt động",feedlike:"thích hoạt động",adduser:"đã thêm",removeuser:"đã xóa",instory:"trong task",storystatusfrom:"đổi trạng thái từ",storystatusto:"thành",storyprogressfrom:"tiến độ từ",storyprogressto:"đến",inissue:"trong issue",issuestatusto:"đổi trạng thái thành",newscomment:"bình luận vào tin",tochannel:"vào channel",flowadd:"đã tạo và gán bạn vào quy trình công việc",flowactionadd:"đã bình luận vào quy trình",success_update:"Lưu thành công!",error_update:"Lưu thất bại. Vui lòng thử lại sau!",POST_STATUS:"Đăng trạng thái",EDIT_PROFILE:"Cập nhật thông tin cá nhân",ADD_COMPANY:"Tạo công ty",ADD_FILE:"Upload tập tin",DELETE_FILE:"Xóa tập tin",ADD_DIRECTORY:"Tạo thư  mục",DELETE_DIRECTORY:"Xóa thư mục",ADD_EMPLOYEE:"Thêm nhân viên",DELETE_EMPLOYEE:"Xóa nhân viên",ADD_PROJECT:"Tạo dự án",DELETE_PROJECT:"Xóa dự án",ADD_ISSUE:"Thêm issue",EDIT_ISSUE:"Sửa issue",DELETE_ISSUE:"Xóa issue",COMMENT_ISSUE:"Bình luận trên issue",ADD_STORY_SCRUM:"Thêm story",ADD_STORY:"Thêm task",EDIT_STORY_SCRUM:"Sửa story",EDIT_STORY:"Sửa task",DELETE_STORY_SCRUM:"Xóa story",DELETE_STORY:"Xóa task",COMMENT_STORY_SCRUM:"Bình luận trên story",COMMENT_STORY:"Bình luận trên task",ADD_ITERATION_SCRUM:"Thêm sprint",ADD_ITERATION:"Thêm milestone",DELETE_ITERATION_SCRUM:"Xóa sprint",DELETE_ITERATION:"Xóa milestone",COMMENT_FILE:"Bình luận trên tập tin",ANNOTATE_FILE:"Tạo chú thích trên hình",SEND_MESSAGE:"Gởi thư",NEWS_COMMENT:"Tin tức"}};return new e({lang:t})}),define("models/notifysetting",["basemodel","backbone","setting","pref"],function(e,t,n,a){var i=e.extend({urlRoot:"v1/notifysettings",getUserSetting:function(e){$.ajax({url:this.urlRoot+"/getusersetting?company_id="+a.get("cid")+"&creator_id="+a.get("uid"),success:e.success,error:e.error,complete:e.complete})},toggleType:function(e,t,n){$.ajax({type:"POST",dataType:"json",data:e,url:this.urlRoot+"/toggletype",success:t,error:n})},toggleChannel:function(e,t,n){$.ajax({type:"POST",dataType:"json",data:e,url:this.urlRoot+"/togglechannel",success:t,error:n})}});return i}),define("components/profile/notification-channel",["react","backbone","pref","helper","language/profile","language/notification","language/default","language/setting","models/notifysetting"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ChangePasswordComponent",toggle:function(e){var t=i.t("notify_"+e.replace(/_/,"")),o={company_id:n.get("cid"),creator_id:n.get("uid"),channel:e};(new l).toggleChannel(o,function(e){1==e.status?a.showSuccess(i.t("toggle_notification_success_on")+t):a.showSuccess(i.t("toggle_notification_success_off")+t)},function(e){a.notifyError(e,r,"error_update_fail")})},componentDidUpdate:function(){},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){var t=this,n=t.props.data;if(t.data=n,$(e.findDOMNode(t)).find(".ui.checkbox").checkbox("check"),n.ignore_channel.length>0)for(var a=0;a<n.ignore_channel.length;a++){var i=n.ignore_channel[a];$(e.findDOMNode(t.refs[i])).checkbox("uncheck")}$(e.findDOMNode(t)).find(".ui.checkbox").each(function(){$(this).checkbox({onChange:function(){t.toggle($(this).val())}})})},render:function(){var t=this,a=(t.props.data,n.get("companymodule"));return a=a.split(","),a.push("1"),e.createElement("div",null,e.createElement("div",{className:"ui form",ref:"form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"five wide field"},e.createElement("div",{className:"ui toggle checkbox","data-name":"web",ref:"web"},e.createElement("input",{type:"checkbox",name:"web",value:"web"}),e.createElement("label",null,i.t("notify_web")))),e.createElement("div",{className:"five wide field hide"},e.createElement("div",{className:"ui toggle checkbox","data-name":"email",ref:"email"},e.createElement("input",{type:"checkbox",name:"email",value:"email"}),e.createElement("label",null,i.t("notify_email")))),e.createElement("div",{className:"five wide field"},e.createElement("div",{className:"ui toggle checkbox","data-name":"push_notification",ref:"push_notification"},e.createElement("input",{type:"checkbox",name:"pushnotification",value:"push_notification"}),e.createElement("label",null,i.t("notify_pushnotification")))))))}});return c}),define("language/companymodule",["baselanguage"],function(e){var t={vn:{heading:"Bật - tắt tính năng",toggle_success_on:"Đã bật module ",toggle_success_off:"Đã tắt module ",view_about:"Xem giới thiệu các tính năng",groupdisabled:"CHƯA KÍCH HOẠT",groupdisabled_alert:"'Công ty của bạn chưa được kích hoạt nhóm tính năng này, có thể tài khoản công ty của bạn đang là tài khoản miễn phí hoặc đang bị tạm khóa. Liên hệ ban quản trị để được hỗ trợ.",error_update_fail:"Có lỗi khi cập nhật dữ liệu",error_module_notfound:"Không tìm thấy module",error_module_disabled:"Công ty bạn không thể BẬT tính năng này",error_status_invalid:"Trạng thái không hợp lệ",error_module_not_enable_yet:"Module này chưa được bật",error_module_enable_already:"Module này đã bật trước đó",error_module_group_disabled:"Công ty bạn chưa kích hoạt MODULE này",typelabelbeta:"SẮP RA MẮT",typelabelbetahelp:"Tính năng này sắp được ra mắt trong tương lai.",typelabelvip:"VIP ONLY",typelabelviphelp:"Chỉ có tài khoản VIP mới sử dụng được tính năng này. Liên hệ để được hỗ trợ.",group_general:"Tổng quan",group_teamwork:"Giao tiếp nội bộ",group_hrm:"Nhân sự",group_sale:"Bán hàng",group_ecommerce:"Website bán hàng",group_crm:"CRM",group_inventory:"Quản lý kho",group_accounting:"Kế toán",group_integration:"Tích hợp",group_plugin:"Plug-In",name_mail:"Hộp thư nội bộ",name_booking:"Đặt chỗ",name_chat:"Chat nội bộ",name_project:"Quản lý dự án",name_file:"Tài liệu công ty",name_salary:"Bảng lương nhân viên",name_checkin:"Chấm công online",name_employee:"Nhân viên",name_employeepoint:"Chấm điểm nhân viên",name_storechecklist:"Chấm điểm cửa hàng",name_leave:"Xin nghỉ phép",name_workscheduling:"Xếp lịch làm việc",name_order:"Quản lý đơn hàng",name_pos:"Point of Sale (POS)",name_combo:"Sản phẩm Combo",name_promotion:"Chương trình khuyến mãi",name_couponvoucher:"Coupon/Voucher",name_customer:"Quản lý khách hàng",name_newsletter:"Newsletter",name_sms:"Nhắn tin SMS",name_livechat:"Teamcrop Live Chat",name_facebookinbox:"Facebook Inbox",name_facebookcomment:"Facebook Comment",name_zaloshop:"Zalo Shop (Zalo OA)",name_inventorytrack:"Nhập xuất kho",name_inventorycheck:"Kiểm kê kho",name_inventorytransfer:"Điều chuyển kho",name_inventoryalert:"Cảnh báo tồn kho",name_purchaseorder:"Mua hàng (PO)",name_productcost:"Tính giá vốn hàng bán",name_serialnumber:"Theo dõi serial number / IMEI",name_cashflow:"Quản lý sổ quỹ",name_bizweb:"Tích hợp Bizweb",name_haravan:"Tích hợp website bên ngoài",name_ecomplatform:"Tích hợp website bên ngoài",name_shippingservice:"Tích hợp dịch vụ giao hàng",name_menulink:"Menu Link (Plugin)",name_telegram:"Tích hợp Telegram",name_pipeline:"Phễu kinh doanh",name_ecommerce:"Website bán hàng (E-shop)",name_landingpage:"Landing Page",name_customerpoint:"Điểm tích lũy",name_elearning:"Học trực tuyến",description_mail:"Hộp thư trao đổi nội bộ giữa các nhân viên trong công ty.",description_chat:"Kênh trò chuyện trực tuyến và trao đổi công việc giữa các nhân viên.",description_project:"Công cụ quản lý và theo dõi tiến độ thực hiện công việc và dự án.",description_file:"Thư mục chia sẻ và chứa các tài liệu, hồ sơ chung của công ty.",description_salary:"Import bảng lương và thông báo chi tiết lương đến từng nhân viên.",description_checkin:"Cho phép quản lý thời gian làm việc của nhân viên bằng chấm công.",description_employee:"Quản lý nhân viên, thêm và cập nhật thông tin nhân viên.",description_employeepoint:"Chấm điểm và ghi nhận thái độ phục vụ của nhân viên.",description_storechecklist:"Đánh giá các cửa hàng nhằm cải thiện dịch vụ.",description_leave:"Yêu cầu và duyệt đơn xin nghỉ của nhân viên.",description_workscheduling:"Lên lịch làm việc cho các nhân viên cửa hàng.",description_order:"Quản lý sản phẩm, đơn hàng bán cho khách hàng.",description_pos:"Màn hình bán hàng cho nhân viên tại cửa hàng.",description_combo:"Quản lý các sản phẩm được cấu thành từ các sản phẩm khác.",description_promotion:"Tổ chức các chương trình giảm giá, tri ân khách hàng.",description_couponvoucher:"Quản lý các mã giảm giá khuyến mãi.",description_customer:"Quản lý thông tin và lịch sử chăm sóc khách hàng.",description_newsletter:"Gửi email hàng loạt để chăm sóc khách hàng.",description_sms:"Cho phép nhắn tin SMS đến khách hàng mua hàng.",description_livechat:"Tích hợp ô Live Chat lên website của bạn.",description_facebookinbox:"Đồng bộ nội dung chat của khách hàng tới Facebook Fanpage.",description_facebookcomment:"Đồng bộ các bình luận của khách hàng trên fanpage.",description_zaloshop:"Đồng bộ chat và đơn hàng với tài khoản Zalo Shop (Zalo Official Account)",description_inventorytrack:"Theo dõi tình hình nhập xuất hàng hóa trong kho và số liệu tồn kho.",description_inventorycheck:"Tổ chức kiểm kê số lượng hàng hóa trong kho.",description_inventorytransfer:"Hỗ trợ việc điều chuyển hàng hóa giữa các kho hàng.",description_inventoryalert:"Nhận được các thông báo về các sản phẩm tồn kho dưới hạng mức cho phép.",description_purchaseorder:"Quản lý quy trình mua hàng từ nhà cung cấp.",description_productcost:"Quản lý và tính toán giá vốn hàng bán cho các sản phẩm bán ra.",description_serialnumber:"Quản lý bán hàng và tồn kho đích danh theo serial number / IMEI.",description_booking:"Quản lý hoạt động đặt chỗ (booking) như đặt phòng, đặt lịch khám...",description_cashflow:"Ghi nhận các giao dịch thu chi của công ty.",description_bizweb:"Tích hợp sản phẩm và đơn hàng từ hệ thống Bizweb.",description_haravan:"Tích hợp sản phẩm và đơn hàng từ hệ thống website bán hàng khác như Haravan, Bizweb, Shopify, Woo-comemrce hoặc hệ thống của bạn.",description_ecomplatform:"Tích hợp sản phẩm và đơn hàng từ hệ thống website bán hàng khác như Haravan, Bizweb, Shopify, Woo-comemrce hoặc hệ thống của bạn.",description_shippingservice:"Tích hợp tự động hóa với các đơn vị giao nhận như Giao hàng nhanh, Shipchung...",description_menulink:"Tùy biến thêm menu và nhúng ứng dụng web của bạn vào hệ thống.",description_telegram:"Tích hợp với tính năng chat nhóm của Telegram. Quản lý nhân viên, gửi tin nhắn vào nhóm...",description_pipeline:"Quản lý quá trình bán hàng theo mô hình nhiều bước.",description_ecommerce:"Quản lý website bán hàng",description_landingpage:"Quản lý landingpage",description_customerpoint:"Quản lý điểm tích lũy của khách hàng",description_elearning:"Chuyên trang khóa học, đào tạo trực tuyến cho nhân viên công ty"},en:{heading:"Bật - tắt tính năng",toggle_success_on:"Đã bật module ",toggle_success_off:"Đã tắt module ",view_about:"Xem giới thiệu các tính năng",groupdisabled:"CHƯA KÍCH HOẠT",groupdisabled_alert:"'Công ty của bạn chưa được kích hoạt nhóm tính năng này, có thể tài khoản công ty của bạn đang là tài khoản miễn phí hoặc đang bị tạm khóa. Liên hệ ban quản trị để được hỗ trợ.",error_update_fail:"Có lỗi khi cập nhật dữ liệu",error_module_notfound:"Không tìm thấy module",error_module_disabled:"Công ty bạn không thể BẬT tính năng này",error_status_invalid:"Trạng thái không hợp lệ",error_module_not_enable_yet:"Module này chưa được bật",error_module_enable_already:"Module này đã bật trước đó",error_module_group_disabled:"Công ty bạn chưa kích hoạt MODULE này",typelabelbeta:"SẮP RA MẮT",typelabelbetahelp:"Tính năng này sắp được ra mắt trong tương lai.",typelabelvip:"VIP ONLY",typelabelviphelp:"Chỉ có tài khoản VIP mới sử dụng được tính năng này. Liên hệ để được hỗ trợ.",group_general:"Tổng quan",group_teamwork:"Giao tiếp nội bộ",group_hrm:"Nhân sự",group_sale:"Bán hàng",group_ecommerce:"Website bán hàng",group_crm:"CRM",group_inventory:"Quản lý kho",group_accounting:"Kế toán",group_integration:"Tích hợp",group_plugin:"Plug-In",name_mail:"Hộp thư nội bộ",name_booking:"Đặt chỗ",name_chat:"Chat nội bộ",name_project:"Quản lý dự án",name_file:"Tài liệu công ty",name_salary:"Bảng lương nhân viên",name_checkin:"Chấm công online",name_employee:"Nhân viên",name_employeepoint:"Chấm điểm nhân viên",name_storechecklist:"Chấm điểm cửa hàng",name_leave:"Xin nghỉ phép",name_workscheduling:"Xếp lịch làm việc",name_order:"Quản lý đơn hàng",name_pos:"Point of Sale (POS)",name_combo:"Sản phẩm Combo",name_promotion:"Chương trình khuyến mãi",name_couponvoucher:"Coupon/Voucher",name_customer:"Quản lý khách hàng",name_newsletter:"Newsletter",name_sms:"Nhắn tin SMS",name_livechat:"Teamcrop Live Chat",name_facebookinbox:"Facebook Inbox",name_facebookcomment:"Facebook Comment",name_zaloshop:"Zalo Shop (Zalo OA)",name_inventorytrack:"Nhập xuất kho",name_inventorycheck:"Kiểm kê kho",name_inventorytransfer:"Điều chuyển kho",name_inventoryalert:"Cảnh báo tồn kho",name_purchaseorder:"Mua hàng (PO)",name_productcost:"Tính giá vốn hàng bán",name_serialnumber:"Theo dõi serial number / IMEI",name_cashflow:"Quản lý sổ quỹ",name_bizweb:"Tích hợp Bizweb",name_haravan:"Tích hợp website bên ngoài",name_ecomplatform:"Tích hợp website bên ngoài",name_shippingservice:"Tích hợp dịch vụ giao hàng",name_menulink:"Menu Link (Plugin)",name_telegram:"Tích hợp Telegram",name_pipeline:"Phễu kinh doanh",name_ecommerce:"Website bán hàng (E-shop)",name_landingpage:"Landing Page",name_customerpoint:"Điểm tích lũy",name_elearning:"Học trực tuyến",description_mail:"Hộp thư trao đổi nội bộ giữa các nhân viên trong công ty.",description_chat:"Kênh trò chuyện trực tuyến và trao đổi công việc giữa các nhân viên.",description_project:"Công cụ quản lý và theo dõi tiến độ thực hiện công việc và dự án.",description_file:"Thư mục chia sẻ và chứa các tài liệu, hồ sơ chung của công ty.",description_salary:"Import bảng lương và thông báo chi tiết lương đến từng nhân viên.",description_checkin:"Cho phép quản lý thời gian làm việc của nhân viên bằng chấm công.",description_employee:"Quản lý nhân viên, thêm và cập nhật thông tin nhân viên.",description_employeepoint:"Chấm điểm và ghi nhận thái độ phục vụ của nhân viên.",description_storechecklist:"Đánh giá các cửa hàng nhằm cải thiện dịch vụ.",description_leave:"Yêu cầu và duyệt đơn xin nghỉ của nhân viên.",description_workscheduling:"Lên lịch làm việc cho các nhân viên cửa hàng.",description_order:"Quản lý sản phẩm, đơn hàng bán cho khách hàng.",description_pos:"Màn hình bán hàng cho nhân viên tại cửa hàng.",description_combo:"Quản lý các sản phẩm được cấu thành từ các sản phẩm khác.",description_promotion:"Tổ chức các chương trình giảm giá, tri ân khách hàng.",description_couponvoucher:"Quản lý các mã giảm giá khuyến mãi.",description_customer:"Quản lý thông tin và lịch sử chăm sóc khách hàng.",description_newsletter:"Gửi email hàng loạt để chăm sóc khách hàng.",description_sms:"Cho phép nhắn tin SMS đến khách hàng mua hàng.",description_livechat:"Tích hợp ô Live Chat lên website của bạn.",description_facebookinbox:"Đồng bộ nội dung chat của khách hàng tới Facebook Fanpage.",description_facebookcomment:"Đồng bộ các bình luận của khách hàng trên fanpage.",description_zaloshop:"Đồng bộ chat và đơn hàng với tài khoản Zalo Shop (Zalo Official Account)",description_inventorytrack:"Theo dõi tình hình nhập xuất hàng hóa trong kho và số liệu tồn kho.",description_inventorycheck:"Tổ chức kiểm kê số lượng hàng hóa trong kho.",description_inventorytransfer:"Hỗ trợ việc điều chuyển hàng hóa giữa các kho hàng.",description_inventoryalert:"Nhận được các thông báo về các sản phẩm tồn kho dưới hạng mức cho phép.",
description_purchaseorder:"Quản lý quy trình mua hàng từ nhà cung cấp.",description_productcost:"Quản lý và tính toán giá vốn hàng bán cho các sản phẩm bán ra.",description_serialnumber:"Quản lý bán hàng và tồn kho đích danh theo serial number / IMEI.",description_booking:"Quản lý hoạt động đặt chỗ (booking) như đặt phòng, đặt lịch khám...",description_cashflow:"Ghi nhận các giao dịch thu chi của công ty.",description_bizweb:"Tích hợp sản phẩm và đơn hàng từ hệ thống Bizweb.",description_haravan:"Tích hợp sản phẩm và đơn hàng từ hệ thống website bán hàng khác như Haravan, Bizweb, Shopify, Woo-comemrce hoặc hệ thống của bạn.",description_ecomplatform:"Tích hợp sản phẩm và đơn hàng từ hệ thống website bán hàng khác như Haravan, Bizweb, Shopify, Woo-comemrce hoặc hệ thống của bạn.",description_shippingservice:"Tích hợp tự động hóa với các đơn vị giao nhận như Giao hàng nhanh, Shipchung...",description_menulink:"Tùy biến thêm menu và nhúng ứng dụng web của bạn vào hệ thống.",description_telegram:"Tích hợp với tính năng chat nhóm của Telegram. Quản lý nhân viên, gửi tin nhắn vào nhóm...",description_pipeline:"Quản lý quá trình bán hàng theo mô hình nhiều bước.",description_ecommerce:"Quản lý website bán hàng",description_landingpage:"Quản lý landingpage",description_customerpoint:"Quản lý điểm tích lũy của khách hàng",description_elearning:"Chuyên trang khóa học, đào tạo trực tuyến cho nhân viên công ty"}};return new e({lang:t})}),define("components/profile/notification-type-item",["react","basecontroller","pref","role","querystring","companymodule","language/companymodule","language/profile","models/notifysetting","helper","eventbus"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"SettingModuleItemComponent",getDefaultProps:function(){return{checked:!1,disabled:!1,data:{id:0,name:"",group:"",type:0}}},getInitialState:function(){return{ignore_type:[]}},toggle:function(e){var t=s.t("notify_"+e.replace(/\./,"")),a={company_id:n.get("cid"),creator_id:n.get("uid"),type:e};(new l).toggleType(a,function(e){1==e.status?c.showSuccess(s.t("toggle_notification_success_on")+t):c.showSuccess(s.t("toggle_notification_success_off")+t)},function(e){c.notifyError(e,o,"error_update_fail")})},componentWillUnmount:function(){},componentDidMount:function(){for(var t=this,n=this.props.data.types,a=this.props.ignore_type,i=0;i<n.length;i++){var r=n[i];-1==$.inArray(r,a)?$(e.findDOMNode(t.refs[r])).checkbox("check"):$(e.findDOMNode(t.refs[r])).checkbox("uncheck"),$(e.findDOMNode(t.refs[r])).checkbox({onChange:function(){t.toggle($(this).val())}})}},render:function(){var t=o.t("name_"+this.props.data.name),n=o.t("description_"+this.props.data.name),a=o.t("group_"+this.props.data.group),i=this.props.data.types,r=(this.props.ignore_type,!1);return $.inArray(this.props.data.group,["sale","crm","inventory","accounting"])>=0&&(r=!0),e.createElement("li",{className:"item",style:{display:r?"none":""}},e.createElement("div",{className:"content",style:{minHeight:26}},e.createElement("div",{style:{float:"right"}},e.createElement("span",{ref:"loaderholder"})),e.createElement("div",{className:"ui grid stackable two columns"},e.createElement("div",{className:"hideonsmall ui two wide column right aligned",onClick:this.getValue},a),e.createElement("div",{className:"ui four wide column",style:{paddingBottom:"0 !important"}},e.createElement("h4",{style:{padding:0},"data-id":this.props.data.id},e.createElement("strong",null,t))),e.createElement("div",{className:"ui ten wide column"},e.createElement("div",{style:{marginBottom:10}},n),i.map(function(t,n){var a=s.t("notify_"+t.replace(/\./,""));return e.createElement("div",{className:"field",key:t},e.createElement("div",{className:"ui toggle checkbox","data-name":t,ref:t},e.createElement("input",{type:"checkbox",value:t}),e.createElement("label",null,a)))})))))}});return u}),define("components/profile/notification-type",["react","backbone","pref","helper","language/profile","language/notification","language/default","language/setting","models/notifysetting","models/user","components/heading","components/profile/notification-type-item"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"NotificationTypeComponent",componentDidUpdate:function(){},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){},render:function(){var t=this,a=t.props.data,i=n.get("companymodule");return i=i.split(","),i.push("1"),e.createElement("div",null,e.createElement("div",{className:"ui form",ref:"form"},e.createElement("ul",{className:"ui divided items"},e.createElement("li",{className:"item hideonsmall"},e.createElement("div",{className:"content"},e.createElement("div",{className:"ui grid stackable two columns"},e.createElement("div",{className:"hideonsmall ui two wide column right aligned"},s.t("group")),e.createElement("div",{className:"ui four wide column",style:{paddingBottom:"0 !important"}},s.t("module")),e.createElement("div",{className:"ui ten wide column"},s.t("about"))))),a.available_types.map(function(t,n){return $.inArray(t.id.toString(),i)>=0?e.createElement(u,{key:t.id,data:t,ignore_type:a.ignore_type}):void 0}))))}});return m}),define("components/profile/notification",["react","backbone","pref","querystring","helper","language/profile","language/notification","language/default","language/setting","models/notifysetting","models/user","components/heading","components/profile/notification-channel","components/profile/notification-type"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"ChangePasswordComponent",getDefaultProps:function(){return{data:{available_types:[]}}},activeTab:function(n,a){a.preventDefault();var i=a.currentTarget;$(e.findDOMNode(this.refs.notificationsettingtab)).find(".active").removeClass("active");var r=$(i).attr("href");switch($(i).addClass("active"),t.history.navigate(r),n){case"channel":$(e.findDOMNode(this.refs.channelwrapper)).show(),$(e.findDOMNode(this.refs.typewrapper)).hide();break;case"type":$(e.findDOMNode(this.refs.channelwrapper)).hide(),$(e.findDOMNode(this.refs.typewrapper)).show()}},componentDidUpdate:function(){},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){"type"==a.get("tab")&&($(e.findDOMNode(this.refs.channelwrapper)).hide(),$(e.findDOMNode(this.refs.typewrapper)).show(),$(e.findDOMNode(this.refs.tab_channel)).removeClass("active"),$(e.findDOMNode(this.refs.tab_type)).addClass("active"))},render:function(){var t=this,a=t.props.data,i=n.get("companymodule");return i=i.split(","),i.push("1"),e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"notificationsettingtab",ref:"notificationsettingtab"},e.createElement("div",{className:"ui top tabular icon menu attached"},e.createElement("a",{href:"#profile/notification/tab/type",ref:"tab_type",onClick:this.activeTab.bind(this,"type"),className:"item active"},e.createElement("span",{className:"hideonsmall"},r.t("notify_type"))),e.createElement("a",{href:"#profile/notification/tab/channel",ref:"tab_channel",onClick:this.activeTab.bind(this,"channel"),className:"item"},e.createElement("span",{className:"hideonsmall"},r.t("notify_channel"))))),e.createElement("div",{className:"ui segment",ref:"typewrapper"},e.createElement(p,{data:a})),e.createElement("div",{className:"ui segment hide",ref:"channelwrapper"},e.createElement(m,{data:a})))}});return h}),define("components/project/add",["react","backbone","pref","helper","eventbus","language/project","language/default","components/semantic-datepicker","components/employeepicker","components/heading","components/select","components/form/singledate","models/project"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"ProjectAddComponent",formError:{name:["error_name_required"],date_started:["error_start_date_invalid"],date_completed_plan:["error_complete_date_invalid","error_date_invalid"],status:["error_status_invalid"],project_type:["error_type_invalid"],scrum_master:["error_scrum_master_required","error_project_manager_required"]},save:function(){var i=this,o=$(".ui.form",this.getDOMNode());o.addClass("loading");var s={company_id:n.get("cid"),creator_id:n.get("uid"),name:$('[name="name"]',o).val(),description:$('[name="description"]',o).val(),date_started:this.refs.date_started.getValue(),date_completed_plan:this.refs.date_completed_plan.getValue(),story_prefix:$('[name="story_prefix"]',o).val(),status:i.refs.status.val(),is_scrum:0,development_team_add_story:$(e.findDOMNode(i.refs.development_team_add_story)).checkbox("is checked")?1:0,scrum_master_add_story:$(e.findDOMNode(i.refs.scrum_master_add_story)).checkbox("is checked")?1:0,development_team:i.refs.development_team.getSelectedUserIdList(),scrum_master:i.refs.scrum_master.getSelectedUserIdList()};(new m).save(s,{success:function(e){a.showSuccess(r.t("success_add")),t.history.navigate("project",{trigger:!0})},error:function(e,t){a.notifyErrorAndForm(t,r,"error_add",o,i.formError)},complete:function(){o.removeClass("loading")}})},componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidMount:function(){var t=this;$('[name="name"]').focus(),$(e.findDOMNode(t)).find(".ui.checkbox").each(function(e,t){$(t).checkbox({onChange:function(){var e=$(t).attr("data-checked");$(t).checkbox("is unchecked")&&(e=$(t).attr("data-unchecked")),"undefined"!=typeof e&&$(t).find("label").text(e)}})}),$(e.findDOMNode(t.refs.development_team_add_story)).checkbox("set checked"),$(e.findDOMNode(t.refs.scrum_master_add_story)).checkbox("set checked"),$(".ui.form",this.getDOMNode()).form({fields:{name:{identifier:"name",rules:[{type:"empty",prompt:r.t("error_name_required")}]},date_started:{identifier:"date_started"},date_completed_plan:{identifier:"date_completed_plan"},status:{identifier:"status"},project_type:{identifier:"project_type"},scrum_master:{identifier:"scrum_master"}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.save()}})},render:function(){return e.createElement("div",{className:"ui segments"},e.createElement(c,{link:"#project",text:r.t("heading"),subtext:r.t("add")}),e.createElement("form",{className:"ui segment form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("h3",null,r.t("project_info_title")),e.createElement("div",null,r.t("project_info_content"))),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight required"},e.createElement("label",null,r.t("name")),e.createElement("input",{name:"name"})),e.createElement("div",{className:"field wide eight"},e.createElement("label",null,r.t("story_prefix")," ",e.createElement("i",{style:{fontWeight:"normal"}},"(",r.t("story_prefix_help"),")")),e.createElement("input",{name:"story_prefix",ref:"story_prefix"}))),e.createElement("div",{className:"fields hideonsmall"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,r.t("description")),e.createElement("textarea",{name:"description",rows:"3"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide six"},e.createElement("label",null,r.t("date_started")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(u,{ref:"date_started",returnTimestamp:!0}))),e.createElement("div",{className:"field wide six"},e.createElement("label",null,r.t("date_completed_plan")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(u,{ref:"date_completed_plan",returnTimestamp:!0}))),e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("label",null,r.t("status")),e.createElement(d,{items:(new m).getStatusList(),className:"fluid",ref:"status"}))))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("h3",null,r.t("division_info_title")),e.createElement("div",null,r.t("division_info_content"))),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide twelve"},e.createElement("label",{ref:"memberLabel"},r.t("member")),e.createElement(l,{ref:"development_team",inputname:"development_team"})),e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("label",null," "),e.createElement("div",{className:"ui toggle checkbox",ref:"development_team_add_story","data-checked":r.t("can_add_task"),"data-unchecked":r.t("not_add_task")},e.createElement("input",{type:"checkbox",name:"development_team_add_story"}),e.createElement("label",null,r.t("can_add_task"))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide required twelve"},e.createElement("label",{ref:"projectmanagerLabel"},r.t("project_manager")),e.createElement(l,{ref:"scrum_master",inputname:"scrum_master"}),e.createElement("small",null,r.t("warning_choose_project_manager"))),e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("label",null," "),e.createElement("div",{className:"ui toggle checkbox",ref:"scrum_master_add_story","data-checked":r.t("can_add_task"),"data-unchecked":r.t("not_add_task")},e.createElement("input",{type:"checkbox",name:"scrum_master_add_story"}),e.createElement("label",null,r.t("can_add_task"))))))),e.createElement("div",{className:"ui divider hide"}),e.createElement("div",{className:"fields",style:{display:"none"}},e.createElement("div",{className:"field wide four"},e.createElement("h3",null,r.t("setting_info_title")),e.createElement("div",null,r.t("setting_info_content"))),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"internalhidetabsummary"},e.createElement("input",{type:"checkbox",name:"internalhidetabsummary"}),e.createElement("label",null,r.t("internal_hide_tab_summary")))),e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"externalhidetabsummary"},e.createElement("input",{type:"checkbox",name:"externalhidetabsummary"}),e.createElement("label",null,r.t("external_hide_tab_summary"))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"internalhidetabtask"},e.createElement("input",{type:"checkbox",name:"internalhidetabtask"}),e.createElement("label",null,r.t("internal_hide_tab_task")))),e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"externalhidetabtask"},e.createElement("input",{type:"checkbox",name:"externalhidetabtask"}),e.createElement("label",null,r.t("external_hide_tab_task"))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"internalhidetabissue"},e.createElement("input",{type:"checkbox",name:"internalhidetabissue"}),e.createElement("label",null,r.t("internal_hide_tab_issue")))),e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"externalhidetabissue"},e.createElement("input",{type:"checkbox",name:"externalhidetabissue"}),e.createElement("label",null,r.t("external_hide_tab_issue"))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"internalhidetabdocument"},e.createElement("input",{type:"checkbox",name:"internalhidetabdocument"}),e.createElement("label",null,r.t("internal_hide_tab_document")))),e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"externalhidetabdocument"},e.createElement("input",{type:"checkbox",name:"externalhidetabdocument"}),e.createElement("label",null,r.t("external_hide_tab_document"))))))),e.createElement("div",{className:"ui divider"}),e.createElement("div",null,e.createElement("div",{className:"pull-left"},e.createElement("p",null,"* : ",o.t("required"))),e.createElement("button",{className:"ui green button pull-right"},r.t("add")),e.createElement("div",{style:{clear:"both"}}))))}});return p}),define("components/projectiteration/headingitem",["react","backbone","pref","querystring","eventbus","language/projectiteration","collections/project"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"HeadingItemComponent",clickHandle:function(e){e.preventDefault(),this.props.data.id>0&&this.props.doFilter("iteration_id",this.props.data.id)},canManage:function(){return $.inArray(parseInt(n.get("uid")),this.props.project.scrum_master)>-1},editIterationHandle:function(e){e.preventDefault(),e.stopPropagation(),i.trigger("projectiteration:edit",this.props.data.id)},componentDidUpdate:function(){},componentDidMount:function(){},render:function(){var t="item",n=a.get("iteration_id")||"0";return this.props.data.id+""==n&&(t+=" active"),e.createElement("a",{className:t,onClick:this.clickHandle},this.canManage()?e.createElement("i",{className:"icon",onClick:this.editIterationHandle,style:{position:"absolute",right:0}},e.createElement("i",{className:"tc-pencil"})):"",this.props.data.name,e.createElement("span",{className:"description",ref:"count"},this.props.data.count_story))}});return s}),define("components/projectiteration/heading",["react","pref","eventbus","helper","querystring","role","language/projectiteration","collections/projectiteration","models/projectiteration","models/project","components/projectiteration/headingitem"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"FilterIterationComponent",prevValue:-1,isDelete:!1,limit:100,getDefaultProps:function(){return{canAddIteration:!1,value:-1}},getInitialState:function(){return{init_done:!1,total:0,items:[]}},getValue:function(){return this.preValue},loadFullIteration:function(e){this.loadData(1,!0)},loadData:function(e,n){var a=this,r=a.limit;"undefined"==typeof e&&(e=1),"undefined"==typeof n&&(n=!1),r=n?50:a.limit,(new s).fetch({data:{company_id:t.get("cid"),project_id:a.props.project_id,page:e,limit:r},success:function(t,r){var o=r.total,s=r.items;if(e>1&&(s=a.state.items.concat(r.items)),a.setState({total:o,items:s}),n)r.items.length>0?a.loadData(e+1,n):a.setState({init_done:!0});else{var l=""!=i.get("iteration_id")?parseInt(i.get("iteration_id")):-1;l>0&&!a.exists(l,s)?a.loadData(e,!0):a.setState({init_done:!0})}}})},exists:function(e,t){for(var n=!1,a=0;a<t.length;a++){var i=t[a];if(i.id==e){n=!0;break}}return n},setTotal:function(t){var n=$(e.findDOMNode(this.refs.heading)).html();n+="("+t+")",$(e.findDOMNode(this.refs.heading)).html(n)},resetFilterIteration:function(){this.props.removeFilter("iteration_id")},unMilestoneIteration:function(){this.props.doFilter("iteration_id",0)},iniDropdown:function(){var t=this;$(e.findDOMNode(this.refs.dropdown_manage)).dropdown({action:"hide",fullTextSearch:!0,onShow:function(){$(e.findDOMNode(t.refs.dropdownAddText)).height(0),setTimeout(function(){$(e.findDOMNode(t.refs.searchinput)).focus()},500)},onHide:function(){$(e.findDOMNode(t.refs.dropdownAddText)).height(0)}})},showDropdown:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.dropdown_manage)).dropdown("show")},componentDidUpdate:function(){a.isSmallScreen()||a.initMyTip($(e.findDOMNode(this)).find(".mytip_onpage"),null,null,!1)},componentWillUnmount:function(){n.off("projectiteration:refresh",self.loadData)},componentDidMount:function(){var e=this;this.loadData(),this.iniDropdown(),n.on("projectiteration:refresh",e.loadData)},render:function(){var t=this,n=""!=i.get("iteration_id")?parseInt(i.get("iteration_id")):-1;return e.createElement("div",{key:moment().unix(),style:{display:"inline-block"}},e.createElement("a",{href:"javascript:void(0)",onClick:this.showDropdown,className:"mytip_onpage",title:o.t("headding")},e.createElement("i",{className:"icon tc-folder"})," ",e.createElement("span",{className:"hideonsmall"},o.t("headding"))),e.createElement("div",{style:{zIndex:500,float:"right"},ref:"dropdown_manage",className:"ui dropdown "+(a.isSmallScreen()?"pointing top right ":"right pointing")},e.createElement("span",{ref:"dropdownAddText",className:"text"}),e.createElement("div",{className:"menu",style:{width:300}},e.createElement("div",{className:"ui mini search input"},e.createElement("input",{type:"text",ref:"searchinput",placeholder:o.t("search_placeholder")})),this.props.canAddIteration?e.createElement("div",{className:"divider"}):"",this.props.canAddIteration?e.createElement("a",{className:"item",href:"#",onClick:this.props.openCreateIterationPopupHandle},o.t("create_iteration"),e.createElement("span",{className:"description"},e.createElement("i",{className:"icon tc-plus"}))):"",e.createElement("div",{className:"divider"}),e.createElement("a",{className:"item"+(-1==n?" active":""),onClick:this.resetFilterIteration},o.t("all_task")," ",e.createElement("span",{ref:"count",className:"description"},this.props.total)),e.createElement("a",{className:"item"+(0==n?" active":""),onClick:this.unMilestoneIteration},o.t("un_milestone")),e.createElement("div",{className:"divider"}),e.createElement("div",{className:"scrolling menu"},this.state.items.map(function(n,a){return e.createElement(d,{key:n.id,doFilter:t.props.doFilter,data:n,project:t.props.project})})),this.state.init_done&&this.state.total>this.state.items.length?e.createElement("a",{href:"javascript:void(0)",onClick:t.loadFullIteration,className:"ui small noborder blue basic label"},o.t("load_more")):"")))}});return u}),define("components/projectiteration/select",["react","pref","language/projectiteration","collections/projectiteration","models/projectiteration"],function(e,t,n,a,i){var r=e.createClass({displayName:"SelectVendorComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{name:"iteration_id",className:"",value:0,placeholder:"------"}},loadData:function(n){var i=this,n=n||1;$(e.findDOMNode(i)).addClass("loading"),(new a).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,project_id:i.props.project.id,page:n},success:function(e,t){i.setState({items:i.state.items.concat(t.items)}),Math.ceil(t.total/t.limit)>t.currentpage&&i.loadData(t.currentpage+1)},complete:function(){$(e.findDOMNode(i)).removeClass("loading")}})},componentDidUpdate:function(){var t=this;$(e.findDOMNode(t)).dropdown("refresh").dropdown("set selected",t.props.value.toString())},componentDidMount:function(){var t=this;$(e.findDOMNode(t)).dropdown({fullTextSearch:!1,allowAdditions:!1,message:{noResults:n.t("result_notfound"),maxSelections:""},onShow:t.props.onShow,onHide:t.props.onHide,onChange:t.props.onChange}),this.loadData()},render:function(){return e.createElement("div",{className:"ui "+this.props.className+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"item","data-value":"0"},"- - - - - - - -"),this.state.items.map(function(t,n){return e.createElement("div",{key:t.id,className:"item","data-value":t.id},t.name)})))}});return r}),define("components/projecttask/picker",["react","pref","helper","language/projecttask","language/default","models/projecttask","collections/projecttask"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"ProjectTaskPickerComponent",getDefaultProps:function(){return{defaulttext:"",defaultvalue:"",name:"",max:1,type_selection:"",placeholder:"------"}},componentWillUpdate:function(){},componentDidMount:function(){var a=this,o=(new r).urlRoot+"?keyword={query}",s={company_id:t.get("cid"),is_not_deleted:1,project_id:a.props.project.id},l={fullTextSearch:!0,allowAdditions:!1,message:{noResults:i.t("notfound"),maxSelections:""},delay:{search:500},apiSettings:{url:n.appendToken(o),data:s,onResponse:function(e){var t={results:[{name:a.props.placeholder,value:0}]};return $.each(e.items,function(e,n){var a=n.id,i=n.name;"undefined"!=typeof i&&(i=i.replace(/\[/g,'<span class="ui label mini horizontal" style="background-color: #5bc0de; border-radius: 0.25em; color: #fff;">'),i=i.replace(/\]/g,"</span>")),t.results.push({name:i,value:a})}),t}}};this.props.max>1&&(l.maxSelections=this.props.max),$(e.findDOMNode(this)).dropdown(l),""!=this.props.defaultvalue&&("multiple"==this.props.type_selection||new r({id:this.props.defaultvalue}).fetch({success:function(t,n){var i=n.name;"undefined"!=typeof i&&(i=i.replace(/\[/g,'<span class="ui label mini horizontal" style="background-color: #5bc0de; border-radius: 0.25em; color: #fff;">'),i=i.replace(/\]/g,"</span>")),$(e.findDOMNode(a.refs.projecttasklist)).append(i),$(e.findDOMNode(a)).dropdown("refresh").dropdown("set value",a.props.defaultvalue.toString()).dropdown("set selected",a.props.defaultvalue.toString()).addClass(a.props.disabled)}}))},render:function(){var t=a.t("choose");this.props.defaulttext.length>0&&(t=this.props.defaulttext);var n="project_task_id";this.props.name.length>0&&(n=this.props.name);var i="";return"undefined"!=typeof this.props.type_selection&&(i=this.props.type_selection),e.createElement("div",{className:"ui fluid search selection dropdown "+i},e.createElement("input",{type:"hidden",name:n}),"multiple"==i?"":e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},t),e.createElement("div",{className:"menu",ref:"projecttasklist"},e.createElement("div",{className:"item","data-value":"0"},this.props.placeholder)))}});return s}),define("components/select/projecttasktype",["react","pref","models/projecttask","components/mixin/select"],function(e,t,n,a){var i=e.createClass({displayName:"SelectComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getTypeList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/projecttask/popup-add",["react","pref","eventbus","helper","language/projecttask","language/default","components/semantic-datepicker","components/employeepicker","components/projectiteration/select","components/projecttask/picker","components/select/projecttasktype","components/heading","components/form/singledate","components/tinymce","models/projecttask","models/file"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"AddTaskComponent",tinymceRandomIdentifier:0,allowAction:!0,allowSubmit:!0,submitClick:!1,successClose:0,formError:{name:["error_name_required"],status:["error_status_required","error_status_invalid"],parent_id:["error_depend_invalid"],end:["error_date_invalid"]},getDefaultProps:function(){},getInitialState:function(){return{data:{}}},addTaskHandle:function(){var r=this;if(r.allowAction&&r.submitClick){r.allowAction=!1;var o=$(e.findDOMNode(r.refs.form));o.addClass("loading");var s=[];$(e.findDOMNode(r)).find(".attachedfileid").each(function(e){s.push($(this).attr("data-id"))});var l={company_id:t.get("cid"),creator_id:t.get("uid"),project_id:r.props.project.id,iteration_id:r.getNode("iteration_id").dropdown("get value"),type:this.refs.type.val(),name:r.getNode("name").val(),description:tinyMCE.get("task_content_"+this.tinymceRandomIdentifier).getContent(),priority:$('[name="priority"]:checked',o).val(),status:$(e.findDOMNode(r.refs["select-status"])).dropdown("get value"),start:this.refs.date_start.getValue(),finish:this.refs.date_finish.getValue(),attached_file_id:s,assignees:this.refs.assignees.getSelectedUserIdList(),tags:r.getNode("tags").val()};(new h).save(l,{success:function(t,o){a.showSuccess(i.t("success_add")),n.trigger("projecttask:refresh"),1==r.successClose?r.closePopup():(r.getNode("name").val(""),tinyMCE.get("task_content_"+r.tinymceRandomIdentifier).setContent(""),r.getNode("parent_id").dropdown("clear"),$(e.findDOMNode(r.refs.fileinput)).uploadifive("clearQueue"))},error:function(e,t){a.notifyError(t,i,"error_add")},complete:function(){r.allowAction=!0,r.submitClick=!1,o.removeClass("loading")}})}},submitHandle:function(t){var n=t.currentTarget;this.successClose=parseInt($(n).data("close")),this.submitClick=!0,$(e.findDOMNode(this.refs.form)).submit()},closePopup:function(){$(e.findDOMNode(this.refs.modal)).modal("hide")},showPopup:function(){var t=this;$(e.findDOMNode(t.refs.modal)).modal({context:t.getDOMNode(),closable:!1,autofocus:!1,onShow:function(){$("body").addClass("has-modal")},onHide:function(){$("body").removeClass("has-modal")},onHidden:function(){n.trigger("projecttask:unmountadd")}}).modal("show")},initAjaxUpload:function(){(new f).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new f).OBJECTTYPE_PROJECT_STORY,0,(new f).STATUS_ENABLE)},getNode:function(t){return $(e.findDOMNode(this.refs[t]))},getAllowSubmit:function(){return this.allowSubmit},componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(t.refs.form)).form({fields:{name:{identifier:"name"},status:{identifier:"status"},end:{identifier:"end"}},inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.addTaskHandle()}}),$(e.findDOMNode(t.refs["select-status"])).dropdown(),$(e.findDOMNode(this.refs["select-status"])).dropdown("set selected",(new h).STATUS_PENDING),$(e.findDOMNode(t)).find(".radio.checkbox").checkbox(),t.initAjaxUpload(),t.showPopup()},componentWillMount:function(){0==this.tinymceRandomIdentifier&&(this.tinymceRandomIdentifier=(new Date).getTime())},render:function(){var n=this,o=(n.state.data,{menubar:!0,autoresize_min_height:200,toolbar:"bold italic underline | alignleft aligncenter alignright | bullist numlist | indent outdent | link unlink teamcropfilepicker"}),c=this.props.project.scrum_master,f=!1;if(c.length>0)for(var g=0;g<c.length;g++){var _=c[g];if(_==t.get("uid")){f=!0;break}}return e.createElement("div",null,e.createElement("div",{className:"ui large modal",ref:"modal"},e.createElement(u,{nomarginbottom:!0,link:"#project/detail/id/"+this.props.project.id,text:n.props.project.name,hidetab:!0,custom_subtext:i.t("add_task")}),e.createElement("div",{className:"ui segment"},e.createElement("div",{className:"ui form",ref:"form"},e.createElement("div",{className:"ui stackable grid"},e.createElement("div",{className:"ten wide column",style:{borderRight:a.isSmallScreen()?"":"1px solid #eee"}},e.createElement("div",{className:"field wide sixteen"},a.isSmallScreen()?e.createElement("div",{className:"ui grid",title:i.t("priority")},(new h).getPriorityList().map(function(t){return e.createElement("div",{className:"four wide column",style:{padding:"0.2em",textAlign:"center"},key:t.code},e.createElement("div",{className:"ui segment"},e.createElement("label",{className:"content radio checkbox"},e.createElement("input",{type:"radio",name:"priority",defaultChecked:(new h).PRIORITY_LOW,value:t.code}),e.createElement("span",{className:"description",style:{color:t.color}}," ",t.text))))})):e.createElement("div",{className:"ui small four steps",title:i.t("priority")},(new h).getPriorityList().map(function(t){return e.createElement("div",{className:"step",style:{padding:"1em",textAlign:"center"},key:t.code},e.createElement("label",{className:"content radio checkbox"},e.createElement("input",{type:"radio",name:"priority",defaultChecked:(new h).PRIORITY_LOW,value:t.code}),e.createElement("span",{className:"description",style:{color:t.color}}," ",t.text)))}))),e.createElement("div",{className:"fields"
},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("name")),e.createElement("input",{name:"name",ref:"name"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("description")),e.createElement(p,{name:"task_content",ref:"task_content",id:"task_content_"+this.tinymceRandomIdentifier,autoLoad:!0,config:o}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("tag")),e.createElement("input",{ref:"tags",name:"tags",placeholder:i.t("tag_placeholder")}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("label",null,i.t("status")),e.createElement("div",{className:"ui search selection dropdown",ref:"select-status"},e.createElement("input",{type:"hidden",name:"status"}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"}),e.createElement("div",{className:"menu"},(new h).getStatusList().map(function(t){var n=!0;return!f&&t.code>(new h).STATUS_NEED_FOR_APPROVAL&&(n=!1),n?e.createElement("div",{className:"item",key:t.code,"data-value":t.code},t.text):void 0})))))),e.createElement("div",{className:"six wide column"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("type")),e.createElement(d,{ref:"type",emptyOption:!1}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("iteration")),e.createElement(l,{value:this.props.iteration_id,project:n.props.project,ref:"iteration_id"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("assign_for")),e.createElement(s,{ref:"assignees",allowuseridlist:n.props.project.members,inputname:"assignees"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("label",null,i.t("start_date")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(m,{ref:"date_start",returnTimestamp:!0}))),e.createElement("div",{className:"field wide eight"},e.createElement("label",null,i.t("finish_date")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(m,{ref:"date_finish",returnTimestamp:!0})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("attachment")),e.createElement("input",{type:"file",ref:"fileinput",id:"ffile",name:"ffile",multiple:"multiple",className:"hide"}))))))),e.createElement("div",{className:"actions"},e.createElement("button",{className:"ui noborder basic button cancel close",ref:"close-modal"},r.t("close")),e.createElement("button",{className:"ui button teal",type:"button",ref:"add","data-close":"0",onClick:n.submitHandle},i.t("add")),e.createElement("button",{className:"ui button teal",type:"button",ref:"add_and_close","data-close":"1",onClick:n.submitHandle},i.t("add_and_close")))))}});return g}),define("components/projecttask/popup-edit",["react","pref","eventbus","helper","language/projecttask","language/default","models/file","components/semantic-datepicker","components/employeepicker","components/projectiteration/select","components/projecttask/picker","components/select/projecttasktype","components/form/singledate","components/heading","components/tinymce","models/projecttask","components/ajax-upload"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g){var _=e.createClass({displayName:"EditTaskComponent",tinymceRandomIdentifier:0,allowAction:!0,submitClick:!1,formError:{name:["error_name_required"],status:["error_status_required","error_status_invalid"],parent_id:["error_depend_invalid"],end:["error_date_invalid"]},getInitialState:function(){return{data:{}}},editTaskHandle:function(){var r=this;if(r.allowAction&&r.submitClick){r.allowAction=!1;var o=$(e.findDOMNode(r.refs.form));o.addClass("loading");var s=this.refs.files.getFiles().map(function(e){return e.id}),l={company_id:t.get("cid"),creator_id:t.get("uid"),project_id:r.props.project.id,iteration_id:r.getNode("iteration_id").dropdown("get value"),type:this.refs.type.val(),name:r.getNode("name").val(),description:tinyMCE.get("task_content_"+this.tinymceRandomIdentifier).getContent(),priority:$('[name="priority"]:checked',o).val(),start:this.refs.date_start.getValue(),finish:this.refs.date_finish.getValue(),assignees:this.refs.assignees.getSelectedUserIdList(),tags:r.getNode("tags").val(),attached_file_id:s};new f({id:r.props.task_id}).save(l,{success:function(e,t){a.showSuccess(i.t("success_edit")),n.trigger("projecttask:refresh"),r.closePopup()},error:function(e,t){a.notifyError(t,i,"error_edit")},complete:function(){r.allowAction=!0,r.submitClick=!1,o.removeClass("loading")}})}},submitHandle:function(t){this.submitClick=!0,$(e.findDOMNode(this.refs.form)).submit()},closePopup:function(){$(e.findDOMNode(this.refs.modal)).modal("hide")},showPopup:function(){var t=this;$(e.findDOMNode(t.refs.modal)).modal({context:t.getDOMNode(),closable:!1,autofocus:!1,onShow:function(){$("body").addClass("has-modal")},onHide:function(){$("body").removeClass("has-modal")},onHidden:function(){n.trigger("projecttask:unmountedit")}}).modal("show")},getNode:function(t){return $(e.findDOMNode(this.refs[t]))},componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidMount:function(){var t=this;new f({id:t.props.task_id}).fetch({success:function(e,n){t.showPopup(),t.setState({data:n})},error:function(){t.closePopup()}}),$(e.findDOMNode(t.refs.form)).form({fields:{name:{identifier:"name"},status:{identifier:"status"}},inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.refs.files.isUploading()?a.showError(i.t("error_file_uploading_waiting")):t.editTaskHandle()}}),$(e.findDOMNode(t)).find(".radio.checkbox").checkbox()},componentWillMount:function(){0==this.tinymceRandomIdentifier&&(this.tinymceRandomIdentifier=(new Date).getTime())},render:function(){var t=this,n=t.state.data;0==n.type&&(n.type=(new f).TYPE_FEATURE);var s=new o,d={menubar:!0,autoresize_min_height:200,toolbar:"bold italic underline | alignleft aligncenter alignright | bullist numlist | indent outdent | link unlink teamcropfilepicker"};return e.createElement("div",null,e.createElement("div",{className:"ui large modal",ref:"modal"},e.createElement(p,{nomarginbottom:!0,link:"#project/detail/id/"+this.props.project.id,text:t.props.project.name,hidetab:!0,custom_subtext:i.t("edit_task")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"ui stackable grid"},e.createElement("div",{className:"ten wide column",style:{borderRight:a.isSmallScreen()?"":"1px solid #eee"}},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},a.isSmallScreen()?e.createElement("div",{className:"ui grid",title:i.t("priority")},(new f).getPriorityList().map(function(t){return e.createElement("div",{className:"four wide column",style:{padding:"0.2em",textAlign:"center"},key:t.code},e.createElement("div",{className:"ui segment"},e.createElement("label",{className:"content radio checkbox"},e.createElement("input",{type:"radio",name:"priority",defaultVallue:n.priority,checked:n.priority==t.code,value:t.code}),e.createElement("span",{className:"description",style:{color:t.color}}," ",t.text))))})):e.createElement("div",{className:"inline fields wide sixteen"},e.createElement("div",{className:"ui small four steps",title:i.t("priority")},(new f).getPriorityList().map(function(t){return e.createElement("div",{className:"step",style:{padding:"1em",textAlign:"center"},key:t.code},e.createElement("label",{className:"content radio checkbox"},e.createElement("input",{type:"radio",name:"priority",defaultVallue:n.priority,checked:n.priority==t.code,value:t.code}),e.createElement("span",{className:"description",style:{color:t.color}}," ",t.text)))}))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("name")),e.createElement("input",{name:"name",ref:"name",key:"name-"+n.id,defaultValue:n.name}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("description")),e.createElement(h,{name:"task_content",ref:"task_content",key:"task_content_"+n.id,id:"task_content_"+this.tinymceRandomIdentifier,content:n.description,autoLoad:n.id>0,config:d}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("tag")),e.createElement("input",{ref:"tags",name:"tags",key:"tags-"+n.id,defaultValue:n.tags,placeholder:i.t("tag_placeholder")})))),e.createElement("div",{className:"six wide column"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("type")),e.createElement(u,{ref:"type",value:n.type,emptyOption:!1}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("iteration")),e.createElement(c,{key:"iteration-"+n.id,value:n.project_iteration_id,project:t.props.project,ref:"iteration_id"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("assign_for")),e.createElement(l,{key:"assignee-"+n.id,defaultvalue:n.assignees,allowuseridlist:t.props.project.members,ref:"assignees",inputname:"assignees"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("label",null,i.t("start_date")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(m,{ref:"date_start",key:"start-"+n.id,defaultValue:n.date_started,returnTimestamp:!0}))),e.createElement("div",{className:"field wide eight"},e.createElement("label",null,i.t("finish_date")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(m,{ref:"date_finish",key:"end-"+n.id,defaultValue:n.date_completed,returnTimestamp:!0})))),e.createElement("div",{className:"fields"},e.createElement("div",{ref:"field_files",className:"sixteen wide field"},e.createElement("label",null,i.t("attachment")),e.createElement(g,{key:n.id,className:"tiny",ref:"files",id:"project-task-edit",objectSource:s.OBJECTTYPE_PROJECT_STORY,files:n.files,fileSizeLimit:"10MB"}))))))),e.createElement("div",{className:"actions"},e.createElement("button",{className:"ui noborder basic button cancel close",ref:"close-modal"},r.t("close")),e.createElement("button",{className:"ui button teal",ref:"update",onClick:t.submitHandle},i.t("edit")))))}});return _}),define("components/projectiteration/add",["react","pref","eventbus","helper","language/projectiteration","language/default","components/semantic-datepicker","components/heading","components/form/singledate","models/projectiteration"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"AddIterationComponent",allowAction:!0,formError:{name:["error_name_required"],status:["error_status_required","error_status_invalid"],finish:["error_finish_invalid"]},getInitialState:function(){return{data:{}}},componentWillUnmount:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(t.refs.form)).form({fields:{name:{identifier:"name"},status:{identifier:"status"},start:{identifier:"start"},finish:{identifier:"finish"}},inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.addIterationHandle()}}),$(e.findDOMNode(t.refs.status)).dropdown("set selected",(new c).STATUS_PENDING),t.showPopup()},componentDidUpdate:function(){},addIterationHandle:function(){var r=this;if(r.allowAction){r.allowAction=!1;var o=$(e.findDOMNode(r.refs.form));o.addClass("loading");var s={company_id:t.get("cid"),creator_id:t.get("uid"),project_id:r.props.project.id,name:r.getNode("name").val(),description:r.getNode("description").val(),status:r.getNode("status").dropdown("get value"),start:this.refs.date_start.getValue(),finish:this.refs.date_finish.getValue()};(new c).save(s,{success:function(e,t){a.showSuccess(i.t("success_add")),n.trigger("projectiteration:refresh"),r.closePopup()},error:function(e,t){a.notifyErrorAndForm(t,i,"error_add",o,r.formError)},complete:function(){r.allowAction=!0,o.removeClass("loading")}})}},submitHandle:function(){$(e.findDOMNode(this.refs.form)).submit()},closePopup:function(){$(e.findDOMNode(this.refs.modal)).modal("hide")},showPopup:function(){var t=this;$(e.findDOMNode(t.refs.modal)).modal({context:t.getDOMNode(),closable:!1,onShow:function(){$("body").addClass("has-modal")},onHide:function(){$("body").removeClass("has-modal")},onHidden:function(){n.trigger("projectiteration:unmountadd")}}).modal("show")},getNode:function(t){return $(e.findDOMNode(this.refs[t]))},render:function(){var t=this;return t.state.data,e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement(s,{nomarginbottom:!0,link:"javascript:void(0)",text:t.props.project.name,hidetab:!0,custom_subtext:i.t("create_iteration")}),e.createElement("div",{className:"clear ui segment nomargin"},e.createElement("div",{className:"ui form",ref:"form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("name")),e.createElement("input",{name:"name",ref:"name"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("label",null,i.t("start")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(l,{ref:"date_start",returnTimestamp:!0}))),e.createElement("div",{className:"field wide eight"},e.createElement("label",null,i.t("finish")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(l,{ref:"date_finish",returnTimestamp:!0})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("description")),e.createElement("textarea",{name:"description",ref:"description",rows:"2"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("status")),e.createElement("div",{className:"ui search selection dropdown",ref:"status"},e.createElement("input",{type:"hidden",name:"status"}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"}),e.createElement("div",{className:"menu"},(new c).getStatusList().map(function(t){return e.createElement("div",{className:"item",key:t.code,"data-value":t.code},t.text)}))))))),e.createElement("div",{className:"actions"},e.createElement("button",{className:"ui noborder basic button cancel close",ref:"close-modal"},r.t("close")),e.createElement("button",{className:"ui button teal",ref:"update",onClick:t.submitHandle},i.t("add")))))}});return d}),define("components/projectiteration/edit",["react","pref","eventbus","helper","language/projectiteration","language/default","components/semantic-datepicker","components/confirm","components/heading","components/form/singledate","models/projectiteration"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"AddIterationComponent",allowAction:!0,formError:{name:["error_name_required"],status:["error_status_required","error_status_invalid"]},getInitialState:function(){return{data:{id:0}}},canManage:function(){return $.inArray(parseInt(t.get("uid")),this.props.project.scrum_master)>-1},editIterationHandle:function(){var r=this;if(r.allowAction){r.allowAction=!1;var o=$(e.findDOMNode(r.refs.form));o.addClass("loading");var s={company_id:t.get("cid"),creator_id:t.get("uid"),project_id:r.props.project.id,name:r.getNode("name").val(),description:r.getNode("description").val(),status:r.getNode("status").dropdown("get value"),start:this.refs.date_start.getValue(),finish:this.refs.date_finish.getValue()};new d({id:r.props.iteration_id}).save(s,{success:function(e,t){a.showSuccess(i.t("success_edit")),r.closePopup(),n.trigger("projectiteration:refresh")},error:function(e,t){a.notifyErrorAndForm(t,i,"error_edit",o,r.formError)},complete:function(){r.allowAction=!0,o.removeClass("loading")}})}},submitHandle:function(){$(e.findDOMNode(this.refs.form)).submit()},closePopup:function(){$(e.findDOMNode(this.refs.modal)).modal("hide")},showPopup:function(){var t=this;$(e.findDOMNode(t.refs.modal)).modal({context:t.getDOMNode(),closable:!1,onShow:function(){$("body").addClass("has-modal")},onHide:function(){$("body").removeClass("has-modal")},onHidden:function(){n.trigger("projectiteration:unmountedit")}}).modal("show")},removeCurrentIteration:function(){var t=this;t.allowAction&&(t.allowAction=!1,$(e.findDOMNode(this.refs.delete)).popup("hide"),$(e.findDOMNode(this.refs.form)).addClass("loading"),new d({id:this.props.iteration_id}).destroy({success:function(){a.showSuccess(i.t("success_delete")),n.trigger("projectiteration:refresh"),t.closePopup()},error:function(){a.showError(i.t("error_delete"))},complete:function(){t.allowAction=!0,$(e.findDOMNode(t.refs.form)).removeClass("loading")}}))},getNode:function(t){return $(e.findDOMNode(this.refs[t]))},componentDidUpdate:function(){$(e.findDOMNode(this.refs.status)).dropdown("set selected",this.state.data.status)},componentWillUnmount:function(){},componentDidMount:function(){var t=this,n=$(e.findDOMNode(t.refs.form));n.addClass("loading"),$(e.findDOMNode(t.refs.status)).dropdown(),n.form({fields:{name:{identifier:"name"},status:{identifier:"status"}},inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.editIterationHandle()}}),new d({id:t.props.iteration_id}).fetch({success:function(e,n){t.setState({data:n})},error:function(){a.showError(i.t("error_not_found")),t.closePopup()},complete:function(){n.removeClass("loading")}}),t.showPopup(),$(e.findDOMNode(this.refs.delete)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(s,{message:i.t("delete_confirm")})),onShow:function(){$(this).find(".confirm").fastClick(function(e){e.preventDefault(),t.removeCurrentIteration()}),$(this).find(".cancel").fastClick(function(n){n.preventDefault(),$(e.findDOMNode(t.refs.delete)).popup("hide")})}})},render:function(){var t=this,n=t.state.data;return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement(l,{nomarginbottom:!0,link:"javascript:void(0)",text:t.props.project.name,hidetab:!0,custom_subtext:i.t("edit_iteration")}),e.createElement("div",{className:"clear ui segment nomargin"},e.createElement("div",{className:"ui form",ref:"form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("name")),e.createElement("input",{name:"name",ref:"name",key:n.id,defaultValue:n.name}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("label",null,i.t("start")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(c,{ref:"date_start",key:"start-"+n.id,defaultValue:n.date_started,returnTimestamp:!0}))),e.createElement("div",{className:"field wide eight"},e.createElement("label",null,i.t("finish")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(c,{ref:"date_finish",key:"end-"+n.id,defaultValue:n.date_completed,returnTimestamp:!0})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("description")),e.createElement("textarea",{key:n.id,defaultValue:n.description,name:"description",ref:"description",rows:"2"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,i.t("status")),e.createElement("div",{className:"ui search selection dropdown",key:n.id,ref:"status"},e.createElement("input",{type:"hidden",name:"status"}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"}),e.createElement("div",{className:"menu"},(new d).getStatusList().map(function(t){return e.createElement("div",{className:"item",key:t.code,"data-value":t.code},t.text)}))))))),e.createElement("div",{className:"actions"},this.canManage()?e.createElement("a",{href:"javascript:void(0)",ref:"delete",className:"ui small noborder basic red button pull-left nopaddingleft nopaddingright"},i.t("delete_current")):"",e.createElement("button",{className:"ui noborder basic button cancel close",ref:"close-modal"},r.t("close")),e.createElement("button",{className:"ui button teal",ref:"update",onClick:t.submitHandle},i.t("edit")))))}});return u}),define("components/projecttask/comment",["react","eventbus","pref","helper","models/user","models/projecttaskcomment","language/projecttask","components/filestrip","components/confirm"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"CommentComponent",loadUser:function(){var t=this;new i({id:this.props.data.creator_id}).fetch({success:function(n,i){$(e.findDOMNode(t.refs.avatar)).attr("src",a.getAvatarPath(i.avatar)),$(e.findDOMNode(t.refs.fullname)).text(i.fullname)}})},showloaderHandler:function(t){this.props.data.id==t.id&&a.loaderAppend($(e.findDOMNode(this.refs.date)))},deleteHandler:function(){var n=this;$(e.findDOMNode(this)).hide(),new r(this.props.data).destroy({success:function(e,a){t.trigger("projecttaskcommentlist:remove",n.props.data)},error:function(t,i){$(e.findDOMNode(n)).show(),a.notifyError(i,o,"error_delete")}})},canEdit:function(){var e=!1;return(n.get("uid")==this.props.data.creator_id||n.get("uid")==n.get("owner"))&&(e=!0),e},componentDidMount:function(){if(this.loadUser(),this.canEdit()){var n=this;$(e.findDOMNode(this.refs.deletebutton)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(l,null)),onShow:function(){$(this).find(".confirm").fastClick(function(t){t.preventDefault(),$(e.findDOMNode(n.refs.deletebutton)).popup("hide"),n.deleteHandler()}),$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e.findDOMNode(n.refs.deletebutton)).popup("hide")})}})}t.on("projecttaskcomment:showloader",this.showloaderHandler)},componentWillUnmount:function(){t.off("projecttaskcomment:showloader",this.showloaderHandler)},render:function(){var t="comment"+this.props.data.id;return e.createElement("div",{className:"comment",id:t},this.canEdit()?e.createElement("div",{className:"ui icon basic tiny buttons hide",ref:"controlbox"},e.createElement("a",{className:"ui button",ref:"deletebutton"},e.createElement("i",{className:"icon tc-cross"}))):"",e.createElement("a",{className:"avatar"},e.createElement("img",{ref:"avatar",className:"ui avatar image",src:a.getAvatarPath("")})),e.createElement("div",{className:"content"},e.createElement("a",{className:"author",ref:"fullname"},"---"),e.createElement("div",{className:"metadata"},e.createElement("div",{className:"date",ref:"date"},a.relativeTime(this.props.data.date_created))),e.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:this.props.data.text}}),e.createElement(s,{enableRenderBigOnSinglePhoto:!1,files:this.props.data.files})))}});return c}),define("components/projecttask/commentform",["react","helper","pref","eventbus","language/default","language/projecttask","models/file","models/projecttaskcomment","components/tinymce"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ProjectTaskCommentFormComponent",submitHandler:function(i){var o=this,l=[];$(e.findDOMNode(this)).find(".attachedfileid").each(function(e){l.push($(this).attr("data-id"))}),$(e.findDOMNode(this)).find(".uploadifive-queue-item").hide();var c={id:(new Date).getTime(),company_id:n.get("cid"),creator_id:n.get("uid"),project_task_id:this.props.task.id,text:i,files:[],date_created:parseInt((new Date).getTime()/1e3)};a.trigger("projecttaskcommentlist:append",c),a.trigger("projecttaskcomment:showloader",c),(new s).save({company_id:n.get("cid"),creator_id:n.get("uid"),project_task_id:this.props.task.id,text:i,file_list:l},{success:function(t,n,i){a.trigger("projecttaskcommentlist:append",n),$(e.findDOMNode(o)).find(".uploadifive-queue-item").remove()},error:function(n,a,s){o.restoreValue(i),t.notifyError(a,r),$(e.findDOMNode(o)).find(".uploadifive-queue-item").show()},complete:function(){a.trigger("projecttaskcommentlist:remove",c)}})},getText:function(){var n=$(e.findDOMNode(this.refs.editor)).val(),a=t.nl2br(n.trim());return a},doAddValidate:function(){var n=!0,a=0;if($(e.findDOMNode(this)).find(".uploadifive-queue-item").each(function(e){$(this).hasClass("complete")||$(this).hasClass("error")||a++}),a>0)n=!1,t.showError(r.t("error_file_uploading_waiting"));else{var i=[];$(e.findDOMNode(this)).find(".attachedfileid").each(function(e){i.push($(this).attr("data-id"))});var o=this.getText();0==o.length&&0==i.length&&(n=!1,t.showError(r.t("error_message_or_file_required")))}return n},doSubmit:function(){if(this.doAddValidate()){var t=this.getText();$(e.findDOMNode(this.refs.editor)).val(""),this.submitHandler(t)}},handleKeyup:function(e,t){e.preventDefault();var n=e.keyCode?e.keyCode:e.which;13!=n||e.shiftKey||this.doSubmit()},alreadyInitFileUpload:!1,handleEditorFocus:function(t,n){this.alreadyInitFileUpload||((new o).initAjaxUpload($(e.findDOMNode(this.refs.fileinput)),0,(new o).OBJECTTYPE_PROJECT_STORY_COMMENT,this.props.task.id,(new o).STATUS_ENABLE),this.alreadyInitFileUpload=!0,$(e.findDOMNode(this.refs.send)).show())},restoreValue:function(t){$(e.findDOMNode(this.refs.editor)).val(t).focus()},render:function(){var a="ffile-"+this.props.task.id;return e.createElement("div",{className:"comment"},e.createElement("a",{className:"avatar"},e.createElement("img",{className:"ui avatar image",src:t.getAvatarPath(n.get("avatar"))})),e.createElement("div",{className:"content"},e.createElement("div",null,e.createElement("div",{className:"pull-right",style:{width:50,paddingLeft:5}},e.createElement("input",{type:"button",ref:"send",style:{display:"none"},className:"ui button mini",value:i.t("send"),onClick:this.doSubmit})),e.createElement("div",{style:{marginRight:50}},e.createElement("textarea",{ref:"editor",name:"content",id:"projecttask_comment_"+this.props.task.id,onKeyUp:this.handleKeyup,onFocus:this.handleEditorFocus,placeholder:r.t("commentplaceholder")}),e.createElement("input",{type:"file",ref:"fileinput",id:a,name:"ffile",multiple:"multiple",className:"hide"})))))}});return c}),define("components/projecttask/commentlist",["react","language/projecttask","pref","eventbus","helper","components/projecttask/comment","components/projecttask/commentform","collections/projecttaskcomment","models/projecttaskcomment"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"CommentListComponent",getInitialState:function(){return{items:this.props.comments,startindex:this.props.comments.length>0?this.props.comments[0].id:0,totalload:this.props.comments.length,total:this.props.countcomment}},appendHandler:function(e){e.project_task_id==this.props.task.id&&this.setState({items:this.state.items.concat(e),totalload:this.state.totalload+1,total:this.state.total+1})},removeHandler:function(e){if(e.project_task_id==this.props.task.id){var t=[];$.each(this.state.items,function(n,a){a.id!=e.id&&t.push(a)}),this.setState({items:t,totalload:this.state.totalload-1,total:this.state.total-1})}},updateHandler:function(e){if(e.project_task_id==this.props.task.id){var t=[];$.each(this.state.items,function(n,a){a.id!=e.id?t.push(a):t.push(e)}),this.setState({items:t})}},recordPerPage:5,loadMore:function(e){e.preventDefault(),this.loadData()},loadData:function(){var t=this;i.addLoader(e.findDOMNode(t.refs.commentmore)),(new s).fetch({data:{company_id:n.get("cid"),project_task_id:this.props.task.id,comment_id_before:this.state.startindex,limit:this.recordPerPage},success:function(n,a){n.models.length>0&&t.setState({items:a.items.concat(t.state.items),startindex:a.items[0].id,totalload:t.state.totalload+n.models.length,total:a.total}),n.models.length<t.recordPerPage&&$(e.findDOMNode(t.refs.commentmore)).hide()},complete:function(){i.removeLoader(e.findDOMNode(t.refs.commentmore))}})},changeTotalHandler:function(e){},componentWillUnmount:function(){a.off("projecttaskcommentlist:append",this.appendHandler),a.off("projecttaskcommentlist:remove",this.removeHandler),a.off("projecttaskcommentlist:update",this.updateHandler)},componentDidMount:function(){this.loadData(),a.on("projecttaskcommentlist:append",this.appendHandler),a.on("projecttaskcommentlist:remove",this.removeHandler),a.on("projecttaskcommentlist:update",this.updateHandler)},render:function(){return e.createElement("div",{className:"ui comments"},this.props.countcomment>this.props.comments.length&&this.props.comments.length!=this.props.countcomment?e.createElement("div",{className:"commentmore",ref:"commentmore"},e.createElement("a",{href:"#",onClick:this.loadMore},t.t("commentmore")),e.createElement("span",{className:"pull-right"},this.state.totalload,"/",this.state.total)):"",this.state.items.map(function(t,n){return e.createElement(r,{data:t,key:t.id})}),e.createElement(o,{ref:"editor",task:this.props.task}))}});return c}),define("components/projecttask/detail",["react","eventbus","helper","language/projecttask","components/employee-avatar","components/projecttask/commentlist","components/filestrip","models/projecttask"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"TaskDetailComponent",getDefaultProps:function(){return{showLinkUpdateStatus:!0}},handleCloseClick:function(e){if(e.preventDefault(),$.isFunction(this.props.closeHandle))this.props.closeHandle();else{var n=$.extend({},this.props.data,{id:this.props.data.id.toString().replace(/-expand/g,"")});t.trigger("projecttask:expand",n)}},openPopupEditTaskHandle:function(e){e.preventDefault();var t=this.props.data.id.toString().replace(/-expand/g,"");$.isFunction(this.props.openPopupEditTaskHandle)&&this.props.openPopupEditTaskHandle(t)},openPopupUpdateStatusHandle:function(e){e.preventDefault();var t=this.props.data.id.toString().replace(/-expand/g,"");$.isFunction(this.props.openPopupUpdateStatus)&&this.props.openPopupUpdateStatus(t)},componentWillUnmount:function(){},componentDidMount:function(){},render:function(){var t=n.cloneObjectData(this.props.data);t.id=t.id.toString().replace(/-expand/g,"");var l=(new s).getPriority(t.priority),c={color:"#fff",borderRadius:"0.25em",backgroundColor:l.color},d=moment.unix(t.date_created).format("HH:mm")+", "+moment.unix(t.date_created).format("DD/MM/YYYY"),u="--";t.date_modified>0&&(u=moment.unix(t.date_modified).format("HH:mm")+", "+moment.unix(t.date_modified).format("DD/MM/YYYY"));var m=a.t("Un-planned");t.date_started>0&&(m=moment.unix(t.date_started).format("DD/MM/YYYY"));var p=a.t("Un-planned");return t.date_completed>0&&(p=moment.unix(t.date_completed).format("DD/MM/YYYY")),e.createElement("div",null,e.createElement("div",{style:{float:"right",padding:5}},e.createElement("a",{onClick:this.handleCloseClick,href:"javascript:void(0)",style:{display:"inline-block",padding:3}},e.createElement("i",{className:"tc-cross"}))),e.createElement("div",{style:{backgroundColor:"#f0f0f0"}},e.createElement("div",{
className:"pull-left",style:{padding:15}},e.createElement("div",null,e.createElement("span",{className:"ui large label",style:{backgroundColor:"transparent",paddingLeft:0,paddingRight:0}},"#",e.createElement("strong",null,this.props.data.code)),e.createElement("span",{className:"ui label mini",style:c},l.text)," ",this.props.showLinkUpdateStatus&&1==t.can_update_status?[e.createElement("a",{key:"change_status",className:"ui label small",onClick:this.openPopupUpdateStatusHandle,style:{backgroundColor:"transparent",paddingLeft:0,paddingRight:0}},a.t("change_status")),e.createElement("span",{key:"change_status_divider"}," · ")]:null,1==this.props.can_edit_story?e.createElement("a",{href:"javascript:void(0)",className:"ui label small",onClick:this.openPopupEditTaskHandle,style:{backgroundColor:"transparent",paddingLeft:0,paddingRight:0}},a.t("update")):""),e.createElement("div",{style:{paddingTop:10},className:"ui items"},e.createElement("div",{className:"item"},e.createElement("div",{className:"middle aligned content"},e.createElement("span",{style:{float:"left",lineHeight:"25px",paddingRight:"5px"}},a.t("created_by")),e.createElement(i,{id:t.creator_id,hover:!1}))))),e.createElement("div",{className:"pull-right",style:{padding:15}},e.createElement("div",{style:{textAlign:"right",paddingRight:5},className:"pull-left"},e.createElement("span",null,e.createElement("small",null,a.t("created"),": ",d)),e.createElement("br",null),e.createElement("span",null,e.createElement("small",null,a.t("last_modified"),": ",u))),e.createElement("div",{className:"pull-left",style:{paddingLeft:5}},e.createElement("span",null,e.createElement("small",null,a.t("started"),": ",e.createElement("em",null,m))),e.createElement("br",null),e.createElement("span",null,e.createElement("small",null,a.t("completed"),": ",e.createElement("em",null,p))))),e.createElement("div",{style:{clear:"both"}})),e.createElement("div",{style:{clear:"both"}}),e.createElement("div",{className:"ui stackable grid",style:{marginTop:"0"}},e.createElement("div",{className:"column row"},e.createElement("div",{className:"left floated twelve wide column task-detail-left"},e.createElement("h2",{style:{color:"#222",fontWeight:"normal"},dangerouslySetInnerHTML:{__html:t.name}}),e.createElement("div",{dangerouslySetInnerHTML:{__html:t.description.replace(/\n/g,"<br />")}}),e.createElement("div",{id:"issuefiles"},e.createElement(o,{enableRenderBigOnSinglePhoto:!1,files:t.files})),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"ui feed"},e.createElement(r,{key:t.id+t.date_modified,task:t,countcomment:t.count_comment,comments:[]}))),e.createElement("div",{className:"right floated four wide column task-detail-right"},e.createElement("h4",{dangerouslySetInnerHTML:{__html:a.t("who_working_on_this")}}),e.createElement("div",{className:"ui middle aligned selection animated list"},t.assignees.map(function(t,n){return e.createElement("div",{className:"item",key:n},e.createElement(i,{hover:!1,id:t}))}))))),e.createElement("div",{style:{clear:"both"}}))}});return l}),define("components/tag",["react","eventbus","helper"],function(e,t,n){var a=e.createClass({displayName:"TagComponent",getDefaultProps:function(){return{text:"",size:"mini",onClick:function(e){console.log("Not implemented yet")}}},stringToColor:function(e){var t=n.hashCode(e),a=["#FFEBEE","#FFCDD2","#EF9A9A","#FF8A80","#FCE4EC","#F8BBD0","#F48FB1","#FF80AB","#F3E5F5","#E1BEE7","#CE93D8","#EDE7F6","#D1C4E9","#B39DDB","#B388FF","#E8EAF6","#C5CAE9","#9FA8DA","#8C9EFF","#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#82B1FF","#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#80D8FF","#40C4FF","#00B0FF","#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#84FFFF","#18FFFF","#00E5FF","#00B8D4","#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#A7FFEB","#64FFDA","#1DE9B6","#00BFA5","#E8F5E9","#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#B9F6CA","#69F0AE","#00E676","#00C853","#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#CCFF90","#B2FF59","#76FF03","#64DD17","#F9FBE7","#F0F4C3","#E6EE9C","#DCE775","#D4E157","#CDDC39","#C0CA33","#AFB42B","#9E9D24","#F4FF81","#EEFF41","#C6FF00","#AEEA00","#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825","#F57F17","#FFFF8D","#FFFF00","#FFEA00","#FFD600","#FFF8E1","#FFECB3","#FFE082","#FFD54F","#FFCA28","#FFC107","#FFB300","#FFA000","#FF8F00","#FF6F00","#FFE57F","#FFD740","#FFC400","#FFAB00","#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#FFD180","#FFAB40","#FF9100","#FF6D00","#FBE9E7","#FFCCBC","#FFAB91","#FF8A65","#FF7043","#FF9E80","#FF6E40"],i=Math.abs(t)%a.length,r=a[i],o="#000000";return{background:r,text:o}},componentDidMount:function(){},render:function(){var t=this.stringToColor(this.props.text),n={marginRight:2,marginBottom:2,fontSize:11,padding:"2px 5px",backgroundColor:t.background+" !important",color:t.text};return e.createElement("a",{onClick:this.props.onClick,style:n,title:this.props.text},this.props.text)}});return a}),define("components/taglist",["react","eventbus","components/tag"],function(e,t,n){var a=e.createClass({displayName:"TagListComponent",getDefaultProps:function(){return{text:"",size:"mini",onClick:function(e){console.log("not implemented on taglist")}}},test1:function(e){console.log("abc")},extractTagList:function(){for(var e=this.props.text.split(","),t=[],n=0;n<e.length;n++){var a=$.trim(e[n]);a.length>0&&t.push(a)}return t},componentDidMount:function(){},render:function(){var t=this,a=this.extractTagList();return e.createElement("span",{className:"taglistitems"},a.map(function(a){return e.createElement(n,{size:t.props.size,key:a,text:a,onClick:t.props.onClick})}))}});return a}),define("components/projecttask/item",["react","backbone","helper","querystring","eventbus","language/projecttask","language/default","components/employee-avatar","components/confirm","components/projecttask/detail","components/datetime","components/taglist","models/project","models/projecttask","models/projectiteration"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"ProjectTaskItemComponent",isExpand:!1,getInitialState:function(){return{data:{id:0,date_dot:[],assignees:[]}}},getDefaultProps:function(){return{openPopupUpdateStatus:function(e){},searchHandler:function(e){},doFilter:function(e,t,n,a){},removeFilter:function(e,t){}}},loadDetailHandler:function(e){e.preventDefault();var t=parseInt(a.get("taskid"));!isNaN(t)&&t>0&&t==this.props.data.id?(a.set("taskid",0),this.props.removeFilter("taskid",!1),this.isExpand=!1):this.isExpand?this.isExpand=!1:(this.isExpand=!0,this.props.doFilter("taskid",this.props.data.id,"",!1),a.set("taskid",this.props.data.id)),i.trigger("projecttask:expand",this.props.data)},scrollTo:function(){var t=$(e.findDOMNode(this)).offset().top-$(e.findDOMNode(this)).outerHeight();$("html, body").animate({scrollTop:t},500)},filterTag:function(e){e.preventDefault(),e.stopPropagation(),this.props.doFilter("tag",$(e.target).text())},openPopupUpdateStatusHandle:function(e){e.preventDefault(),e.stopPropagation(),this.props.openPopupUpdateStatus(this.state.data.id)},openPopupEditTaskHandle:function(e){e.preventDefault(),e.stopPropagation(),this.props.openPopupEditTaskHandle(this.state.data.id)},updateData:function(e){var t=this.state.data;t.id>0?t.id==e.id&&this.setState({data:e}):this.setState({data:e})},removeItem:function(){var t=this,a=t.state.data.name;a='"<strong>'+a+'</strong>"',$(e.findDOMNode(this.refs.remove)).popup("hide"),$(e.findDOMNode(this.refs.remove)).addClass("loading"),new p({id:t.state.data.id}).destroy({success:function(i,o){n.showSuccess(r.t("success_delete").replace(/\{name\}/,a)),$(e.findDOMNode(t)).hide()},error:function(e,t){n.showError(r.t("error_delete").replace(/\{name\}/,a))},complete:function(){$(e.findDOMNode(this.refs.remove)).removeClass("loading")}})},renderData:function(){var t=this;t.state.data,$(e.findDOMNode(this.refs.progressbar)).progress({limitValues:!1})},triggerSearchByGroup:function(){var t=this;$(e.findDOMNode(t.refs.name)).find(".ui.label").each(function(e,n){$(n).off("click").on("click",function(e){e.preventDefault(),e.stopPropagation();var a="["+$(n).text()+"]";t.props.searchHandler(a)})})},getOutOfDay:function(e,t){var n="",a=e.diff(t,"days");return a>0?a>30?(a=e.diff(t,"months"),a>12?(a=e.diff(t,"years"),n=r.t("late")+" "+a+" "+r.t("year")):n=r.t("late")+" "+a+" "+r.t("month")):n=r.t("late")+" "+a+" "+r.t("day"):n="còn "+-1*a+" "+r.t("day"),n},getParsedName:function(){var e=this.state.data.name;return"undefined"!=typeof e&&(e=e.replace(/\[/g,'<span class="ui label grey basic mini hideonsmall">'),e=e.replace(/\]/g,"</span>")),e},handleUpdate:function(t){var n=this,a=t.item;switch(t.type){case"employee":$.inArray(parseInt(a.id),this.state.data.assignees)>=0&&e.findDOMNode(this.refs["member-"+a.id])&&e.render(e.createElement(s,{id:a.id,user:a,cssStyles:{float:"left",marginLeft:"5px",padding:"0.21428571em 0em"}}),e.findDOMNode(n.refs["member-"+a.id]));break;case"iteration":this.state.data.project_iteration_id==a.id&&$(e.findDOMNode(n.refs.iteration)).html(t.item.name)}},showEditActionSheet:function(e){e.preventDefault();var t=this,a=[];1==this.state.data.can_update_status&&a.push({text:r.t("edit_status"),onClick:function(e){t.openPopupUpdateStatusHandle(e)}}),1==this.props.can_edit_story&&(a.push({text:o.t("update"),onClick:function(e){t.openPopupEditTaskHandle(e)}}),a.push({text:o.t("delete"),color:"red",onClick:function(e){1==confirm(o.t("confirm_msg_default"))&&t.removeItem()}}));var i={buttons:a};n.showActionSheet(i)},componentDidUpdate:function(){this.renderData(),a.get("taskid")==this.state.data.id&&this.props.init,this.triggerSearchByGroup()},componentWillUnmount:function(){var e=this;i.off("projecttask:updateitem",e.updateData),i.off("projecttaskitem:update",e.handleUpdate)},componentWillMount:function(){this.setState({data:this.props.data})},componentDidMount:function(){var t=this;$(e.findDOMNode(t.refs.remove)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(l,null)),onShow:function(){$(this).find(".confirm").fastClick(function(e){e.preventDefault(),t.removeItem()}),$(this).find(".cancel").fastClick(function(n){n.preventDefault(),$(e.findDOMNode(t.refs.remove)).popup("hide")})}}),n.isSmallScreen()||n.initMyTip($(e.findDOMNode(this)).find(".mytip_onpage"),null,null,!1),this.triggerSearchByGroup(),t.renderData(),i.on("projecttask:updateitem",t.updateData),i.on("projecttaskitem:update",t.handleUpdate)},renderMobile:function(){var t=this,n=t.state.data,a=new p,i={},o=a.getPriority(n.priority);i.backgroundColor=o.color;var s=a.getStatus(n.status),l={};l.borderRadius="0.25em",l.borderColor=s.color,l.color=s.color;var c,d=1,u=!1;if(n.date_completed>0){var m=moment.unix(n.date_completed),h=moment();if(c=this.getOutOfDay(h,m),u=h.diff(m,"days")>0,n.date_started>0){var f=moment.unix(n.date_started);f.format("DDMMYYYY")!=m.format("DDMMYYYY")&&(d=m.diff(f,"days"))}else d=0}return e.createElement("tr",null,e.createElement("td",{className:"mitem"},1==n.can_update_status||1==t.props.can_edit_story?e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})):"",e.createElement("a",{className:"mitemheading mitemheadingnormal",href:"javascript:void(0)",onClick:this.loadDetailHandler,ref:"name"},e.createElement("span",{className:"ui pull-right label basic mini",style:l},s.text),this.state.data.name),e.createElement("div",{className:"mitemmeta clear"},this.state.data.count_comment," ",r.t("count_comment")," ·  ",e.createElement("span",{style:{color:u?"#ff0000":""}},d>0?d:"---"," ",r.t("day")," ",n.status!=a.STATUS_COMPLETED&&n.status!=a.STATUS_CANCELLED?e.createElement("span",null,"(",c,")"):""),e.createElement("div",{className:"clear"},this.state.data.assignees.map(function(t,n){return e.createElement("span",{key:t,ref:"member-"+t})})))))},renderDesktop:function(){var t=this,a=t.state.data,i=new p,o={},s=i.getPriority(a.priority);o.backgroundColor=s.color;var l=i.getType(a.type),c=i.getStatus(a.status),h={};h.borderRadius="0.25em",h.backgroundColor=c.color,h.color="#fff";var f=a.name;"undefined"!=typeof f&&(f=f.replace(/\[/g,'<span class="ui label grey basic mini hideonsmall">'),f=f.replace(/\]/g,"</span>"));var g,_=1,v=!1;if(a.status!=i.STATUS_COMPLETED&&a.status!=i.STATUS_CANCELLED&&a.date_completed>0){var y=moment.unix(a.date_completed),E=moment();if(g=this.getOutOfDay(E,y),v=E.diff(y,"days")>0,a.date_started>0){var b=moment.unix(a.date_started);b.format("DDMMYYYY")!=y.format("DDMMYYYY")&&(_=y.diff(b,"days"))}else _=0}return e.createElement("tr",{onClick:this.loadDetailHandler,style:{cursor:"pointer"}},e.createElement("td",{className:"center aligned"},e.createElement("a",{style:o,href:"javascript:void(0)",className:"mytip_onpage ui label circular mini empty",ref:"priority","data-content":s.text,title:s.text})),e.createElement("td",{"data-id":a.id,title:_>0?_+" "+r.t("day"):r.t("duration_unplanned")},v&&a.status!=i.STATUS_COMPLETED&&a.status!=i.STATUS_CANCELLED?e.createElement("span",{className:"ui label mini",style:{backgroundColor:"#e74c3c",color:"white",marginRight:5}},g):"",e.createElement("a",{href:"javascript:void(0)",ref:"name",dangerouslySetInnerHTML:{__html:f}})),e.createElement("td",null,a.tags.length>0?e.createElement("div",null,e.createElement(u,{onClick:this.filterTag,text:a.tags})):""),e.createElement("td",null,a.code),e.createElement("td",{"data-id":a.id,className:"collapsing cell_action"},a.count_comment?e.createElement("div",{className:"ui large label"},e.createElement("i",{className:"icon tc-comments"}),a.count_comment):""),e.createElement("td",null,e.createElement("span",{className:""+(this.state.data.project_iteration_id>0?"teal":"grey"),ref:"iteration"},r.t("un_milestone"))),e.createElement("td",null,e.createElement("span",{ref:"type"},l.text)),e.createElement("td",null,a.assignees.map(function(t,n){return e.createElement("span",{key:t,ref:"member-"+t})})),e.createElement("td",null,e.createElement(d,{ts:a.date_started,timeformat:"",format:"DD/MM"})),e.createElement("td",null,e.createElement("span",{className:"ui label mini",style:h},c.text)),e.createElement("td",{className:"cell_action"},1==a.can_update_status?e.createElement("a",{href:"javascript:void(0)",onClick:t.openPopupUpdateStatusHandle,className:"mytip_onpage "+n.rowButtonClass(),title:r.t("editstatus_title")},e.createElement("i",{className:"icon tc-tick"})):"",1==t.props.can_edit_story?e.createElement("a",{href:"javascript:void(0)",className:"mytip_onpage "+n.rowButtonClass(),onClick:t.openPopupEditTaskHandle,title:r.t("edit_title")},e.createElement("i",{className:"icon tc-pencil"})):"",(new m).canEditProject()?e.createElement("a",{ref:"remove",href:"javascript:void(0)",onClick:function(e){e.stopPropagation()},className:"mytip_onpage "+n.rowButtonClass(),title:r.t("delete_title")},e.createElement("i",{className:"tc-trash icon"})):""))},render:function(){return n.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return f}),define("components/projecttask/item-expand",["react","eventbus","components/projecttask/detail"],function(e,t,n){var a=e.createClass({displayName:"ProjectTaskItemExpandComponent",expandHandle:function(t){e.unmountComponentAtNode(e.findDOMNode(this.refs.wrapper)),e.render(e.createElement(n,{openPopupEditTaskHandle:this.props.openPopupEditTaskHandle,openPopupUpdateStatus:this.props.openPopupUpdateStatusHanle,data:this.props.data,can_add_story:this.props.can_add_story,can_edit_story:this.props.can_edit_story}),e.findDOMNode(this.refs.wrapper))},componentDidMount:function(){this.expandHandle()},render:function(){return e.createElement("tr",{className:"row-expand"},e.createElement("td",{colSpan:"13"},e.createElement("div",{ref:"wrapper",className:"row-expand-wrapper"})))}});return a}),define("components/projecttask/status-history",["react","pref","eventbus","helper","language/projecttask","components/employee-avatar","collections/projecttaskchange","models/projecttask"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"StatusHistoryComponent",getInitialState:function(){return{items:[]}},componentWillUnmount:function(){n.off("projecttaskchange:refresh",this.refreshHandle)},componentDidMount:function(){var e=this;this.props.projecttask.id>0&&e.loadData(),n.on("projecttaskchange:refresh",e.refreshHandle)},componentDidUpdate:function(){},refreshHandle:function(e){this.props.projecttask.id>0&&this.props.projecttask.id==e.id&&this.loadData()},loadData:function(){var e=this;(new o).fetch({data:{company_id:t.get("cid"),project_id:this.props.projecttask.project_id,project_task_id:this.props.projecttask.id},success:function(t,n){e.setState({items:n.items})}})},getNode:function(t){return $(e.findDOMNode(this.refs[t]))},render:function(){var t=this,n=t.state.items;return e.createElement("div",{className:"ui vertical segment"},n.length>0?e.createElement("div",{className:"tc-scrolled"},e.createElement("table",{className:"ui selectable striped table unstackable"},e.createElement("tbody",null,n.map(function(t,n){var a=moment.unix(t.date_created),i=(new s).getStatus(t.old_status),o=(new s).getStatus(t.new_status);return e.createElement("tr",{key:t.id},e.createElement("td",null,a.format("HH:mm"),", ",a.format("DD/MM/YYYY")),e.createElement("td",{width:"50"},e.createElement(r,{id:t.creator_id})),e.createElement("td",null,e.createElement("div",{className:"ui list"},t.old_status!=t.new_status?e.createElement("div",{className:"ui item"},i.text," ","->"," ",o.text):"")),e.createElement("td",null,t.change_note))})))):e.createElement("div",{className:""},i.t("status_history_empty")))}});return l}),define("components/projecttask/popup-update-status",["react","backbone","pref","setting","eventbus","helper","language/projecttask","language/default","components/projecttask/status-history","models/projecttask"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"UpdateStatusComponent",allowUpdate:!0,getInitialState:function(){return{data:{}}},closePopup:function(){i.trigger("projecttask:unmountupdatestatus"),$(e.findDOMNode(this.refs.modal)).modal("hide")},showPopup:function(){var t=this;$(e.findDOMNode(t.refs.modal)).modal({context:t.getDOMNode(),closable:!0,autofocus:!1,onHidden:function(){i.trigger("projecttask:unmountupdatestatus")}}).modal("show")},updateStatusHandle:function(t){t.preventDefault();var a=this,s=a.state.data,l=$(e.findDOMNode(a.refs.form));if(a.allowUpdate){a.allowUpdate=!1,l.addClass("loading");var d={company_id:n.get("cid"),creator_id:n.get("uid"),id:s.id,status:$(e.findDOMNode(a.refs["select-status"])).dropdown("get value"),progress_percent:0,change_note:$(e.findDOMNode(a.refs.change_note)).val()};$.ajax({type:"PUT",dataType:"json",url:(new c).urlRoot+"/updatestatus",data:d,success:function(t){r.showSuccess(o.t("success_update_status")),s.status=d.status,s.progress_percent=d.progress_percent,a.setState({data:s}),$(e.findDOMNode(a.refs.change_note)).val(""),i.trigger("projecttask:updateitem",s),i.trigger("projecttaskchange:refresh",s)},error:function(e){r.notifyError(e,o,"error_update_status")},complete:function(){l.removeClass("loading"),a.allowUpdate=!0}})}},getNode:function(t){return $(e.findDOMNode(this.refs[t]))},componentDidUpdate:function(){$(e.findDOMNode(this.refs["select-status"])).dropdown("set selected",this.state.data.status)},componentWillUnmount:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(t.refs.form)).form({fields:{status:{identifier:"status"},progress:{identifier:"progress"},note:{identifier:"note"}},inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.save()}}),t.props.id>0?new c({id:t.props.id}).fetch({success:function(e,n){t.setState({data:n}),t.showPopup()},error:function(){r.showError(o.t("error_not_found")),t.closePopup()}}):(r.showError(o.t("error_not_found")),t.closePopup()),$(e.findDOMNode(t.refs["select-status"])).dropdown(),$(e.findDOMNode(t.refs["select-progress"])).dropdown(),$(e.findDOMNode(t.refs.tabs)).find(".item").tab({onLoad:function(n,a,i){"updatehistory"==n?(t.allowUpdate=!1,$(e.findDOMNode(t.refs.update)).hide()):(t.allowUpdate=!0,$(e.findDOMNode(t.refs.update)).show())}})},render:function(){var t=this,a=new c,i=t.state.data,r=this.props.project.scrum_master,d=!1;if(r.length>0)for(var u=0;u<r.length;u++){var m=r[u];if(m==n.get("uid")){d=!0;break}}var p={maxWidth:"45%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};return e.createElement("div",null,e.createElement("div",{className:"ui small modal",ref:"modal"},e.createElement("div",{className:"header"},e.createElement("div",{style:{fontSize:"inherit"},className:"ui breadcrumb"},e.createElement("div",{className:"active section"},t.props.project.name),e.createElement("div",{className:"divider"}," / "),e.createElement("div",{className:"active section",style:p},i.name),e.createElement("div",{className:"divider"}," / "),e.createElement("div",{className:"active section"},o.t("update_status")))),e.createElement("div",{className:"ui vertical segment"},e.createElement("div",{className:"ui top attached tabular menu",ref:"tabs",style:{paddingLeft:"10px"}},e.createElement("a",{className:"item active","data-tab":"updatestatus"},o.t("update_status")),e.createElement("a",{className:"item","data-tab":"updatehistory"},o.t("update_history"))),e.createElement("div",{className:"ui bottom attached tab segment active","data-tab":"updatestatus"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("label",null,o.t("new_status")),e.createElement("div",{className:"ui search selection dropdown",ref:"select-status"},e.createElement("input",{type:"hidden",name:"status"}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"}),e.createElement("div",{className:"menu"},a.getStatusList().map(function(t){var n=!0;if(!d&&t.code>a.STATUS_NEED_FOR_APPROVAL&&(n=!1),n){var r="";return i.status==t.code&&(r="(Hiện tại)"),e.createElement("div",{className:"item",key:t.code,"data-value":t.code},t.text," ",r)}}))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,o.t("change_note")),e.createElement("textarea",{defaultValue:i.note,ref:"change_note",name:"change_note",rows:"2"}))))),e.createElement("div",{className:"ui bottom attached tab segment","data-tab":"updatehistory"},e.createElement(l,{key:i.id,projecttask:i}))),e.createElement("div",{className:"actions"},e.createElement("a",{className:"ui basic noborder button cancel",ref:"close-modal"},s.t("close")),e.createElement("a",{className:"ui button teal",ref:"update",onClick:this.updateStatusHandle},o.t("update")))))}});return d}),define("components/projecttask/list",["react","backbone","pref","querystring","eventbus","helper","language/projecttask","language/project","language/projectiteration","collections/projecttask","models/projecttask","collections/projectiteration","models/projectiteration","models/project","collections/user","models/user","components/projectiteration/heading","components/projecttask/popup-add","components/projecttask/popup-edit","components/projectiteration/add","components/projectiteration/edit","components/projecttask/item","components/projecttask/item-expand","components/projecttask/detail","components/projecttask/popup-update-status","components/dropdown/projectassigneetype","components/dropdown/projecttaskpriority","components/dropdown/projecttasktype","components/dropdown/projecttaskstatus","components/mixin/listsearch","components/headingfull","components/filterbar","components/filterbartoggle","components/leftsidebar"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M,S,O,I,A){var P=e.createClass({displayName:"ProjectTaskListComponent",init:!0,initExpand:!1,dataTimer:null,mixins:[M],getInitialState:function(){return{total:0,items:[],length:0,can_add_story:0,can_edit_story:0,currentpage:a.get("page")}},filters:{id:null,keyword:null,assignee_type:null,assignee_user:null,priority:null,iteration_id:null,type:null,status:null,tag:null,sort_by:null,sort_type:null},loadFilterQueryTagData:function(e){var t=null,n="name";switch(e){case"assignee_type":var r=o.t(this.filters[e]);i.trigger("querytag:updatetext",{field:e,text:r});break;case"priority":var s=(new d).getPriority(this.filters[e]);i.trigger("querytag:updatetext",{field:e,text:s.text});break;case"status":var s=(new d).getStatus(this.filters[e]);i.trigger("querytag:updatetext",{field:e,text:s.text});break;case"iteration_id":t=new m;break;case"type":var l=(new d).getType(this.filters[e]);i.trigger("querytag:updatetext",{field:e,text:l.text});break;case"assignee_user":t=new f,n="fullname"}null!=t&&a.requestFilterQueryTag(t,this.filters,e,n)},formSidebarSubmit:function(){var e={id:this.props.project.id,priority:this.refs.filterpriority.val(),status:this.refs.filterstatus.val(),iteration_id:this.refs.iterationHeading.getValue(),type:this.refs.filtertype.val(),keyword:this.refs.sidebar.getKeyword(),tag:this.filters.tag},t=$.trim(this.refs.filterassigneetype.val());if(t.length>0){var n=t.split(":");if(n.length>=2){var a=n[0],i=n[1];e[a]=i}}!isNaN(this.filters.iteration_id)&&""!=this.filters.iteration_id&&this.filters.iteration_id>=0&&(e.iteration_id=this.filters.iteration_id),this.doFilters(e,null,!0)},getQueryData:function(){var e={company_id:n.get("cid"),project_id:this.props.project.id,page:this.state.currentpage,status:this.filters.status||-1,priority:this.filters.priority||-1,type:this.filters.type||-1,tag:this.filters.tag||"",keyword:a.get("keyword")||"",sort_by:this.filters.sort_by||"status",sort_type:this.filters.sort_type||"ASC"};return this.filters.assignee_user?e.assignee_user=this.filters.assignee_user:this.filters.assignee_type&&(e.assignee_type=this.filters.assignee_type),!isNaN(this.filters.iteration_id)&&""!=this.filters.iteration_id&&this.filters.iteration_id>=0&&(e.iteration_id=this.filters.iteration_id),e},loadIterations:function(){var e=[];$.each(this.state.items,function(t,n){e.push(n.project_iteration_id)}),(new u).getFromIdList({ids:e,success:function(e){$.each(e.items,function(e,t){i.trigger("projecttaskitem:update",{type:"iteration",item:t})})}})},loadEmployees:function(){var e=[];$.each(this.state.items,function(t,n){e=e.concat(n.assignees)}),(new h).getFromIdList({ids:e,success:function(e){$.each(e.items,function(e,t){i.trigger("projecttaskitem:update",{type:"employee",item:t})})}})},loadData:function(){this.loadDataTimer>0&&clearTimeout(this.loadDataTimer);var e=this,t=e.getQueryData(),n=500;e.init&&(n=1e3),this.loadDataTimer=setTimeout(function(){(new c).fetch({data:t,success:function(t,n){e.setState(n)},complete:function(){}})},n)},expandHandler:function(e){var t=[];r.isExpandIdExisted(this.state.items,e.id)?t=r.removeExpandItem(this.state.items,e.id):$.each(this.state.items,function(n,a){t.push(a);var i=r.cloneObjectData(e);e.id==a.id&&(i.id+="-expand",t.push(i))}),this.setState({items:t})},iterationFilter:function(e,t,n,a){switch(t=parseInt(t)){case-3:a.dropdown("hide"),this.openEditIterationPopupHandle(n);break;case-4:a.dropdown("hide");break;case-1:this.removeFilter("iteration_id");break;default:this.doFilter("iteration_id",t)}},triggerSearchHandler:function(e){this.doFilter("keyword",e)},openCreateTaskPopupHandle:function(t){t.preventDefault(),e.render(e.createElement(_,{project:this.props.project,iteration_id:this.filters.iteration_id}),e.findDOMNode(this.refs.createtask))},unmountCreateTaskHandle:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.createtask))},openEditTaskPopupHandle:function(t){e.render(e.createElement(v,{project:this.props.project,task_id:t}),e.findDOMNode(this.refs.edittask))},unmountEditTaskHandle:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.edittask))},openCreateIterationPopupHandle:function(t){t.preventDefault(),e.render(e.createElement(y,{project:this.props.project}),e.findDOMNode(this.refs.createiteration))},unmountIterationAddHandle:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.createiteration))},openEditIterationPopupHandle:function(t){e.render(e.createElement(E,{project:this.props.project,iteration_id:t}),e.findDOMNode(this.refs.edititeration))},unmountIterationEditHandle:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.edititeration))},openPopupUpdateStatusHandle:function(t){e.render(e.createElement(k,{project:this.props.project,id:t}),e.findDOMNode(this.refs.updatestatus))},unmountUpdateStatusHandle:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.updatestatus))},canAddTask:function(){for(var e=!1,t=parseInt(n.get("uid")),a=this.props.project.role_permission,i=this.props.project.development_team,r=this.props.project.scrum_master,o=0;o<i.length;o++)if(t==parseInt(i[o])&&1==a.development_team_add_story){e=!0;break}for(var o=0;o<r.length;o++)if(t==parseInt(r[o])&&1==a.scrum_master_add_story){e=!0;break}return e},canManage:function(){return $.inArray(parseInt(n.get("uid")),this.props.project.scrum_master)>-1},componentDidUpdate:function(){var e=this;if(this.initSortable(),this.loadEmployees(),this.loadIterations(),!e.initExpand&&(e.initExpand=!0,!isNaN(a.get("taskid"))&&a.get("taskid")>0)){taskID=parseInt(a.get("taskid"));var t={id:0};$.each(this.state.items,function(e,n){taskID==n.id&&(t=n)}),t.id>0&&e.expandHandler(t)}},componentWillUnmount:function(){i.off("projecttask:refresh",this.loadData),i.off("projecttask:unmountupdatestatus",this.unmountUpdateStatusHandle),i.off("projecttask:unmountadd",this.unmountCreateTaskHandle),i.off("projecttask:unmountedit",this.unmountEditTaskHandle),i.off("projecttask:expand",this.expandHandler),i.off("projectiteration:edit",this.openEditIterationPopupHandle),i.off("projectiteration:unmountadd",this.unmountIterationAddHandle),i.off("projectiteration:unmountedit",this.unmountIterationEditHandle)},componentWillMount:function(){a.initFilter(this.filters)},componentDidMount:function(){$(e.findDOMNode(this)).addClass("loader"),this.init=!1,this.loadData(),this.initSortable(),r.isSmallScreen()||(r.initMyTip($(e.findDOMNode(this)).find(".mytip")),r.initMyTip($(e.findDOMNode(this)).find(".mytip_onpage"),null,null,!1)),i.on("projecttask:refresh",this.loadData),i.on("projecttask:unmountupdatestatus",this.unmountUpdateStatusHandle),i.on("projecttask:unmountadd",this.unmountCreateTaskHandle),i.on("projecttask:unmountedit",this.unmountEditTaskHandle),i.on("projecttask:expand",this.expandHandler),i.on("projectiteration:edit",this.openEditIterationPopupHandle),i.on("projectiteration:unmountadd",this.unmountIterationAddHandle),i.on("projectiteration:unmountedit",this.unmountIterationEditHandle)},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null),e.createElement("th",null,e.createElement("a",{className:"sortable",href:"javascript:(void(0))","data-sortby":"name","data-nameorigin":o.t("name")},o.t("name"))),e.createElement("th",null,o.t("tag")),e.createElement("th",{className:"tcw100"},o.t("code")),e.createElement("th",{className:"tcw50"}),e.createElement("th",{className:"tcw120"},o.t("iteration")),e.createElement("th",{className:"tcw100"},o.t("type")),e.createElement("th",null,o.t("assignees")," "),e.createElement("th",{width:"60"},e.createElement("a",{href:"javascript:void(0)",className:"sortable","data-sortby":"date_created"},o.t("date"))),e.createElement("th",{className:"tcw120"},o.t("status")),e.createElement("th",{className:"col_action_3button"}))},render:function(){var t=this,n="";return this.filters.assignee_type?n="assignee_type:"+$.trim(this.filters.assignee_type):this.filters.assignee_user&&(n="assignee_user:"+$.trim(this.filters.assignee_user)),
e.createElement("div",{id:"task-wrapper"},e.createElement("div",{id:"page"},e.createElement(S,{key:"heading-"+this.props.project.id,rootlink:"#project",roottext:s.t("heading"),link:"#project/detail/"+this.props.project.id,text:this.props.project.name,lang:o,total:this.state.total,limit:this.state.limit,currentpage:this.state.currentpage,hidekeywordsearch:!0,hidefiltertoggle:!0,querytaghide:["id","taskid"],filterbaseurl:"#project/detail/"+this.props.project.id},e.createElement(I,null),t.canAddTask()?e.createElement("a",{href:"#",className:"mytip_onpage mainbutton",onClick:t.openCreateTaskPopupHandle,title:o.t("add_task")},e.createElement("i",{className:"tc-plus-circle icon"}),e.createElement("span",{className:"hideonsmall"},o.t("add_task"))):"",e.createElement("a",{href:"#project/wiki/id/"+this.props.project.id,className:"mytip hideonsmall",title:s.t("wiki")},e.createElement("i",{className:"tc-book icon"})," ",e.createElement("span",{className:"hideonsmall"},"Wiki")),e.createElement(g,{key:moment.unix()+"-"+r.generateRandomNumber(100,"number"),ref:"iterationHeading",total:t.state.total,canAddIteration:this.canManage(),openCreateIterationPopupHandle:this.openCreateIterationPopupHandle,project_id:t.props.project.id,project:t.props.project,doFilter:t.doFilter,removeFilter:t.removeFilter,onChange:t.iterationFilter}),e.createElement("a",{href:"#project/kanban/"+this.props.project.id,className:"mytip",title:s.t("toggle_kanban")},e.createElement("i",{className:"tc-three-col icon"})," ",e.createElement("span",{className:"hideonsmall"},"Kanban"))),e.createElement(O,{ref:"sidebar",force_show:!0,keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("div",{className:"field"},e.createElement("label",null,o.t("assign_for"),":"),e.createElement(D,{ref:"filterassigneetype",value:n,allowedSearch:!0,searchPlaceHolder:o.t("search_assginee_placeholder")})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("priority"),":"),e.createElement(T,{ref:"filterpriority",value:this.filters.priority})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("type"),":"),e.createElement(x,{ref:"filtertype",value:this.filters.type})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("status"),":"),e.createElement(C,{ref:"filterstatus",value:this.filters.status}))),e.createElement("div",{id:"task-content"},e.createElement("div",{className:"ui segment tctabledata tc-scrolled"},t.init?e.createElement("div",{className:"ui active loader",ref:"loader",style:{marginTop:50,paddingTop:50}}):e.createElement("table",{className:r.tableclass(),ref:"projecttasktable"},e.createElement("thead",null,r.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,t.state.total>0?t.state.items.map(function(n,a){return r.isExpandId(n.id)?e.createElement(N,{key:n.id+n.date_modified,openPopupEditTaskHandle:t.openEditTaskPopupHandle,openPopupUpdateStatusHanle:t.openPopupUpdateStatusHandle,data:n,project:t.props.project,can_add_story:t.state.can_add_story,can_edit_story:t.state.can_edit_story}):e.createElement(b,{type:t.props.type,key:n.id+"-"+n.date_modified,init:t.initExpand,loadDetail:t.loadDetail,openPopupEditTaskHandle:t.openEditTaskPopupHandle,openPopupUpdateStatus:t.openPopupUpdateStatusHandle,searchHandler:t.triggerSearchHandler,data:n,doFilter:t.doFilter,removeFilter:t.removeFilter,project:t.props.project,can_add_story:t.state.can_add_story,can_edit_story:t.state.can_edit_story})}):e.createElement("tr",null,e.createElement("td",{colSpan:"14"},e.createElement("div",{className:"empty-listing"},e.createElement("i",{className:"tc-list"}),e.createElement("br",null),o.t("error_not_found")))))))),e.createElement("div",{ref:"createtask"}),e.createElement("div",{ref:"edittask"}),e.createElement("div",{ref:"updatestatus"}),e.createElement("div",{ref:"createiteration"}),e.createElement("div",{ref:"edititeration"}),!t.init&&this.props.project.count_bug>0?e.createElement("div",{style:{textAlign:"right",padding:"0 10px 10px 10px"}},e.createElement("div",{className:"ui divider"}),e.createElement("a",{href:"#project/bug/_s/id/"+this.props.project.id},e.createElement("small",null,this.props.project.count_bug," Bug"))):""))}});return P}),define("components/project/detail",["react","backbone","eventbus","pref","helper","querystring","basecontroller","language/project","components/projecttask/list"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ProjectDetailComponent",isload:!0,taskListHolder:null,issueListHolder:null,init:function(e){var t=r.get("tab")||"storylist";this.loadTabContent(t,e)},activeSection:function(t){var n=$(e.findDOMNode(this.refs.storylist)),a=$(e.findDOMNode(this.refs.storybutton));"storylist"==t&&(n.show(),a.removeClass("basic"))},loadTabContent:function(t,n){var a=this;switch(this.activeSection(t),t){case"storylist":null==a.taskListHolder&&e.render(e.createElement(l,{key:"task-"+n.id,project:n}),e.findDOMNode(a.refs.storylist),function(){a.taskListHolder=this})}},changeSectionHandler:function(e,n){n.preventDefault();var a=this,i=a.props.data;this.loadTabContent(e,i),"storylist"!=e?t.history.navigate("project/detail/id/"+i.id+"/tab/"+e):t.history.navigate("project/detail/"+i.id)},componentDidMount:function(){var e=this,t=e.props.data;e.init(t),n.trigger("pageheader:toggleback","#project")},render:function(){var t=this;return t.props.data,e.createElement("div",{className:"ui segments"},e.createElement("div",{className:"",ref:"storylist","data-tab":"storylist"}))}});return c}),define("components/project/edit",["react","backbone","pref","helper","eventbus","language/project","language/default","components/semantic-datepicker","components/colorpicker","components/employeepicker","components/heading","components/confirm","components/select","components/form/singledate","models/project"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"ProjectAddComponent",formError:{name:["error_name_required"],date_started:["error_start_date_invalid"],date_completed_plan:["error_complete_date_invalid","error_date_invalid"],status:["error_status_invalid"],project_type:["error_type_invalid"],scrum_master:["error_scrum_master_required","error_project_manager_required"]},save:function(){var i=this,o=$(".ui.form",this.getDOMNode());o.addClass("loading");var s={company_id:n.get("cid"),creator_id:n.get("uid"),name:$('[name="name"]',o).val(),description:$('[name="description"]',o).val(),color:$('[name="color"]',o).val().replace("#",""),date_started:this.refs.date_started.getValue(),date_completed_plan:this.refs.date_completed_plan.getValue(),story_prefix:$('[name="story_prefix"]',o).val(),status:i.refs.status.val(),is_scrum:0,development_team_add_story:$(e.findDOMNode(i.refs.development_team_add_story)).checkbox("is checked")?1:0,scrum_master_add_story:$(e.findDOMNode(i.refs.scrum_master_add_story)).checkbox("is checked")?1:0,development_team:i.refs.development_team.getSelectedUserIdList(),scrum_master:i.refs.scrum_master.getSelectedUserIdList()};new h({id:i.props.data.id}).save(s,{success:function(e){a.showSuccess(r.t("success_edit")),t.history.navigate("project",{trigger:!0})},error:function(e,t){a.notifyErrorAndForm(t,r,"error_edit",o,i.formError)},complete:function(){o.removeClass("loading")}})},remove:function(){var n=this;$(e.findDOMNode(this.refs.delete)).popup("hide"),$(e.findDOMNode(this.refs.form)).addClass("loading"),new h({id:this.props.data.id}).destroy({success:function(){a.showSuccess(r.t("success_delete")),t.history.navigate("project",{trigger:!0})},error:function(){a.showError(r.t("error_delete"))},complete:function(){$(e.findDOMNode(n.refs.form)).removeClass("loading")}})},initCheckbox:function(){var t=this,n=t.props.data,a=n.role_permission;n.setting,$(e.findDOMNode(t)).find(".ui.checkbox").each(function(e,t){$(t).checkbox({onChange:function(){var e=$(t).attr("data-checked");$(t).checkbox("is unchecked")&&(e=$(t).attr("data-unchecked")),"undefined"!=typeof e&&$(t).find("label").text(e)}})}),1==a.development_team_add_story&&$(e.findDOMNode(t.refs.development_team_add_story)).checkbox("set checked"),1==a.scrum_master_add_story&&$(e.findDOMNode(t.refs.scrum_master_add_story)).checkbox("set checked")},componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidMount:function(){var t=this;$('[name="name"]').focus(),t.initCheckbox(),$(e.findDOMNode(this.refs.delete)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(u,{message:r.t("cancel_confirm")})),onShow:function(){$(this).find(".confirm").fastClick(function(e){e.preventDefault(),t.remove()}),$(this).find(".cancel").fastClick(function(n){n.preventDefault(),$(e.findDOMNode(t.refs.delete)).popup("hide")})}}),$(".ui.form",this.getDOMNode()).form({fields:{name:{identifier:"name",rules:[{type:"empty",prompt:r.t("error_name_required")}]},date_started:{identifier:"date_started"},date_completed_plan:{identifier:"date_completed_plan"},status:{identifier:"status"},project_type:{identifier:"project_type"},scrum_master:{identifier:"scrum_master"}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t.save()}})},render:function(){var t=this,n=t.props.data;return e.createElement("div",{className:"ui segments"},e.createElement(d,{rootlink:"#project",roottext:r.t("heading"),link:"#project/detail/"+n.id,text:n.name,subtext:r.t("edit")}),e.createElement("form",{className:"ui segment form",ref:"form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("h3",null,r.t("project_info_title")),e.createElement("div",null,r.t("project_info_content"))),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight required"},e.createElement("label",null,r.t("name")),e.createElement("input",{name:"name",defaultValue:n.name})),e.createElement("div",{className:"field wide eight"},e.createElement("label",null,r.t("story_prefix")," ",e.createElement("i",{style:{fontWeight:"normal"}},"(",r.t("story_prefix_help"),")")),e.createElement("input",{name:"story_prefix",ref:"story_prefix",defaultValue:n.story_prefix})),e.createElement("div",{className:"field wide four",style:{display:"none"}},e.createElement("label",null,r.t("color")),e.createElement("div",{className:"ui input"},e.createElement(l,{name:"color",value:"#"+n.color})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,r.t("description")),e.createElement("textarea",{name:"description",rows:"3",defaultValue:n.description}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide six"},e.createElement("label",null,r.t("date_started")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(p,{ref:"date_started",key:"started-"+n.id,defaultValue:n.date_started,returnTimestamp:!0}))),e.createElement("div",{className:"field wide six"},e.createElement("label",null,r.t("date_completed_plan")),e.createElement("div",{id:"daterange-wrapper",style:{verticalAlign:"middle"},className:"item"},e.createElement(p,{ref:"date_completed_plan",key:"completed-"+n.id,defaultValue:n.date_completed_plan,returnTimestamp:!0}))),e.createElement("div",{className:"field wide four"},e.createElement("label",null,r.t("status")),e.createElement(m,{items:(new h).getStatusList(),className:"fluid",ref:"status",value:this.props.data.status}))),e.createElement("div",{className:"fields"}))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four hideonsmall"},e.createElement("h3",null,r.t("division_info_title")),e.createElement("div",null,r.t("division_info_content"))),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide twelve"},e.createElement("label",{ref:"memberLabel"},r.t("member")),e.createElement(c,{ref:"development_team",inputname:"development_team",defaultvalue:n.development_team})),e.createElement("div",{className:"field wide four"},e.createElement("label",null," "),e.createElement("div",{className:"ui toggle checkbox",ref:"development_team_add_story","data-checked":r.t("can_add_task"),"data-unchecked":r.t("not_add_task")},e.createElement("input",{type:"checkbox",name:"development_team_add_story"}),e.createElement("label",null,r.t("can_add_task"))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide twelve"},e.createElement("label",{ref:"projectmanagerLabel"},r.t("project_manager")),e.createElement(c,{ref:"scrum_master",inputname:"scrum_master",defaultvalue:n.scrum_master}),e.createElement("small",null,r.t("warning_choose_project_manager"))),e.createElement("div",{className:"field wide four"},e.createElement("label",null," "),e.createElement("div",{className:"ui toggle checkbox",ref:"scrum_master_add_story","data-checked":r.t("can_add_task"),"data-unchecked":r.t("not_add_task")},e.createElement("input",{type:"checkbox",name:"scrum_master_add_story"}),e.createElement("label",null,r.t("can_add_task"))))))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide four"},e.createElement("h3",null,r.t("delete_info_title")),e.createElement("div",null,r.t("delete_info_content"))),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("a",{href:"javascript:void(0)",ref:"delete"},e.createElement("i",{className:"tc-trash"})," ",r.t("cancel_project")))))),e.createElement("div",{className:"ui divider hide"}),e.createElement("div",{className:"fields",style:{display:"none"}},e.createElement("div",{className:"field wide four"},e.createElement("h3",null,r.t("setting_info_title")),e.createElement("div",null,r.t("setting_info_content"))),e.createElement("div",{className:"field wide twelve"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"internalhidetabsummary"},e.createElement("input",{type:"checkbox",name:"internalhidetabsummary"}),e.createElement("label",null,r.t("internal_hide_tab_summary")))),e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"externalhidetabsummary"},e.createElement("input",{type:"checkbox",name:"externalhidetabsummary"}),e.createElement("label",null,r.t("external_hide_tab_summary"))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"internalhidetabtask"},e.createElement("input",{type:"checkbox",name:"internalhidetabtask"}),e.createElement("label",null,r.t("internal_hide_tab_task")))),e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"externalhidetabtask"},e.createElement("input",{type:"checkbox",name:"externalhidetabtask"}),e.createElement("label",null,r.t("external_hide_tab_task"))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"internalhidetabissue"},e.createElement("input",{type:"checkbox",name:"internalhidetabissue"}),e.createElement("label",null,r.t("internal_hide_tab_issue")))),e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"externalhidetabissue"},e.createElement("input",{type:"checkbox",name:"externalhidetabissue"}),e.createElement("label",null,r.t("external_hide_tab_issue"))))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"internalhidetabdocument"},e.createElement("input",{type:"checkbox",name:"internalhidetabdocument"}),e.createElement("label",null,r.t("internal_hide_tab_document")))),e.createElement("div",{className:"field wide eight"},e.createElement("div",{className:"ui toggle checkbox",ref:"externalhidetabdocument"},e.createElement("input",{type:"checkbox",name:"externalhidetabdocument"}),e.createElement("label",null,r.t("external_hide_tab_document"))))))),e.createElement("div",{className:"ui divider"}),e.createElement("div",null,e.createElement("div",{className:"pull-left"},e.createElement("p",null,"* : ",o.t("required"))),e.createElement("button",{className:"ui green button pull-right"},r.t("edit")),e.createElement("div",{style:{clear:"both"}}))))}});return f}),define("components/project/filter-status",["react","pref","helper","language/project","models/project"],function(e,t,n,a,i){var r=e.createClass({displayName:"FilterStatusComponent",getInitialState:function(){return{value:-1,items:[]}},onChangeProxy:function(){var t=$(e.findDOMNode(this)).val();this.props.onChange(t)},_loadData:function(){var e=this;e.setState({items:(new i).getStatusList()})},componentDidUpdate:function(){$(e.findDOMNode(this)).val(this.props.value)},componentDidMount:function(){this._loadData(),$(e.findDOMNode(this)).customSelect()},render:function(){return e.createElement("select",{className:"tiny",onChange:this.onChangeProxy},this.state.items.map(function(t,n){return e.createElement("option",{key:t.code,value:t.code},t.text)}))}});return r}),define("components/project/item",["react","backbone","pref","helper","eventbus","models/user","components/employee-avatar","components/datetime","language/project","language/default","models/project"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"ProjectComponent",getDefaultProps:function(){return{maxMembers:5}},getInitialState:function(){return{data:{},members:[],showAllMembers:!1}},loadData:function(){},doFilter:function(e,t){this.props.doFilter(e,t)},showEditActionSheet:function(e){e.preventDefault();var t={buttons:[{text:c.t("update"),href:"#project/edit/"+this.props.data.id}]};a.showActionSheet(t)},loadModel:function(e,t){var n=$.Deferred();return new e({id:t}).fetch({success:function(e,t){n.resolve(t)},error:function(){n.reject()}}),n.promise()},loadMembers:function(){var e=this;if(this.state.data.members.length>0){var t=[],n=0;$.each(this.state.data.members,function(a,i){$.when(e.loadModel(r,i)).done(function(e){e.id>0&&t.push(e)}).always(function(){++n>=e.state.data.members.length&&e.setState({members:t})})})}},toggleShowAllMembers:function(e){e.preventDefault(),this.setState({showAllMembers:!this.state.showAllMembers})},componentDidUpdate:function(){this.loadData()},componentWillMount:function(){this.setState({data:this.props.data})},componentWillUnmount:function(){},componentDidMount:function(){this.loadData(),this.loadMembers()},renderMobile:function(){var t=this,n=t.state.data,a=new d,i=(moment(moment.unix(n.date_started)),moment(moment.unix(n.date_modified)),a.getStatus(n.status));return e.createElement("tr",null,e.createElement("td",{colSpan:"10",className:"mitem"},e.createElement("div",{className:"mitemdotleft"},e.createElement("span",{className:"mitemdot mitemdot"+i.color})),e.createElement("div",{className:"mitemdotright"},(new d).canEditProject()?e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})):"",e.createElement("a",{className:"mitemheading",href:"#project/detail/"+n.id},n.name),e.createElement("div",{className:"mitemmeta clear"},n.count_story," ",l.t("count_story")))))},renderDesktop:function(){var t=this,n=t.state.data,i=new d,r=(moment(moment.unix(n.date_started)),moment(moment.unix(n.date_modified)),i.getStatus(n.status));return e.createElement("tr",null,e.createElement("td",{className:"right aligned"},this.props.ordering),e.createElement("td",null,e.createElement("a",{href:"#project/detail/"+n.id},n.name)),e.createElement("td",{className:"center aligned"},n.count_story),e.createElement("td",null,e.createElement("div",{ref:"employee",className:"ui horizontal list"},this.state.members.map(function(n,a){return!t.state.showAllMembers&&a>=t.props.maxMembers?null:e.createElement("div",{key:n.id,className:"item middle aligned",style:{margin:"0 0 0 2px"}},e.createElement(o,{id:n.id,user:n,onClick:t.doFilter.bind(t,"user_id",n.id),className:"ui avatar image",cssStyles:{display:"inline-block"}}))}),!this.state.showAllMembers&&this.state.members.length>this.props.maxMembers?e.createElement("div",{className:"item middle aligned",style:{margin:"0 0 0 2px"}},e.createElement("a",{className:"ui mini circular basic label",onClick:this.toggleShowAllMembers},"+"+(this.state.members.length-this.props.maxMembers))):null)),e.createElement("td",null,e.createElement(s,{ts:n.date_started,timeformat:"",format:"DD/MM/YYYY"})),e.createElement("td",null,e.createElement("span",{className:"ui small simple label "+r.color},r.text)),e.createElement("td",{className:"cell_action"},e.createElement("a",{href:"#project/wiki/id/"+n.id,title:l.t("wiki"),className:a.rowButtonClass()},e.createElement("i",{className:"icon tc-book"})),e.createElement("a",{href:"#project/detail/"+n.id,className:a.rowButtonClass()},e.createElement("i",{className:"icon tc-info"})),(new d).canEditProject()?e.createElement("a",{href:"#project/edit/"+n.id,className:a.rowButtonClass(),title:c.t("edittitle"),ref:"btn_edit"},e.createElement("i",{className:"icon tc-pencil"})):""))},render:function(){return a.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return u}),define("components/project/popup-reportprojecttask",["react","pref","eventbus","helper","language/project","language/default","components/datetime"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"EditTaskComponent",getInitialState:function(){return{currentproject:{id:0,tasks:[],count_task:0}}},showPopup:function(){var t=this;$(e.findDOMNode(t.refs.modal)).modal({context:t.getDOMNode(),closable:!0,autofocus:!1,onHidden:function(){n.trigger("reportpopup:unmount")}}).modal("show")},componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidMount:function(){var e=this;e.showPopup(),this.setState({currentproject:this.props.project})},render:function(){var t=this;return e.createElement("div",null,e.createElement("div",{className:"ui small modal reportprojectpopup",ref:"modal"},t.state.currentproject.id>0?e.createElement("div",{className:"projectreporttasklist"},e.createElement("table",{className:"ui mini table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{className:"nocolor",href:"#project/detail/id/"+t.state.currentproject.id+"/assignee_type/me"},e.createElement("strong",null,t.state.currentproject.name," (",t.state.currentproject.count_task,")"))," ",e.createElement("a",{className:"more nocolor",href:"#project/detail/id/"+t.state.currentproject.id},i.t("all"))))),e.createElement("tbody",null,t.state.currentproject.count_task>0?t.state.currentproject.tasks.map(function(n,a){return e.createElement("tr",{key:n.id},e.createElement("td",null,e.createElement("a",{className:"nocolor",href:"#project/detail/_s/id/"+t.state.currentproject.id+"/taskid/"+n.id+"/keyword/"+n.id},n.name)," (",e.createElement("em",null,e.createElement(o,{ts:n.date_started,timeformat:"",format:"DD/MM/YYYY"})),")"))}):e.createElement("tr",{className:"center aligned"},e.createElement("td",null,e.createElement("i",{className:"tc-info"})," ",i.t("all_task_finished")))))):""))}});return s}),define("components/project/report",["react","backbone","pref","helper","eventbus","components/employee-avatar","components/project/popup-reportprojecttask","language/project","models/project"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"CustomerComponent",getInitialState:function(){return{project:{total:0,items:[]},uncomplete_task:{total:0,items:[]},expired_task:{total:0,items:[]},total:0,tasknotcompletecount:0,taskexpiredcount:0,items:[],currentproject:{id:0,name:"",tasks:[]}}},loadData:function(){var e=this;(new l).getReport({company_id:n.get("cid"),success:function(t){e.setState(t)}})},openReportTaskHandler:function(t,n){var a=n.currentTarget,i=$(a).parent().parent().parent();i.attr("style","display:none!important"),e.render(e.createElement(o,{project:t}),e.findDOMNode(this.refs.popupwrapper),function(){setTimeout(function(){i.attr("style","")},1e3)})},unmountReportTaskHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.popupwrapper))},componentDidUpdate:function(){$(e.findDOMNode(this.refs.projectlist)).niceScroll({autohidemode:!0,cursoropacitymax:.5})},componentWillMount:function(){},componentWillUnmount:function(){i.off("reportpopup:unmount",this.unmountReportTaskHandler)},componentDidMount:function(){this.loadData(),$(e.findDOMNode(this.refs.projectlist)).niceScroll({autohidemode:!0,cursoropacitymax:.5}),i.on("reportpopup:unmount",this.unmountReportTaskHandler)},render:function(){var t=this;return e.createElement("div",{id:"projectreportwrapper",className:"ui right floated segment",style:{marginTop:10}},e.createElement("div",{id:"projectreport"},e.createElement("div",{className:"projectreport-header",ref:"projectreportheader"},e.createElement("table",{className:"ui very basic table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,e.createElement("i",{className:"tc-briefcase"})," ",e.createElement("br",null),e.createElement("span",{ref:"projectworkingcount"},this.state.project.total)," ",s.t("report_project_working"),this.state.project.total>0?e.createElement("div",{className:"ui projectreport-popup bottom center popup",ref:"projectreportprojectlist"},e.createElement("div",{className:"ui segment",ref:"projectlist"},e.createElement("div",{className:"ui relaxed divided list tcw100"},t.state.project.items.map(function(n,a){return e.createElement("div",{className:"item",onClick:t.openReportTaskHandler.bind(t,n),title:n.name,key:"project-"+n.id},e.createElement("div",{className:"left floated content projectreportitemname"},n.name))})))):""),e.createElement("th",null,e.createElement("i",{className:"tc-list"})," ",e.createElement("br",null),e.createElement("span",{ref:"tasknotcompletecount"},this.state.uncomplete_task.total)," ",s.t("report_task_not_complete"),this.state.uncomplete_task.total>0?e.createElement("div",{className:"ui projectreport-popup bottom center popup",ref:"projectreportprojectlist"},e.createElement("div",{className:"ui segment",ref:"projectlist"},e.createElement("div",{className:"ui relaxed divided list tcw100"},t.state.uncomplete_task.items.map(function(n,a){return e.createElement("div",{className:"item",onClick:t.openReportTaskHandler.bind(t,n),title:n.name,key:"project-"+n.id},e.createElement("div",{className:"left floated content projectreportitemname"},n.name),e.createElement("div",{className:"right floated content"},"(",n.count_task,")"))})))):""),e.createElement("th",null,e.createElement("i",{className:"tc-list"})," ",e.createElement("br",null),e.createElement("span",{ref:"taskexpiredcount"},this.state.expired_task.total)," ",s.t("report_task_expired"),this.state.expired_task.total>0?e.createElement("div",{className:"ui projectreport-popup bottom center popup",ref:"projectreportprojectlist"},e.createElement("div",{className:"ui segment",ref:"projectlist"},e.createElement("div",{className:"ui relaxed divided list tcw100"},t.state.expired_task.items.map(function(n,a){return e.createElement("div",{className:"item",onClick:t.openReportTaskHandler.bind(t,n),title:n.name,key:"project-"+n.id},e.createElement("div",{className:"left floated content projectreportitemname"},n.name),e.createElement("div",{className:"right floated content"},"(",n.count_task_expired,")"))})))):"")))))),e.createElement("div",{ref:"popupwrapper"}))}});return c}),define("language/wiki",["baselanguage"],function(e){var t={vn:{heading:"Wiki - Tài liệu",heading_editor:"Trình soạn thảo",setting:"Cài đặt",editor:"Quản lý bài viết",zerodata_text:"Chưa có bài viết nào",zerodata_subtext_projectnotinit:"Dự án này chưa khởi tạo tính năng Wiki. Liên hệ quản lý dự án để khởi tạo.",init_button:"Khởi tạo",heading_init:"Khởi tạo Wiki",heading_init_project:"Khởi tạo Wiki",heading_editwiki:"Cập nhật Wiki",heading_editwiki_project:"Cập nhật Wiki",name:"Tên",status:"Trạng thái",error_name_require:"Bạn chưa nhập tên",error_status_required:"Bạn chưa chọn trạng thái",error_status_invalid:"Trạng thái không hợp lệ",error_project_wiki_existed:"Dự án đã khởi tạo wiki từ trước",init_success:"Đã khởi tạo thành công, đang đến trang soạn nội dung...",editwiki_success:"Thông tin đã được lưu thành công.",writer:"Ban biên tập / Viết bài",writer_help:"Ban biên tập / Người viết bài có thể thay đổi danh mục và bài viết.",error_not_found:"Không tìm thấy Wiki của dự án"},en:{heading:"Wiki - Tài liệu",heading_editor:"Trình soạn thảo",setting:"Cài đặt",editor:"Quản lý bài viết",zerodata_text:"Chưa có bài viết nào",zerodata_subtext_projectnotinit:"Dự án này chưa khởi tạo tính năng Wiki. Liên hệ quản lý dự án để khởi tạo.",init_button:"Khởi tạo",heading_init:"Khởi tạo Wiki",heading_init_project:"Khởi tạo Wiki",heading_editwiki:"Cập nhật Wiki",heading_editwiki_project:"Cập nhật Wiki",name:"Tên",status:"Trạng thái",error_name_require:"Bạn chưa nhập tên",error_status_required:"Bạn chưa chọn trạng thái",error_status_invalid:"Trạng thái không hợp lệ",error_project_wiki_existed:"Dự án đã khởi tạo wiki từ trước",init_success:"Đã khởi tạo thành công, đang đến trang soạn nội dung...",editwiki_success:"Thông tin đã được lưu thành công.",writer:"Ban biên tập / Viết bài",writer_help:"Ban biên tập / Người viết bài có thể thay đổi danh mục và bài viết.",error_not_found:"Không tìm thấy Wiki của dự án"}};return new e({lang:t})}),define("models/wiki",["basemodel","language/default"],function(e,t){var n=e.extend({urlRoot:"v1/wikis",STATUS_ENABLE:1,STATUS_DISABLE:3,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:t.t("STATUS_ENABLE")},{code:this.STATUS_DISABLE,text:t.t("STATUS_DISABLE")}]},getStatus:function(e){e=parseInt(e);var n={code:e,text:"",color:""};switch(e){case this.STATUS_ENABLE:n.text=t.t("STATUS_ENABLE");break;case this.STATUS_DISABLE:n.text=t.t("STATUS_DISABLE")}return n}});return n}),define("components/wiki/add",["react","setting","backbone","eventbus","pref","helper","language/default","language/wiki","models/project","models/wiki","components/employeepicker","components/select"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"WikiAddComponent",getDefautlProps:function(){return{project:{id:0,name:"",wiki_id:0}}},savedwiki:null,_save:function(){var t=this,n=$(".ui.form",e.findDOMNode(this));n.addClass("loading"),(new c).save({company_id:i.get("cid"),creator_id:i.get("uid"),project_id:this.props.project.id,name:$('[name="name"]',n).val(),writer_id_list:this.refs.writers.getSelectedUserIdList(),status:(new c).STATUS_ENABLE},{success:function(n,a){t.savedwiki=a,r.showSuccess(s.t("init_success")),$(e.findDOMNode(t.refs.modaladd)).modal("hide")},error:function(e,t){r.notifyError(t,s,"error")},complete:function(){n.removeClass("loading")}})},showPopup:function(){var t=this;$(e.findDOMNode(this.refs.modaladd)).modal({context:this.getDOMNode(),closable:!1,onVisible:function(){setTimeout(function(){$(e.findDOMNode(t.refs.name)).focus()},200),$(e.findDOMNode(t.refs.checkbox)).checkbox()},onHidden:function(){a.trigger("wiki:unmountinitform",t.savedwiki)}}).modal("show")},componentDidMount:function(){$('[name="name"]').focus();var t=this;$(".ui.form",e.findDOMNode(this)).form({fields:{name:{identifier:"name",rules:[{type:"empty",prompt:s.t("error_name_require")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),
!1},onSuccess:function(e,n){e.preventDefault(),t._save()}}),this.showPopup()},render:function(){var t=this.props.project.development_team.concat(this.props.project.scrum_master),n=this;return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modaladd"},e.createElement("div",{className:"header"},this.props.project.id>0?e.createElement("span",null,s.t("heading_init_project")):e.createElement("span",null,s.t("heading_init"))),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"sixteen wide field"},e.createElement("label",null,s.t("name")),e.createElement("input",{ref:"name",name:"name",defaultValue:this.props.project.name}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,s.t("writer")),e.createElement(d,{ref:"writers",defaultvalue:n.props.project.scrum_master,allowuseridlist:t,inputname:"writers"}),e.createElement("small",{style:{color:"#999"}},s.t("writer_help")))))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui basic noborder cancel close button"},o.t("close")),e.createElement("a",{className:"ui teal button",href:"javascript: void(0)",ref:"submit",onClick:this._save},s.t("init_button")))))}});return m}),define("components/wiki/editwiki",["react","setting","backbone","eventbus","pref","helper","language/default","language/wiki","models/project","models/wiki","components/employeepicker","components/select"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"WikiEditComponent",getDefautlProps:function(){return{project:{id:0,name:"",wiki_id:0},wiki:{id:0,name:"",status:0}}},savedwiki:null,_save:function(){var t=this,n=$(".ui.form",e.findDOMNode(this));n.addClass("loading"),new c(this.props.wiki).save({company_id:i.get("cid"),creator_id:i.get("uid"),project_id:this.props.project.id,name:$('[name="name"]',n).val(),writer_id_list:this.refs.writers.getSelectedUserIdList(),status:(new c).STATUS_ENABLE},{success:function(n,a){t.savedwiki=a,r.showSuccess(s.t("editwiki_success")),$(e.findDOMNode(t.refs.modaledit)).modal("hide")},error:function(e,t){r.notifyError(t,s,"error")},complete:function(){n.removeClass("loading")}})},showPopup:function(){var t=this;$(e.findDOMNode(this.refs.modaledit)).modal({context:this.getDOMNode(),closable:!1,onVisible:function(){setTimeout(function(){$(e.findDOMNode(t.refs.name)).focus()},200),$(e.findDOMNode(t.refs.checkbox)).checkbox()},onHidden:function(){a.trigger("wiki:unmounteditform",t.savedwiki)}}).modal("show")},componentWillMount:function(){this.savedwiki=this.props.wiki},componentDidMount:function(){$('[name="name"]').focus();var t=this;$(".ui.form",e.findDOMNode(this)).form({fields:{name:{identifier:"name",rules:[{type:"empty",prompt:s.t("error_name_require")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t._save()}}),this.showPopup()},render:function(){var t=this.props.project.development_team.concat(this.props.project.scrum_master),n=this;return e.createElement("div",null,e.createElement("div",{className:"ui tiny modal",ref:"modaledit"},e.createElement("div",{className:"header"},this.props.project.id>0?e.createElement("span",null,s.t("heading_editwiki_project")):e.createElement("span",null,s.t("heading_editwiki"))),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"sixteen field wide required"},e.createElement("label",null,s.t("name")),e.createElement("input",{ref:"name",name:"name",defaultValue:this.props.wiki.name}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide sixteen"},e.createElement("label",null,s.t("writer")),e.createElement(d,{ref:"writers",defaultvalue:n.props.wiki.writer_id_list,allowuseridlist:t,inputname:"writers"}),e.createElement("small",{style:{color:"#999"}},s.t("writer_help")))))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui noborder basic cancel close button"},o.t("close")),e.createElement("a",{className:"ui teal button",href:"javascript: void(0)",ref:"submit",onClick:this._save},o.t("update")))))}});return m}),define("language/wikientry",["baselanguage"],function(e){var t={vn:{error_add:"Có lỗi khi thêm thông tin.",error_edit:"Có lỗi khi cập nhật thông tin.",error_delete:"Có lỗi khi xóa thông tin.",error_not_permission:"Bạn không có quyền thực hiện tính năng này.",error_wiki_notfound:"Không tìm thấy wiki.",error_name_required:"Tiêu đề là bắt buộc.",error_status_required:"Trạng thái là bắt buộc.",error_status_invalid:"Trạng thái không hợp lệ.",error_contenttype_required:"Content Type là bắt buộc.",error_contenttype_invalid:"Content Type không hợp lệ.",error_parent_invalid:"Thư mục cha không hợp lệ.",error_admin_permission:"Bạn không có quyền thực hiện thao tác này.",error_writer_permission:"Bạn không có quyền viết bài.",error_type_invalid:"Type không hợp lệ.",error_folder_not_empty:"Thư mục cần xóa bắt buộc phải rỗng.",error_not_found:"Không tìm thấy nội dung cần tìm.",success_add:"Thông tin đã được thêm",success_edit:"Thông tin đã được lưu",add_sub_folder:"Thêm danh mục con",add_article:"Tạo bài viết",edit_entry:"Chỉnh sửa",update:"Lưu thông tin",delete_entry:"Xóa",error_not_empty_folder:"Không thể xóa vì danh mục này chưa rỗng (Hãy xóa các danh mục và bài viết bên trong trước khi xóa).",delete_folder_confirm:"Bạn có thật sự muốn xóa danh mục này?",delete_article_confirm:"Bạn có thật sự muốn xóa bài viết này?",add_folder_prompt:"Nhập tên thư mục muốn tạo: ",add_article_prompt:"Nhập tiêu đề bài viết: ",toc:"Mục lục",save_tree_title:"Lưu cấu trúc & đồng bộ",save_tree:"Lưu",add_folder:"Tạo danh mục",name_folder:"Tên thư mục",name_article:"Tiêu đề bài viết",status:"Trạng thái",content:"Nội dung bài viết",file_id_list:"File đính kèm",success_update_position:"Cập nhật thành công"},en:{error_add:"Có lỗi khi thêm thông tin.",error_edit:"Có lỗi khi cập nhật thông tin.",error_delete:"Có lỗi khi xóa thông tin.",error_not_permission:"Bạn không có quyền thực hiện tính năng này.",error_wiki_notfound:"Không tìm thấy wiki.",error_name_required:"Tiêu đề là bắt buộc.",error_status_required:"Trạng thái là bắt buộc.",error_status_invalid:"Trạng thái không hợp lệ.",error_contenttype_required:"Content Type là bắt buộc.",error_contenttype_invalid:"Content Type không hợp lệ.",error_parent_invalid:"Thư mục cha không hợp lệ.",error_admin_permission:"Bạn không có quyền thực hiện thao tác này.",error_writer_permission:"Bạn không có quyền viết bài.",error_type_invalid:"Type không hợp lệ.",error_folder_not_empty:"Thư mục cần xóa bắt buộc phải rỗng.",error_not_found:"Không tìm thấy nội dung cần tìm.",success_add:"Thông tin đã được thêm",success_edit:"Thông tin đã được lưu",add_sub_folder:"Thêm danh mục con",add_article:"Tạo bài viết",edit_entry:"Chỉnh sửa",update:"Lưu thông tin",delete_entry:"Xóa",error_not_empty_folder:"Không thể xóa vì danh mục này chưa rỗng (Hãy xóa các danh mục và bài viết bên trong trước khi xóa).",delete_folder_confirm:"Bạn có thật sự muốn xóa danh mục này?",delete_article_confirm:"Bạn có thật sự muốn xóa bài viết này?",add_folder_prompt:"Nhập tên thư mục muốn tạo: ",add_article_prompt:"Nhập tiêu đề bài viết: ",toc:"Mục lục",save_tree_title:"Lưu cấu trúc & đồng bộ",save_tree:"Lưu",add_folder:"Tạo danh mục",name_folder:"Tên thư mục",name_article:"Tiêu đề bài viết",status:"Trạng thái",content:"Nội dung bài viết",file_id_list:"File đính kèm",success_update_position:"Cập nhật thành công"}};return new e({lang:t})}),define("components/wiki/detail",["react","components/filestrip"],function(e,t){var n=e.createClass({displayName:"WikiDetailComponent",getDefautlProps:function(){return{data:{id:0,name:0,type:0}}},getInitialState:function(){return{}},componentDidMount:function(){},render:function(){return e.createElement("div",{className:"ui segments",style:{paddingTop:20},id:"wiki_entry"},e.createElement("h1",null,this.props.data.name),e.createElement("div",{id:"wiki_entry_content"},e.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.data.renderred_content}}),e.createElement("div",null,e.createElement(t,{files:this.props.data.files}))),e.createElement("div",{id:"wiki_entry_footer"}))}});return n}),define("components/wiki/toc/viewer",["react","setting","backbone","eventbus","querystring","pref","helper","language/default","language/wikientry"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"WikiTocViewerComponent",getDefautlProps:function(){return{id:0}},getFirstArticleId:function(){var e=JSON.parse(this.props.items),t=0;return $.each(e,function(e,n){"t"==n.id[0]&&0==t&&(t=parseInt(n.id.substring(1)))}),t},loadDefaultArticle:function(){var t=i.get("entry_id")||0;0==t&&(t=this.getFirstArticleId()),t>0&&$(e.findDOMNode(this.refs.jstree_toc)).jstree().select_node("t"+t)},initJsTree:function(){var t=this;$(e.findDOMNode(t.refs.jstree_toc)).jstree({core:{multiple:!1,data:this.props.items}}).bind("select_node.jstree",function(e,n){"t"==n.node.id[0]&&t.props.loadEntry(n.node.id.substring(1))}).bind("loaded.jstree",function(e,n){t.loadDefaultArticle()})},initTocBox:function(){var t=$(window).height()-150,n=$(e.findDOMNode(this)).parent().width();$(e.findDOMNode(this.refs.wikitocwrapper)).height(t+"px").width(n+"px").niceScroll({nativeparentscrolling:!1})},componentDidMount:function(){this.initTocBox(),this.initJsTree()},render:function(){return e.createElement("div",{style:{paddingLeft:"1em"},id:"wikitoc"},e.createElement("h3",{style:{margin:0,padding:"0 0 10px 0"}},l.t("toc")),e.createElement("div",{ref:"wikitocwrapper",id:"wikitocwrapper"},e.createElement("div",{ref:"jstree_toc",style:{paddingRight:30}})))}});return c}),define("models/wikientry",["basemodel","language/default"],function(e,t){var n=e.extend({urlRoot:"v1/wikientries",TYPE_FOLDER:1,TYPE_ARTICLE:3,STATUS_ENABLE:1,STATUS_DISABLE:3,CONTENTTYPE_TEXT:1,CONTENTTYPE_HTML:3,CONTENTTYPE_MARKDOWN:5,getStatusList:function(){return[{code:this.STATUS_ENABLE,text:t.t("STATUS_ENABLE")},{code:this.STATUS_DISABLE,text:t.t("STATUS_DISABLE")}]},getStatus:function(e){e=parseInt(e);var n={code:e,text:"",color:""};switch(e){case this.STATUS_ENABLE:n.text=t.t("STATUS_ENABLE");break;case this.STATUS_DISABLE:n.text=t.t("STATUS_DISABLE")}return n}});return n}),define("components/wiki/viewer",["react","setting","backbone","eventbus","pref","helper","language/default","language/wiki","language/wikientry","components/wiki/detail","components/wiki/toc/viewer","models/wikientry"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"WikiViewerComponent",getDefautlProps:function(){return{id:0}},loadEntry:function(t){var a=this;r.showLoader(),new u({id:t}).fetch({nocache:!0,success:function(t,i){var r="project/wiki/id/"+a.props.data.project_id+"/entry_id/"+i.id+"/"+i.slug;n.history.navigate(r,{trigger:!1}),e.render(e.createElement(c,{key:i.id,data:t.toJSON()}),e.findDOMNode(a.refs.wikidetail))},error:function(){r.showError(l.t("error_not_found"))},complete:function(){r.hideLoader()}})},setFullHeight:function(){r.isSmallScreen()||$(e.findDOMNode(this.refs.wikidetail)).css("min-height",$(window).height()-90)},componentDidMount:function(){this.setFullHeight()},render:function(){return e.createElement("div",{className:"ui grid two column"},e.createElement("div",{ref:"jstree",className:"ui four wide column wikitreeviewer"},e.createElement(d,{ref:"jstree_toc",items:this.props.data.fulltree_for_view,id:this.props.data.id,loadEntry:this.loadEntry})),e.createElement("div",{className:"ui twelve wide column",ref:"wikidetail",style:{borderLeft:"1px solid #eee"}}))}});return m}),define("components/project/wiki",["react","backbone","pref","querystring","eventbus","helper","language/default","language/project","language/wiki","models/project","models/wiki","collections/user","models/user","components/mixin/listsearch","components/wiki/add","components/wiki/editwiki","components/wiki/viewer","components/headingfull","components/filterbar","components/zerodata"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y){var E=e.createClass({displayName:"ProjectWikiComponent",mixins:[p],getDefaultProps:function(){return{project:{id:0,name:"",wiki_id:0}}},getInitialState:function(){return{is_writer:!1,wiki:{id:this.props.project.wiki_id,name:"",status:0}}},canManage:function(){return $.inArray(parseInt(n.get("uid")),this.props.project.scrum_master)>-1},initPopupHandler:function(t){t.preventDefault(),e.render(e.createElement(h,{project:this.props.project}),e.findDOMNode(this.refs.modalinit))},doEditHandler:function(t){t.preventDefault(),e.render(e.createElement(f,{project:this.props.project,wiki:this.state.wiki}),e.findDOMNode(this.refs.modaledit))},unmountInitFormHandler:function(n){n.id>0&&(this.setState({wiki:n}),t.history.navigate("project/wiki/section/editor/id/"+this.props.project.id,{trigger:!0})),e.unmountComponentAtNode(e.findDOMNode(this.refs.modalinit))},unmountEditFormHandler:function(t){this.setState({wiki:t}),e.unmountComponentAtNode(e.findDOMNode(this.refs.modaledit))},loadWiki:function(t){var a=this;r.showLoader(),new d({id:t}).fetch({success:function(t,i){e.render(e.createElement(g,{data:i}),e.findDOMNode(a.refs.wikicontainer));var r=!1;$.each(i.writer_id_list,function(e,t){t==n.get("uid")&&(r=!0)}),r?a.setState({is_writer:!0,wiki:i}):a.setState({wiki:i})},error:function(){r.showError(l.t("error_not_found"))},complete:function(){r.hideLoader()}})},componentWillUnmount:function(){i.off("wiki:unmountinitform",this.unmountInitFormHandler),i.off("wiki:unmounteditform",this.unmountEditFormHandler),this.state.wiki.id>0&&e.unmountComponentAtNode(e.findDOMNode(this.refs.wikicontainer))},componentWillMount:function(){},componentDidMount:function(){i.on("wiki:unmountinitform",this.unmountInitFormHandler),i.on("wiki:unmounteditform",this.unmountEditFormHandler),r.isSmallScreen()||(r.initMyTip($(e.findDOMNode(this)).find(".mytip")),r.initMyTip($(e.findDOMNode(this)).find(".mytip_onpage"),null,null,!1)),this.state.wiki.id>0&&this.loadWiki(this.state.wiki.id)},render:function(){var t=this;return e.createElement("div",null,e.createElement("div",{id:"page"},e.createElement(_,{rootlink:"#project",roottext:s.t("heading"),link:"#project/detail/"+this.props.project.id,text:this.props.project.name,subtext:l.t("heading"),filters:this.filters,lang:o,loadFilterQueryTagData:this.loadFilterQueryTagData,currentpage:this.state.currentpage,hidepagination:!0,hidekeywordsearch:!0,hidefiltertoggle:!0},this.canManage()||this.state.is_writer?e.createElement("a",{href:"#project/wiki/section/editor/id/"+this.props.project.id,className:"mytip",title:l.t("editor")},e.createElement("i",{className:"tc-compose icon"})," ",l.t("editor")):"",this.canManage()?e.createElement("a",{href:"#wiki/edit/"+this.state.wiki.id,onClick:this.doEditHandler,className:"mytip",title:l.t("setting")},e.createElement("i",{className:"tc-gear icon"})," ",l.t("setting")):""),this.state.wiki.id>0?e.createElement("div",{ref:"wikicontainer"}):e.createElement(y,{alreadyloaddata:!0,icon:"general",text:l.t("zerodata_text"),subtext:l.t("zerodata_subtext_projectnotinit"),buttontext:""},this.canManage()?e.createElement("a",{href:"#",className:"ui orange button",onClick:t.initPopupHandler},l.t("init_button")):"")),e.createElement("div",{ref:"modalinit"}),e.createElement("div",{ref:"modaledit"}))}});return E}),define("components/wiki/toc/editor",["react","setting","backbone","eventbus","pref","querystring","helper","language/default","language/wikientry","models/wiki","models/wikientry"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"WikiTocEditorComponent",getDefautlProps:function(){return{id:0,items:[],project:{id:0,scrum_master:[]},data:{id:0,writer_id_list:[]}}},tocIsInit:!1,helpContextMenu:function(t){var n=this,a={};return a="c"==t.id.charAt(0)?{addSubCategory:{label:l.t("add_sub_folder"),icon:"icon tc-folder",action:function(){n.createNewDirectory(t.id)}},addTopic:{label:l.t("add_article"),icon:"icon tc-plus",action:function(){n.createNewTopic(t.id,"last")}},editCategory:{label:l.t("edit_entry"),icon:"icon tc-pencil",action:function(){n.doEditEntry(t.id.substring(1))}},deleteCategory:{label:l.t("delete_entry"),icon:"icon tc-trash",separator_before:!0,action:function(){if(t.children.length>0)alert(l.t("error_not_empty_folder"));else{var a=confirm(l.t("delete_folder_confirm"));1==a&&($("li#"+t.id).addClass("jstree-loading"),new d({id:t.id.substring(1)}).destroy({success:function(a,i){$(e.findDOMNode(n.refs.jstree_toc)).jstree("delete_node","#"+t.id),$(e.findDOMNode(n.refs.savetree)).trigger("click")},error:function(e,n){$("li#"+t.id).removeClass("jstree-loading"),o.notifyError(n,l,"error")}}))}}}}:{addTopicBefore:{label:l.t("add_article"),icon:"icon tc-plus",action:function(){var a="last",i=$(e.findDOMNode(n.refs.jstree_toc)).jstree().get_node(t.parent);$.each(i.children,function(e,n){n==t.id&&(a=e)}),n.createNewTopic(t.parent,a)}},editTopic:{label:l.t("edit_entry"),icon:"icon tc-pencil",action:function(){n.doEditEntry(t.id.substring(1))}},deleteTopic:{label:l.t("delete_entry"),icon:"icon tc-trash",separator_before:!0,action:function(){var a=confirm(l.t("delete_article_confirm"));1==a&&($("li#"+t.id).addClass("jstree-loading"),new d({id:t.id.substring(1)}).destroy({success:function(a,i){$(e.findDOMNode(n.refs.jstree_toc)).jstree("delete_node","#"+t.id),$(e.findDOMNode(n.refs.savetree)).trigger("click")},error:function(e,n){$("li#"+t.id).removeClass("jstree-loading"),o.notifyError(n,l,"error")}}))}}}},createNewDirectory:function(t,n){var a=this,r=prompt(l.t("add_folder_prompt"),"");null!=r&&r.length>0&&(o.showLoader(),(new d).save({company_id:i.get("cid"),creator_id:i.get("uid"),wiki_id:this.props.id,name:r,parent_id:"#"==t?0:t.substring(1),type:(new d).TYPE_FOLDER,status:(new d).STATUS_ENABLE,content_type:(new d).CONTENTTYPE_TEXT,content:""},{success:function(n,i){o.showSuccess(l.t("success_add"));var r=$(e.findDOMNode(a.refs.jstree_toc));r.jstree().create_node(t,{id:"c"+i.id,text:i.name,icon:"jstree-folder"},"last",function(){$(e.findDOMNode(a.refs.savetree)).trigger("click"),r.jstree().deselect_all(),r.jstree().select_node("c"+i.id)})},error:function(e,t){o.notifyError(t,l,"error")},complete:function(){o.hideLoader()}}))},createNewTopic:function(t,n,a){var r=this,s=prompt(l.t("add_article_prompt"),"");if(null!=s&&s.length>0){var c="",u="";if("last"!=n){var m=$(e.findDOMNode(r.refs.jstree_toc)).jstree().get_node(t);n>0&&(c=m.children[n-1].substring(1)),u=m.children[n].substring(1)}o.showLoader(),(new d).save({company_id:i.get("cid"),creator_id:i.get("uid"),wiki_id:this.props.id,name:s,type:(new d).TYPE_ARTICLE,status:(new d).STATUS_DISABLE,parent_id:"#"==t?0:t.substring(1),before_id:c,after_id:u,content_type:(new d).CONTENTTYPE_HTML,content:""},{success:function(a,i){o.showSuccess(l.t("success_add"));var s=$(e.findDOMNode(r.refs.jstree_toc));s.jstree().create_node(t,{id:"t"+i.id,text:"[Disabled] "+i.name,icon:"jstree-file"},n,function(){$(e.findDOMNode(r.refs.savetree)).trigger("click"),s.jstree().deselect_all(),s.jstree().select_node("t"+i.id)})},error:function(e,t){o.notifyError(t,l,"error")},complete:function(){o.hideLoader()}})}},saveNodePosition:function(e,t,n,a){$("li#"+e).addClass("jstree-loading"),$.ajax({type:"POST",dataType:"json",data:{company_id:i.get("cid"),creator_id:i.get("uid"),parent_id:t,before_id:n,after_id:a},url:(new d).urlRoot+"/position/"+e.substring(1),error:function(e){o.notifyError(e,l,"error")},success:function(e){o.showSuccess(l.t("success_update_position"))},complete:function(){$("li#"+e).removeClass("jstree-loading")}})},initJsTree:function(){var t=this;$(e.findDOMNode(this.refs.jstree_toc)).jstree({core:{multiple:!1,data:{url:(new c).urlRoot+"/toceditor/"+this.props.id,data:function(e){return{id:e.id}}},check_callback:function(e,t,n,a,i){return"move_node"!==e||"t"!=n.id.charAt(0)}},state:{key:"wikitoceditor_id"},plugins:["contextmenu","dnd","state"],contextmenu:{items:this.helpContextMenu,show_at_node:!1,select_node:!1}}).bind("select_node.jstree",function(e,n){"c"==n.node.id.charAt(0)||"t"==n.node.id.charAt(0)&&t.doEditEntry(n.node.id.substring(1))}).bind("loaded.jstree",function(e,n){t.loadDefaultArticle()}),$(document).on("dnd_stop.vakata",function(n,a){for(var i=$(e.findDOMNode(t.refs.jstree_toc)),r=i.jstree("get_parent",a.data.obj),o=i.jstree("get_node",r),s=i.jstree("get_children_dom",o),l=a.data.obj.attr("id"),c=(s.length,""),d="",u=0;u<s.length;u++)$(s[u]).attr("id")==l&&(u>0&&(c=$(s[u-1]).attr("id")),u<s.length-1&&(d=$(s[u+1]).attr("id")));t.saveNodePosition(l,r,c,d)})},updateNodeText:function(t,n){$(e.findDOMNode(this.refs.jstree_toc)).jstree().rename_node(t,n)},loadDefaultArticle:function(){var t=r.get("entry_id")||0;t>0&&$(e.findDOMNode(this.refs.jstree_toc)).jstree().select_node("t"+t)},doEditEntry:function(e){this.props.doEditEntry(e)},initTocBox:function(){var t=$(window).height()-150,n=$(e.findDOMNode(this)).parent().width();$(e.findDOMNode(this.refs.wikitocwrapper)).height(t+"px").width(n+"px").niceScroll({nativeparentscrolling:!1})},componentDidMount:function(){this.initTocBox(),this.initJsTree()},render:function(){return e.createElement("div",{style:{padding:"1em"},id:"wikitoc"},e.createElement("h3",{style:{margin:0,padding:"0 0 10px 0"}},l.t("toc"),e.createElement("span",{className:"pull-right",style:{fontSize:12,marginRight:20}},e.createElement("a",{href:"javascript:void(0)",onClick:this.createNewDirectory.bind(this,"#")},l.t("add_folder"))," · ",e.createElement("a",{href:"javascript:void(0)",onClick:this.createNewTopic.bind(this,"#","last")},l.t("add_article"))),e.createElement("small",{style:{display:"none"}},e.createElement("button",{className:"ui mini button pull-right",ref:"savetree",title:l.t("save_tree_title")},l.t("save_tree")))),e.createElement("div",{id:"jstree_wrapper",ref:"wikitocwrapper",id:"wikitocwrapper"},e.createElement("div",{ref:"jstree_toc",style:{paddingRight:30}})))}});return u}),define("components/wiki/edit",["react","backbone","helper","pref","language/wikientry","language/default","models/file","models/wikientry","components/tinymce","components/heading","components/select-status","components/ajax-upload"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"WikiEditComponent",tinymceRandomIdentifier:0,getDefautlProps:function(){return{data:{id:0,name:0,type:0}}},getInitialState:function(){return{}},_save:function(){var t=$(".ui.form",this.getDOMNode());t.addClass("loading");var r=this,o="",l=this.props.file_id_list;this.props.data.type==(new s).TYPE_ARTICLE&&(o=tinyMCE.get("wikientry_content_"+this.tinymceRandomIdentifier).getContent(),l=this.refs.files.getFiles().map(function(e){return e.id})),new s({id:this.props.data.id}).save({company_id:a.get("cid"),creator_id:a.get("uid"),name:$('[name="name"]',t).val(),content:o,status:$(e.findDOMNode(this.refs.status)).dropdown("get value"),file_id_list:l},{success:function(e,t){n.showSuccess(i.t("success_edit"));var a="";a=t.type==(new s).TYPE_FOLDER?"c"+t.id:"t"+t.id,r.props.updateNodeText(a,(t.status==(new s).STATUS_DISABLE?"[Disabled] ":"")+t.name)},error:function(e,t){n.notifyError(t,i,"error")},complete:function(){t.removeClass("loading")}})},setFullHeight:function(){n.isSmallScreen()||$(e.findDOMNode(this.refs.wikieditor)).css("min-height",$(window).height()-110)},componentWillMount:function(){0==this.tinymceRandomIdentifier&&(this.tinymceRandomIdentifier=(new Date).getTime())},componentDidMount:function(){this.setFullHeight()},render:function(){var t=this,n={menubar:!0,autoresize_min_height:360,toolbar:"formatselect | bold italic underline | alignleft aligncenter alignright | bullist numlist | indent outdent | link unlink  teamcropfilepicker"},r=new o;return e.createElement("div",{className:"ui segments"},e.createElement("div",{className:"ui segment"},e.createElement("div",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{ref:"wikieditor",className:"field twelve wide",style:{paddingTop:20,paddingRight:20,borderRight:"1px solid #eee"}},e.createElement("div",{className:"fields"},e.createElement("div",{className:"required twelve wide field"},e.createElement("label",null,this.props.data.type==(new s).TYPE_FOLDER?i.t("name_folder"):i.t("name_article")),e.createElement("input",{name:"name",type:"text",defaultValue:t.props.data.name})),e.createElement("div",{className:"four field"},e.createElement("label",null,i.t("status")),e.createElement(d,{key:a.get("uid"),ref:"status",data:(new s).getStatusList(),value:t.props.data.status}))),this.props.data.type==(new s).TYPE_ARTICLE?[e.createElement("div",{key:"content",className:"fields",style:{paddingTop:15}},e.createElement("div",{className:"sixteen wide field"},e.createElement("label",null,i.t("content")),e.createElement(l,{name:"wikientry_content",ref:"wikientry_content",id:"wikientry_content_"+this.tinymceRandomIdentifier,content:this.props.data.content,autoLoad:!0,config:n}))),e.createElement("div",{key:"file",className:"fields",style:{paddingTop:15}},e.createElement("div",{className:"sixteen wide field"},e.createElement("label",null,i.t("file_id_list")),e.createElement(u,{className:"tiny",ref:"files",id:"wiki-edit",objectSource:r.OBJECTTYPE_NEWS,files:this.props.data.files,fileSizeLimit:"10MB"})))]:null),e.createElement("div",{className:"field four wide",style:{padding:20}},e.createElement("button",{className:"ui teal fluid button",onClick:this._save},i.t("update")))))))}});return m}),define("components/wiki/editor",["react","setting","backbone","eventbus","pref","helper","language/default","language/wiki","language/wikientry","components/wiki/toc/editor","components/wiki/edit","models/wiki","models/wikientry"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"WikiEditorComponent",editingEntryId:0,getDefautlProps:function(){return{project:{id:0,scrum_master:[]},data:{id:0,writer_id_list:[]}}},updateNodeText:function(e,t){this.refs.jstree_toc.updateNodeText(e,t)},doEditEntry:function(t){var a=this;r.showLoader(),new m({id:t}).fetch({nocache:!0,success:function(t,i){var r="project/wiki/section/editor/id/"+a.props.data.project_id+"/entry_id/"+i.id+"/"+i.slug;n.history.navigate(r,{trigger:!1}),e.render(e.createElement(d,{updateNodeText:a.updateNodeText,key:i.id,data:t.toJSON()}),e.findDOMNode(a.refs.wikiedit))},error:function(){r.showError(l.t("error_not_found"))},complete:function(){r.hideLoader()}})},componentDidMount:function(){},render:function(){return e.createElement("div",{className:"ui grid two column"},e.createElement("div",{className:"ui four wide column wikitreeviewer"},e.createElement(c,{ref:"jstree_toc",project:this.props.project,wiki:this.props.data,id:this.props.data.id,doEditEntry:this.doEditEntry})),e.createElement("div",{className:"ui twelve wide column",ref:"wikiedit",style:{borderLeft:"1px solid #eee"}}))}});return p}),define("components/project/wikieditor",["react","backbone","pref","querystring","eventbus","helper","language/default","language/project","language/wiki","models/wiki","components/mixin/listsearch","components/wiki/editor","components/heading","components/filterbar"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"ProjectWikiEditorComponent",mixins:[d],getDefaultProps:function(){return{project:{id:0,name:"",wiki_id:0}}},componentDidMount:function(){var t=this;r.isSmallScreen()||r.initMyTip($(e.findDOMNode(this)).find(".mytip")),this.props.project.wiki_id>0&&(r.showLoader(),new c({id:this.props.project.wiki_id}).fetch({success:function(n,a){e.render(e.createElement(u,{project:t.props.project,data:a}),e.findDOMNode(t.refs.wikicontainer))},error:function(){r.showError(l.t("error_not_found"))},complete:function(){r.hideLoader()}}))},render:function(){return e.createElement("div",null,e.createElement("div",{id:"page"},e.createElement(m,{rootlink:"#project/detail/"+this.props.project.id,roottext:this.props.project.name,link:"#project/wiki/id/"+this.props.project.id,text:l.t("heading"),subtext:l.t("heading_editor"),filters:this.filters,lang:o,loadFilterQueryTagData:this.loadFilterQueryTagData,hidepagination:!0,hidekeywordsearch:!0}),e.createElement(p,{ref:"sidebar",onSubmit:this.formSidebarSubmit}),e.createElement("div",{ref:"wikicontainer"})))}});return h}),define("components/projectfile/list",["react","backbone","pref","querystring","eventbus","helper"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"ProjectFileListComponent",init:!0,dataTimer:null,getInitialState:function(){return{total:0,items:[],length:0,can_add_story:0,can_edit_story:0,currentpage:1}},getQueryData:function(){var e={company_id:n.get("cid"),project_id:this.props.project.id,page:a.get("page")||1,status:a.get("status")||-1,priority:a.get("priority")||-1,assignee_type:a.get("assignee_type")||"all",sort_by:a.get("sort_by")||"status",sort_type:a.get("sort_type")||"ASC"};return!isNaN(a.get("iteration_id"))&&parseInt(a.get("iteration_id"))>=0&&(e.iteration_id=a.get("iteration_id")),e},loadData:function(){this.loadDataTimer>0&&clearTimeout(this.loadDataTimer);var e=this,t=(e.getQueryData(),500);e.init&&(t=1e3),this.loadDataTimer=setTimeout(function(){},t)},expandHandler:function(e){var t=[];r.isExpandIdExisted(this.state.items,e.id)?t=r.removeExpandItem(this.state.items,e.id):$.each(this.state.items,function(n,a){t.push(a);var i=r.cloneObjectData(e);e.id==a.id&&(i.id+="-expand",t.push(i))}),this.setState({items:t})},pagiLoad:function(e){a.set("page",e),this.loadData()},assigneeFilter:function(t,n){n.preventDefault();var i=n.currentTarget;$(i).hasClass("active")||($(e.findDOMNode(this)).find(".assignee-filter .active").removeClass("active"),$(i).addClass("active"),a.set("assignee_type",t),this.loadData())},statusFilter:function(e,t,n){a.set("status",e),this.loadData()},priorityFilter:function(e,t,n){a.set("priority",e),this.loadData()},iterationFilter:function(e,n,i,r){switch(n){case-3:r.dropdown("hide"),this.openEditIterationPopupHandle(i);break;case-4:r.dropdown("hide");break;case-2:r.dropdown("hide"),this.openCreateIterationPopupHandle();break;default:t.history.navigate("#project/detail/"+this.props.project.id),r.dropdown("set selected",n).dropdown("hide"),a.set("iteration_id",n),this.loadData()}},filterShow:function(){var e=400+$(".tc-scrolled table",this.getDOMNode()).outerHeight(!0);$(".tc-scrolled",this.getDOMNode()).css({minHeight:e})},filterHide:function(){$(".tc-scrolled",this.getDOMNode()).eq(0).css({minHeight:0})},sortHandle:function(t){t.preventDefault();var n=t.target,i=$(e.findDOMNode(this)),r=i.find(".sortable"),o=(i.find(".sortable.active"),$(n).attr("data-sortby")),s="ASC";if($(n).hasClass("active")){var l=$(n).attr("data-value"),c=i.find(".sortable.active").find("i");"ASC"==l?(s="DESC",c.removeClass("tc-top").addClass("tc-bottom")):(s="ASC",c.removeClass("tc-bottom").addClass("tc-top")),$(n).attr("data-value",s)}else r.find("i").remove(),i.find(".sortable.active").find("i").remove(),i.find(".sortable.active").removeClass("active"),$(n).addClass("active"),"ASC"==s?$(n).attr("data-value",s).append(' <i class="icon tc-top"></i>'):$(n).attr("data-value",s).append(' <i class="icon tc-bottom"></i>');a.set("sort_by",o),a.set("sort_type",s),this.loadData()},componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidMount:function(){this.loadData()},render:function(){return e.createElement("div",{id:"issue-wrapper"},e.createElement("div",{id:"issue-content"}))}});return o}),define("components/projecttask/filter-priority",["react","pref","language/projecttask","models/projecttask"],function(e,t,n,a){var i=e.createClass({displayName:"FilterCustomerComponent",init:!0,getDefaultProps:function(){return{value:-1,onChange:function(e,t,n){}}},getInitialState:function(){return{items:[]}},componentDidMount:function(){
var t=this;this.loadData(),$(e.findDOMNode(t)).dropdown({onChange:function(e,n,a){t.init?t.init=!1:t.props.onChange(e,n,a)}}).dropdown("set selected",t.props.value)},loadData:function(){var e=this;e.setState({items:(new a).getPriorityList()})},render:function(){return e.createElement("div",{className:"ui pointing top left dropdown"},e.createElement("a",{className:"tc-filter icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"scrolling menu"},e.createElement("div",{"data-value":"-1",className:"item",style:{textTransform:"uppercase"}},n.t("filter_status_all")),e.createElement("div",{className:"divider"}),this.state.items.map(function(t,n){var a={backgroundColor:t.color,color:"#FFF",textTransform:"uppercase"};return e.createElement("div",{key:t.code,"data-value":t.code,className:"item",style:{padding:"0.51428571rem 0.54285714rem !important"}},e.createElement("span",{className:"ui label mini",style:a},t.text))}))))}});return i}),define("components/projecttask/filter-status",["react","pref","language/projecttask","models/projecttask"],function(e,t,n,a){var i=e.createClass({displayName:"FilterCustomerComponent",init:!0,getDefaultProps:function(){return{value:-1,onChange:function(e,t,n){}}},getInitialState:function(){return{items:[]}},componentDidMount:function(){var t=this;this.loadData(),$(e.findDOMNode(t)).dropdown({onChange:function(e,n,a){t.init?t.init=!1:t.props.onChange(e,n,a)}}).dropdown("set selected",t.props.value)},loadData:function(){var e=this;e.setState({items:(new a).getStatusList()})},render:function(){return e.createElement("div",{className:"ui pointing top left dropdown"},e.createElement("a",{className:"tc-filter icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"scrolling menu"},e.createElement("div",{"data-value":"-1",className:"item",style:{textTransform:"uppercase"}},n.t("filter_status_all")),e.createElement("div",{className:"divider"}),this.state.items.map(function(t,n){var a={backgroundColor:t.color,color:"#FFF",textTransform:"uppercase"};return e.createElement("div",{key:t.code,"data-value":t.code,className:"item",style:{padding:"0.51428571rem 0.54285714rem !important"}},e.createElement("span",{className:"ui label mini",style:a},t.text))}))))}});return i}),define("components/projecttask/kanban-action-list",["react","pref","helper","eventbus","language/default","language/projecttask","models/projecttask"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"ProjectTaskKanbanActionListComponent",onDrop:function(e,s){$(s.currentTarget).removeClass("dragover");var l=new o,c=s.dataTransfer.getData("projecttask"),d=JSON.parse(c),u=document.getElementById("project-kanban-task-"+d.id);$(u).hide();var m={company_id:t.get("cid"),creator_id:t.get("uid"),status:e,id:d.id};a.trigger("projecttask:toggleloading",!0),l.createRequest({action:"updatestatus",type:"PUT",data:m,success:function(e,t){n.showSuccess(i.t("update_success")),a.trigger("projectkanbancolumn:reload",m.status)},error:function(e,t){n.notifyError(t,r,"error"),$(u).show()},complete:function(){a.trigger("projecttask:toggleloading",!1)}})},onDragLeave:function(e,t){t.preventDefault(),$(t.currentTarget).removeClass("dragover")},onDragOver:function(e,t){t.preventDefault(),$(t.currentTarget).addClass("dragover")},render:function(){var t=this;return e.createElement("div",{className:"pipeline-deal-action-list"},this.props.items.map(function(n){return e.createElement("div",{key:n.code,style:{backgroundColor:n.color,color:"#fff"},className:"item huge ui label",onDragOver:t.onDragOver.bind(t,n.code),onDragLeave:t.onDragLeave.bind(t,n.code),onDrop:t.onDrop.bind(t,n.code)},n.text)}))}});return s}),define("components/projecttask/kanban-cell",["react","helper","eventbus","pref","language/projecttask","language/default","collections/user","models/user","models/projecttask","models/projectiteration","components/taglist","components/employee-avatar"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"ProjectTaskKanbanCellComponent",getDefaultProps:function(){return{maxEmployees:5}},getInitialState:function(){return{iteration:{},employees:[],showAllEmployees:!1}},onDrag:function(e){e.preventDefault(),$(e.currentTarget).addClass("dragging"),n.trigger("projectkanban:toggleactionlist",!0)},onDragStart:function(e){return $(e.currentTarget).hasClass("disabled")?void e.preventDefault():(e.dataTransfer.clearData(),void e.dataTransfer.setData("projecttask",JSON.stringify(this.props.data)))},onDragEnd:function(e){e.preventDefault(),$(e.currentTarget).removeClass("dragging"),n.trigger("projectkanban:toggleactionlist",!1)},onClick:function(e){e.preventDefault(),n.trigger("projecttask:expand",this.props.data,this.props.can_edit_story,this.props.can_add_story)},loadObject:function(e,n){var a=$.Deferred();return n=t.strToInt(n),0>=n?(a.resolve({}),a.promise()):(new e({id:n}).fetch({success:function(e,t){a.resolve(t)},error:function(e,t){a.resolve({})}}),a.promise())},loadEmployees:function(){var e=$.Deferred();return(new o).getFromIdList({ids:this.props.data.assignees,success:function(t){e.resolve(t.items)},error:function(){e.resolve([])}}),e.promise()},loadMoreData:function(){var e=this;$.when(this.loadObject(c,this.props.data.project_iteration_id),this.loadEmployees()).done(function(t,n){e.setState({iteration:t,employees:n})})},toggleShowAllMembers:function(e){e.preventDefault(),this.setState({showAllEmployees:!this.state.showAllEmployees})},componentDidMount:function(){this.loadMoreData()},render:function(){var t=this,n=this.props.data,a=new l,r=a.getPriority(n.priority),o=a.getType(n.type);return e.createElement("div",{style:{paddingRight:10},id:"project-kanban-task-"+n.id,className:"ui small header drag deal "+this.props.className,onClick:this.onClick,draggable:!0,onDrag:this.onDrag,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},e.createElement("span",{className:"ui mini circular label",style:{margin:"-1px 5px 0 0",minHeight:0,minWidth:0,backgroundColor:r.color}}),n.name,e.createElement("div",{className:"sub header",title:n.code},e.createElement("div",{className:"ui horizontal list",style:{margin:0}},e.createElement("div",{className:"item"},e.createElement("div",{className:"content"},e.createElement("span",null,e.createElement("span",null,"# ",o.text)))),e.createElement("div",{className:"item"},e.createElement("div",{className:"content"},this.state.iteration.name||i.t("un_milestone")))),this.state.employees.length>0?e.createElement("div",{style:{marginTop:".5em"}},this.state.employees.map(function(n,a){return!t.state.showAllEmployees&&a>=t.props.maxEmployees?null:e.createElement("span",{key:n.id,style:{margin:1,display:"inline-block",verticalAlign:"center"}},e.createElement(u,{id:n.id,user:n,className:"ui avatar image",cssStyles:{display:"inline-block"}}))}),!this.state.showAllEmployees&&this.state.employees.length>this.props.maxEmployees?e.createElement("span",{style:{margin:1,display:"inline-block",verticalAlign:"center"}},e.createElement("a",{className:"ui mini circular basic label",onClick:this.toggleShowAllMembers},"+"+(this.state.employees.length-this.props.maxEmployees))):null):null,n.tags?e.createElement("div",{style:{marginTop:".5em"}},e.createElement(d,{text:n.tags})):null,n.count_comment?e.createElement("div",{className:"dealbubble"},e.createElement("i",{className:"icon tc-comment-alt"}),e.createElement("span",null,n.count_comment)):null))}});return m}),define("components/projecttask/kanban-column",["react","helper","eventbus","pref","language/projecttask","language/default","collections/projecttask","models/projecttask","components/pipelinedeal/pagination","components/projecttask/kanban-cell"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"ProjectTaskKanbanColumnComponent",getInitialState:function(){return{items:[],limit:50,currentPage:1,total:0,can_add_story:0,can_edit_story:0}},onDrop:function(o){$(o.currentTarget).removeClass("active");var l=new s,c=o.dataTransfer.getData("projecttask"),d=JSON.parse(c);if(d.status!=this.props.data.code){if($(o.currentTarget).hasClass("disabled"))return void t.showError(i.t("error_status_invalid"));var u=document.getElementById("project-kanban-task-"+d.id),m=$(u).clone();m.insertBefore(e.findDOMNode(this.refs.pagination_wrapper)).removeClass("dragging"),$(u).hide();var p={company_id:a.get("cid"),creator_id:a.get("uid"),status:this.props.data.code,id:d.id};n.trigger("projecttask:toggleloading",!0),l.createRequest({action:"updatestatus",type:"PUT",data:p,success:function(e){t.showSuccess(r.t("update_success")),n.trigger("projectkanbancolumn:reload",d.status),n.trigger("projectkanbancolumn:reload",p.status)},error:function(e){t.notifyError(e,i,"error"),$(u).show()},complete:function(){m.remove(),n.trigger("projecttask:toggleloading",!1)}})}},onDragLeave:function(e){e.preventDefault(),$(e.currentTarget).removeClass("active")},onDragOver:function(e){e.preventDefault(),$(e.currentTarget).hasClass("disabled")||$(e.currentTarget).addClass("active")},parseQueries:function(e){var t=$.extend({},this.props.filters,e,{company_id:a.get("cid"),status:this.props.data.code,project_id:this.props.project_id,sort_by:"id",sort_type:"DESC",limit:this.state.limit});return t.assignee_user&&delete t.assignee_type,t.page||(t.page=this.state.currentPage),$.trim(t.iteration_id).length<=0&&delete t.iteration_id,t},toggleLoading:function(t){t?$(e.findDOMNode(this)).addClass("loading"):$(e.findDOMNode(this)).removeClass("loading")},goToPage:function(e){var t={page:e};this.loadTasks(t)},loadTasks:function(e){var a=this;this.toggleLoading(!0),(new o).fetch({data:this.parseQueries(e),success:function(e,n){var i=$.extend({},a.state,{limit:t.strToNumber(n.limit),total:t.strToNumber(n.total),currentPage:t.strToNumber(n.currentpage),items:n.items,can_add_story:n.can_add_story,can_edit_story:n.can_edit_story});a.state=i},error:function(){a.state=a.getInitialState()},complete:function(){a.toggleLoading(!1),n.trigger("projecttask:updatecounttaskforstatus",a.props.data.code,a.state.total),a.forceUpdate()}})},reload:function(e){e==this.props.data.code&&this.loadTasks()},componentWillUnmount:function(){n.off("projectkanbancolumn:reload",this.reload)},componentWillMount:function(){n.on("projectkanbancolumn:reload",this.reload)},componentDidMount:function(){this.loadTasks()},render:function(){var t=this,n=new s,a="ui basic segment stage",i="";return!this.props.isProjectManager&&this.props.data.code>n.STATUS_NEED_FOR_APPROVAL&&(a+=" disabled"),e.createElement("div",{className:a,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},this.state.items.map(function(n){return e.createElement(c,{key:n.id,className:i,data:n,can_add_story:t.state.can_add_story,can_edit_story:t.state.can_edit_story})}),e.createElement("div",{ref:"pagination_wrapper",style:{margin:"10px auto 50px",maxWidth:300}},this.state.total/this.state.limit>1||this.state.currentPage>1?e.createElement(l,{className:"fluid",goToPage:this.goToPage,currentPage:this.state.currentPage,totalPage:Math.ceil(this.state.total/this.state.limit)}):null))}});return d}),define("components/projecttask/modal-expand",["react","eventbus","components/projecttask/detail"],function(e,t,n){var a=e.createClass({displayName:"ProjectTaskModalExpandComponent",getDefaultProps:function(){return{showLinkUpdateStatus:!0}},closeHandle:function(){$(e.findDOMNode(this.refs.modal)).modal("hide")},componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({context:e.findDOMNode(this),autofocus:!1,onShow:function(){$("body").addClass("has-modal")},onHide:function(){$("body").removeClass("has-modal")}}).modal("show")},render:function(){return e.createElement("div",null,e.createElement("div",{ref:"modal",className:"ui large modal"},e.createElement("div",{className:"content",style:{padding:10}},e.createElement(n,{closeHandle:this.closeHandle,openPopupEditTaskHandle:this.props.openPopupEditTaskHandle,openPopupUpdateStatus:this.props.openPopupUpdateStatusHandle,data:this.props.data,showLinkUpdateStatus:this.props.showLinkUpdateStatus,can_add_story:this.props.can_add_story,can_edit_story:this.props.can_edit_story}))))}});return a}),define("components/projecttask/kanban",["react","backbone","pref","querystring","eventbus","helper","language/projecttask","language/project","language/projectiteration","models/project","models/user","collections/projecttask","models/projecttask","collections/projectiteration","models/projectiteration","components/projectiteration/heading","components/dropdown/projectassigneetype","components/dropdown/projecttaskpriority","components/dropdown/projecttasktype","components/mixin/listsearch","components/headingfull","components/filterbar","components/filterbartoggle","components/projecttask/popup-add","components/projecttask/popup-edit","components/projectiteration/add","components/projectiteration/edit","components/projecttask/kanban-column","components/projecttask/kanban-action-list","components/projecttask/modal-expand"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M){var S=e.createClass({displayName:"ProjectTaskKanbanComponent",mixins:[y],filters:{id:null,keyword:null,assignee_type:null,assignee_user:null,priority:null,iteration_id:null,type:null,tag:null},getInitialState:function(){return{columns:(new m).getStatusListForKanbanColumn(),actions:(new m).getStatusListForKanbanAction(),key:0}},loadFilterQueryTagData:function(e){var t=null,n="name";switch(e){case"assignee_type":var r=o.t(this.filters[e]);i.trigger("querytag:updatetext",{field:e,text:r});break;case"priority":var s=(new m).getPriority(this.filters[e]);i.trigger("querytag:updatetext",{field:e,text:s.text});break;case"iteration_id":t=new h;break;case"type":var l=(new m).getType(this.filters[e]);i.trigger("querytag:updatetext",{field:e,text:l.text});break;case"assignee_user":t=new d,n="fullname"}null!=t&&a.requestFilterQueryTag(t,this.filters,e,n)},formSidebarSubmit:function(){var e={id:this.props.project.id,priority:this.refs.filterpriority.val(),iteration_id:this.refs.iterationHeading.getValue(),type:this.refs.filtertype.val(),keyword:this.refs.sidebar.getKeyword(),tag:this.filters.tag},t=$.trim(this.refs.filterassigneetype.val());if(t.length>0){var n=t.split(":");if(n.length>=2){var a=n[0],i=n[1];e[a]=i}}$.trim(this.filters.iteration_id).length>0&&(e.iteration_id=$.trim(this.filters.iteration_id)),this.doFilters(e,null,!0)},iterationFilter:function(e,t,n,a){switch(t=parseInt(t)){case-3:a.dropdown("hide"),this.openEditIterationPopupHandle(n);break;case-4:a.dropdown("hide");break;case-1:this.removeFilter("iteration_id");break;default:this.doFilter("iteration_id",t)}},mountModal:function(t){var n=e.cloneElement(t,{key:moment().valueOf()});e.render(n,e.findDOMNode(this.refs.modal_wrapper))},openCreateTaskPopupHandle:function(t){t.preventDefault(),this.mountModal(e.createElement(w,{project:this.props.project,iteration_id:this.filters.iteration_id}))},openEditTaskPopupHandle:function(t){this.mountModal(e.createElement(k,{task_id:t,project:this.props.project}))},openCreateIterationPopupHandle:function(t){t.preventDefault(),this.mountModal(e.createElement(D,{project:this.props.project}))},openEditIterationPopupHandle:function(t){this.mountModal(e.createElement(T,{project:this.props.project,iteration_id:t}))},openExpandHandle:function(t,n,a){this.mountModal(e.createElement(M,{data:t,can_add_story:a,can_edit_story:n,openPopupEditTaskHandle:this.openEditTaskPopupHandle,showLinkUpdateStatus:!1}))},canAddTask:function(){for(var e=!1,t=r.strToInt(n.get("uid")),a=this.props.project.role_permission,i=this.props.project.development_team,o=this.props.project.scrum_master,s=0;s<i.length;s++)if(t==parseInt(i[s])&&1==a.development_team_add_story){e=!0;break}for(var s=0;s<o.length;s++)if(t==parseInt(o[s])&&1==a.scrum_master_add_story){e=!0;break}return e},canManage:function(){var e=r.strToInt(n.get("uid"));return $.inArray(e,this.props.project.scrum_master)>-1},fixedHeight:function(){var t=$(window).height(),n=$("#header").outerHeight(!0),a=$(e.findDOMNode(this.refs.heading)).outerHeight(!0),i=$(e.findDOMNode(this.refs.sidebar)).outerHeight(!0),r=t-n-a-i;$(e.findDOMNode(this.refs.table_wrapper)).height(r)},updateCountTaskForStatus:function(t,n){var a="kanban_heading_cell_count_task_"+t;this.refs[a]&&$(e.findDOMNode(this.refs[a])).text(r.strToInt(n))},toggleLoading:function(t){var n=$(e.findDOMNode(this.refs.loader));t?n.addClass("active"):n.removeClass("active")},toggleActionList:function(t){t?$(e.findDOMNode(this.refs.action_list)).addClass("active"):$(e.findDOMNode(this.refs.action_list)).removeClass("active")},refresh:function(){this.setState({key:moment().valueOf()})},componentWillUnmount:function(){i.off("projectkanban:toggleactionlist",this.toggleActionList),i.off("projecttask:toggleloading",this.toggleLoading),i.off("projecttask:updatecounttaskforstatus",this.updateCountTaskForStatus),i.off("projecttask:refresh",this.refresh),i.off("projectiteration:edit",this.openEditIterationPopupHandle),i.off("projecttask:expand",this.openExpandHandle),$("body").removeClass("is-pipeline")},componentWillMount:function(){a.initFilter(this.filters),$("body").addClass("is-pipeline")},componentDidUpdate:function(){i.trigger("listsearch:updatesize"),this.fixedHeight()},componentDidMount:function(){i.on("projectkanban:toggleactionlist",this.toggleActionList),i.on("projecttask:toggleloading",this.toggleLoading),i.on("projecttask:updatecounttaskforstatus",this.updateCountTaskForStatus),i.on("projecttask:refresh",this.refresh),i.on("projectiteration:edit",this.openEditIterationPopupHandle),i.on("projecttask:expand",this.openExpandHandle),this.fixedHeight();var t=$(e.findDOMNode(this.refs.link_add_task)),n=$(e.findDOMNode(this.refs.link_wiki)).add(e.findDOMNode(this.refs.link_edit_project));r.initMyTip(t,null,null,!1),r.initMyTip(n)},renderTable:function(){var t=this,n={width:200*this.state.columns.length};return e.createElement("div",{key:this.state.key,ref:"table_wrapper",style:{overflow:"hidden",borderTop:"1px solid #d0d0d0"}},e.createElement("div",{style:{height:"100%",overflow:"auto"}},e.createElement("table",{style:n,className:"ui basic fixed table pipelinedealstagetable"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,e.createElement("ul",null,this.state.columns.map(function(t){return e.createElement("li",{style:{color:t.color},key:t.code},t.text," ","(",e.createElement("span",{ref:"kanban_heading_cell_count_task_"+t.code},"0"),")")}))))),e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",null,e.createElement("div",{className:"stage-list"},e.createElement("div",{className:"stage-list-table"},this.state.columns.map(function(n){return e.createElement(x,{isProjectManager:t.canManage(),project_id:t.props.project.id,filters:t.filters,key:n.code,data:n})})))))))))},render:function(){var t=this,n="";return this.filters.assignee_type?n="assignee_type:"+$.trim(this.filters.assignee_type):this.filters.assignee_user&&(n="assignee_user:"+$.trim(this.filters.assignee_user)),e.createElement("div",{id:"task-wrapper",style:{backgroundColor:"#f3f5f6"}},e.createElement("div",{id:"page",style:{padding:0}},e.createElement(E,{ref:"heading",rootlink:"#project",roottext:s.t("heading"),link:"#project/detail/id/"+this.props.project.id,text:this.props.project.name,lang:o,hidekeywordsearch:!0,hidepagination:!0,hidetab:!0,hidefiltertoggle:!0,nomarginbottom:!0,shownavheadingtoggle:!0},t.canAddTask()?e.createElement("a",{ref:"link_add_task",href:"#",onClick:t.openCreateTaskPopupHandle,title:o.t("add_task"),className:"mainbutton"},e.createElement("i",{className:"tc-plus-circle icon"}),e.createElement("span",{className:"hideonsmall"},o.t("add_task"))):"",e.createElement("a",{ref:"link_wiki",href:"#project/wiki/id/"+this.props.project.id,className:"hideonsmall",title:s.t("wiki")},e.createElement("i",{className:"tc-book icon"})," Wiki"),e.createElement(f,{key:moment.unix()+"-"+r.generateRandomNumber(100,"number"),ref:"iterationHeading",total:1,project_id:t.props.project.id,project:t.props.project,doFilter:t.doFilter,canAddIteration:this.canManage(),openCreateIterationPopupHandle:this.openCreateIterationPopupHandle,removeFilter:t.removeFilter,onChange:t.iterationFilter}),e.createElement("a",{href:"#project/detail/id/"+this.props.project.id,className:"mytip",title:s.t("toggle_table")},e.createElement("i",{className:"tc-list icon"})," ",e.createElement("span",{className:"hideonsmall"},s.t("table_view")))),e.createElement(b,{ref:"sidebar",force_show:!0,keyword:this.filters.keyword,nomargin:!0,onSubmit:this.formSidebarSubmit},e.createElement("div",{className:"field"},e.createElement("label",null,o.t("assign_for"),":"),e.createElement(g,{ref:"filterassigneetype",value:n,allowedSearch:!0,searchPlaceHolder:o.t("search_assginee_placeholder")})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("priority"),":"),e.createElement(_,{ref:"filterpriority",value:this.filters.priority})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("type"),":"),e.createElement(v,{ref:"filtertype",value:this.filters.type}))),this.renderTable()),t.canManage()?e.createElement(C,{ref:"action_list",items:this.state.actions}):null,e.createElement("div",{ref:"loader",className:"ui inverted dimmer"},e.createElement("div",{className:"ui loader"})),e.createElement("div",{ref:"modal_wrapper"}))}});return S}),define("components/quicksearch/searchbox",["react","backbone","pref","helper","eventbus"],function(e,t,n,a,i){var r=e.createClass({displayName:"SearchBoxComponent",getDefaultProps:function(){return{placeholder:"Tìm kiếm nhanh..."}},toggleHandler:function(){$(e.findDOMNode(this)).toggle(),$(e.findDOMNode(this.refs.input)).trigger("focus")},componentWillUnmount:function(){i.off("quicksearch:toggle",this.toggleHandler)},componentDidMount:function(){i.on("quicksearch:toggle",this.toggleHandler);var t=this;$(e.findDOMNode(this.refs.input)).bind("keydown","ctrl+f",function(){$(e.findDOMNode(t)).toggle()})},render:function(){return e.createElement("div",{id:"tcquicksearchwrapper"},e.createElement("div",{id:"tcquicksearch"},e.createElement("div",{className:"ui category fluid search"},e.createElement("div",{className:"ui massive icon input"},e.createElement("input",{className:"prompt",type:"text",ref:"input",placeholder:this.props.placeholder}),e.createElement("i",{className:"tc-search icon"})),e.createElement("div",{className:"results transition visible"},e.createElement("div",{className:"category"},e.createElement("div",{className:"name"},"Animals"),e.createElement("a",{className:"result"},e.createElement("div",{className:"content"},e.createElement("div",{className:"title"},"Aardvark"),e.createElement("div",{className:"description"}," Healthy Population")))),e.createElement("div",{className:"category"},e.createElement("div",{className:"name"},"Passwords"),e.createElement("a",{className:"result"},e.createElement("div",{className:"content"},e.createElement("div",{className:"title"},"aaaaaa"))),e.createElement("a",{className:"result"},e.createElement("div",{className:"content"},e.createElement("div",{className:"title"},"aaaa"))),e.createElement("a",{className:"result"},e.createElement("div",{className:"content"},e.createElement("div",{className:"title"},"aaaaaaaa"))))))))}});return r}),define("components/salary/add",["react","backbone","helper","pref","language/salary","querystring","language/default","models/salary","components/select-status","components/semantic-datepicker","components/heading","components/select-employee","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"SalaryAddComponent",getInitialState:function(){return{modelitems:[],month:[],year:[],displaydate:"none",displaymonth:"none",displayyear:"none"}},getDate:function(e,t){for(var n=[],a=e;t>=a;a++)n.push(a);return n},componentDidUpdate:function(){$(e.findDOMNode(this.refs.month)).val(moment.unix(moment([]).unix([])).format("M"))},componentDidMount:function(){var e=this,t=moment().format("YYYY")-1,n=parseInt(t)+4;this.setState({month:this.getDate(1,12),year:this.getDate(t,n)}),$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}})},getTime:function(){var t=($(".ui.form",this.getDOMNode()),$(e.findDOMNode(this.refs.type)).dropdown("get value")),n=new s,a="",i=$(e.findDOMNode(this.refs.month)).val(),o=$(e.findDOMNode(this.refs.year)).val();return t!=n.TYPE_ONETIME?t==n.TYPE_MONTHLY?a=o+"-"+i+"-01":t==n.TYPE_YEARLY?a=o+"-01-01":(a=r.get("date_started"),a=moment.unix(a).format("YYYY-MM-DD")):a="",a},_save:function(){var r=$(".ui.form",this.getDOMNode());r.addClass("loading");var l=this;(new s).save({company_id:a.get("cid"),creator_id:a.get("uid"),source:(new s).SOURCE_MANUAL,title:$('[name="title"]',r).val(),time:l.getTime(),total:n.strToInt($('[name="total"]',r).val()),paid_index:$('[name="paidindex"]',r).val(),type:$(e.findDOMNode(l.refs.type)).dropdown("get value"),user_id:$(e.findDOMNode(l.refs.employee)).dropdown("get value"),status:$(e.findDOMNode(l.refs.status)).dropdown("get value")},{success:function(e){n.showSuccess(o.t("insert_success")),t.history.navigate("salary",{trigger:!0})},error:function(e,t){n.notifyErrorAndForm(t,i,"error_add",r,{type:["error_type_required","error_type_invalid"],user_id:["error_user_id_is_require","error_user_id_invalid"],total:["error_total_is_more_than_zero"]})},complete:function(){r.removeClass("loading")}})},selectType:function(e){var t=new s;e!=t.TYPE_ONETIME?e==t.TYPE_DAILY?this.setState({displaydate:"",displaymonth:"none",displayyear:"none"}):e==t.TYPE_MONTHLY?this.setState({displaydate:"none",displaymonth:"",displayyear:""}):e==t.TYPE_YEARLY&&this.setState({displaydate:"none",displaymonth:"none",displayyear:""}):this.setState({displaydate:"none",displaymonth:"none",displayyear:"none"})},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},_priceInput:function(e){var t=n.strToInt(e.target.value.replace(/[^0-9]/g,""));e.target.value=t>0?n.numberFormat(t):""},render:function(){var t=this,n=0,p=0;r.has("date_started")&&r.get("date_started")>0?n=r.get("date_started"):(n=moment([]).unix(),r.set("date_started",n)),r.has("date_ended")&&r.get("date_ended")>0?p=r.get("date_ended"):(p=moment().endOf("month"),r.set("date_ended",p.unix({h:23,m:59,s:59})));var h=new Object;return h[o.t("relativeToday")]=[moment([]),moment()],h[o.t("relativeYesterday")]=[moment([]).subtract(1,"days"),moment([]).subtract(1,"seconds")],h[o.t("rel7Day")]=[moment([]).subtract(7,"days"),moment([]).subtract(1,"seconds")],h[o.t("rel30Day")]=[moment([]).subtract(30,"days"),moment([]).subtract(1,"seconds")],h[o.t("relMonthNow")]=[moment([]).startOf("month"),moment().endOf("month")],h[o.t("relMonthAgo")]=[moment([]).subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],e.createElement("div",{className:"ui segments"},e.createElement(d,{link:"#salary/manage",text:i.t("heading"),subtext:i.t("heading_insert")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("input",{type:"hidden",value:"",ref:"itemselect"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,i.t("salary_info_title"))),e.createElement("p",null,i.t("salary_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide field"},e.createElement("label",null,i.t("title")),e.createElement("input",{name:"title"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,i.t("employee")),e.createElement(u,{ref:"employee",name:"user_id"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four wide field"},e.createElement("label",null,i.t("type")),e.createElement(l,{placeholder:"---",data:(new s).getTypeList(),ref:"type",name:"type",onChange:t.selectType})),e.createElement("div",{className:"required four  wide field",style:{display:t.state.displaydate}},e.createElement("label",null,i.t("time")),e.createElement(c,{ref:"datePicker",options:{format:"DD/MM/YYYY",startDate:n,endDate:p,opens:"left",timePicker:!1,timePickerIncrement:1,singleDatePicker:!0,timePicker12Hour:!1,applyClass:"ui button green",cancelClass:"ui button secondary"},callBack:function(e,t){r.set("page",1),r.set("date_started",e.unix()),r.set("date_ended",t.unix())}})),e.createElement("div",{className:"required four wide field",style:{display:t.state.displaymonth}},e.createElement("label",null,i.t("month")),e.createElement("select",{ref:"month"},t.state.month.map(function(t,n){return e.createElement("option",{value:t,key:n},o.t("month")+" "+t)}))),e.createElement("div",{className:"required four wide field",style:{display:t.state.displayyear}},e.createElement("label",null,i.t("year")),e.createElement("select",{ref:"year"},t.state.year.map(function(t,n){return e.createElement("option",{value:t,key:n},o.t("year")+" "+t)})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four  wide field"},e.createElement("label",null,i.t("total")),e.createElement("input",{name:"total",style:{textAlign:"right"},onInput:t._priceInput,defaultValue:"0",className:"center aligned"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:" four wide field"},e.createElement("label",null,i.t("paidindex")),e.createElement("input",{name:"paidindex",type:"number",style:{textAlign:"right"},onInput:t._priceInput,defaultValue:"1"}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("status")),e.createElement(l,{key:a.get("uid"),ref:"status",data:(new s).getStatusList(),value:(new s).STATUS_ENABLE}))))),e.createElement(m,{required:!0},e.createElement("button",{className:"ui teal button",type:"submit"},o.t("add"))))))}});return p}),define("components/salary/detail-item",["react","helper","pref","language/salary"],function(e,t,n,a){var i=e.createClass({displayName:"SalaryDetailItemComponent",render:function(){var t=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:0}),n=this.props.value;return"number"==typeof parseInt(n)&&parseFloat(n)%1===0&&(n=t.format(n)),e.createElement("tr",null,e.createElement("td",null,this.props.name),e.createElement("td",{className:"right aligned"},n))}});return i}),define("components/salary/detail",["react","backbone","helper","querystring","pref","language/salary","language/default","models/salary","models/user","components/select-status","components/semantic-datepicker","components/heading","components/salary/detail-item"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"SalaryDetailComponent",getInitialState:function(){return{modelitems:[],detail:[],month:[],year:[],displaydate:"none",displaymonth:"none",displayyear:"none"}},getDate:function(e,t){for(var n=[],a=e;t>=a;a++)n.push(a);return n},componentDidUpdate:function(e,t){this.setTime()},componentDidUpdate:function(){$(e.findDOMNode(this.refs.employee)).dropdown("destroy")},componentDidMount:function(){var t=this,n=moment().format("YYYY")-1,i=parseInt(n)+4;this.setState({month:this.getDate(1,12),year:this.getDate(n,i)}),this.selectType(this.props.data.type),this.setTime(),this.getEmployee(),"0000-00-00"!=this.props.data.time?a.set("time",moment(this.props.data.time,"MM-DD-YYYY").unix()):a.set("time",moment([]).unix()),$(e.findDOMNode(this.refs.employee)).dropdown("destroy"),$(e.findDOMNode(this.refs.type)).dropdown("destroy"),$(e.findDOMNode(this.refs.status)).dropdown("destroy"),
$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,n){e.preventDefault(),t._save()}})},getEmployee:function(){var t=this;new l({id:this.props.data.user_id}).fetch({success:function(a,i){$(e.findDOMNode(t.refs.employeename)).html('<img class="ui avatar image" src="'+n.getAvatarPath(i.avatar)+'" />'+i.fullname)}})},setTime:function(){var t=[],n=moment(this.props.data.time,"YYYY-MM-DD").unix();console.log(n),"Invalid date"===n||"0000-00-00"==this.props.data.time?(a.set("date_started",moment().unix()),n=moment().unix()):a.set("date_started",n),$(e.findDOMNode(this.refs.datePicker.refs.bootstrap_datepicker_input)).data("daterangepicker").setEndDate(moment.unix(n).format("DD/MM/YYYY")),$(e.findDOMNode(this.refs.month)).val(parseInt(t[1])),$(e.findDOMNode(this.refs.year)).val(parseInt(t[0]))},getTime:function(){var t=($(".ui.form",this.getDOMNode()),$(e.findDOMNode(this.refs.type)).dropdown("get value")),n=new s,i="",r=$(e.findDOMNode(this.refs.month)).val(),o=$(e.findDOMNode(this.refs.year)).val();return t!=n.TYPE_ONETIME?t==n.TYPE_MONTHLY?i=o+"-"+r+"-01":t==n.TYPE_YEARLY?i=o+"-01-01":(i=a.get("time"),i=moment.unix(i).format("YYYY-MM-DD")):i="",i},selectType:function(e){var t=new s;e!=t.TYPE_ONETIME?e==t.TYPE_DAILY?this.setState({displaydate:"",displaymonth:"none",displayyear:"none"}):e==t.TYPE_MONTHLY?this.setState({displaydate:"none",displaymonth:"",displayyear:""}):e==t.TYPE_YEARLY&&this.setState({displaydate:"none",displaymonth:"none",displayyear:""}):this.setState({displaydate:"none",displaymonth:"none",displayyear:"none"})},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},_priceInput:function(e){var t=n.strToInt(e.target.value.replace(/[^0-9]/g,""));e.target.value=t>0?n.numberFormat(t):""},render:function(){var t=this,l=0,p=0;a.has("date_started")&&a.get("date_started")>0?l=a.get("date_started"):(l=moment([]).unix(),a.set("date_started",l)),a.has("date_ended")&&a.get("date_ended")>0?p=a.get("date_ended"):(p=moment().endOf("month"),a.set("date_ended",p.unix({h:23,m:59,s:59})));var h=[];if(""!=this.props.data.detail){var f=jQuery.parseJSON(this.props.data.detail);"object"==typeof f&&$.each(f,function(e,t){var n={};n.value=t,n.name=e,h.push(n)})}return e.createElement("div",{className:"ui segments"},e.createElement(u,{link:"#salary",text:r.t("salary"),subtext:r.t("detail")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("input",{type:"hidden",value:"",ref:"itemselect"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,r.t("salary_info_title"))),e.createElement("p",null,r.t("salary_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:" four  wide field"},e.createElement("label",null,r.t("employee")),e.createElement("div",{ref:"employeename"})),e.createElement("div",{className:" four  wide field"},e.createElement("label",null,r.t("type")),e.createElement(c,{placeholder:"---",readOnly:!0,data:(new s).getTypeList(),name:"type",ref:"type",onChange:t.selectType,value:t.props.data.type})),e.createElement("div",{className:" four  wide field",readOnly:!0,style:{display:t.state.displaydate}},e.createElement("label",null,r.t("time")),e.createElement(d,{ref:"datePicker",options:{format:"DD/MM/YYYY",startDate:l,endDate:p,opens:"left",timePicker:!1,timePickerIncrement:1,singleDatePicker:!0,timePicker12Hour:!1,applyClass:"ui button green",cancelClass:"ui button secondary"},callBack:function(e,t){a.set("page",1),a.set("time",e.unix())}})),e.createElement("div",{className:" four wide field",style:{display:t.state.displaymonth}},e.createElement("label",null,r.t("month")),e.createElement("select",{ref:"month",disabled:"disabled"},t.state.month.map(function(t,n){return e.createElement("option",{value:t},o.t("month")+" "+t)}))),e.createElement("div",{className:" four wide field",style:{display:t.state.displayyear}},e.createElement("label",null,r.t("year")),e.createElement("select",{ref:"year",disabled:"disabled"},t.state.year.map(function(t,n){return e.createElement("option",{value:t},o.t("year")+" "+t)})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:" four  wide field"},e.createElement("label",null,r.t("title")),e.createElement("input",{name:"title",readOnly:!0,defaultValue:t.props.data.title})),e.createElement("div",{className:" four  wide field"},e.createElement("label",null,r.t("total")),e.createElement("input",{name:"total",readOnly:!0,onInput:t._priceInput,defaultValue:n.numberFormat(this.props.data.total)})),e.createElement("div",{className:" four  wide field"},e.createElement("label",null,r.t("paidindex")),e.createElement("input",{name:"paidindex",readOnly:!0,defaultValue:t.props.data.paid_index,onInput:t._priceInput})),e.createElement("div",{className:"four wide field"},e.createElement("label",null,r.t("status")),e.createElement(c,{readOnly:!0,key:i.get("uid"),ref:"status",data:(new s).getStatusList(),value:t.props.data.status}))),e.createElement("div",{className:"fields twelve",style:{display:h.length?"":"none"}},e.createElement("table",{className:"ui striped selectable unstackable table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Tên cột"),e.createElement("th",null,"Giá trị"))),e.createElement("tbody",null,h.map(function(t,n){return e.createElement(m,{name:t.name,value:t.value})})))))),e.createElement("div",{className:"ui divider"}))))}});return p}),define("components/salary/edit",["react","backbone","helper","querystring","pref","language/salary","language/default","models/salary","components/select-status","components/semantic-datepicker","components/salary/detail-item","components/heading","components/select-employee","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"SalaryEditComponent",getInitialState:function(){return{modelitems:[],detail:[],month:[],year:[],displaydate:"none",displaymonth:"none",displayyear:"none"}},getDate:function(e,t){for(var n=[],a=e;t>=a;a++)n.push(a);return n},componentDidUpdate:function(e,t){this.setTime()},componentDidMount:function(){var e=this,t=moment().format("YYYY")-1,n=parseInt(t)+4;this.setState({month:this.getDate(1,12),year:this.getDate(t,n)}),this.selectType(this.props.data.type),this.setTime(),$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}})},setTime:function(){var t=[];if("0000-00-00"!=this.props.data.time)t=this.props.data.time.split("-");else{var n=moment.unix(moment([]).unix()).format("YYYY-MM-DD");t=n.split("-")}$(e.findDOMNode(this.refs.month)).val(parseInt(t[1])),$(e.findDOMNode(this.refs.year)).val(parseInt(t[0]));var i=moment(this.props.data.time,"YYYY-MM-DD").unix();"Invalid date"===i||"0000-00-00"==this.props.data.time?(a.set("time",moment().unix()),i=moment().unix()):a.set("time",i),$(e.findDOMNode(this.refs.datePicker.refs.bootstrap_datepicker_input)).data("daterangepicker").setEndDate(moment.unix(i).format("DD/MM/YYYY"))},getTime:function(){var t=($(".ui.form",this.getDOMNode()),$(e.findDOMNode(this.refs.type)).dropdown("get value")),n=new s,i="",r=$(e.findDOMNode(this.refs.month)).val(),o=$(e.findDOMNode(this.refs.year)).val();return t!=n.TYPE_ONETIME?t==n.TYPE_MONTHLY?i=o+"-"+r+"-01":t==n.TYPE_YEARLY?i=o+"-01-01":(i=a.get("time"),i=moment.unix(i).format("YYYY-MM-DD")):i="",i},selectType:function(e){var t=new s;e!=t.TYPE_ONETIME?e==t.TYPE_DAILY?this.setState({displaydate:"",displaymonth:"none",displayyear:"none"}):e==t.TYPE_MONTHLY?this.setState({displaydate:"none",displaymonth:"",displayyear:""}):e==t.TYPE_YEARLY&&this.setState({displaydate:"none",displaymonth:"none",displayyear:""}):this.setState({displaydate:"none",displaymonth:"none",displayyear:"none"})},_save:function(){var a=$(".ui.form",this.getDOMNode());a.addClass("loading");var l=this;new s({id:this.props.data.id}).save({company_id:i.get("cid"),creator_id:i.get("uid"),source:(new s).SOURCE_MANUAL,title:$('[name="title"]',a).val(),time:l.getTime(),total:n.strToInt($('[name="total"]',a).val()),paid_index:n.strToInt($('[name="paidindex"]',a).val()),type:$(e.findDOMNode(l.refs.type)).dropdown("get value"),user_id:$(e.findDOMNode(l.refs.employee)).dropdown("get value"),status:$(e.findDOMNode(l.refs.status)).dropdown("get value")},{success:function(e){n.showSuccess(o.t("update_success")),t.history.navigate("salary",{trigger:!0})},error:function(e,t){n.notifyErrorAndForm(t,r,"error_update",a,{type:["error_type_required","error_type_invalid"],user_id:["error_user_id_is_require","error_user_id_invalid"],total:["error_total_is_more_than_zero"]})},complete:function(){a.removeClass("loading")}})},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},_priceInput:function(e){var t=n.strToInt(e.target.value.replace(/[^0-9]/g,""));e.target.value=t>0?n.numberFormat(t):""},render:function(){var t=this,h=0,f=0;a.has("time")&&a.get("time")>0?h=moment.unix(a.get("time")).format("DD/MM/YYYY"):(h=moment.unix(moment([]).unix()).format("DD/MM/YYYY"),a.set("time",h)),f=h;var g=[];if(""!=this.props.data.detail){var _=jQuery.parseJSON(this.props.data.detail);"object"==typeof _&&$.each(_,function(e,t){var n={};n.value=t,n.name=e,g.push(n)})}return e.createElement("div",{className:"ui segments"},e.createElement(u,{link:"#salary/manage",text:r.t("heading"),subtext:r.t("update")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("input",{type:"hidden",value:"",ref:"itemselect"}),e.createElement("div",{className:"ui sixteen wide fields"},e.createElement("div",{className:"ui twelve wide field"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,r.t("salary_info_title"))),e.createElement("p",null,r.t("salary_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"twelve wide field"},e.createElement("label",null,r.t("title")),e.createElement("input",{name:"title",defaultValue:t.props.data.title}))),e.createElement("br",null),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required six wide field"},e.createElement("label",null,r.t("employee")),e.createElement(m,{ref:"employee",defaultValue:[t.props.data.user_id],name:"user_id"}))),e.createElement("br",null),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required six wide field"},e.createElement("label",null,r.t("type")),e.createElement(l,{placeholder:"---",data:(new s).getTypeList(),name:"type",ref:"type",onChange:t.selectType,value:t.props.data.type})),e.createElement("div",{className:"required five wide field",style:{display:t.state.displaydate}},e.createElement("label",null,r.t("time")),e.createElement(c,{ref:"datePicker",options:{format:"DD/MM/YYYY",startDate:h,endDate:f,opens:"left",timePicker:!1,autoUpdateInput:!0,timePickerIncrement:1,singleDatePicker:!0,timePicker12Hour:!1,applyClass:"ui button green",cancelClass:"ui button secondary"},callBack:function(e,t){a.set("page",1),a.set("time",e.unix())}})),e.createElement("div",{className:"required five wide field",style:{display:t.state.displaymonth}},e.createElement("label",null,r.t("month")),e.createElement("select",{ref:"month"},t.state.month.map(function(t,n){return e.createElement("option",{value:t},o.t("month")+" "+t)}))),e.createElement("div",{className:"required five wide field",style:{display:t.state.displayyear}},e.createElement("label",null,r.t("year")),e.createElement("select",{ref:"year"},t.state.year.map(function(t,n){return e.createElement("option",{value:t},o.t("year")+" "+t)})))),e.createElement("br",null),e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four  wide field"},e.createElement("label",null,r.t("total")),e.createElement("input",{name:"total",style:{textAlign:"right"},onInput:t._priceInput,defaultValue:n.numberFormat(this.props.data.total)}))),e.createElement("br",null),e.createElement("div",{className:"fields"},e.createElement("div",{className:" four  wide field"},e.createElement("label",null,r.t("paidindex")),e.createElement("input",{type:"number",name:"paidindex",style:{textAlign:"right"},defaultValue:t.props.data.paid_index,onInput:t._priceInput}))),e.createElement("br",null),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,r.t("status")),e.createElement(l,{key:i.get("uid"),ref:"status",data:(new s).getStatusList(),value:t.props.data.status}))),e.createElement("br",null))),e.createElement(p,null,e.createElement("button",{className:"ui teal button",type:"submit"},o.t("save")))),e.createElement("div",{className:"ui four wide field"},e.createElement("div",{className:"fields twelve",style:{overflow:"scroll",maxHeight:550,display:g.length?"":"none"}},e.createElement("table",{className:"ui striped selectable unstackable table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,r.t("column_name")),e.createElement("th",{className:"right aligned"},r.t("column_value")))),e.createElement("tbody",null,g.map(function(t,n){return e.createElement(d,{name:t.name,value:t.value})})))))))))}});return h}),define("components/salary/export",["react","backbone","helper","pref","setting","querystring","language/checkin","language/default","models/checkin","components/semantic-datepicker","components/checkin/filter-employee","components/select-office"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"CheckInExportComponent",getInitialState:function(){return{models:[],hmac:""}},componentDidMount:function(){var e=this;$(".ui.form",this.getDOMNode()).form({inline:!0,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e._save()}})},_save:function(){var i=$(".ui.form",this.getDOMNode());i.addClass("loading"),new l({id:this.props.data.id}).save({company_id:a.get("cid"),creator_id:a.get("uid"),name:$('[name="name"]',i).val(),content:$('[name="content"]',i).val(),status:$(e.findDOMNode(this.refs.status)).dropdown("get value")},{success:function(){n.showSuccess(s.t("update_success")),t.history.navigate("checkin",{trigger:!0})},error:function(e,t){var a=[];t.responseJSON.error.map(function(e,t){a.push(o.t(e))}),""==a?n.showError(s.t("update_fail")):n.showError(a.join(", "))},complete:function(){i.removeClass("loading")}})},filter_employee:function(e){r.set("creator_id",e)},_unsignedInput:function(e){var t=n.strToInt(e.target.value);t=Math.abs(t),e.target.value=n.numberFormat(t)},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},_export:function(t){var r=this,s=t.nativeEvent;s.preventDefault();var l=$(e.findDOMNode(this.refs["select-office"])).dropdown("get value");if(!isNaN(l)&&l>0){var c=i.rooturl+$(e.findDOMNode(this.refs.export)).attr("data-url");if(""!=r.state.hmac){var d=r._getExportUrl(c,r.state.hmac);window.open(d,n.getWindowTarget())}else{var u={company_id:a.get("cid"),user_id:a.get("uid")};$.ajax({url:c,method:"GET",data:u,dataType:"json",success:function(e){if(""!=e.hmac){var t=r._getExportUrl(c,e.hmac);r.setState({hmac:e.hmac}),window.open(t,n.getWindowTarget())}}})}}else n.showError(o.t("error_office_id_is_required"))},_getDataQuery:function(t){var n=(t?1:r.get("page"),{company_id:a.get("cid"),user_id:a.get("uid"),creator_id:r.get("creator_id"),office_id:$(e.findDOMNode(this.refs["select-office"])).dropdown("get value"),date_started:r.get("date_started")||0,date_ended:r.get("date_ended")||0});return!isNaN(r.get("status"))&&r.get("status")>0&&(n.staus=r.get("status")),!isNaN(r.get("employee_id"))&&r.get("employee_id")>0&&(n.employee_id=r.get("employee_id")),null!=r.get("date")&&""!=r.get("date")&&(n.store_id=r.get("date")),!isNaN(r.get("creator_id"))&&r.get("creator_id")>0&&(n.creator_id=r.get("creator_id")),!isNaN(r.get("date_started"))&&r.get("date_started")>0&&(n.date_started=r.get("date_started")),!isNaN(r.get("date_ended"))&&r.get("date_ended")>0&&(n.date_ended=r.get("date_ended")),n},_getExportUrl:function(e,t){var n=this._getDataQuery(!0),i="";return $.each(n,function(e,t){i+=(""!=i?"&":"")+e+"="+t}),i+=(""!=i?"&":"")+"user_id="+a.get("uid"),i+=(""!=i?"&":"")+"hmac="+encodeURIComponent(t),e+="?"+i},render:function(){var t=this,n=0,a=0;r.has("date_started")&&r.get("date_started")>0?n=r.get("date_started"):(n=moment().startOf("month"),r.set("date_started",n.unix({h:0,m:0,s:0}))),r.has("date_ended")&&r.get("date_ended")>0?a=r.get("date_ended"):(a=moment().endOf("month"),r.set("date_ended",a.unix({h:23,m:59,s:59})));var i={};return i[s.t("relativeToday")]=[moment([]),moment()],i[s.t("relativeYesterday")]=[moment([]).subtract(1,"days"),moment([]).subtract(1,"seconds")],i[s.t("rel7Day")]=[moment([]).subtract(7,"days"),moment([]).subtract(1,"seconds")],i[s.t("rel30Day")]=[moment([]).subtract(30,"days"),moment([]).subtract(1,"seconds")],i[s.t("relMonthNow")]=[moment([]).startOf("month"),moment().endOf("month")],i[s.t("relMonthAgo")]=[moment([]).subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],e.createElement("div",{className:"ui segments"},e.createElement("div",{className:"ui clearing segment"},e.createElement("h3",{className:"pull-left"},e.createElement("div",{className:"ui breadcrumb"},e.createElement("a",{href:"#checkin",className:"section"},o.t("checkin")),e.createElement("div",{className:"divider"}," / "),e.createElement("div",{className:"active section"},o.t("exportexcel"))))),e.createElement("div",{style:{borderWidth:1},className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide"},e.createElement("h4",null,e.createElement("strong",null,o.t("checkin_export_info_title"))),e.createElement("p",null,o.t("checkin_export_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide"},e.createElement("div",{className:"required ten  wide field"},e.createElement("label",null,o.t("office")),e.createElement(u,{ref:"select-office"})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide"},e.createElement("div",{className:"ten  wide field"},e.createElement("label",null,o.t("employee")),e.createElement(d,{ref:"filter-employee",onChange:t.filter_employee})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field six wide"},e.createElement("div",{className:"required sixteen  wide field"},e.createElement("label",null,"Chọn ngày"),e.createElement("div",{style:{verticalAlign:"middle"},className:"item"},e.createElement(c,{ref:"datePicker",options:{format:"DD/MM/YYYY",startDate:n,endDate:a,opens:"left",timePicker:!0,timePickerIncrement:1,timePicker12Hour:!1,applyClass:"ui button green",cancelClass:"ui button secondary"},callBack:function(e,t){r.set("date_started",e.unix()),r.set("date_ended",t.unix())}}))))))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"field"},e.createElement("div",{className:"pull-left"},e.createElement("p",null,"* ",s.t("required"))),e.createElement("div",{className:"pull-right",ref:"btnupdate"},e.createElement("span",{className:"ui green button small ",onClick:t._export,ref:"export","data-url":"v1/worktrackings/export"},o.t("exportexcel"))),e.createElement("div",{style:{clear:"both"}})))))}});return m}),define("components/salary/filter-column",["react","pref","collections/employee","language/default","models/user"],function(e,t,n,a,i){var r=(e.createClass({displayName:"FilterColumnItemComponent",getInitialState:function(){return{}},componentDidMount:function(){},render:function(){return e.createElement("div",{"data-value":this.props.value,className:"item"},this.props.text)}}),e.createClass({displayName:"FilterColumnComponent",getInitialState:function(){return{items:[]}},getInitProps:function(){return{position_class:"left"}},componentDidMount:function(){var e=this;$(this.getDOMNode()).dropdown({fullTextSearch:!0,message:{noResults:a.t("search_no_result")},onShow:e.props.onShow,onHide:e.props.onHide,onChange:e.props.onChange})},setSelected:function(e){$(this.getDOMNode()).dropdown("set selected",e)},render:function(){return e.createElement("div",{className:"ui  search selection dropdown"},e.createElement("input",{type:"hidden",name:"filters"}),e.createElement("i",{className:"filter icon"}),e.createElement("span",{className:"text"},"----"),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},e.createElement("div",{className:"ui icon search input"},e.createElement("i",{className:"search icon"}),e.createElement("input",{type:"text",placeholder:"Tìm tên cột"})),e.createElement("div",{className:"divider"}),e.createElement("div",{className:"scrolling menu"},this.props.data.map(function(t,n){return e.createElement("div",{key:n,"data-value":t,className:"item"},t)}))))}}));return r}),define("components/salary/import-item",["react","language/salary","language/default"],function(e,t,n){var a=e.createClass({displayName:"ImportItemComponent",componentDidMount:function(){$(e.findDOMNode(this)).find(".custompopup").popup({inline:!0,hoverable:!0,position:"top right"}),$(this.refs.delete.getDOMNode()).popup({on:"click",popup:this.refs["delete-confirm"].getDOMNode()})},remove:function(t){t.preventDefault();var n=this,a=t.target;$(a).addClass("loading");var i=$(e.findDOMNode(this)).data("row");n.props.onRemove(i),$(e.findDOMNode(this)).remove(),$(a).removeClass("loading")},showError:function(n){var a,i="";if(n.length>0){for(var r=0;r<n.length;r++){var o=n[r];i+="<p>"+t.t(o)+"</p>"}a=e.createElement("a",{href:"javascript:void(0)","data-html":i,className:"ui button mini icon custompopup"},e.createElement("i",{className:"tc-error icon"})),$(e.findDOMNode(this)).removeClass("positive").addClass("error"),$(e.findDOMNode(this.refs.error)).find(".custompopup").remove(),e.render(a,e.findDOMNode(this.refs.error)),$(e.findDOMNode(this.refs.error)).find(".custompopup").popup("destroy"),$(e.findDOMNode(this.refs.error)).find(".custompopup").popup({inline:!0,hoverable:!0,position:"top right"})}},showSuccess:function(){$(e.findDOMNode(this.refs.error)).find(".custompopup").popup("destroy"),$(e.findDOMNode(this)).removeClass("error").addClass("positive"),$(e.findDOMNode(this.refs.error)).find(".custompopup").remove()},_cancelDelete:function(e){e.preventDefault(),$(this.refs.delete.getDOMNode()).popup("hide")},render:function(){var a,i=this,r=i.props.item,o="";if(r.error.length>0){for(var s=0;s<r.error.length;s++){var l=r.error[s];o+="<p>"+t.t(l)+"</p>"}a=e.createElement("a",{href:"javascript:void(0)","data-html":o,className:"ui button mini icon custompopup"},e.createElement("i",{className:"tc-error icon"}))}return e.createElement("tr",{"data-row":r.data.row,className:0==r.valid?"error":""},e.createElement("td",null,r.data.row),i.props.headers.map(function(t,n){return e.createElement("td",{key:"col"+n},r.data[t])}),e.createElement("td",{className:"right aligned"},e.createElement("div",{ref:"button",className:"ui buttons mini icon basic"},e.createElement("div",{ref:"error"},a),e.createElement("a",{ref:"delete","data-content":t.t("delete"),className:"ui button mini icon remove custompopup"},e.createElement("i",{className:"tc-trash"}))),e.createElement("div",{ref:"delete-confirm",className:"ui flowing popup top left transition hidden"},e.createElement("h4",null,n.t("delete_confirm")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:i.remove,className:"ui button mini red",href:"#"},n.t("delete_button")),e.createElement("a",{onClick:this._cancelDelete,className:"ui button mini",href:"#"},n.t("cancel_button"))))))}});return a}),define("components/salary/import-preview",["react","pref","setting","eventbus","helper","backbone","language/salary","components/salary/filter-column","components/salary/import-item"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ImportPreviewModalComponent",getDefaultProps:function(){return{afterImport:function(){}}},getInitialState:function(){return{items:[],headers:[]}},componentDidMount:function(){var t=this;$(this.getDOMNode()).modal({context:$(this.getDOMNode()).parent(),onHidden:function(){a.trigger("modal:hide")}}).modal("show"),this.props.data.rows.length>0?($(e.findDOMNode(this.refs["data-import"])).show(),this.setState({headers:t.props.data.headers}),this.setState({items:t.props.data.rows})):$(e.findDOMNode(this.refs["no-data"])).show()},importAction:function(t){t.preventDefault();var n=this;$(e.findDOMNode(n.refs["btn-import"])).addClass("loading");var a=n.state.items,r=(a.filter(function(e,t){return 1==e.valid}),20),s=0,l=r;if(employee=$(e.findDOMNode(this.refs.employee)).dropdown("get value"),total=$(e.findDOMNode(this.refs.total)).dropdown("get value"),""!=total&&""!=employee)n.doImport(s,l,r,a);else{var c="";""==total&&(c+=o.t("error_total_is_require")),""==employee&&(""!=c&&(c+="<br>"),c+=o.t("error_employee_is_require")),i.showError(c),$(e.findDOMNode(n.refs["btn-import"])).removeClass("loading")}},doImport:function(a,i,r,o){var s=this,l=o.slice(a,i);if(l.length>0){var c={company_id:t.get("cid"),creator_id:t.get("uid"),title:s.props.title,type:s.props.type,time:s.props.time,total:$(e.findDOMNode(this.refs.total)).dropdown("get value"),employee:$(e.findDOMNode(this.refs.employee)).dropdown("get value"),items:this.repairData(l)};$.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",url:n.rooturl+"v1/salaries/import",data:JSON.stringify(c),success:function(e){if(e.error_items.length>0)for(var t=0;t<e.error_items.length;t++){var n=e.error_items[t];"undefined"!=typeof n.rowIndex&&null!=n.rowIndex&&s.refs["row-"+n.rowIndex].showError(n.error)}if(e.success_items.length>0)for(var t=0;t<e.success_items.length;t++){var a=e.success_items[t];"undefined"!=typeof a.rowIndex&&null!=a.rowIndex&&s.refs["row-"+a.rowIndex].showSuccess()}},error:function(){},complete:function(){a=i,i=a+r,s.doImport(a,i,r,o)}})}else s.afterImport()},afterImport:function(){i.showSuccess(o.t("import_finished")),$(e.findDOMNode(this.refs["btn-import"])).removeClass("loading").hide(),this.props.afterImport()},repairData:function(e){var t=[];if(e.length>0)for(var n=0;n<e.length;n++)t.push(e[n].data);return t},removeItem:function(e){var t=this.state.items,n=t.filter(function(t,n){return t.data.row!=e});this.setState({items:n})},render:function(){var t=this,n={fullname:200,address:200};return e.createElement("div",{className:"ui long modal fullscreen"},e.createElement("div",{className:"header"},o.t("heading_import_data")),e.createElement("div",{style:{textAlign:"center"},className:"content"},e.createElement("div",{className:"ui segment"},e.createElement("div",{className:"fields",style:{paddingBottom:"8px"}},e.createElement("div",{className:"required four  wide field"},e.createElement("form",{className:"ui small form"},e.createElement("label",null,o.t("column_has_internal")+": "),e.createElement(s,{ref:"employee",name:"employee",data:t.props.data.headers})," ",e.createElement("label",null,o.t("column_has_total")+": "),e.createElement(s,{ref:"total",name:"total",data:t.props.data.headers})))),e.createElement("div",{ref:"data-import",className:"tc-scrolled",style:{display:"none"}},e.createElement("table",{style:{margin:0},className:"ui small striped selectable unstackable table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"STT"),t.props.data.headers.map(function(t,a){var i=n[t]?n[t]+"px":"";return e.createElement("th",{key:"header-"+a,style:{width:i}},t)}),e.createElement("th",null))),e.createElement("tbody",null,t.props.data.rows.map(function(n,a){return e.createElement(l,{ref:"row-"+n.data.row,key:"item-"+a,item:n,onRemove:t.removeItem,headers:t.props.data.headers})}))))),e.createElement("p",{ref:"no-data",style:{display:"none"}},o.t("no_import_data"))),e.createElement("div",{className:"actions"},e.createElement("a",{className:"ui button cancel close"},o.t("close")),e.createElement("a",{className:"ui button green",ref:"btn-import",onClick:t.importAction},o.t("import"))))}});return c}),define("components/salary/import",["react","pref","setting","eventbus","querystring","helper","components/upload","components/salary/import-preview","components/heading","language/salary","language/default","components/select-status","components/semantic-datepicker","components/formfieldaction","models/salary"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h){var f=e.createClass({displayName:"SalaryImportComponent",getInitialState:function(){return{salary_type_list:[],salary_status_list:[],salary_origin_list:[],region_list:[],month:[],year:[],displaydate:"none",displaymonth:"none",displayyear:"none"}},previewAction:function(a){var i=this,o=($(".ui.form",this.getDOMNode()),$(e.findDOMNode(this.refs.type)).dropdown("get value")),l=$(e.findDOMNode(this.refs.title)).val();if(void 0!==window.FormData){var d=new FormData,u=$(this.refs.file.getDOMNode()).find('[name="file"]');d.append("company_id",t.get("cid")),d.append("creator_id",t.get("uid")),d.append("file",u[0].files[0]),$(i.refs["btn-upload"].getDOMNode()).addClass("loading"),$.ajax({type:"POST",dataType:"json",processData:!1,contentType:!1,url:n.rooturl+"v1/salaries/readimportfile",data:d,success:function(t){e.render(e.createElement(s,{afterImport:i.afterImport,time:i.getTime(),type:o,title:l,data:t}),e.findDOMNode(i.refs["modal-wrapper"]))},error:function(){r.showError(c.t("error_import"))},complete:function(){$(i.refs["btn-upload"].getDOMNode()).removeClass("loading")}})}else r.showError(c.t("error_browser_unsuport"))},selectType:function(e){var t=new h;e!=t.TYPE_ONETIME?e==t.TYPE_DAILY?this.setState({displaydate:"",displaymonth:"none",displayyear:"none"}):e==t.TYPE_MONTHLY?this.setState({displaydate:"none",displaymonth:"",displayyear:""}):e==t.TYPE_YEARLY&&this.setState({displaydate:"none",displaymonth:"none",displayyear:""}):this.setState({displaydate:"none",displaymonth:"none",displayyear:"none"})},getTime:function(){var t=($(".ui.form",this.getDOMNode()),$(e.findDOMNode(this.refs.type)).dropdown("get value")),n=new h,a="",r=$(e.findDOMNode(this.refs.month)).val(),o=$(e.findDOMNode(this.refs.year)).val();return t!=n.TYPE_ONETIME?t==n.TYPE_MONTHLY?a=o+"-"+r+"-01":t==n.TYPE_YEARLY?a=o+"-01-01":(a=i.get("date_started"),a=moment.unix(a).format("YYYY-MM-DD")):a="",a},afterImport:function(){this.refs.file.empty()},unmountmodal:function(){e.findDOMNode(this.refs["modal-wrapper"]),e.unmountComponentAtNode(e.findDOMNode(this.refs["modal-wrapper"]))},componentWillMount:function(){a.off("modal:hide",this.unmountmodal)},getDate:function(e,t){for(var n=[],a=e;t>=a;a++)n.push(a);return n},componentDidUpdate:function(){$(e.findDOMNode(this.refs.month)).val(moment.unix(moment([]).unix([])).format("M"))},componentDidMount:function(){var e=this,n=moment().format("YYYY")-1,i=parseInt(n)+4;this.setState({month:this.getDate(1,12),year:this.getDate(n,i)}),a.on("modal:hide",this.unmountmodal),{company_id:t.get("cid"),limit:100,page:1,status:(new h).STATUS_ENABLE,sort_by:"displayorder",sort_type:"ASC"},$(".ui.form",this.getDOMNode()).form({
fields:{file:{identifier:"file",rules:[{type:"empty",prompt:c.t("error_file_required")}]}},inline:!0,keyboardShortcuts:!1,onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(t,n){t.preventDefault(),e.previewAction()}})},render:function(){var t=this,n=0,a=0;i.has("date_started")&&i.get("date_started")>0?n=i.get("date_started"):(n=moment([]).unix(),i.set("date_started",n)),i.has("date_ended")&&i.get("date_ended")>0?a=i.get("date_ended"):(a=moment().endOf("month"),i.set("date_ended",a.unix({h:23,m:59,s:59})));var r=new Object;return r[d.t("relativeToday")]=[moment([]),moment()],r[d.t("relativeYesterday")]=[moment([]).subtract(1,"days"),moment([]).subtract(1,"seconds")],r[d.t("rel7Day")]=[moment([]).subtract(7,"days"),moment([]).subtract(1,"seconds")],r[d.t("rel30Day")]=[moment([]).subtract(30,"days"),moment([]).subtract(1,"seconds")],r[d.t("relMonthNow")]=[moment([]).startOf("month"),moment().endOf("month")],r[d.t("relMonthAgo")]=[moment([]).subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],e.createElement("div",{className:"ui segments"},e.createElement(l,{link:"#salary",text:c.t("heading"),subtext:c.t("import")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide"},e.createElement("h2",null,c.t("salary_import_info_title")),e.createElement("p",null,c.t("salary_import_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields",style:{marginBottom:"1em"}},e.createElement("div",{className:"field wide required eight"},e.createElement("label",null,c.t("title")),e.createElement("input",{name:"title",ref:"title"}))),e.createElement("div",{className:"required twelve  wide fields",style:{marginBottom:"1em"}},e.createElement("div",{className:"field required four  wide "},e.createElement("label",null,c.t("type")),e.createElement(u,{onChange:t.selectType,placeholder:"---",data:(new h).getTypeList(),ref:"type",name:"type"})),e.createElement("div",{className:"field required four  wide ",style:{display:t.state.displaydate}},e.createElement("label",null,c.t("time")),e.createElement(m,{ref:"datePicker",options:{format:"DD/MM/YYYY",startDate:n,endDate:a,opens:"left",timePicker:!1,timePickerIncrement:1,singleDatePicker:!0,timePicker12Hour:!1,applyClass:"ui button green",cancelClass:"ui button secondary"},callBack:function(e,t){i.set("page",1),i.set("date_started",e.unix()),i.set("date_ended",t.unix())}})),e.createElement("div",{className:"field required four wide ",style:{display:t.state.displaymonth}},e.createElement("label",null,c.t("month")),e.createElement("select",{ref:"month"},t.state.month.map(function(t,n){return e.createElement("option",{value:t,key:n},d.t("month")+" "+t)}))),e.createElement("div",{className:"field required four wide ",style:{display:t.state.displayyear}},e.createElement("label",null,c.t("year")),e.createElement("select",{ref:"year"},t.state.year.map(function(t,n){return e.createElement("option",{value:t,key:n},d.t("year")+" "+t)})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field wide required eight"},e.createElement("label",null,c.t("file_excel")),e.createElement(o,{name:"file",ref:"file"}))))),e.createElement(p,{required:!0},e.createElement("button",{ref:"btn-upload",className:"ui green button"},c.t("upload_file"))))),e.createElement("div",{ref:"modal-wrapper"}))}});return f}),define("components/salary/item-manage",["react","helper","pref","role","models/salary","models/user","language/salary","language/default","components/datetime","components/row-creator","components/table/updatebutton"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"SalaryComponent",formattime:function(){var t=this.props.data.time.split("-");MSalary=new i;var n="-",a=this.props.data.type;a==MSalary.TYPE_DAILY?n=t[2]+"/"+t[1]+"/"+t[0]:a==MSalary.TYPE_MONTHLY?n=t[1]+"/"+t[0]:a==MSalary.TYPE_YEARLY&&(n=t[0]),$(e.findDOMNode(this.refs.time)).text(n)},getUserName:function(t,n){var a=this;new r({id:t}).fetch({success:function(t,i){$(e.findDOMNode(a.refs[n])).append(i.fullname)},complete:function(){$("#body-loader").removeClass("active")}})},checkPermisson:function(){var t=this,i=a.hasById(262),r=["btnedit"];r.length&&$.each(r,function(a,r){i?t.props.data.creator_id!=n.get("uid")&&$(e.findDOMNode(t.refs[r])).attr("href","#salary/detail/"+t.props.data.id).html('<i class="icon tc-info"></i>'):$(e.findDOMNode(t.refs[r])).attr("href","#salary/detail/"+t.props.data.id).html('<i class="icon tc-info"></i>')})},showEditActionSheet:function(e){e.preventDefault();var a={buttons:[{text:this.props.data.creator_id==n.get("uid")?s.t("update"):s.t("detail"),href:this.props.data.creator_id==n.get("uid")?"#salary/edit/"+this.props.data.id:"#salary/detail/"+this.props.data.id}]};t.showActionSheet(a)},componentDidMount:function(){this.getUserName(this.props.data.user_id,"employee"),this.formattime(),this.checkPermisson()},componentDidUpdate:function(e,t){this.checkPermisson()},renderMobile:function(){var n=(new i).getStatus(this.props.data.status),a=((new i).getSource(this.props.data.source).text,(new i).getType(this.props.data.type).text);return e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading"},this.props.data.title,e.createElement("span",{className:"ui basic label pull-right "+n.color},t.smartNumberFormat(this.props.data.total))),e.createElement("div",{className:"mitemmeta"},e.createElement("span",{ref:"employee"})," · ",o.t(a),e.createElement("br",null)," ",e.createElement(l,{ts:this.props.data.date_created}))))},renderDesktop:function(){var n=(new i).getStatus(this.props.data.status),a=((new i).getSource(this.props.data.source).text,(new i).getType(this.props.data.type).text);return e.createElement("tr",null,e.createElement("td",null,this.props.data.id),e.createElement("td",{ref:"employee"}),e.createElement("td",null,e.createElement("a",{href:"#salary/edit/"+this.props.data.id,title:o.t("update")},this.props.data.title)),e.createElement("td",{className:"right aligned"},t.smartNumberFormat(this.props.data.total)),e.createElement("td",null,o.t(a)),e.createElement("td",null,e.createElement("span",{ref:"time"},this.props.data.time)," (",o.t("paidindex_label"),this.props.data.paid_index,")"),e.createElement("td",null,e.createElement("span",{ref:"status",className:"ui small label simple "+n.color},n.text)),e.createElement(c,{id:this.props.data.creator_id}),e.createElement("td",null,e.createElement(l,{ts:this.props.data.date_created})),e.createElement("td",{className:"right aligned"},e.createElement("span",{ref:"btnedit"},e.createElement(d,{link:"#salary/edit/"+this.props.data.id}))))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return u}),define("components/salary/item",["react","helper","eventbus","pref","role","models/salary","models/user","language/salary","language/default","components/datetime"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"SalaryComponent",formattime:function(){var t=this.props.data.time.split("-");MSalary=new r;var n="-",a=this.props.data.type;a==MSalary.TYPE_DAILY?n=t[2]+"/"+t[1]+"/"+t[0]:a==MSalary.TYPE_MONTHLY?n=t[1]+"/"+t[0]:a==MSalary.TYPE_YEARLY&&(n=t[0]),$(e.findDOMNode(this.refs.time)).text(n)},getUserName:function(t,n){var a=this;new o({id:t}).fetch({success:function(t,i){$(e.findDOMNode(a.refs[n])).append(i.fullname)},complete:function(){$("#body-loader").removeClass("active")}})},viewDetail:function(){n.trigger("salary:viewdetail",this.props.data)},checkPermisson:function(){var t=this,n=i.hasById(262),r=["btnedit"];r.length&&$.each(r,function(i,r){n?t.props.data.creator_id!=a.get("uid")&&$(e.findDOMNode(t.refs[r])).attr("href","#salary/detail/"+t.props.data.id).html('<i class="icon tc-info"></i>'):$(e.findDOMNode(t.refs[r])).attr("href","#salary/detail/"+t.props.data.id).html('<i class="icon tc-info"></i>')})},showEditActionSheet:function(e){e.preventDefault();var n={buttons:[{text:l.t("detail"),href:"#salary/detail/"+this.props.data.id}]};t.showActionSheet(n)},componentDidMount:function(){this.getUserName(this.props.data.user_id,"employee"),this.formattime(),this.checkPermisson()},componentDidUpdate:function(e,t){this.checkPermisson()},renderMobile:function(){var n=(new r).getStatus(this.props.data.status),a=((new r).getSource(this.props.data.source).text,(new r).getType(this.props.data.type).text);return e.createElement("tr",null,e.createElement("td",null,e.createElement("a",{href:"#",onClick:this.showEditActionSheet,className:"mitemmore"},e.createElement("i",{className:"icon tc-more-alt"})),e.createElement("div",{className:"mitemheading"},this.props.data.title,e.createElement("span",{className:"ui basic label pull-right "+n.color},t.smartNumberFormat(this.props.data.total))),e.createElement("div",{className:"mitemmeta"},e.createElement("span",{ref:"employee"})," · ",s.t(a),e.createElement("br",null)," ",e.createElement(c,{ts:this.props.data.date_created}))))},renderDesktop:function(){var n=(new r).getStatus(this.props.data.status),a=((new r).getSource(this.props.data.source).text,(new r).getType(this.props.data.type).text);return e.createElement("tr",null,e.createElement("td",null,this.props.data.id),e.createElement("td",{ref:"employee"}),e.createElement("td",null,e.createElement("a",{href:"javascript:void(0)",onClick:this.viewDetail},this.props.data.title)),e.createElement("td",{className:"right aligned"},t.smartNumberFormat(this.props.data.total)),e.createElement("td",null,s.t(a)),e.createElement("td",null,e.createElement("span",{ref:"time"},this.props.data.time),"(",s.t("paidindex_label"),this.props.data.paid_index,")"),e.createElement("td",null,e.createElement("span",{ref:"status",className:"ui small label simple "+n.color},n.text)),e.createElement("td",null,e.createElement(c,{ts:this.props.data.date_created})))},render:function(){return t.isMobileScreen()?this.renderMobile():this.renderDesktop()}});return d}),define("components/select/employee",["react","pref","cacheddata","collections/employee","models/employee","models/user","language/employee","components/mixin/select"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"SelectEmployeeItemComponent",getDefaultProps:function(){return{data:null,fullname:""}},componentDidMount:function(){var t=this;new r({id:this.props.data.user_id}).fetch({success:function(n,a){$(e.findDOMNode(t)).text(a.fullname)}})},render:function(){return e.createElement("div",{className:"item","data-value":this.props.data.user_id},this.props.fullname)}}),c=e.createClass({displayName:"SelectEmployeeComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{className:"",placeholder:"----",value:0,name:""}},val:function(t){return"undefined"==typeof t?$(e.findDOMNode(this)).dropdown("get value"):(this.props.value=t,void this.forUpdate())},_loadDataLive:function(n){n=n||1;var r=this;$(e.findDOMNode(this)).addClass("loading"),(new a).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,status:(new i).STATUS_ENABLE,page:n},success:function(t,a){var i=r.state.items;if(1==n&&null!=r.props.optionDefault){var o=r.props.optionDefault;i=o.concat(i)}r.setState({items:i.concat(a.items)}),Math.ceil(a.total/a.limit)>a.currentpage?r._loadDataLive(a.currentpage+1):$(e.findDOMNode(r)).removeClass("loading")},error:function(){$(e.findDOMNode(r)).removeClass("loading")}})},_load:function(e){var t=n.get(e);void 0===t?this._loadDataLive(1):this.setState({items:t().get()})},_loadData:function(){this._load((new i).cacheName)},componentDidUpdate:function(){$(e.findDOMNode(this)).dropdown("refresh"),null!=this.props.value&&this.props.value>0&&$(e.findDOMNode(this)).dropdown("set exactly",this.props.value)},componentDidMount:function(){this._loadData();var t=this;$(e.findDOMNode(this)).dropdown({maxSelections:1,onChange:this.props.onChange,onAdd:function(e,n,a){$(this).addClass("dropdownwithitem").removeClass("dropdownnoitem"),"function"==typeof t.props.onAdd&&t.props.onAdd(e,n,a)},onRemove:function(e,n,a){$("> .ui.label",this).length>0&&($(this).removeClass("dropdownwithitem").addClass("dropdownnoitem"),"function"==typeof t.props.onRemove&&t.props.onRemove(e,n,a))}})},render:function(){return e.createElement("div",{style:{minWidth:0},className:"ui "+this.props.className+" multiple floating dropdown basic labeled search icon button"},e.createElement("input",{name:this.props.name,type:"hidden",defaultValue:this.props.value}),e.createElement("i",{className:"tc-user icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},this.state.items.map(function(t){return t.user_id>0?e.createElement(l,{fullname:t.fullname,data:t,key:t.id}):void 0})))}});return c}),define("components/salary/modal-detail",["react","backbone","eventbus","helper","pref","companysetting","querystring","language/salary","language/default","models/salary","models/user","components/salary/detail-item","components/select/employee","components/select-status","components/semantic-datepicker","components/headingdatepicker"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f){var g=e.createClass({displayName:"ModalExportSummaryComponent",getInitialState:function(){return{modelitems:[],detail:[],month:[],year:[],displaydate:"none",displaymonth:"none",displayyear:"none"}},getDate:function(e,t){for(var n=[],a=e;t>=a;a++)n.push(a);return n},setTime:function(){var t=[],n=a.formatTime(this.props.data.time,!0,"YYYY-MM-DD");"Invalid date"===n||"0000-00-00"==this.props.data.time?(o.set("date_started",moment().unix()),n=moment().unix()):(t.push(a.formatTime(n,!1,"MM")),t.push(a.formatTime(n,!1,"YYYY")),o.set("date_started",n)),$(e.findDOMNode(this.refs.datePicker.refs.bootstrap_datepicker_input)).data("daterangepicker").setEndDate(moment.unix(n).format("DD/MM/YYYY")),$(e.findDOMNode(this.refs.month)).text(parseInt(t[0])),$(e.findDOMNode(this.refs.year)).text(parseInt(t[1]))},getTime:function(){var t=($(".ui.form",this.getDOMNode()),$(e.findDOMNode(this.refs.type)).dropdown("get value")),n=new c,a="",i=$(e.findDOMNode(this.refs.month)).val(),r=$(e.findDOMNode(this.refs.year)).val();return t!=n.TYPE_ONETIME?t==n.TYPE_MONTHLY?a=r+"-"+i+"-01":t==n.TYPE_YEARLY?a=r+"-01-01":(a=o.get("time"),a=moment.unix(a).format("YYYY-MM-DD")):a="",a},selectType:function(e){var t=new c;e!=t.TYPE_ONETIME?e==t.TYPE_DAILY?this.setState({displaydate:"",displaymonth:"none",displayyear:"none"}):e==t.TYPE_MONTHLY?this.setState({displaydate:"none",displaymonth:"",displayyear:""}):e==t.TYPE_YEARLY&&this.setState({displaydate:"none",displaymonth:"none",displayyear:""}):this.setState({displaydate:"none",displaymonth:"none",displayyear:"none"})},getEmployee:function(){var t=this;new d({id:this.props.data.user_id}).fetch({success:function(n,i){$(e.findDOMNode(t.refs.employeename)).html('<img class="ui avatar image" src="'+a.getAvatarPath(i.avatar)+'" />'+i.fullname)}})},_codeFormat:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-]/g,"");e.target.value=t},componentDidUpdate:function(){this.setTime()},componentDidMount:function(){$(e.findDOMNode(this.refs.total)).autoNumeric(r.numberoption());var t=moment().format("YYYY")-1,a=parseInt(t)+4;this.setState({month:this.getDate(1,12),year:this.getDate(t,a)}),this.selectType(this.props.data.type),this.setTime(),this.getEmployee(),$(".ui.modal",e.findDOMNode(this)).modal({context:e.findDOMNode(this),autofocus:!1,onShow:function(){},onHide:function(){n.trigger("salary:modalhide")}}).modal("show")},render:function(){var t=this,n=0,a=0;o.has("date_started")&&o.get("date_started")>0?n=o.get("date_started"):(n=moment([]).unix(),o.set("date_started",n)),o.has("date_ended")&&o.get("date_ended")>0?a=o.get("date_ended"):(a=moment().endOf("month"),o.set("date_ended",a.unix({h:23,m:59,s:59})));var i=[];if(""!=this.props.data.detail){var r=jQuery.parseJSON(this.props.data.detail);"object"==typeof r&&$.each(r,function(e,t){var n={};n.value=t,n.name=e,i.push(n)})}return e.createElement("div",null,e.createElement("div",{className:"ui long modal"},e.createElement("div",{className:"header"},s.t("detail")),e.createElement("div",{className:"content ui segment"},e.createElement("form",{className:"ui form"},e.createElement("input",{type:"hidden",value:"",ref:"itemselect"}),e.createElement("div",{className:"ui two column grid"},e.createElement("div",{className:"ui column"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field"},e.createElement("label",null,s.t("employee")),e.createElement("div",{ref:"employeename"}))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field"},e.createElement("label",null,s.t("type")),e.createElement("span",null,(new c).getType(t.props.data.type).text)),e.createElement("div",{className:"field",readOnly:!0,style:{display:t.state.displaydate}},e.createElement("label",null,s.t("time")),e.createElement(h,{ref:"datePicker",options:{format:"DD/MM/YYYY",startDate:n,endDate:a,opens:"left",timePicker:!1,timePickerIncrement:1,singleDatePicker:!0,timePicker12Hour:!1,applyClass:"ui button green",cancelClass:"ui button secondary"},callBack:function(e,t){o.set("page",1),o.set("time",e.unix())}})),e.createElement("div",{className:" four wide field",style:{display:t.state.displaymonth}},e.createElement("label",null,s.t("month")),e.createElement("span",{ref:"month"})),e.createElement("div",{className:" four wide field",style:{display:t.state.displayyear}},e.createElement("label",null,s.t("year")),e.createElement("span",{ref:"year"}))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field"},e.createElement("label",null,s.t("title")),e.createElement("span",null,t.props.data.title))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field"},e.createElement("label",null,s.t("total")),e.createElement("span",{ref:"total"},t.props.data.total))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field"},e.createElement("label",null,s.t("paidindex")),e.createElement("span",null,t.props.data.paid_index))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field"},e.createElement("label",null,s.t("status")),e.createElement("span",null,(new c).getStatus(t.props.data.status).text)))),e.createElement("div",{className:"ui column"},e.createElement("div",{className:"fields twelve",style:{display:i.length?"":"none"}},e.createElement("table",{className:"ui striped selectable unstackable table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,s.t("column_name")),e.createElement("th",{className:"right aligned"},s.t("column_value")))),e.createElement("tbody",null,i.map(function(t,n){return e.createElement(u,{key:n,name:t.name,value:t.value})})))))))),e.createElement("div",{className:"actions"},e.createElement("a",{className:"ui button cancel close"},l.t("close")))))}});return g}),define("components/select/assigneetype",["react","pref","language/projecttask","components/mixin/select"],function(e,t,n,a){var i=e.createClass({displayName:"SelectComponent",mixins:[a],_loadData:function(e){var t=[{id:"me",name:n.t("assigned_to_me")},{id:"other",name:n.t("assigned_to_others")}];this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/select/checkinstatus",["react","pref","models/checkin","components/mixin/select"],function(e,t,n,a){var i=e.createClass({displayName:"SelectComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/select/employeepointstatus",["react","pref","models/employeepoint","components/mixin/select"],function(e,t,n,a){var i=e.createClass({displayName:"SelectComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/select/employeepointtopic",["react","pref","role","collections/employeepointtopic","models/employeepointtopic","components/mixin/select"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"SelectComponent",mixins:[r],_loadData:function(e){var n=this,r={company_id:t.get("cid"),is_not_deleted:1,status:(new i).STATUS_ENABLE,page:e,sort_by:"display_order",sort_type:"ASC"};(new a).fetch({data:r,success:function(e,t){n.setState({items:n.state.items.concat(t.items)}),Math.ceil(t.total/t.limit)>t.currentpage&&n._loadData(t.currentpage+1)}})},render:function(){return this.renderItem()}});return o}),define("components/select/employeepointtopicstatus",["react","pref","models/employeepointtopic","components/mixin/select"],function(e,t,n,a){var i=e.createClass({displayName:"SelectComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/select/employeepointtopictype",["react","pref","models/employeepointtopic","components/mixin/select"],function(e,t,n,a){var i=e.createClass({displayName:"SelectComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getTypeList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/select/projectstatus",["react","pref","models/project","components/mixin/select"],function(e,t,n,a){var i=e.createClass({displayName:"SelectComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/select/projecttaskpriority",["react","pref","models/projecttask","components/mixin/select"],function(e,t,n,a){var i=e.createClass({displayName:"SelectComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getPriorityList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/select/projecttaskstatus",["react","pref","models/projecttask","components/mixin/select"],function(e,t,n,a){var i=e.createClass({displayName:"SelectComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/select/region",["react","pref","collections/region","models/region","components/mixin/select"],function(e,t,n,a,i){var r=e.createClass({displayName:"SelectComponent",mixins:[i],reloadData:function(e,t){var i=this;i.setState({items:[]}),(new n).fetch({data:{parent_id:e||0,is_not_deleted:1,country:this.props.country,status:(new a).STATUS_ENABLE,sort_by:"display_order",sort_type:"ASC",page:t},success:function(t,n){i.setState({items:i.state.items.concat(n.items)}),n.currentpage<Math.ceil(n.total/n.limit)&&i.reloadData(e,n.currentpage+1)}})},_loadData:function(e){var i=this;this.props.parent_id>=0&&(new n).fetch({data:{company_id:t.get("cid"),is_not_deleted:1,parent_id:this.props.parent_id,country:this.props.country,status:(new a).STATUS_ENABLE,page:e,sort_by:"display_order",sort_type:"ASC"},success:function(e,t){i.setState({items:i.state.items.concat(t.items)}),Math.ceil(t.total/t.limit)>t.currentpage&&i._loadData(t.currentpage+1)}})},render:function(){return this.renderItem()}});return r}),define("components/select/salarysource",["react","pref","models/salary","components/mixin/select"],function(e,t,n,a){var i=e.createClass({displayName:"SelectComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getSourceList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/select/salarystatus",["react","pref","models/salary","components/mixin/select"],function(e,t,n,a){var i=e.createClass({displayName:"SelectComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getStatusList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/select/salarytype",["react","pref","models/salary","components/mixin/select"],function(e,t,n,a){var i=e.createClass({displayName:"SelectComponent",mixins:[a],_loadData:function(e){var t=[];(new n).getTypeList().map(function(e,n){t.push({id:e.code,name:e.text})}),this.setState({items:t})},render:function(){return this.renderItem()}});return i}),define("components/select/signs",["react","pref","components/mixin/select"],function(e,t,n){var a=e.createClass({displayName:"SelectComponent",mixins:[n],_loadData:function(e){var t=[{id:"+",name:"+"},{id:"-",name:"-"}];this.setState({items:t})},render:function(){return this.renderItem()}});return a}),define("components/select-autocomplete/mixin",["react","helper","pref"],function(e,t,n){return{getInitialState:function(){return{value:this.props.value,hasSelected:!1}},setQuery:function(e){this.state.query=e},parseQuery:function(){var e=$.extend({},this.state.query,{company_id:n.get("cid"),is_not_deleted:1,limit:this.props.maxResults,sort_by:"id",sort_type:"DESC"});return e},getValue:function(){return $.trim($(e.findDOMNode(this)).dropdown("get value"))},setValue:function(t){var n=this.generateValue(t);return $(e.findDOMNode(this)).dropdown("set exactly",n),this},val:function(e){return void 0==e?this.getValue():this.setValue(e)},getOptions:function(){var e=this,n=this.myCollection.url+"?keyword={query}",a={maxSelections:this.props.maxSelections,message:t.getDropdownMessage(),showOnFocus:!1,forceSelection:!1,className:{label:"ui label"},apiSettings:{url:t.appendToken(n),cache:!1,data:this.parseQuery(),onRequest:function(t,n){var a=$.trim($("input.search",this).val());a.length<e.props.minCharacters&&$(this).api("abort")},onResponse:function(t){var n=[];t.items.forEach(function(t){var a={value:t.id,name:$.trim(t.name)};$.isFunction(e.parseLabelText)&&(a.name=e.parseLabelText(t)),n.push(a)}),n.sort(function(e,t){return e.name>t.name});var a={results:n};return a},onFailure:function(e,t){return!1}},onAdd:this.props.onAdd,onRemove:this.props.onRemove,onShow:this.props.onShow,onHide:function(){$("input.search",this).val(""),$("> .text",this).removeClass("filtered"),$.isFunction(e.props.onHide)&&e.props.onHide()},onChange:function(t,n,a){$(this).dropdown("hide"),e.setState({value:t,hasSelected:!0},function(){$.isFunction(e.props.onChange)&&e.props.onChange(t,n,a)})},onLabelCreate:function(n,a){var i=this,r=t.strToInt(n);if(r>0){var o=e.myCollection.model;new o({id:r}).fetch({success:function(t,n){var r="";if(r=$.isFunction(e.parseLabelText)?e.parseLabelText(n):$.trim(n.name),r.length>0){var o=$(i).html().replace(a,r);$(i).html(o)}}})}return this}};return void 0===a.maxSelections&&(a.maxSelections=5),a},generateValue:function(e){var n=this;e=$.trim(e);var a=[];return e.length<=0?a:($.each(e.split(","),function(e,i){return t.strToInt(i)>0&&a.push($.trim(i)),!(n.getOptions().maxSelections&&a.length>=n.getOptions().maxSelections)&&void 0}),a)},initDropdown:function(){$(e.findDOMNode(this)).dropdown("destroy");var t=$.trim(e.findDOMNode(this.refs.input).value),n=this.generateValue(t),a=n.length>0?n.join(","):"";e.findDOMNode(this.refs.input).value=a,this.state.value=a,$(".ui.label",e.findDOMNode(this)).each(function(){var e=$(this).data("value")+"";$.inArray(e,n)<0&&$(this).remove()}),$(e.findDOMNode(this)).dropdown(this.getOptions())},getClassName:function(){return"ui "+this.props.className+" multiple search selection dropdown tc-select-autocomplete"},focus:function(){$(e.findDOMNode(this.refs.search)).focus()},componentWillReceiveProps:function(e){this.state.hasSelected||(this.state.value=e.value),$.isFunction(this.willReceiveProps)&&this.willReceiveProps(e)},componentDidUpdate:function(){this.initDropdown(),$.isFunction(this.didUpdate)&&this.didUpdate()},componentDidMount:function(){this.initDropdown(),$.isFunction(this.didMount)&&this.didMount()},render:function(){return e.createElement("div",{className:this.getClassName()},e.createElement("input",{ref:"input",type:"hidden",name:this.props.name,value:this.state.value}),e.createElement("input",{ref:"search",style:{minWidth:10},className:"search"}),e.createElement("div",{className:"default text"},this.props.placeholder))}}}),define("components/select-color",["react","language/default","pref"],function(e,t,n){var a=e.createClass({displayName:"SelectColorComponent",getDefaultProps:function(){return{name:"color",value:-1,placeholder:"-----",className:"",multiple:!1,colorList:[{name:t.t("gray"),value:"#767676"},{name:t.t("green"),value:"#21ba45"},{name:t.t("blue"),value:"#1678c2"},{name:t.t("purple"),value:"#a333c8"},{name:t.t("yellow"),value:"#FBBD08"},{name:t.t("red"),value:"#d01919"}]}},getValue:function(){return $(e.findDOMNode(this)).dropdown("get value")},initSelectedValue:function(){this.props.multiple?$(this.getDOMNode()).dropdown("refresh"):$(this.getDOMNode()).dropdown("refresh").dropdown("set selected",this.props.value)},componentDidUpdate:function(){this.initSelectedValue()},componentWillUnmount:function(){},componentDidMount:function(){var n=this;$(e.findDOMNode(this)).dropdown({fullTextSearch:!0,onAdd:function(t,a,i){$(e.findDOMNode(n)).dropdown("hide")},message:{noResults:t.t("search_no_result")}}),this.initSelectedValue()},render:function(){return e.createElement("div",{className:"ui "+this.props.className+(this.props.fluid?" fluid":"")+(this.props.multiple?" multiple":"")+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},this.props.multiple?"":e.createElement("div",{className:"item","data-value":"-1"},this.props.placeholder),this.props.colorList.map(function(t,n){return e.createElement("div",{className:"item",key:t.value,"data-value":t.value},e.createElement("span",{className:"ui empty circular label",style:{background:t.value}})," ",t.name)})))}});return a}),define("components/select-day",["react","language/default"],function(e,t){var n=e.createClass({displayName:"SelectMultiComponent",getDefaultProps:function(){return{multiple:!0,options:{fullTextSearch:!0,message:{noResults:t.t("search_no_result")}}}},componentDidMount:function(){var e=this,t=e.props.options;if(0==e.props.multiple&&(t.maxSelections=1),$(this.getDOMNode()).dropdown(t),1==e.props.multiple){var n=[];if(e.props.value.length>0)for(var a=0;a<e.props.value.length;a++){var i=e.props.value[a].toString();n.push(i)}$(this.getDOMNode()).dropdown("refresh").dropdown("set selected",n)}else $(this.getDOMNode()).dropdown("refresh").dropdown("set selected",e.props.value)},render:function(){for(var n=[],a=[t.t("monday"),t.t("tuesday"),t.t("wednesday"),t.t("thursday"),t.t("friday"),t.t("saturday"),t.t("sunday")],i=0;6>=i;i++){var r=e.createElement("div",{className:"item",key:i,"data-value":i},a[i]);n.push(r)}return e.createElement("div",{className:"ui "+this.props.className+" multiple search selection dropdown"},e.createElement("input",{type:"hidden"}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{
className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},n))}});return n}),define("components/select-dayhour",["react","pref","language/default"],function(e,t,n){var a=e.createClass({displayName:"SelectDayHourComponent",getDefaultProps:function(){return{name:"dayhour",value:-1,placeholder:"----",className:"",multiple:!1}},componentDidUpdate:function(){this.props.multiple?$(this.getDOMNode()).dropdown("refresh"):$(this.getDOMNode()).dropdown("refresh").dropdown("set selected",this.props.value)},componentWillUnmount:function(){},componentDidMount:function(){var t=this;$(this.getDOMNode()).dropdown({fullTextSearch:!0,onAdd:function(n,a,i){$(e.findDOMNode(t)).dropdown("hide")},message:{noResults:n.t("search_no_result")}})},render:function(){return e.createElement("div",{className:"ui "+this.props.className+(this.props.fluid?" fluid":"")+(this.props.multiple?" multiple":"")+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},this.props.multiple?"":e.createElement("div",{className:"item","data-value":"-1"},this.props.placeholder),e.createElement("div",{className:"item","data-value":"0"},"00"),e.createElement("div",{className:"item","data-value":"1"},"01"),e.createElement("div",{className:"item","data-value":"2"},"02"),e.createElement("div",{className:"item","data-value":"3"},"03"),e.createElement("div",{className:"item","data-value":"4"},"04"),e.createElement("div",{className:"item","data-value":"5"},"05"),e.createElement("div",{className:"item","data-value":"6"},"06"),e.createElement("div",{className:"item","data-value":"7"},"07"),e.createElement("div",{className:"item","data-value":"8"},"08"),e.createElement("div",{className:"item","data-value":"9"},"09"),e.createElement("div",{className:"item","data-value":"10"},"10"),e.createElement("div",{className:"item","data-value":"11"},"11"),e.createElement("div",{className:"item","data-value":"12"},"12"),e.createElement("div",{className:"item","data-value":"13"},"13"),e.createElement("div",{className:"item","data-value":"14"},"14"),e.createElement("div",{className:"item","data-value":"15"},"15"),e.createElement("div",{className:"item","data-value":"16"},"16"),e.createElement("div",{className:"item","data-value":"17"},"17"),e.createElement("div",{className:"item","data-value":"18"},"18"),e.createElement("div",{className:"item","data-value":"19"},"19"),e.createElement("div",{className:"item","data-value":"20"},"20"),e.createElement("div",{className:"item","data-value":"21"},"21"),e.createElement("div",{className:"item","data-value":"22"},"22"),e.createElement("div",{className:"item","data-value":"23"},"23")))}});return a}),define("components/select-month",["react","language/default"],function(e,t){var n=e.createClass({displayName:"SelectMultiComponent",getDefaultProps:function(){return{multiple:!0,options:{fullTextSearch:!0,message:{noResults:t.t("search_no_result")}}}},componentDidMount:function(){var e=this,t=e.props.options;if(0==e.props.multiple&&(t.maxSelections=1),$(this.getDOMNode()).dropdown(t),1==e.props.multiple){var n=[];if(e.props.value.length>0)for(var a=0;a<e.props.value.length;a++){var i=e.props.value[a].toString();n.push(i)}$(this.getDOMNode()).dropdown("refresh").dropdown("set selected",n)}else $(this.getDOMNode()).dropdown("refresh").dropdown("set selected",e.props.value)},render:function(){for(var n=[],a=[t.t("january"),t.t("february"),t.t("march"),t.t("april"),t.t("may"),t.t("june"),t.t("july"),t.t("august"),t.t("september"),t.t("october"),t.t("november"),t.t("december")],i=0;11>=i;i++){var r=e.createElement("div",{className:"item",key:i,"data-value":i},a[i]);n.push(r)}return e.createElement("div",{className:"ui "+this.props.className+" multiple search selection dropdown"},e.createElement("input",{type:"hidden"}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},n))}});return n}),define("components/select-multi",["react"],function(e){var t=e.createClass({displayName:"SelectMultiComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{data:[],className:"",value:"",placeholder:"",options:{}}},getValue:function(){return $(e.findDOMNode(this)).dropdown("refresh"),$.trim($(e.findDOMNode(this)).dropdown("get value"))},setValue:function(t){$(e.findDOMNode(this)).dropdown("refresh");var n=[];return t+="",t.length>0&&(n=t.split(",")),$(e.findDOMNode(this)).dropdown("set exactly",n),this},val:function(e){return void 0==e?this.getValue():this.setValue(e)},focus:function(){$("input.search",e.findDOMNode(this)).focus()},componentDidMount:function(){var t=this,n=$.extend({},this.props.options,{fullTextSearch:!0,allowAdditions:!0,className:{label:"ui label"},onAdd:function(n,a,i){$.isFunction(t.props.onAdd)&&t.props.onAdd(n,a,i),$(e.findDOMNode(t)).dropdown("hide")},onRemove:function(e,n,a){$.isFunction(t.props.onRemove)&&t.props.onRemove(e,n,a)},onShow:this.props.onShow,onHide:this.props.onHide,onChange:this.props.onChange,maxSelections:this.props.maxSelections});"undefined"==typeof n.maxSelections&&(n.maxSelections=5),$(this.getDOMNode()).dropdown(n),this.val(this.props.value),$.isFunction(t.props.keydown)&&$(this.getDOMNode()).keydown(function(e){13==e.keyCode&&t.props.keydown()})},render:function(){return e.createElement("div",{className:"ui "+this.props.className+" multiple search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},this.props.data.map(function(t){return e.createElement("div",{className:"item",key:t.value,"data-value":t.value},t.text)})))}});return t}),define("components/select-multiple/mixin",["react","helper","pref","cacheddata"],function(e,t,n,a){return{getInitialState:function(){return{items:$.isArray(this.props.items)?this.props.items.slice():[],value:this.props.value,hasSelected:!1}},setQuery:function(e){this.state.query=e},getCachedData:function(){var e=this.myCollection.model,t=(new e).cacheName;return a.get(t)},parseQuery:function(e){var e=t.strToInt(e);0>=e&&(e=1);var a=$.extend({},this.state.query,{company_id:n.get("cid"),is_not_deleted:1,sort_by:this.props.sortBy||"name",sort_type:this.props.sortType||"ASC",limit:this.myCollection.maxLimit,page:e});return a},loadDataLive:function(e,t,n){var a=n||$.Deferred();return $.isArray(t)||(t=[]),this.myCollection.fetch({data:this.parseQuery(e),success:function(e,n){t=t.concat(n.items),Math.ceil(n.total/n.limit)>n.currentpage?this.loadDataLive(n.currentpage+1,t,a):a.resolve(t)},error:function(){a.resolve(t)}}),a.promise()},loadDataCache:function(e,t,n){var a=n||$.Deferred();$.isArray(t)||(t=[]);var i=this.myCollection.fetchFromCache(this.parseQuery(e));return t=t.concat(i.items),Math.ceil(i.total/i.limit)>i.currentpage?t=this.loadDataCache(i.currentpage+1,t,a):a.resolve(t),a.promise()},loadData:function(){var e=this,t=this.loadDataCache;this.getCachedData()||(t=this.loadDataLive);var n=[];$.when(t()).done(function(e){n=e}).always(function(){e.hideLoading(),e.setState({items:n})})},loadDataComplete:function(t,n){var a=this;this.state.items=t;var i=this.generateValue(this.state.value),r=i.length>0?i.join(","):"";e.findDOMNode(this.refs.input).value=r,this.state.value=r,$(".ui.label",e.findDOMNode(this)).each(function(){var e=$(this).data("value")+"";$.inArray(e,i)<0&&$(this).remove()}),this.forceUpdate(function(){a.hideLoading(),$.isFunction(n)&&n()})},getValue:function(){return $.trim($(e.findDOMNode(this)).dropdown("get value"))},setValue:function(t){var n=this.generateValue(t);return $(e.findDOMNode(this)).dropdown("set exactly",n),this},val:function(e){return void 0==e?this.getValue():this.setValue(e)},getData:function(e){var t=this.state.items.filter(function(t){return t.id+""==e+""}).shift();return $.isEmptyObject(t)&&(t={}),t},getOptions:function(){var n=this,a={fullTextSearch:!0,className:{label:"ui label"},onAdd:function(t,a,i){$.isFunction(n.props.onAdd)&&n.props.onAdd(t,a,i),$(e.findDOMNode(n)).dropdown("hide")},onRemove:this.props.onRemove,onShow:this.props.onShow,onHide:this.props.onHide,onChange:function(e,t,a){n.setState({value:e,hasSelected:!0},function(){$.isFunction(n.props.onChange)&&n.props.onChange(e,t,a)})},maxSelections:this.props.maxSelections,allowAdditions:this.props.allowAdditions,message:t.getDropdownMessage()};return void 0===a.maxSelections&&(a.maxSelections=5),a},generateValue:function(e){var t=this;e=$.trim(e);var n=[];return e.length<=0?n:(this.getOptions().allowAdditions===!0?$.each(e.split(","),function(e,a){return n.push($.trim(a)),!(t.getOptions().maxSelections&&n.length>=t.getOptions().maxSelections)&&void 0}):$.each(e.split(","),function(e,a){var i=t.getData($.trim(a));return $.isEmptyObject(i)||n.push(i.id+""),!(t.getOptions().maxSelections&&n.length>=t.getOptions().maxSelections)&&void 0}),n)},initDropdown:function(){$(e.findDOMNode(this)).dropdown("destroy").dropdown(this.getOptions())},showLoading:function(){$(e.findDOMNode(this)).addClass("loading")},hideLoading:function(){$(e.findDOMNode(this)).removeClass("loading")},getClassName:function(){return"ui "+this.props.className+" multiple search selection dropdown tc-select-multiple"},focus:function(){$(e.findDOMNode(this.refs.search)).focus()},componentWillReceiveProps:function(e){this.state.hasSelected||(this.state.value=e.value),$.isFunction(this.willReceiveProps)&&this.willReceiveProps(e)},componentDidUpdate:function(){this.initDropdown(),$.isFunction(this.didUpdate)&&this.didUpdate()},componentDidMount:function(){this.initDropdown(),$.isFunction(this.didMount)&&this.didMount()},renderMenuItems:function(){var t=this.props.textField||"name";return this.state.items.map(function(n){return e.createElement("div",{key:n.id,className:"item","data-value":n.id},n[t])})},render:function(){return e.createElement("div",{className:this.getClassName()},e.createElement("input",{ref:"input",type:"hidden",name:this.props.name,value:this.state.value}),e.createElement("input",{ref:"search",style:{minWidth:10},className:"search"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},this.props.hideEmptyOption?null:e.createElement("div",{className:"item","data-value":this.props.emptyOptionValue||""},this.props.placeholder),$.isFunction(this.customMenuItems)?this.customMenuItems():this.renderMenuItems()))}}}),define("components/select-multiple/employee",["react","helper","components/select-multiple/mixin","collections/employee","models/user"],function(e,t,n,a,i){var r=e.createClass({displayName:"SelectMultipleEmployeeComponent",mixins:[n],myCollection:new a,getDefaultProps:function(){return $.extend({},t.getDropdownDefaultProps(),{allowAdditions:!1,hideEmptyOption:!0})},loadUser:function(e){var n=$.Deferred();return e=t.strToInt(e),0>=e?(n.reject(),n.promise()):(new i({id:e}).fetch({success:function(e,t){t.id<=0?n.reject():n.resolve(t)},error:function(e,t){n.reject()}}),n.promise())},_loadData:function(){var e=this,t=this.loadDataCache;this.getCachedData()||(t=this.loadDataLive);var n=[];$.when(t()).done(function(t){if(t.length>0){var a=0;t.forEach(function(i){$.when(e.loadUser(i.user_id)).done(function(e){n.push({id:e.id,name:i.full_name})}).always(function(){++a>=t.length&&e.loadDataComplete(n)})})}else e.loadDataComplete(n)}).fail(function(){e.loadDataComplete(n)})},didMount:function(){this._loadData()}});return r}),define("components/select-simple",["react","pref","helper"],function(e,t,n){var a=e.createClass({displayName:"SelectSimpleComponent",getDefaultProps:function(){return{name:"",value:-1,items:[],className:""}},onChangeProxy:function(){"function"==typeof this.props.onChange&&this.props.onChange(this.getValue())},getValue:function(){return e.findDOMNode(this).value},setValue:function(t){$(e.findDOMNode(this)).val(t).trigger("refresh")},render:function(){return e.createElement("select",{name:this.props.name,defaultValue:this.props.value,className:this.props.className,onChange:this.onChangeProxy},this.props.items.map(function(t,n){return e.createElement("option",{key:t.code,value:t.code},t.text)}))}});return a}),define("components/select-single/mixin",["react","helper","pref","cacheddata"],function(e,t,n,a){return{getInitialState:function(){return{items:$.isArray(this.props.items)?this.props.items.slice():[],value:this.props.value,hasSelected:!1}},toggleSelected:function(e){this.state.hasSelected=e},setQuery:function(e){this.state.query=e},getCachedData:function(){var e=this.myCollection.model,t=(new e).cacheName;return a.get(t)},parseQuery:function(e){var e=t.strToInt(e);0>=e&&(e=1);var a=$.extend({},this.state.query,{company_id:n.get("cid"),is_not_deleted:1,sort_by:this.props.sortBy||"name",sort_type:this.props.sortType||"ASC",limit:this.myCollection.maxLimit,page:e});return a},loadDataLive:function(e,t,n){var a=this,i=n||$.Deferred();return $.isArray(t)||(t=[]),this.myCollection.fetch({data:this.parseQuery(e),success:function(e,n){t=t.concat(n.items),Math.ceil(n.total/n.limit)>n.currentpage?a.loadDataLive(n.currentpage+1,t,i):i.resolve(t)},error:function(){i.resolve(t)}}),i.promise()},loadDataCache:function(e,t,n){var a=n||$.Deferred();$.isArray(t)||(t=[]);var i=this.myCollection.fetchFromCache(this.parseQuery(e));return t=t.concat(i.items),Math.ceil(i.total/i.limit)>i.currentpage?this.loadDataCache(i.currentpage+1,t,a):a.resolve(t),a.promise()},loadData:function(){var e=this,t=this.getCachedData()?this.loadDataCache:this.loadDataLive,n=[];this.showLoading(),$.when(t()).done(function(e){n=e}).always(function(){e.loadDataComplete(n)})},loadDataComplete:function(e,t){this.state.items=e;var n=this;this.forceUpdate(function(){n.hideLoading(),$.isFunction(t)&&t()})},getValue:function(){return $.trim($(e.findDOMNode(this)).dropdown("get value"))},setValue:function(t){return t=t||this.props.emptyOptionValue,$(e.findDOMNode(this)).dropdown("set selected",t+""),this},val:function(e){return void 0==e?this.getValue():this.setValue(e)},text:function(){return $(e.findDOMNode(this)).dropdown("get text")},getData:function(e){if(void 0===e&&(e=this.getValue()),$.isFunction(this.customGetData))return this.customGetData(e);var t=this.state.items.filter(function(t){return t.id+""==e+""}).shift();return $.isEmptyObject(t)&&(t={}),t},getFirstId:function(){var t=this,n=t.props.emptyOptionValue;return $("> .item",e.findDOMNode(this.refs.menu)).each(function(){return $(this).data("value")!=t.props.emptyOptionValue?(n=$(this).data("value"),!1):void 0}),n},getOptions:function(){var e=this,n={fullTextSearch:!0,onChange:function(t,n,a){e.setState({value:t,hasSelected:!0},function(){$.isFunction(e.props.onChange)&&e.props.onChange(t,n,a)})},onHide:this.props.onHide,onShow:this.props.onShow,message:t.getDropdownMessage()};return n},initDropdown:function(){$(e.findDOMNode(this)).dropdown("destroy").dropdown(this.getOptions())},showLoading:function(){$(e.findDOMNode(this)).addClass("loading")},hideLoading:function(){$(e.findDOMNode(this)).removeClass("loading")},getClassName:function(){return"ui "+this.props.className+" search selection dropdown tc-select-single"},focus:function(){$(e.findDOMNode(this.refs.search)).focus()},componentWillReceiveProps:function(e){this.state.hasSelected||(this.state.value=e.value),$.isFunction(this.willReceiveProps)&&this.willReceiveProps(e)},componentDidUpdate:function(){$.isEmptyObject(this.getData(this.state.value))&&(this.state.value=this.props.emptyOptionValue,e.findDOMNode(this.refs.input).value=this.props.emptyOptionValue,$(e.findDOMNode(this.refs.default_text)).text(this.props.placeholder).addClass("default")),this.initDropdown(),$.isFunction(this.didUpdate)&&this.didUpdate()},componentDidMount:function(){this.initDropdown(),$.isFunction(this.didMount)&&this.didMount()},renderMenuItems:function(){var t=this.props.textField||"name";return this.state.items.map(function(n){var a=n.id+"-"+moment().valueOf();return e.createElement("div",{key:a,className:"item","data-value":n.id},n[t])})},render:function(){var t=$.extend({},this.props.style);return e.createElement("div",{style:t,className:this.getClassName()},e.createElement("input",{ref:"input",type:"hidden",name:this.props.name,value:this.state.value}),e.createElement("i",{className:"dropdown icon"}),e.createElement("input",{ref:"search",style:{minWidth:10},className:"search"}),e.createElement("div",{ref:"default_text",className:"default text"},this.props.placeholder),e.createElement("div",{ref:"menu",className:"menu"},this.props.hideEmptyOption?null:e.createElement("div",{key:moment().valueOf(),className:"item","data-value":this.props.emptyOptionValue||""},this.props.placeholder),$.isFunction(this.customMenuItems)?this.customMenuItems():this.renderMenuItems()))}}}),define("components/select-single/employee",["react","helper","components/select-single/mixin","collections/employee","models/user"],function(e,t,n,a,i){var r=e.createClass({displayName:"SelectSingleEmployeeComponent",mixins:[n],myCollection:new a,getDefaultProps:function(){return $.extend({},t.getDropdownDefaultProps(),{name:"user_id",renderAvatar:!1})},renderAvatar:function(){var n=this;this.state.items.forEach(function(a){var i=t.getAvatarPath(a.avatar),r=e.renderToStaticMarkup(e.createElement("img",{src:i,className:"ui avatar image",style:{width:"2em",height:"2em"}}));$(".menu > .item",e.findDOMNode(n)).each(function(){return $(this).attr("data-value")==a.id?($(".ui.image",this).remove(),$(this).prepend(r),!1):void 0})})},loadUser:function(e){var n=$.Deferred();return e=t.strToInt(e),0>=e?(n.reject(),n.promise()):(new i({id:e}).fetch({success:function(e,t){t.id<=0?n.reject():n.resolve(t)},error:function(e,t){n.reject()}}),n.promise())},_loadData:function(){var e=this,t=this.loadDataCache;this.getCachedData()||(t=this.loadDataLive);var n=[];$.when(t()).done(function(t){if(t.length>0){var a=0;t.forEach(function(i){$.when(e.loadUser(i.user_id)).done(function(e){n.push({id:e.id,name:i.full_name,avatar:e.avatar})}).always(function(){++a>=t.length&&e.loadDataComplete(n)})})}else e.loadDataComplete(n)}).fail(function(){e.loadDataComplete(n)})},didUpdate:function(){this.props.renderAvatar&&this.renderAvatar()},didMount:function(){this._loadData()}});return r}),define("components/select-single/region",["react","helper","collections/region","components/select-single/mixin"],function(e,t,n,a){var i=e.createClass({displayName:"SelectSingleRegionComponent",mixins:[a],myCollection:new n,getDefaultProps:function(){return $.extend({},t.getDropdownDefaultProps(),{name:"region_id",sortBy:"display_order",parent_id:-1})},didMount:function(){this.setQuery({parent_id:this.props.parent_id}),this.loadData()},willReceiveProps:function(e){e.parent_id!=this.props.parent_id&&(this.setQuery({parent_id:e.parent_id}),this.loadData())}});return i}),define("components/select-single/time",["react","helper","components/select-single/mixin"],function(e,t,n){var a=e.createClass({displayName:"SelectSingleTimeComponent",mixins:[n],getDefaultProps:function(){return $.extend({},t.getDropdownDefaultProps(),{name:"",minuteStep:30,hourStep:1})},_loadData:function(){for(var e=[],n=0;23>=n;n+=this.props.hourStep)for(var a=0;59>=a;a+=this.props.minuteStep){var i=n+":"+a,r=moment(i,"HH:mm"),o={id:t.strToInt(r.format("HHmm")),name:r.format("HH:mm")};e.push(o)}this.loadDataComplete(e)},didMount:function(){this._loadData()}});return a}),define("components/select-single/user",["react","helper","collections/user","components/select-single/mixin"],function(e,t,n,a){var i=e.createClass({displayName:"SelectSingleUserComponent",mixins:[a],myCollection:new n,getDefaultProps:function(){return $.extend({},t.getDropdownDefaultProps(),{name:"user_id",textField:"fullname",renderAvatar:!1})},renderAvatar:function(){var n=this;this.state.items.forEach(function(a){var i=t.getAvatarPath(a.avatar),r=e.renderToStaticMarkup(e.createElement("img",{src:i,className:"ui avatar image",style:{width:"2em",height:"2em"}}));$(".menu > .item",e.findDOMNode(n)).each(function(){return $(this).attr("data-value")==a.id?($(".ui.image",this).remove(),$(this).prepend(r),!1):void 0})})},didUpdate:function(){this.props.renderAvatar&&this.renderAvatar()},didMount:function(){this.loadData()}});return i}),define("components/select-weekday",["react","language/default","pref"],function(e,t,n){var a=e.createClass({displayName:"SelectWeekdayComponent",getDefaultProps:function(){return{name:"weekday",value:-1,placeholder:"-----",className:"",multiple:!1}},componentDidUpdate:function(){this.props.multiple?$(this.getDOMNode()).dropdown("refresh"):$(this.getDOMNode()).dropdown("refresh").dropdown("set selected",this.props.value)},componentWillUnmount:function(){},componentDidMount:function(){var n=this;$(this.getDOMNode()).dropdown({fullTextSearch:!0,onAdd:function(t,a,i){$(e.findDOMNode(n)).dropdown("hide")},message:{noResults:t.t("search_no_result")}})},render:function(){return e.createElement("div",{className:"ui "+this.props.className+(this.props.fluid?" fluid":"")+(this.props.multiple?" multiple":"")+" search selection dropdown"},e.createElement("input",{type:"hidden",name:this.props.name}),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},this.props.multiple?"":e.createElement("div",{className:"item","data-value":"-1"},this.props.placeholder),e.createElement("div",{className:"item","data-value":"1"},t.t("monday")),e.createElement("div",{className:"item","data-value":"2"},t.t("tuesday")),e.createElement("div",{className:"item","data-value":"3"},t.t("wednesday")),e.createElement("div",{className:"item","data-value":"4"},t.t("thursday")),e.createElement("div",{className:"item","data-value":"5"},t.t("friday")),e.createElement("div",{className:"item","data-value":"6"},t.t("saturday")),e.createElement("div",{className:"item","data-value":"0"},t.t("sunday"))))}});return a}),define("language/support",["baselanguage"],function(e){var t={vn:{heading:"Trợ giúp",header_account:"Thông tin tài khoản",companyid:"ID công ty",companyname:"Tên công ty",istrial:"Tài khoản dùng thử",planstore:"Loại tài khoản",userid:"User ID",email:"Email",fullname:"Tên của bạn",summary:"Dưới đây là một số thông tin của tài khoản bạn đang đăng nhập và sử dụng, hãy cung cấp các thông tin này trong trường hợp cần hỗ trợ:",header_chat:"Chat trực tuyến",summary_chat:"Nhấn vào đây để vào Facebook Chat với đội ngũ hỗ trợ",header_email:"Email hỗ trợ",summary_email:"Mọi thắc mắc, góp ý vui lòng email tới địa chỉ: ",header_help:"Tài liệu hướng dẫn sử dụng",viewhelp:"Xem các bài viết hướng dẫn sử dụng",header_app:"Thông tin phần mềm",current_version:"Phiên bản hiện tại",cache_manage:"Cache dữ liệu công ty",cache_manage_link:"Xem chi tiết",cache:"Quản lý thông tin Cache",error_companyresource_empty:"Không tìm thấy thông tin Company Resource",company_resource:"Tài nguyên dữ liệu công ty",company_resource_help:"Đây là thông tin version của các tài nguyên liên quan đến công ty của bạn. Mỗi khi bạn thay đổi các thông tin như thêm, cập nhật, xóa, import thì version của tài nguyên tương ứng sẽ tăng lên 1.",company_resource_col_no:"STT",company_resource_col_resource:"Tài nguyên",company_resource_col_version:"Version",company_resource_col_explain:"Ý nghĩa",company_resource_cashflowaccount:"Tài khoản ngân hàng",company_resource_cashflowtype:"Loại phiếu thu / chi",company_resource_companydepartment:"Phòng ban",company_resource_companyoffice:"Văn phòng",company_resource_customerfailreason:"Lý do khách hàng ngưng hợp tác",company_resource_customerorigin:"Nguồn khách hàng",company_resource_customerstatus:"Trạng thái khách hàng",company_resource_customertype:"Nhóm khách hàng",company_resource_employee:"Nhân viên",company_resource_ordercancelreason:"Lý do hủy đơn hàng",company_resource_orderorigin:"Nguồn đơn hàng",company_resource_productcategory:"Danh mục sản phẩm",company_resource_product:"Sản phẩm",company_resource_productoption:"Kiểu sản phẩm",company_resource_productunit:"Đơn vị sản phẩm",company_resource_region:"Tỉnh / Thành phố",company_resource_shippingmethod:"Phương thức giao hàng",company_resource_store:"Cửa hàng",company_resource_supplier:"Nhà cung cấp",company_resource_companysetting:"Cài đặt chung",company_resource_user:"Thông tin thành viên",company_resource_vendor:"Nhà cung cấp",company_resource_warehouse:"Nhà kho",company_resource_worktrackingrange:"Ca làm việc"},en:{heading:"Trợ giúp",header_account:"Thông tin tài khoản",companyid:"ID công ty",companyname:"Tên công ty",istrial:"Tài khoản dùng thử",planstore:"Loại tài khoản",userid:"User ID",email:"Email",fullname:"Tên của bạn",summary:"Dưới đây là một số thông tin của tài khoản bạn đang đăng nhập và sử dụng, hãy cung cấp các thông tin này trong trường hợp cần hỗ trợ:",header_chat:"Chat trực tuyến",summary_chat:"Nhấn vào đây để vào Facebook Chat với đội ngũ hỗ trợ",header_email:"Email hỗ trợ",summary_email:"Mọi thắc mắc, góp ý vui lòng email tới địa chỉ: ",header_help:"Tài liệu hướng dẫn sử dụng",viewhelp:"Xem các bài viết hướng dẫn sử dụng",header_app:"Thông tin phần mềm",current_version:"Phiên bản hiện tại",cache_manage:"Cache dữ liệu công ty",cache_manage_link:"Xem chi tiết",cache:"Quản lý thông tin Cache",error_companyresource_empty:"Không tìm thấy thông tin Company Resource",company_resource:"Tài nguyên dữ liệu công ty",company_resource_help:"Đây là thông tin version của các tài nguyên liên quan đến công ty của bạn. Mỗi khi bạn thay đổi các thông tin như thêm, cập nhật, xóa, import thì version của tài nguyên tương ứng sẽ tăng lên1.",company_resource_col_no:"STT",company_resource_col_resource:"Tài nguyên",company_resource_col_version:"Version",company_resource_col_explain:"Ý nghĩa",company_resource_cashflowaccount:"Tài khoản ngân hàng",company_resource_cashflowtype:"Loại phiếu thu / chi",company_resource_companydepartment:"Phòng ban",company_resource_companyoffice:"Văn phòng",company_resource_customerfailreason:"Lý do khách hàng ngưng hợp tác",company_resource_customerorigin:"Nguồn khách hàng",company_resource_customerstatus:"Trạng thái khách hàng",company_resource_customertype:"Nhóm khách hàng",company_resource_employee:"Nhân viên",company_resource_ordercancelreason:"Lý do hủy đơn hàng",company_resource_orderorigin:"Nguồn đơn hàng",company_resource_productcategory:"Danh mục sản phẩm",company_resource_product:"Sản phẩm",company_resource_productoption:"Kiểu sản phẩm",company_resource_productunit:"Đơn vị sản phẩm",company_resource_region:"Tỉnh / Thành phố",company_resource_shippingmethod:"Phương thức giao hàng",company_resource_store:"Cửa hàng",company_resource_supplier:"Nhà cung cấp",company_resource_companysetting:"",company_resource_user:"Thông tin thành viên",company_resource_vendor:"Nhà cung cấp",company_resource_warehouse:"Nhà kho",company_resource_worktrackingrange:"Ca làm việc"}};return new e({lang:t})}),define("components/setting/cache",["react","backbone","helper","pref","language/support","components/heading","collections/companyresource"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"SettingCacheComponent",getInitialState:function(){return{companyresourceitems:[]}},componentWillUnmount:function(){},componentDidMount:function(){var e=this;n.showLoader(),(new o).fetch({data:{company_id:a.get("cid")},success:function(t,a){if(0==a.total)n.showError(i.t("error_companyresource_empty"));else{var r=["companydepartment","companyoffice","companysetting","employee","region","user","worktrackingrange"],o=$.map(a.items[0].jsversion,function(e,t){return $.inArray(t,r)>=0?{resource:t,version:e}:void 0});o.sort(function(e,t){var n=e.resource.toUpperCase(),a=t.resource.toUpperCase();return a>n?-1:n>a?1:0}),e.setState({companyresourceitems:o})}},complete:function(){n.hideLoader()}})},render:function(){return e.createElement("div",{className:"ui segments"},e.createElement(r,{link:"#support",text:i.t("heading"),subtext:i.t("cache")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,i.t("company_resource"))),e.createElement("p",null,i.t("company_resource_help"))),e.createElement("div",{className:"field twelve wide"},e.createElement("table",{className:n.tableclass()},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{width:"10"},i.t("company_resource_col_no")),e.createElement("th",{width:"300"},i.t("company_resource_col_resource")),e.createElement("th",null,i.t("company_resource_col_explain")),e.createElement("th",null,i.t("company_resource_col_version")),e.createElement("th",null))),e.createElement("tbody",null,this.state.companyresourceitems.map(function(t,n){return e.createElement("tr",{key:t.resource},e.createElement("td",null,n+1),e.createElement("td",null,t.resource),e.createElement("td",null,i.t("company_resource_"+t.resource)),e.createElement("td",null,t.version))}))))))))}});return s}),define("models/companymodule",["basemodel","backbone","setting"],function(e,t,n){var a=e.extend({urlRoot:"v1/companymodules",getModules:function(e,t){$.ajax({url:this.urlRoot+"?company_id="+e,success:t})},saveToggleModule:function(e,t,n){$.ajax({type:"POST",dataType:"json",data:e,url:this.urlRoot,success:t,error:n})}});return a}),define("components/setting/moduleitem",["react","basecontroller","pref","role","querystring","companymodule","language/companymodule","models/companymodule","helper","eventbus"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"SettingModuleItemComponent",getDefaultProps:function(){return{checked:!1,disabled:!1,data:{id:0,name:"",group:"",type:0}}},getInitialState:function(){return{checked:this.props.checked}},processingHandler:function(t){this.props.data.id==t.id?"start"==t.status?l.loaderAppend($(e.findDOMNode(this.refs.loaderholder))):"end"==t.status&&l.loaderRemove($(e.findDOMNode(this.refs.loaderholder))):"start"==t.status?$(e.findDOMNode(this.refs.checkbox)).checkbox("set disabled"):"end"==t.status&&($(e.findDOMNode(this.refs.checkbox)).hasClass("moduledisabled")||$(e.findDOMNode(this.refs.checkbox)).checkbox("set enabled"))},submitValue:function(e,t){var a=this,i=o.t("name_"+this.props.data.name);c.trigger("companymoduleitem:processing",{id:e,status:"start"});var d={company_id:n.get("cid"),creator_id:n.get("uid"),module_id:e,status:t};(new s).saveToggleModule(d,function(s){1==t?(l.showSuccess(o.t("toggle_success_on")+i),a.setState({checked:!0})):(l.showSuccess(o.t("toggle_success_off")+i),a.setState({checked:!1})),n.set("companymodule",s.module_enable),r.init(s.module_enable),c.trigger("sidebar:checklicenserole"),c.trigger("companymoduleitem:processing",{id:e,status:"end"})},function(t){l.notifyError(t,o,"error_update_fail"),c.trigger("companymoduleitem:processing",{id:e,status:"end"})})},componentWillUnmount:function(){c.off("companymoduleitem:processing",this.processingHandler)},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.checkbox)).checkbox({onChange:function(n){var a=$(e.findDOMNode(t.refs.checkbox)).checkbox("is checked");a?t.submitValue(t.props.data.id,1):t.submitValue(t.props.data.id,0)}}),c.on("companymoduleitem:processing",this.processingHandler)},render:function(){var t=o.t("name_"+this.props.data.name),n=o.t("description_"+this.props.data.name),a=o.t("group_"+this.props.data.group),i=e.createElement("span",null);1==this.props.data.type?i=e.createElement("span",{className:"ui mini basic green label",title:o.t("typelabelbetahelp")},o.t("typelabelbeta")):2==this.props.data.type&&(i=e.createElement("span",{className:"ui mini basic orange label",title:o.t("typelabelviphelp")
},o.t("typelabelvip")));var r=[],l=(new s).moduleSettings;return l.hasOwnProperty(this.props.data.name)&&(r=l[this.props.data.name]),e.createElement("li",{className:"item"},e.createElement("div",{className:"ui image",style:{width:84}},e.createElement("div",{style:{float:"right"}},e.createElement("span",{ref:"loaderholder"})),this.props.disabled?e.createElement("span",{style:{color:"#888"}},e.createElement("small",null,"Disabled")):e.createElement("span",{ref:"checkbox",className:"ui toggle checked checkbox"+(this.props.disabled?" moduledisabled":"")},e.createElement("input",{type:"checkbox",disabled:this.props.disabled?"disabled":"",defaultChecked:this.state.checked?"checked":"",value:this.props.data.id}))),e.createElement("div",{className:"content",style:{minHeight:26}},e.createElement("div",{className:"ui grid stackable two columns"},e.createElement("div",{className:"hideonsmall ui two wide column right aligned",onClick:this.getValue},a),e.createElement("div",{className:"ui four wide column",style:{paddingBottom:"0 !important"}},e.createElement("h4",{style:{padding:0},"data-id":this.props.data.id},e.createElement("strong",null,t))),e.createElement("div",{className:"ui ten wide column"},e.createElement("div",null,n," ",i)))))}});return d}),define("components/setting/tab-info",["react","pref","helper","eventbus","companysetting","models/companysetting","language/company","language/default","components/input-tag","components/formfieldaction"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"TabInfoComponent",getInitialState:function(){return{render:0}},changDisplayYesNo:function(e){e.target.checked?($(e.target).val(1).attr("value",1),$(e.target).next().html(o.t("yes"))):($(e.target).val(0).attr("value",0),$(e.target).next().html(o.t("no")))},save:function(e){var a=this;e.addClass("loading");var i={company_id:t.get("cid"),creator_id:t.get("uid"),currency_number_format:$('[name="currencynumberformat"]',e).val(),currency_prefix:$('[name="currencyprefix"]',e).val(),currency:$('[name="currency"]',e).val()};(new r).saveSetting(i,{success:function(e,t){a.setState({render:a.state.render+1}),n.showSuccess(s.t("update_success"))},error:function(e){n.showError(s.t("update_fail"))},complete:function(){e.removeClass("loading")}},{action:"addsettinginfo"})},valueInput:function(e){var t=n.strToInt(e.target.value);t=t>0?n.numberFormat(t):"",e.target.value=t},componentDidMount:function(){var e=this;a.trigger("sidebar:toggle","hide"),$(".show-popup",this.getDOMNode()).popup({inline:!0,hoverable:!0});var t=$(".form-tab-info");t.form({inline:!0,keyboardShortcuts:!1,transition:"fade",onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(n,a){n.preventDefault(),e.save(t)}})},render:function(){var t=this;return e.createElement("form",{className:"ui small form form-tab-info"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h3",null,o.t("custom")),e.createElement("p",null,o.t("custom_info"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field",style:{paddingTop:"10px"}},e.createElement("label",{htmlFor:"currencynumberformat"},o.t("currency_number_format"),"  ",e.createElement("i",{className:"icon tc-info show-popup","data-content":o.t("currency_number_format_info")}))),e.createElement("div",{className:"six wide field"},e.createElement("select",{ref:"currencynumberformat",id:"currencynumberformat",name:"currencynumberformat",key:"currencynumberformat"+t.props.setting.currency_number_format,defaultValue:t.props.setting.currency_number_format},e.createElement("option",{value:"0"},"1234 => 1,234 (",o.t("currency_number_format_des").replace("%number%",s.t("has_not")),")"),e.createElement("option",{value:"1"},"1234 => 1,234.00 (",o.t("currency_number_format_des").replace("%number%",2),")"),e.createElement("option",{value:"2"},"1234 => 1234 (",o.t("currency_number_format_none"),")")))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field",style:{paddingTop:"10px"}},e.createElement("label",{htmlFor:"currencyprefix"},o.t("currency_prefix"),"  ",e.createElement("i",{className:"icon tc-info show-popup","data-content":o.t("currency_prefix_info")}))),e.createElement("div",{className:"six wide field"},e.createElement("input",{id:"currencyprefix",name:"currencyprefix",type:"text",key:"currencyprefix"+t.props.setting.currency_prefix,defaultValue:t.props.setting.currency_prefix,placeholder:""}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"four wide field",style:{paddingTop:"10px"}},e.createElement("label",{htmlFor:"currency"},o.t("currency_suffix"),"  ",e.createElement("i",{className:"icon tc-info show-popup","data-content":o.t("currency_suffix_info")}))),e.createElement("div",{className:"six wide field"},e.createElement("input",{id:"currency",name:"currency",type:"text",key:"currency"+t.props.setting.currency,defaultValue:t.props.setting.currency}))))),e.createElement(c,null,e.createElement("button",{className:"ui teal button"},s.t("save"))))}});return d}),define("components/setting/tab-menu",["react","pref","role","helper","models/company","language/company","language/default"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"TabInfoComponent",componentDidMount:function(){$(e.findDOMNode(this.refs.dropdown)).dropdown({action:"hide"})},render:function(){var t={active:"",license:n.hasPlanStore()},i={active:"",license:n.hasPlanStore()},o={active:"",license:n.hasPlanStore()},s={active:"",license:n.hasPlanStore()},l={active:"",license:n.hasPlanStore()},c={active:"",license:n.hasPlanStore()},d={active:"",license:n.hasPlanStore()},u="";switch(this.props.tab){case"inventory":i.active="active",u="tab_inventory";break;case"order":c.active="active",u="tab_order";break;case"cashflow":d.active="active",u="tab_cashflow";break;case"pos":o.active="active",u="tab_pos";break;case"integration":s.active="active",u="tab_integration";break;case"role":l.active="active",u="tab_role";break;default:t.active="active",u="tab_info"}return a.isSmallScreen()?e.createElement("div",null,e.createElement("div",{ref:"dropdown",className:"ui inline top left pointing dropdown"},e.createElement("div",{className:"text"},r.t(u)),e.createElement("i",{className:"dropdown icon"}),e.createElement("div",{className:"menu"},e.createElement("a",{style:{display:t.license?"":"none"},href:"#setting","data-value":"info",className:"item"},r.t("tab_info")),e.createElement("a",{style:{display:c.license?"":"none"},href:"#setting/order","data-value":"order",className:"item"},r.t("tab_order")),e.createElement("a",{style:{display:d.license?"":"none"},href:"#setting/cashflow","data-value":"cashflow",className:"item"},r.t("tab_cashflow")),e.createElement("a",{style:{display:i.license?"":"none"},href:"#setting/inventory","data-value":"inventory",className:"item"},r.t("tab_inventory")),e.createElement("a",{style:{display:o.license?"":"none"},href:"#setting/pos","data-value":"pos",className:"item"},r.t("tab_pos")),e.createElement("a",{style:{display:s.license?"":"none"},href:"#setting/integration","data-value":"integration",className:"item"},r.t("tab_integration")))),e.createElement("div",{className:"ui divider"})):e.createElement("div",{className:"ui top tabular menu attached"},e.createElement("a",{href:"#setting",className:"item "+t.active,style:{display:t.license?"":"none"},"data-tab":"tab_info"}," ",r.t("tab_info")),e.createElement("a",{href:"#setting/order",className:"item "+c.active,style:{display:c.license?"":"none"},"data-tab":"tab_order"},r.t("tab_order")),e.createElement("a",{href:"#setting/cashflow",className:"item "+d.active,style:{display:d.license?"":"none"},"data-tab":"tab_cashflow"},r.t("tab_cashflow")),e.createElement("a",{href:"#setting/inventory",className:"item "+i.active,style:{display:i.license?"":"none"},"data-tab":"tab_inventory"}," ",r.t("tab_inventory")),e.createElement("a",{href:"#setting/pos",className:"item "+o.active,style:{display:o.license?"":"none"},"data-tab":"tab_pos"},r.t("tab_pos")),e.createElement("a",{href:"#setting/integration",className:"item "+s.active,style:{display:s.license?"":"none"},"data-tab":"tab_integration"},r.t("tab_integration")))}});return s}),define("models/rbacrole",["basemodel","language/company"],function(e,t){var n=e.extend({urlRoot:"v1/rbacroles",getSetting:function(e,t){var n=this.urlRoot+"/setting";$.ajax({url:n,type:"GET",data:e,success:function(e){t(e)},error:function(e){}})},getData:function(e){var t=this.urlRoot+"/"+e.action;$.ajax({url:t,type:"GET",data:e.query,success:function(t,n,a){"function"==typeof e.success&&e.success(t,a)},error:function(t){"function"==typeof e.error&&e.error(t)},complete:function(t){"function"==typeof e.complete&&e.complete(t)}})},saveSetting:function(e,t,n){n.action="undefined"!=typeof n.action?"/"+n.action:"";var a=this.urlRoot+n.action;$.ajax({url:a,type:"POST",data:e,success:function(e,n,a){"function"!=typeof t.success||201!=a.status&&200!=a.status||t.success(e,a),"function"!=typeof t.error||422!=a.status&&422!=a.status||t.error(e,a)},error:function(e,n){"function"==typeof t.error&&t.error(e,n)},complete:function(e){"function"==typeof t.complete&&t.complete(e)}})},MODULE_SALE:"sale",MODULE_APP:"app",MODULE_ERP:"erp"});return n}),define("models/rbacrolepermission",["basemodel","language/company"],function(e,t){var n=e.extend({urlRoot:"v1/rbacrolepermissions",getData:function(e){var t=this.urlRoot+"/"+e.action;$.ajax({url:t,type:"GET",data:e.query,success:function(t,n,a){"function"==typeof e.success&&e.success(t,a)},error:function(t){"function"==typeof e.error&&e.error(t)},complete:function(t){"function"==typeof e.complete&&e.complete(t)}})}});return n}),define("components/setting/tab-role-add",["react","pref","helper","eventbus","components/employeepicker","models/rbacrole","models/rbacrolepermission","language/company","language/default"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"AddRoleComponent",_save:function(i){var o=i.closest(".modal");if(!o.hasClass("loading")){$(e.findDOMNode(this.refs.btn_save)).attr("disabled",!0);var c=this;o.addClass("loading");var d={};d.company_id=t.get("cid"),d.creator_id=t.get("uid"),d.module=c.props.module,d.name=$('[name="name"]',i).val(),d.user_ids=$('[name="user_ids"]',i).val(),(new r).save(d,{success:function(t,i){a.trigger("role:reloaddata"),n.showSuccess(l.t("insert_success")),$(e.findDOMNode(c)).modal("hide")},error:function(e){e.responseJSON&&e.responseJSON.error&&e.responseJSON.error.forEach(function(e,t){switch(e){case"error_name_invalid":i.form("add prompt","name",s.t("error_name_invalid"))}}),n.showError(l.t("insert_fail"))},complete:function(){}})}},showModal:function(){var t=$(e.findDOMNode(this));t.modal({detachable:!1,onHidden:function(e){t.parent().html("")}}).modal("show")},submitForm:function(){$(e.findDOMNode(this.refs["form-group-permission"])).submit()},componentDidMount:function(){var t=this;a.trigger("sidebar:toggle","hide"),this.showModal();var n=$(e.findDOMNode(this.refs["form-group-permission"]));n.form({fields:{name:{identifier:"name",rules:[{type:"empty",prompt:s.t("error_name_required")}]}},inline:!0,keyboardShortcuts:!1,templates:{error:function(e){var t='<div class="ui list">';return $.each(e,function(e,n){t+='<div class="item"><i class="tc-bug icon"></i> <div class="content">'+n+"</div></div>"}),t+="</div>",$(t)}},onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,a){e.preventDefault(),t._save(n)}})},render:function(){return e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("div",{className:"header"},e.createElement("div",{style:{fontSize:"inherit"},className:"ui breadcrumb"},e.createElement("div",{className:"active section"},s.t("heading")),e.createElement("div",{className:"divider"}," / "),e.createElement("div",{className:"active section"},l.t("insert")))),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form",ref:"form-group-permission"},e.createElement("div",{className:"field required"},e.createElement("label",null,s.t("name")),e.createElement("input",{name:"name"})),e.createElement("div",{className:"field"},e.createElement("label",null,s.t("assign_user")),e.createElement(i,{inputname:"user_ids"})))),e.createElement("div",{className:"actions"},e.createElement("button",{className:"ui noborder basic button cancel close"},l.t("close")),e.createElement("button",{className:"ui button teal",ref:"btn_save",onClick:this.submitForm},l.t("insert")),e.createElement("div",{className:"pull-left",style:{paddingTop:"7px"}},e.createElement("p",null,"* ",l.t("required")))))}});return c}),define("components/setting/tab-role-edit",["react","pref","helper","eventbus","components/employeepicker","models/rbacrole","language/company","language/default"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"EditRoleComponent",_save:function(i){var l=this,c=i.closest(".modal");c.addClass("loading");var d={};d.company_id=t.get("cid"),d.creator_id=t.get("uid"),d.module=l.props.module,d.name=$('[name="name"]',i).val(),d.user_ids=$('[name="user_ids"]',i).val(),new r({id:l.props.role.id}).save(d,{success:function(t,i){a.trigger("role:reloaddata"),n.showSuccess(s.t("update_success")),$(e.findDOMNode(l)).modal("hide")},error:function(e){e.responseJSON&&e.responseJSON.error&&e.responseJSON.error.forEach(function(e,t){switch(e){case"error_name_invalid":i.form("add prompt","name",o.t("error_name_invalid"))}}),n.showError(s.t("update_fail"))},complete:function(){c.removeClass("loading")}},{action:"addrole"})},showModal:function(){var t=$(e.findDOMNode(this));t.modal({detachable:!1,onHidden:function(e){t.parent().html("")}}).modal("show")},submitForm:function(){$(e.findDOMNode(this.refs["form-group-permission"])).submit()},_cancelDelete:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.delete)).popup("hide")},_delete:function(t){t.preventDefault();var i=this,o=$(e.findDOMNode(this.refs.modal));$(e.findDOMNode(this.refs.delete)).popup("hide"),o.addClass("loading"),new r({id:i.props.role.id}).destroy({success:function(){a.trigger("role:reloaddata"),n.showSuccess(s.t("delete_success")),o.modal("hide")},error:function(){n.showError(s.t("delete_fail"))},complete:function(){o.removeClass("loading")}})},componentDidMount:function(){var t=this;a.trigger("sidebar:toggle","hide"),this.showModal();var n=$(e.findDOMNode(this.refs["form-group-permission"]));n.form({fields:{name:{identifier:"name",rules:[{type:"empty",prompt:o.t("error_name_required")}]}},inline:!0,keyboardShortcuts:!1,templates:{error:function(e){var t='<div class="ui list">';return $.each(e,function(e,n){t+='<div class="item"><i class="tc-bug icon"></i> <div class="content">'+n+"</div></div>"}),t+="</div>",$(t)}},onFailure:function(e,t){return $(".field.error input",this).eq(0).focus(),!1},onSuccess:function(e,a){e.preventDefault(),t._save(n)}}),$(this.refs.delete.getDOMNode()).popup({on:"click",position:"top left",popup:this.refs["delete-confirm"].getDOMNode()})},render:function(){var t=this,n=[];return this.props.data&&$.each(this.props.data,function(e,t){t.user_id>0&&n.push(t.user_id)}),e.createElement("div",{className:"ui tiny modal",ref:"modal"},e.createElement("div",{className:"header"},e.createElement("div",{style:{fontSize:"inherit"},className:"ui breadcrumb"},e.createElement("div",{className:"active section"},o.t("heading")),e.createElement("div",{className:"divider"}," / "),e.createElement("div",{className:"active section"},t.props.role.name))),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form",ref:"form-group-permission"},e.createElement("div",{className:"field required"},e.createElement("label",null,o.t("name")),e.createElement("input",{name:"name",defaultValue:t.props.role.name})),e.createElement("div",{className:"field"},e.createElement("label",null,o.t("assign_user")),e.createElement(i,{key:moment().unix(),inputname:"user_ids",defaultvalue:n})),e.createElement("div",{className:"field"},e.createElement("label",null,"SID"),e.createElement("input",{title:s.t("sid_tooltip"),disabled:!0,readOnly:!0,defaultValue:this.props.role.id})))),e.createElement("div",{className:"actions"},e.createElement("a",{className:"ui noborder basic button cancel close"},s.t("close")),e.createElement("a",{className:"ui button teal",onClick:this.submitForm},s.t("update")),e.createElement("div",{className:"pull-left"},e.createElement("a",{ref:"delete",href:"javascript:void(0)",className:"ui noborder basic red button nopaddingleft",onClick:this.confirmDelete},o.t("delete_role")),e.createElement("div",{ref:"delete-confirm",className:"ui flowing popup top right transition hidden","data-position":"top right"},e.createElement("h4",null,s.t("delete_confirm")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:this._delete,className:"ui button mini red",href:"#"},s.t("delete_button")),e.createElement("a",{onClick:this._cancelDelete,className:"ui button mini",href:"#"},s.t("cancel_button")))))))}});return l}),define("components/setting/tab-role-modal-edit-office-permission",["react","backbone","pref","helper","eventbus","language/company","language/default","models/office","models/rbacrole","collections/office"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"EditUserOfficePermissionComponent",getInitialState:function(){return{offices:[]}},offices:[],loadOffice:function(e){var t=this;(new c).fetch({data:{company_id:n.get("cid"),status:(new s).STATUS_ENABLE,is_not_deleted:1,limit:200,page:e},success:function(e,n){if(0==t.offices.length?t.offices=n.items:t.offices.concat(n.items),Math.ceil(n.total/n.limit)>n.currentpage)t.loadOffice(n.currentpage+1);else{var a=t.offices.slice(0);t.setState({offices:a})}}})},changeShowHide:function(e,t){var n=$(t.currentTarget);t.target.checked?n.val(n.attr("data-value-tmp")).attr("value",n.attr("data-value-tmp")):n.val(0).attr("value",0)},chooseAll:function(t){var n=$(".ui.checkbox",$(e.findDOMNode(this.getDOMNode())));n.each(function(e){var n=$(this).find("input");$(this).checkbox({onChecked:function(e){n.val(n.attr("data-value-tmp")).attr("value",n.attr("data-value-tmp"))},onUnchecked:function(e){n.val(0).attr("value",0)}}),t?($(this).checkbox("check"),$(this).find("input").val(n.attr("data-value-tmp")).attr("value",n.attr("data-value-tmp"))):($(this).checkbox("uncheck"),$(this).find("input").val(0).attr("value",0))})},save:function(e,t){var i={},s=/[a-zA-Z0-9_]+/g,c=$(this.getDOMNode());$("input",c).each(function(e,t){if(t.name){var n=t.name.match(s);i[n[0]]?(i[n[0]].push||(i[n[0]]>0?i[n[0]]=[i[n[0]]]:i[n[0]]=[]),t.value>0&&i[n[0]].push(t.value)):t.value>0?i[n[0]]=[t.value]:i[n[0]]=[]}}),i.company_id=n.get("cid"),i.creator_id=n.get("uid"),i.subject_id=this.props.subject.id,i.user_id=this.props.user.id,i.is_delete=e?1:0,c.addClass("loading"),(new l).saveSetting(i,{success:function(e){a.showSuccess(o.t("update_success")),$(".ui.modal",c).modal("hide")},error:function(e){a.notifyError(e,r,"update_fail")},complete:function(){c.removeClass("loading")}},{action:"userrole"})},cancelDelete:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.delete)).popup("hide")},delete:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.delete)).popup("hide"),this.save(!0,t)},componentWillUpdate:function(){},componentDidMount:function(){$(".ui.modal",e.findDOMNode(this)).modal({context:e.findDOMNode(this),onShow:function(){},onHide:function(){i.trigger("tabrole:viewpermission")}}).modal("show"),this.loadOffice(1),$(e.findDOMNode(this.refs.delete)).popup({on:"click",position:"top left",inline:!1,popup:e.findDOMNode(this.refs["delete-confirm"])})},render:function(){var t=this;return e.createElement("div",null,e.createElement("div",{className:"ui modal small",style:{width:"40%"}},e.createElement("div",{className:"header"},e.createElement("h4",null,e.createElement("div",{className:"ui breadcrumb"},e.createElement("div",{className:"active section"},r.t("tab_role")),e.createElement("div",{className:"divider"}," / "),e.createElement("div",{className:"active section"},this.props.user.fullname),e.createElement("div",{className:"divider"}," / "),e.createElement("div",{className:"active section",style:{color:"#c7254e"}},this.props.subject.ticket)))),e.createElement("div",{className:"content",ref:"my_modal_content"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"eight wide field"},e.createElement("h3",null,r.t("choose_office"))),e.createElement("div",{className:"eight wide field"},e.createElement("a",{href:"javascript:void(0)",className:"pull-right",style:{color:"#999"},onClick:this.chooseAll.bind(null,!1)},e.createElement("small",null,r.t("unchoose_all"))),e.createElement("a",{href:"javascript:void(0)",style:{color:"#999",lineHeight:"19px"}},e.createElement("small",{className:"pull-right",style:{margin:"0px 3px"}},"|")),e.createElement("a",{href:"javascript:void(0)",className:"pull-right",style:{color:"#999"},onClick:this.chooseAll.bind(null,!0)},e.createElement("small",null,r.t("choose_all"))))),this.state.offices.map(function(n,a){var i=t.props.rbac_subjects.indexOf(n.id)>=0||0==t.props.rbac_subjects.length;return e.createElement("div",{key:n.id,className:"fields"},e.createElement("div",{className:"one wide field"},e.createElement("label",null)),e.createElement("div",{className:"six wide field"},e.createElement("div",{className:"ui toggle checkbox"},e.createElement("input",{type:"checkbox",id:n.id,name:"list_ids[]",defaultValue:i?n.id:0,defaultChecked:i,onChange:t.changeShowHide.bind(this,n.id),"data-value-tmp":n.id,key:"office_"+n.id}),e.createElement("label",{htmlFor:n.id},n.name))))})),e.createElement("div",{className:"actions"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"thirteen wide field"},e.createElement("div",{className:"pull-left",style:{textAlign:"left",fontSize:"12px"}},e.createElement("div",{style:{position:"relative"}},e.createElement("a",{ref:"delete",href:"javascript:void(0)"},r.t("delate_user_role")," "," "+this.props.subject.ticket),e.createElement("div",{ref:"delete-confirm",className:"ui flowing popup top center transition hidden"},e.createElement("h4",null,o.t("delete_confirm")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:this.delete,className:"ui button mini red",href:"#"},o.t("delete_button")),e.createElement("a",{onClick:this.cancelDelete,className:"ui button mini",href:"#"},o.t("cancel_button"))))),e.createElement("p",null,r.t("delate_user_role_office_note")," "," ("+this.props.subject.ticket+")"))),e.createElement("div",{className:"three wide field"},e.createElement("a",{href:"javascript:void (0)",onClick:this.save.bind(this,!1),className:"ui teal button"},o.t("save")))))))}});return d}),define("components/setting/tab-role-td",["react","pref","role","helper","eventbus","models/rbacrolepermission","language/company","language/default"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"TabRoleTdComponent",changePermission:function(e){var n={company_id:t.get("cid"),creator_id:t.get("uid"),role_permission:$(e.target).attr("data-value")};e.target.checked?n.type="accept":n.type="remove",(new r).save(n,{success:function(e,t){a.showSuccess(s.t("update_success"))},error:function(e){a.showError(s.t("update_fail"))},complete:function(){}})},componentDidMount:function(){},render:function(){var t=this,n=this.props.role.id+"_"+this.props.subject_id,a="undefined"==typeof this.props.permission?[]:this.props.permission,i="undefined"!=typeof a[n];return e.createElement("td",{key:n},e.createElement("div",{className:"ui toggle checkbox"},e.createElement("input",{type:"checkbox",defaultChecked:i,name:"role_permission[]",key:this.props.subject_id,defaultValue:i?n:0,"data-value":n,onChange:t.changePermission}),e.createElement("label",null," ")))}});return l}),define("components/setting/tab-role-th",["react","pref","role","helper","eventbus","models/user","collections/rbacroleuser"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"ThItemComponent",getInitialState:function(){return{role_users:[]}},role_users:[],loadRoleUser:function(n){var i=this,s={company_id:t.get("cid"),role_id:this.props.data.id,page:n};(new o).fetch({data:s,success:function(t,n){if(0==i.role_users.length?i.role_users=n.items:i.role_users=i.role_users.concat(n.items),Math.ceil(n.total/n.limit)>n.currentpage)i.loadRoleUser(n.currentpage+1);else{var o=i.role_users.slice(0);i.setState({role_users:o});var s=$(e.findDOMNode(i.refs.users));s.empty(),o.map(function(t,n){new r({id:t.user_id}).fetch({success:function(t,n){n.id>0&&(s.append(e.renderToString(e.createElement("div",{className:"pull-left"},e.createElement("img",{className:"ui avatar image show-popup",src:a.getAvatarPath(n.avatar),"data-content":n.fullname})))),i.showPopup())}})})}},error:function(){},complete:function(){}})},editRole:function(){i.trigger("tabrole:editrole",this.props.data,this.state.role_users)},showPopup:function(){$(".show-popup",this.getDOMNode()).popup({inline:!0,hoverable:!0})},componentDidMount:function(){this.loadRoleUser(1)},render:function(){var t=this,n=this.props.data;return e.createElement("th",null,e.createElement("a",{href:"javascript:;",onClick:t.editRole},n.name),e.createElement("div",{ref:"users"}))}});return s}),define("models/rbacsubject",["basemodel","language/company"],function(e,t){var n=e.extend({urlRoot:"v1/rbacroles",getRbacSubjectName:function(e){e=parseInt(e);var n={code:e,text:"",color:""};switch(e){case this.OBJECTTYPE_STORE:n.text=t.t("object_type_store"),n.color="blue";break;case this.OBJECTTYPE_WAREHOUSE:n.text=t.t("object_type_warehouse"),n.color="green";break;case this.OBJECTTYPE_PRODUCTCATEGORY:n.text=t.t("object_type_product_category"),n.color="red";break;case this.OBJECTTYPE_PAGECATEGORY:n.text=t.t("object_type_page_category"),n.color="red";break;case this.OBJECTTYPE_OFFICE:n.text=t.t("object_type_office"),n.color="red"}return n},OBJECTTYPE_STORE:1,OBJECTTYPE_WAREHOUSE:3,OBJECTTYPE_PRODUCTCATEGORY:5,OBJECTTYPE_PAGECATEGORY:9,OBJECTTYPE_OFFICE:11,STATUS_ENABLE:1,STATUS_DISABLE:2});return n}),define("components/setting/tab-role-view-permission",["react","pref","helper","eventbus","components/employeepicker","components/setting/tab-role-modal-edit-office-permission","models/rbacrole","models/rbacrolepermission","models/rbacsubject","models/office","language/company","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"SubjectItem",loadData:function(){var t=this;switch(this.props.subject.object_type){case(new l).OBJECTTYPE_OFFICE:new c({id:this.props.data}).fetch({success:function(n,a){$(e.findDOMNode(t.getDOMNode())).html("<small>- "+a.name+"</small>")}})}},componentDidMount:function(){this.loadData()},render:function(){return e.createElement("li",{style:{paddingLeft:"25px"}}," ")}}),p=e.createClass({displayName:"TdItem",showModal:function(t){this._unmountModal();var n=this,a=[];switch(n.props.subject.id in n.props.data.rbac_subjects&&(a=n.props.data.rbac_subjects[n.props.subject.id]),n.props.subject.object_type){case(new l).OBJECTTYPE_OFFICE:e.render(e.createElement(r,{user:this.props.data.user,subject:this.props.subject,rbac_subjects:a}),e.findDOMNode(this.refs.modal_wrapper))}},_unmountModal:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.modal_wrapper))},componentWillUnmount:function(){},componentDidMount:function(){},render:function(){var t=this,n=!1;t.props.data.is_root_admin?n=!0:$.each(this.props.data.rbac_roles,function(e,a){var i=a.role_id+"_"+t.props.subject.id;return i in t.props.setting.role_permission?(n=!0,!1):void 0});var a=(new l).getRbacSubjectName(t.props.subject.object_type),i="",r=[];return t.props.subject.object_type>0&&0!=t.props.subject.is_use_object_id&&(t.props.subject.id in t.props.data.rbac_subjects&&(r=t.props.data.rbac_subjects[t.props.subject.id]),i=0==r.length?d.t("all")+" "+a.text:a.text),e.createElement("td",null,n?e.createElement("div",null,e.createElement("a",{style:{fontSize:"18px",color:"#21ba45",marginRight:"5px",float:"left"}},e.createElement("i",{className:"icon tc-tick"})),e.createElement("div",{style:{display:t.props.data.is_root_admin?"none":""}},i,e.createElement("a",{key:t.props.subject.object_type+moment().unix(),href:"javascript:void (0)",onClick:t.showModal,style:{display:t.props.subject.object_type>0&&0!=t.props.subject.is_use_object_id?"":"none"}},": ("+d.t("limit")+"...)")),r.length>0&&!t.props.data.is_root_admin?e.createElement("ul",{style:{marginTop:"5px"}},r.map(function(n,a){return e.createElement(m,{key:n,subject:t.props.subject,data:n})})):""):e.createElement("span",null),e.createElement("div",{ref:"modal_wrapper"}))}}),h=e.createClass({displayName:"ViewPermissionComponent",getInitialState:function(){return{setting:{}}},loadSetting:function(){var e=this,n={company_id:t.get("cid"),tab:"role"};(new o).getData({query:n,action:"setting",success:function(t){$(".tab",e.getDOMNode()).removeClass("loading"),e.setState({setting:t})}})},componentDidMount:function(){a.trigger("sidebar:toggle","hide"),this.loadSetting()},render:function(){var t=this;return e.createElement("table",{className:"ui selectable teal table"},e.createElement("thead",null,e.createElement("th",{width:"50",title:u.t("sid_tooltip")},"SID"),e.createElement("th",null,d.t("feature")),t.props.data.items.map(function(t,a){return e.createElement("th",{key:a+1},e.createElement("img",{className:"ui avatar image",src:n.getAvatarPath(t.user.avatar)}),t.user.fullname)})),e.createElement("tbody",null,$.isEmptyObject(t.state.setting)?"":t.state.setting.erp.rbac_subjects.map(function(n,a){return e.createElement("tr",{key:a,style:{backgroundColor:"#f9fafb"}},e.createElement("td",null,n.id),e.createElement("td",{style:{width:"20%"}},n.ticket),t.props.data.items.map(function(a,i){return e.createElement(p,{key:i+moment().unix(),subject:n,data:a,setting:t.state.setting})}))})))}});return h}),define("components/setting/tab-role",["react","pref","setting","role","companymodule","helper","eventbus","components/employeepicker","components/setting/tab-role-add","components/setting/tab-role-edit","components/setting/tab-role-view-permission","components/setting/tab-role-th","components/setting/tab-role-td","models/rbacrole","models/rbacrolepermission","models/user","collections/rbacroleuser","language/company","language/default"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v){var y=e.createClass({displayName:"TabRoleComponent",addRole:function(t,n){var a=this;this._unmountModal(),e.render(e.createElement(l,{module:t,callBackSave:a.callBackSave}),e.findDOMNode(a.refs["modal-wrapper"]))},editRole:function(t,n){this._unmountModal(),e.render(e.createElement(c,{role:t,data:n}),e.findDOMNode(this.refs["modal-wrapper"]))},_unmountModal:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs["modal-wrapper"]))},viewPermission:function(e){var t=$(e.currentTarget);this._viewPermission(),t.next().show()},_viewPermission:function(){var n=this,a=$('[name="employee"]').val();a.length>0?$(e.findDOMNode(this.refs.company_permission)).hide():$(e.findDOMNode(this.refs.company_permission)).show(),(new p).getData({query:{company_id:t.get("cid"),creator_id:t.get("uid"),user_ids:a},action:"userrole",success:function(t){var a=e.findDOMNode(n.refs.view_permission);$.each(t.items,function(e,n){var a={};$.each(n.rbac_subjects,function(e,t){t.subject_id in a?(a[t.subject_id]=$.merge(a[t.subject_id],t.id_list),a[t.subject_id]=$.grep(a[t.subject_id],function(e,n){return n===$.inArray(e,a[t.subject_id])})):a[t.subject_id]=t.id_list}),t.items[e].rbac_subjects=a}),e.unmountComponentAtNode(a),t.items.length>0?e.render(e.createElement(d,{data:t,setting:n.props.setting}),a):$(e.findDOMNode(n.refs.btn_view_permission)).next().hide();
}})},clearViewPermission:function(t){var n=$(t.currentTarget);this.refs.employee.setList([]),this.refs.employee.restoreDefaults(),e.unmountComponentAtNode(e.findDOMNode(this.refs.view_permission)),n.hide(),$(e.findDOMNode(this.refs.company_permission)).show()},onChangeEmployee:function(t){t.length>0&&$(e.findDOMNode(this.refs.btn_view_permission)).show()},componentWillUnmount:function(){o.off("tabrole:unmountmodal",this._unmountModal),o.off("tabrole:editrole",this.editRole),o.off("tabrole:viewpermission",this._viewPermission)},componentDidMount:function(){o.trigger("sidebar:toggle","hide"),o.on("tabrole:unmountmodal",this._unmountModal),o.on("tabrole:editrole",this.editRole),o.on("tabrole:viewpermission",this._viewPermission),$(".show-popup",this.getDOMNode()).popup({inline:!0,hoverable:!0})},render:function(){var t=this;"undefined"==typeof t.props.setting.sale&&(t.props.setting.sale={rbac_roles:[],rbac_subjects:[]}),"undefined"==typeof t.props.setting.app&&(t.props.setting.app={rbac_roles:[],rbac_subjects:[]}),"undefined"==typeof t.props.setting.sale&&(t.props.setting.sale={rbac_roles:[],rbac_subjects:[]}),"undefined"==typeof t.props.setting.erp&&(t.props.setting.erp={rbac_roles:[],rbac_subjects:[]});var a=n.wlLandingRooturl+"help/topic/mo-ta-quyen-tren-he-thong-quan-ly#";return e.createElement("div",null,e.createElement("form",{className:"ui small form form-tab-role"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide"},e.createElement("h3",null,_.t("view_permission")),e.createElement("p",null,_.t("view_permission_info"))),e.createElement("div",{className:"field eight wide"},e.createElement(s,{onChange:this.onChangeEmployee,defaultText:_.t("input_name_employe"),inputname:"employee",ref:"employee"})),e.createElement("div",null,e.createElement("a",{href:"javascript:void(0)",onClick:this.viewPermission,style:{display:"none"},ref:"btn_view_permission",className:"ui green mini button"},_.t("view")),e.createElement("a",{href:"javascript:void(0)",onClick:this.clearViewPermission,style:{display:"none"},className:"ui basic button mini"},_.t("clear")))),e.createElement("div",{className:"fields",ref:"employee_permission"},e.createElement("div",{className:"field sixteen wide",ref:"view_permission"})),e.createElement("div",{className:"fields",ref:"company_permission"},e.createElement("div",{className:"field sixteen wide"},e.createElement("table",{className:"ui small unstackable teal table",style:{marginTop:"20px"}},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{width:"50",title:v.t("sid_tooltip")},"SID"),e.createElement("th",null,_.t("feature")),e.createElement("th",null,_.t("root_admin")),t.props.setting.erp.rbac_roles.map(function(t,n){return e.createElement(u,{key:n+moment().unix(),data:t})}),e.createElement("th",null,e.createElement("a",{href:"javascript:;",className:"ui mini labeled icon button",onClick:t.addRole.bind(this,(new p).MODULE_ERP)},e.createElement("i",{className:"icon tc-plus"}),_.t("add_role"))))),e.createElement("tbody",null,t.props.setting.erp.rbac_subjects.map(function(n,o){var s=n.license_list.length<=0;s||$.each(n.license_list,function(e,t){return i.has(t)?(s=!0,!1):void 0});var l=["employee","project","file","workschedule","elearning","logactivity","blog"],c=!1,d=n.ticket.split(".")[0];return $.inArray(d,l)>=0&&(c=!0),s&&c?e.createElement("tr",{key:o},e.createElement("td",null,n.id),e.createElement("td",{style:{width:"20%"}},n.ticket,r.isPhonegapIos()?null:e.createElement("a",{title:_.t("view_help"),href:a+n.ticket,target:"_blank"},e.createElement("i",{className:"tc-question",style:{position:"relative",top:2,left:2}}))),e.createElement("td",null,e.createElement("div",{className:"ui toggle checkbox"},e.createElement("input",{type:"checkbox",defaultValue:"1",disabled:"true",defaultChecked:!0,key:"root_admin"+o}),e.createElement("label",null," "))),t.props.setting.erp.rbac_roles.map(function(a,i){return e.createElement(m,{key:i,subject_id:n.id,role:a,permission:t.props.setting.role_permission})}),e.createElement("td",null)):void 0})))))),e.createElement("div",{ref:"modal-wrapper"}))}});return y}),define("components/time",["react","helper","language/default","eventbus"],function(e,t,n,a){var i=e.createClass({displayName:"TimeComponent",getDefaultProps:function(){return{className:"",ts:"",timeformat:"HH:mm"}},formatTime:function(){return moment.unix(this.props.ts).format(this.props.timeformat)},componentDidMount:function(){},render:function(){return e.createElement("span",{className:this.props.className},this.formatTime())}});return i}),define("components/tinymce-chat",["react","underscore","setting"],function(e,t,n){var a=["focusin","focusout","click","dblclick","mousedown","mouseup","mousemove","mouseover","beforepaste","paste","cut","copy","selectionchange","mouseout","mouseenter","mouseleave","keydown","keypress","keyup","contextmenu","dragend","dragover","draggesture","dragdrop","drop","drag","BeforeRenderUI","SetAttrib","PreInit","PostRender","init","deactivate","activate","NodeChange","BeforeExecCommand","ExecCommand","show","hide","ProgressState","LoadContent","SaveContent","BeforeSetContent","SetContent","BeforeGetContent","GetContent","VisualAid","remove","submit","reset","BeforeAddUndo","AddUndo","change","undo","redo","ClearUndos","ObjectSelected","ObjectResizeStart","ObjectResized","PreProcess","PostProcess","focus","blur"],i=a.map(function(e){return"on"+e[0].toUpperCase()+e.substring(1)}),r=e.createClass({displayName:"TinyMCEComponent",propTypes:{config:e.PropTypes.object,content:e.PropTypes.string},getDefaultProps:function(){return{rows:1,config:{},content:"",mention:{source:[]},autofocus:!1,bodyclass:"",name:"",focusToInitHandle:function(e){}}},componentWillMount:function(){this.id=this.props.id},componentDidMount:function(){if(this.props.autoLoad){this._remove();var e=this;setTimeout(function(){e._init(e.props.config)},50)}},componentWillUnmount:function(){this._remove()},componentWillReceiveProps:function(e){t.isEqual(this.props.config,e.config)||this._init(e.config,e.content)},shouldComponentUpdate:function(e,n){return!t.isEqual(this.props.content,e.content)||!t.isEqual(this.props.config,e.config)},_init:function(t,n){this._isInit&&this._remove();var r=this;r.getDOMNode().style.hidden="hidden";var o={skin_url:"/js/plugins/tinymce/skins/teamcrop",theme_url:"/js/plugins/tinymce/themes/modern",content_css:"/css/tinymce.css",entity_encoding:"raw",relative_urls:!1,remove_script_host:!0,document_base_url:"/",convert_urls:!1,selector:"#"+this.id,plugins:["advlist autolink autosave lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table directionality","emoticons template paste textcolor colorpicker textpattern autoresize mention placeholder"],external_plugins:{mention:"/js/plugins/tinymce/plugins/mention/plugin.min.js",placeholder:"/js/plugins/tinymce/plugins/placeholder/plugin.js"},forced_root_block:"",force_p_newlines:!1,force_br_newlines:!0,toolbar:!1,menubar:!1,statusbar:!1,autoresize_min_height:24,autoresize_max_height:150,autoresize_bottom_margin:0},s=$.extend({},o,t);this.props.autofocus&&(s.auto_focus=this.id),this.props.bodyclass.length>0&&(s.body_class=this.props.bodyclass),s.setup=function(t){a.forEach(function(e,n){var a=r.props[i[n]];"function"==typeof a&&t.on(e,function(e){a(e,t)})}),t.on("init",function(){n&&t.setContent(n),$(e.findDOMNode(r.refs.text)).prev().show()})},s.mentions=r.props.mention,tinymce.init(s),r.getDOMNode().style.hidden="",this._isInit=!0},_remove:function(){tinymce.EditorManager.execCommand("mceRemoveEditor",!0,this.id),this._isInit=!1},getEditor:function(){return this._isInit?tinymce.get(this.id):null},focusToInit:function(){this._init(this.props.config);var e=tinymce.get(this.id);this.props.focusToInitHandle(e)},render:function(){return e.createElement("textarea",{rows:this.props.rows,onFocus:this.focusToInit,ref:"text",id:this.id,name:this.props.name,placeholder:this.props.placeholder,defaultValue:this.props.content})}});return i.forEach(function(t){r.propTypes[t]=e.PropTypes.func}),r}),define("components/workschedule/edit-popup",["react","language/default"],function(e,t){var n=e.createClass({displayName:"EditPopupComponent",render:function(){return e.createElement("div",{className:"ui grid",style:{minWidth:"400px"}},e.createElement("div",{className:"sixteen wide column"},e.createElement("div",null,e.createElement("div",{className:"pull-left",style:{padding:"4px"}},e.createElement("h3",null,"Edit quan's Shift on Sun, Aug 14")),e.createElement("div",{className:"pull-right"},e.createElement("i",{className:"ui button basic mini icon tc-cross noborder cancel"}))),e.createElement("div",{className:"ui divider",style:{marginTop:"30px"}}),e.createElement("form",{className:"ui form"},e.createElement("div",{className:"field"},e.createElement("label",null,"RECIPIENTS"),e.createElement("input",{type:"text",name:"first-name",placeholder:"First Name"})),e.createElement("div",{className:"field"},e.createElement("label",null,"DATE RANGE"),e.createElement(DateRangePickerComponent,{timepicker:!1})),e.createElement("div",{className:"field"},e.createElement("div",{className:"ui checkbox"},e.createElement("input",{type:"checkbox",className:"hidden"}),e.createElement("label",null,"Notify users with changes"))),e.createElement("div",{className:"field"},e.createElement("div",{className:"ui checkbox"},e.createElement("input",{type:"checkbox",className:"hidden"}),e.createElement("label",null,"Notify all users*"))),e.createElement("button",{className:"ui button pull-right",type:"submit"},"PUBLISH SHIFT"))))}});return n}),define("components/workschedule/more-action-popup",["react","eventbus","role","language/default","language/workschedule","components/confirm"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"MoreDeletePopupComponent",getInitialState:function(){return{permisson:!1}},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.delete)).popup({on:"click",html:e.renderToStaticMarkup(e.createElement(r,null)),onShow:function(){$(this).find(".confirm").fastClick(function(n){n.preventDefault(),t.props.delete(),$(e.findDOMNode(t.refs.delete)).popup("hide")}),$(this).find(".cancel").fastClick(function(n){n.preventDefault(),$(e.findDOMNode(t.refs.delete)).popup("hide")})}})},checkPermissonEdit:function(){var e=!1;return n.hasById(n.WORKSCHEDULE_REVIEW)?e=!0:this.props.isReview||(e=!0),e},render:function(){var t=this.checkPermissonEdit();return e.createElement("div",{className:"ui grid moreactionworkschedule"},e.createElement("div",{ref:"popupmore"},e.createElement("a",{href:"javascript:void(0)",className:"addSchedule",onClick:this.props.add},e.createElement("i",{className:"icon tc-plus iconnonspace"})," ",i.t("add")),e.createElement("div",{className:"ui divider"}),t?e.createElement("a",{href:"javascript:void(0)",className:"editSchedule",onClick:this.props.edit},e.createElement("i",{className:"icon tc-pencil iconnonspace"}),"  ",i.t("edit")):"",t?e.createElement("div",{className:"ui divider"}):"",n.hasById(n.WORKSCHEDULE_REVIEW)?e.createElement("a",{href:"javascript:void(0)",className:"reviewSchedule",onClick:this.props.review},e.createElement("i",{className:"icon tc-checkboxcircle iconnonspace"}),"  ",e.createElement("span",{className:"textreview"},this.props.langreview)):"",n.hasById(n.WORKSCHEDULE_REVIEW)?e.createElement("div",{className:"ui divider"}):"",t?e.createElement("a",{href:"javascript:void(0)",className:"deleteSchedule",ref:"delete"},e.createElement("i",{className:"icon tc-trash iconnonspace"}),"  ",i.t("delete_schedule")):""))}});return o}),define("components/workschedule/reviewer",["react","pref","helper","eventbus","language/default","language/workschedule","models/workschedule"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"ReviewerComponent",getDefaultProps:function(){return{message:r.t("confirm_msg_default"),confirmText:r.t("confirm_text_default"),cancelText:r.t("confirm_cancel_default"),cancelReviewText:r.t("confirm_cancel_review_default"),confirmClass:"green confirmall",cancelClass:"cancel",cancelreviewClass:"red cancelreviewall",review:!0,unreview:!0,onConfirm:function(e){e.preventDefault()},onCancel:function(e){e.preventDefault(),$(".reviewallbtn").popup("hide")}}},review:function(){var e=this.props.data;a.trigger("workschedule:review",e),$(".reviewallbtn").popup("hide")},unreview:function(){var e=this.props.data;a.trigger("workschedule:review",e,!0),$(".reviewallbtn").popup("hide")},componentDidMount:function(){},render:function(){return e.createElement("div",{className:""},e.createElement("h4",{ref:"message"},this.props.message),e.createElement("div",{className:"ui divider"}),e.createElement("div",{style:{textAlign:"right"}},e.createElement("a",{onClick:this.review,className:"ui mini button "+this.props.confirmClass,href:"javascript:void(0)"},this.props.confirmText),e.createElement("a",{onClick:this.unreview,className:"ui mini button "+this.props.cancelreviewClass,href:"javascript:void(0)"},this.props.cancelReviewText),e.createElement("a",{onClick:this.props.onCancel,className:"ui mini button "+this.props.cancelClass,href:"javascript:void(0)"},this.props.cancelText)))}});return s}),define("components/workschedule/blocktime",["react","eventbus","helper","role","language/default","language/workschedule","models/workschedule","components/workschedule/edit-popup","components/workschedule/more-action-popup","components/confirm","components/workschedule/reviewer"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"BlockTimeComponent",onEnter:function(t){obj=t.target,$(e.findDOMNode(this.refs.timeschedule)).addClass("hide"),$(e.findDOMNode(this.refs.btnschedule)).removeClass("hide")},onOut:function(t){obj=t.target,$(e.findDOMNode(this.refs.timeschedule)).removeClass("hide"),$(e.findDOMNode(this.refs.btnschedule)).addClass("hide")},delete:function(){var e=this.props.data;$(".body").addClass("active"),new o({id:this.props.data.id}).destroy({success:function(){n.showSuccess(i.t("delete_success")),t.trigger("workschedule:updatelist",{type:"delete",data:e})},error:function(){n.showError(i.t("delete_fail"))},complete:function(){$(".body").removeClass("active")}})},updateList:function(e){var t=e.type,n=e.item;"range"==t&&n&&!$.isEmptyObject(n)&&n.id==this.props.data.work_tracking_range_id},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},showModal:function(e){this.hidepopup(),t.trigger("workschedule:add",e,this.props.employeeid,this.formatTime(this.props.data.date_scheduled))},showModalEdit:function(e){this.hidepopup(),(this.props.data.status!=(new o).STATUS_REVIEWED||a.hasById(a.WORKSCHEDULE_REVIEW))&&t.trigger("workschedule:edit",e,this.props.data)},renderPopup:function(t,n,a,i,s,l){var d=this;$(e.findDOMNode(this.refs[n])).popup({on:a,inline:!1,position:"right center",setFluidWidth:!0,closable:!0,preserve:!0,lastResort:!0,html:e.renderToStaticMarkup(t),onShow:function(t){$(this).find(".cancel").fastClick(function(e){e.preventDefault(),$(t).popup("hide")}),i&&$(this).find(".confirm").fastClick(function(e){e.preventDefault(),i(),$(t).popup("hide")}),s&&$(this).find(".cancelreview").fastClick(function(e){e.preventDefault(),s(),$(t).popup("hide")}),$(this).find(".addSchedule").fastClick(function(e){e.preventDefault(),d.showModal(e),$(t).popup("hide")}),$(this).find(".editSchedule").fastClick(function(e){e.preventDefault(),d.showModalEdit(e),$(t).popup("hide")}),d.props.data.status==(new o).STATUS_NEW?$(this).find(".reviewSchedule").fastClick(function(e){e.preventDefault(),d.review(e),$(t).popup("hide")}).find("span").text(r.t("confirm_text_default")):$(this).find(".reviewSchedule").fastClick(function(e){e.preventDefault(),d.unreview(e),$(t).popup("hide")}).find("span").text(r.t("confirm_cancel_review_default"));var n=$(t);$(".deleteSchedule").popup({on:a,inline:!1,position:"right center",setFluidWidth:!0,closable:!0,preserve:!0,lastResort:!0,html:e.renderToStaticMarkup(e.createElement(c,null)),onShow:function(e){$(this).find(".cancel").fastClick(function(e){e.preventDefault(),n.popup("hide")}),$(this).find(".confirm").fastClick(function(t){t.preventDefault(),d.delete(),$(e).popup("hide"),n.popup("hide")})}})}})},review:function(){var e=[this.props.data];t.trigger("workschedule:review",e),this.hidepopup()},unreview:function(){var e=[this.props.data];t.trigger("workschedule:review",e,!0),this.hidepopup()},hidepopup:function(){$(e.findDOMNode(this.refs.btnmore)).popup("hide")},componentWillUnmount:function(){t.off("workscheduleblockitem:update",this.updateList)},componentDidMount:function(){t.on("workscheduleblockitem:update",this.updateList);var a="click",i=this.props.data;i.length&&i.hasOwnProperty("manual")&&(a="manual");var r=!1;this.props.data.status==(new o).STATUS_NEW&&(r=!0),$(e.findDOMNode(this.refs.btnmore)).popup({on:"click",inline:!1,position:"right center",setFluidWidth:!0,closable:!0,preserve:!0,lastResort:!0,popup:$(e.findDOMNode(this.refs.morecomponent))}),n.initMyTip($(e.findDOMNode(this)).find(".mytip")),n.initMyTip($(e.findDOMNode(this)),null,"left"),this.renderPopup(e.createElement(c,null),"btndelete","click",this.delete)},render:function(){var t=this,a="",i="",s={backgroundColor:"rgb(84, 204, 184)",borderColor:"rgb(84, 204, 184)"};this.props.rangelist.map(function(e,r){if(e.id==t.props.data.work_tracking_range_id){a=e.time_start+" - "+n.formatTimeEndWorkRange(e.time_end,""),i=e.name;var o="#"+e.color;s={backgroundColor:o,borderColor:o}}}),s=$.extend(s,{backgroundImage:"url(imgs/shift-item-hash.png)"});var c=this.review,d=!1,u=r.t("confirm_text_default");return t.props.data.status==(new o).STATUS_REVIEWED&&(c=this.unreview,d=!0,u=r.t("confirm_cancel_review_default")),e.createElement("div",{className:"workschedule-shiftprocess mytipbottom",ref:"blocktime",title:i,style:s,onMouseEnter:t.onEnter,onMouseLeave:t.onOut},""!=t.props.data.note?e.createElement("div",{className:"egdetime"}):"",e.createElement("div",{className:"workschedule-shiftprocess-time timeschedule",ref:"timeschedule"},a,t.props.data.status==(new o).STATUS_REVIEWED?e.createElement("i",{style:{fontSize:"16px"},className:"icon tc-checkboxcircle"}):""),e.createElement("div",{className:"center aligned hide btnschedule",ref:"btnschedule"},""!=t.props.data.note?e.createElement("a",{className:"ui button grey compact mini mytip",title:"<b>"+r.t("note")+"</b>: "+t.props.data.note},e.createElement("i",{className:"icon tc-file iconnonspace",onClick:t.showModalEdit})):"",e.createElement("a",{className:"ui button grey compact mini",title:r.t("more_action"),ref:"btnmore"},e.createElement("i",{className:"icon tc-gear iconnonspace"}))),e.createElement("div",{className:"ui popup morecomponent",ref:"morecomponent"},e.createElement(l,{add:this.showModal,edit:this.showModalEdit,review:c,isReview:d,langreview:u,delete:this.delete})))}});return u}),define("components/workschedule/detail-blocktime",["react","eventbus","helper","language/default","language/workschedule","models/workschedule","components/workschedule/edit-popup","components/workschedule/more-action-popup","components/confirm","components/workschedule/reviewer"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"BlockTimeComponent",onEnter:function(t){obj=t.target,$(e.findDOMNode(this.refs.timeschedule)).addClass("hide"),$(e.findDOMNode(this.refs.btnschedule)).removeClass("hide")},onOut:function(t){obj=t.target,$(e.findDOMNode(this.refs.timeschedule)).removeClass("hide"),$(e.findDOMNode(this.refs.btnschedule)).addClass("hide")},delete:function(){var e=this.props.data;$(".body").addClass("active"),new r({id:this.props.data.id}).destroy({success:function(){n.showSuccess(a.t("delete_success")),t.trigger("workschedule:updatelist",{type:"delete",data:e})},error:function(){n.showError(a.t("delete_fail"))},complete:function(){$(".body").removeClass("active")}})},updateList:function(t){var n=t.type,a=t.item,i=this;"office"==n&&a&&!$.isEmptyObject(a)&&a.id==this.props.data.office_id&&(console.log(a),$(e.findDOMNode(i.refs.office_name)).attr("title",a.name),alert("aaaa"))},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},showModal:function(e){this.hidepopup(),t.trigger("workschedule:add",e,this.props.employeeid,this.formatTime(this.props.data.date_scheduled))},showModalEdit:function(e){this.hidepopup(),t.trigger("workschedule:edit",e,this.props.data)},renderPopup:function(t,n,a,o,s,c){var d=this;$(e.findDOMNode(this.refs[n])).popup({on:a,inline:!1,position:"right center",setFluidWidth:!0,closable:!0,preserve:!0,lastResort:!0,html:e.renderToStaticMarkup(t),onShow:function(t){$(this).find(".cancel").fastClick(function(e){e.preventDefault(),$(t).popup("hide")}),o&&$(this).find(".confirm").fastClick(function(e){e.preventDefault(),o(),$(t).popup("hide")}),s&&$(this).find(".cancelreview").fastClick(function(e){e.preventDefault(),s(),$(t).popup("hide")}),$(this).find(".addSchedule").fastClick(function(e){e.preventDefault(),d.showModal(e),$(t).popup("hide")}),$(this).find(".editSchedule").fastClick(function(e){e.preventDefault(),d.showModalEdit(e),$(t).popup("hide")}),d.props.data.status==(new r).STATUS_NEW?$(this).find(".reviewSchedule").fastClick(function(e){e.preventDefault(),d.review(e),$(t).popup("hide")}).find("span").text(i.t("confirm_text_default")):$(this).find(".reviewSchedule").fastClick(function(e){e.preventDefault(),d.unreview(e),$(t).popup("hide")}).find("span").text(i.t("confirm_cancel_review_default"));var n=$(t);$(".deleteSchedule").popup({on:a,inline:!1,position:"right center",setFluidWidth:!0,closable:!0,preserve:!0,lastResort:!0,html:e.renderToStaticMarkup(e.createElement(l,null)),onShow:function(e){$(this).find(".cancel").fastClick(function(e){e.preventDefault(),n.popup("hide")}),$(this).find(".confirm").fastClick(function(t){t.preventDefault(),d.delete(),$(e).popup("hide"),n.popup("hide")})}})}})},review:function(){var e=[this.props.data];t.trigger("workschedule:review",e),this.hidepopup()},unreview:function(){var e=[this.props.data];t.trigger("workschedule:review",e,!0),this.hidepopup()},hidepopup:function(){$(e.findDOMNode(this.refs.btnmore)).popup("hide")},componentWillUnmount:function(){t.off("workscheduleblockitem:update",this.updateList)},componentDidMount:function(){t.on("workscheduleblockitem:update",this.updateList);var a="click",i=this.props.data;i.length&&i.hasOwnProperty("manual")&&(a="manual");var o=!1;this.props.data.status==(new r).STATUS_NEW&&(o=!0),$(e.findDOMNode(this.refs.btnmore)).popup({on:"click",inline:!1,position:"right center",setFluidWidth:!0,closable:!0,preserve:!0,lastResort:!0,popup:$(e.findDOMNode(this.refs.morecomponent))}),n.initMyTip($(e.findDOMNode(this)).find(".mytip")),this.renderPopup(e.createElement(l,null),"btndelete","click",this.delete)},render:function(){var t=this,a="",o="",s="",l={backgroundColor:"rgb(84, 204, 184)",borderColor:"rgb(84, 204, 184)"};this.props.rangelist.map(function(e,i){if(e.id==t.props.data.work_tracking_range_id){a=e.time_start+" - "+n.formatTimeEndWorkRange(e.time_end,""),s=e.name;var r="#"+e.color;l={backgroundColor:r,borderColor:r}}}),l=$.extend(l,{backgroundImage:"url(imgs/shift-item-hash.png)"}),t.props.officelist[t.props.data.office_id]&&(o=t.props.officelist[t.props.data.office_id].name);var c={fontSize:"12px"};return this.props.data.office_id!=this.props.office_id&&(c.textDecoration="underline"),e.createElement("div",{className:"workschedule-shiftprocess mytip",ref:"blocktime",title:s,style:l,onMouseEnter:t.onEnter,onMouseLeave:t.onOut},""!=t.props.data.note?e.createElement("div",{className:"egdetime"}):"",e.createElement("div",{className:"workschedule-shiftprocess-time timeschedule",ref:"timeschedule",style:c},a,t.props.data.status==(new r).STATUS_REVIEWED?e.createElement("i",{style:{fontSize:"16px"},className:"icon tc-checkboxcircle"}):""),e.createElement("div",{className:"center aligned hide btnschedule",ref:"btnschedule"},""!=t.props.data.note?e.createElement("a",{className:"ui button grey compact mini mytip",title:"<b>"+i.t("note")+"</b>: "+t.props.data.note},e.createElement("i",{className:"icon tc-comment-alt iconnonspace"})):"",e.createElement("a",{className:"ui button grey compact mini mytip",title:o},e.createElement("i",{className:"icon tc-home iconnonspace"}))))}});return d}),define("components/workschedule/detail-item-detail",["react","eventbus","language/workschedule","components/workschedule/detail-blocktime"],function(e,t,n,a){var i=e.createClass({displayName:"ItemDetailComponent",getInitialState:function(){return{data:[]}},onEnter:function(e){var t=e.target;$(".addnewscheduleicon").addClass("hide"),$(t).find(".workschedule-shiftprocess").length||$(t).find(".addnewscheduleicon").removeClass("hide")},onOut:function(e){var t=e.target;$(t).hasClass(".addnewscheduleicon")||$(".addnewscheduleicon").addClass("hide")},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},loadData:function(){var e=this,t=e.props.data;t&&e.setState({data:t})},showModal:function(e){t.trigger("workschedule:add",e,this.props.employeeid,this.props.date.strDate)},componentWillMount:function(){this.loadData()},componentDidMount:function(){},render:function(){var t=this,n="";return this.props.index||(n=" two wide column"),e.createElement("td",{className:"tdshift tdshiftview"+n,onMouseEnter:t.onEnter,onMouseLeave:t.onOut,ref:"td",style:{padding:0,paddingBottom:"4px"}},t.state.data.length?t.state.data.map(function(n,i){var r=i+moment().valueOf();return $.isEmptyObject(n)||(r=i+n.id),e.createElement(a,{data:n,office_id:t.props.office_id,officelist:t.props.officelist,rangelist:t.props.rangelist,employeeid:t.props.employeeid,key:r})}):"")}});return i}),define("components/workschedule/detail-item",["react","eventbus","helper","components/workschedule/detail-item-detail"],function(e,t,n,a){var i=e.createClass({displayName:"ItemComponent",getInitialState:function(){return{dataFormat:{}}},updateList:function(t){var n=t.type,a=t.item;"employee"==n&&a&&!$.isEmptyObject(a)&&a.id==this.props.employeeid&&$(e.findDOMNode(this.refs.fullname)).text(a.fullname)},formatData:function(){if(this.props.data.length){var e={};this.props.data.map(function(t,n){e.hasOwnProperty(t.date_scheduled)||(e[t.date_scheduled]=[]),e[t.date_scheduled].push(t)}),this.setState({dataFormat:e})}},componentWillMount:function(){this.formatData()},componentWillUnmount:function(){t.off("workscheduleitem:update",this.updateList)},componentDidMount:function(){t.on("workscheduleitem:update",this.updateList)},render:function(){var t=this,i="",r="";this.props.index||(i=" two wide column",r="115px");var o=(t.props.index,t.props.employeeid),s=(t.props.data,t.props.date);return this.props.avatar&&(l=n.getAvatarPath(this.props.avatar)),e.createElement("tr",{className:"positive row-schedule"},s.map(function(n,i){var r=n.intDate+moment().valueOf(),s=t.state.dataFormat.hasOwnProperty(n.intDate)?t.state.dataFormat[n.intDate]:null;return e.createElement(a,{key:r,rangelist:t.props.rangelist,officelist:t.props.officelist,employeeid:o,office_id:t.props.office_id,data:s,date:n})}))}});return i}),define("components/workschedule/detail-left-item",["react","backbone","pref","querystring"],function(e,t,n,a){var i=e.createClass({displayName:"ScheduleLeftItemComponent",clickHandle:function(e){e.preventDefault();var n=a.get("user_id"),i="workschedule/detail/_s/user_id/"+n;this.props.data.id>0&&(i+="/work_tracking_range_id/"+this.props.data.id),t.history.navigate(i,{trigger:!0})},componentDidUpdate:function(){},componentDidMount:function(){},render:function(){var t="item",n=a.get("work_tracking_range_id")||"0";return this.props.data.id+""==n&&(t+=" active"),e.createElement("a",{className:t,onClick:this.clickHandle},e.createElement("i",{className:"icon"},e.createElement("span",{style:{backgroundColor:"#"+this.props.data.color},className:"ui mini circular empty label"})),this.props.data.name)}});return i}),define("components/workschedule/detail-left",["react","language/default","models/employee","components/workschedule/detail-left-item"],function(e,t,n,a){var i=e.createClass({displayName:"ScheduleLeftComponent",getDefaultProps:function(){return{data:[]}},componentDidMount:function(){},render:function(){var n={name:t.t("all"),id:0,color:"222"};return e.createElement("div",{className:"menu"},e.createElement(a,{key:n.id,data:n}),this.props.data.map(function(t,n){return e.createElement(a,{key:n,data:t})}))}});return i}),define("language/datetime",["baselanguage"],function(e){var t={vn:{day_of_week_t2:"Thứ 2",day_of_week_t3:"Thứ 3",day_of_week_t5:"Thứ 5",day_of_week_t6:"Thứ 6",day_of_week_t7:"Thứ 7",day_of_week_cn:"Chủ nhật",day_of_week_t4:"Thứ 4",day_of_week_str_t2:"Thứ hai",day_of_week_str_t3:"Thứ ba",day_of_week_str_t5:"Thứ năm",day_of_week_str_t6:"Thứ sáu",day_of_week_str_t7:"Thứ bảy",day_of_week_str_cn:"Chủ nhật",day_of_week_str_t4:"Thứ tư"},en:{day_of_week_t2:"Thứ 2",day_of_week_t3:"Thứ 3",day_of_week_t5:"Thứ 5",day_of_week_t6:"Thứ 6",day_of_week_t7:"Thứ 7",day_of_week_cn:"Chủ nhật",day_of_week_t4:"Thứ 4",day_of_week_str_t2:"Thứ hai",day_of_week_str_t3:"Thứ ba",day_of_week_str_t5:"Thứ năm",day_of_week_str_t6:"Thứ sáu",day_of_week_str_t7:"Thứ bảy",day_of_week_str_cn:"Chủ nhật",day_of_week_str_t4:"Thứ tư"}};return new e({lang:t})}),define("components/workschedule/select-employee",["react","pref","collections/employee","models/employee","models/user","language/employee","components/mixin/select"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"SelectEmployeeItemComponent",getDefaultProps:function(){return{data:null,fullname:"",datalist:[]}},componentDidMount:function(){},render:function(){return e.createElement("div",{className:"item","data-value":this.props.data.user_id},this.props.fullname)}}),l=e.createClass({displayName:"SelectEmployeeComponent",getInitialState:function(){return{items:[]}},getDefaultProps:function(){return{className:"",placeholder:"----",value:0,name:""}},val:function(t){return"undefined"==typeof t?$(e.findDOMNode(this)).dropdown("get value"):(this.props.value=t,void this.forUpdate())},componentDidUpdate:function(){$(e.findDOMNode(this)).dropdown("refresh"),null!=this.props.value&&this.props.value>0&&$(e.findDOMNode(this)).dropdown("set exactly",this.props.value)},componentDidMount:function(){var t=this;$(e.findDOMNode(this)).dropdown({maxSelections:1,onChange:this.props.onChange,onAdd:function(e,n,a){$(this).addClass("dropdownwithitem").removeClass("dropdownnoitem"),"function"==typeof t.props.onAdd&&t.props.onAdd(e,n,a)},onRemove:function(e,n,a){$("> .ui.label",this).length>0&&($(this).removeClass("dropdownwithitem").addClass("dropdownnoitem"),"function"==typeof t.props.onRemove&&t.props.onRemove(e,n,a))}})},render:function(){return e.createElement("div",{style:{minWidth:0},className:"ui "+this.props.className+" multiple floating dropdown basic labeled search icon button"},e.createElement("input",{name:this.props.name,type:"hidden",defaultValue:this.props.value}),e.createElement("i",{className:"tc-user icon"}),e.createElement("div",{className:"default text"},this.props.placeholder),e.createElement("div",{className:"menu"},this.props.datalist.map(function(t){return t.user_id>0?e.createElement(s,{fullname:t.full_name,data:t,key:t.id+moment().valueOf()}):void 0})))}});return l}),define("components/workschedule/detail",["react","eventbus","basecontroller","pref","helper","phonegap","role","setting","language/workschedule","language/checkin","language/default","language/datetime","querystring","models/employee","models/workschedule","models/user","models/worktrackingrange","models/office","collections/employee","collections/user","collections/office","collections/workschedule","collections/worktrackingrange","components/workschedule/detail-item","components/workschedule/detail-left","components/workschedule/reviewer","components/semantic-datepicker","components/filtersidebar","components/workschedule/select-employee","components/select/office","components/select/position","components/headingfull","components/mixin/listsearch"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M,S,O,I){
var A=e.createClass({displayName:"WorkscheduleEdit",mixins:[I],getInitialState:function(){return{dateRange:[],fullpage:!1,schedulelist:[],scheduleFormatList:[],employeeList:[],summaryList:{},officelist:{},RangeList:[],models:[],length:0,roleid:264}},filters:{user_id:null,office_id:null,position_id:null,work_tracking_range_id:null},formSidebarSubmit:function(){var e={office_id:this.refs.filteroffice.val()};this.doFilters(e)},loadFilterQueryTagData:function(e){var n=null,a="fullname";switch(e){case"office_id":n=new _,a="name";break;case"user_id":n=new f,a="fullname";break;case"work_tracking_range_id":n=new g,a="name";break;case"position_id":var i=(new p).getPosition(this.filters[e]),r=l.t(i.text);t.trigger("querytag:updatetext",{field:e,text:r})}null!=n&&m.requestFilterQueryTag(n,this.filters,e,a)},fullpage:function(t){$(e.findDOMNode(this.refs.pageright)).hasClass("sixteen")?($(e.findDOMNode(this.refs.pageleft)).show(),$(e.findDOMNode(this.refs.pageright)).attr("class","thirteen wide column")):($(e.findDOMNode(this.refs.pageleft)).hide(),$(e.findDOMNode(this.refs.pageright)).attr("class","sixteen wide column")),$("#tablescheduleworkheader").width($("#tableschedulework").width())},toggleBudget:function(){$(e.findDOMNode(this.refs.tablebudget)).toggle()},loadData:function(){var e=this,t=this.state.schedulelist,n=[],a=this.state.employeeList,i=[],r=[],o={},s=[],l={},c={},d={};a.map(function(e){e.office_id==m.get("office_id")&&(r.push(e.user_id),c[e.user_id]=e.keyload,o[e.user_id]={},o[e.user_id].internal_id=e.internal_id,o[e.user_id].office_id=e.office_id)}),this.state.scheduleFormatList.length&&(this.state.scheduleFormatList[0].map(function(e,t){i.push(e.work_tracking_range_id),s.push(e.office_id)}),i&&(new N).getFromIdList({ids:i,success:function(t){$.each(t.items,function(e,t){n.push(t)}),e.setState({RangeList:n})}}),s&&(new E).getFromIdList({ids:s,success:function(t){$.each(t.items,function(e,t){l[t.id]=t}),e.setState({officelist:l})}}),t.map(function(e){var t=e.user_id;d.hasOwnProperty(t)||(d[t]=[]),d[t].push(e)}))},getPageNumber:function(e,t){var n=1;return e.length>t&&(n=Math.floor(e.length/t)+1),n},loadWorktrackingRange:function(e){var t=this;$("#body-loader").addClass("active");var n={company_id:a.get("cid"),limit:50,page:e,office_id:t.props.data.id,sort_by:"display_order",sort_type:"ASC",status:(new g).STATUS_ENABLE};(new N).fetch({data:n,success:function(n,a){var i=[];e>1&&(i=t.state.RangeList);var r=i.concat(a.items);t.setState({RangeList:r}),Math.ceil(a.total/a.limit)>a.currentpage?t.loadWorktrackingRange(a.currentpage+1):t.loadSchedule(1)},complete:function(){$("#body-loader").removeClass("active")}})},updateScheduleList:function(e,t,n){return e.hasOwnProperty(t)?(e[t].map(function(a,i){a.id==n.id&&e[t].splice(i,1)}),e[t].push(n)):(e[t]=[],e[t].push(n)),e},getKey:function(e,t){var n=null;return e.map(function(e,a){e.user_id==t&&(n=a)}),n},getArrRange:function(){var e=[];return this.state.RangeList.map(function(t,n){e.push(t.id)}),e=$.unique(e)},loadSchedule:function(e){var t=this;$("#body-loader").addClass("active");var n={company_id:a.get("cid"),limit:50,page:e,user_id:m.get("user_id"),position_id:-1,work_tracking_range_id:m.get("work_tracking_range_id"),office_id:m.get("office_id"),date_schedule_started:m.get("datestarted"),date_schedule_ended:m.get("dateended")};(new b).fetch({data:n,success:function(n,a){var i=t.state.scheduleFormatList;1==e&&(i=[]),i.push(a.items),t.setState({scheduleFormatList:i}),Math.ceil(a.total/a.limit)>a.currentpage?t.loadSchedule(a.currentpage+1):(t.setState({employeeList:[t.props.employeeData]}),t.loadData(),t.loadSummary(1))},complete:function(){$("#body-loader").removeClass("active")}})},loadSummary:function(e,t){var n=this;$("#body-loader").addClass("active");var i={company_id:a.get("cid"),limit:50,page:e,user_id:m.get("user_id"),work_tracking_range_id:m.get("work_tracking_range_id"),position_id:m.get("position_id")?m.get("position_id"):-1,office_id:m.get("office_id"),date_schedule_started:m.get("datestarted"),date_schedule_ended:m.get("dateended")};$.ajax({type:"GET",contentType:"application/json; charset=utf-8",data:i,url:s.rooturl+"v1/workschedules/summary",success:function(e){var t={};$.each(e.time,function(a,i){t[a]=e.ratio[a]+" ("+n.calcTime(i)+")"}),n.setState({summaryList:t})},error:function(){},complete:function(){$("#body-loader").removeClass("active")}})},calcTime:function(e){var t=Math.floor(e/3600)+"h ";return t+=Math.floor(e%3600/60)+"p"},changeweek:function(e){var t=$(e.target),n=moment.unix(m.get("datestarted")),a=t.data("value");t.is("i")&&(a=t.parent().data("value")),n="0"==a?moment(n).weekday(-7).unix():moment(n).weekday(7).unix(),m.set("datestarted",n),this.calcRange(),this.loadSchedule(1)},calcRange:function(){var e=m.get("datestarted"),t=[];if(!e){var n=this.formatTime(moment.unix(moment().unix()).format("D/MM/YYYY"),!0),a=moment.unix(n);e=i.getStartWeek(moment(a).weekday(0).unix()),m.set("datestarted",e)}for(var r=0;7>r;r++){var o=e+86400*r,s="day_of_week_str_"+this.formatTime(o,!1,"dd").toLowerCase(),l={strDate:this.formatTime(o,!1,"DD/MM/YYYY"),strDay:u.t(s),intDay:this.formatTime(o,!1,"e"),intDate:o};0==r?m.set("datestarted",o):6==r&&m.set("dateended",o),t.push(l)}this.setState({dateRange:t})},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},updateList:function(e){var t=e.type,n=e.data,a=this.state.employeeList,i=this.state.schedulelist,r=this.state.scheduleFormatList,o=n.user_id,s=this.getKey(a,o),l=!1;switch(t){case"add":r.hasOwnProperty(s)||(r[s]=[],l=!0),r[s].push(n),i.push(n);break;case"delete":var c=r[s];c.length&&c.map(function(e,t){e.id==n.id&&r[s].splice(t,1)}),r[s].length||r.splice(s,1),i=this.removeItem(i,n);break;case"edit":r=this.updateScheduleList(r,s,n),i.map(function(e,t){e.id==n.id&&(i[t]=n)}),a[s].keyload+=1}this.setState({scheduleFormatList:r,schedulelist:i,employeeList:a}),l&&this.loadData()},removeItem:function(e,t){return e.map(function(n,a){n.id==t.id&&e.splice(a,1)}),e},changeOffice:function(e){m.get("office_id",e)},componentWillMount:function(){this.calcRange(),this.loadSchedule(1),m.initFilter(this.filters)},unmountModal:function(){e.findDOMNode(this.refs["modal-wrapper"]),e.unmountComponentAtNode(e.findDOMNode(this.refs["modal-wrapper"]))},componentWillUnmount:function(){},componentDidUpdate:function(){var t=this;$(e.findDOMNode(this.refs.startdate)).on("apply.daterangepicker",function(e,n){var a=n.startDate.format("DD/MM/YYYY");a=t.formatTime(a,!0),m.set("datestarted",a),t.calcRange(),t.loadSchedule(1)})},updateSchedule:function(e,t){if(e.length){var n=this;$("#body-loader").addClass("active");var r=(new h).STATUS_REVIEWED;t&&(r=(new h).STATUS_NEW),e.map(function(t,o){var s={company_id:a.get("cid"),creator_id:a.get("uid"),work_tracking_range_id:t.work_tracking_range_id,office_id:t.office_id,note:t.note,user_id:t.user_id,status:r,date_scheduled:t.date_scheduled};new h({id:t.id}).save(s,{success:function(e,t){i.showSuccess(d.t("update_success")),n.updateList({type:"edit",data:t})},error:function(e,t){console.log(JSON.parse(t.responseText));var n=JSON.parse(t.responseText),a="";n.error.map(function(e,t){a+=l.t(e)}),i.showError(a)},complete:function(){o==e.length-1&&$("#body-loader").removeClass("active")}})})}},componentDidMount:function(){var t=this;(new n).setTcScrollMinHeight(),r.enablePullToRefresh(this._loadData),$(e.findDOMNode(this.refs.reviewer)).popup({on:"click",inline:!1,position:"bottom right",setFluidWidth:!0,closable:!1,lastResort:!0,preserve:!0,popup:$(e.findDOMNode(this.refs.reivewcompnent))});var a=screen.height-218;$(e.findDOMNode(t.refs.contentright)).css("height",a),$(e.findDOMNode(t.refs.tabletop)).css("height",a-190),i.isSmallScreen()||i.initMyTip($(e.findDOMNode(this)).find(".mytip"))},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",{id:"scheduledetail"},this.state.dateRange.map(function(t,n){return e.createElement("th",{key:n,style:{color:"#666"},className:"two wide column"},t.strDay.concat(" ",t.strDate))}))},renderEmptyTableHeaderDesktop:function(){return e.createElement("tr",{id:"scheduledetail"},this.state.dateRange.map(function(t,n){return e.createElement("td",{key:"emty_"+n,className:"two wide column"}," ")}))},render:function(){var t=this,n={format:"DD/MM/YYYY",singleDatePicker:!0,showDropdowns:!0,applyClass:"ui button green",cancelClass:"ui button secondary",startDate:t.formatTime(m.get("datestarted"))},a=(new p).getPositionList();return a.unshift({code:-1,text:"----"}),e.createElement("div",{className:"ui segments",id:"workschedulepage"},e.createElement("div",{id:"page"},e.createElement("div",{id:"pageleft",className:"hideonsmall"},e.createElement(x,{ref:"sidebar",showkeyword:!1,onSubmit:this.formSidebarSubmit,offsetTop:"50"},e.createElement("div",{className:"field"},e.createElement("label",null,l.t("office")),e.createElement(M,{ref:"filteroffice",value:this.filters.office_id,name:"filteroffice"})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("work_tracking_range_id")),e.createElement(k,{data:t.state.RangeList})))),e.createElement("div",{id:"pageright"},e.createElement(O,{ref:"heading",rootlink:"#checkin",roottext:c.t("heading"),text:l.t("heading"),link:"#workschedule",hidepagination:!0,filters:this.filters,lang:l,loadFilterQueryTagData:this.loadFilterQueryTagData,hidekeywordsearch:!0,hidefiltertoggle:!0,hidetab:!0}),e.createElement("div",{style:{padding:"20px"},className:"ui segment tc-scrolled",ref:"contentright"},e.createElement("div",{className:"pull-left hideonsmall",style:{fontSize:"28px"}},moment.unix(m.get("datestarted")).format("D/MM/YYYY")," - ",moment.unix(m.get("dateended")).format("D/MM/YYYY")),e.createElement("div",{className:"pull-right"},e.createElement("div",{className:"ui buttons mini"},e.createElement("button",{className:"ui button mytip",title:d.t("prevweek"),"data-value":"0",onClick:this.changeweek},e.createElement("i",{className:"icon tc-left"})),e.createElement("button",{className:"ui button mytip",title:d.t("nextweek"),"data-value":"1",onClick:this.changeweek},e.createElement("i",{className:"icon tc-right"})))," ",e.createElement(T,{options:n,ref:"startdate",key:moment().valueOf()})," "),e.createElement("div",{style:{overflow:"scroll",width:"100%"}},e.createElement("table",{className:"ui table celled unstackable",style:{marginTop:"20px",marginBottom:0},id:"tablescheduleworkheader"},e.createElement("thead",null,i.isMobileScreen()?null:this.renderTableHeaderDesktop()))),e.createElement("div",{ref:"tabletop",id:"workscheduletabletop"},e.createElement("table",{className:"ui table celled unstackable scheduledetail",id:"tableschedulework"},e.createElement("thead",null,i.isMobileScreen()?this.renderTableHeaderDesktop():null),e.createElement("tbody",null,t.state.scheduleFormatList.map(function(n,a){var i=0,r=0,o="",s="",l="";return $.isEmptyObject(t.state.employeeList)||(i=t.state.employeeList[a].user_id,o||(o=i),t.state.employeeList[a].hasOwnProperty("keyload")&&(r=t.state.employeeList[a].keyload)),e.createElement(w,{key:a+"_"+n.length+"_"+r+"_"+i,index:a,rangelist:t.state.RangeList,officelist:t.state.officelist,employeeid:i,office_id:t.props.employeeData.office_id,employeename:o,internalid:s,avatar:l,data:n,loaddata:t.loadData,date:t.state.dateRange})})),i.isMobileScreen()?e.createElement("tfoot",null,t.state.dateRange.map(function(n,a){var i=t.state.summaryList[n.intDate]?t.state.summaryList[n.intDate]:0;return e.createElement("th",{key:a,className:"two wide column"},i)})):null)),i.isMobileScreen()?null:e.createElement("div",{style:{paddingRight:"7px"}},e.createElement("div",{ref:"tablebottom",id:"workscheduletablebottom"},e.createElement("table",{className:"ui table celled",id:"scheduledetailsummanry"},e.createElement("thead",null,t.state.dateRange.map(function(n,a){var i=t.state.summaryList[n.intDate]?t.state.summaryList[n.intDate]:0;return e.createElement("th",{key:a,className:"two wide column"},i)}))))),e.createElement("div",{ref:"modal-wrapper"})))))}});return A}),define("components/workschedule/item-detail",["react","helper","eventbus","language/workschedule","components/workschedule/blocktime"],function(e,t,n,a,i){var r=e.createClass({displayName:"ItemDetailComponent",getInitialState:function(){return{data:[]}},onEnter:function(t){var n=t.target;$(".addnewscheduleicon").addClass("hide"),$(n).find(".workschedule-shiftprocess").length||($(e.findDOMNode(this.refs.td)).attr("style","vertical-align:middle"),$(n).find(".addnewscheduleicon").removeClass("hide"))},onOut:function(t){var n=t.target;$(n).hasClass(".addnewscheduleicon")||($(e.findDOMNode(this.refs.td)).attr("style",""),$(".addnewscheduleicon").addClass("hide"))},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},loadData:function(){var e=this,t=e.props.data;t&&e.setState({data:t})},showModal:function(e){n.trigger("workschedule:add",e,this.props.employeeid,this.props.date.strDate)},componentWillMount:function(){this.loadData()},componentDidMount:function(){t.initMyTip($(e.findDOMNode(this)).find(".mytip"))},render:function(){var t=this,n="";return this.props.index||(n=" two wide column"),e.createElement("td",{className:"tdshift"+n,onMouseEnter:t.onEnter,onMouseLeave:t.onOut,ref:"td"},t.state.data.length?t.state.data.map(function(n,a){var r=0;return r=$.isEmptyObject(n)?a+"_"+moment().valueOf():a+"_"+n.id,e.createElement(i,{data:n,rangelist:t.props.rangelist,employeeid:t.props.employeeid,key:r})}):e.createElement("div",{className:"center aligned hide addnewscheduleicon",onClick:this.showModal},e.createElement("a",{className:"ui icon noborder basic button small mytip",ref:"btnmore",title:a.t("add")},e.createElement("i",{className:"icon tc-plus"}))))}});return r}),define("components/workschedule/item",["react","pref","eventbus","helper","language/workschedule","collections/employee","models/office","models/user","components/workschedule/item-detail"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ItemComponent",getInitialState:function(){return{dataFormat:{},internal_id:"",office_name:""}},updateList:function(){var t=this;new s({id:this.props.user_id}).fetch({success:function(n,i){a.isSmallScreen()?$(e.findDOMNode(t.refs.user)).empty().append(i.fullname).append(e.renderToString(e.createElement("img",{className:"ui avatar image pull-left",src:a.getAvatarPath(i.avatar)}))):$(e.findDOMNode(t.refs.user)).empty().append(e.renderToString(e.createElement("img",{className:"ui avatar image",style:{width:36,height:36},src:a.getAvatarPath(i.avatar)}))).append(i.fullname)}})},getEmployee:function(){var t=this,n=(new r).fetchFromCache({user_id:this.props.user_id});if(n.total>0){var a=(n.items[0].id,n.items[0].internal_id),s=n.items[0].office_id;new o({id:s}).fetch({success:function(n,r){$(e.findDOMNode(t.refs.user)).attr("title",i.t("office")+": "+r.name+"<br>Internale ID: "+a)}})}},formatData:function(){if(this.props.data.length){var e={};this.props.data.map(function(t,n){e.hasOwnProperty(t.date_scheduled)||(e[t.date_scheduled]=[]),e[t.date_scheduled].push(t)}),this.setState({dataFormat:e})}},componentDidUpdate:function(){this.updateList(),this.getEmployee(),a.initMyTip($(e.findDOMNode(this)).find(".mytip"))},componentWillMount:function(){},componentWillUnmount:function(){n.off("workscheduleitem:update",this.updateList)},componentDidMount:function(){var t=this;this.updateList(),t.getEmployee(),n.on("workscheduleitem:update",this.updateList),a.initMyTip($(e.findDOMNode(this)).find(".mytip"))},render:function(){var t=this,n="",i="";this.props.index||(n=" two wide column",i="115px");var r=(t.props.index,t.props.employeeid),o=(t.props.data,t.props.date);this.props.avatar&&(s=a.getAvatarPath(this.props.avatar));var c={};if(this.props.data.length){var d={};this.props.data.map(function(e,t){d.hasOwnProperty(e.date_scheduled)||(d[e.date_scheduled]=[]),d[e.date_scheduled].push(e)}),c=d}return e.createElement("tr",{className:"row-schedule"},e.createElement("td",{style:{verticalAlign:"top",overflow:"hidden"}},e.createElement("div",{className:"mytip",ref:"user"})),o.map(function(n,a){var i=n.intDate+"_"+moment().valueOf(),o=c.hasOwnProperty(n.intDate)?c[n.intDate]:null;return e.createElement(l,{key:i,rangelist:t.props.rangelist,employeeid:r,data:o,date:n})}))}});return c}),define("components/workschedule/modalAdd",["react","pref","helper","eventbus","language/workschedule","language/default","models/workschedule","models/worktrackingrange","collections/worktrackingrange","components/employeepicker","components/semantic-datepicker"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"ModalAddComponent",formError:{employee:["error_user_id_is_require","error_user_id_invalid"],office:["error_office_id_is_require","error_office_is_invalid"],dateschedule:["error_date_scheduled_is_require"],range:["error_range_id_is_require","error_range_id_is_invalid"]},getDefaultProps:function(){return{employeeList:[],autofocus:!1}},getInitialState:function(){return{rangelist:[],rangeselect:[],employee_select:this.props.user_id,date_select:this.props.date,office_id:0,objError:[],error:!1}},save:function(){var t=this,a=0;this.props.user_id>0?a=this.props.user_id:(a=this.refs.employees.getSelectedUserIdList(),a=a[0]);var r=$(e.findDOMNode(this.refs.rangelist)).find("input:checked");if(r.length){var o=[];$.each(r,function(e,t){o.push($(t).val())}),this.setState({objError:[]}),t.saveProcess(o,a,0)}else n.showError(i.t("error_range_id_is_require"))},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},saveProcess:function(s,l,c){var d=this,u=$(".ui .form",this.getDOMNode()),m=0;m=this.props.date?d.formatTime(this.props.date,!0):this.formatTime(this.refs.dateschedule.getDatePicker().element.context.value,!0),this.state.error||$(e.findDOMNode(d.refs.errormessage)).addClass("hide"),u.hasClass("loading")||(u.addClass("loading"),(new o).save({company_id:t.get("cid"),creator_id:t.get("uid"),user_id:l,work_tracking_range_id:s[c],office_id:d.props.officedata.id,note:$(e.findDOMNode(d.refs.note)).val(),status:(new o).STATUS_NEW,date_scheduled:m},{success:function(t,i){n.showSuccess(r.t("insert_success")),a.trigger("workschedule:updatelist",{type:"add",data:i});var o=c+1;$(e.findDOMNode(d.refs["checkbox_"+s[c]])).checkbox("set disabled"),s.length>o?d.saveProcess(s,l,o):d.state.error.length?u.removeClass("loading"):$(d.getDOMNode()).modal({context:$(d.getDOMNode()).parent()}).modal("hide")},error:function(t,a){var o=a.responseJSON,m="";d.props.rangelist.map(function(e,t){e.id==s[c]&&(m=e.name+": ")});var p=d.processError(o,m);strError=p.join(""),""!=strError&&($(e.findDOMNode(d.refs.errormessage)).removeClass("hide"),$(e.findDOMNode(d.refs.dupoffice)).html("<ol class='ui list'>"+strError+"</ol>"));var h=c+1;n.notifyErrorAndForm(a,i,r.t("error_add"),u,d.formError),d.setState({error:!0}),s.length>h?d.saveProcess(s,l,h):u.removeClass("loading")},complete:function(){}}))},processError:function(e,t){var n=this.state.objError,a=!1;e.hasOwnProperty("object")&&(e=e.object,$.isEmptyObject(e)||(a=!0));var i={};return a&&(i=e.items,$.isEmptyObject(i)&&(a=!1)),$.isEmptyObject(i)||$.each(i,function(e,a){var i=a.name,r=a.range,o=[];$.each(r,function(e,t){o.push(t.name+" - "+t.time)}),i+=" ("+o.join(", ")+")",i="<li value=''>"+t+i+"</li>",n.push(i)}),this.setState({objError:n}),n},selectOffice:function(e){var t=$(e.target),n=t.val();n&&(this.state.rangelist.hasOwnProperty(n)?this.setState({rangeselect:this.state.rangelist[n]}):this._getWokingrange(1,n))},_getWokingrange:function(e,n){var a=this;$("#body-loader").addClass("active");var i={company_id:t.get("cid"),office_id:n,limit:50,page:e,status:(new s).STATUS_ENABLE,is_not_deleted:1};(new l).fetch({data:i,success:function(e,t){var i=[],r=a.state.rangelist;r.hasOwnProperty(n)?i=a.state.rangelist[n]:(r[n]=[],i=[]),r[n]=i.concat(t.items),a.setState({rangelist:r}),Math.ceil(t.total/t.limit)>t.currentpage?a._getWokingrange(t.currentpage+1):a.setState({rangeselect:a.state.rangelist[n]})},complete:function(){$("#body-loader").removeClass("active")}})},getKey:function(e,t){var n=null;return e.map(function(e,a){e.user_id==t&&(n=a)}),n},hideMessage:function(){$(e.findDOMNode(this.refs.errormessage)).addClass("hide")},selectemployee:function(e,t,n){this.setState({employee_select:e})},componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({onHide:function(){a.trigger("workschedulemodalposition:hide")},autofocus:!1,context:$(this.getDOMNode()).parent()}).modal("show"),$(".checkboxavailableschedule").checkbox(),$(".checkboxschedule").checkbox("set checked")},render:function(){var t=this,a={format:"DD/MM/YYYY",singleDatePicker:!0,showDropdowns:!0,applyClass:"ui button green",cancelClass:"ui button secondary"};this.props.date&&(a=$.extend(a,{startDate:this.state.date_select}));var o="",s="",l=this.props.date;this.props.user_id>0&&(o="none",this.props.employeeData.map(function(e,n){e.user_id==t.props.user_id&&(s=e.full_name)}));var d=this.props.schedulelist,u=this.getKey(this.props.employeeData,this.state.employee_select),m=[];return d.length&&null!=u&&d[u]&&d[u].map(function(e,n){e.date_scheduled==t.formatTime(t.state.date_select,!0)&&m.push(e.work_tracking_range_id)}),e.createElement("div",{className:"ui modal",ref:"modal"},e.createElement("i",{className:"close icon"}),e.createElement("div",{className:"header"},i.t("addheading")," - ",r.t("day")," ",l," - ",r.t("employee")," ",s),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"ui negative message hide",ref:"errormessage"},e.createElement("i",{className:"icon tc-cross close",onClick:this.hideMessage}),e.createElement("div",{className:"header"},i.t("DUP_OFFICE"),"  "),e.createElement("p",{style:{marginTop:"8px"},ref:"dupoffice"})),e.createElement("div",{className:"sixteen wide fields",style:{display:o}},e.createElement("div",{className:"eight wide field"},e.createElement("label",null,i.t("addemployee")),e.createElement(c,{max:"1",callbackSelected:this.selectemployee,ref:"employees",inputname:"employee"}))),e.createElement("div",{className:"sixteen wide fields"},m.length?e.createElement("div",{className:"sixteen wide field"},e.createElement("label",null,i.t("current_worktrackingrange")),t.props.rangelist.map(function(t,a){return $.inArray(t.id,m)>=0&&m.length?e.createElement("div",{key:t.id,className:"ui checkbox checked disabled four wide field checkboxschedule",ref:"checkboxdisable"},e.createElement("input",{type:"checkbox",name:"example",defaultValue:t.id}),e.createElement("label",null,t.name+" ("+t.time_start+" - "+n.formatTimeEndWorkRange(t.time_end)+") ")):void 0})):""),e.createElement("div",{className:"sixteen wide fields",ref:"rangelist"},e.createElement("div",{className:"sixteen wide field"},e.createElement("label",null,i.t("worktrackingrange_availble")),t.props.rangelist.map(function(t,a){return-1!=$.inArray(t.id,m)&&m.length?void 0:e.createElement("div",{key:t.id,className:"ui checkbox four wide field checkboxavailableschedule",ref:"checkbox_"+t.id},e.createElement("input",{type:"checkbox",name:"example",defaultValue:t.id}),e.createElement("label",null,t.name+" ("+t.time_start+" - "+n.formatTimeEndWorkRange(t.time_end)+") "))}))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"sixteen wide field"},e.createElement("label",null,i.t("note")),e.createElement("textarea",{rows:"2",ref:"note"}))))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui button cancel"},r.t("close")),e.createElement("div",{className:"ui green button",onClick:this.save},r.t("save"))))}});return u}),define("components/workschedule/modalAddMore",["react","pref","helper","eventbus","language/workschedule","language/default","models/workschedule","models/user","models/worktrackingrange","collections/worktrackingrange","collections/employee","components/employeepicker","components/semantic-datepicker"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"ModalAddMoreComponent",formError:{employee:["error_user_id_is_require","error_user_id_invalid"],office:["error_office_id_is_require","error_office_is_invalid"],dateschedule:["error_date_scheduled_is_require"],range:["error_range_id_is_require","error_range_id_is_invalid"]},getDefaultProps:function(){return{employeeList:[],autofocus:!1}},getInitialState:function(){var e=this;return{rangelist:[],rangeselect:[],currentEmployee:[],selectall:!0,employeeselect:[],employeeData:e.props.employeeData,employee_select:this.props.user_id,date_select:this.props.date,office_id:0,objError:[],error:!1}},save:function(){var t=this,a=0;if(a=this.props.user_id>0?this.props.user_id:this.refs.employees.getSelectedUserIdList(),a=$.unique($.merge(a,this.state.employeeselect)),a.length){this.setState({objError:[]}),this.setState({currentEmployee:[]}),$(this.getDOMNode()).find(".checkboxschedule").checkbox("set enabled");var r=$(e.findDOMNode(this.refs.range_id)).val();""!=r?($(e.findDOMNode(this.refs.btnsave)).addClass("disabled"),t.saveProcess(r,a,0)):n.showError(i.t("error_range_id_is_require"))}else n.showError(i.t("error_employee_is_require"))},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},saveProcess:function(a,s,l){var c=this,d=$(".ui.form",this.getDOMNode()),u=0;u=this.props.date?c.formatTime(this.props.date,!0):this.formatTime(this.refs.dateschedule.getDatePicker().element.context.value,!0),this.state.error||$(e.findDOMNode(c.refs.errormessage)).addClass("hide"),d.addClass("loading");var m=l+1;(new o).save({company_id:t.get("cid"),creator_id:t.get("uid"),user_id:s[l],work_tracking_range_id:a,office_id:c.props.officedata.id,note:$(e.findDOMNode(c.refs.note)).val(),status:(new o).STATUS_NEW,date_scheduled:u},{success:function(t,i){n.showSuccess(r.t("insert_success"));var o=c.state.currentEmployee;o.push(i),c.setState({currentEmployee:o}),$(e.findDOMNode(c.refs["checkbox_"+s[l]])).checkbox("set disabled"),s.length>m?c.saveProcess(a,s,m):(c.state.objError.length||$(c.getDOMNode()).modal({context:$(c.getDOMNode()).parent()}).modal("hide"),c.finishSave(d))},error:function(e,t){var o=t.responseJSON,u="";s.map(function(e,t){e.id==s[l]&&(u=e.fullname+": ")}),""!=u?c.showError(o,u):c.getUser(s[l],o);var m=l+1;n.notifyErrorAndForm(t,i,r.t("error_add"),d,c.formError),c.setState({error:!0}),s.length>m?c.saveProcess(a,s,m):c.finishSave(d)},complete:function(){}})},finishSave:function(t){var n=this;t.removeClass("loading"),$(e.findDOMNode(n.refs.btnsave)).removeClass("disabled"),a.trigger("workschedule:updatelist",{type:"addmore",data:n.state.currentEmployee})},showError:function(t,n){var a=this,i=a.processError(t,n),r=i.join("");""!=r&&($(e.findDOMNode(a.refs.errormessage)).removeClass("hide"),$(e.findDOMNode(a.refs.dupoffice)).html("<ol class='ui list'>"+r+"</ol>"))},getUser:function(e,t){var n=this;new s({id:e}).fetch({success:function(e,a){var i=a.fullname+": ";n.showError(t,i)},error:function(){}})},processError:function(e,t){var n=this.state.objError,a=!1;e.hasOwnProperty("object")&&(e=e.object,$.isEmptyObject(e)||(a=!0));var i={};return a&&(i=e.items,$.isEmptyObject(i)&&(a=!1)),$.isEmptyObject(i)||$.each(i,function(e,a){var i=a.name,r=a.range,o=[];$.each(r,function(e,t){o.push(t.name+" - "+t.time)}),i+=" ("+o.join(", ")+")",i="<li value=''>"+t+i+"</li>",n.push(i)}),this.setState({objError:n}),n},selectOffice:function(e){var t=$(e.target),n=t.val();n&&(this.state.rangelist.hasOwnProperty(n)?this.setState({rangeselect:this.state.rangelist[n]}):this._getWokingrange(1,n))},_getWokingrange:function(e,n){var a=this;$("#body-loader").addClass("active");var i={company_id:t.get("cid"),office_id:n,limit:50,page:e,status:(new l).STATUS_ENABLE,is_not_deleted:1};(new c).fetch({data:i,success:function(e,t){var i=[],r=a.state.rangelist;r.hasOwnProperty(n)?i=a.state.rangelist[n]:(r[n]=[],i=[]),r[n]=i.concat(t.items),a.setState({rangelist:r}),Math.ceil(t.total/t.limit)>t.currentpage?a._getWokingrange(t.currentpage+1):a.setState({rangeselect:a.state.rangelist[n]})},complete:function(){$("#body-loader").removeClass("active")}})},getKey:function(e,t){var n=null;return e.map(function(e,a){e.user_id==t&&(n=a)}),n},hideMessage:function(){$(e.findDOMNode(this.refs.errormessage)).addClass("hide")},selectemployee:function(e,t,n){this.setState({employee_select:e})},getAllEmployee:function(){var e=this,t=[];return e.state.employeeData.map(function(n,a){n.office_id==e.props.officedata.id&&t.push(n.user_id.toString())}),t=$.unique(t),e.setState({employeeselect:t}),t},componentWillMount:function(){},componentDidMount:function(){var t=this;$(e.findDOMNode(this.refs.modal)).modal({onHide:function(){a.trigger("workschedulemodalposition:hide")},autofocus:!1,context:$(this.getDOMNode()).parent()}).modal("show");var i=this.getAllEmployee();$(".checkboxavailableschedule").checkbox(),$(".checkboxscheduleall").checkbox("set checked").checkbox({onChecked:function(e){$(".checkboxschedule").checkbox("set checked"),i=t.getAllEmployee()},onUnchecked:function(){$(".checkboxschedule").checkbox("set unchecked"),i=[],t.setState({employeeselect:i})}}),$(".checkboxschedule").checkbox("set checked").checkbox({onChecked:function(n){var a=$(e.findDOMNode(t.refs.employeelist)).find("input:checked");a.length==t.state.employeeData.length&&$(".checkboxscheduleall").checkbox("set checked"),i.push($(this).val().toString()),i=$.unique(i),t.setState({employeeselect:i})},onUnchecked:function(){$(".checkboxscheduleall").checkbox("set unchecked"),i.splice($.inArray($(this).val().toString(),i),1),i=$.unique(i),t.setState({employeeselect:i,selectall:!1})}}),n.initMyTip($(e.findDOMNode(this)).find(".mytip"))},render:function(){var t=this,n={format:"DD/MM/YYYY",singleDatePicker:!0,showDropdowns:!0,applyClass:"ui button green",cancelClass:"ui button secondary"};this.props.date&&(n=$.extend(n,{startDate:this.state.date_select}));var a="",o="",s=this.props.date;return this.props.user_id>0&&(a="none",this.state.employeeData.map(function(e,n){e.user_id==t.props.user_id&&(o=e.full_name)})),e.createElement("div",{className:"ui modal",ref:"modal"},e.createElement("i",{className:"close icon"}),e.createElement("div",{className:"header"},i.t("addheading")," - Ngày ",s," - Nhân viên ",o),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"ui negative message hide",ref:"errormessage"},e.createElement("i",{className:"icon tc-cross close",onClick:this.hideMessage}),e.createElement("div",{className:"header"},i.t("DUP_RANGE"),"  "),e.createElement("p",{style:{marginTop:"8px"},ref:"dupoffice"})),e.createElement("div",{className:"sixteen wide fields",style:{display:a}},e.createElement("div",{className:"eight wide field"},e.createElement("div",{className:"sixteen wide field"},e.createElement("div",{className:"sixteen wide field"},e.createElement("label",null,i.t("employeeoffice")+" "+this.props.officedata.name),e.createElement("div",{className:"ui toggle checkbox checkboxscheduleall"},e.createElement("input",{type:"checkbox",name:"public"}),e.createElement("label",null,"Chọn tất cả")))),e.createElement("div",{className:"sixteen wide field",style:{maxHeight:"200px",overflow:"scroll",overflowX:"hidden"}},e.createElement("div",{className:"sixteen wide field",ref:"employeelist"},e.createElement("label",null," "),t.state.employeeData.map(function(n,a){return n.office_id==t.props.officedata.id?e.createElement("div",{key:n.id,className:"ui  checkbox checked sixteen wide field checkboxschedule",ref:"checkbox_"+n.user_id},e.createElement("input",{type:"checkbox",name:"example",defaultValue:n.user_id}),e.createElement("label",{style:{fontWeight:"normal"}},e.createElement("span",{className:"mytip",title:n.internal_id},n.full_name))):void 0})))),e.createElement("div",{className:"eight wide field"},e.createElement("label",null,i.t("employeeoutoffice")+" "+this.props.officedata.name),e.createElement(u,{
callbackSelected:this.selectemployee,ref:"employees",inputname:"employee"}))),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"sixteen wide fields",ref:"rangelist"},e.createElement("div",{className:"four wide field"},e.createElement("label",null,i.t("worktrackingrange_availble")),e.createElement("select",{ref:"range_id"},e.createElement("option",{value:""},"-- ",i.t("worktrackingrange")," --"),t.props.rangelist.map(function(t,n){return e.createElement("option",{key:t.id,value:t.id},t.name+" ("+t.time_start+" - "+t.time_end+") ")})))),e.createElement("div",{className:"fields"},e.createElement("div",{className:"sixteen wide field"},e.createElement("label",null,i.t("note")),e.createElement("textarea",{rows:"2",ref:"note"}))))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui button cancel"},r.t("close")),e.createElement("div",{className:"ui green button",ref:"btnsave",onClick:this.save},r.t("save"))))}});return p}),define("components/workschedule/modalEdit",["react","pref","helper","eventbus","language/workschedule","language/default","models/workschedule","models/worktrackingrange","collections/worktrackingrange","components/employeepicker","components/semantic-datepicker"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"ModalEditComponent",formError:{employee:["error_user_id_is_require","error_user_id_invalid"],office:["error_office_id_is_require","error_office_is_invalid"],dateschedule:["error_date_scheduled_is_require"],range:["error_range_id_is_require","error_range_id_is_invalid"]},getDefaultProps:function(){return{employeeList:[]}},getInitialState:function(){return{rangelist:[],rangeselect:[],office_id:0}},save:function(){var e=this;e.saveProcess()},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},saveProcess:function(){var s=this,l=$(".ui .form",this.getDOMNode());l.addClass("loading"),new o({id:this.props.data.id}).save({company_id:t.get("cid"),creator_id:t.get("uid"),work_tracking_range_id:s.props.data.work_tracking_range_id,office_id:s.props.data.office_id,note:$(e.findDOMNode(s.refs.note)).val(),status:s.props.data.status,date_scheduled:s.props.data.date_scheduled},{success:function(e,t){n.showSuccess(r.t("update_success")),a.trigger("workschedule:updatelist",{type:"edit",data:t}),$(s.getDOMNode()).modal({context:$(s.getDOMNode()).parent()}).modal("hide")},error:function(e,t){n.notifyErrorAndForm(t,i,r.t("error_update"),l,s.formError)},complete:function(){l.removeClass("loading")}})},componentWillMount:function(){},componentDidMount:function(){$(e.findDOMNode(this.refs.modal)).modal({onHide:function(){a.trigger("workschedulemodalposition:hide")},context:$(this.getDOMNode()).parent()}).modal("show")},render:function(){var t=this,n="",a=this.formatTime(this.props.data.date_scheduled),o="";return this.props.employeeList&&this.props.employeeList.map(function(e,a){e.user_id==t.props.data.user_id&&(n=e.fullname)}),this.props.rangeList.map(function(e,n){e.id==t.props.data.work_tracking_range_id&&(o=e.name)}),e.createElement("div",{className:"ui modal",ref:"modal"},e.createElement("i",{className:"close icon"}),e.createElement("div",{className:"header"},i.t("editnoteheading")," [",o," - ",r.t("day")," ",a," - ",r.t("employee")," ",n,"]"),e.createElement("div",{className:"content"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"sixteen wide field"},e.createElement("label",null,i.t("note")),e.createElement("textarea",{rows:"2",ref:"note",defaultValue:this.props.data.note}))))),e.createElement("div",{className:"actions"},e.createElement("div",{className:"ui button cancel"},r.t("close")),e.createElement("div",{className:"ui green button",onClick:this.save},r.t("save"))))}});return u}),define("components/workschedule/itemPosition",["react","eventbus"],function(e,t){var n=e.createClass({displayName:"BlockTimeComponent",onEnter:function(){$(e.findDOMNode(this.refs.btnedit)).removeClass("hide")},onOut:function(){$(e.findDOMNode(this.refs.btnedit)).addClass("hide")},componentDidMount:function(){},render:function(){var t=this;return e.createElement("tr",{onMouseEnter:t.onEnter,onMouseLeave:t.onOut},e.createElement("td",{colSpan:"2"},e.createElement("div",{className:"ui checkbox"},e.createElement("label",null,e.createElement("input",{type:"checkbox",name:"example"}),t.props.data.text))),e.createElement("td",null))}});return n}),define("components/workschedule/left-item",["react","backbone","pref","querystring"],function(e,t,n,a){var i=e.createClass({displayName:"ScheduleLeftItemComponent",clickHandle:function(e){e.preventDefault();var n=a.get("office_id"),i="workschedule/_s/office_id/"+n;this.props.data.id>0&&(i+="/work_tracking_range_id/"+this.props.data.id),console.log(i),t.history.navigate(i,{trigger:!0})},componentDidUpdate:function(){},componentDidMount:function(){},render:function(){var t="item",n=a.get("work_tracking_range_id")||"0";return this.props.data.id+""==n&&(t+=" active"),e.createElement("a",{className:t,onClick:this.clickHandle},e.createElement("i",{className:"icon"},e.createElement("span",{style:{backgroundColor:"#"+this.props.data.color},className:"ui mini circular empty label"})),this.props.data.name)}});return i}),define("components/workschedule/left",["react","language/default","models/employee","components/workschedule/left-item"],function(e,t,n,a){var i=e.createClass({displayName:"ScheduleLeftComponent",getDefaultProps:function(){return{data:[]}},componentDidMount:function(){},render:function(){var n={name:t.t("all"),id:0,color:"222"};return e.createElement("div",{className:"menu"},e.createElement(a,{key:n.id,data:n}),this.props.data.map(function(t,n){return e.createElement(a,{key:n,data:t})}))}});return i}),define("components/workschedule/edit",["react","eventbus","basecontroller","pref","helper","phonegap","role","setting","language/workschedule","language/checkin","language/default","language/datetime","querystring","models/employee","models/workschedule","models/user","models/worktrackingrange","models/office","collections/employee","collections/user","collections/office","collections/workschedule","collections/worktrackingrange","components/workschedule/item","components/workschedule/modalAdd","components/workschedule/modalAddMore","components/workschedule/modalEdit","components/workschedule/itemPosition","components/workschedule/left","components/workschedule/reviewer","components/semantic-datepicker","components/filtersidebar","components/workschedule/select-employee","components/select/office","components/select/position","components/headingfull","components/mixin/listsearch"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M,S,O,I,A,P,L,R){var U=e.createClass({displayName:"WorkscheduleEdit",mixins:[R],getInitialState:function(){return{dateRange:[],fullpage:!1,schedulelist:[],scheduleFormatList:[],employeeList:[],employeeOffice:[],summaryList:{},officelist:[],RangeList:[],models:[],length:0,roleid:264}},filters:{office_id:null,position_id:null,work_tracking_range_id:null,user_id:null},formSidebarSubmit:function(){var e={position_id:this.refs.filterposition.val(),user_id:this.refs.filteruser.val()};this.doFilters(e)},loadFilterQueryTagData:function(e){var n=null,a="fullname";switch(e){case"office_id":n=new _,a="name";break;case"user_id":n=new f,a="fullname";break;case"work_tracking_range_id":n=new g,a="name";break;case"position_id":var i=(new p).getPosition(this.filters[e]),r=l.t(i.text);t.trigger("querytag:updatetext",{field:e,text:r})}null!=n&&m.requestFilterQueryTag(n,this.filters,e,a)},fullpage:function(t){$(e.findDOMNode(this.refs.pageright)).hasClass("sixteen")?($(e.findDOMNode(this.refs.pageleft)).show(),$(e.findDOMNode(this.refs.pageright)).attr("class","thirteen wide column")):($(e.findDOMNode(this.refs.pageleft)).hide(),$(e.findDOMNode(this.refs.pageright)).attr("class","sixteen wide column")),$("#tablescheduleworkheader").width($("#tableschedulework").width())},toggleBudget:function(){$(e.findDOMNode(this.refs.tablebudget)).toggle()},showModal:function(t,n,a){t.preventDefault();var i=this;e.render(e.createElement(k,{officedata:i.props.data,user_id:n,schedulelist:this.state.scheduleFormatList,employeeData:this.state.employeeList,employeeOffice:this.state.employeeOffice,rangelist:this.state.RangeList,date:a,autofocus:!1}),e.findDOMNode(i.refs["modal-wrapper"]))},showModalMore:function(t,n,a){t.preventDefault();var i=this;e.render(e.createElement(D,{officedata:i.props.data,user_id:n,schedulelist:this.state.scheduleFormatList,employeeData:this.state.employeeList,employeeOffice:this.state.employeeOffice,rangelist:this.state.RangeList,date:a,autofocus:!1}),e.findDOMNode(i.refs["modal-wrapper"]))},toggleModal:function(e){var t=$(e.target);this.showModalMore(e,0,t.attr("data-date"))},showModalEdit:function(t,n){t.preventDefault();var a=this;e.render(e.createElement(T,{officedata:a.props.data,data:n,employeeList:a.state.employeeList,rangeList:a.state.RangeList,autofocus:!1}),e.findDOMNode(a.refs["modal-wrapper"]))},loadData:function(){var e=this,t=this.state.schedulelist,n=[],i=this.state.employeeOffice,r=[],o=[],s=[],l=[],c={},d={},u={};if(i.map(function(t){t&&t.office_id&&t.office_id==m.get("office_id")&&(s.push(t.user_id),d[t.user_id]=t.keyload,c=e.getDataEmployee(c,t))}),this.state.schedulelist.length&&(n.map(function(e){r.push(e.id)}),this.state.schedulelist.map(function(e,t){$.inArray(e.work_tracking_range_id,r)<0&&o.push(e.work_tracking_range_id);var n=$.inArray(e.user_id,s);0>n&&(s.push(e.user_id),l.push(e.user_id))}),t.map(function(e){var t=e.user_id;u.hasOwnProperty(t)||(u[t]=[]),u[t].push(e)})),l&&l.map(function(t){(new v).fetch({data:{company_id:a.get("cid"),limit:1,page:1,is_not_deleted:1,ignore_group:1,user_id:t,status:(new p).STATUS_ENABLE},success:function(t){t=t.toJSON();var n=t[0];i.push(n),c=e.getDataEmployee(c,n)}})}),s){s=jQuery.unique(s);var h=99,f=this.getPageNumber(s,h);e.formatUser(s,c,d,u,f,1)}this.loadSummary(1)},getDataEmployee:function(e,t){var n="";return t&&t.office&&t.office.name&&(n=t.office.name,e[t.user_id]={internal_id:t.internal_id,office_id:t.office_id,office_name:n}),e},setInternalDataForUser:function(e,t,n){return e.user_id=e.id,e.internal_id=t[e.id].internal_id,e.office_id=t[e.id].office_id,e.office_name=t[e.id].office_name,e.avatar=e.avatar,n[e.user_id]?e.keyload=n[e.user_id]:e.keyload=1,e},setDataFormat:function(e,t){var n=[],i=[];e.map(function(e,a){var i=[];t.hasOwnProperty(e)&&$.each(t[e],function(e,t){i.push(t)}),n.push(i)}),i=n;var r=[];return e.map(function(e,t){var n=(new v).fetchFromCache({company_id:a.get("cid"),user_id:e});if(n.items.length){var i=n.items[0];i.keyload=0,r.push(i)}}),this.setState({employeeList:r,scheduleFormatList:i})},formatUser:function(e,t,n,a,i,r){var o=this;o.setDataFormat(e,a)},getPageNumber:function(e,t){var n=1;return e.length>t&&(n=Math.floor(e.length/t)+1),n},loadWorktrackingRange:function(e){var t=this;$("#body-loader").addClass("active");var n={company_id:a.get("cid"),limit:50,page:e,office_id:t.props.data.id,sort_by:"display_order",sort_type:"ASC",status:(new g).STATUS_ENABLE};(new N).fetch({data:n,success:function(n,a){var i=[];e>1&&(i=t.state.RangeList);var r=i.concat(a.items);t.setState({RangeList:r}),Math.ceil(a.total/a.limit)>a.currentpage?t.loadWorktrackingRange(a.currentpage+1):t.loadSchedule(1)},complete:function(){$("#body-loader").removeClass("active")}})},loadEmployee:function(e){var t=this;$("#body-loader").addClass("active");var n={company_id:a.get("cid"),limit:50,page:e,is_not_deleted:1,ignore_group:1,user_id:m.get("user_id"),office_id:t.props.data.id,position_id:this.filters.position_id,status:(new p).STATUS_ENABLE};(new v).fetch({data:n,success:function(n,a){var i=t.state.employeeOffice;if(1==e&&null!=t.props.optionDefault){var r=t.props.optionDefault;i=r.concat(i)}var o=i.concat(a.items);t.setState({employeeOffice:o}),Math.ceil(a.total/a.limit)>a.currentpage?t.loadEmployee(a.currentpage+1):t.loadWorktrackingRange(1)},complete:function(){$("#body-loader").removeClass("active")}})},updateScheduleList:function(e,t,n){return e.hasOwnProperty(t)?(e[t].map(function(a,i){a.id==n.id&&e[t].splice(i,1)}),e[t].push(n)):(e[t]=[],e[t].push(n)),e},updateScheduleListReview:function(e,t,n){var a=this.state.employeeList,i=0;e.hasOwnProperty("user_id")&&(i=e.user_id);var r=this.getKey(a,i);return n[r].map(function(t,a){t.id==e.id&&(n[r]=e)}),t.map(function(n,a){n.id==e.id&&(t[a]=e)}),a[r].keyload+=1,[t,n]},getKey:function(e,t){var n=null;return e.map(function(e,a){e.user_id==t&&(n=a)}),n},getArrRange:function(){var e=[];return this.state.RangeList.map(function(t,n){e.push(t.id)}),e=$.unique(e)},loadSchedule:function(e){var t=this;i.showLoader();var n={company_id:a.get("cid"),limit:50,page:e,user_id:m.get("user_id"),work_tracking_range_id:m.get("work_tracking_range_id"),position_id:m.get("position_id")?m.get("position_id"):-1,office_id:m.get("office_id"),date_schedule_started:m.get("datestarted"),date_schedule_ended:m.get("dateended")};(new b).fetch({data:n,success:function(n,a){var i=t.state.schedulelist;1==e&&(i=[]),i=i.concat(a.items),t.setState({schedulelist:i}),Math.ceil(a.total/a.limit)>a.currentpage?t.loadSchedule(a.currentpage+1):t.loadData()},complete:function(){i.hideLoader()}})},loadSummary:function(e,t){var n=this;$("#body-loader").addClass("active");var i={company_id:a.get("cid"),limit:50,page:e,user_id:m.get("user_id"),work_tracking_range_id:m.get("work_tracking_range_id"),position_id:m.get("position_id")?m.get("position_id"):-1,office_id:m.get("office_id"),date_schedule_started:m.get("datestarted"),date_schedule_ended:m.get("dateended")};$.ajax({type:"GET",contentType:"application/json; charset=utf-8",data:i,url:s.rooturl+"v1/workschedules/summary",success:function(e){var t={};$.each(e.time,function(a,i){t[a]=e.ratio[a]+" ("+n.calcTime(i)+")"}),n.setState({summaryList:t})},error:function(){},complete:function(){$("#body-loader").removeClass("active")}})},calcTime:function(e){var t=Math.floor(e/3600)+"h ";return t+=Math.floor(e%3600/60)+"p"},changeweek:function(e){var t=$(e.target),n=moment.unix(m.get("datestarted")),a=t.data("value");t.is("i")&&(a=t.parent().data("value")),n="0"==a?moment(n).weekday(-7).unix():moment(n).weekday(7).unix(),m.set("datestarted",n),this.calcRange(),this.loadSchedule(1)},calcRange:function(){var e=m.get("datestarted"),t=[];if(!e){var n=this.formatTime(moment.unix(moment().unix()).format("D/MM/YYYY"),!0),a=moment.unix(n);e=moment(a).weekday(0).unix(),m.set("datestarted",e)}for(var i=0;7>i;i++){var r=e+86400*i,o="day_of_week_"+this.formatTime(r,!1,"dd").toLowerCase(),s={strDate:this.formatTime(r,!1,"DD/MM/YYYY"),strDay:u.t(o),intDay:this.formatTime(r,!1,"e"),intDate:r};6==i&&m.set("dateended",r),t.push(s)}this.setState({dateRange:t})},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},updateList:function(e){var t=e.type,n=e.data,a=this.state.employeeList,i=this.state.schedulelist,r=$.extend([],this.state.scheduleFormatList),o=0;n.hasOwnProperty("user_id")&&(o=n.user_id);var s=this.getKey(a,o),l=!1,c=this;switch(t){case"addmore":n.map(function(e,t){var n=c.getKey(a,e.user_id);r.hasOwnProperty(n)||(r[n]=[]),l=!0,r[n].push(e),i.push(e)});break;case"add":r.hasOwnProperty(s)||(r[s]=[]),l=!0,r[s].push(n),i.push(n);break;case"delete":var d=r[s];d.length&&d.map(function(e,t){e.id==n.id&&r[s].splice(t,1)}),r[s].length||r.splice(s,1),i=this.removeItem(i,n),l=!0;break;case"edit":r=this.updateScheduleList(r,s,n),i.map(function(e,t){e.id==n.id&&(i[t]=n)}),a[s].keyload+=1}this.setState({schedulelist:i}),l&&this.loadData()},removeItem:function(e,t){return e.map(function(n,a){n.id==t.id&&e.splice(a,1)}),e},changeOffice:function(e){m.get("office_id",e)},componentWillMount:function(){this.loadEmployee(1),this.calcRange(),m.initFilter(this.filters)},unmountModal:function(){e.findDOMNode(this.refs["modal-wrapper"]),e.unmountComponentAtNode(e.findDOMNode(this.refs["modal-wrapper"]))},componentWillUnmount:function(){t.off("workschedule:add"),t.off("workschedule:edit"),t.off("workschedule:review"),t.off("workschedule:updatelist"),t.off("workschedulemodalposition:hide")},componentDidUpdate:function(){var t=this;$(e.findDOMNode(this.refs.startdate)).on("apply.daterangepicker",function(e,n){var a=n.startDate.format("DD/MM/YYYY");a=t.formatTime(a,!0),m.set("datestarted",a),t.calcRange(),t.loadSchedule(1)})},updateSchedule_:function(e,t){if(e.length){var n=this;$("#body-loader").addClass("active");var r=(new h).STATUS_REVIEWED;t&&(r=(new h).STATUS_NEW),e.map(function(t,o){var s={company_id:a.get("cid"),creator_id:a.get("uid"),work_tracking_range_id:t.work_tracking_range_id,office_id:t.office_id,note:t.note,user_id:t.user_id,status:r,date_scheduled:t.date_scheduled};new h({id:t.id}).save(s,{success:function(e,t){i.showSuccess(d.t("update_success")),n.updateList({type:"edit",data:t})},error:function(e,t){console.log(JSON.parse(t.responseText));var n=JSON.parse(t.responseText),a="";n.error.map(function(e,t){a+=l.t(e)}),i.showError(a)},complete:function(){o==e.length-1&&$("#body-loader").removeClass("active")}})})}},updateSchedule:function(e,t){if(e.length){var n=this;$("#body-loader").addClass("active");var r=1,o=(new h).STATUS_REVIEWED;t&&(r=0,o=(new h).STATUS_NEW);var s=[];note="",e.map(function(e,t){s.push(e.id),e.note});var c=new FormData;c.append("company_id",a.get("cid")),c.append("creator_id",a.get("uid")),c.append("ids",s),c.append("review",r),c.append("note",note),s.length&&(new h).postData({action:"review",processData:!1,contentType:!1,data:c,success:function(e){i.showSuccess(d.t("update_success"));var t=(e.items,$.extend([],n.state.schedulelist),$.extend([],n.state.scheduleFormatList));t.map(function(e,t){e.map(function(e,t){$.inArray(e.id,s)>=0&&(e.status=o)})}),n.setState({scheduleFormatList:t})},error:function(e){var t=JSON.parse(e.responseText),n="";t.error.map(function(e,t){n+=l.t(e)}),i.showError(n)},complete:function(){$("#body-loader").removeClass("active")}})}},componentDidMount:function(){var a=this;(new n).setTcScrollMinHeight(),t.on("workschedule:edit",this.showModalEdit),t.on("workschedule:review",this.updateSchedule),t.on("workschedule:add",this.showModal),t.on("workschedule:updatelist",this.updateList),t.on("workschedulemodalposition:hide",this.unmountModal),r.enablePullToRefresh(this._loadData),i.initMyTip($(e.findDOMNode(this)).find(".mytip")),$(e.findDOMNode(this.refs.reviewer)).popup({on:"click",inline:!1,position:"bottom right",setFluidWidth:!0,closable:!1,lastResort:!0,preserve:!0,popup:$(e.findDOMNode(this.refs.reivewcompnent))});var o=screen.height-218;i.initMyTip($(e.findDOMNode(this)).find(".mytip")),$(e.findDOMNode(a.refs.contentright)).css("height",o),$(e.findDOMNode(a.refs.tabletop)).css("height",o-190)},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){var t=this;return e.createElement("tr",null,e.createElement("th",null,"Nhân viên"),this.state.dateRange.map(function(n,a){return e.createElement("th",{key:a,style:{color:"#666"},className:"two wide column"},e.createElement("div",{className:"pull-right",onClick:t.toggleModal,"data-date":n.strDate,title:l.t("add")},e.createElement("i",{"data-date":n.strDate,className:"icon tc-plus"})),n.strDay.concat(", ",n.strDate))}))},renderEmptyTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("td",{style:{width:"115px"}}," "),this.state.dateRange.map(function(t,n){return e.createElement("td",{key:"emty_"+n,className:"two wide column"}," ")}))},render:function(){var t=this,n={format:"DD/MM/YYYY",singleDatePicker:!0,showDropdowns:!0,applyClass:"ui button green",cancelClass:"ui button secondary",startDate:t.formatTime(m.get("datestarted"))},a=(new p).getPositionList();return a.unshift({code:-1,text:"----"}),e.createElement("div",{className:"ui segments",id:"workschedulepage"},e.createElement("div",{id:"page"},e.createElement("div",{id:"pageleft"},e.createElement(O,{ref:"sidebar",showkeyword:!1,onSubmit:this.formSidebarSubmit},e.createElement("div",{className:"field"},e.createElement("label",null,l.t("employee")),e.createElement(I,{datalist:this.state.employeeList,className:"fluid",ref:"filteruser",value:this.filters.user_id,name:"filteruser"})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("work_tracking_range_id")),e.createElement(C,{data:t.state.RangeList})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("position")),e.createElement(P,{ref:"filterposition",value:this.filters.position_id})))),e.createElement("div",{id:"pageright"},e.createElement(L,{ref:"heading",rootlink:"#checkin",roottext:c.t("heading"),text:l.t("heading"),link:"#workschedule",hidepagination:!0,filters:this.filters,lang:l,loadFilterQueryTagData:this.loadFilterQueryTagData,hidekeywordsearch:!0,hidefiltertoggle:!0}),e.createElement("div",{style:{padding:10},className:"ui segment tc-scrolled",ref:"contentright"},e.createElement("div",{className:"pull-left",style:{fontSize:22,paddingTop:7}},moment.unix(m.get("datestarted")).format("D/MM/YYYY"),"- ",moment.unix(m.get("dateended")).format("D/MM/YYYY")),e.createElement("div",{className:"pull-right"},o.hasById(o.WORKSCHEDULE_REVIEW)?e.createElement("div",{className:"ui button mini green reviewallbtn","data-variation":"very wide",ref:"reviewer"},l.t("reviewed_all")):"",e.createElement("div",{className:"ui popup",ref:"reivewcompnent"},e.createElement(M,{data:this.state.schedulelist})),e.createElement("div",{className:"ui buttons mini"},e.createElement("button",{className:"ui icon button mytip",title:d.t("prevweek"),"data-value":"0",onClick:this.changeweek},e.createElement("i",{className:"icon tc-left"})),e.createElement("button",{className:"ui icon button mytip",title:d.t("nextweek"),"data-value":"1",onClick:this.changeweek},e.createElement("i",{className:"icon tc-right"})))," ",e.createElement(S,{options:n,ref:"startdate",key:"dataepicker"+moment().valueOf()})," "),e.createElement("div",{style:{overflow:"scroll",width:"100%"}},e.createElement("table",{className:"ui table celled",style:{marginTop:"20px",marginBottom:0},id:"tablescheduleworkheader"},e.createElement("thead",null,i.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()))),e.createElement("div",{ref:"tabletop",id:"workscheduletabletop"},e.createElement("table",{className:"ui table celled",id:"tableschedulework"},e.createElement("tbody",null,t.state.scheduleFormatList.map(function(n,a){var i=0,r=0,o="",s="",l="",c="";if(t.state.employeeList[a]&&t.state.employeeList[a].user_id){var d=t.state.employeeList[a].user_id;return e.createElement(w,{key:a+"_"+n.length+"_"+r+"_"+i,index:a,rangelist:t.state.RangeList,employeeid:d,employeename:o,internalid:s,avatar:l,user_id:d,data:n,office_name:c,loaddata:t.loadData,date:t.state.dateRange})}})))),e.createElement("div",{style:{paddingRight:"7px"}},e.createElement("div",{ref:"tablebottom",id:"workscheduletablebottom"},e.createElement("table",{className:"ui table celled"},e.createElement("thead",null,e.createElement("th",{className:"two wide column"},t.state.summaryList.sum?t.state.summaryList.sum:0),t.state.dateRange.map(function(n,a){var i=t.state.summaryList[n.intDate]?t.state.summaryList[n.intDate]:0;return e.createElement("th",{key:"summary"+a,className:"two wide column"},i)}))))),e.createElement("div",{ref:"modal-wrapper"})))))}});return U}),define("components/workschedule/edit_bk",["react","eventbus","basecontroller","pref","helper","phonegap","role","setting","language/workschedule","language/checkin","language/default","querystring","models/employee","models/workschedule","models/user","models/worktrackingrange","models/office","collections/employee","collections/user","collections/office","collections/workschedule","collections/worktrackingrange","components/workschedule/item","components/workschedule/modalAdd","components/workschedule/modalAddMore","components/workschedule/modalEdit","components/workschedule/itemPosition","components/workschedule/left","components/workschedule/reviewer","components/semantic-datepicker","components/filtersidebar","components/workschedule/select-employee","components/select/office","components/select/position","components/headingfull","components/mixin/listsearch"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M,S,O,I,A,P,L){var R=e.createClass({displayName:"WorkscheduleEdit",mixins:[L],getInitialState:function(){return{dateRange:[],fullpage:!1,schedulelist:[],scheduleFormatList:[],employeeList:[],employeeOffice:[],summaryList:{},officelist:[],RangeList:[],models:[],length:0,roleid:264}},filters:{office_id:null,position_id:null,work_tracking_range_id:null,user_id:null},formSidebarSubmit:function(){var e={position_id:this.refs.filterposition.val(),user_id:this.refs.filteruser.val()};this.doFilters(e)},loadFilterQueryTagData:function(e){var n=null,a="fullname";switch(e){case"office_id":n=new g,a="name";break;case"user_id":n=new h,a="fullname";break;case"work_tracking_range_id":n=new f,a="name";break;case"position_id":var i=(new m).getPosition(this.filters[e]),r=l.t(i.text);t.trigger("querytag:updatetext",{field:e,text:r})}null!=n&&u.requestFilterQueryTag(n,this.filters,e,a)},fullpage:function(t){$(e.findDOMNode(this.refs.pageright)).hasClass("sixteen")?($(e.findDOMNode(this.refs.pageleft)).show(),$(e.findDOMNode(this.refs.pageright)).attr("class","thirteen wide column")):($(e.findDOMNode(this.refs.pageleft)).hide(),$(e.findDOMNode(this.refs.pageright)).attr("class","sixteen wide column")),$("#tablescheduleworkheader").width($("#tableschedulework").width())},toggleBudget:function(){$(e.findDOMNode(this.refs.tablebudget)).toggle()},showModal:function(t,n,a){t.preventDefault();var i=this;e.render(e.createElement(w,{officedata:i.props.data,user_id:n,schedulelist:this.state.scheduleFormatList,employeeData:this.state.employeeList,employeeOffice:this.state.employeeOffice,rangelist:this.state.RangeList,date:a,autofocus:!1}),e.findDOMNode(i.refs["modal-wrapper"]))},showModalMore:function(t,n,a){t.preventDefault();var i=this;e.render(e.createElement(k,{officedata:i.props.data,user_id:n,schedulelist:this.state.scheduleFormatList,employeeData:this.state.employeeList,employeeOffice:this.state.employeeOffice,rangelist:this.state.RangeList,date:a,autofocus:!1}),e.findDOMNode(i.refs["modal-wrapper"]))},toggleModal:function(e){var t=$(e.target);this.showModalMore(e,0,t.attr("data-date"))},showModalEdit:function(t,n){t.preventDefault();var a=this;e.render(e.createElement(D,{officedata:a.props.data,data:n,employeeList:a.state.employeeList,rangeList:a.state.RangeList,autofocus:!1}),e.findDOMNode(a.refs["modal-wrapper"]))},loadData:function(){var e=this,t=this.state.schedulelist,n=[],i=this.state.employeeOffice,r=[],o=[],s=[],l=[],c={},d={},p={};if(i.map(function(t){t.office_id==u.get("office_id")&&(s.push(t.user_id),d[t.user_id]=t.keyload,c=e.getDataEmployee(c,t))}),this.state.schedulelist.length&&(n.map(function(e){r.push(e.id)}),this.state.schedulelist.map(function(e,t){$.inArray(e.work_tracking_range_id,r)<0&&o.push(e.work_tracking_range_id);var n=$.inArray(e.user_id,s);0>n&&(s.push(e.user_id),l.push(e.user_id))}),t.map(function(e){var t=e.user_id;p.hasOwnProperty(t)||(p[t]=[]),p[t].push(e)})),l&&l.map(function(t){(new _).fetch({data:{company_id:a.get("cid"),limit:1,page:1,is_not_deleted:1,ignore_group:1,user_id:t,status:(new m).STATUS_ENABLE},success:function(t){t=t.toJSON();var n=t[0];i.push(n),c=e.getDataEmployee(c,n)}})}),s){s=jQuery.unique(s);var h=99,f=this.getPageNumber(s,h);e.formatUser(s,c,d,p,f,1)}this.loadSummary(1)},getDataEmployee:function(e,t){var n="";return t.office.name&&(n=t.office.name),e[t.user_id]={internal_id:t.internal_id,office_id:t.office_id,office_name:n},e},setInternalDataForUser:function(e,t,n){return e.user_id=e.id,e.internal_id=t[e.id].internal_id,e.office_id=t[e.id].office_id,e.office_name=t[e.id].office_name,e.avatar=e.avatar,n[e.user_id]?e.keyload=n[e.user_id]:e.keyload=1,e},setDataFormat:function(e,t){var n=[],a=[],i=[];return e.map(function(e,a){var i=[];t.hasOwnProperty(e.user_id)&&$.each(t[e.user_id],function(e,t){i.push(t)}),n.push(i)}),u.get("work_tracking_range_id")?e.map(function(e,t){n[t].length&&(a.push(e),i.push(n[t]))}):(a=e,i=n),console.log(a),console.log(i),console.log("================"),this.setState({employeeList:a,scheduleFormatList:i})},formatUser:function(e,t,n,a,i,r){var o=this,s=[],l=r-1;$("#body-loader").addClass("active");var c=e.slice(99*l,99*(l+1));(new v).getFromIdList({ids:c,success:function(l){if(r>1&&(s=o.state.employeeList),$.each(l.items,function(e,a){s.push(o.setInternalDataForUser(a,t,n))}),o.setDataFormat(s,a),i>r){var c=r+1;o.formatUser(e,t,n,a,i,c)}else $("#body-loader").removeClass("active")}})},getPageNumber:function(e,t){var n=1;return e.length>t&&(n=Math.floor(e.length/t)+1),n},loadWorktrackingRange:function(e){var t=this;$("#body-loader").addClass("active");var n={company_id:a.get("cid"),limit:50,page:e,office_id:t.props.data.id,sort_by:"display_order",sort_type:"ASC",status:(new f).STATUS_ENABLE};(new b).fetch({data:n,success:function(n,a){var i=[];e>1&&(i=t.state.RangeList);var r=i.concat(a.items);t.setState({RangeList:r}),Math.ceil(a.total/a.limit)>a.currentpage?t.loadWorktrackingRange(a.currentpage+1):t.loadSchedule(1)},complete:function(){$("#body-loader").removeClass("active")}})},loadEmployee:function(e){var t=this;$("#body-loader").addClass("active");var n={company_id:a.get("cid"),limit:50,page:e,is_not_deleted:1,ignore_group:1,user_id:u.get("user_id"),office_id:t.props.data.id,position_id:this.filters.position_id,status:(new m).STATUS_ENABLE};(new _).fetch({data:n,success:function(n,a){var i=t.state.employeeOffice;if(1==e&&null!=t.props.optionDefault){var r=t.props.optionDefault;i=r.concat(i)}var o=i.concat(a.items);t.setState({employeeOffice:o}),Math.ceil(a.total/a.limit)>a.currentpage?t.loadEmployee(a.currentpage+1):t.loadWorktrackingRange(1)},complete:function(){$("#body-loader").removeClass("active")}})},updateScheduleList:function(e,t,n){return e.hasOwnProperty(t)?(e[t].map(function(a,i){a.id==n.id&&e[t].splice(i,1)}),e[t].push(n)):(e[t]=[],e[t].push(n)),e},getKey:function(e,t){var n=null;return e.map(function(e,a){e.user_id==t&&(n=a)}),n},getArrRange:function(){var e=[];return this.state.RangeList.map(function(t,n){e.push(t.id)}),e=$.unique(e)},loadSchedule:function(e){var t=this;i.showLoader();var n={company_id:a.get("cid"),limit:50,page:e,user_id:u.get("user_id"),work_tracking_range_id:u.get("work_tracking_range_id"),position_id:u.get("position_id")?u.get("position_id"):-1,office_id:u.get("office_id"),date_schedule_started:u.get("datestarted"),date_schedule_ended:u.get("dateended")};(new E).fetch({data:n,success:function(n,a){var i=t.state.schedulelist;1==e&&(i=[]),i=i.concat(a.items),t.setState({schedulelist:i}),Math.ceil(a.total/a.limit)>a.currentpage?t.loadSchedule(a.currentpage+1):t.loadData()},complete:function(){i.hideLoader()}})},loadSummary:function(e,t){var n=this;$("#body-loader").addClass("active");var i={company_id:a.get("cid"),limit:50,page:e,user_id:u.get("user_id"),work_tracking_range_id:u.get("work_tracking_range_id"),position_id:u.get("position_id")?u.get("position_id"):-1,office_id:u.get("office_id"),date_schedule_started:u.get("datestarted"),date_schedule_ended:u.get("dateended")};$.ajax({type:"GET",contentType:"application/json; charset=utf-8",data:i,url:s.rooturl+"v1/workschedules/summary",success:function(e){var t={};$.each(e.time,function(a,i){t[a]=e.ratio[a]+" ("+n.calcTime(i)+")"}),n.setState({summaryList:t})},error:function(){},complete:function(){$("#body-loader").removeClass("active")}})},calcTime:function(e){var t=Math.floor(e/3600)+"h ";return t+=Math.floor(e%3600/60)+"p"},changeweek:function(e){var t=$(e.target),n=moment.unix(u.get("datestarted")),a=t.data("value");t.is("i")&&(a=t.parent().data("value")),n="0"==a?moment(n).weekday(-7).unix()+86400:moment(n).weekday(7).unix()+86400,
u.set("datestarted",n),this.calcRange(),this.loadSchedule(1)},calcRange:function(){var e=u.get("datestarted"),t=[];if(!e){var n=this.formatTime(moment.unix(moment().unix()).format("D/MM/YYYY"),!0),a=moment.unix(n);e=moment(a).weekday(0).unix()+86400,u.set("datestarted",e)}for(var i=0;7>i;i++){var r=e+86400*i,o={strDate:this.formatTime(r,!1,"DD/MM/YYYY"),strDay:d.t(this.formatTime(r,!1,"dddd").toLowerCase()),intDay:this.formatTime(r,!1,"e"),intDate:r};6==i&&u.set("dateended",r),t.push(o)}this.setState({dateRange:t})},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},updateList:function(e){var t=e.type,n=e.data,a=this.state.employeeList,i=this.state.schedulelist,r=this.state.scheduleFormatList,o=n.user_id,s=this.getKey(a,o),l=!1,c=this;switch(t){case"addmore":n.map(function(e,t){var n=c.getKey(a,e.user_id);r.hasOwnProperty(n)||(r[n]=[]),l=!0,r[n].push(e),i.push(e)});break;case"add":r.hasOwnProperty(s)||(r[s]=[]),l=!0,r[s].push(n),i.push(n);break;case"delete":var d=r[s];d.length&&d.map(function(e,t){e.id==n.id&&r[s].splice(t,1)}),r[s].length||r.splice(s,1),i=this.removeItem(i,n),l=!0;break;case"edit":r=this.updateScheduleList(r,s,n),i.map(function(e,t){e.id==n.id&&(i[t]=n)}),a[s].keyload+=1}this.setState({schedulelist:i}),l&&this.loadData()},removeItem:function(e,t){return e.map(function(n,a){n.id==t.id&&e.splice(a,1)}),e},changeOffice:function(e){u.get("office_id",e)},componentWillMount:function(){this.loadEmployee(1),this.calcRange(),u.initFilter(this.filters)},unmountModal:function(){e.findDOMNode(this.refs["modal-wrapper"]),e.unmountComponentAtNode(e.findDOMNode(this.refs["modal-wrapper"]))},componentWillUnmount:function(){t.off("workschedule:add"),t.off("workschedule:edit"),t.off("workschedule:review"),t.off("workschedule:updatelist"),t.off("workschedulemodalposition:hide")},componentDidUpdate:function(){var t=this;$(e.findDOMNode(this.refs.startdate)).on("apply.daterangepicker",function(e,n){var a=n.startDate.format("DD/MM/YYYY");a=t.formatTime(a,!0),u.set("datestarted",a),t.calcRange(),t.loadSchedule(1)})},updateSchedule:function(e,t){if(e.length){var n=this;$("#body-loader").addClass("active");var r=(new p).STATUS_REVIEWED;t&&(r=(new p).STATUS_NEW),e.map(function(t,o){var s={company_id:a.get("cid"),creator_id:a.get("uid"),work_tracking_range_id:t.work_tracking_range_id,office_id:t.office_id,note:t.note,user_id:t.user_id,status:r,date_scheduled:t.date_scheduled};new p({id:t.id}).save(s,{success:function(e,t){i.showSuccess(d.t("update_success")),n.updateList({type:"edit",data:t})},error:function(e,t){console.log(JSON.parse(t.responseText));var n=JSON.parse(t.responseText),a="";n.error.map(function(e,t){a+=l.t(e)}),i.showError(a)},complete:function(){o==e.length-1&&$("#body-loader").removeClass("active")}})})}},componentDidMount:function(){var a=this;(new n).setTcScrollMinHeight(),t.on("workschedule:edit",this.showModalEdit),t.on("workschedule:review",this.updateSchedule),t.on("workschedule:add",this.showModal),t.on("workschedule:updatelist",this.updateList),t.on("workschedulemodalposition:hide",this.unmountModal),r.enablePullToRefresh(this._loadData),i.initMyTip($(e.findDOMNode(this)).find(".mytip")),$(e.findDOMNode(this.refs.reviewer)).popup({on:"click",inline:!1,position:"bottom right",setFluidWidth:!0,closable:!1,lastResort:!0,preserve:!0,popup:$(e.findDOMNode(this.refs.reivewcompnent))});var o=screen.height-218;i.initMyTip($(e.findDOMNode(this)).find(".mytip")),$(e.findDOMNode(a.refs.contentright)).css("height",o),$(e.findDOMNode(a.refs.tabletop)).css("height",o-190)},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){var t=this;return e.createElement("tr",null,e.createElement("th",null,"Nhân viên"),this.state.dateRange.map(function(n,a){return e.createElement("th",{key:a,style:{color:"#666"},className:"two wide column"},e.createElement("div",{className:"pull-right",onClick:t.toggleModal,"data-date":n.strDate,title:l.t("add")},e.createElement("i",{"data-date":n.strDate,className:"icon tc-plus"})),n.strDay.concat(", ",n.strDate))}))},renderEmptyTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("td",{style:{width:"115px"}}," "),this.state.dateRange.map(function(t,n){return e.createElement("td",{key:"emty_"+n,className:"two wide column"}," ")}))},render:function(){var t=this,n={format:"DD/MM/YYYY",singleDatePicker:!0,showDropdowns:!0,applyClass:"ui button green",cancelClass:"ui button secondary",startDate:t.formatTime(u.get("datestarted"))},a=(new m).getPositionList();return a.unshift({code:-1,text:"----"}),e.createElement("div",{className:"ui segments",id:"workschedulepage"},e.createElement("div",{id:"page"},e.createElement("div",{id:"pageleft"},e.createElement(S,{ref:"sidebar",showkeyword:!1,onSubmit:this.formSidebarSubmit},e.createElement("div",{className:"field"},e.createElement("label",null,l.t("employee")),e.createElement(O,{datalist:this.state.employeeList,className:"fluid",ref:"filteruser",value:this.filters.user_id,name:"filteruser"})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("work_tracking_range_id")),e.createElement(x,{data:t.state.RangeList})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("position")),e.createElement(A,{ref:"filterposition",value:this.filters.position_id})))),e.createElement("div",{id:"pageright"},e.createElement(P,{ref:"heading",rootlink:"#checkin",roottext:c.t("heading"),text:l.t("heading"),link:"#workschedule",hidepagination:!0,filters:this.filters,lang:l,loadFilterQueryTagData:this.loadFilterQueryTagData,hidekeywordsearch:!0}),e.createElement("div",{style:{padding:10},className:"ui segment tc-scrolled",ref:"contentright"},e.createElement("div",{className:"pull-left",style:{fontSize:22,paddingTop:7}},moment.unix(u.get("datestarted")).format("D/MM/YYYY"),"- ",moment.unix(u.get("dateended")).format("D/MM/YYYY")),e.createElement("div",{className:"pull-right"},o.hasById(o.WORKSCHEDULE_REVIEW)?e.createElement("div",{className:"ui button mini green reviewallbtn","data-variation":"very wide",ref:"reviewer"},l.t("reviewed_all")):"",e.createElement("div",{className:"ui popup",ref:"reivewcompnent"},e.createElement(C,{data:this.state.schedulelist})),e.createElement("div",{className:"ui buttons mini"},e.createElement("button",{className:"ui icon button mytip",title:d.t("prevweek"),"data-value":"0",onClick:this.changeweek},e.createElement("i",{className:"icon tc-left"})),e.createElement("button",{className:"ui icon button mytip",title:d.t("nextweek"),"data-value":"1",onClick:this.changeweek},e.createElement("i",{className:"icon tc-right"})))," ",e.createElement(M,{options:n,ref:"startdate",key:"dataepicker"+moment().valueOf()})," "),e.createElement("div",{style:{overflow:"scroll",width:"100%"}},e.createElement("table",{className:"ui table celled",style:{marginTop:"20px",marginBottom:0},id:"tablescheduleworkheader"},e.createElement("thead",null,i.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()))),e.createElement("div",{ref:"tabletop",id:"workscheduletabletop"},e.createElement("table",{className:"ui table celled",id:"tableschedulework"},e.createElement("tbody",null,t.state.scheduleFormatList.map(function(n,a){var i=0,r=0,o="",s="",l="",c="";return $.isEmptyObject(t.state.employeeList)||t.state.employeeList[a]&&(t.state.employeeList[a].hasOwnProperty("user_id")&&(i=t.state.employeeList[a].user_id),t.state.employeeList[a].hasOwnProperty("office_name")&&(c=t.state.employeeList[a].office_name),o=t.state.employeeList[a].fullname,s=t.state.employeeList[a].internal_id,l=t.state.employeeList[a].avatar,o||(o=i),t.state.employeeList[a].hasOwnProperty("keyload")&&(r=t.state.employeeList[a].keyload)),e.createElement(N,{key:a+"_"+n.length+"_"+r+"_"+i,index:a,rangelist:t.state.RangeList,employeeid:i,employeename:o,internalid:s,avatar:l,data:n,office_name:c,loaddata:t.loadData,date:t.state.dateRange})})))),e.createElement("div",{style:{paddingRight:"7px"}},e.createElement("div",{ref:"tablebottom",id:"workscheduletablebottom"},e.createElement("table",{className:"ui table celled"},e.createElement("thead",null,e.createElement("th",{className:"two wide column"},t.state.summaryList.sum?t.state.summaryList.sum:0),t.state.dateRange.map(function(n,a){var i=t.state.summaryList[n.intDate]?t.state.summaryList[n.intDate]:0;return e.createElement("th",{key:"summary"+a,className:"two wide column"},i)}))))),e.createElement("div",{ref:"modal-wrapper"})))))}});return R}),define("components/workschedule/select-office",["react","eventbus","language/workschedule","language/checkin","components/heading","components/select/office"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"SelectOfficeComponent",getInitialState:function(){return{dataFormat:{}}},selectOffice:function(){this.props.selectOffice($(e.findDOMNode(this.refs["select-office"])).val())},componentWillMount:function(){},componentWillUnmount:function(){},componentDidMount:function(){},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement(i,{subtext:n.t("heading"),link:"#checkin",text:a.t("heading")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form"},e.createElement("input",{type:"hidden",value:"",ref:"itemselect"}),e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide hideonsmall"},e.createElement("h4",null,e.createElement("strong",null,n.t("select_office_info_title"))),e.createElement("p",null,n.t("select_office_info_content"))),e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"required four  wide field"},e.createElement("label",null,n.t("office")," "),e.createElement(r,{ref:"select-office",onChange:t.selectOffice}))))))))}});return o}),define("components/workschedule/select-range-item",["react","eventbus","language/workschedule"],function(e,t,n){var a=e.createClass({displayName:"SelectRangeItemComponent",loadData:function(t){this.props.data.office_id==t.id&&$(e.findDOMNode(this.refs.rangename)).text(t.name+" - "+this.props.data.name)},componentWillMount:function(){},initCheckBox:function(){var e=this;$(this.getDOMNode()).find(".ui.checkbox").checkbox({onChecked:function(){var n="";"selectscheduleswap"==e.props.prefix&&(n="swap"),t.trigger("workschedule:selectswaprange",$(this).val(),n)}})},componentDidUpdate:function(){this.initCheckBox()},componentWillUnmount:function(){t.off("workschedule:selectrangeitem",this.loadData)},componentDidMount:function(){t.on("workschedule:selectrangeitem",this.loadData),this.initCheckBox()},render:function(){var t=this;return e.createElement("option",{ref:"rangename",value:this.props.data.id},t.props.data.name)}});return a}),define("components/workschedule/select-range",["react","eventbus","helper","language/workschedule","collections/office","components/heading","components/select/office","components/workschedule/select-range-item"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"SelectRangeComponent",getInitialState:function(){return{rangeFormat:{},office_id_list:[]}},selectOffice:function(){},loadData:function(){var e=this,n=[];e.props.data.map(function(e,t){n.push(e.office_id)}),n=$.unique(n),(new i).getFromIdList({ids:n,success:function(e){var n=e.items;n.map(function(e,n){t.trigger("workschedule:selectrangeitem",e)})}})},selectRange:function(e){var n=$(e.target),a="";"selectscheduleswap"==this.props.triggerFunction&&(a="swap"),t.trigger("workschedule:selectswaprange",n.val(),a)},componentWillMount:function(){},componentDidUpdate:function(){$.isEmptyObject(this.props.data)||this.loadData()},componentWillUnmount:function(){},componentDidMount:function(){$.isEmptyObject(this.props.data)||this.loadData()},render:function(){var t=this,i={};this.props.rangelist.map(function(e,t){i[e.id]=e.name+" - "+e.time_start+" - "+n.formatTimeEndWorkRange(e.time_end)});var r=a.t("select_range");return"selectscheduleswap"==t.props.triggerFunction&&(r=a.t("select_range_swap")),e.createElement("div",{className:"field"},e.createElement("select",{onChange:this.selectRange},e.createElement("option",{value:0},"--",r,"--"),t.props.data.map(function(n,a){return n.name=i[n.work_tracking_range_id],e.createElement(s,{key:n.id,data:n,prefix:t.props.triggerFunction})})))}});return l}),define("components/workschedule/swaprange",["react","eventbus","basecontroller","pref","helper","phonegap","companymodule","role","setting","language/workschedule","language/checkin","language/default","querystring","models/employee","models/workschedule","models/user","models/worktrackingrange","models/office","collections/employee","collections/user","collections/office","collections/workschedule","collections/worktrackingrange","components/heading","components/workschedule/select-range","components/select/office","components/select-employee","components/formfieldaction","components/semantic-datepicker"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C){var M=e.createClass({displayName:"WorkscheduleSwapRange",getInitialState:function(){var e=this;return{keyrefesh:0,office:0,officeswap:0,employee:0,employeeswap:0,schedule:[],scheduleswap:[],date:e.formatTime(e.formatTime(moment().unix()),!0),dateswap:e.formatTime(e.formatTime(moment().unix()),!0),range_list:[],schedule_id:0,schedule_swap_id:0}},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},selectOffice:function(e){e=parseInt(e);var t=this.state;t.office=e,this.setState({office:e}),this.showRange(t)},selectOfficeSwap:function(e){e=parseInt(e);var t=this.state;t.officeswap=e,this.setState({officeswap:e}),this.showRange(t)},selectEmployee:function(e){e=parseInt(e);var t=this.state;t.employee=e,this.setState({employee:e}),this.checkEmployee(t,this.showRange)},selectEmployeeSwap:function(e){e=parseInt(e);var t=this.state;t.employeeswap=e,this.setState({employeeswap:e}),this.checkEmployee(t,this.showRange)},checkEmployee:function(e,t){e.employee==e.employeeswap?i.showError(c.t("error_employee_same_swap_employee")):t(e)},selectDate:function(e){var t=this.state;t.date=e,this.setState({date:e}),this.showRange(t)},selectDateSwap:function(e){var t=this.state;t.dateswap=e,this.setState({dateswap:e}),this.showRange(t)},changeDate:function(){$(e.findDOMNode(this.refs.selectdate)).removeClass("hide"),$(e.findDOMNode(this.refs.selectrange)).addClass("hide")},showRange:function(e){e.date>0&&e.employee>0&&this.loadSchedule(1,e,""),e.dateswap>0&&e.employeeswap>0&&this.loadSchedule(1,e,"swap")},showSelectRange:function(){this.state.scheduleswap.length||this.state.schedule.length?($(e.findDOMNode(this.refs.selectrange)).removeClass("hide"),$(e.findDOMNode(this.refs.editnote)).removeClass("hide")):($(e.findDOMNode(this.refs.selectrange)).addClass("hide"),$(e.findDOMNode(this.refs.editnote)).addClass("hide"))},loadRange:function(){var e=this,t=[],n=[];this.state.schedule.map(function(e,n){t.push(e.work_tracking_range_id)}),this.state.scheduleswap.map(function(e,n){t.push(e.work_tracking_range_id)}),t=$.unique(t),t&&(new N).getFromIdList({ids:t,success:function(t){$.each(t.items,function(e,t){n.push(t)}),e.setState({range_list:n})}})},loadSchedule:function(e,t,n){var r=this;i.showLoader();var o={company_id:a.get("cid"),limit:50,page:e,user_id:t["employee"+n],office_id:0|t["office"+n],date_scheduled:t["date"+n],status:(new h).STATUS_REVIEWED};(new b).fetch({data:o,success:function(a,i){var o=[];o=""==n?r.state.schedule:r.state.scheduleswap,1==e&&(o=[]),o=o.concat(i.items),""==n?r.setState({schedule:o}):r.setState({scheduleswap:o}),Math.ceil(i.total/i.limit)>i.currentpage?r.loadSchedule(i.currentpage+1,t,n):(r.showSelectRange(),r.loadRange())},complete:function(){i.hideLoader()}})},initDatePicker:function(){var t=this;$(e.findDOMNode(this.refs.startdate)).on("apply.daterangepicker",function(e,n){var a=n.startDate.format("DD/MM/YYYY");a=t.formatTime(a,!0),t.selectDate(a)}),$(e.findDOMNode(this.refs.startdateswap)).on("apply.daterangepicker",function(e,n){var a=n.startDate.format("DD/MM/YYYY");a=t.formatTime(a,!0),t.selectDateSwap(a)})},resetForm:function(){$(e.findDOMNode(this.refs.office)).val(0)},save:function(t){t.preventDefault();var n=this.state.employeeswap,r=this.state.dateswap;t.preventDefault();var o=this;this.state.schedule_id>0&&n>0&&r>0?$.ajax({type:"POST",dataType:"json",url:l.rooturl+"v1/workschedules/swaprange",data:{company_id:a.get("cid"),creator_id:a.get("uid"),note:$(e.findDOMNode(o.refs.note)).val(),user_swap:n,date_swap:r,note_swap:$(e.findDOMNode(o.refs.note_swap)).val(),work_schedule_id:this.state.schedule_id,work_schedule_swap_id:0|this.state.schedule_swap_id},success:function(){i.showSuccess(c.t("swap_success")),o.replaceState(o.getInitialState()),o.setState({keyrefesh:o.state.keyrefesh+1})},error:function(e){i.notifyError(e,c,c.t("error_swap"))},complete:function(){}}):(this.resetForm(),i.showError(c.t("error_check_info")))},selectSwapRange:function(t,n){var a="";""==n?(this.state.schedule.map(function(e,n){e.id==t&&(a=e.note)}),$(e.findDOMNode(this.refs.note)).val(a),this.setState({schedule_id:t})):(this.state.scheduleswap.map(function(e,n){e.id==t&&(a=e.note)}),$(e.findDOMNode(this.refs.note_swap)).val(a),this.setState({schedule_swap_id:t}))},componentWillUnmount:function(){t.off("workschedule:selectswaprange",this.selectSwapRange)},componentDidUpdate:function(){this.initDatePicker()},componentDidMount:function(){this.initDatePicker(),t.on("workschedule:selectswaprange",this.selectSwapRange),i.initMyTip($(e.findDOMNode(this)).find(".mytip"))},render:function(){var t=this,n={format:"DD/MM/YYYY",singleDatePicker:!0,showDropdowns:!0,applyClass:"ui button green",cancelClass:"ui button secondary",startDate:t.formatTime(t.state.date)},a=$.extend({},n);return a.startDate=t.formatTime(t.state.dateswap),e.createElement("div",{className:"ui segments",key:"form_"+this.state.keyrefesh},e.createElement(w,{link:"#checkin",text:d.t("heading"),subtext:c.t("change_range")}),e.createElement("div",{className:"ui segment"},e.createElement("form",{className:"ui form",ref:"form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field sixteen wide "},e.createElement("div",{className:"fields",ref:"selectoffice",style:{textAlign:"center"}},e.createElement("div",{className:"seven wide  field"},e.createElement("h2",null,c.t("nv1"))),e.createElement("div",{className:"two wide  field"}," "),e.createElement("div",{className:"seven wide  field"},e.createElement("h2",null,c.t("nv2")))),e.createElement("div",{className:"fields",ref:"selectoffice"},e.createElement("div",{className:"seven wide  field"},e.createElement("label",null,c.t("office")),e.createElement(D,{onChange:t.selectOffice,ref:"office"})),e.createElement("div",{className:"two wide  field"}," "),e.createElement("div",{className:"seven wide  field"},e.createElement("label",null,c.t("office")),e.createElement(D,{onChange:t.selectOfficeSwap,ref:"swapoffice"}))),e.createElement("div",{className:"fields",ref:"selectoffice"},e.createElement("div",{className:"required seven wide  field"},e.createElement("label",null,c.t("nv1")),e.createElement(T,{className:"fluid",onChange:t.selectEmployee,ref:"office"})),e.createElement("div",{className:"two wide  field",style:{textAlign:"center",fontSize:"36px"}},e.createElement("i",{className:"icon tc-arrowleft"}),e.createElement("i",{className:"icon tc-arrowright"})),e.createElement("div",{className:"required seven wide  field"},e.createElement("label",null,c.t("nv2")),e.createElement(T,{className:"fluid",onChange:t.selectEmployeeSwap,ref:"swapemployee"}))),e.createElement("div",{className:"fields",ref:"selectdate"},e.createElement("div",{className:"required seven wide  field"},e.createElement("label",null,c.t("date_swap_range")),e.createElement(C,{options:n,ref:"startdate",key:"dataepicker"+moment().valueOf()})),e.createElement("div",{className:"two wide  field"}," "),e.createElement("div",{className:"required seven wide  field"},e.createElement("label",null,c.t("date_swap_range")),e.createElement(C,{options:a,ref:"startdateswap",key:"dataepickerswap"+moment().valueOf()}))),e.createElement("div",{className:"fields hide",ref:"selectrange"},e.createElement("div",{className:"required seven wide field"},e.createElement("label",null,c.t("current_worktrackingrange")),e.createElement(k,{data:t.state.schedule,rangelist:t.state.range_list,triggerFunction:"selectschedule",ref:"rangenv1"})),e.createElement("div",{className:"two wide  field"}," "),e.createElement("div",{className:"seven wide field"},e.createElement("label",null,c.t("current_worktrackingrange"),e.createElement("i",{className:"icon tc-info mytip",title:c.t("descriptionRange")})),e.createElement(k,{data:t.state.scheduleswap,rangelist:t.state.range_list,triggerFunction:"selectscheduleswap",ref:"rangenv2"}))),e.createElement("div",{className:"fields hide",ref:"editnote"},e.createElement("div",{className:" seven wide  field"},e.createElement("label",null,c.t("note")),e.createElement("textarea",{ref:"note",rows:"2"})),e.createElement("div",{className:"two wide  field"}," "),e.createElement("div",{className:" seven wide  field"},e.createElement("label",null,c.t("note")),e.createElement("textarea",{ref:"note_swap",rows:"2"}))))),e.createElement(x,{leftwide:"seven",rightwide:"nine"},e.createElement("button",{className:"ui teal button",onClick:this.save},c.t("change_range"))))))}});return M}),define("components/workschedule/workschedule",["react","eventbus","basecontroller","pref","helper","phonegap","role","setting","language/workschedule","language/default","querystring","models/employee","models/workschedule","models/user","models/worktrackingrange","models/office","collections/employee","collections/user","collections/office","collections/workschedule","collections/worktrackingrange","components/workschedule/item","components/workschedule/modalAdd","components/workschedule/modalEdit","components/workschedule/itemPosition","components/workschedule/left","components/workschedule/reviewer","components/semantic-datepicker","components/filtersidebar","components/select/employee","components/select/office","components/select/position","components/headingfull","components/mixin/listsearch"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M,S,O,I,A){var P=e.createClass({displayName:"ScheduleView",mixins:[A],getInitialState:function(){return{dateRange:[],fullpage:!1,schedulelist:[],scheduleFormatList:[],employeeList:[],summaryList:{},officelist:[],RangeList:[],models:[],length:0,roleid:264}},filters:{office_id:null,position_id:null,work_tracking_range_id:null,user_id:null},formSidebarSubmit:function(){var e={office_id:this.refs.filteroffice.val(),position_id:this.refs.filterposition.val(),user_id:this.refs.filteruser.val()};this.doFilters(e)},loadFilterQueryTagData:function(e){var n=null,a="fullname";switch(e){case"office_id":n=new f,a="name";break;case"user_id":n=new p,a="fullname";break;case"work_tracking_range_id":n=new h,a="name";break;case"position_id":var i=(new u).getPosition(this.filters[e]),r=l.t(i.text);t.trigger("querytag:updatetext",{field:e,text:r})}null!=n&&d.requestFilterQueryTag(n,this.filters,e,a)},fullpage:function(t){$(e.findDOMNode(this.refs.pageright)).hasClass("sixteen")?($(e.findDOMNode(this.refs.pageleft)).show(),$(e.findDOMNode(this.refs.pageright)).attr("class","thirteen wide column")):($(e.findDOMNode(this.refs.pageleft)).hide(),$(e.findDOMNode(this.refs.pageright)).attr("class","sixteen wide column")),$("#tablescheduleworkheader").width($("#tableschedulework").width())},toggleBudget:function(){$(e.findDOMNode(this.refs.tablebudget)).toggle()},showModal:function(t,n,a){n=[n],t.preventDefault();var i=this;e.render(e.createElement(N,{officelist:i.state.officelist,employeeList:n,date:a,autofocus:!1}),e.findDOMNode(i.refs["modal-wrapper"]))},showModalEdit:function(t,n){t.preventDefault();var a=this;e.render(e.createElement(w,{officelist:a.state.officelist,data:n,autofocus:!1}),e.findDOMNode(a.refs["modal-wrapper"]))},loadData:function(e){var n=this;if(this.state.schedulelist.length){var a=[];if("range"==e&&(this.state.schedulelist.map(function(e,t){a.push(e.work_tracking_range_id)}),a)){var i=[];(new E).getFromIdList({ids:a,success:function(e){$.each(e.items,function(e,n){i.push({code:n.id,color:n.color,text:n.name,time_start:n.time_start,time_end:n.time_end}),t.trigger("workscheduleblockitem:update",{type:"range",item:n})}),n.setState({RangeList:i})}})}}},loadEmployee:function(e){var t=this;$("#body-loader").addClass("active");var n={company_id:a.get("cid"),limit:50,page:e,is_not_deleted:1,ignore_group:1,user_id:d.get("user_id"),office_id:d.get("office_id"),position_id:this.filters.position_id,status:(new u).STATUS_ENABLE};(new g).fetch({data:n,success:function(n,a){var i=t.state.employeeList;if(1==e&&null!=t.props.optionDefault){var r=t.props.optionDefault;i=r.concat(i)}var o=i.concat(a.items);if(o.map(function(e,t){o[t].keyload=1}),t.setState({employeeList:o}),Math.ceil(a.total/a.limit)>a.currentpage)t.loadEmployee(a.currentpage+1);else if(o.length){var s=[];o.map(function(e,t){s.push(e.user_id)}),s=s.join(","),t.loadSchedule(1,s)}},complete:function(){$("#body-loader").removeClass("active")}})},formatData:function(){var e=this.state.schedulelist,t=(this.state.dateRange,this.state.employeeList);if(e){var n=[],a={};e.map(function(e,t){var n=e.user_id;a.hasOwnProperty(n)||(a[n]=[]),a[n].push(e)}),t.map(function(e,t){var i=[];a.hasOwnProperty(e.user_id)&&$.each(a[e.user_id],function(e,t){i.push(t)}),n.push(i)}),this.setState({scheduleFormatList:n})}},updateScheduleList:function(e,t,n){return e.hasOwnProperty(t)?(e[t].push(n),e[t].map(function(a,i){a.id==n.id&&e[t].splice(i,1)})):(e[t]=[],e[t].push(n)),e},getKey:function(e,t){var n=null;return e.map(function(e,a){e.user_id==t&&(n=a)}),n},loadSchedule:function(e,t){var n=this;$("#body-loader").addClass("active");var i={company_id:a.get("cid"),limit:50,page:e,user_list:t,work_tracking_range_id:d.get("work_tracking_range_id"),date_schedule_started:d.get("datestarted"),date_schedule_ended:d.get("dateended"),status:(new m).STATUS_ENABLE};(new y).fetch({data:i,success:function(a,i){var r=n.state.schedulelist;1==e&&(r=[]),r=r.concat(i.items),n.setState({schedulelist:r}),Math.ceil(i.total/i.limit)>i.currentpage?n.loadSchedule(i.currentpage+1,t):(n.formatData(),n.loadSummary(1,t))},complete:function(){$("#body-loader").removeClass("active")}})},loadSummary:function(e,t){var n=this;$("#body-loader").addClass("active");var i={company_id:a.get("cid"),limit:50,page:e,user_list:t,date_schedule_started:d.get("datestarted"),date_schedule_ended:d.get("dateended"),status:(new m).STATUS_ENABLE};$.ajax({type:"GET",contentType:"application/json; charset=utf-8",data:i,url:s.rooturl+"v1/workschedules/summary",success:function(e){var t={};$.each(e,function(e,a){t[e]=n.calcTime(a)}),n.setState({summaryList:t}),n.loadData("range"),n.loadData()},error:function(){},complete:function(){$("#body-loader").removeClass("active")}})},calcTime:function(e){var t=Math.floor(e/3600)+"h ";return t+=Math.floor(e%3600/60)+"p"},calcRange:function(){var e=d.get("datestarted"),t=[];e||(e=this.formatTime(moment().format("DD/MM/YYYY"),!0));for(var n=0;7>n;n++){var a=e+86400*n,i={strDate:this.formatTime(a,!1,"DD/MM/YYYY"),strDay:this.formatTime(a,!1,"ddd").toUpperCase(),intDay:this.formatTime(a,!1,"e"),intDate:a};0==n?d.set("datestarted",a):6==n&&d.set("dateended",a),t.push(i)}this.setState({dateRange:t})},formatTime:function(e,t,n){return n||(n="DD/MM/YYYY"),t?moment(e,n).unix():moment.unix(e).format(n)},updateList:function(e){var t=e.type,n=e.data,a=this.state.employeeList,i=this.state.schedulelist,r=this.state.scheduleFormatList,o=n.user_id,s=this.getKey(a,o);switch(t){case"add":r[s].push(n),i.push(n);break;case"delete":var l=r[s];l.length&&l.map(function(e,t){e.id==n.id&&r[s].splice(t,1)}),i=this.removeItem(i,n);break;case"edit":r=this.updateScheduleList(r,s,n),i=this.removeItem(i,n),a[s].keyload+=1}this.setState({scheduleFormatList:r,schedulelist:i,employeeList:a}),this.formatData(),this.loadData("range")},removeItem:function(e,t){return e.map(function(n,a){n.id==t.id&&e.splice(a,1)}),e},changeOffice:function(e){d.get("office_id",e)},componentWillMount:function(){this.loadEmployee(1),this.calcRange(),d.initFilter(this.filters)},unmountModal:function(){e.findDOMNode(this.refs["modal-wrapper"]),e.unmountComponentAtNode(e.findDOMNode(this.refs["modal-wrapper"]))},componentWillUnmount:function(){t.off("workschedule:add",this.showModal),t.off("workschedule:edit",this.showModalEdit),t.off("workschedule:review",this.updateSchedule),t.off("workschedule:updatelist",this.updateList),t.off("workschedulemodalposition:hide",this.unmountModal),r.destroyPullToRefresh()},componentDidUpdate:function(){},updateSchedule:function(e,t){if(e.length){var n=this;$("#body-loader").addClass("active");var r=(new m).STATUS_REVIEWED;t&&(r=(new m).STATUS_NEW),e.map(function(t,o){new m({id:t.id}).save({company_id:a.get("cid"),creator_id:a.get("uid"),work_tracking_range_id:t.work_tracking_range_id,office_id:t.office_id,note:t.note,status:r,date_scheduled:t.date_scheduled},{success:function(e,a){i.showSuccess(c.t("update_success"));var r=$.extend(a,{oldschedule:t.date_scheduled});n.updateList({type:"edit",data:r})},error:function(e,t){i.showSuccess(c.t("update_fail"))},complete:function(){o==e.length-1&&$("#body-loader").removeClass("active")}})})}},componentDidMount:function(){var a=this;(new n).setTcScrollMinHeight(),t.on("workschedule:edit",this.showModalEdit),t.on("workschedule:review",this.updateSchedule),t.on("workschedule:add",this.showModal),t.on("workschedule:updatelist",this.updateList),t.on("workschedulemodalposition:hide",this.unmountModal),r.enablePullToRefresh(this._loadData),i.initMyTip($(e.findDOMNode(this)).find(".mytip")),$(e.findDOMNode(this.refs.startdate)).on("apply.daterangepicker",function(e,t){var n=t.startDate.format("DD/MM/YYYY");n=a.formatTime(n,!0),d.set("datestarted",n),a.calcRange(),a.loadSchedule(1)}),$(e.findDOMNode(this.refs.reviewer)).popup({on:"click",inline:!1,position:"bottom right",setFluidWidth:!0,closable:!1,lastResort:!0,preserve:!0,html:e.renderToStaticMarkup(e.createElement(T,{data:a.state.schedulelist})),onShow:function(e){$(this).find(".cancel").fastClick(function(t){t.preventDefault(),$(e).popup("hide")}),$(this).find(".confirm").fastClick(function(t){t.preventDefault(),a.updateSchedule(a.state.schedulelist),$(e).popup("hide")}),$(this).find(".cancelreview").fastClick(function(t){t.preventDefault(),a.updateSchedule(a.state.schedulelist,!0),$(e).popup("hide")})}});var o=screen.height-218;$(e.findDOMNode(a.refs.contentright)).css("height",o),$(e.findDOMNode(a.refs.tabletop)).css("height",o-190)},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",{style:{width:"115px"}},"STAFF",e.createElement("div",{className:"pull-right",onClick:this.showModal,title:l.t("add")},e.createElement("i",{className:"icon tc-plus"})),e.createElement("div",{className:"pull-right","data-variation":"very wide",title:l.t("reviewed_all"),style:{fontSize:"14px"},ref:"reviewer"},e.createElement("i",{className:"icon tc-checkboxsquare"}))),this.state.dateRange.map(function(t,n){return e.createElement("th",{key:n,style:{color:"#666"},className:"two wide column"},t.strDay.concat(" ",t.strDate))}))},renderEmptyTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("td",{style:{width:"115px"}}," "),this.state.dateRange.map(function(t,n){return e.createElement("td",{key:"emty_"+n,className:"two wide column"}," ")}))},render:function(){var t=this,n={format:"DD/MM/YYYY",singleDatePicker:!0,showDropdowns:!0,applyClass:"ui button green",cancelClass:"ui button secondary"},a=0;d.get("office_id")&&(a=d.get("office_id"));var r=(new u).getPositionList();return r.unshift({
code:-1,text:"----"}),e.createElement("div",{className:"ui segments",id:"workschedulepage"},e.createElement("div",{id:"page"},e.createElement("div",{id:"pageleft"},e.createElement(C,{ref:"sidebar",showkeyword:!1,onSubmit:this.formSidebarSubmit,offsetTop:"50"},e.createElement("div",{className:"field"},e.createElement("label",null,l.t("office")),e.createElement(S,{className:"fluid",ref:"filteroffice",name:"office",value:a,onChange:this.changeOffice})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("employee")),e.createElement(M,{className:"fluid",ref:"filteruser",value:this.filters.user_id,name:"filteruser"})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("work_tracking_range_id")),e.createElement(D,{data:t.state.RangeList})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("position")),e.createElement(O,{ref:"filterposition",value:this.filters.position_id})))),e.createElement("div",{id:"pageright"},e.createElement(I,{ref:"heading",text:l.t("heading"),link:"#",hidepagination:!0,filters:this.filters,lang:l,loadFilterQueryTagData:this.loadFilterQueryTagData,hidekeywordsearch:!0}),e.createElement("div",{style:{padding:"20px"},className:"ui segment tc-scrolled",ref:"contentright"},e.createElement("div",{className:"pull-left",style:{fontSize:"28px"}},moment.unix(d.get("datestarted")).format("MMM D")," - ",moment.unix(d.get("dateended")).format("MMM D, YYYY")),e.createElement("div",{className:"pull-right"},e.createElement(x,{options:n,ref:"startdate"})," "),e.createElement("div",{style:{overflow:"scroll",width:"100%"}},e.createElement("table",{className:"ui table celled",style:{marginTop:"20px",marginBottom:0},id:"tablescheduleworkheader"},e.createElement("thead",null,i.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()))),e.createElement("div",{ref:"tabletop",id:"workscheduletabletop"},e.createElement("table",{className:"ui table celled",id:"tableschedulework"},e.createElement("tbody",null,t.state.scheduleFormatList.map(function(n,a){var i=0,r=0,o="";return $.isEmptyObject(t.state.employeeList)||(i=t.state.employeeList[a].user_id,o=t.state.employeeList[a].fullname,o||(o=i),t.state.employeeList[a].hasOwnProperty("keyload")&&(r=t.state.employeeList[a].keyload)),e.createElement(b,{key:a+"_"+n.length+"_"+r,index:a,rangelist:t.state.RangeList,employeeid:i,employeename:o,data:n,loaddata:t.loadData,date:t.state.dateRange})})))),e.createElement("div",{style:{paddingRight:"7px"}},e.createElement("div",{ref:"tablebottom",id:"workscheduletablebottom"},e.createElement("table",{className:"ui table celled"},e.createElement("thead",null,e.createElement("th",{className:"two wide column"},t.state.summaryList.sum?t.state.summaryList.sum:0),t.state.dateRange.map(function(n,a){var i=t.state.summaryList[n.intDate]?t.state.summaryList[n.intDate]:0;return e.createElement("th",{key:a,className:"two wide column"},i)}))))),e.createElement("div",{ref:"modal-wrapper"})))))}});return P}),define("controllers/blog/add",["react","backbone","helper","eventbus","role","language/default","basecontroller","components/blog/manage/add"],function(e,t,n,a,i,r,o,s){var l=o.extend({run:function(){return i.hasById(i.BLOG_MANAGE_POST)?(a.trigger("pageheader:activemenu","blog",!0),void e.render(e.createElement(s,null),document.getElementById("container"))):(n.showError(r.t("error_not_permission")),void t.history.navigate("blog",{trigger:!0}))}});return l}),define("controllers/blog/detail",["react","backbone","eventbus","pref","helper","basecontroller","querystring","models/blog","models/blogview","components/blog/screen/detail"],function(e,t,n,a,i,r,o,s,l,c){var d=r.extend({loadData:function(e){var t=$.Deferred();return e=i.strToInt(e),new s({id:e}).fetch({nocache:!0,success:function(e,n){t.resolve(n)},error:function(e,n){t.reject(n)}}),t.promise()},updateViewed:function(e){var t=$.Deferred(),n={company_id:a.get("cid"),creator_id:a.get("uid"),blog_id:i.strToInt(e)};return(new l).save(n,{success:function(e,n){t.resolve(n)},error:function(e,n){t.reject(n)}}),t.promise()},run:function(){var a=this;n.trigger("pageheader:activemenu","blog",!0),$("#body-loader").addClass("active");var i=o.get("id")||0;$.when(this.updateViewed(i)).always(function(){$.when(a.loadData(i)).done(function(t){$("#body-loader").removeClass("active"),e.render(e.createElement(c,{key:a.getFragment(),data:t}),document.getElementById("container"))}).fail(function(){$("#body-loader").removeClass("active"),t.history.navigate("blog",{trigger:!0})})})}});return d}),define("controllers/blog/edit",["react","backbone","helper","eventbus","basecontroller","querystring","role","language/default","components/blog/manage/edit","models/blog"],function(e,t,n,a,i,r,o,s,l,c){var d=i.extend({run:function(){var i=this;if(!o.hasById(o.BLOG_MANAGE_POST))return n.showError(s.t("error_not_permission")),void t.history.navigate("blog",{trigger:!0});a.trigger("pageheader:activemenu","blog",!0),$("#body-loader").addClass("active");var d=r.get("id")||0;new c({id:d}).fetch({nocache:!0,success:function(t){e.render(e.createElement(l,{key:i.getFragment(),data:t.toJSON()}),document.getElementById("container"))},error:function(){t.history.navigate("blog/manage",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})}});return d}),define("controllers/blog/index",["react","eventbus","basecontroller","setting","pref","role","phonegap","language/default","language/blog","helper","querystring","models/user","models/blog","collections/blog","components/headingfull","components/mixin/listsearch","components/filterbarfull","components/filterbartoggle","components/blog/screen/list/vertical","components/blog/screen/list/horizontal","components/dropdown/employee","components/zerodata"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b){var N=e.createClass({displayName:"BlogController",mixins:[f],filters:{keyword:null,creator_id:null,date_started:null,date_ended:null},getInitialState:function(){return{items:[],total:0,limit:12,currentpage:d.get("page")||1,alreadyloaddata:!1}},loadFilterQueryTagData:function(e){var n=null,a="name";switch(e){case"status":var i=(new m).getStatus(this.filters[e]);t.trigger("querytag:updatetext",{field:e,text:i.text});break;case"creator_id":a="fullname",n=new u}null!=n&&d.requestFilterQueryTag(n,this.filters,e,a)},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),creator_id:this.refs.filter_creator.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),this.doFilters(e)},loadData:function(){var t=this;c.showContentLoader($(e.findDOMNode(this.refs.list)));var n={company_id:i.get("cid"),limit:this.state.limit,page:d.get("page"),creator_id:this.filters.creator_id,keyword:this.filters.keyword||"",status:(new m).STATUS_ENABLE,sort_by:"id",sort_type:"DESC"};this.filters.date_started&&(n.date_started=this.filters.date_started),this.filters.date_ended&&(n.date_ended=this.filters.date_ended),this.xhr&&this.xhr.abort(),this.xhr=(new p).fetch({data:n,success:function(e,n){t.state.limit=c.strToInt(n.limit),t.state.total=c.strToInt(n.total),t.state.items=n.items,t.state.currentpage=n.currentpage,t.state.alreadyloaddata=!0},error:function(){t.state=t.getInitialState(),t.state.alreadyloaddata=!0},complete:function(){t.forceUpdate(),c.hideContentLoader($(e.findDOMNode(t.refs.list)))}})},componentDidUpdate:function(){t.trigger("listsearch:updatesize")},componentWillMount:function(){d.initFilter(this.filters)},componentDidMount:function(){this.loadData()},renderZeroData:function(){return r.hasById(r.BLOG_MANAGE_POST)?e.createElement(b,{alreadyloaddata:this.state.alreadyloaddata,icon:"info",text:l.t("zerodata_text"),subtext:l.t("zerodata_subtext"),buttonlink:"#blog/add"}):e.createElement(b,{alreadyloaddata:this.state.alreadyloaddata,icon:"info",text:l.t("zerodata_text"),subtext:"",buttontext:""})},render:function(){var t=c.isZeroData("blog",this.state.total);return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(h,{text:l.t("heading"),link:"#blog",total:this.state.total,limit:this.state.limit,currentpage:this.state.currentpage,filters:this.filters,lang:l,hidekeywordsearch:!0,nomarginbottom:!0,savedFilterIdentifier:"blog",loadFilterQueryTagData:this.loadFilterQueryTagData,shownavheadingtoggle:!1},e.createElement(_,null),r.hasById(r.BLOG_MANAGE_POST)?[e.createElement("a",{href:"#blog/manage",className:"mainbutton"},e.createElement("i",{className:"icon tc-gear"}),e.createElement("span",{className:"hideonsmall"},l.t("btn_manage")))]:null),t?null:e.createElement(g,{ref:"sidebar",keyword:this.filters.keyword,datepicker:!0,onSubmit:this.formSidebarSubmit},e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("creator")+":")),e.createElement("td",null,e.createElement(E,{className:"search selection fluid inline",ref:"filter_creator",value:this.filters.creator_id})))),e.createElement("div",{ref:"list",key:"list",className:"ui segment"},t?this.renderZeroData():e.createElement(y,{items:this.state.items,doFilter:this.doFilter}))))}}),w=n.extend({run:function(){t.trigger("pageheader:activemenu","blog",!0),e.render(e.createElement(N,{key:this.getFragment()+"-"+moment().valueOf()}),document.getElementById("container"))}});return w}),define("controllers/blog/manage",["react","backbone","eventbus","basecontroller","setting","pref","phonegap","language/default","language/blog","helper","querystring","role","models/blog","models/user","collections/blog","collections/user","components/blog/manage/item","components/headingfull","components/mixin/listsearch","components/filterbarfull","components/filterbartoggle","components/dropdown/blogstatus","components/dropdown/employee","components/table/idheadcell","components/zerodata"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k){var D=e.createClass({displayName:"BlogController",mixins:[v],filters:{keyword:null,status:null,creator_id:null,sort_by:null,sort_type:null},getInitialState:function(){return{models:[],length:0,total:0,limit:20,alreadyloaddata:!1,currentpage:d.get("page")}},loadFilterQueryTagData:function(e){var t=null,a="name";switch(e){case"status":var i=(new m).getStatus(this.filters[e]);n.trigger("querytag:updatetext",{field:e,text:i.text});break;case"creator_id":a="fullname",t=new p}null!=t&&d.requestFilterQueryTag(t,this.filters,e,a)},loadData:function(){var t=this;c.showContentLoader($(e.findDOMNode(this.refs.list_wrapper)));var n={company_id:r.get("cid"),limit:this.state.limit,page:d.get("page"),creator_id:d.get("creator_id"),keyword:d.get("keyword")||"",is_not_deleted:1,status:d.get("status")||null,sort_by:d.get("sort_by")||"id",sort_type:d.get("sort_type")||"DESC"};(new h).fetch({data:n,success:function(e){e.alreadyloaddata=!0,t.setState(e)},complete:function(){c.hideContentLoader($(e.findDOMNode(t.refs.list_wrapper)))}})},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),status:this.refs.filter_status.val(),creator_id:this.refs.filter_creator.val()};this.doFilters(e)},componentDidUpdate:function(){n.trigger("listsearch:updatesize")},componentWillMount:function(){d.initFilter(this.filters)},componentWillUnmount:function(){o.destroyPullToRefresh()},componentDidMount:function(){this.initSortable(),this.loadData(),(new a).setTcScrollMinHeight(),o.enablePullToRefresh(this.loadData),c.isSmallScreen()||c.initMyTip($(e.findDOMNode(this)).find(".mytip"))},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,e.createElement(w,null)),e.createElement("th",{className:""},e.createElement("a",{href:"",className:"sortable","data-sortby":"title"},l.t("title"))),e.createElement("th",null,l.t("slug")),e.createElement("th",null,l.t("status")),e.createElement("th",null,l.t("creator")),e.createElement("th",null,l.t("date_created")),e.createElement("th",null))},render:function(){var t=this,n=c.isZeroData("blog/manage",this.state.total);return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(_,{rootlink:"#blog",roottext:l.t("heading"),text:l.t("heading_manage"),link:"#blog/manage",total:this.state.total,limit:this.state.limit,currentpage:this.state.currentpage,filters:this.filters,lang:l,savedFilterIdentifier:"blog_manage",hidekeywordsearch:!0,loadFilterQueryTagData:this.loadFilterQueryTagData,shownavheadingtoggle:!1},e.createElement(E,null),e.createElement("a",{className:"mytip",href:"#blog/add",title:s.t("insert"),className:"mainbutton"},e.createElement("i",{className:"icon tc-plus-circle"}),e.createElement("span",{className:"hideonsmall"},l.t("add")))),n?"":e.createElement(y,{ref:"sidebar",keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("status")+":")),e.createElement("td",null,e.createElement(b,{className:"search selection fluid",ref:"filter_status",value:this.filters.status}))),e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("creator")+":")),e.createElement("td",null,e.createElement(N,{className:"fluid",ref:"filter_creator",value:this.filters.creator_id})))),e.createElement("div",{ref:"list_wrapper",className:"ui segment tctabledata tc-scrolled"},n?e.createElement(k,{alreadyloaddata:this.state.alreadyloaddata,icon:"info",text:l.t("zerodata_text"),subtext:l.t("zerodata_subtext"),buttonlink:"#blog/add"}):e.createElement("table",{className:c.tableclass(),ref:"blogtable"},e.createElement("thead",null,c.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){var i=n.toJSON();return e.createElement(g,{key:n.id,data:i,filter:t.doFilter})}))))))}}),T=a.extend({run:function(){return u.hasById(u.BLOG_MANAGE_POST)?(n.trigger("pageheader:activemenu","blog",!0),void e.render(e.createElement(D,{key:this.getFragment()}),document.getElementById("container"))):(c.showError(s.t("error_not_permission")),void t.history.navigate("blog",{trigger:!0}))}});return T}),define("controllers/checkin/add",["react","eventbus","basecontroller","components/checkin/add"],function(e,t,n,a){var i=n.extend({run:function(n){t.trigger("pageheader:activemenu","checkin",!0),e.render(e.createElement(a,null),document.getElementById("container"))}});return i}),define("controllers/checkin/export",["react","backbone","eventbus","basecontroller","querystring","components/checkin/export"],function(e,t,n,a,i,r){var o=a.extend({run:function(t){n.trigger("pageheader:activemenu","checkin",!0),n.trigger("sidebar:toggle","show"),e.render(e.createElement(r,{creator_id:i.get("creator_id")}),document.getElementById("container"))}});return o}),define("controllers/checkin/index",["react","eventbus","basecontroller","pref","role","phonegap","companymodule","helper","setting","language/default","language/checkin","querystring","collections/checkin","collections/user","collections/office","collections/employee","collections/worktrackingrange","models/worktrackingrange","models/checkin","models/office","models/user","models/employee","components/checkin/item","components/checkin/edit-time","components/mixin/listsearch","components/headingfull","components/filterbarfull","components/filterbartoggle","components/dropdown/employee","components/dropdown/office","components/dropdown/checkinstatus","components/tabletheadfixedonscroll","components/table/idheadcell"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M,S,O,I){var A=e.createClass({displayName:"CheckInController",getInitialState:function(){return{hmac:"",workrange:{},models:[],length:0,total:0,limit:50,roleid:263,office_list:[],permissionSchedule:!1,alreadyloaddata:!1,currentpage:u.get("page")}},mixins:[k],filters:{date:null,worktracking_range_id:null,keyword:null,status:null,creator_id:null,office_id:null,date_started:null,date_ended:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={status:this.refs.filterstatus.val(),office_id:this.refs.filteroffice.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),this.doFilters(e)},loadFilterQueryTagData:function(e){var n=null,a=this.filters[e],i="name";switch(e){case"status":var r=(new v).getStatus(a);t.trigger("querytag:updatetext",{field:e,text:r.text});break;case"office_id":n=new y;break;case"creator_id":n=new E,i="fullname";break;case"worktracking_range_id":n=new _}null!=n&&u.requestFilterQueryTag(n,this.filters,e,i)},unmoutModal:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs["modal-wrapper"]))},_getWokingrange:function(e){var t=this;$("#body-loader").addClass("active");var n={company_id:a.get("cid"),limit:50,page:e,is_not_deleted:1,sort_by:u.get("sort_by")||"display_order",sort_type:u.get("sort_type")||"ASC"};(new g).fetch({data:n,success:function(n,a){var i={},r=t.state.workrange;a.items.map(function(e,t){i[e.id]={},i[e.id]=e}),i=$.extend(r,i),t.setState({workrange:i}),a.total>=50*e?t._getWokingrange(e+1):t._loadData()},complete:function(){$("#body-loader").removeClass("active")}})},_loadOffice:function(e){var t=this;(new h).fetch({data:{company_id:a.get("cid"),is_not_deleted:1,status:(new y).STATUS_ENABLE,sort_by:"name",sort_type:"ASC",page:e},success:function(e,n){t.setState({office_list:t.state.office_list.concat(n.items)}),Math.ceil(n.total/n.limit)>n.currentpage&&t._loadOffice(n.currentpage+1)}})},doCloneThead:function(){var t=e.findDOMNode(this.refs.checkintable);this.refs.table_clone.doClone(t).updateWidth()},_loadData:function(){var t=this;s.showContentLoader($(e.findDOMNode(this.refs.list_wrapper)));var n={company_id:a.get("cid"),creator_id:a.get("uid"),limit:this.state.limit,page:u.get("page")||1,keyword:u.get("keyword")||"",status:u.get("status")||null,date:u.get("date")||null,employee_id:u.get("employee_id")||null,office_id:u.get("office_id")||null,worktracking_range_id:u.get("worktracking_range_id")||null,date_started:u.get("date_started")||0,date_ended:u.get("date_ended")||0,is_not_deleted:1,file_detail:1,sort_by:u.get("sort_by")||"date_created",sort_type:u.get("sort_type")||"DESC"};(new m).fetch({data:n,success:function(e,n){e.alreadyloaddata=!0,t.setState(e)},complete:function(){t.doCloneThead(),s.hideContentLoader($(e.findDOMNode(t.refs.list_wrapper)))}})},showEdit:function(t,n,a,i){var r=this,o={};this.state.models.map(function(e){e=e.toJSON(),t==e.id&&(o=e)}),e.render(e.createElement(w,{text:a,data:o,loaddata:r._loadData,range:i}),e.findDOMNode(r.refs["modal-wrapper"]))},updatelist:function(e,t){var n=this.state.models;switch(t){case"add":n.unshift(e);break;default:n.map(function(t,a){t.id==e.id&&(n[a]=e)})}this.setState({items:n})},getEmployee:function(){var e=this;(new f).fetch({data:{company_id:a.get("cid"),limit:1,page:1,is_not_deleted:1,ignore_group:1,user_id:a.get("uid"),status:(new b).STATUS_ENABLE},success:function(t){var n=t.toJSON();n=n[0],t.keyload=1,n.position_id==(new b).POSITION_MANAGER||n.position_id==(new b).POSITION_STORE_MANAGER||i.hasById(i.WORKSCHEDULE_REVIEW)?e.setState({permissionSchedule:!0}):e.setState({permissionSchedule:!1})}})},checkPermisson:function(){var t=this,n=["btnreport","export","reviewbtn"],r=["btnworkschedule"],s=["btnswaprange"],l=i.hasById(i.EMPLOYEE_MANAGE_WORKTIME),c=this.state.permissionSchedule&&o.has("workscheduling"),d=i.hasById(i.WORKSCHEDULE_CHANGE)&&o.has("workscheduling"),u=!1;this.state.office_list.forEach(function(e){if(""!=e.reviewer_list){var t=e.reviewer_list.split(",");t.length&&$.inArray(a.get("uid"),t)>=0&&(u=!0)}}),l||u||c||d?$(e.findDOMNode(t.refs.settinglist)).show():$(e.findDOMNode(t.refs.settinglist)).hide(),$.each(n,function(n,a){l?$(e.findDOMNode(t.refs[a])).show():($(e.findDOMNode(t.refs[a])).hide(),u&&"reviewbtn"==a&&$(e.findDOMNode(t.refs[a])).show())}),$.each(r,function(n,a){c?$(e.findDOMNode(t.refs[a])).show():$(e.findDOMNode(t.refs[a])).hide()}),$.each(s,function(n,a){d?$(e.findDOMNode(t.refs[a])).show():$(e.findDOMNode(t.refs[a])).hide()})},iniDropdown:function(){var t=this;$(e.findDOMNode(this.refs.dropdown_importcost)).dropdown({action:"hide",onShow:function(){$(e.findDOMNode(t.refs.importcost)).innerHeight(),$(e.findDOMNode(t.refs.dropdownAddText)).height(43)},onHide:function(){$(e.findDOMNode(t.refs.dropdownAddText)).height(0)}})},componentWillMount:function(){this.getEmployee(),this._loadOffice(1),u.initFilter(this.filters)},componentDidUpdate:function(e,t){this.checkPermisson(),this.iniDropdown()},importCost:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.dropdown_importcost)).dropdown("show")},componentDidMount:function(){this._loadData(),this.initSortable(),(new n).setTcScrollMinHeight(),t.on("list:reload",this._loadData),r.enablePullToRefresh(this._loadData),s.isSmallScreen()||(s.initMyTip($(e.findDOMNode(this)).find(".mytip")),s.initMyTip($(e.findDOMNode(this)).find(".mytip_onpage"),null,null,!1))},componentWillUnmount:function(){t.off("list:reload",this._loadData),t.off("checkinlist:reivewbtn"),r.destroyPullToRefresh()},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,e.createElement(I,null)),e.createElement("th",null,d.t("datecreated")),e.createElement("th",null,d.t("office")),e.createElement("th",null,d.t("range")),e.createElement("th",null,d.t("timeinout")),e.createElement("th",null,d.t("duration")),e.createElement("th",null,d.t("ratio")),e.createElement("th",null,d.t("ot_allow")),e.createElement("th",null,d.t("checkin_late")),e.createElement("th",null,d.t("checkin_early")),e.createElement("th",null,d.t("status")),e.createElement("th",null,d.t("reviewer")))},render:function(){var t=this,n="#checkin/export";return u.hasOwnProperty("creator_id")&&(n="#checkin/export/creator_id="+u.get("creator_id")),e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(D,{link:"#checkin",text:d.t("heading"),filters:this.filters,lang:d,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,showdatepicker:!0,currentpage:this.state.currentpage,alreadyloaddata:this.state.alreadyloaddata,hidekeywordsearch:"true"},e.createElement(x,null),e.createElement("a",{href:"#checkin/add",className:"mytip mainbutton",title:d.t("checkinbtn")},e.createElement("i",{className:"icon tc-plus-circle"}),e.createElement("span",{className:"hideonsmall"},d.t("checkinbtn"))),i.hasById(i.EMPLOYEE_CHECKIN_TERMINAL)?e.createElement("a",{href:"#checkin/terminal",className:"mytip mainbutton hideonsmall",title:d.t("heading_terminal_tooltip"),style:{backgroundColor:"#F2711C"}},e.createElement("i",{className:"icon tc-desktop"}),e.createElement("span",{className:"hideonsmall"},d.t("heading_terminal"))):null,o.has("workscheduling")?e.createElement("a",{className:"hideonsmall",href:"#workschedule/detail/_s/user_id/"+a.get("uid")},e.createElement("i",{className:"icon tc-calendar"}),e.createElement("span",{className:"hideonsmall"},d.t("schedule"))):"",e.createElement("a",{ref:"settinglist",href:"javascript:void(0)",onClick:this.importCost,className:"mytip_onpage",title:d.t("manage")},e.createElement("i",{className:"icon tc-gear"}),e.createElement("span",{className:"hideonsmall"},d.t("manage"))),e.createElement("div",{ref:"dropdown_importcost",className:"ui pointing dropdown "+(s.isSmallScreen()?"right":"")},e.createElement("span",{ref:"dropdownAddText",className:"text"}),e.createElement("div",{className:"menu"},e.createElement("a",{href:"#workschedule",className:"item hideonsmall",ref:"btnworkschedule"},e.createElement("i",{className:"icon tc-calendar"}),d.t("settingschedule")),e.createElement("a",{href:"#workschedule/swaprange",className:"item hideonsmall",ref:"btnswaprange"},e.createElement("i",{className:"icon tc-refresh"}),d.t("change_range")),e.createElement("a",{href:"#checkin/report",className:"item",ref:"btnreport"},e.createElement("i",{className:"icon tc-barchart"}),d.t("report")),e.createElement("a",{href:n,"data-value":"export",ref:"export",className:"item"},e.createElement("i",{className:"icon tc-download"}),d.t("exportexcel")),e.createElement("a",{href:"#checkin/review",className:"item",ref:"reviewbtn",style:{display:"none"}},e.createElement("i",{className:"icon tc-checkboxcircle"}),d.t("reivew_checkin"))))),e.createElement(T,{ref:"sidebar",showkeyword:!1,datepicker:!0,date_started:u.get("date_started"),date_ended:u.get("date_ended"),datepickerLabel:d.t("datecreated"),keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,d.t("status"),":")),e.createElement("td",null,e.createElement(S,{className:"search selection fluid",inline:!1,ref:"filterstatus",name:"status",value:this.filters.status}))),e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,d.t("office"),":")),e.createElement("td",null,e.createElement(M,{className:"search selection fluid",inline:!1,ref:"filteroffice",name:"office_id",value:this.filters.office_id})))),e.createElement("div",{ref:"list_wrapper",style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{className:s.tableclass(),ref:"checkintable"},e.createElement("thead",null,s.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){return n=n.toJSON(),e.createElement(N,{show_edit:t.showEdit,key:n.id,office_list:t.state.office_list,loaddata:t._loadData,viewDetail:t._viewDetail,workrangelist:t.state.workrange,filter:t.doFilter,data:n})}))))),e.createElement("span",{ref:"modal-wrapper"}),e.createElement(O,{ref:"table_clone"}))}}),P=n.extend({run:function(){t.trigger("pageheader:activemenu","checkin",!0),e.render(e.createElement(A,{key:this.getFragment()}),document.getElementById("container"))}});return P}),define("controllers/checkin/report",["react","eventbus","basecontroller","pref","role","setting","helper","language/default","language/checkin","querystring","collections/checkin","collections/office","collections/user","collections/worktrackingrange","models/checkin","models/user","models/department","models/office","components/checkin/report-table","components/checkin/modal-export","components/checkin/edit-time","components/filter-employee","components/pagination","components/semantic-datepicker","components/search-keyword","components/mixin/listsearch","components/headingfull","components/filterbar","components/filterbartoggle","components/dropdown/employee","components/dropdown/department","components/dropdown/office","components/checkin/summary/statistic"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M,S,O,I){var A=e.createClass({displayName:"CheckInReportController",mixins:[D],filters:{keyword:null,creator_id:null,department_id:null,office_id:null,date_started:null,date_ended:null,sort_by:null,sort_type:null},getInitialState:function(){return{office:[],hmac:"",workrange:{},models:[],length:0,total:0,currentpage:c.get("page")}},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),creator_id:this.refs.filter_creator.val(),department_id:this.refs.filter_department.val(),office_id:this.refs.filter_office.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),this.doFilters(e)},loadFilterQueryTagData:function(e){var t=null,n=(this.filters[e],"name");switch(e){case"creator_id":t=new f,n="fullname";break;case"department_id":t=new g;break;case"office_id":t=new _}null!=t&&c.requestFilterQueryTag(t,this.filters,e,n)},loadData:function(e){var n=[];switch(e){case"user":if(this.state.models.map(function(e,t){items=e,n.push(items.user_id)}),n){var a=n.join(",",n);a=jQuery.unique(a.split(",")),(new m).getFromIdList({ids:a,success:function(e){$.each(e.items,function(e,n){t.trigger("checkinreport:update",{type:"employee",item:n})})}})}}},checkPermisson:function(){var t=this,n=i.hasById(263),a=["listall","export"];a.length&&$.each(a,function(a,i){n||$(e.findDOMNode(t.refs[i])).hide()})},_loadData:function(){var e=this;o.showLoader(),(new h).getReport(this._getDataQuery(!1),function(t){e.setState({models:t.items,total:t.total,limit:t.limit,currentpage:t.currentpage}),o.hideLoader()},function(e){o.hideLoader()})},_export:function(e){e.preventDefault(),this._mountModal(y,{date_started:this.getFilterDateStarted(),date_ended:this.getFilterDateEnded(),store_id:0})},_mountModal:function(t,n){e.render(e.createElement(t,n),e.findDOMNode(this.refs["modal-wrapper"]))},_export2:function(t){var n=this,i=t.nativeEvent;i.preventDefault();var s=r.rooturl+$(e.findDOMNode(this.refs.linkexport)).attr("data-url");if(""!=n.state.hmac){var l=n._getExportUrl(s,n.state.hmac);window.open(l,o.getWindowTarget())}else{var c={company_id:a.get("cid"),user_id:a.get("uid")};$.ajax({url:s,method:"GET",data:c,dataType:"json",success:function(e){if(""!=e.hmac){var t=n._getExportUrl(s,e.hmac);n.setState({hmac:e.hmac}),window.open(t,o.getWindowTarget())}}})}},_getDataQuery:function(e){var t=e?1:c.get("page"),n={company_id:a.get("cid"),date_started:this.getFilterDateStarted(),date_ended:this.getFilterDateEnded(),page:t,limit:50};return this.filters.creator_id&&(n.creator_id=this.filters.creator_id),this.filters.department_id&&(n.department_id=this.filters.department_id),this.filters.office_id&&(n.office_id=this.filters.office_id),this.filters.keyword&&(n.keyword=this.filters.keyword),n},_getExportUrl:function(e,t){var n=this._getDataQuery(!0),i="";return $.each(n,function(e,t){i+=(""!=i?"&":"")+e+"="+t}),i+=(""!=i?"&":"")+"user_id="+a.get("uid"),i+=(""!=i?"&":"")+"hmac="+encodeURIComponent(t),e+="?"+i},_unmountModal:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs["modal-wrapper"]))},getFilterDateEnded:function(){return this.filters.date_ended||moment().endOf("month").unix()},getFilterDateStarted:function(){return this.filters.date_started||moment().startOf("month").unix()},componentWillUnmount:function(){t.off("checkin:closeModal",this._unmountModal)},componentWillMount:function(){c.initFilter(this.filters)},componentDidUpdate:function(){this.checkPermisson()},componentDidMount:function(){this._loadData(),this.checkPermisson(),t.on("checkin:closeModal",this._unmountModal),o.isSmallScreen()||o.initMyTip($(e.findDOMNode(this)).find(".mytip"))},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(T,{link:"#checkin",text:l.t("heading"),subtext:l.t("checkin_report"),filters:this.filters,lang:l,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,hidekeywordsearch:!0,currentpage:this.state.currentpage},e.createElement(C,null),e.createElement("a",{className:"mytip mainbutton",title:l.t("exportexcel"),href:"javascript:void(0)","data-url":"v1/worktrackings/report/export","data-value":"export",ref:"linkexport",onClick:t._export},e.createElement("i",{className:"icon tc-download"}),e.createElement("span",{className:"hideonsmall"},l.t("exportexcel")))),e.createElement(x,{heading:l.t("heading_sidebar"),ref:"sidebar",datepicker:!0,date_started:this.getFilterDateStarted(),date_ended:this.getFilterDateEnded(),datepickerLabel:l.t("datecreated"),keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("div",{className:"field"},e.createElement("label",null,l.t("employee"),":"),e.createElement(M,{ref:"filter_creator",name:"creator_id",value:this.filters.creator_id})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("department"),":"),e.createElement(S,{ref:"filter_department",name:"department_id",value:this.filters.department_id})),e.createElement("div",{className:"field"},e.createElement("label",null,l.t("office"),":"),e.createElement(O,{
ref:"filter_office",name:"office_id",value:this.filters.office_id}))),e.createElement(I,{filters:this._getDataQuery(!1),date_started:this.getFilterDateStarted(),date_ended:this.getFilterDateEnded()}),e.createElement("div",{className:"ui divider",style:{borderTopStyle:"dotted",borderBottomStyle:"dotted"}}),e.createElement("div",{className:"ui segment tc-scrolled"},e.createElement(v,{loadData:this._loadData,doFilter:this.doFilter,items:this.state.models}))),e.createElement("span",{ref:"modal-wrapper"}))}}),P=n.extend({run:function(){t.trigger("pageheader:activemenu","checkin",!0),t.trigger("sidebar:toggle","show"),e.render(e.createElement(A,{key:this.getFragment()}),document.getElementById("container"))}});return P}),define("controllers/checkin/review",["react","eventbus","basecontroller","pref","role","cacheddata","phonegap","companymodule","helper","setting","language/default","language/checkin","querystring","collections/checkin","collections/user","collections/office","collections/employee","collections/worktrackingrange","models/worktrackingrange","models/checkin","models/office","models/user","models/employee","components/checkin/item-review","components/checkin/edit-time","components/checkin/edithistory","components/mixin/listsearch","components/headingfull","components/filterbarfull","components/filterbartoggle","components/dropdown/employee","components/dropdown/office","components/dropdown/checkinstatus","components/table/idheadcell"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M,S,O,I,A){var P=e.createClass({displayName:"CheckInReviewController",getInitialState:function(){return{hmac:"",workrange:{},models:[],length:0,total:0,office_list:[],roleid:263,permissionSchedule:!1,currentpage:m.get("page")}},mixins:[T],filters:{date:null,worktracking_range_id:null,keyword:null,status:null,creator_id:null,office_id:null,date_started:null,date_ended:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={status:this.refs.filterstatus.val(),creator_id:this.refs.filtercreator.val(),office_id:this.refs.filteroffice.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),this.doFilters(e)},loadFilterQueryTagData:function(e){var n=null,a=this.filters[e],i="name";switch(e){case"status":var r=(new y).getStatus(a);t.trigger("querytag:updatetext",{field:e,text:r.text});break;case"office_id":n=new E;break;case"creator_id":n=new b,i="fullname";break;case"worktracking_range_id":n=new v}null!=n&&m.requestFilterQueryTag(n,this.filters,e,i)},unmoutModal:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs["modal-wrapper"]))},_getWokingrange:function(e){var t=this;$("#body-loader").addClass("active");var n={company_id:a.get("cid"),limit:50,page:e,is_not_deleted:1,sort_by:m.get("sort_by")||"display_order",sort_type:m.get("sort_type")||"ASC"};(new _).fetch({data:n,success:function(n,a){var i={},r=t.state.workrange;a.items.map(function(e,t){i[e.id]={},i[e.id]=e}),i=$.extend(r,i),t.setState({workrange:i}),a.total>=50*e?t._getWokingrange(e+1):t._loadData()},complete:function(){$("#body-loader").removeClass("active")}})},_loadData:function(){var t=this;l.showContentLoader($(e.findDOMNode(this.refs.list_wrapper)));var n={company_id:a.get("cid"),creator_id:m.get("creator_id"),limit:20,page:m.get("page")||1,keyword:m.get("keyword")||"",status:m.get("status")||null,date:m.get("date")||null,employee_id:m.get("employee_id")||null,office_id:m.get("office_id")||null,worktracking_range_id:m.get("worktracking_range_id")||null,date_started:m.get("date_started")||0,date_ended:m.get("date_ended")||0,is_not_deleted:1,file_detail:1,sort_by:m.get("sort_by")||"date_created",sort_type:m.get("sort_type")||"DESC"};(new p).fetch({data:n,success:function(e,n){t.setState(e)},complete:function(){l.hideContentLoader($(e.findDOMNode(t.refs.list_wrapper)))}})},showEdit:function(t,n,a,i){var r=this,o={};this.state.models.map(function(e){e=e.toJSON(),t==e.id&&(o=e)}),e.render(e.createElement(k,{text:a,data:o,loaddata:r._loadData,range:i}),e.findDOMNode(r.refs["modal-wrapper"]))},showHistory:function(t,n){e.render(e.createElement(D,{text:n,items:t}),e.findDOMNode(this.refs["modal-wrapper"]))},updatelist:function(e,t){var n=this.state.models;switch(t){case"add":n.unshift(e);break;default:n.map(function(t,a){t.id==e.id&&(n[a]=e)})}this.setState({items:n})},_loadOffice:function(e){var t=this;(new f).fetch({data:{company_id:a.get("cid"),is_not_deleted:1,status:(new E).STATUS_ENABLE,sort_by:"name",sort_type:"ASC",page:e},success:function(e,n){var r=t.state.office_list.concat(n.items);if(t.setState({office_list:r}),Math.ceil(n.total/n.limit)>n.currentpage)t._loadOffice(n.currentpage+1);else{var o=!1;r.map(function(e,t){if(""!=e.reviewer_list||i.hasById(i.EMPLOYEE_MANAGE_WORKTIME)){var n=e.reviewer_list.split(",");n.indexOf(a.get("uid"))>=0&&(o=!0)}}),o||Backbone.history.navigate("checkin",{trigger:!0})}}})},getEmployee:function(){var e=this;(new g).fetch({data:{company_id:a.get("cid"),limit:1,page:1,is_not_deleted:1,ignore_group:1,user_id:a.get("uid"),status:(new N).STATUS_ENABLE},success:function(t){var n=t.toJSON();n=n[0],t.keyload=1,n.position_id==(new N).POSITION_MANAGER||n.position_id==(new N).POSITION_STORE_MANAGER||i.hasById(i.WORKSCHEDULE_REVIEW)?e.setState({permissionSchedule:!0}):e.setState({permissionSchedule:!1})}})},checkPermisson:function(){var t=this,n=["btnreport","export"],a=["btnworkschedule"],r=["btnswaprange"],o=i.hasById(i.EMPLOYEE_MANAGE_WORKTIME),l=this.state.permissionSchedule&&s.has("workscheduling"),c=i.hasById(i.WORKSCHEDULE_REVIEW)&&s.has("workscheduling");$.each(n,function(n,a){o?$(e.findDOMNode(t.refs[a])).show():$(e.findDOMNode(t.refs[a])).hide()}),$.each(a,function(n,a){l?$(e.findDOMNode(t.refs[a])).show():$(e.findDOMNode(t.refs[a])).hide()}),$.each(r,function(n,a){c?$(e.findDOMNode(t.refs[a])).show():$(e.findDOMNode(t.refs[a])).hide()})},iniDropdown:function(){var t=this;$(e.findDOMNode(this.refs.dropdown_importcost)).dropdown({action:"hide",onShow:function(){$(e.findDOMNode(t.refs.importcost)).innerHeight(),$(e.findDOMNode(t.refs.dropdownAddText)).height(43)},onHide:function(){$(e.findDOMNode(t.refs.dropdownAddText)).height(0)}})},componentWillMount:function(){this.getEmployee(),m.initFilter(this.filters)},componentDidUpdate:function(e,t){this.checkPermisson(),this.iniDropdown()},importCost:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.dropdown_importcost)).dropdown("show")},componentDidMount:function(){this._loadData(),this._loadOffice(1),this.initSortable(),this.checkPermisson(),t.on("modal:hide",this.unmoutModal),t.on("checkin:update",this.updatelist),(new n).setTcScrollMinHeight(),t.on("list:reload",this._loadData),o.enablePullToRefresh(this._loadData)},componentWillUnmount:function(){t.off("modal:hide",this.unmountModal),t.off("list:reload",this._loadData),t.off("checkin:update",this.updatelist),o.destroyPullToRefresh()},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,e.createElement(A,null)),e.createElement("th",null,u.t("datecreated")),e.createElement("th",null,u.t("employee")),e.createElement("th",null,u.t("office")),e.createElement("th",null,u.t("range")),e.createElement("th",null,u.t("timeinout")),e.createElement("th",null,u.t("duration")),e.createElement("th",null,u.t("ratio")),e.createElement("th",null,u.t("ot_allow")),e.createElement("th",null,u.t("checkin_late")),e.createElement("th",null,u.t("checkin_early")),e.createElement("th",{className:"collapsing"},u.t("status")),e.createElement("th",null),e.createElement("th",null,u.t("ipaddress")),e.createElement("th",{className:"collapsing"}))},render:function(){var t=this,n="#checkin/export";return m.hasOwnProperty("creator_id")&&(n="#checkin/export/creator_id="+m.get("creator_id")),e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(x,{link:"#checkin",text:u.t("heading"),subtext:u.t("reivew_checkin"),filters:this.filters,lang:u,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,showdatepicker:!0,currentpage:this.state.currentpage,hidekeywordsearch:"true"},e.createElement(M,null)),e.createElement(C,{heading:u.t("heading_sidebar"),ref:"sidebar",showkeyword:!1,datepicker:!0,date_started:m.get("date_started"),date_ended:m.get("date_ended"),datepickerLabel:u.t("datecreated"),keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,u.t("status"),":")),e.createElement("td",null,e.createElement(I,{className:"fluid selection search",inline:!1,ref:"filterstatus",name:"status",value:this.filters.status}))),e.createElement("tr",{ref:"divfilteremployee"},e.createElement("td",null,e.createElement("label",null,u.t("employee"),":")),e.createElement("td",null,e.createElement(S,{className:"fluid selection search",inline:!1,ref:"filtercreator",name:"creator_id",value:this.filters.creator_id}))),e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,u.t("office"),":")),e.createElement("td",null,e.createElement(O,{className:"fluid selection search",inline:!1,ref:"filteroffice",name:"office_id",value:this.filters.office_id})))),e.createElement("div",{ref:"list_wrapper",style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{className:l.tableclass(),ref:"checkintable"},e.createElement("thead",null,l.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){return n=n.toJSON(),e.createElement(w,{show_edit:t.showEdit,show_history:t.showHistory,key:n.id+"_"+moment().valueOf(),loaddata:t._loadData,viewDetail:t._viewDetail,workrangelist:t.state.workrange,office_list:t.state.office_list,filter:t.doFilter,data:n})}))))),e.createElement("span",{ref:"modal-wrapper"}))}}),L=n.extend({run:function(){t.trigger("pageheader:activemenu","checkin",!0),e.render(e.createElement(P,{key:this.getFragment()}),document.getElementById("container"))}});return L}),define("controllers/checkin/terminal",["react","eventbus","basecontroller","components/checkin/terminal"],function(e,t,n,a){var i=n.extend({run:function(n){t.trigger("pageheader:activemenu","checkin",!0),e.render(e.createElement(a,null),document.getElementById("container"))}});return i}),define("controllers/company/create",["react","backbone","basecontroller","pref","setting","helper","eventbus","language/company","models/company"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"CompanyCreateController",submit:function(n){return $(".ui.form").addClass("loading"),$.ajax({url:i.rooturl+"v1/companies/create",type:"post",dataType:"json",data:{email:$(e.findDOMNode(this.refs.email)).val(),password:$(e.findDOMNode(this.refs.password)).val().trim(),password2:$(e.findDOMNode(this.refs.password2)).val().trim(),fullname:$(e.findDOMNode(this.refs.fullname)).val(),phone:$(e.findDOMNode(this.refs.phone)).val(),name:$(e.findDOMNode(this.refs.companyname)).val(),wl:i.wlName},error:function(e,t,n){r.notifyErrorAndForm(e,s)},success:function(e){r.showSuccess(s.t("success_create")),t.history.navigate("user/login",{trigger:!0})},complete:function(){$(".ui.form").removeClass("loading")}}),!1},componentDidMount:function(){$(".ui.form").form({fields:{email:{identifier:"email",rules:[{type:"empty",prompt:s.t("error_email_require")}]},password:{identifier:"password",rules:[{type:"empty",prompt:s.t("error_password_require")}]},password2:{identifier:"password2",rules:[{type:"empty",prompt:s.t("error_password_require")}]},fullname:{identifier:"fullname",rules:[{type:"empty",prompt:s.t("error_fullname_require")}]},phone:{identifier:"phone",rules:[{type:"empty",prompt:s.t("error_phone_require")}]},companyname:{identifier:"companyname",rules:[{type:"empty",prompt:s.t("error_companyname_require")}]}},inline:!1,onSuccess:this.submit}),$("body").addClass("body_cloud"),this.verticalAlign(),$("#logindialog").transition("fade in"),$(e.findDOMNode(this.refs.plan)).dropdown()},componentWillMount:function(){e.unmountComponentAtNode(document.getElementById("loginbox"))},componentWillUnmount:function(){$("body").removeClass("body_cloud")},verticalAlign:function(){if($(window).width()>=640){var t=$("#logindialog").height(),n=$(window).height(),a=(n-t-200)/2;0>a&&(a=30),$("#logindialog").css("marginTop",a),$(window).width<=960?$(e.findDOMNode(this.refs.logininner)).addClass("eight wide"):$(e.findDOMNode(this.refs.logininner)).addClass("fiv wide")}},render:function(){var t={logindialog:{position:"absolute",top:0,width:"100%",zIndex:1001,display:"none"},forgotpass:{paddingTop:"0.6em"},logo:{textAlign:"center",marginBottom:"1em"}};return e.createElement("div",null,e.createElement("div",{id:"logindialog",style:t.logindialog},e.createElement("div",{className:"ui stackable four column grid"},e.createElement("div",{className:"column centered",id:"logininner",ref:"logininner"},e.createElement("h1",{align:"center",style:t.logo},s.t("create_company_heading")),e.createElement("div",{className:"ui hidden small error message"},e.createElement("div",{className:"header"},s.t("login_error_header")),e.createElement("p",null)),e.createElement("form",{ref:"form",className:"ui form"},e.createElement("div",{className:"field"},e.createElement("div",{className:"ui left icon fluid input"},e.createElement("input",{placeholder:"Email",ref:"email",name:"email",defaultValue:""}),e.createElement("i",{className:"icon tc-envelope"}))),e.createElement("div",{className:"field"},e.createElement("div",{className:"ui left icon fluid input"},e.createElement("input",{placeholder:s.t("company_password"),ref:"password",name:"password",type:"password",defaultValue:""}),e.createElement("i",{className:"icon tc-lock"}))),e.createElement("div",{className:"field"},e.createElement("div",{className:"ui left icon fluid input"},e.createElement("input",{placeholder:s.t("company_password_confirm"),ref:"password2",name:"password2",type:"password",defaultValue:""}),e.createElement("i",{className:"icon tc-lock"}))),e.createElement("div",{className:"field"},e.createElement("div",{className:"ui left icon fluid input"},e.createElement("input",{placeholder:s.t("company_fullname"),ref:"fullname",name:"fullname",defaultValue:""}),e.createElement("i",{className:"icon tc-user"}))),e.createElement("div",{className:"field"},e.createElement("div",{className:"ui left icon fluid input"},e.createElement("input",{placeholder:s.t("company_phone"),ref:"phone",name:"phone",defaultValue:""}),e.createElement("i",{className:"icon tc-phone"}))),e.createElement("div",{className:"field"},e.createElement("div",{className:"ui left icon fluid input"},e.createElement("input",{placeholder:s.t("company_name"),ref:"companyname",name:"companyname",defaultValue:""}),e.createElement("i",{className:"icon tc-store"}))),e.createElement("div",{className:"ui error message"}),e.createElement("button",{ref:"btnLogin",className:"ui button teal",type:"submit"},s.t("company_create_submit")),e.createElement("div",{className:"ui divider"}),e.createElement("div",null,e.createElement("a",{href:"#user/login",className:"nocolor",style:{color:"#777"},title:""},e.createElement("small",null,"« ",s.t("company_login")))))))))}}),d=n.extend({run:function(){e.render(e.createElement(c,null),document.getElementById("registerbox"))}});return d}),define("controllers/course/add",["react","eventbus","basecontroller","components/course/add"],function(e,t,n,a){var i=n.extend({run:function(){t.trigger("pageheader:activemenu","elearning",!0),e.render(e.createElement(a,null),document.getElementById("container"))}});return i}),define("controllers/course/edit",["react","backbone","eventbus","basecontroller","querystring","models/course","components/course/edit"],function(e,t,n,a,i,r,o){var s=a.extend({run:function(){n.trigger("pageheader:activemenu","elearning",!0),n.trigger("sidebar:toggle","hide"),$("#body-loader").addClass("active"),new r({id:i.get("id")}).fetch({nocache:!0,success:function(t){var n=t.toJSON();e.render(e.createElement(o,{data:n}),document.getElementById("container"))},error:function(){t.history.navigate("course",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})}});return s}),define("controllers/course/index",["react","eventbus","basecontroller","pref","helper","phonegap","role","setting","language/default","language/course","querystring","collections/course","collections/course-category","collections/user","models/user","models/course","models/course-category","models/course-teacher","models/course-teacher-rel","components/course/item","components/mixin/listsearch","components/headingfull","components/filterbar","components/filterbartoggle","components/dropdown/coursestatus","components/dropdown/employee","components/dropdown/coursecategory","components/zerodata","components/table/idheadcell"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C){var M=e.createClass({displayName:"CourseIndexController",getInitialState:function(){return{hmac:"",topic:[],models:[],length:0,total:0,roleid:264,alreadyloaddata:!1,currentpage:d.get("page")}},mixins:[E],filters:{keyword:null,status:null,category:null,creator_id:null,date_started:null,date_ended:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),status:this.refs.filterstatus.val(),category:this.refs.filtercategory.val(),creator_id:this.refs.filtercreator.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),console.log(e),this.doFilters(e)},getDataFromId:function(){if(this.state.models.length){var e=[];this.state.models.map(function(t,n){var a=t.toJSON();e.push(a.lms_course_category_id)}),e=$.unique(e),e.length&&(new m).getFromIdList({ids:e,success:function(e){if(e.total>0){var n=e.items;n.map(function(e,n){t.trigger("courseitem:updateData",{data:e,action:"category"})})}},error:function(){}})}},loadFilterQueryTagData:function(e){var n=null,a=this.filters[e];switch(e){case"status":var i=(new f).getStatus(a);t.trigger("querytag:updatetext",{field:e,text:i.text});break;case"creator_id":new h({id:a}).fetch({nocache:!1,success:function(n){t.trigger("querytag:updatetext",{field:e,text:n.attributes.fullname})}});break;case"category":new g({id:a}).fetch({nocache:!1,success:function(n){t.trigger("querytag:updatetext",{field:e,text:n.attributes.name})}})}null!=n&&d.requestFilterQueryTag(n,this.filters,e)},_loadData:function(){$(".ui.modal").modal();var e=this;i.showLoader();var t={company_id:a.get("cid"),limit:50,page:d.get("page")||1,keyword:d.get("keyword")||"",status:d.get("status")||null,creator_id:d.get("creator_id")||null,lms_course_category_id:d.get("category")||null,date_begin:d.get("date_started")||null,date_finish:d.get("date_ended")||null,is_not_deleted:1,sort_by:d.get("sort_by")||"id",sort_type:d.get("sort_type")||"DESC"};(new u).fetch({data:t,success:function(t){0==t.total&&(t.alreadyloaddata=!0),e.setState(t)},complete:function(){i.hideLoader()}})},remove:function(e){var t=this;$(".ui.form").addClass("loading"),new f({id:e}).destroy({success:function(){t.updateList("delete",{id:e}),i.showSuccess(l.t("delete_success"))},error:function(){},complete:function(){$(".ui.form").removeClass("loading")}})},updateList:function(e,t){var n=$.extend([],this.state.models);switch(e){case"delete":n.map(function(e,a){e=e.toJSON(),e.id==t.id&&delete n[a]})}this.setState({models:n})},componentDidUpdate:function(e,t){this.getDataFromId()},componentWillMount:function(){d.initFilter(this.filters)},componentWillUnmount:function(){r.destroyPullToRefresh(),t.off("course:remove",this.remove)},componentWillMount:function(){o.hasById(o.ELEARNING_MANAGE)||(i.showError(l.t("error_not_permission")),Backbone.history.navigate("#",{trigger:!0}))},componentDidMount:function(){this._loadData(),this.initSortable(),(new n).setTcScrollMinHeight(),r.enablePullToRefresh(this._loadData),i.isSmallScreen()||i.initMyTip($(e.findDOMNode(this)).find(".mytip")),t.on("course:remove",this.remove)},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,e.createElement(C,null)),e.createElement("th",null,c.t("name")),e.createElement("th",null,c.t("category")),e.createElement("th",null,c.t("skilllevel")),e.createElement("th",{style:{textAlign:"center"}},c.t("durationinminute")),e.createElement("th",{className:"col_datetime"},e.createElement("a",{className:"sortable",href:"javascript:(void(0))","data-sortby":"date_started","data-nameorigin":c.t("datestarted")},c.t("datestarted"))),e.createElement("th",{className:"col_datetime"},e.createElement("a",{className:"sortable",href:"javascript:(void(0))","data-sortby":"date_ended","data-nameorigin":c.t("dateended")},c.t("dateended"))),e.createElement("th",{className:"col_status"},c.t("status")),e.createElement("th",null,c.t("creator")),e.createElement("th",null,l.t("date_created")),e.createElement("th",{className:"col_action_2button"}))},render:function(){var t=this,n=i.isZeroData("course",this.state.total);return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(b,{link:"#course",text:c.t("heading"),filters:this.filters,lang:c,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,showdatepicker:!0,currentpage:this.state.currentpage,hidekeywordsearch:"true"},e.createElement(w,null),e.createElement("a",{href:"#course/add",ref:"btnadd",title:l.t("insert"),className:"mytip mainbutton"},e.createElement("i",{className:"icon tc-plus-circle"}),c.t("add_course")),e.createElement("a",{href:"#coursecategory",ref:"",title:c.t("category"),className:"mytip"},e.createElement("i",{className:"icon tc-folder"}),c.t("category")),e.createElement("a",{href:"#courseteacher",ref:"",title:c.t("tab_teacher"),className:"mytip"},e.createElement("i",{className:"icon tc-users"}),c.t("tab_teacher"))),n?"":e.createElement(N,{ref:"sidebar",showkeyword:!0,datepickerLabel:c.t("time_study"),datepicker:!0,keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("div",{className:"field"},e.createElement("label",null,c.t("status"),":"),e.createElement(k,{ref:"filterstatus",name:"status",value:this.filters.status})),e.createElement("div",{className:"field"},e.createElement("label",null,c.t("creator"),":"),e.createElement(D,{ref:"filtercreator",name:"creator_id",value:this.filters.creator_id})),e.createElement("div",{className:"field"},e.createElement("label",null,c.t("category"),":"),e.createElement(T,{ref:"filtercategory",name:"category",value:this.filters.category}))),n?e.createElement(x,{alreadyloaddata:this.state.alreadyloaddata,icon:"general",text:c.t("zerodata_text"),subtext:c.t("zerodata_subtext"),buttonlink:"#course/add"}):e.createElement("div",{style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{className:i.tableclass(),ref:"employeepointtable"},e.createElement("thead",null,i.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){return n=n.toJSON(),e.createElement(y,{key:n.id,viewDetail:t._viewDetail,filter:t.doFilter,data:n})})))),e.createElement("div",{ref:"modal_wrapper"})))}}),S=n.extend({run:function(){t.trigger("pageheader:activemenu","elearning",!0),e.render(e.createElement(M,{key:this.getFragment()}),document.getElementById("container"))}});return S}),define("controllers/coursecategory/add",["react","eventbus","basecontroller","components/coursecategory/add"],function(e,t,n,a){var i=n.extend({run:function(){t.trigger("pageheader:activemenu","elearning",!0),e.render(e.createElement(a,null),document.getElementById("container"))}});return i}),define("controllers/coursecategory/edit",["react","backbone","eventbus","basecontroller","querystring","models/course-category","components/coursecategory/edit"],function(e,t,n,a,i,r,o){var s=a.extend({run:function(){n.trigger("pageheader:activemenu","elearning",!0),n.trigger("sidebar:toggle","hide"),$("#body-loader").addClass("active"),new r({id:i.get("id")}).fetch({nocache:!0,success:function(t){var n=t.toJSON();e.render(e.createElement(o,{data:n}),document.getElementById("container"))},error:function(){t.history.navigate("employeepoint",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})}});return s});define("controllers/coursecategory/index",["react","eventbus","basecontroller","pref","helper","phonegap","role","setting","language/default","language/course","language/coursecategory","querystring","collections/course-category","collections/user","models/user","models/course-category","components/coursecategory/item","components/mixin/listsearch","components/headingfull","components/filterbar","components/filterbartoggle","components/dropdown/employee","components/dropdown/employeepointstatus","components/table/idheadcell","components/zerodata"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k){var D=e.createClass({displayName:"CourseCategoryIndexController",getInitialState:function(){return{hmac:"",topic:[],models:[],length:0,total:0,roleid:264,alreadyloaddata:!1,currentpage:u.get("page")}},mixins:[_],filters:{keyword:null,status:null,creator_id:null,employee_id:null,store_id:null,topic_id:null,date_started:null,date_ended:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),status:this.refs.filterstatus.val(),creator_id:this.refs.filtercreator.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),this.doFilters(e)},remove:function(e){var t=this;$(".ui.form").addClass("loading"),new f({id:e}).destroy({success:function(){t.updateList("delete",{id:e}),i.showSuccess(l.t("delete_success"))},error:function(){},complete:function(){$(".ui.form").removeClass("loading")}})},updateList:function(e,t){var n=$.extend([],this.state.models);switch(e){case"delete":n.map(function(e,a){e=e.toJSON(),e.id==t.id&&delete n[a]})}this.setState({models:n})},loadFilterQueryTagData:function(e){var n=null,a=this.filters[e];switch(e){case"status":var i=(new f).getStatus(a);t.trigger("querytag:updatetext",{field:e,text:i.text});break;case"topic_id":new EmployeePointTopicModel({id:a}).fetch({nocache:!1,success:function(n){t.trigger("querytag:updatetext",{field:e,text:n.attributes.name})}});break;case"creator_id":new h({id:a}).fetch({nocache:!1,success:function(n){t.trigger("querytag:updatetext",{field:e,text:n.attributes.fullname})}});break;case"employee_id":new h({id:a}).fetch({nocache:!1,success:function(n){t.trigger("querytag:updatetext",{field:e,text:n.attributes.fullname})}})}null!=n&&u.requestFilterQueryTag(n,this.filters,e)},_loadData:function(){$(".ui.modal").modal();var e=this;i.showLoader();var t={company_id:a.get("cid"),limit:50,page:u.get("page")||1,keyword:u.get("keyword")||"",status:u.get("status")||null,creator_id:u.get("creator_id")||null,date_started:u.get("date_started")||null,date_ended:u.get("date_ended")||null,is_not_deleted:1,sort_by:u.get("sort_by")||"id",sort_type:u.get("sort_type")||"DESC"};(new m).fetch({data:t,success:function(t){0==t.total&&(t.alreadyloaddata=!0),e.setState(t)},complete:function(){i.hideLoader()}})},_unmountModal:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.modal_wrapper))},_mountModal:function(t,n){e.render(e.createElement(t,n),e.findDOMNode(this.refs.modal_wrapper))},componentDidUpdate:function(e,t){},componentWillMount:function(){u.initFilter(this.filters)},componentWillUnmount:function(){t.off("list:reload",this._loadData),t.off("coursecategory:remove",this.remove),r.destroyPullToRefresh()},componentDidMount:function(){this._loadData(),this.initSortable(),t.on("coursecategory:remove",this.remove),(new n).setTcScrollMinHeight(),t.on("list:reload",this._loadData),r.enablePullToRefresh(this._loadData),i.isSmallScreen()||i.initMyTip($(e.findDOMNode(this)).find(".mytip"))},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,e.createElement(w,null)),e.createElement("th",null,d.t("name")),e.createElement("th",null,d.t("displayorder")),e.createElement("th",{className:"col_status"},d.t("status")),e.createElement("th",null,d.t("creator")),e.createElement("th",{className:"col_datetime"},e.createElement("a",{className:"sortable",href:"javascript:(void(0))","data-sortby":"date_created","data-nameorigin":d.t("datecreated")},d.t("datecreated"))),e.createElement("th",{className:"col_action_2button"}))},render:function(){var t=this,n=i.isZeroData("coursecategory",this.state.total);return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(v,{rootlink:"#course",roottext:c.t("heading"),link:"#coursecategory",text:d.t("heading"),filters:this.filters,lang:d,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,showdatepicker:!0,currentpage:this.state.currentpage,hidekeywordsearch:"true"},e.createElement(E,null),e.createElement("a",{href:"#coursecategory/add",ref:"btnadd",title:l.t("insert"),className:"mytip mainbutton"},e.createElement("i",{className:"icon tc-plus-circle"}),d.t("add_category"))),n?"":e.createElement(y,{ref:"sidebar",showkeyword:!0,datepicker:!0,date_started:u.get("date_started"),date_ended:u.get("date_ended"),datepickerLabel:d.t("datecreated"),keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("div",{className:"field"},e.createElement("label",null,d.t("status"),":"),e.createElement(N,{ref:"filterstatus",name:"status",value:this.filters.status})),e.createElement("div",{className:"field"},e.createElement("label",null,d.t("creator"),":"),e.createElement(b,{ref:"filtercreator",name:"creator_id",value:this.filters.creator_id}))),n?e.createElement(k,{alreadyloaddata:this.state.alreadyloaddata,icon:"general",text:d.t("zerodata_text"),subtext:d.t("zerodata_subtext"),buttonlink:"#coursecategory/add"}):e.createElement("div",{style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{className:i.tableclass(),ref:"employeepointtable"},e.createElement("thead",null,i.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){return n=n.toJSON(),e.createElement(g,{key:n.id,viewDetail:t._viewDetail,filter:t.doFilter,data:n})})))),e.createElement("div",{ref:"modal_wrapper"})))}}),T=n.extend({run:function(){t.trigger("pageheader:activemenu","elearning",!0),e.render(e.createElement(D,{key:this.getFragment()}),document.getElementById("container"))}});return T});define("controllers/courseteacher/add",["react","eventbus","basecontroller","components/courseteacher/add"],function(e,t,n,a){var i=n.extend({run:function(){t.trigger("pageheader:activemenu","elearning",!0),e.render(e.createElement(a,null),document.getElementById("container"))}});return i}),define("controllers/courseteacher/edit",["react","backbone","eventbus","basecontroller","querystring","models/course-teacher","components/courseteacher/edit"],function(e,t,n,a,i,r,o){var s=a.extend({run:function(){n.trigger("pageheader:activemenu","elearning",!0),n.trigger("sidebar:toggle","hide"),$("#body-loader").addClass("active"),new r({id:i.get("id")}).fetch({nocache:!0,success:function(t){var n=t.toJSON();e.render(e.createElement(o,{data:n}),document.getElementById("container"))},error:function(){t.history.navigate("courseteacher",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})}});return s}),define("controllers/courseteacher/index",["react","eventbus","basecontroller","pref","helper","phonegap","role","setting","language/default","language/course","language/courseteacher","querystring","collections/course-teacher","collections/user","models/user","models/course-teacher","components/courseteacher/item","components/mixin/listsearch","components/headingfull","components/filterbar","components/filterbartoggle","components/dropdown/employee","components/dropdown/employeepointstatus","components/table/idheadcell","components/zerodata"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k){
var D=e.createClass({displayName:"CourseTeacherIndexController",getInitialState:function(){return{hmac:"",topic:[],models:[],length:0,total:0,roleid:264,alreadyloaddata:!1,currentpage:u.get("page")}},mixins:[_],filters:{keyword:null,status:null,creator_id:null,date_started:null,date_ended:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),status:this.refs.filterstatus.val(),creator_id:this.refs.filtercreator.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),this.doFilters(e)},loadFilterQueryTagData:function(e){var n=null,a=this.filters[e];switch(e){case"status":var i=(new f).getStatus(a);t.trigger("querytag:updatetext",{field:e,text:i.text});break;case"creator_id":new h({id:a}).fetch({nocache:!1,success:function(n){t.trigger("querytag:updatetext",{field:e,text:n.attributes.fullname})}})}null!=n&&u.requestFilterQueryTag(n,this.filters,e)},_loadData:function(){$(".ui.modal").modal();var e=this;i.showLoader();var t={company_id:a.get("cid"),limit:50,page:u.get("page")||1,keyword:u.get("keyword")||"",status:u.get("status")||null,creator_id:u.get("creator_id")||null,is_not_deleted:1,date_started:u.get("date_started")||null,date_ended:u.get("date_ended")||null,sort_by:u.get("sort_by")||"id",sort_type:u.get("sort_type")||"DESC"};(new m).fetch({data:t,success:function(t){0==t.total&&(t.alreadyloaddata=!0),e.setState(t)},complete:function(){i.hideLoader()}})},remove:function(e){var t=this;$(".ui.form").addClass("loading"),new f({id:e}).destroy({success:function(){t.updateList("delete",{id:e}),i.showSuccess(l.t("delete_success"))},error:function(){},complete:function(){$(".ui.form").removeClass("loading")}})},updateList:function(e,t){var n=$.extend([],this.state.models);switch(e){case"delete":n.map(function(e,a){e=e.toJSON(),e.id==t.id&&delete n[a]})}this.setState({models:n})},_unmountModal:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.modal_wrapper))},_mountModal:function(t,n){e.render(e.createElement(t,n),e.findDOMNode(this.refs.modal_wrapper))},componentDidUpdate:function(e,t){},componentWillMount:function(){u.initFilter(this.filters)},componentWillUnmount:function(){r.destroyPullToRefresh(),t.off("courseteacher:remove",this.remove)},componentDidMount:function(){this._loadData(),this.initSortable(),(new n).setTcScrollMinHeight(),r.enablePullToRefresh(this._loadData),i.isSmallScreen()||i.initMyTip($(e.findDOMNode(this)).find(".mytip")),t.on("courseteacher:remove",this.remove)},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,e.createElement(w,null)),e.createElement("th",null,d.t("name")),e.createElement("th",null,d.t("job_title")),e.createElement("th",null,d.t("company")),e.createElement("th",null,d.t("link_facebook")),e.createElement("th",{className:"col_status"},d.t("status")),e.createElement("th",null,d.t("creator")),e.createElement("th",{className:"col_datetime"},e.createElement("a",{className:"sortable",href:"javascript:(void(0))","data-sortby":"date_created","data-nameorigin":d.t("datecreated")},d.t("datecreated"))),e.createElement("th",{className:"col_action_2button"}))},render:function(){var t=this,n=i.isZeroData("courseteacher",this.state.total);return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(v,{rootlink:"#course",roottext:c.t("heading"),link:"#courseteacher",text:d.t("heading"),filters:this.filters,lang:d,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,showdatepicker:!0,currentpage:this.state.currentpage,hidekeywordsearch:"true"},e.createElement(E,null),e.createElement("a",{href:"#courseteacher/add",ref:"btnadd",title:l.t("insert"),className:"mytip mainbutton"},e.createElement("i",{className:"icon tc-plus-circle"}),l.t("insert"))),n?"":e.createElement(y,{ref:"sidebar",showkeyword:!0,datepicker:!0,date_started:u.get("date_started"),date_ended:u.get("date_ended"),datepickerLabel:d.t("datecreated"),keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("div",{className:"field"},e.createElement("label",null,d.t("status"),":"),e.createElement(N,{ref:"filterstatus",name:"status",value:this.filters.status})),e.createElement("div",{className:"field"},e.createElement("label",null,d.t("creator"),":"),e.createElement(b,{ref:"filtercreator",name:"creator_id",value:this.filters.creator_id}))),n?e.createElement(k,{alreadyloaddata:this.state.alreadyloaddata,icon:"general",text:d.t("zerodata_text"),subtext:d.t("zerodata_subtext"),buttonlink:"#courseteacher/add"}):e.createElement("div",{style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{className:i.tableclass(),ref:"employeepointtable"},e.createElement("thead",null,i.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){return n=n.toJSON(),e.createElement(g,{key:n.id,viewDetail:t._viewDetail,filter:t.doFilter,data:n})})))),e.createElement("div",{ref:"modal_wrapper"})))}}),T=n.extend({run:function(){t.trigger("pageheader:activemenu","elearning",!0),e.render(e.createElement(D,{key:this.getFragment()}),document.getElementById("container"))}});return T}),define("controllers/department/index",["react","eventbus","basecontroller","pref","helper","setting","language/department","language/setting","language/default","querystring","collections/department","models/department","components/headingfull","components/department/item","components/department/item","components/department/form-modal-add","components/department/form-modal-edit"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g){var _=e.createClass({displayName:"DepartmentController",getInitialState:function(){return{data:[],models:[],length:0,total:0,currentpage:1}},unmountModal:function(){e.findDOMNode(this.refs.loadmodal),e.unmountComponentAtNode(e.findDOMNode(this.refs.loadmodal))},componentWillUnmount:function(){t.off("department:hidemodal",this.unmountModal)},componentDidMount:function(){this._loadData(),t.on("department:hidemodal",this.unmountModal),$(".ui .modal").modal()},_loadData:function(){$(".ui.modal").modal();var t=this;i.showContentLoader($(e.findDOMNode(t.refs.loadtable)));var n={company_id:a.get("cid"),limit:50,page:c.get("page")||1,is_not_deleted:1,sort_by:c.get("sort_by")||"display_order",sort_type:c.get("sort_type")||"ASC"};(new d).fetch({data:n,success:function(e,n){var a=[];$.each(n.items,function(e,i){if(0==i.parent_id){i.childlist=t.formatData(n,i.id);var r=i;a.push(r)}});var i=0;a.map(function(e){i+=e.childlist.length+1}),t.setState({data:a,models:e.models,total:i})},complete:function(){i.hideContentLoader($(e.findDOMNode(t.refs.loadtable)))}})},formatData:function(e,t){var n=[],a=this;return $.each(e.items,function(i,r){if(r.parent_id==t){var o=a.formatData(e,r.id);jQuery.isEmptyObject(o)||(r.childlist={},r.childlist=o),n.push(r)}}),n},_pagiLoad:function(e){c.set("page",e),this._loadData()},_filterStatus:function(e){$(this.refs["filter-status"].getDOMNode()).dropdown("set selected",e)},_search:function(e){c.set("page",1),c.set("keyword",e),this._loadData()},_filterShow:function(){var e=400+$(".tc-scrolled table",this.getDOMNode()).outerHeight(!0);$(".tc-scrolled",this.getDOMNode()).css({minHeight:e})},_filterHide:function(){$(".tc-scrolled",this.getDOMNode()).eq(0).css({minHeight:0})},_sort:function(e){this._resetTextSort();var t=e.target,n=$(t).data("nameorigin"),a=$(t).data("name");c.set("sort_by",a),"DESC"==c.get("sort_type")?(c.set("sort_type","ASC"),$(t).html(n+" <i class='tc tc-top'></i>")):(c.set("sort_type","DESC"),$(t).html(n+" <i class='tc tc-bottom'></i>")),this._loadData()},_resetTextSort:function(){$(".sortable",this.getDOMNode()).each(function(e,t){$(t).html($(t).data("nameorigin"))}),$(this.refs["filter-status"].getDOMNode()).dropdown("clear")},_resetQuery:function(t){t.preventDefault(),this._resetTextSort(),$(e.findDOMNode(this.refs["search-keyword"])).find("input").val(""),c.reset(),this._loadData()},showmodal:function(t){var n=this;e.render(e.createElement(f,{fulllist:n.state.models,loaddata:n._loadData}),e.findDOMNode(n.refs.loadmodal))},showmodaledit:function(t){var n=this;this.state.models.map(function(a){a=a.toJSON(),a.id==t&&e.render(e.createElement(g,{data:a,fulllist:n.state.models,loaddata:n._loadData}),e.findDOMNode(n.refs.loadmodal))})},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement(m,{rootlink:"#setting/menu/id/other",roottext:s.t("company"),link:"#department",text:o.t("department"),total:this.state.total,hidepagination:!0,hidekeywordsearch:!0,hidefiltertoggle:!0},e.createElement("a",{href:"javascript:void(0)",onClick:this.showmodal,className:"mainbutton"},e.createElement("i",{className:"icon tc-plus-circle"}),e.createElement("span",{className:"hideonsmall"},o.t("insert")))),e.createElement("div",{ref:"loadtable",className:"ui segment",id:"loadtable"},e.createElement("form",{className:"ui form"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field twelve wide"},e.createElement("div",{className:"fields"},e.createElement("div",{className:"field four wide",id:"companydepartment-wrapper",ref:"contentdepartment"},e.createElement("ul",{className:"dep"},t.state.data.map(function(n,a){return e.createElement(p,{key:n.id+"_"+n.name,data:n,showmodal:t.showmodaledit})})))))))),e.createElement("div",{ref:"loadmodal"}))}}),v=n.extend({run:function(){t.trigger("pageheader:activemenu","",!0),t.trigger("sidebar:toggle","hide"),e.render(e.createElement(_,null),document.getElementById("container"))}});return v}),define("controllers/elearning/detail",["react","pref","role","basecontroller","eventbus","querystring","helper","language/elearning","models/course-teacher","models/lmscoursecategory","models/lmscourse","models/course-enroll","collections/course-enroll","components/elearning/widget-setting","components/elearning/widget-my-enroll","components/elearning/widget-category","components/elearning/widget-courses","components/elearning/related","components/elearning/detail/description","components/elearning/detail/curriculum","components/elearning/detail/instructor","components/elearning/detail/review"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b){var N=e.createClass({displayName:"ElearningController",getDefaultProps:function(){return{data:{}}},getInitialState:function(){return{category:{},enroll:!1}},saveEnroll:function(){var n=this;$(e.findDOMNode(this.refs.btn_enroll)).hasClass("loading")||($(e.findDOMNode(this.refs.btn_enroll)).addClass("loading"),(new u).save({company_id:t.get("cid"),creator_id:t.get("uid"),user_id:t.get("uid"),lms_course_id:n.props.data.id,status:(new u).STATUS_ENABLE,progress:(new u).PROGRESS_PENDING},{success:function(t,a){$(e.findDOMNode(n.refs.btn_enroll)).hide(),$(e.findDOMNode(n.refs.enroll_enable)).show(),i.trigger("elearninglectureitem:allowstudy",a),n.setState({enroll:a}),o.showSuccess(s.t("enroll_success"))},error:function(e,t){o.notifyError(t,s,s.t("enroll_error"))},complete:function(){$(e.findDOMNode(n.refs.btn_enroll)).removeClass("loading")}}))},loadCategory:function(){if(!(this.props.data.lms_course_category_id<=0)){var e=this;new c({id:this.props.data.lms_course_category_id}).fetch({success:function(t,n){e.setState({category:n})},error:function(t,n){e.setState({category:{}})}})}},updatecountrating:function(t){$(e.findDOMNode(this.refs.countrating)).text(t)},allowenroll:function(t){"enable"==t?$(e.findDOMNode(this.refs.enroll_enable)).show():"disable"==t?$(e.findDOMNode(this.refs.enroll_disable)).show():$(e.findDOMNode(this.refs.btn_enroll)).show()},updateteacher:function(t){if(t.length){var n={};t.map(function(e,t){e.status==(new l).STATUS_ENABLE&&(n=e)}),$.isEmptyObject(n)||($(e.findDOMNode(this.refs.teacher_name)).text(n.name),$(e.findDOMNode(this.refs.teacher)).attr("src",n.avatar))}},componentWillUnmount:function(){i.off("elearningdetail:updatecountrating",this.updatecountrating),i.off("elearningdetail:allowenroll",this.allowenroll),i.off("elearningdetail:updateteacher",this.updateteacher)},componentWillMount:function(){i.on("elearningdetail:updatecountrating",this.updatecountrating),i.on("elearningdetail:allowenroll",this.allowenroll),i.on("elearningdetail:updateteacher",this.updateteacher)},componentDidMount:function(){this.loadCategory(),$(".item",e.findDOMNode(this.refs.tab)).tab(),$(e.findDOMNode(this.refs.rating)).rating({initialRating:this.props.data.avgrating,interactive:!1,maxRating:5});var t=$(e.findDOMNode(this.refs.content_left)).width();o.isSmallScreen()||$(e.findDOMNode(this.refs.block_left)).width(t-232-68)},componentDidUpdate:function(){},render:function(){return e.createElement("div",null,e.createElement("div",{id:"elearning-header",style:{backgroundImage:"url(/imgs/elearning/bg-header.jpg)"}},e.createElement("div",{className:"elearning-heading-wrapper"},e.createElement("div",{className:"ui container"},e.createElement("h1",{className:"elearning-heading elearning-uppercase"},$.isEmptyObject(this.state.category)?s.t("all_courses"):this.state.category.name)))),e.createElement("div",{id:"elearning-breadcrumb"},e.createElement("div",{className:"ui container"},e.createElement("div",{className:"ui small breadcrumb"},e.createElement("a",{href:"#",className:"section"},s.t("home")),e.createElement("div",{className:"divider"}),e.createElement("a",{href:"#elearning",className:"section"},s.t("all_courses")),e.createElement("div",{className:"divider"}),$.isEmptyObject(this.state.category)?function(){return null}:[e.createElement("a",{key:0,href:"#elearning/_s/category_id/"+this.state.category.id,className:"section"},this.state.category.name),e.createElement("div",{key:1,className:"divider"})],e.createElement("div",{className:"section"},this.props.data.name)))),e.createElement("div",{id:"elearning-container",className:"ui container"},e.createElement("div",{className:"ui stackable grid elearning-grid"},e.createElement("div",{className:"twelve wide column",ref:"content_left"},e.createElement("div",{className:"elearing-detail-heading",ref:"block_left"},e.createElement("div",{className:"ui relaxed divided items"},e.createElement("div",{className:"item elearning-item"},e.createElement("div",{className:"content"},e.createElement("h2",{className:""},this.props.data.name),e.createElement("div",{className:"meta"},e.createElement("div",{className:"ui relaxed divided horizontal list",style:{width:"100%"}},e.createElement("div",{className:"top aligned item",ref:"teacher_div",style:{width:"35%",textAlign:"left"}},e.createElement("img",{className:"ui avatar image",ref:"teacher"}),e.createElement("div",{className:"content"},e.createElement("div",{className:"description"},s.t("teacher")),e.createElement("div",{className:"header elearning-uppercase",ref:"teacher_name"}," - "))),e.createElement("div",{className:"top aligned item hideonsmall",style:{width:"40%"}},e.createElement("div",{className:"content"},e.createElement("div",{className:"description"},s.t("category")),e.createElement("div",{className:"header",style:{textTransform:"uppercase"}},this.state.category.name))),e.createElement("div",{className:"top aligned item"},e.createElement("div",{className:"content"},e.createElement("div",{className:"description"},s.t("review")),e.createElement("div",{className:"header elearning-uppercase"},e.createElement("span",{ref:"rating",className:"ui rating elearning-rating","data-rating":this.props.data.avgrating})))))))))),e.createElement("div",{className:"elearning-free",style:{fontSize:"30px",lineHeight:"50px"}}," Free  "),e.createElement("div",{className:"elearing-detail-heading-fixheight",style:{width:"232px"}},e.createElement("div",{style:{float:"right",display:"none"},ref:"btn_enroll"},e.createElement("span",{className:"ui button",style:{backgroundColor:"#ffb606",textTransform:"uppercase"},onClick:this.saveEnroll},s.t("enroll"))),e.createElement("div",{style:{float:"right",display:"none",textTransform:"uppercase"},ref:"enroll_disable"},e.createElement("div",{className:"ui orange message elearing-enroll-disable"},e.createElement("i",{className:"icon tc-warning"}),s.t("enroll_disable")," ")),e.createElement("div",{style:{float:"right",display:"none",textTransform:"uppercase"},ref:"enroll_enable"},e.createElement("div",{className:"ui green message elearing-enroll-enable"},e.createElement("i",{className:"icon tc-checkboxcircle"}),s.t("enroll_enable")," "))),e.createElement("div",{className:"elearning-content-wrapper"},e.createElement("div",{className:"ui image"},e.createElement("img",{src:this.props.data.file_detail[0].full_directory_path})),e.createElement("div",{className:"elearning-detail-tab-wrapper"},e.createElement("div",{ref:"tab",className:"ui four item top attached tabular menu"},e.createElement("a",{className:"active item","data-tab":"description"},e.createElement("i",{className:"icon tc-flag"}),s.t("description")),e.createElement("a",{className:"item","data-tab":"curriculum"},e.createElement("i",{className:"icon tc-cube"}),s.t("curriculum")),e.createElement("a",{className:"item","data-tab":"instructor"},e.createElement("i",{className:"icon tc-user"}),s.t("instructors")),e.createElement("a",{className:"item","data-tab":"review"},e.createElement("i",{className:"icon tc-comments"}),s.t("reviews")," (",e.createElement("span",{ref:"countrating"}),")")),e.createElement("div",{className:"ui bottom attached active tab segment","data-tab":"description"},e.createElement("h2",{className:"onlyonsmall"},s.t("description")),e.createElement(v,{data:this.props.data})),e.createElement("div",{className:"ui bottom attached tab segment","data-tab":"curriculum"},e.createElement("h2",{className:"onlyonsmall"},s.t("curriculum")),e.createElement(y,{data:this.props.data})),e.createElement("div",{className:"ui bottom attached tab segment","data-tab":"instructor"},e.createElement("h2",{className:"onlyonsmall"},s.t("instructors")),e.createElement(E,{data:this.props.data})),e.createElement("div",{className:"ui bottom attached tab segment","data-tab":"review"},e.createElement("h2",{className:"onlyonsmall"},s.t("reviews")),e.createElement(b,{data:this.props.data})))),e.createElement("div",{className:"elearning-related-wrapper"},e.createElement(_,{title:s.t("relate_list"),data:this.props.data}))),e.createElement("div",{className:"four wide column "},n.hasById(n.ELEARNING_MANAGE)&&!o.isSmallScreen()?e.createElement(p,null):"",e.createElement(h,null),e.createElement(f,null),e.createElement(g,null)))))}}),w=a.extend({run:function(){i.trigger("pageheader:activemenu","elearning",!0);var t=this;o.showLoader(),new d({id:r.get("id")}).fetch({success:function(n,a){o.hideLoader(),e.render(e.createElement(N,{key:t.getFragment(),data:a}),document.getElementById("container"))},error:function(e,t){o.hideLoader(),Backbone.history.navigate("elearning",{trigger:!0})}})}});return w}),define("controllers/elearning/enroll",["react","basecontroller","eventbus","querystring","pref","helper","models/course-category","collections/course","collections/course-enroll","models/course","models/course-enroll","language/elearning","components/elearning/widget-my-enroll","components/elearning/widget-category","components/elearning/widget-courses","components/elearning/pagination","components/elearning/list-vertical","components/elearning/list-horizontal"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_){var v=e.createClass({displayName:"ElearningEnrollController",getInitialState:function(){return{items:[],total:0,limit:9,currentpage:a.get("page")||1,listStyle:i.get("elearningliststyle")||"grid",category:{}}},timer:0,loadCategory:function(){if(a.has("category_id")){var e=this;new o({id:a.get("category_id")}).fetch({success:function(t,n){e.setState({category:n})},error:function(t,n){e.setState({category:{}})}})}},loadEnroll:function(e){var t=this;(new l).fetch({data:{company_id:i.get("cid"),creator_id:i.get("uid"),status:(new d).STATUS_ENABLE,page:e},success:function(e,n){if(n.total>=0){var a=[];n.items.map(function(e,t){a.push(e.lms_course_id)}),t.loadData(a)}},error:function(e,t){}})},searchkeyword:function(){var t=this,n=$(e.findDOMNode(t.refs.keyword)).val();(n.length>2||0==n.length)&&(t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){Backbone.history.navigate("#elearning/_s/keyword/"+n,{trigger:!0})},1e3))},loadData:function(e){var t=this,n=$.unique(e);(new s).getFromIdList({ids:n,success:function(e,n){t.setState({items:e.items,total:e.total})},error:function(e,n){t.setState({items:[],total:0,limit:t.state.limit,currentpage:a.get("page")||1})},complete:function(){r.hideLoader()}})},checkLimit:function(e){var t=this,n=[];items=e.items,items.length&&items.map(function(e,t){e.limit_list.length||n.push(e)}),t.setState({items:item,total:e.total})},setListStyle:function(t,n){void 0!=n&&n.preventDefault();var a=this;t!=i.get("elearningliststyle")&&$(e.findDOMNode(this.refs.list)).fadeOut(500,function(){i.set("elearningliststyle",t),a.setState({listStyle:t})})},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){this.loadEnroll(1),this.loadCategory()},componentDidUpdate:function(){},render:function(){var t=r.strToNumber(this.state.total),n=r.strToNumber(this.state.limit),i=r.strToNumber(this.state.currentpage),o=0,s=0;t>0&&(o=(i-1)*n+1,s=o+this.state.items.length-1);var l=u.t("pagination_showing").replace("%from%",r.numberFormat(o)).replace("%to%",r.numberFormat(s)).replace("%total%",r.numberFormat(t));return e.createElement("div",null,e.createElement("div",{id:"elearning-header",style:{backgroundImage:"url(/imgs/elearning/bg-header.jpg)"}},e.createElement("div",{className:"elearning-heading-wrapper"},e.createElement("div",{className:"ui container"},e.createElement("h1",{className:"elearning-heading elearning-uppercase"},u.t("my_enroll"))))),e.createElement("div",{id:"elearning-breadcrumb"},e.createElement("div",{className:"ui container"},e.createElement("div",{className:"ui small breadcrumb"},e.createElement("a",{href:"#elearning",className:"section"},u.t("home")),e.createElement("div",{className:"divider"}),$.isEmptyObject(this.state.category)?e.createElement("div",{className:"section"},u.t("my_enroll")):[e.createElement("a",{key:0,className:"section",href:"#elearning"},u.t("all_courses")),e.createElement("div",{key:1,className:"divider"}),e.createElement("div",{key:2,className:"section"},this.state.category.name)]))),e.createElement("div",{id:"elearning-container",className:"ui container"},e.createElement("div",{className:"ui stackable grid elearning-grid"},e.createElement("div",{className:"twelve wide column"},e.createElement("div",{className:"ui menu elearning-courses-toolbar"},e.createElement("a",{href:"",className:"item icon "+("grid"==this.state.listStyle?"active":""),onClick:this.setListStyle.bind(this,"grid")},e.createElement("i",{className:"tc-expand"})),e.createElement("a",{href:"",className:"item icon "+("list"==this.state.listStyle?"active":""),onClick:this.setListStyle.bind(this,"list")},e.createElement("i",{className:"tc-list"})),e.createElement("div",{className:"item"},l),e.createElement("div",{className:"right menu"},e.createElement("div",{className:"item"},e.createElement("div",{className:"ui icon input"},e.createElement("input",{type:"text",ref:"keyword",placeholder:u.t("search_courses_placeholder"),defaultValue:a.get("keyword"),onKeyUp:this.searchkeyword}),e.createElement("i",{className:"tc-search link icon"}))))),"list"==this.state.listStyle&&this.state.items.length?e.createElement(_,{key:"list_"+moment().valueOf(),ref:"list",data:this.state.items}):e.createElement(g,{key:"list_"+moment().valueOf(),ref:"list",data:this.state.items})),e.createElement("div",{className:"four wide column "},e.createElement(m,null),e.createElement(p,null),e.createElement(h,null))),e.createElement(f,{key:moment().valueOf(),total:this.state.total,current_page:a.get("page")})))}}),y=t.extend({run:function(){n.trigger("pageheader:activemenu","elearning",!0),e.render(e.createElement(v,{key:this.getFragment()}),document.getElementById("container"))}});return y}),define("controllers/elearning/index",["react","basecontroller","eventbus","role","querystring","pref","helper","models/course-category","collections/course","models/course","language/elearning","components/elearning/widget-my-enroll","components/elearning/widget-setting","components/elearning/widget-category","components/elearning/widget-courses","components/elearning/pagination","components/elearning/list-vertical","components/elearning/list-horizontal"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_){var v=e.createClass({displayName:"ElearningController",getInitialState:function(){return{items:[],total:0,limit:9,currentpage:i.get("page")||1,listStyle:r.get("elearningliststyle")||"grid",category:{}}},timer:0,loadCategory:function(){if(i.has("category_id")){var e=this;new s({id:i.get("category_id")}).fetch({success:function(t,n){e.setState({category:n})},error:function(t,n){e.setState({category:{}})}})}},searchkeyword:function(){var t=this,n=$(e.findDOMNode(t.refs.keyword)).val();(n.length>2||0==n.length)&&(t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){Backbone.history.navigate("#elearning/_s/keyword/"+n,{trigger:!0})},1e3))},loadData:function(){var e=this,t={company_id:r.get("cid"),status:(new c).STATUS_ENABLE,is_remain_time:moment().unix(),limit:e.state.limit,keyword:i.get("keyword"),sort_type:"DESC",sort_by:"id"};i.has("category_id")&&(t.lms_course_category_id=i.get("category_id")),i.has("page")&&(t.page=i.get("page")),o.showLoader(),(new l).fetch({data:t,success:function(t,n){e.setState({items:n.items,total:n.total})},error:function(t,n){e.setState({items:[],total:0,limit:e.state.limit,currentpage:i.get("page")||1})},complete:function(){o.hideLoader()}})},checkLimit:function(e){var t=this,n=[];items=e.items,items.length&&items.map(function(e,t){e.limit_list.length||n.push(e)}),t.setState({items:item,total:e.total})},setListStyle:function(t,n){void 0!=n&&n.preventDefault();var a=this;t!=r.get("elearningliststyle")&&$(e.findDOMNode(this.refs.list)).fadeOut(500,function(){r.set("elearningliststyle",t),a.setState({listStyle:t})})},componentWillUnmount:function(){},componentWillMount:function(){},componentDidMount:function(){this.loadData(),this.loadCategory()},componentDidUpdate:function(){},render:function(){var t=o.strToNumber(this.state.total),n=o.strToNumber(this.state.limit),r=o.strToNumber(this.state.currentpage),s=0,l=0;t>0&&(s=(r-1)*n+1,l=s+this.state.items.length-1);var c=d.t("pagination_showing").replace("%from%",o.numberFormat(s)).replace("%to%",o.numberFormat(l)).replace("%total%",o.numberFormat(t));return e.createElement("div",null,e.createElement("div",{id:"elearning-header",style:{backgroundImage:"url(/imgs/elearning/bg-header.jpg)"}},e.createElement("div",{className:"elearning-heading-wrapper"},e.createElement("div",{className:"ui container"},e.createElement("h1",{className:"elearning-heading elearning-uppercase"},$.isEmptyObject(this.state.category)?d.t("all_courses"):this.state.category.name)))),e.createElement("div",{id:"elearning-breadcrumb"},e.createElement("div",{className:"ui container"},e.createElement("div",{className:"ui small breadcrumb"},e.createElement("a",{href:"#elearning",className:"section"},d.t("home")),e.createElement("div",{className:"divider"}),$.isEmptyObject(this.state.category)?e.createElement("div",{className:"section"},d.t("all_courses")):[e.createElement("a",{key:0,className:"section",href:"#elearning"},d.t("all_courses")),e.createElement("div",{key:1,className:"divider"}),e.createElement("div",{key:2,className:"section"},this.state.category.name)]))),e.createElement("div",{id:"elearning-container",className:"ui container"},e.createElement("div",{className:"ui stackable grid elearning-grid"},e.createElement("div",{className:"twelve wide column"},e.createElement("div",{className:"ui menu elearning-courses-toolbar"},e.createElement("a",{href:"",className:"item icon "+("grid"==this.state.listStyle?"active":""),onClick:this.setListStyle.bind(this,"grid")},e.createElement("i",{className:"tc-expand"})),e.createElement("a",{href:"",className:"item icon "+("list"==this.state.listStyle?"active":""),onClick:this.setListStyle.bind(this,"list")},e.createElement("i",{className:"tc-list"})),e.createElement("div",{className:"item"},c),e.createElement("div",{className:"right menu"},e.createElement("div",{className:"item"},e.createElement("div",{className:"ui icon input"},e.createElement("input",{type:"text",ref:"keyword",placeholder:d.t("search_courses_placeholder"),defaultValue:i.get("keyword"),onKeyUp:this.searchkeyword}),e.createElement("i",{className:"tc-search link icon"}))))),"list"==this.state.listStyle?e.createElement(_,{key:"list_"+moment().valueOf(),ref:"list",data:this.state.items}):e.createElement(g,{key:"list_"+moment().valueOf(),ref:"list",data:this.state.items})),e.createElement("div",{className:"four wide column "},a.hasById(a.ELEARNING_MANAGE)&&!o.isSmallScreen()?e.createElement(m,null):"",e.createElement(u,null),e.createElement(p,null),e.createElement(h,null))),e.createElement(f,{key:moment().valueOf(),total:this.state.total,current_page:i.get("page")})))}}),y=t.extend({run:function(){n.trigger("pageheader:activemenu","elearning",!0),e.render(e.createElement(v,{key:this.getFragment()}),document.getElementById("container"))}});return y}),define("controllers/elearning/learn",["react","pref","basecontroller","eventbus","querystring","helper","language/elearning","models/lmscoursecategory","models/course","models/course-chapter","models/course-lecture","models/course-lecture-content","models/course-enroll","models/course-quiz","models/course-quiz-question","collections/course-enroll","collections/course-chapter","collections/course-lecture-content","collections/course-lecture","collections/course-quiz","collections/course-quiz-question","components/elearning/learn/chapter-list","components/elearning/learn/lecture-content"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N){var w=e.createClass({displayName:"ElearningController",getDefaultProps:function(){return{data:{}}},loadEnroll:function(e){var n=this;(new f).fetch({data:{company_id:t.get("cid"),creator_id:t.get("uid"),lms_course_id:n.props.data.id,status:(new m).STATUS_ENABLE,page:e},success:function(e,t){if(t.total>=0){var i=t.items[0];i&&a.trigger("elearningcontent:updateenroll",i),n.setState({enroll:i,havegetenroll:1})}n.loadChapter(1),n.loadLecture(1),n.loadLectureContent(1),n.loadQuiz(1)},error:function(e,t){}})},loadQuiz:function(e){var n=this;(new y).fetch({data:{company_id:t.get("cid"),lms_course_id:n.props.data.id,status:(new p).STATUS_ENABLE,page:e},success:function(e,t){var a=$.extend([],n.state.quiz_list),i=Math.ceil(t.total/t.limit);if(t.total>0){var r=t.items;r.map(function(e,t){a.push(e)}),n.setState({quiz_list:a})}if(i>t.currentpage)n.loadQuiz(parseInt(t.currentpage)+1);else if(a.length){var o=[];a.map(function(e,t){o.push(e.id)}),o=$.unique(o),o=o.join(","),n.loadQuizQuestion(1,o)}},error:function(e,t){}})},loadQuizQuestion:function(e,n){var a=this;(new E).fetch({data:{company_id:t.get("cid"),lms_quiz_id_list:n,status:(new h).STATUS_ENABLE,sort_by:"display_order",sort_type:"ASC",page:e},success:function(e,t){var i=$.extend([],a.state.question_list),r=Math.ceil(t.total/t.limit);if(t.total>0){var o=t.items;o.map(function(e,t){i.push(e)}),a.setState({question_list:i})}r>t.currentpage&&a.loadQuizQuestion(parseInt(t.currentpage)+1,n)},error:function(e,t){}})},loadChapter:function(e){var n=this,a={company_id:t.get("cid"),lms_course_id:i.get("course"),status:(new c).STATUS_ENABLE,sort_type:"ASC",sort_by:"display_order",page:e};(new g).fetch({data:a,success:function(e,t){var a=$.extend([],n.state.chapter_list),i=Math.ceil(t.total/t.limit);if(t.total>0){var r=t.items;r.map(function(e,t){
a.push(e)}),n.setState({chapter_list:a})}i>t.currentpage&&n.loadChapter(parseInt(t.currentpage)+1)},error:function(){}})},loadLectureContent:function(e){var n=this;r.addLoader(),(new _).fetch({data:{company_id:t.get("cid"),lms_course_id:i.get("course"),status:(new u).STATUS_ENABLE,page:e},success:function(e,t){var a=$.extend([],n.state.content_list),s=Math.ceil(t.total/t.limit);if(t.total>0){var l=t.items;l.map(function(e,t){a.push(e)}),n.setState({content_list:a})}else Backbone.history.navigate("#elearning/detail/"+i.get("course"),{trigger:!0}),r.showError(o.t("emptylecture"));s>t.currentpage&&n.loadLectureContent(parseInt(t.currentpage)+1)},error:function(){},complete:function(){r.removeLoader()}})},loadLecture:function(e){var n=this;(new v).fetch({data:{company_id:t.get("cid"),lms_course_id:i.get("course"),status:(new d).STATUS_ENABLE,sort_type:"ASC",sort_by:"display_order",page:e},success:function(e,t){var a=$.extend([],n.state.lecture_list),i=Math.ceil(t.total/t.limit);if(t.total>0){var r=t.items;r.map(function(e,t){a.push(e)}),n.setState({lecture_list:a})}i>t.currentpage&&n.loadLecture(parseInt(t.currentpage)+1)},error:function(){}})},getInitialState:function(){return{category:{},enroll:{},quiz_list:{},question_list:[],havegetenroll:0,select_lecture:{},chapter_list:[],lecture_list:[],content_list:[]}},loadCategory:function(){if(!(this.props.data.lms_course_category_id<=0)){var e=this;new s({id:this.props.data.lms_course_category_id}).fetch({success:function(t,n){e.setState({category:n})},error:function(e,t){}})}},componentWillMount:function(){this.loadEnroll(1)},componentDidMount:function(){this.loadCategory(),r.isSmallScreen()||$("body").attr("style","overflow: hidden;transform: none;")},componentWillUnmount:function(){r.isSmallScreen()||$("body").attr("style","")},componentDidUpdate:function(){},render:function(){return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page",className:"page-elearning"},e.createElement(N,{key:"content_"+moment().valueOf(),havegetenroll:this.state.havegetenroll,enroll:this.state.enroll,lecture_list:this.state.lecture_list,content_list:this.state.content_list,quiz_question_list:this.state.question_list,quiz_list:this.state.quiz_list}),e.createElement("div",{id:"elearning-left-column",className:"elearing-left-column-learn"},e.createElement("div",{id:"elearing-left-content"},e.createElement("div",{id:"elearning-header-left"},e.createElement("div",{id:"elearning-breadcrumb"},e.createElement("div",{className:"ui breadcrumb",style:{borderBottom:"none",color:"#ffb606"}},e.createElement("a",{href:"#elearning",className:"section"},o.t("home")),e.createElement("i",{className:"icon tc-right dividerlist"}),e.createElement("a",{href:"#elearning/_s/category_id/"+this.state.category.id,className:"section",ref:"beadcrumcategory"},this.state.category.name),e.createElement("i",{className:"icon tc-right dividerlist"}))),e.createElement("span",{className:"elearning-courses-name"},this.props.data.name)),e.createElement(b,{key:"menu_"+moment().valueOf(),course:this.props.data,data:{},enroll:this.state.enroll,lecture_list:this.state.lecture_list,chapter_list:this.state.chapter_list})))))}}),k=n.extend({run:function(){a.trigger("pageheader:activemenu","elearning",!0);var t=this;r.showLoader(),new l({id:i.get("course")}).fetch({success:function(n,a){r.hideLoader(),e.render(e.createElement(w,{key:t.getFragment(),data:a}),document.getElementById("container"))},error:function(e,t){r.hideLoader(),Backbone.history.navigate("elearning",{trigger:!0})}})}});return k}),define("controllers/email/index",["backbone","react","helper","basecontroller","eventbus","components/mail/desktop/index","components/mail/mobile/index"],function(e,t,n,a,i,r,o){var s=t.createClass({displayName:"MailController",componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidMount:function(){},render:function(){var e=!1;return(n.isPhonegap()||n.isSmallScreen())&&(e=!0),t.createElement("div",null,e?t.createElement(o,null):t.createElement(r,null))}}),l=a.extend({run:function(){i.trigger("pageheader:activemenu","mail",!0),t.render(t.createElement(s,null),document.getElementById("container"))}});return l}),define("controllers/employee/add",["react","eventbus","role","helper","language/default","basecontroller","components/employee/add"],function(e,t,n,a,i,r,o){var s=r.extend({run:function(r){t.trigger("pageheader:activemenu","employee",!0),t.trigger("sidebar:toggle","show"),n.hasById(n.EMPLOYEE_ADD)||n.hasById(n.EMPLOYEE_MANAGE)?e.render(e.createElement(o,null),document.getElementById("container")):(a.showError(i.t("error_not_permission")),Backbone.history.navigate("employee",{trigger:!0}))}});return s}),define("controllers/employee/detail",["react","backbone","pref","role","eventbus","basecontroller","querystring","models/employee","components/employee/detail"],function(e,t,n,a,i,r,o,s,l){var c=r.extend({run:function(r){i.trigger("pageheader:activemenu","employee",!0),i.trigger("sidebar:toggle","hide"),$("#body-loader").addClass("active"),new s({id:o.get("id")}).fetch({nocache:!0,success:function(i){var i=i.toJSON();a.hasById(a.EMPLOYEE_DETAIL)||a.hasById(a.EMPLOYEE_MANAGE)||n.get("uid")==i.user_id?e.render(e.createElement(l,{data:i}),document.getElementById("container")):(Helper.showError(Lang.t("error_not_permission")),t.history.navigate("employee",{trigger:!0}))},error:function(){t.history.navigate("warehouse",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})}});return c}),define("controllers/employee/edit",["react","backbone","eventbus","basecontroller","querystring","models/employee","components/employee/edit"],function(e,t,n,a,i,r,o){var s=a.extend({run:function(a){n.trigger("pageheader:activemenu","employee",!0),n.trigger("sidebar:toggle","hide"),$("#body-loader").addClass("active"),new r({id:i.get("id")}).fetch({nocache:!0,success:function(t){e.render(e.createElement(o,{data:t.toJSON()}),document.getElementById("container"))},error:function(){t.history.navigate("warehouse",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})}});return s}),define("controllers/employee/export",["react","backbone","eventbus","basecontroller","querystring","components/employee/export"],function(e,t,n,a,i,r){var o=a.extend({run:function(t){n.trigger("pageheader:activemenu","employee",!0),n.trigger("sidebar:toggle","show"),e.render(e.createElement(r,{creator_id:i.get("creator_id")}),document.getElementById("container"))}});return o}),define("controllers/employee/import",["react","basecontroller","eventbus","components/employee/import"],function(e,t,n,a){var i=e.createClass({displayName:"EmployeeImportController",componentDidMount:function(){},render:function(){return e.createElement(a,null)}}),r=t.extend({run:function(){n.trigger("pageheader:activemenu","employee",!0),e.render(e.createElement(i,null),document.getElementById("container"))}});return r}),define("controllers/employee/importoffice",["react","basecontroller","eventbus","components/employee/import-office"],function(e,t,n,a){var i=e.createClass({displayName:"EmployeeImportOfficeController",componentDidMount:function(){},render:function(){return e.createElement(a,null)}}),r=t.extend({run:function(){n.trigger("pageheader:activemenu","employee",!0),e.render(e.createElement(i,null),document.getElementById("container"))}});return r}),define("ajaxstore",[],function(){return{data:[],set:function(e){return e.id&&e.request?(this.data.push(e),e):null},get:function(e){var t=this.data.filter(function(t){return t.id==e}).shift();return t},has:function(e){var t=this.data.filter(function(t){return t.id==e}).shift();return!$.isEmptyObject(t)},remove:function(e){var t=this.data.filter(function(t){return t.id!=e});this.data=t},cancel:function(e){var t=this.get(e);t&&(t.request&&"pending"==t.request.state()&&t.request.abort(),this.remove(t.id))},cancelAll:function(){var e=this.data.slice();this.data=[],e.forEach(function(e){e.request&&"pending"==e.request.state()&&e.request.abort()})}}}),define("controllers/employee/index",["react","basecontroller","eventbus","pref","role","helper","ajaxstore","querystring","language/employee","language/default","models/employee","collections/employee","models/department","collections/department","models/office","collections/office","phonegap","components/mixin/listsearch","components/querytag","components/querytaglist","components/employee/item","components/employee/item-expand","components/headingfull","components/pagination","components/floatpagination","components/dropdown/office","components/dropdown/department","components/dropdown/position","components/dropdown/employeetype","components/dropdown/status","components/filterbarfull","components/filterbartoggle","components/dataexporter/trigger","components/dataexporter/formatter/employee","components/introjs","components/tabletheadfixedonscroll","components/table/idheadcell"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M,S,O,I,A,P,L,R){var U=e.createClass({displayName:"EmployeeController",mixins:[_],getInitialState:function(){return{total:"--",limit:50,items:[],length:0,currentpage:s.get("page")}},filters:{keyword:null,office_id:null,department_id:null,position_id:null,type:null,status:null,date_started:null,date_ended:null,sort_by:null,sort_type:null},loadFilterQueryTagData:function(e){var t=null;switch(e){case"department_id":t=new m;break;case"office_id":t=new h;break;case"position_id":var a=(new d).getPosition(this.filters[e]),i=l.t(a.text);n.trigger("querytag:updatetext",{field:e,text:i});break;case"type":var r=(new d).getType(this.filters[e]),o=l.t("TYPE_"+r.text);n.trigger("querytag:updatetext",{field:e,text:o});break;case"status":var c=(new d).getStatus(this.filters[e]),u=l.t("STATUS_"+c.text);n.trigger("querytag:updatetext",{field:e,text:u})}null!=t&&s.requestFilterQueryTag(t,this.filters,e)},_loadData:function(){var t=this,n={company_id:a.get("cid"),limit:this.state.limit,is_not_deleted:1,ignore_group:1,page:this.state.currentpage,office_id:this.filters.office_id,department_id:this.filters.department_id,position_id:this.filters.position_id,type:this.filters.type,status:this.filters.status,keyword:s.get("keyword"),sort_by:s.get("sort_by")||"id",sort_type:s.get("sort_type")||"DESC"},i="employee_list_"+moment.valueOf();r.showContentLoader($(e.findDOMNode(this.refs.list_wrapper)));var l={data:n,success:function(e,a){r.isSmallScreen()||t.refs.dataexporter.setRequestData({data:n,url:(new u).url}),t.setState(a)},error:function(){t.setState(t.getInitialState())},complete:function(n,a,s){t.doCloneThead(),o.remove(i),r.hideContentLoader($(e.findDOMNode(t.refs.list_wrapper)))}};o.set({id:i,request:(new u).fetch(l)})},remove:function(e){var t=this.state.items.filter(function(t){return t.id!=e});this.state.total-=this.state.items.length-t.length,this.state.items=t,this.forceUpdate()},update:function(e){var t=[];this.state.items.forEach(function(n){n.id==e.id?t.push(e):t.push(n)}),this.state.items=t,this.forceUpdate()},checkPermisson:function(){var t=this,n=i.hasById(262),a=["setting-checkin","manage","btnexport","btnimportmore","btnimportoffice"];a.length&&$.each(a,function(a,i){n||$(e.findDOMNode(t.refs[i])).hide()})},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),office_id:this.refs.filteroffice.val(),department_id:this.refs.filterdepartment.val(),position_id:this.refs.filterposition.val(),type:this.refs.filtertype.val(),status:this.refs.filterstatus.val()};this.doFilters(e)},importCost:function(t){t.preventDefault(),$(e.findDOMNode(this.refs.dropdown_importcost)).dropdown("show")},iniDropdown:function(){var t=this;$(e.findDOMNode(this.refs.dropdown_importcost)).dropdown({action:"hide",direction:"right",onShow:function(){$(e.findDOMNode(t.refs.importcost)).innerHeight(),$(e.findDOMNode(t.refs.dropdownAddText)).height(43)},onHide:function(){$(e.findDOMNode(t.refs.dropdownAddText)).height(0)}})},selectActionChange:function(e){this.toggleButtonDoAction()},toggleButtonDoAction:function(){var t=$(".checkbox-action.checked:not(.all)",e.findDOMNode(this.refs.employeetable)),n=e.findDOMNode(this.refs.bulk_action_select).value;n=r.strToInt(n);var a=$(e.findDOMNode(this.refs.bulk_action_button));t.length<=0||0>=n?a.addClass("disabled"):a.removeClass("disabled"),$(e.findDOMNode(this.refs.count_item_choosed)).text(t.length)},getItem:function(e){var t=this.state.items.filter(function(t){return t.id==e}).shift();return $.isEmptyObject(t)&&(t={}),t},bulkDelete:function(t){var n=this,a=$(e.findDOMNode(this.refs.list_wrapper)),i=$(e.findDOMNode(this.refs.bulk_action_button)),o=$(".checkbox-action:not(.disabled)",e.findDOMNode(n.refs.employeetable)),s=$(e.findDOMNode(n.refs.bulk_action_select)),u=0,m=!1;a.addClass("disabled"),i.addClass("loading");for(var p in t){var h=n.getItem(t[p]);$.isEmptyObject(h)?++u>=t.length&&(a.removeClass("disabled"),i.removeClass("loading"),o.checkbox("uncheck"),s.val(""),m||r.showSuccess(c.t("update_success")),n._loadData()):new d(h).destroy({success:function(e,t){n.remove(h.id)},error:function(e,t){r.notifyError(t,l,"error"),m=!0},complete:function(){++u>=t.length&&(a.removeClass("disabled"),i.removeClass("loading"),o.checkbox("uncheck"),s.val(""),m||r.showSuccess(c.t("delete_success")),n._loadData())}})}},bulkUpdateStatus:function(t,n){var i=this,o=$(e.findDOMNode(this.refs.list_wrapper)),s=$(e.findDOMNode(this.refs.bulk_action_button)),u=$(".checkbox-action:not(.disabled)",e.findDOMNode(i.refs.employeetable)),m=$(e.findDOMNode(this.refs.bulk_action_select)),p=0,h=!1;o.addClass("disabled"),s.addClass("loading");for(var f in t){var g=i.getItem(t[f]);if($.isEmptyObject(g)||g.status==n)++p>=t.length&&(o.removeClass("disabled"),s.removeClass("loading"),u.checkbox("uncheck"),m.val(""),h||r.showSuccess(c.t("update_success")),i._loadData());else{var _={company_id:a.get("cid"),creator_id:a.get("uid"),status:n};new d(g).save(_,{success:function(e,t){i.update(t)},error:function(e,t){r.notifyError(t,l,"error"),h=!0},complete:function(){++p>=t.length&&(o.removeClass("disabled"),s.removeClass("loading"),u.checkbox("uncheck"),m.val(""),h||r.showSuccess(c.t("update_success")),i._loadData())}})}}},doAction:function(t){t.preventDefault();var n=[];$(".checkbox-action.checked:not(.all)",e.findDOMNode(this.refs.employeetable)).each(function(e){var t=$('input[type="checkbox"]',this).val();n.push(r.strToInt(t))});var a=e.findDOMNode(this.refs.bulk_action_select).value;a=r.strToInt(a);var i=new d;switch(a){case i.STATUS_DELETED:this.bulkDelete(n);break;case i.STATUS_ENABLE:case i.STATUS_DISABLED:this.bulkUpdateStatus(n,a)}},doCloneThead:function(){var t=e.findDOMNode(this.refs.employeetable);this.refs.table_clone.doClone(t).updateWidth()},componentWillUnmount:function(){n.off("employeelist:delete",this.remove),n.off("list:reload",this._loadData),g.destroyPullToRefresh(),o.cancelAll()},componentWillMount:function(){s.initFilter(this.filters)},componentDidMount:function(){var a=this;this._loadData(),this.initSortable(),this.checkPermisson(),n.on("employeelist:delete",this.remove),n.on("list:reload",this._loadData),$(".checkbox-action.all",e.findDOMNode(this.refs.employeetable)).checkbox({onChecked:function(){$(".checkbox-action:not(.disabled)",e.findDOMNode(a.refs.employeetable)).checkbox("check")},onUnchecked:function(){$(".checkbox-action:not(.disabled)",e.findDOMNode(a.refs.employeetable)).checkbox("uncheck")}}),(new t).setTcScrollMinHeight(),g.enablePullToRefresh(this._loadData),r.isSmallScreen()||(r.initMyTip($(e.findDOMNode(this)).find(".mytip")),r.initMyTip($(e.findDOMNode(this)).find(".mytip_onpage"),null,null,!1))},componentDidUpdate:function(){this.checkPermisson(),this.iniDropdown()},renderBulkActionCheckbox:function(t){return e.createElement("th",{className:"collapsing",colSpan:t||1},e.createElement("div",{className:"ui checkbox checkbox-action all",style:{verticalAlign:"middle",fontSize:11,textTransform:"none"}},e.createElement("input",{type:"checkbox"})))},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,this.renderBulkActionCheckbox(),e.createElement("th",null,e.createElement(R,null)),e.createElement("th",null),e.createElement("th",null,l.t("name")),e.createElement("th",null,l.t("office")),e.createElement("th",null,l.t("position")),e.createElement("th",null,l.t("type")," "),e.createElement("th",null,"Email"),e.createElement("th",null,l.t("internal_id")),e.createElement("th",{className:"col_status"},l.t("status")),e.createElement("th",{className:"collapsing"},c.t("creator_id")),e.createElement("th",{className:"col_datetime"},l.t("date_created")),e.createElement("th",null))},renderTableFooterMobile:function(){},renderTableFooterDesktop:function(){return e.createElement("tr",null,this.renderBulkActionCheckbox(),e.createElement("th",{colSpan:7},e.createElement("strong",{style:{marginRight:"1em"}},c.t("choosed")," ",e.createElement("span",{ref:"count_item_choosed"},"0")," ",c.t("item").toLowerCase()),e.createElement("select",{onChange:this.selectActionChange,ref:"bulk_action_select",style:{verticalAlign:"middle",minHeight:"0 !important",height:30,marginRight:5},className:"ui small selection dropdown"},e.createElement("option",{value:""},c.t("bulk_action_empty_text")),(new d).getBulkActionList().map(function(t){return e.createElement("option",{key:t.code,value:t.code},t.text)})),e.createElement("a",{ref:"bulk_action_button",onClick:this.doAction,className:"ui teal button disabled",style:{verticalAlign:"middle",height:30,lineHeight:"30px",padding:"0 10px",fontSize:"1em"}},c.t("bulk_action_button"))),e.createElement("th",{colSpan:"6",className:"right aligned"},e.createElement(I,{ref:"dataexporter",filename:"employee-"+moment().format("DD-MM-YYYY")+".xlsx",total:this.state.total,formatter:A})))},render:function(){var t=this,n=(new d).getStatusList();return n.map(function(e,t){n[t].name=c.t("STATUS_"+e.text)}),e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(N,{link:"#employee",text:l.t("heading"),filters:this.filters,lang:l,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,currentpage:this.state.currentpage,savedFilterIdentifier:"employee",hidekeywordsearch:!0},i.hasById(i.EMPLOYEE_ADD)||i.hasById(i.EMPLOYEE_MANAGE)?e.createElement("a",{href:"#employee/add",ref:"btnadd",className:"mainbutton"},e.createElement("i",{className:"icon tc-plus-circle"}),e.createElement("span",{className:"hideonsmall"},l.t("add_button"))):"",i.hasById(i.EMPLOYEE_MANAGE)?e.createElement("a",{ref:"settinglist",href:"javascript:void(0)",onClick:this.importCost,className:"mytip_onpage hideonsmall"},e.createElement("i",{className:"icon tc-upload"}),e.createElement("span",{className:"hideonsmall"},l.t("import_group"))):"",i.hasById(i.EMPLOYEE_MANAGE)?e.createElement("div",{ref:"dropdown_importcost",className:"ui pointing top right dropdown"},e.createElement("span",{ref:"dropdownAddText",className:"text"}),e.createElement("div",{className:"menu"},e.createElement("a",{href:"#employee/import",ref:"setting-checkin",className:"item",title:l.t("import")},e.createElement("i",{className:"icon tc-upload"}),l.t("import")),e.createElement("a",{href:"#employeemore/import",ref:"btnimportmore",className:"item",title:l.t("import_profile")},e.createElement("i",{className:"icon tc-upload"}),l.t("import_profile")),e.createElement("a",{href:"#employee/importoffice",ref:"btnimportoffice",className:"item",title:l.t("import_office")},e.createElement("i",{className:"icon tc-upload"}),l.t("import_office")))):""),e.createElement(S,{ref:"sidebar",force_show:!1,keyword:this.filters.keyword,keywordlabel:c.t("filterKeywordLabel"),onSubmit:this.formSidebarSubmit},e.createElement("tr",null,e.createElement("td",null,l.t("office")),e.createElement("td",null,e.createElement(D,{className:"search selection fluid",ref:"filteroffice",inline:!1,value:this.filters.office_id}))),e.createElement("tr",null,e.createElement("td",null,l.t("department")),e.createElement("td",null,e.createElement(T,{className:"search selection fluid",ref:"filterdepartment",inline:!1,value:this.filters.department_id}))),e.createElement("tr",null,e.createElement("td",null,l.t("status")),e.createElement("td",null,e.createElement(M,{className:"search selection fluid",items:n,ref:"filterstatus",inline:!1,value:this.filters.status}))),e.createElement("tr",null,e.createElement("td",null,l.t("position")),e.createElement("td",null,e.createElement(x,{className:"search selection fluid",ref:"filterposition",inline:!1,value:this.filters.position_id}))),e.createElement("tr",null,e.createElement("td",null,l.t("type")),e.createElement("td",null,e.createElement(C,{className:"search selection fluid",ref:"filtertype",inline:!1,value:this.filters.type})))),e.createElement("div",{ref:"list_wrapper",style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{ref:"employeetable",id:"employeetable",style:{margin:0},className:r.tableclass()},e.createElement("thead",null,r.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.items.map(function(n,a){return e.createElement(E,{manage:t.state.permission,toggleButtonDoAction:t.toggleButtonDoAction,key:n.id,data:n})})),e.createElement("tfoot",null,r.isMobileScreen()?this.renderTableFooterMobile():this.renderTableFooterDesktop())))),e.createElement(P,{section:""}),e.createElement(L,{ref:"table_clone"}))}}),q=t.extend({run:function(){n.trigger("pageheader:activemenu","employee",!0),e.render(e.createElement(U,{key:this.getFragment()}),document.getElementById("container"))}});return q}),define("controllers/employeecontract/index",["react","basecontroller","eventbus","pref","role","helper","querystring","language/employeecontract","language/default","language/setting","models/employee","collections/employeecontract","models/department","collections/department","models/office","models/user","collections/office","components/mixin/listsearch","components/querytag","components/querytaglist","components/employeecontract/employee-detail-contract-item","components/headingfull","components/filterbar","components/filterbartoggle","components/floatpagination","components/select/office","components/select/department","components/select/position","components/select/employeetype","components/filtersidebar"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M){var S=e.createClass({displayName:"EmployeeContractList",mixins:[_],getInitialState:function(){return{total:"--",items:[],length:0,currentpage:o.get("page")}},filters:{keyword:null,office_id:null,department_id:null,position_id:null,type:null,date_started:null,date_ended:null},loadFilterQueryTagData:function(e){var t=null;switch(e){case"department_id":t=new m;break;case"office_id":t=new h;break;case"position_id":var a=(new d).getPosition(this.filters[e]),i=s.t(a.text);n.trigger("querytag:updatetext",{field:e,text:i});break;case"type":var r=(new d).getType(this.filters[e]),l=s.t("TYPE_"+r.text);n.trigger("querytag:updatetext",{field:e,text:l})}null!=t&&o.requestFilterQueryTag(t,this.filters,e)},loadDepartments:function(){var e=[];$.each(this.state.items,function(t,n){e.push(n.department_id)}),(new p).getFromIdList({ids:e,success:function(e){$.each(e.items,function(e,t){n.trigger("employeecontractitem:update",{type:"department",item:t})})}})},loadOffices:function(){var e=[];$.each(this.state.items,function(t,n){e.push(n.office_id)}),(new g).getFromIdList({ids:e,success:function(e){$.each(e.items,function(e,t){n.trigger("employeecontractitem:update",{type:"office",item:t})})}})},loadSinger:function(){$.each(this.state.items,function(e,t){new f({id:t.signer}).fetch({success:function(e,t){n.trigger("employeecontractitem:update",{type:"signer",item:t})}})})},_loadData:function(){var e=this;$("#body-loader").addClass("active");var t={company_id:a.get("cid"),limit:30,is_not_deleted:1,ignore_group:1,page:this.state.currentpage,is_not_exprire:1,office_id:this.filters.office_id,date_ended_less:moment().add(30,"days").unix(),department_id:this.filters.department_id,position_id:this.filters.position_id,type:this.filters.type,sort_by:"id",sort_type:"DESC",keyword:o.get("keyword")};(new u).fetch({data:t,success:function(t,n){e.setState(n)},complete:function(){$("#body-loader").removeClass("active")}})},remove:function(e){var t=this.state.items;t.map(function(n,a){n.id==e&&t.splice(a,1)}),this.setState({items:t,total:t.length})},updatelist:function(e,t){var n=this.state.items;switch(t){case"add":n.unshift(e);break;default:n.map(function(t,a){t.id==e.id&&(n[a]=e)})}this.setState({items:n})},checkPermisson:function(){var t=this,n=i.hasById(262),a=["btnadd","setting-checkin","manage"];a.length&&$.each(a,function(a,i){n||$(e.findDOMNode(t.refs[i])).hide()})},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),office_id:this.refs.filteroffice.val(),department_id:this.refs.filterdepartment.val(),position_id:this.refs.filterposition.val(),type:this.refs.filtertype.val()};this.doFilters(e)},componentWillUnmount:function(){n.off("employeecontract:delete",this.remove),n.off("employeecontract:edit",this.updatelist),n.off("employeecontract:add",this.updatelist)},componentWillMount:function(){o.initFilter(this.filters)},componentDidMount:function(){this._loadData(),this.checkPermisson(),n.on("employeecontract:delete",this.remove),n.on("employeecontract:edit",this.updatelist),n.on("employeecontract:add",this.updatelist),(new t).setTcScrollMinHeight()},showModal:function(){n.trigger("employeedetail:showaddmodal","contract")},componentDidUpdate:function(){this.loadSinger(),this.checkPermisson()},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,s.t("name")),e.createElement("th",null,s.t("number")),e.createElement("th",null,s.t("type")),e.createElement("th",null,s.t("salary_gross")),e.createElement("th",null,s.t("salary_net")),e.createElement("th",null,s.t("date_started")," "),e.createElement("th",null,s.t("signer")),e.createElement("th",null,s.t("File")))},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(b,{rootlink:"#setting/menu/id/other",roottext:c.t("company"),link:"#employeepointtopic",text:s.t("heading"),filters:this.filters,lang:s,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,hidekeywordsearch:!0,currentpage:this.state.currentpage}),e.createElement(N,{keywordlabel:l.t("filter_keyword_label")+":",usebarcode:!0,ref:"sidebar"}),e.createElement("div",{className:"ui segment tc-scrolled"},e.createElement("table",{ref:"employeetable",className:r.tableclass()},e.createElement("thead",null,this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.items.map(function(n,a){return e.createElement(E,{manage:t.state.permission,key:n.id,data:n})}))))))}}),O=t.extend({run:function(){n.trigger("pageheader:activemenu","employee",!0),n.trigger("sidebar:toggle","hide"),e.render(e.createElement(S,{key:this.getFragment()}),document.getElementById("container"))}});return O}),define("controllers/employeemore/import",["react","basecontroller","eventbus","components/employeemore/import"],function(e,t,n,a){var i=e.createClass({displayName:"EmployeeMoreImportController",componentDidMount:function(){},render:function(){return e.createElement(a,null)}}),r=t.extend({run:function(){n.trigger("pageheader:activemenu","employee",!0),e.render(e.createElement(i,null),document.getElementById("container"))}});return r}),define("controllers/employeepoint/add",["react","eventbus","basecontroller","components/employeepoint/add"],function(e,t,n,a){var i=n.extend({run:function(){t.trigger("pageheader:activemenu","employee",!0),e.render(e.createElement(a,null),document.getElementById("container"))}});return i}),define("controllers/employeepoint/detail",["react","backbone","eventbus","basecontroller","querystring","models/user","components/employeepoint/detail"],function(e,t,n,a,i,r,o){var s=a.extend({run:function(){n.trigger("pageheader:activemenu","employee",!0),$("#body-loader").addClass("active"),new r({id:i.get("id")}).fetch({nocache:!0,success:function(t){e.render(e.createElement(o,{data:t.toJSON()}),document.getElementById("container"))},error:function(){t.history.navigate("employeepoint",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})}});return s}),define("controllers/employeepoint/edit",["react","backbone","eventbus","basecontroller","querystring","models/employeepoint","components/employeepoint/edit"],function(e,t,n,a,i,r,o){var s=a.extend({run:function(){n.trigger("pageheader:activemenu","employee",!0),n.trigger("sidebar:toggle","hide"),$("#body-loader").addClass("active"),new r({id:i.get("id")}).fetch({nocache:!0,success:function(t){var n=t.toJSON();e.render(e.createElement(o,{data:n}),document.getElementById("container"))},error:function(){t.history.navigate("employeepoint",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})}});return s}),define("controllers/employeepoint/employee",["react","eventbus","basecontroller","pref","role","setting","helper","language/employeepoint","language/default","querystring","collections/employeepoint","collections/employeepointtopic","collections/employee","collections/office","models/employeepoint","models/employee","models/office","models/user","components/dropdown/employee","components/employeepoint/item","components/employeepoint/employee","components/mixin/listsearch","components/headingfull","components/filterbarfull","components/filterbartoggle","components/dropdown/office"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D){var T=e.createClass({displayName:"EmployeePointEmployeeController",getInitialState:function(){return{models:[],office:[],datestarted:moment([]).subtract(44,"days").unix(),dateended:moment().unix(),length:0,total:0,roleid:264,currentpage:1}},mixins:[b],filters:{keyword:null,office_id:null,date_started:null,date_ended:null,employee_id:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),employee_id:this.refs.filteremployee.val(),office_id:this.refs.filteroffice.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),this.doFilters(e)},loadFilterQueryTagData:function(e){var n=null,a=this.filters[e];switch(e){case"office_id":new g({id:a}).fetch({nocache:!1,success:function(n){t.trigger("querytag:updatetext",{field:e,text:n.attributes.name})}});break;case"employee_id":new _({id:a}).fetch({nocache:!1,success:function(n){t.trigger("querytag:updatetext",{field:e,text:n.attributes.fullname})}})}null!=n&&c.requestFilterQueryTag(n,this.filters,e)},_loadData:function(){$(".ui.modal").modal();var e=this;o.showLoader();var t="null";isNaN(parseInt(c.get("office_id")))||(t=parseInt(c.get("office_id")));var n=0;n=i.hasById(this.state.roleid)?c.get("employee_id"):a.get("uid");var r={company_id:a.get("cid"),limit:50,page:c.get("page")||1,keyword:c.get("keyword")||"",office_id:t,user_id:n,status:(new f).STATUS_ENABLE,ignore_group:1,is_not_deleted:1,is_not_deleted:1,sort_by:c.get("sort_by")||"id",sort_type:c.get("sort_type")||"DESC"};(new m).fetch({data:r,success:function(t){e.setState(t)},complete:function(){o.hideLoader()}})},checkPermisson:function(){var t=this,n=i.hasById(this.state.roleid),a=["btnadd","btntopic"];a.length&&$.each(a,function(a,i){n||$(e.findDOMNode(t.refs[i])).hide()})},componentWillMount:function(){c.initFilter(this.filters)},componentDidUpdate:function(){this.checkPermisson()},componentDidMount:function(){this._loadData(),this.checkPermisson(),this.initSortable()},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,s.t("office")),e.createElement("th",null,e.createElement("a",{
className:"sortable",href:"javascript:(void(0))","data-sortby":"user_id","data-nameorigin":s.t("employee")},s.t("employee"))),e.createElement("th",{style:{width:200}},s.t("totaltopic")),e.createElement("th",{className:"tcw50"},s.t("good")),e.createElement("th",{className:"tcw30"}),e.createElement("th",{className:"tcw50"},s.t("bad")),e.createElement("th",{className:"tcw30"}),e.createElement("th",null,s.t("good")," - ",s.t("bad")),e.createElement("th",null))},render:function(){return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(N,{link:"#employeepoint",text:s.t("heading"),subtext:s.t("heading_employee"),filters:this.filters,lang:s,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,hidekeywordsearch:!0,currentpage:this.state.currentpage},e.createElement(k,null)),e.createElement(w,{ref:"sidebar",showkeyword:!1,datepicker:!0,date_started:c.get("date_started"),date_ended:c.get("date_ended"),datepickerLabel:s.t("datecreated"),keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("tr",{className:"field"},e.createElement("td",null,e.createElement("label",null,s.t("office"),":")),e.createElement("td",null,e.createElement(D,{ref:"filteroffice",inline:!1,className:"search selection fluid",name:"office_id",value:this.filters.office_id}))),e.createElement("tr",{className:"field",ref:"filteremployeediv"},e.createElement("td",null,e.createElement("label",null,s.t("employee"),":")),e.createElement("td",null,e.createElement(v,{ref:"filteremployee",inline:!1,className:"search selection fluid",name:"employee_id",value:this.filters.employee_id})))),e.createElement("div",{style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{className:o.tableclass()},e.createElement("thead",null,o.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",{id:"employeelist"},this.state.models.map(function(t){return t=t.toJSON(),e.createElement(E,{ref:"employeelist",key:t.id+"_"+moment().unix(),data:t,datestarted:c.get("date_started"),dateended:c.get("date_ended")})}))))))}}),x=n.extend({run:function(){t.trigger("pageheader:activemenu","employee",!0),e.render(e.createElement(T,{key:this.getFragment()}),document.getElementById("container"))}});return x}),define("controllers/employeepoint/index",["react","eventbus","basecontroller","pref","helper","phonegap","role","setting","language/default","language/employeepoint","querystring","collections/employeepoint","collections/employeepointtopic","collections/user","collections/office","models/office","models/user","models/employeepoint","models/employeepointtopic","components/employeepoint/item","components/mixin/listsearch","components/headingfull","components/filterbarfull","components/filterbartoggle","components/dropdown/employee","components/dropdown/office","components/dropdown/employeepointstatus","components/dropdown/employeepointtopic","components/employeepoint/modal-export","components/zerodata","components/tabletheadfixedonscroll","components/table/idheadcell"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D,T,x,C,M,S,O){var I=e.createClass({displayName:"EmployeePointIndexController",getInitialState:function(){return{hmac:"",topic:[],models:[],length:0,total:0,limit:50,roleid:264,office_list:[],alreadyloaddata:!1,currentpage:d.get("page")}},mixins:[E],filters:{keyword:null,status:null,creator_id:null,employee_id:null,office_id:null,topic_id:null,date_started:null,date_ended:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),status:this.refs.filterstatus.val(),topic_id:this.refs.filtertopic.val(),employee_id:this.refs.filteremployee.val(),creator_id:this.refs.filtercreator.val(),office_id:this.refs.filteroffice.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),this.doFilters(e)},loadFilterQueryTagData:function(e){var n=null,a=this.filters[e];switch(e){case"status":var i=(new _).getStatus(a);t.trigger("querytag:updatetext",{field:e,text:i.text});break;case"office_id":new f({id:a}).fetch({nocache:!1,success:function(n){t.trigger("querytag:updatetext",{field:e,text:n.attributes.name})}});break;case"topic_id":new v({id:a}).fetch({nocache:!1,success:function(n){t.trigger("querytag:updatetext",{field:e,text:n.attributes.name})}});break;case"creator_id":new g({id:a}).fetch({nocache:!1,success:function(n){t.trigger("querytag:updatetext",{field:e,text:n.attributes.fullname})}});break;case"employee_id":new g({id:a}).fetch({nocache:!1,success:function(n){t.trigger("querytag:updatetext",{field:e,text:n.attributes.fullname})}})}null!=n&&d.requestFilterQueryTag(n,this.filters,e)},doCloneThead:function(){var t=e.findDOMNode(this.refs.employeepointtable);this.refs.table_clone.doClone(t).updateWidth()},_loadData:function(){$(".ui.modal").modal();var t=this;i.showContentLoader($(e.findDOMNode(t.refs.list_wrapper)));var n={company_id:a.get("cid"),limit:t.state.limit,page:d.get("page")||1,keyword:d.get("keyword")||"",status:d.get("status")||null,type:(new _).TYPE_OFFICE,office_id:d.get("office_id")||null,topic_id:d.get("topic_id")||null,creator_id:d.get("creator_id")||null,employee_id:d.get("employee_id")||null,date_started:d.get("date_started")||null,date_ended:d.get("date_ended")||null,is_not_deleted:1,sort_by:d.get("sort_by")||"id",sort_type:d.get("sort_type")||"DESC"};(new u).fetch({data:n,success:function(e){e.alreadyloaddata=!0,t.setState(e)},complete:function(){t.doCloneThead(),i.hideContentLoader($(e.findDOMNode(t.refs.list_wrapper)))}})},_export:function(t){var n=this,r=t.nativeEvent;r.preventDefault();var o=s.rooturl+$(e.findDOMNode(this.refs.export)).attr("data-url");if(""!=n.state.hmac){var l=n._getExportUrl(o,n.state.hmac);window.open(l,i.getWindowTarget())}else{var c={company_id:a.get("cid"),user_id:a.get("uid")};$.ajax({url:o,method:"GET",data:c,dataType:"json",success:function(e){if(""!=e.hmac){var t=n._getExportUrl(o,e.hmac);n.setState({hmac:e.hmac}),window.open(t,i.getWindowTarget())}}})}},_getDataQuery:function(e){var t=(e?1:d.get("page"),{company_id:a.get("cid"),limit:20,page:d.get("page")||1,keyword:d.get("keyword")||"",status:d.get("status")||null,office_id:d.get("office_id")||null,creator_id:d.get("creator_id")||null,date_started:d.get("date_started")||null,date_ended:d.get("date_ended")||null,is_not_deleted:1,sort_by:d.get("sort_by")||"id",sort_type:d.get("sort_type")||"DESC"});return!isNaN(d.get("status"))&&d.get("status")>0&&(t.staus=d.get("status")),!isNaN(d.get("employee_id"))&&d.get("employee_id")>0&&(t.employee_id=d.get("employee_id")),!isNaN(d.get("office_id"))&&d.get("office_id")>0&&(t.office_id=d.get("office_id")),!isNaN(d.get("creator_id"))&&d.get("creator_id")>0&&(t.creator_id=d.get("creator_id")),!isNaN(d.get("date_started"))&&d.get("date_started")>0&&(t.date_started=d.get("date_started")),!isNaN(d.get("date_ended"))&&d.get("date_ended")>0&&(t.date_ended=d.get("date_ended")),!isNaN(d.get("topic_id"))&&d.get("topic_id")>0&&(t.topic_id=d.get("topic_id")),t},_getExportUrl:function(e,t){var n=this._getDataQuery(!0),i="";return $.each(n,function(e,t){i+=(""!=i?"&":"")+e+"="+t}),i+=(""!=i?"&":"")+"user_id="+a.get("uid"),i+=(""!=i?"&":"")+"hmac="+encodeURIComponent(t),e+="?"+i},checkPermisson:function(){var t=this,n=o.hasById(this.state.roleid),a=o.hasById(o.EMPLOYEE_MANAGE),i=["btnadd","export"];a||$(e.findDOMNode(t.refs.filteremployeediv)).hide(),i.length&&$.each(i,function(a,i){n||$(e.findDOMNode(t.refs[i])).hide()})},renderData:function(){var e=[];this.state.models.length&&this.state.models.map(function(t,n){t=t.toJSON(),e.push(t.topic_id)}),e=$.unique(e),e.length&&(new m).getFromIdList({ids:e,success:function(e){var n=e.items;n.map(function(e,n){t.trigger("employeepointitem:render",{action:"topic",data:e})})}})},_unmountModal:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.modal_wrapper))},_mountModal:function(t,n){e.render(e.createElement(t,n),e.findDOMNode(this.refs.modal_wrapper))},exportSummary:function(t){var n=this;this._unmountModal();var i=s.rooturl+"v1/employeepoints/export",r=e.findDOMNode(n.refs.modal_wrapper);if(""!=n.state.hmac){var o=n._getExportUrl(i,n.state.hmac);e.render(e.createElement(C,{url:i,query:o}),r)}else{var l={company_id:a.get("cid"),user_id:a.get("uid")};$.ajax({url:i,method:"GET",data:l,dataType:"json",success:function(t){if(""!=t.hmac){n.setState({hmac:t.hmac});var a=n._getExportUrl(i,t.hmac);e.render(e.createElement(C,{url:i,query:a}),r)}}})}},componentDidUpdate:function(e,t){this.checkPermisson(),this.renderData()},componentWillMount:function(){d.initFilter(this.filters)},componentWillUnmount:function(){t.off("list:reload",this._loadData),t.off("employeepoint:modelhide",this._unmountModal),r.destroyPullToRefresh()},componentDidMount:function(){this._loadData(),this.checkPermisson(),this.initSortable(),t.on("employeepoint:modelhide",this._unmountModal),(new n).setTcScrollMinHeight(),t.on("list:reload",this._loadData);var a=(new h).fetchFromCache();this.setState({office_list:a.items}),r.enablePullToRefresh(this._loadData),i.isSmallScreen()||i.initMyTip($(e.findDOMNode(this)).find(".mytip"))},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,e.createElement(O,null)),e.createElement("th",null,c.t("employee")),e.createElement("th",null,c.t("office")),e.createElement("th",null,c.t("topic")),e.createElement("th",null,c.t("type_topic")),e.createElement("th",null,c.t("point")),e.createElement("th",{className:"col_status"},c.t("status")),e.createElement("th",null,c.t("creator")),e.createElement("th",{className:"col_datetime"},e.createElement("a",{className:"sortable",href:"javascript:(void(0))","data-sortby":"date_created","data-nameorigin":c.t("datecreated")},c.t("datecreated"))),e.createElement("th",{className:""}))},render:function(){var t=this,n=i.isZeroData("employeepoint",this.state.total);return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page",ref:"page"},e.createElement(b,{link:"#employeepoint",text:c.t("heading"),filters:this.filters,lang:c,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,showdatepicker:!0,savedFilterIdentifier:"employeepoint_index",currentpage:this.state.currentpage,hidekeywordsearch:"true"},e.createElement(w,null),e.createElement("a",{href:"#employeepoint/add",ref:"btnadd",title:l.t("insert"),className:"mytip mainbutton"},e.createElement("i",{className:"icon tc-plus-circle"}),e.createElement("span",{className:"hideonsmall"},c.t("add"))),e.createElement("a",{href:"#employeepoint/employee"},e.createElement("i",{className:"icon tc-piechart"}),e.createElement("span",{className:"hideonsmall"},c.t("view_employee"))),e.createElement("a",{href:"javascript:void(0)","data-url":"v1/employeepoints/export",className:"hideonsmall","data-value":"export",ref:"export",onClick:t.exportSummary},e.createElement("i",{className:"icon tc-download"}),e.createElement("span",{className:"hideonsmall"},c.t("exportexcel"))),o.hasById(o.COMPANY_SETTING)?e.createElement("a",{href:"#employeepointtopic",className:"hideonsmall"},e.createElement("i",{className:"icon tc-gear"}),e.createElement("span",{className:"hideonsmall"},c.t("settingtopic"))):""),n?"":e.createElement(N,{ref:"sidebar",showkeyword:!1,datepicker:!0,date_started:d.get("date_started"),date_ended:d.get("date_ended"),datepickerLabel:c.t("datecreated"),keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("tr",{className:"field"},e.createElement("td",null,e.createElement("label",null,c.t("status"),":")),e.createElement("td",null,e.createElement(T,{inline:!1,className:"search selection fluid",ref:"filterstatus",name:"status",value:this.filters.status}))),e.createElement("tr",{className:"field",ref:"filteremployeetr"},e.createElement("td",null,e.createElement("label",null,c.t("employee"),":")),e.createElement("td",null,e.createElement(k,{inline:!1,className:"search selection fluid",ref:"filteremployee",name:"employee_id",value:this.filters.employee_id}))),e.createElement("tr",{className:"field"},e.createElement("td",null,e.createElement("label",null,c.t("office"),":")),e.createElement("td",null,e.createElement(D,{inline:!1,className:"search selection fluid",ref:"filteroffice",name:"office_id",value:this.filters.office_id}))),e.createElement("tr",{className:"field"},e.createElement("td",null,e.createElement("label",null,c.t("topic"),":")),e.createElement("td",null,e.createElement(x,{inline:!1,className:"search selection fluid",ref:"filtertopic",name:"topic_id",value:this.filters.topic_id}))),e.createElement("tr",{className:"field"},e.createElement("td",null,e.createElement("label",null,c.t("creator"),":")),e.createElement("td",null,e.createElement(k,{inline:!1,className:"search selection fluid",ref:"filtercreator",name:"creator_id",value:this.filters.creator_id})))),e.createElement("div",{ref:"list_wrapper",style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},n?e.createElement(M,{alreadyloaddata:this.state.alreadyloaddata,icon:"employee",text:c.t("zerodata_text"),subtext:c.t("zerodata_subtext"),buttonlink:"#employeepoint/add"}):e.createElement("table",{className:i.tableclass(),ref:"employeepointtable"},e.createElement("thead",null,i.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){return n=n.toJSON(),e.createElement(y,{key:n.id,viewDetail:t._viewDetail,filter:t.doFilter,office_list:t.state.office_list,data:n})})))),e.createElement("div",{ref:"modal_wrapper"})),e.createElement(S,{ref:"table_clone"}))}}),A=n.extend({run:function(){t.trigger("pageheader:activemenu","employee",!0),e.render(e.createElement(I,{key:this.getFragment()}),document.getElementById("container"))}});return A}),define("controllers/employeepointtopic/add",["react","eventbus","basecontroller","components/employeepointtopic/add"],function(e,t,n,a){var i=n.extend({run:function(n){t.trigger("pageheader:activemenu","",!0),t.trigger("sidebar:toggle","hide"),e.render(e.createElement(a,null),document.getElementById("container"))}});return i}),define("controllers/employeepointtopic/edit",["react","backbone","eventbus","basecontroller","querystring","models/employeepointtopic","components/employeepointtopic/edit"],function(e,t,n,a,i,r,o){var s=a.extend({run:function(){n.trigger("pageheader:activemenu","",!0),n.trigger("sidebar:toggle","hide"),$("#body-loader").addClass("active"),new r({id:i.get("id")}).fetch({nocache:!0,success:function(t){e.render(e.createElement(o,{data:t.toJSON()}),document.getElementById("container"))},error:function(){t.history.navigate("employeepoint",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})}});return s}),define("controllers/employeepointtopic/index",["react","eventbus","basecontroller","pref","setting","helper","phonegap","language/employeepointtopic","language/default","language/setting","querystring","collections/employeepointtopic","collections/user","models/employeepointtopic","models/user","components/employeepointtopic/item","components/mixin/listsearch","components/headingfull","components/filterbarfull","components/filterbartoggle","components/dropdown/employeepointtopicstatus","components/dropdown/employeepointtopictype","components/dropdown/employee","components/zerodata","components/table/idheadcell","components/tabletheadfixedonscroll"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D){var T=e.createClass({displayName:"EmployeePointTopicIndexController",getInitialState:function(){return{models:[],length:0,total:0,alreadyloaddata:!1,currentpage:d.get("page")}},mixins:[g],filters:{keyword:null,type:null,status:null,creator_id:null,sort_by:null,sort_type:null},loadFilterQueryTagData:function(e){var n=null,a=this.filters[e],i="name";switch(e){case"type":var r=(new p).getType(a);t.trigger("querytag:updatetext",{field:e,text:r.text});break;case"status":var o=(new p).getStatus(a);t.trigger("querytag:updatetext",{field:e,text:o.text});break;case"creator_id":n=new h,i="fullname"}null!=n&&d.requestFilterQueryTag(n,this.filters,e,i)},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),status:this.refs.filter_status.val(),type:this.refs.filter_type.val(),creator_id:this.refs.filter_creator.val()};this.doFilters(e)},doCloneThead:function(){var t=e.findDOMNode(this.refs.employeepointtopictable);this.refs.table_clone.doClone(t).updateWidth()},_loadData:function(){$(".ui.modal").modal();var t=this;r.showContentLoader($(e.findDOMNode(t.refs.list_wrapper)));var n={company_id:a.get("cid"),limit:20,page:d.get("page")||1,keyword:d.get("keyword")||"",status:d.get("status")||null,type:d.get("type")||null,store_id:d.get("store_id")||null,creator_id:d.get("creator_id")||null,date_started:d.get("date_started")||null,date_ended:d.get("date_ended")||null,is_not_deleted:1,sort_by:d.get("sort_by")||"id",sort_type:d.get("sort_type")||"DESC"};(new u).fetch({data:n,success:function(e){e.alreadyloaddata=!0,t.setState(e)},complete:function(){r.hideContentLoader($(e.findDOMNode(t.refs.list_wrapper))),t.doCloneThead()}})},componentDidUpdate:function(){t.trigger("listsearch:updatesize")},componentWillMount:function(){d.initFilter(this.filters)},componentWillUnmount:function(){o.destroyPullToRefresh()},componentDidMount:function(){this._loadData(),this.initSortable(),(new n).setTcScrollMinHeight(),o.enablePullToRefresh(this._loadData),r.isSmallScreen()||r.initMyTip($(e.findDOMNode(this)).find(".mytip"))},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,e.createElement(k,null)),e.createElement("th",null,e.createElement("a",{href:"",className:"sortable","data-sortby":"name"},s.t("name"))),e.createElement("th",{width:"100"},s.t("type")),e.createElement("th",{className:"center aligned"},e.createElement("a",{href:"#",className:"sortable","data-sortby":"display_order"},s.t("displayorder"))),e.createElement("th",{className:"center aligned"},e.createElement("a",{href:"",className:"sortable","data-sortby":"point"},s.t("sort_point"))),e.createElement("th",{className:"col_status"},s.t("status")),e.createElement("th",null,l.t("creator_id")),e.createElement("th",{className:"col_datetime"},l.t("date_created")),e.createElement("th",{className:"col_action_1button"}))},render:function(){var t=this,n=r.isZeroData("employeepointtopic",this.state.total);return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(_,{rootlink:"#setting/menu/id/other",roottext:c.t("company"),link:"#employeepointtopic",text:s.t("heading"),filters:this.filters,lang:s,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,hidekeywordsearch:!0,currentpage:this.state.currentpage},e.createElement(y,null),e.createElement("a",{href:"#employeepointtopic/add",title:s.t("insert_button"),className:"mytip mainbutton"},e.createElement("i",{className:"icon tc-plus-circle"}),e.createElement("span",{className:"hideonsmall"},s.t("insert_button")))),n?null:e.createElement(v,{ref:"sidebar",keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,s.t("status")+":")),e.createElement("td",null,e.createElement(E,{className:"search selection fluid",inline:!1,name:"status",ref:"filter_status",value:this.filters.status}))),e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,s.t("type")+":")),e.createElement("td",null,e.createElement(b,{className:"search selection fluid",inline:!1,name:"type",ref:"filter_type",value:this.filters.type}))),e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,s.t("creator")+":")),e.createElement("td",null,e.createElement(N,{className:"search selection fluid",inline:!1,name:"creator_id",ref:"filter_creator",value:this.filters.creator_id})))),e.createElement("div",{ref:"list_wrapper",className:"ui segment tc-scrolled"},n?e.createElement(w,{alreadyloaddata:this.state.alreadyloaddata,text:s.t("zerodata_text"),subtext:s.t("zerodata_subtext"),buttonlink:"#employeepointtopic/add"}):e.createElement("table",{className:r.tableclass(),ref:"employeepointtopictable"},e.createElement("thead",null,r.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){return n=n.toJSON(),e.createElement(f,{key:n.id,viewDetail:t._viewDetail,filter:t.doFilter,data:n})}))))),e.createElement(D,{ref:"table_clone"}))}}),x=n.extend({run:function(){t.trigger("pageheader:activemenu","",!0),t.trigger("sidebar:toggle","hide"),e.render(e.createElement(T,{key:this.getFragment()}),document.getElementById("container"))}});return x}),define("controllers/file/detail",["react","basecontroller","eventbus","language/file","models/file"],function(e,t,n,a,i){var r=e.createClass({displayName:"FileDetailController",getInitialState:function(){return{extension:""}},loadData:function(){var e=this;new i({id:this.props.fileId}).fetch({success:function(t){e.setState(t.toJSON())}})},componentDidMount:function(){this.loadData();var e=this.getDOMNode();setTimeout(function(){var t=$("#filepreview",e).parent().innerHeight(),n=$("#filemetabar").outerHeight(!0)+5;$("#file-preview-wrapper",e).height(t-n)},1e3)},render:function(){return e.createElement("div",{style:{height:window.innerHeight-$("#header").outerHeight(!0)}},e.createElement("link",{type:"text/css",rel:"stylesheet",href:"css/filedetail.css"}),e.createElement("div",{id:"filepreview",style:{height:"100%",overflowY:"auto"}},e.createElement("div",{id:"filemetabar",style:{backgroundColor:"#d0d0d0"}},e.createElement("div",{className:"pull-left",style:{padding:10}},e.createElement("div",{className:"ui breadcrumb"},e.createElement("a",{href:"/",className:"section"},a.t("home")),e.createElement("div",{className:"divider"}," | "),e.createElement("a",{href:"#file",className:"section"},a.t("heading")),e.createElement("div",{className:"divider"}," | "),e.createElement("div",{className:"active section"},this.state.title))),e.createElement("div",{className:"pull-right",style:{padding:10}},e.createElement("a",{href:"",className:"ui mini blue button"},e.createElement("i",{className:"icon tc-download"}),a.t("download")," (.ZIP - 3.32 MB)")),e.createElement("div",{style:{clear:"both"}})),e.createElement("div",{id:"file-preview-wrapper"})))}}),o=t.extend({run:function(t){n.trigger("pageheader:activemenu","",!0),e.render(e.createElement(r,{fileId:t.id}),document.getElementById("container"))}});return o}),define("controllers/file/index",["react","basecontroller","eventbus","querystring","components/file/list"],function(e,t,n,a,i){var r=e.createClass({displayName:"FileController",render:function(){return e.createElement(i,{did:this.props.did})}}),o=t.extend({run:function(){n.trigger("pageheader:activemenu","",!0);var t=a.get("did");e.render(e.createElement(r,{key:this.getFragment(),did:t}),document.getElementById("container"))}});return o}),define("controllers/group/add",["react","pref","eventbus","basecontroller","components/group/add"],function(e,t,n,a,i){var r=e.createClass({displayName:"GroupAddController",componentDidMount:function(){n.trigger("sidebar:toggle","hide")},render:function(){return e.createElement(i,null)}}),o=a.extend({run:function(){n.trigger("pageheader:activemenu","",!0),e.render(e.createElement(r,null),document.getElementById("container"))}});return o}),define("controllers/group/edit",["react","basecontroller","eventbus","querystring","components/group/edit","models/group"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"GroupEditController",componentDidMount:function(){var t=this;n.trigger("sidebar:toggle","hide"),$("#body-loader").addClass("active");var o=a.get("id")||0;new r({id:o}).fetch({nocache:!0,success:function(n){e.render(e.createElement(i,{data:n.toJSON()}),t.getDOMNode())},error:function(){Backbone.history.navigate("group",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})},render:function(){return e.createElement("div",{ref:"container"})}}),s=t.extend({run:function(){n.trigger("pageheader:activemenu","",!0),e.render(e.createElement(o,null),document.getElementById("container"))}});return s}),define("controllers/group/index",["react","pref","eventbus","querystring","role","helper","phonegap","basecontroller","language/group","language/setting","language/default","components/group/item","components/mixin/listsearch","components/headingfull","components/filterbarfull","components/filterbartoggle","components/dropdown/employee","components/popupemployeelist","collections/user","models/user","collections/group","models/group","components/zerodata","components/table/idheadcell","components/tabletheadfixedonscroll"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k){var D=e.createClass({displayName:"GroupController",isload:!0,mixins:[m],getInitialState:function(){return{items:[],length:0,total:0,alreadyloaddata:!1,currentpage:a.get("page")}},filters:{creator_id:null,keyword:null,code:null,status:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),creator_id:this.refs.filtercreator.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),this.doFilters(e)},loadFilterQueryTagData:function(e){var t=null,i="name";switch(e){case"status":var r=(new CustomerStatusModel).getStatusName(this.filters[e]);n.trigger("querytag:updatetext",{field:e,text:r.text});break;case"creator_id":t=new y,i="fullname"}null!=t&&a.requestFilterQueryTag(t,this.filters,e,i)},doCloneThead:function(){var t=e.findDOMNode(this.refs.grouptable);this.refs.table_clone.doClone(t).updateWidth()},loadData:function(){var t=this;if(t.isload){var t=this;r.showContentLoader($(e.findDOMNode(this.refs.grouplist)));var n=t.getDataQuery(!1);(new E).fetch({data:n,success:function(e,n){n.alreadyloaddata=!0,t.setState(n)},complete:function(){r.hideContentLoader($(e.findDOMNode(t.refs.grouplist))),t.doCloneThead()}})}},getDataQuery:function(){var e=50,n={company_id:t.get("cid"),limit:e,page:this.state.currentpage,code:this.filters.code,status:this.filters.status,keyword:this.filters.keyword,date_start:this.filters.date_started,date_end:this.filters.date_ended,sort_by:this.filters.sort_by,sort_type:this.filters.sort_type};return!isNaN(a.get("creator_id"))&&a.get("creator_id")>0&&(n.creator_id=a.get("creator_id")),n},filterEmployeeHanlder:function(e){this.doFilter("creator_id",e)},onFilterStatus:function(e){a.set("page",1),a.set("status",e),this.loadData()},filterStatus:function(t){$(e.findDOMNode(this.refs["filter-status"])).dropdown("set selected",t)},openPopupEmployeeListHandler:function(t){e.render(e.createElement(_,{ids:t.user_id_list}),e.findDOMNode(this.refs.employeelist))},unmountOpenPopupEmployeeListHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.employeelist))},componentDidUpdate:function(){n.trigger("listsearch:updatesize")},componentWillUnmount:function(){n.off("group:listemployees",this.openPopupEmployeeListHandler),n.off("group:unmountlistemployees",this.unmountOpenPopupEmployeeListHandler),o.destroyPullToRefresh()},componentWillMount:function(){a.initFilter(this.filters)},componentDidMount:function(){this.loadData(),this.initSortable(),(new s).setTcScrollMinHeight(),n.on("group:listemployees",this.openPopupEmployeeListHandler),n.on("group:unmountlistemployees",this.unmountOpenPopupEmployeeListHandler),o.enablePullToRefresh(this.loadData),r.isSmallScreen()||r.initMyTip($(e.findDOMNode(this)).find(".mytip"))},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,e.createElement(w,null)),e.createElement("th",{className:"col_color"},l.t("color")),e.createElement("th",null,l.t("name")),e.createElement("th",{width:"80"},l.t("code")),e.createElement("th",null,l.t("description")),e.createElement("th",{width:"200",className:"center aligned"},l.t("count_user")),e.createElement("th",null,d.t("creator_id")),e.createElement("th",{className:"col_datetime"},l.t("date_created")),i.hasById(231)?e.createElement("th",null):"")},render:function(){var t,n=r.isZeroData("group",this.state.total),o=this;return 0==o.state.total&&(t=e.createElement("tr",{className:"row-emptyemail"},e.createElement("td",{colSpan:"8"},e.createElement("div",{className:"center aligned"},l.t("error_not_found"))))),e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(p,{rootlink:"#setting/menu/id/other",roottext:c.t("company"),link:"#group",text:l.t("heading"),filters:this.filters,lang:l,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,currentpage:this.state.currentpage,hidekeywordsearch:!0},e.createElement(f,null),i.hasById(231)?e.createElement("a",{ref:"btnadd",href:"#group/add",title:l.t("insert_button"),className:"mytip mainbutton"},e.createElement("i",{className:"icon tc-plus-circle"}),e.createElement("span",{className:"hideonsmall"},l.t("insert_button"))):""),n?null:e.createElement(h,{ref:"sidebar",datepicker:!0,date_started:a.get("date_started"),date_ended:a.get("date_ended"),keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("creator")+":")),e.createElement("td",null,e.createElement(g,{ref:"filtercreator",name:"creator_id",value:this.filters.creator_id,className:"fluid"})))),e.createElement("div",{ref:"grouplist",className:"ui segment tctabledata tc-scrolled"},n?e.createElement(N,{alreadyloaddata:this.state.alreadyloaddata,icon:"contact",text:l.t("zerodata_text"),subtext:l.t("zerodata_subtext"),buttonlink:"#group/add"}):e.createElement("table",{className:r.tableclass(),ref:"grouptable"},e.createElement("thead",null,r.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.total>0?this.state.items.map(function(t,n){return e.createElement(u,{ordering:n+1,key:t.id,data:t,onFilterEmployee:o.filterEmployeeHanlder,filterEmployee:o.filterEmployee,filterStatus:o.filterStatus})}):t)))),e.createElement("div",{ref:"employeelist"}),e.createElement(k,{ref:"table_clone"}))}}),T=s.extend({run:function(){n.trigger("pageheader:activemenu","",!0),e.render(e.createElement(D,{key:this.getFragment()}),document.getElementById("container"))}});return T}),define("controllers/hrmleave/add",["react","pref","basecontroller","eventbus","querystring","models/hrmleavesetting","components/hrmleave/add"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"HrmLeaveAddController",componentDidMount:function(){var n=this,a={company_id:t.get("cid")};(new r).getSetting(a,function(t){e.render(e.createElement(o,{setting:t}),e.findDOMNode(n.refs.container))})},render:function(){return e.createElement("div",{ref:"container"})}}),l=n.extend({run:function(){a.trigger("pageheader:activemenu","",!0),e.render(e.createElement(s,null),document.getElementById("container"))}});return l}),define("controllers/hrmleave/index",["react","pref","basecontroller","eventbus","querystring","helper","language/hrmleave","components/hrmleave/list","models/hrmleavesetting"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"HrmLeaveController",componentDidMount:function(){var n=this,a={company_id:t.get("cid")};(new l).getSetting(a,function(t){e.render(e.createElement(s,{setting:t}),e.findDOMNode(n.refs.container))})},render:function(){return e.createElement("div",{ref:"container"})}}),d=n.extend({run:function(){a.trigger("pageheader:activemenu","employee",!0),
r.setTitle(o.t("heading")),e.render(e.createElement(c,{key:this.getFragment()}),document.getElementById("container"))}});return d}),define("controllers/hrmleave/setting",["react","basecontroller","pref","eventbus","language/company","querystring","helper","components/hrmleave/setting","models/hrmleavesetting"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"SettingController",getInitialState:function(){return{setting:{id:0,hour_per_day_off:"",minimum_duration:1,default_reviewer:[0,0,0]}}},componentDidMount:function(){this.loadData()},loadData:function(){var e=this,t={company_id:n.get("cid")};(new l).getSetting(t,function(t){e.setState({setting:t})})},render:function(){var t=this;return e.createElement(s,{setting:t.state.setting})}}),d=t.extend({run:function(){a.trigger("pageheader:activemenu","",!0),e.render(e.createElement(c,null),document.getElementById("container"))}});return d}),define("language/index",["baselanguage"],function(e){var t={vn:{dashboard:"Dashboard",blog_header:"Blog mới nhất",intro_changelog:"Các thay đổi trong phiên bản mới",view_all_blog:"Xem thêm",activity_heading:"Hoạt động mới nhất của công ty",welcome_text_1:"Chào",welcome_text_2:", bạn muốn thực hiện thao tác gì?",group_inventory:"Nhà kho",inventory_view:"Xem tồn kho",inventory_add_in:"Tạo nhập kho",inventory_add_po:"Mua hàng (PO)",group_store:"Cửa hàng",group_sale:"Đơn hàng",sale_add_order:"Tạo đơn hàng",sale_view_order:"Xem đơn hàng",sale_report:"Xem thống kê",store_view_cashflow:"Xem phiếu thu chi",store_add_income:"Tạo phiếu thu",store_add_expense:"Tạo phiếu chi",group_customer:"Khách hàng",customer_view:"Xem danh sách",customer_add:"Thêm khách hàng",customer_add_point:"Tích lũy điểm",store_checkin:"Chấm công",store_send_mail:"Gửi thư",store_project:"Xem dự án"},en:{dashboard:"Dashboard",blog_header:"Blog mới nhất",intro_changelog:"Các thay đổi trong phiên bản mới",view_all_blog:"Xem thêm",activity_heading:"Hoạt động mới nhất của công ty",welcome_text_1:"Chào",welcome_text_2:", bạn muốn thực hiện thao tác gì?",group_inventory:"Nhà kho",inventory_view:"Xem tồn kho",inventory_add_in:"Tạo nhập kho",inventory_add_po:"Mua hàng (PO)",group_store:"Cửa hàng",group_sale:"Đơn hàng",sale_add_order:"Tạo đơn hàng",sale_view_order:"Xem đơn hàng",sale_report:"Xem thống kê",store_view_cashflow:"Xem phiếu thu chi",store_add_income:"Tạo phiếu thu",store_add_expense:"Tạo phiếu chi",group_customer:"Khách hàng",customer_view:"Xem danh sách",customer_add:"Thêm khách hàng",customer_add_point:"Tích lũy điểm",store_checkin:"Chấm công",store_send_mail:"Gửi thư",store_project:"Xem dự án"}};return new e({lang:t})}),define("controllers/index/index",["react","backbone","basecontroller","helper","role","language/index","components/headingfull","initquerystring","eventbus","pref"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"DashboardController",getInitialState:function(){return{}},componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidMount:function(){l.trigger("pageheader:setviewtitle",c.get("company")),a.initMyTip($(e.findDOMNode(this.refs.quickmenu_add)),"","right")},renderForHrm:function(){return e.createElement("div",null,e.createElement("div",{className:"ui stackable four column grid homepagesteps hideonsmall"},e.createElement("div",{className:"centered column"},e.createElement("div",{className:"step"},e.createElement("div",{className:"image"},e.createElement("img",{src:"/imgs/dashboard/store.png"})),e.createElement("h2",null,r.t("group_store"))))),e.createElement("div",{className:"ui four centered column grid homepageprogress hideonsmall"},e.createElement("div",{className:"column"},e.createElement("span",{className:"ui teal empty circular label"}),e.createElement("span",{className:"stepline"}))),e.createElement("div",{className:"ui stackable four centered column grid homepagesteps"},e.createElement("div",{className:"center aligned column"},e.createElement("div",{className:"step"},e.createElement("div",{className:"image onlyonsmall"},e.createElement("img",{src:"/imgs/dashboard/store.png"})),e.createElement("h2",{className:"onlyonsmall"},r.t("group_store")),e.createElement("div",{className:"stepbutton"},e.createElement("a",{className:"ui fluid labeled teal icon button",href:"#checkin/add"},e.createElement("i",{className:"icon tc-plus"})," ",e.createElement("span",null,r.t("store_checkin"))),e.createElement("a",{className:"ui fluid labeled grey icon button",href:"#mail"},e.createElement("i",{className:"icon tc-mail"})," ",e.createElement("span",null,r.t("store_send_mail"))),e.createElement("a",{className:"ui fluid labeled grey icon button",href:"#project"},e.createElement("i",{className:"icon tc-briefcase"})," ",e.createElement("span",null,r.t("store_project"))))))))},render:function(){return e.createElement("div",{id:"homepage",className:"ui segments"},e.createElement("h1",null,r.t("welcome_text_1")," ",e.createElement("em",null,c.get("fullname")),r.t("welcome_text_2")),this.renderForHrm())}}),u=n.extend({run:function(){l.trigger("pageheader:activemenu","",!0);var n=s.get("from");"telegram"==n?t.history.navigate("#user/logout",{trigger:!0}):e.render(e.createElement(d,null),document.getElementById("container"))}});return u}),define("controllers/mail/add",["backbone","react","helper","basecontroller","eventbus","language/mail","components/heading","components/mail/desktop/compose","components/mail/mobile/compose"],function(e,t,n,a,i,r,o,s,l){var c=t.createClass({displayName:"MailAddController",render:function(){var e=!1;return n.isSmallScreen()&&(e=!0),t.createElement("div",{className:"ui segments"},t.createElement(o,{link:"#mail",text:r.t("inbox"),subtext:r.t("compose")}),t.createElement("div",{className:"ui segment"},t.createElement("div",{className:"ui form"},t.createElement("div",{className:"fields"},t.createElement("div",{className:"field four wide hideonsmall"},t.createElement("h4",null,t.createElement("strong",null,r.t("compose_info"))),t.createElement("p",null)),t.createElement("div",{className:"field twelve wide"},e?t.createElement(l,{popup:!1}):t.createElement(s,{popup:!1}))))))}}),d=a.extend({run:function(){i.trigger("pageheader:activemenu","mail",!0),t.render(t.createElement(c,null),document.getElementById("container"))}});return d}),define("controllers/mail/index",["backbone","react","helper","basecontroller","eventbus","components/mail/desktop/index","components/mail/mobile/index"],function(e,t,n,a,i,r,o){var s=t.createClass({displayName:"MailController",componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidMount:function(){},render:function(){var e=!1;return n.isSmallScreen()&&(e=!0),t.createElement("div",null,e?t.createElement(o,null):t.createElement(r,null))}}),l=a.extend({run:function(){i.trigger("pageheader:activemenu","mail",!0),t.render(t.createElement(s,null),document.getElementById("container"))}});return l}),define("controllers/mail/manage",["react","pref","querystring","helper","basecontroller","eventbus","phonegap","role","language/setting","language/mail","language/default","components/mixin/listsearch","components/headingfull","components/querytaglist","components/filterbar","components/filterbartoggle","components/mail/manage/item","components/mail/manage/detail","collections/mailmanage","models/user","components/zerodata"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E){var b=e.createClass({displayName:"MailManageController",mixins:[u],getInitialState:function(){return{items:[],length:0,total:0,alreadyloaddata:!1,currentpage:n.get("page")}},filters:{keyword:null,creator_id:null,sort_by:null,sort_type:null},loadFilterQueryTagData:function(e){var t=null,a="name";switch(e){case"creator_id":t=new y,a="fullname"}null!=t&&n.requestFilterQueryTag(t,this.filters,e,a)},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword()};this.doFilters(e)},loadData:function(){var e=this;(new v).fetch({data:{company_id:t.get("cid"),creator_id:this.filters.creator_id||"",page:this.state.currentpage,keyword:n.get("keyword")||"",sort_by:this.filters.sort_by,sort_type:this.filters.sort_type},success:function(t,n){n.alreadyloaddata=!0,e.setState(n)},error:function(){var t=$.extend({},e.getInitialState(),{alreadyloaddata:!0});e.setState(t)}})},openDetailHandler:function(t){e.render(e.createElement(_,{key:moment().valueOf(),id:t.id}),e.findDOMNode(this.refs.modal_wrapper))},unmountDetailHandler:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs.modal_wrapper))},removeItem:function(e){var t=this.state.items.filter(function(t){return t.id!=e.id});this.setState({items:t,total:this.state.total-1})},componentDidUpdate:function(){r.trigger("listsearch:updatesize")},componentWillUnmount:function(){o.destroyPullToRefresh()},componentWillMount:function(){n.initFilter(this.filters)},componentDidMount:function(){this.loadData(),this.initSortable(),(new i).setTcScrollMinHeight(),o.enablePullToRefresh(this.loadData)},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",{width:"50"},"ID"),e.createElement("th",{className:"tcw50"},c.t("sender")),e.createElement("th",null,c.t("subject")),e.createElement("th",null,c.t("message")),e.createElement("th",{width:"30"}),e.createElement("th",{width:"100"},e.createElement("a",{href:"#",className:"sortable","data-sortby":"date_created"},c.t("date_created"))),e.createElement("th",{width:"30"}))},render:function(){var t=this,n=a.isZeroData("mail/manage",this.state.total);return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(m,{rootlink:"#mail",roottext:c.t("inbox"),link:"#mail/manage",text:c.t("heading_manage"),filters:this.filters,lang:c,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,hidekeywordsearch:!0,currentpage:this.state.currentpage},e.createElement(f,null)),n?null:e.createElement(h,{keywordlabel:d.t("filter_keyword_label")+":",usebarcode:!0,ref:"sidebar",keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit}),n?e.createElement(E,{alreadyloaddata:this.state.alreadyloaddata,icon:"mails",subtext:"",buttontext:""}):e.createElement("div",{ref:"tctabledata",className:"ui segment tctabledata tc-scrolled"},e.createElement("table",{className:a.tableclass(),ref:"crmemailtable"},e.createElement("thead",null,a.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.items.map(function(n,a){return e.createElement(g,{doFilter:t.doFilter,removeItem:t.removeItem,openDetail:t.openDetailHandler,key:n.id,data:n})})))),e.createElement("div",{ref:"modal_wrapper"})))}}),N=i.extend({run:function(){r.trigger("pageheader:activemenu","mail",!0),e.render(e.createElement(b,{key:this.getFragment()}),document.getElementById("container"))}});return N}),define("controllers/notify/index",["react","pref","eventbus","basecontroller","querystring","helper","language/notify","components/mixin/listsearch","components/headingfull","components/notify/widgetitem","collections/notify","models/notify","models/notifycount"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"NotifyController",init:!0,mixins:[s],getInitialState:function(){return{total:0,items:[],length:0,hmac:"",currentpage:i.get("page")}},filters:{sort_by:null,sort_type:null},loadFilterQueryTagData:function(e){var t=null,a="name",i=null;null!=t?Querystring.requestFilterQueryTag(t,this.filters,e,a):null!=i&&n.trigger("querytag:updatetext",{field:e,text:i.text})},resetNotificationHandler:function(e){e.preventDefault(),n.trigger("notifywidget:hide"),(new m).resetCount({type:"notify",success:function(e){r.showSuccess(o.t("clearSuccess")),n.trigger("notifypageheader:clearbadgenumber")},error:function(){alert("error_reset_notification")}})},loadData:function(){var e=this;(new d).fetch({data:{company_id:t.get("cid"),owner_id:t.get("uid"),page:i.get("page")},success:function(t,n){e.setState(n)},complete:function(){}})},componentDidMount:function(){var e=this;e.init=!1,e.loadData()},render:function(){var t=this;return e.createElement("div",{id:"notifylist",className:"ui segments"},e.createElement("div",{className:"ui stackable two column"},e.createElement("div",{className:"sixteen wide column",style:{paddingRight:0,borderRight:"1px solid #eee"}},e.createElement("div",{id:"page",className:"notificationpage"},e.createElement(l,{link:"#notify",text:o.t("heading"),filters:this.filters,lang:o,loadFilterQueryTagData:this.loadFilterQueryTagData,hidekeywordsearch:!0,hidefiltertoggle:!0,total:this.state.total,limit:this.state.limit,currentpage:this.state.currentpage},e.createElement("a",{className:"item",href:"#profile/notification",ref:"configbutton"},e.createElement("i",{className:"tc-setting icon"}),o.t("setting")),e.createElement("a",{onClick:this.resetNotificationHandler,className:"item",href:"#",ref:"resetbutton"},e.createElement("i",{className:"tc-tick icon"}),o.t("tick_read_all"))),e.createElement("div",{id:"notifywidget"},t.init?e.createElement("div",{className:"ui active loader",ref:"loader",style:{marginTop:50}}):e.createElement("ul",null,this.state.items.length>0?this.state.items.map(function(t,n){return e.createElement(c,{key:t.id,data:t})}):e.createElement("div",{className:"empty-listing"},e.createElement("i",{className:"tc-bell"}),e.createElement("br",null),o.t("empty_list"))))))))}}),h=a.extend({run:function(){n.trigger("pageheader:activemenu","",!0),e.render(e.createElement(p,{key:this.getFragment()}),document.getElementById("container"))}});return h}),define("controllers/office/index",["react","eventbus","basecontroller","role","pref","setting","helper","phonegap","language/office","language/setting","language/default","querystring","collections/office","models/office","components/mixin/listsearch","components/headingfull","components/filterbarfull","components/filterbartoggle","components/office/item","components/office/form-modal-add","components/office/form-modal-edit","components/table/idheadcell","components/tabletheadfixedonscroll"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N){var w=e.createClass({displayName:"OfficeController",mixins:[h],getInitialState:function(){return{hmac:"",items:[],length:0,total:0,currentpage:u.get("page")}},filters:{keyword:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword()};this.doFilters(e)},loadFilterQueryTagData:function(e){var n=null,a="name";switch(e){case"status":var i=(new CustomerStatusModel).getStatusName(this.filters[e]);t.trigger("querytag:updatetext",{field:e,text:i.text});break;case"creator_id":n=new UserModel,a="fullname"}null!=n&&u.requestFilterQueryTag(n,this.filters,e,a)},doCloneThead:function(){var t=e.findDOMNode(this.refs.officetable);this.refs.table_clone.doClone(t).updateWidth()},_loadData:function(){var t=this;o.showContentLoader($(e.findDOMNode(this.refs.grouplist)));var n={company_id:i.get("cid"),limit:50,page:u.get("page")||1,keyword:u.get("keyword")||"",is_not_deleted:1,sort_by:this.filters.sort_by||"id",sort_type:this.filters.sort_type||"DESC"};(new m).fetch({data:n,success:function(e,n){t.setState(n)},complete:function(){o.hideContentLoader($(e.findDOMNode(t.refs.grouplist))),t.doCloneThead()}})},_filterStatus:function(e){$(this.refs["filter-status"].getDOMNode()).dropdown("set selected",e)},_search:function(e){u.set("page",1),u.set("keyword",e),this._loadData()},_sort:function(e){this._resetTextSort();var t=e.target,n=$(t).data("nameorigin"),a=$(t).data("name");u.set("sort_by",a),"DESC"==u.get("sort_type")?(u.set("sort_type","ASC"),$(t).html(n+" <i class='tc tc-top'></i>")):(u.set("sort_type","DESC"),$(t).html(n+" <i class='tc tc-bottom'></i>")),this._loadData()},_resetTextSort:function(){$(".sortable",this.getDOMNode()).each(function(e,t){$(t).html($(t).data("nameorigin"))}),$(this.refs["filter-status"].getDOMNode()).dropdown("clear")},_resetQuery:function(t){t.preventDefault(),this._resetTextSort(),$(e.findDOMNode(this.refs["search-keyword"])).find("input").val(""),u.reset(),this._loadData()},officeToggle:function(e){var t=$(e.target).parent();if(t.is("a")&&(t=t.parent()),!t.hasClass("active")){$.each($("#companyoffice-nav").find("li"),function(e,t){$(t).removeClass("active")}),$(".table").hide(),t.addClass("active");var n=t.attr("data-tab");$("#"+n).show()}},unmountModal:function(){e.findDOMNode(this.refs.loadmodal),e.unmountComponentAtNode(e.findDOMNode(this.refs.loadmodal))},showmodal:function(t){var n=this;e.render(e.createElement(y,{loaddata:n._loadData}),e.findDOMNode(n.refs.loadmodal))},openModalEdit:function(t){var n={};this.state.items.map(function(e){e.id==t&&(n=e)}),e.render(e.createElement(E,{loaddata:this._loadData,data:n}),e.findDOMNode(this.refs.loadmodal))},showmodaledit:function(e){var t=$(e.target).data("id");$(e.target).is("div")||(t=$(e.target).parent().data("id")),this.openModalEdit(t)},componentDidUpdate:function(){t.trigger("listsearch:updatesize")},componentWillUnmount:function(){t.off("modal:hide",this.unmountModal),s.destroyPullToRefresh()},componentWillMount:function(){u.initFilter(this.filters)},componentDidMount:function(){this._loadData(),this.initSortable(),t.on("modal:hide",this.unmountModal),s.enablePullToRefresh(this._loadData)},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,e.createElement(b,null)),e.createElement("th",null,l.t("name")),e.createElement("th",null,l.t("address")),e.createElement("th",null,l.t("work_time_range")),e.createElement("th",null,l.t("work_tracking_reviewer")),e.createElement("th",{className:"tcw100"},l.t("restrict_ips")),e.createElement("th",null,d.t("creator_id")),e.createElement("th",null,d.t("date_created")),a.hasById(a.COMPANY_SETTING)?e.createElement("th",{width:"100",className:"col_action_2button"}):"")},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(f,{rootlink:"#setting/menu/id/other",roottext:c.t("company"),link:"#office",loadFilterQueryTagData:this.loadFilterQueryTagData,lang:l,text:l.t("office"),filters:this.filters,total:this.state.total,limit:this.state.limit,hidepagination:!1,hidekeywordsearch:!0},e.createElement(_,null),e.createElement("a",{href:"javascript:void(0)",onClick:this.showmodal,className:"mainbutton"},e.createElement("i",{className:"icon tc-plus-circle"}),e.createElement("span",{className:"hideonsmall"},l.t("insert")))),e.createElement(g,{ref:"sidebar",keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit}),e.createElement("div",{ref:"grouplist",className:"ui segment tctabledata tc-scrolled"},e.createElement("table",{className:o.tableclass(),ref:"officetable"},e.createElement("thead",null,o.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.total>0?this.state.items.map(function(n,a){return e.createElement(v,{ordering:a+1,key:n.id,data:n,loadData:t._loadData,openEditModalHandler:t.openModalEdit})}):"")))),e.createElement("div",{ref:"loadmodal"}),e.createElement(N,{ref:"table_clone"}))}}),k=n.extend({run:function(){t.trigger("pageheader:activemenu","",!0),t.trigger("sidebar:toggle","hide"),e.render(e.createElement(w,{key:this.getFragment()}),document.getElementById("container"))}});return k}),define("controllers/profile/changepassword",["react","backbone","eventbus","basecontroller","pref","components/profile/changepassword","models/user"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"ChangePasswordController",componentDidMount:function(){var a=this;n.trigger("sidebar:toggle","hide"),$("#body-loader").addClass("active");var s=i.get("uid");new o({id:s}).fetch({data:{nocache:!0,full:!0},nocache:!0,success:function(t,n){e.render(e.createElement(r,{data:n}),e.findDOMNode(a.refs.container))},error:function(){t.history.navigate("index",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})},render:function(){return e.createElement("div",{ref:"container"})}}),l=a.extend({run:function(t){n.trigger("pageheader:activemenu","",!0),e.render(e.createElement(s,null),document.getElementById("container"))}});return l}),define("controllers/profile/index",["react","backbone","eventbus","basecontroller","pref","components/profile/edit","models/user"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"ProfileController",componentDidMount:function(){var a=this;n.trigger("sidebar:toggle","hide"),$("#body-loader").addClass("active");var s=i.get("uid");new o({id:s}).fetch({data:{nocache:!0,full:!0},nocache:!0,success:function(t,n){e.render(e.createElement(r,{data:n}),e.findDOMNode(a.refs.container))},error:function(){t.history.navigate("index",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})},render:function(){return e.createElement("div",{ref:"container"})}}),l=a.extend({run:function(t){n.trigger("pageheader:activemenu","",!0),e.render(e.createElement(s,null),document.getElementById("container"))}});return l}),define("controllers/profile/notification",["react","backbone","eventbus","basecontroller","pref","components/profile/notification","models/notifysetting"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"NotificationController",fakeSetting:{creator_id:i.get("uid"),company_id:i.get("cid"),id:0,available_types:[],ignore_type:[],ignore_channel:[]},componentDidMount:function(){var t=this;n.trigger("sidebar:toggle","hide"),$("#body-loader").addClass("active"),(new o).getUserSetting({success:function(n){"undefined"!=typeof n.id&&n.id>0&&(t.fakeSetting=n),e.render(e.createElement(r,{data:t.fakeSetting}),e.findDOMNode(t.refs.container))},error:function(){console.log("error_notify_setting")},complete:function(){$("#body-loader").removeClass("active")}})},render:function(){return e.createElement("div",{ref:"container"})}}),l=a.extend({run:function(t){n.trigger("pageheader:activemenu","",!0),e.render(e.createElement(s,null),document.getElementById("container"))}});return l}),define("controllers/profile/notificationtype",["react","backbone","eventbus","basecontroller","pref","components/profile/notification-type","models/notifysetting"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"NotificationTypeController",fakeSetting:{creator_id:i.get("uid"),company_id:i.get("cid"),id:0,ignore_type:[],ignore_channel:[]},componentDidMount:function(){var t=this;n.trigger("sidebar:toggle","hide"),$("#body-loader").addClass("active"),(new o).getUserSetting({success:function(n){"undefined"!=typeof n.items.length&&n.items.length>0&&(t.fakeSetting=n.items[0]),e.render(e.createElement(r,{data:t.fakeSetting}),e.findDOMNode(t.refs.container))},error:function(){},complete:function(){$("#body-loader").removeClass("active")}})},render:function(){return e.createElement("div",{ref:"container"})}}),l=a.extend({run:function(t){n.trigger("pageheader:activemenu","",!0),e.render(e.createElement(s,null),document.getElementById("container"))}});return l}),define("controllers/project/add",["react","basecontroller","eventbus","components/project/add"],function(e,t,n,a){var i=t.extend({run:function(){n.trigger("pageheader:activemenu","project",!0),e.render(e.createElement(a,null),document.getElementById("container"))}});return i}),define("controllers/project/detail",["react","basecontroller","eventbus","querystring","components/projecttask/list","models/project"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"ProjectDetailController",componentDidMount:function(){var t=this,n=a.get("id")||0;new r({id:n}).fetch({success:function(n,a){e.render(e.createElement(i,{key:"task-"+a.id,project:a}),e.findDOMNode(t.refs.container))},error:function(){Backbone.history.navigate("project",{trigger:!0})},complete:function(){}})},render:function(){return e.createElement("div",{ref:"container"})}}),s=t.extend({run:function(t){n.trigger("pageheader:activemenu","project",!0),n.trigger("sidebar:toggle","hide"),e.render(e.createElement(o,{key:this.getFragment()}),document.getElementById("container"))}});return s}),define("controllers/project/edit",["react","backbone","eventbus","basecontroller","pref","helper","querystring","models/project","components/project/edit"],function(e,t,n,a,i,r,o,s,l){var c=e.createClass({displayName:"ProjectEditController",componentDidMount:function(){var a=this;n.trigger("sidebar:toggle","hide"),$("#body-loader").addClass("active");var i=o.get("id")||0;(new s).canEditProject()?new s({id:i}).fetch({success:function(t,n){e.render(e.createElement(l,{data:n}),e.findDOMNode(a.refs.container))},error:function(){t.history.navigate("project",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}}):(r.showError(Lang.t("error_forbidden")),$("#body-loader").removeClass("active"),t.history.navigate("project",{trigger:!0}))},render:function(){return e.createElement("div",{ref:"container"})}}),d=a.extend({run:function(t){n.trigger("pageheader:activemenu","project",!0),e.render(e.createElement(c,null),document.getElementById("container"))}});return d}),define("controllers/project/index",["react","pref","querystring","helper","phonegap","basecontroller","eventbus","language/project","language/default","components/mixin/listsearch","components/headingfull","components/querytaglist","components/project/filter-status","components/project/item","components/project/report","components/search-keyword","components/floatpagination","components/select","collections/project","models/project","collections/user","models/user","components/filterbarfull","components/filterbartoggle","components/dropdown/projectstatus","components/zerodata"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N,w,k,D){var T=e.createClass({displayName:"ProjectController",mixins:[c],getInitialState:function(){return{items:[],length:0,total:0,hmac:"",alreadyloaddata:!1,currentpage:n.get("page")}},filters:{keyword:null,user_id:null,status:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),status:this.refs.filterstatus.val()};this.doFilters(e)},loadFilterQueryTagData:function(e){var t=null,a="name";switch(e){case"status":var i=(new y).getStatus(this.filters[e]);o.trigger("querytag:updatetext",{field:e,text:i.text});break;case"user_id":t=new b,a="fullname"}null!=t&&n.requestFilterQueryTag(t,this.filters,e,a)},loadData:function(){var i=this;a.showContentLoader($(e.findDOMNode(this.refs.list_wrapper))),(new v).fetch({data:{company_id:t.get("cid"),limit:50,page:this.state.currentpage,status:this.filters.status||-1,user_id:this.filters.user_id,keyword:n.get("keyword")||"",sort_by:this.filters.sort_by,sort_type:this.filters.sort_type},success:function(e,t){t.alreadyloaddata=!0,i.setState(t)},complete:function(){a.hideContentLoader($(e.findDOMNode(i.refs.list_wrapper)))}})},initPopupReport:function(){$(e.findDOMNode(this.refs.projectreportheader)).popup({popup:$(e.findDOMNode(this.refs.projectreporttasklist)),position:"bottom center",on:"hover"})},componentWillUnmount:function(){i.destroyPullToRefresh()},componentDidUpdate:function(){},componentWillMount:function(){n.initFilter(this.filters)},componentDidMount:function(){this.loadData(),this.initSortable(),(new r).setTcScrollMinHeight(),i.enablePullToRefresh(this.loadData)},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",{width:"30",className:"right aligned"},s.t("ordering")),e.createElement("th",null,s.t("name")),e.createElement("th",{width:"100",className:"center aligned"},s.t("count_story")),e.createElement("th",{width:"200"},s.t("member")),e.createElement("th",{className:"col_datetime"},e.createElement("a",{href:"#",className:"sortable","data-sortby":"date_started"},s.t("date_started"))),e.createElement("th",{width:"120"},s.t("status")),e.createElement("th",{className:"col_action_3button"}))},render:function(){var t=this,n=a.isZeroData("project",this.state.total);return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(d,{link:"#project",text:s.t("heading"),filters:this.filters,lang:s,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,hidekeywordsearch:!0,shownavheadingtoggle:!1,currentpage:this.state.currentpage},e.createElement(w,null),(new y).canAddProject()?e.createElement("a",{ref:"btnadd",href:"#project/add",className:"mainbutton"},e.createElement("i",{className:"icon tc-plus-circle"}),e.createElement("span",{className:"hideonsmall"},s.t("add"))):""),n?"":e.createElement(N,{ref:"sidebar",keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,s.t("status"),":")),e.createElement("td",null,e.createElement(k,{inline:!1,className:"search selection fluid",ref:"filterstatus",name:"status",value:this.filters.status})))),e.createElement("div",{ref:"list_wrapper"},n?e.createElement(D,{alreadyloaddata:this.state.alreadyloaddata,icon:"briefcase",text:s.t("zerodata_text"),subtext:s.t("zerodata_subtext"),buttonlink:"#project/add"}):e.createElement("div",null,e.createElement("div",{id:"projectlist",className:"ui left floated segment tctabledata tc-scrolled",style:{paddingTop:0,paddingBottom:0,marginTop:0}},e.createElement("table",{className:a.tableclass(),ref:"projecttable"},e.createElement("thead",null,a.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.items.map(function(n,a){return e.createElement(p,{ordering:a+1,doFilter:t.doFilter,key:n.id,data:n,filterEmployee:t.filterEmployee})})))),e.createElement(h,null),e.createElement("div",{className:"clear"})))))}}),x=r.extend({run:function(){o.trigger("pageheader:activemenu","project",!0),e.render(e.createElement(T,{key:this.getFragment()}),document.getElementById("container"))}});return x}),define("controllers/project/kanban",["react","basecontroller","eventbus","querystring","components/projecttask/kanban","models/project"],function(e,t,n,a,i,r){var o=e.createClass({displayName:"ProjectDetailController",getInitialState:function(){return{data:{}}},componentDidMount:function(){var e=this,t=a.get("id")||0;new r({id:t}).fetch({success:function(t,n){e.setState({data:n})},error:function(){Backbone.history.navigate("project",{trigger:!0})}})},render:function(){return $.isEmptyObject(this.state.data)?e.createElement("div",{className:"ui loading segment"}):e.createElement(i,{key:this.state.data.id,project:this.state.data})}}),s=t.extend({run:function(){n.trigger("pageheader:activemenu","project",!0),n.trigger("sidebar:toggle","hide"),e.render(e.createElement(o,{key:this.getFragment()}),document.getElementById("container"))}});return s}),define("controllers/project/wiki",["react","backbone","eventbus","basecontroller","querystring","components/project/wiki","components/project/wikieditor","models/project"],function(e,t,n,a,i,r,o,s){var l=a.extend({run:function(){n.trigger("pageheader:activemenu","project",!0),$("#body-loader").addClass("active");var a=i.get("id")||0,l=i.get("section")||"";new s({id:a}).fetch({nocache:!0,success:function(t){switch(l){case"editor":e.render(e.createElement(o,{project:t.toJSON()}),document.getElementById("container"));break;default:e.render(e.createElement(r,{project:t.toJSON()}),document.getElementById("container"))}},error:function(){t.history.navigate("project",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})}});return l}),define("controllers/salary/add",["react","eventbus","basecontroller","components/salary/add"],function(e,t,n,a){var i=n.extend({run:function(n){t.trigger("pageheader:activemenu","employee",!0),e.render(e.createElement(a,null),document.getElementById("container"))}});return i}),define("controllers/salary/detail",["react","backbone","eventbus","basecontroller","querystring","models/salary","components/salary/detail"],function(e,t,n,a,i,r,o){
var s=a.extend({run:function(a){n.trigger("pageheader:activemenu","employee",!0),n.trigger("sidebar:toggle","show"),$("#body-loader").addClass("active"),new r({id:i.get("id")}).fetch({nocache:!0,success:function(t){e.render(e.createElement(o,{data:t.toJSON()}),document.getElementById("container"))},error:function(){t.history.navigate("salary",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})}});return s}),define("controllers/salary/edit",["react","backbone","eventbus","basecontroller","querystring","models/salary","components/salary/edit"],function(e,t,n,a,i,r,o){var s=a.extend({run:function(a){n.trigger("pageheader:activemenu","employee",!0),n.trigger("sidebar:toggle","show"),$("#body-loader").addClass("active"),new r({id:i.get("id")}).fetch({nocache:!0,success:function(t){e.render(e.createElement(o,{data:t.toJSON()}),document.getElementById("container"))},error:function(){t.history.navigate("salary",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})}});return s}),define("controllers/salary/export",["react","backbone","eventbus","basecontroller","querystring","components/checkin/export"],function(e,t,n,a,i,r){var o=a.extend({run:function(t){n.trigger("pageheader:activemenu","employee",!0),n.trigger("sidebar:toggle","show"),e.render(e.createElement(r,{creator_id:i.get("creator_id")}),document.getElementById("container"))}});return o}),define("controllers/salary/import",["react","basecontroller","eventbus","components/salary/import"],function(e,t,n,a){var i=e.createClass({displayName:"SalaryImportController",componentDidMount:function(){},render:function(){return e.createElement(a,null)}}),r=t.extend({run:function(){n.trigger("pageheader:activemenu","employee",!0),e.render(e.createElement(i,null),document.getElementById("container"))}});return r}),define("controllers/salary/index",["react","eventbus","basecontroller","pref","role","phonegap","helper","setting","language/salary","language/default","querystring","collections/salary","models/salary","models/user","components/mixin/listsearch","components/headingfull","components/salary/item","components/mixin/listsearch","components/headingfull","components/salary/modal-detail","components/filterbarfull","components/filterbartoggle","components/dropdown/employee","components/dropdown/salarytype","components/dropdown/salarystatus","components/dropdown/salarysource","components/zerodata","components/tabletheadfixedonscroll","components/table/idheadcell"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,h,f,_,v,y,E,b,N,w,k,D,T){var x=e.createClass({displayName:"SalaryController",getInitialState:function(){return{hmac:"",models:[],length:0,total:0,alreadyloaddata:!1,currentpage:d.get("page")}},mixins:[h],filters:{keyword:null,employee:null,type:null,status:null,source:null,creator_id:null,date_started:null,date_ended:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),status:this.refs.filterstatus.val(),type:this.refs.filtertype.val(),employee:this.refs.filteremployee.val(),creator_id:this.refs.filtercreator.val(),source:this.refs.filtersource.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),this.doFilters(e)},loadFilterQueryTagData:function(e){var n=null,a=this.filters[e],i="name";switch(e){case"status":var r=(new m).getStatus(a);t.trigger("querytag:updatetext",{field:e,text:r.text});break;case"type":var o=(new m).getType(a);t.trigger("querytag:updatetext",{field:e,text:o.text});break;case"source":var s=(new m).getSource(a);t.trigger("querytag:updatetext",{field:e,text:s.text});break;case"employee":n=new p,i="fullname";break;case"creator_id":n=new p,i="fullname"}null!=n&&d.requestFilterQueryTag(n,this.filters,e,i)},checkRole:function(){var e=a.get("role").split(",");return $.inArray(262,e)},doCloneThead:function(){var t=e.findDOMNode(this.refs.salarytable);this.refs.table_clone.doClone(t).updateWidth()},_loadData:function(){var t=this,n={company_id:a.get("cid"),limit:50,page:d.get("page")||1,keyword:d.get("keyword")||"",status:d.get("status")||null,creator_id:d.get("creator_id")||null,user_id:a.get("uid"),type:d.get("type")||null,source:d.get("source")||null,date_started:d.get("date_started")||null,date_ended:d.get("date_ended")||null,is_not_deleted:1,sort_by:d.get("sort_by")||"id",sort_type:d.get("sort_type")||"DESC"};o.showContentLoader($(e.findDOMNode(this.refs.list_wrapper))),(new u).fetch({data:n,success:function(e){e.alreadyloaddata=!0,t.setState(e)},complete:function(){o.hideContentLoader($(e.findDOMNode(t.refs.list_wrapper))),t.doCloneThead()}})},checkPermisson:function(){var t=this,n=i.hasById(262),a=["all_employee","btnadd","import"];a.length&&$.each(a,function(a,i){n||$(e.findDOMNode(t.refs[i])).hide()})},viewDetail:function(t){e.render(e.createElement(_,{data:t}),e.findDOMNode(this.refs["modal-wrapper"]))},_unmountModal:function(){e.unmountComponentAtNode(e.findDOMNode(this.refs["modal-wrapper"]))},componentWillMount:function(){d.initFilter(this.filters)},componentWillUnmount:function(){t.off("list:reload",this._loadData),t.off("salary:modalhide",this._unmountModal),t.off("salary:viewdetail",this.viewDetail),r.destroyPullToRefresh()},componentDidMount:function(){this.checkPermisson(),this._loadData(),this.initSortable(),(new n).setTcScrollMinHeight(),t.on("list:reload",this._loadData),t.on("salary:modalhide",this._unmountModal),t.on("salary:viewdetail",this.viewDetail),r.enablePullToRefresh(this._loadData),o.isSmallScreen()||o.initMyTip($(e.findDOMNode(this)).find(".mytip"))},componentDidUpdate:function(){this.checkPermisson()},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,e.createElement(T,null)),e.createElement("th",null,l.t("employee")),e.createElement("th",null,l.t("title")),e.createElement("th",{className:"right aligned"},l.t("total")),e.createElement("th",null,l.t("type")),e.createElement("th",null,l.t("time")),e.createElement("th",{className:"col_status"},l.t("status")),e.createElement("th",null,l.t("datecreated")))},render:function(){var t=this,n=o.isZeroData("salary",this.state.total);return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(f,{link:"#salary",text:l.t("heading_mine"),filters:this.filters,lang:l,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,hidekeywordsearch:!0,currentpage:this.state.currentpage},e.createElement(y,null),i.hasById(262)?e.createElement("a",{href:"#salary/manage",className:"mytip mainbutton",title:l.t("manage")},e.createElement("i",{className:"icon tc-gear"}),e.createElement("span",{className:"hideonsmall"},l.t("manage"))):""),n?null:e.createElement(v,{heading:l.t("heading_sidebar"),ref:"sidebar",datepicker:!0,date_started:d.get("date_started"),date_ended:d.get("date_ended"),datepickerLabel:l.t("datecreated"),keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("employee"),":")),e.createElement("td",null,e.createElement(E,{inline:!1,className:"search selection fluid",ref:"filteremployee",name:"employee",value:this.filters.employee}))),e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("status"),":")),e.createElement("td",null,e.createElement(N,{inline:!1,className:"search selection fluid",ref:"filterstatus",name:"status",value:this.filters.status}))),e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("source"),":")),e.createElement("td",null,e.createElement(w,{inline:!1,className:"search selection fluid",ref:"filtersource",name:"source",value:this.filters.source}))),e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("type"),":")),e.createElement("td",null,e.createElement(b,{inline:!1,className:"search selection fluid",ref:"filtertype",name:"type",value:this.filters.type}))),e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("creator"),":")),e.createElement("td",null,e.createElement(E,{inline:!1,className:"search selection fluid",ref:"filtercreator",name:"creator_id",value:this.filters.creator_id})))),e.createElement("div",{ref:"list_wrapper",style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},n?e.createElement(k,{alreadyloaddata:this.state.alreadyloaddata,text:l.t("zerodata_text"),subtext:l.t("zerodata_subtext"),buttonlink:"#salary/add"}):e.createElement("table",{className:o.tableclass(),ref:"salarytable"},e.createElement("thead",null,o.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){return n=n.toJSON(),e.createElement(g,{key:n.id,viewDetail:t._viewDetail,filterStatus:t._filterStatus,data:n})}))))),e.createElement("div",{ref:"modal-wrapper",id:"loaddetail"}),e.createElement(D,{ref:"table_clone"}))}}),C=n.extend({run:function(){t.trigger("pageheader:activemenu","employee",!0),t.trigger("sidebar:toggle","show"),e.render(e.createElement(x,{key:this.getFragment()}),document.getElementById("container"))}});return C}),define("controllers/salary/manage",["react","eventbus","basecontroller","pref","role","phonegap","helper","setting","language/salary","language/default","querystring","collections/salary","models/salary","models/user","components/mixin/listsearch","components/headingfull","components/salary/item-manage","components/mixin/listsearch","components/headingfull","components/filterbarfull","components/filterbartoggle","components/dropdown/employee","components/dropdown/salarytype","components/dropdown/salarystatus","components/dropdown/salarysource","components/zerodata","components/table/idheadcell"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,h,f,_,v,y,E,b,N,w,k){var D=e.createClass({displayName:"SalaryManageController",getInitialState:function(){return{hmac:"",models:[],length:0,total:0,alreadyloaddata:!1,currentpage:d.get("page")}},mixins:[h],filters:{keyword:null,employee:null,type:null,status:null,source:null,creator_id:null,date_started:null,date_ended:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),status:this.refs.filterstatus.val(),type:this.refs.filtertype.val(),employee:this.refs.filteremployee.val(),creator_id:this.refs.filtercreator.val(),source:this.refs.filtersource.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),this.doFilters(e)},loadFilterQueryTagData:function(e){var n=null,a=this.filters[e],i="name";switch(e){case"status":var r=(new m).getStatus(a);t.trigger("querytag:updatetext",{field:e,text:r.text});break;case"type":var o=(new m).getType(a);t.trigger("querytag:updatetext",{field:e,text:o.text});break;case"source":var s=(new m).getSource(a);t.trigger("querytag:updatetext",{field:e,text:s.text});break;case"employee":n=new p,i="fullname";break;case"creator_id":n=new p,i="fullname"}null!=n&&d.requestFilterQueryTag(n,this.filters,e,i)},checkRole:function(){var e=a.get("role").split(",");return $.inArray(262,e)},_loadData:function(){var t=this;o.showContentLoader($(e.findDOMNode(this.refs.list_wrapper)));var n={company_id:a.get("cid"),limit:50,page:d.get("page")||1,keyword:d.get("keyword")||"",status:d.get("status")||null,creator_id:a.get("uid"),user_id:d.get("employee"),type:d.get("type")||null,source:d.get("source")||null,date_started:d.get("date_started")||null,date_ended:d.get("date_ended")||null,is_not_deleted:1,sort_by:d.get("sort_by")||"id",sort_type:d.get("sort_type")||"DESC"};(new u).fetch({data:n,success:function(e){e.alreadyloaddata=!0,t.setState(e)},complete:function(){o.hideContentLoader($(e.findDOMNode(t.refs.list_wrapper)))}})},checkPermisson:function(){var t=this,n=i.hasById(262),a=["all_employee","btnadd","import"];a.length&&$.each(a,function(a,i){n||$(e.findDOMNode(t.refs[i])).hide()})},componentWillMount:function(){d.initFilter(this.filters)},componentWillUnmount:function(){t.off("list:reload",this._loadData),r.destroyPullToRefresh()},componentDidMount:function(){this.checkPermisson(),this._loadData(),this.initSortable(),(new n).setTcScrollMinHeight(),t.on("list:reload",this._loadData),r.enablePullToRefresh(this._loadData),o.isSmallScreen()||o.initMyTip($(e.findDOMNode(this)).find(".mytip"))},componentDidUpdate:function(){this.checkPermisson()},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,e.createElement(k,null)),e.createElement("th",null,l.t("employee")),e.createElement("th",null,l.t("title")),e.createElement("th",{className:"right aligned"},l.t("total")),e.createElement("th",null,l.t("type")),e.createElement("th",null,l.t("time")),e.createElement("th",{className:"col_status"},l.t("status")),e.createElement("th",null,c.t("creator_id")),e.createElement("th",null,l.t("datecreated")),e.createElement("th",null))},render:function(){var t=this,n=o.isZeroData("salary",this.state.total);return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement(f,{link:"#salary/manage",text:l.t("heading"),subtext:l.t("manage"),filters:this.filters,lang:l,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,hidekeywordsearch:!0,currentpage:this.state.currentpage},e.createElement(v,null),e.createElement("a",{href:"#salary/import",className:"hideonsmall mytip mainbutton",ref:"import"},e.createElement("i",{className:"icon tc-upload"}),e.createElement("span",{className:"hideonsmall"},l.t("import"))),e.createElement("a",{href:"#salary/add",ref:"btnadd",className:"mytip mainbutton",title:c.t("insert")},e.createElement("i",{className:"icon tc-plus-circle"}),e.createElement("span",{className:"hideonsmall"},c.t("insert")))),n?"":e.createElement(_,{heading:l.t("heading_sidebar"),ref:"sidebar",datepicker:!0,date_started:d.get("date_started"),date_ended:d.get("date_ended"),datepickerLabel:l.t("datecreated"),keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("employee"),":")),e.createElement("td",null,e.createElement(y,{className:"search selection fluid",inline:!1,ref:"filteremployee",name:"employee",value:this.filters.employee}))),e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("status"),":")),e.createElement("td",null,e.createElement(b,{className:"search selection fluid",inline:!1,ref:"filterstatus",name:"status",value:this.filters.status}))),e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("source"),":")),e.createElement("td",null,e.createElement(N,{className:"search selection fluid",inline:!1,ref:"filtersource",name:"source",value:this.filters.source}))),e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("type"),":")),e.createElement("td",null,e.createElement(E,{className:"search selection fluid",inline:!1,ref:"filtertype",name:"type",value:this.filters.type}))),e.createElement("tr",null,e.createElement("td",null,e.createElement("label",null,l.t("creator"),":")),e.createElement("td",null,e.createElement(y,{className:"search selection fluid",inline:!1,ref:"filtercreator",name:"creator_id",value:this.filters.creator_id})))),e.createElement("div",{ref:"list_wrapper",style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},n?e.createElement(w,{alreadyloaddata:this.state.alreadyloaddata,text:l.t("zerodata_text"),subtext:l.t("zerodata_subtext"),buttonlink:"#salary/add"}):e.createElement("table",{className:o.tableclass(),ref:"salarytable"},e.createElement("thead",null,o.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",null,this.state.models.map(function(n,a){return n=n.toJSON(),e.createElement(g,{key:n.id,viewDetail:t._viewDetail,filterStatus:t._filterStatus,data:n})}))))),e.createElement("span",{ref:"modal-wrapper",id:"loaddetail"}))}}),T=n.extend({run:function(){t.trigger("pageheader:activemenu","employee",!0),t.trigger("sidebar:toggle","show"),e.render(e.createElement(D,{key:this.getFragment()}),document.getElementById("container"))}});return T}),define("controllers/setting/cache",["react","eventbus","basecontroller","components/setting/cache"],function(e,t,n,a){var i=n.extend({run:function(n){t.trigger("pageheader:activemenu","",!0),e.render(e.createElement(a,null),document.getElementById("container"))}});return i}),define("controllers/setting/index",["react","basecontroller","pref","eventbus","language/company","language/default","language/setting","querystring","helper","models/companysetting","components/heading","components/setting/tab-info","components/setting/tab-menu"],function(e,t,n,a,i,r,o,s,l,c,d,u,m){var p=e.createClass({displayName:"SettingController",getInitialState:function(){return{setting:{}}},componentDidMount:function(){this._loadData(),a.trigger("sidebar:toggle","hide")},_loadData:function(){var t=this,a={company_id:n.get("cid"),tab:"info"};l.showContentLoader($(e.findDOMNode(t.refs.list_wrapper))),(new c).getSetting(a,function(n){$(".tab",t.getDOMNode()).removeClass("loading"),t.setState({setting:n}),l.hideContentLoader($(e.findDOMNode(t.refs.list_wrapper)))})},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement(d,{rootlink:"#setting/menu/id/order",roottext:o.t("sale"),link:"#setting/order",text:o.t("general"),subtext:r.t("update")}),e.createElement("div",{className:"ui segment",ref:"list_wrapper"},$.isEmptyObject(t.state.setting)?"":e.createElement(u,{ref:"tab-info",setting:t.state.setting})))}}),h=t.extend({run:function(){a.trigger("pageheader:activemenu","",!0),e.render(e.createElement(p,null),document.getElementById("container"))}});return h}),define("controllers/setting/menu",["react","basecontroller","pref","eventbus","querystring","helper","components/setting/menu"],function(e,t,n,a,i,r,o){var s=e.createClass({displayName:"SettingController",componentDidMount:function(){},render:function(){return e.createElement(o,{id:i.get("id")})}}),l=t.extend({run:function(){a.trigger("pageheader:activemenu","",!0),e.render(e.createElement(s,null),document.getElementById("container"))}});return l}),define("controllers/setting/module",["react","basecontroller","setting","pref","eventbus","helper","language/setting","language/companymodule","models/companymodule","components/headingfull","components/setting/moduleitem"],function(e,t,n,a,i,r,o,s,l,c,d){var u=e.createClass({displayName:"ModuleController",getInitialState:function(){return{modules:[],module_enable:[],module_beta:[]}},_loadData:function(){var e=this;(new l).getModules(a.get("cid"),function(t){e.setState(t)})},componentWillUnmount:function(){},componentDidMount:function(){this._loadData()},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement(c,{link:"#setting/module",text:s.t("heading"),hidepagination:!0,hidekeywordsearch:!0},e.createElement("a",{href:n.wlLandingRooturl+"features",target:"_blank",className:"hideonsmall"},e.createElement("i",{className:"icon tc-question"}),s.t("view_about"))),e.createElement("div",{style:{padding:10}},e.createElement("ul",{className:"ui divided items"},e.createElement("li",{className:"item hideonsmall"},e.createElement("div",{className:"ui image",style:{width:84}},o.t("status")),e.createElement("div",{className:"content"},e.createElement("div",{className:"ui grid stackable two columns"},e.createElement("div",{className:"hideonsmall ui two wide column right aligned"},o.t("group")),e.createElement("div",{className:"ui four wide column",style:{paddingBottom:"0 !important"}},o.t("module")),e.createElement("div",{className:"ui ten wide column"},o.t("about"))))),this.state.modules.map(function(n){var a=!1;$.inArray(n.id,t.state.module_enable)>=0&&(a=!0);var i=!1;return n.type>0&&$.inArray(n.id,t.state.module_beta)<0&&(i=!0),e.createElement(d,{checked:a,disabled:i,key:n.id,data:n})}))))}}),m=t.extend({run:function(){i.trigger("pageheader:activemenu","",!0),e.render(e.createElement(u,null),document.getElementById("container"))}});return m}),define("controllers/setting/role",["react","basecontroller","pref","eventbus","language/company","language/default","language/setting","querystring","helper","models/rbacrole","components/headingfull","components/setting/tab-role"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=e.createClass({displayName:"RoleController",getInitialState:function(){return{setting:{}}},_loadData:function(){var t=this,a={company_id:n.get("cid"),tab:"role"};l.showContentLoader($(e.findDOMNode(t.refs.list_wrapper))),(new c).getData({query:a,action:"setting",success:function(n){l.hideContentLoader($(e.findDOMNode(t.refs.list_wrapper))),t.setState({setting:n})}})},componentWillUnmount:function(){a.off("role:reloaddata",this._loadData)},componentDidMount:function(){this._loadData(),a.trigger("sidebar:toggle","hide"),a.on("role:reloaddata",this._loadData)},render:function(){var t=this;return e.createElement("div",{className:"ui segments"},e.createElement(d,{rootlink:"#setting/menu/id/other",roottext:o.t("company"),link:"#setting/role",text:o.t("permission"),filters:this.filters,hidekeywordsearch:!0,hidepagination:!0,hidefiltertoggle:!0,hidetab:!0},e.createElement("a",{href:"#logaudit",className:"hideonsmall"},e.createElement("i",{className:"icon tc-history"})," ",i.t("logaudit"))),e.createElement("div",{ref:"list_wrapper",className:"ui segment"},e.createElement("div",{className:"tc-scrolled"},e.createElement("div",{className:"ui bottom attached active tab segment",ref:"data_tab_role","data-tab":"tab_role"},$.isEmptyObject(t.state.setting)?"":e.createElement(u,{ref:"tab-role",setting:t.state.setting})))))}}),p=t.extend({run:function(){a.trigger("pageheader:activemenu","",!0),e.render(e.createElement(m,{key:this.getFragment()}),document.getElementById("container"))}});return p}),define("controllers/support/cache",["react","eventbus","basecontroller","components/setting/cache"],function(e,t,n,a){var i=n.extend({run:function(n){t.trigger("pageheader:activemenu","",!0),e.render(e.createElement(a,null),document.getElementById("container"))}});return i}),define("controllers/support/index",["react","basecontroller","setting","pref","companymodule","eventbus","helper","language/support","models/changelog","components/headingfull"],function(e,t,n,a,i,r,o,s,l,c){var d=e.createClass({displayName:"ModuleController",getInitialState:function(){return{}},componentWillUnmount:function(){},componentDidMount:function(){},render:function(){return e.createElement("div",null,e.createElement(c,{link:"#support",text:s.t("heading"),hidepagination:!0,hidekeywordsearch:!0,hidefiltertoggle:!0,hidetab:!0,nomarginbottom:!0,shownavheadingtoggle:!1}),e.createElement("div",{className:"",style:{padding:15}},e.createElement("div",{className:"ui segment"},e.createElement("h4",{className:"ui header"},s.t("header_app")),e.createElement("p",null,s.t("current_version"),": ",(new l).getVersion()),e.createElement("p",null,s.t("cache_manage"),": ",e.createElement("a",{href:"#support/cache"},s.t("cache_manage_link")))),e.createElement("div",{className:"ui segment"},e.createElement("h4",{className:"ui header"},s.t("header_account")),e.createElement("p",null,s.t("summary")),e.createElement("p",{style:{fontSize:12,lineHeight:1.7}},s.t("companyid"),": ",a.get("cid"),e.createElement("br",null),s.t("companyname"),": ",a.get("company"),e.createElement("br",null),s.t("userid"),": ",a.get("uid"),e.createElement("br",null),s.t("fullname"),": ",a.get("fullname"),e.createElement("br",null),s.t("email"),": ",a.get("email"),e.createElement("br",null))),e.createElement("div",{className:"ui segment"},e.createElement("h4",{className:"ui header"},s.t("header_email")),e.createElement("p",null,s.t("summary_email")," ",n.wlEmailSupport)),e.createElement("div",{className:"ui segment"},e.createElement("h4",{className:"ui header"},s.t("header_chat")),e.createElement("p",null,e.createElement("a",{href:n.wlFullPageSupportChat,target:"_blank"},s.t("summary_chat")))),o.isPhonegapIos()?null:e.createElement("div",{className:"ui segment"},e.createElement("h4",{className:"ui header"},s.t("header_help")),e.createElement("p",null,e.createElement("a",{href:n.wlLandingRooturl+"ho-tro",target:"_blank"},s.t("viewhelp"))))))}}),u=t.extend({run:function(){r.trigger("pageheader:activemenu","",!0),e.render(e.createElement(d,null),document.getElementById("container"))}});return u}),define("controllers/user/forgotpass",["react","setting","basecontroller","language/user","setting","components/textbox"],function(e,t,n,a,t,i){var r=e.createClass({displayName:"UserForgotpassController",submit:function(e){return $(".ui.form").addClass("loading"),$.ajax({url:t.rooturl+"v1/users/forgotpassword",type:"post",dataType:"json",data:"email="+encodeURIComponent(this.refs.email.getValue())+"&wl="+t.wlName,error:function(){alert("Error while request to server"),$(".ui.form").removeClass("loading")},success:function(e){$(".ui.form").removeClass("loading"),"success_user_update"==e&&($(".ui.form").hide(),$(".message.success").show())}}),!1},componentWillUnmount:function(){$("body").removeClass("body_cloud")},verticalAlign:function(){var e=$("#forgotpassdialog").height(),t=$(window).height(),n=(t-e-100)/2;0>n&&(n=30),$("#forgotpassdialog").css("marginTop",n)},componentDidMount:function(){e.unmountComponentAtNode(document.getElementById("loginbox")),$(".ui.form").form({fields:{email:{identifier:"email",rules:[{type:"empty",prompt:a.t("error_email_require")},{type:"email",prompt:a.t("error_email_format_invalid")}]}},inline:!0,onSuccess:this.submit}),$("body").addClass("body_cloud"),this.verticalAlign(),$("#forgotpassdialog").transition("fade in"),e.findDOMNode(this.refs.email).focus()},render:function(){var t={forgotpassdialog:{position:"absolute",top:0,width:"100%",zIndex:1001,display:"none"},login:{paddingTop:"0.6em"}};return e.createElement("div",null,e.createElement("div",{id:"forgotpassdialog",style:t.forgotpassdialog},e.createElement("div",{className:"ui stackable four column grid"},e.createElement("div",{className:"column centered",id:"logininner"},e.createElement("h2",null,a.t("forgotpass_heading")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"ui hidden success message"},e.createElement("div",{className:"header"},a.t("forgotpass_success_header")),e.createElement("p",null,a.t("forgotpass_success_body"),e.createElement("br",null),e.createElement("br",null),e.createElement("a",{href:"#user/login",className:"tiny"},"« ",a.t("login_in_success_form")))),e.createElement("div",{className:"ui hidden small error message"},e.createElement("div",{className:"header"},a.t("forgotpass_error_header")),e.createElement("p",null)),e.createElement("form",{className:"ui form"},e.createElement(i,{label:a.t("email"),required:"true",focus:"true",ref:"email",id:"email"}),e.createElement("button",{className:"ui button teal",type:"submit"},a.t("forgotpass_submit")),e.createElement("a",{href:"#user/login",className:"ui floated right pull-right",style:t.login},a.t("login_heading")))))))}}),o=n.extend({run:function(){e.render(e.createElement(r,null),document.getElementById("forgotpassbox"))}});return o}),define("controllers/user/resetpassword",["react","initquerystring","helper","backbone","basecontroller","language/user","setting","components/textbox"],function(e,t,n,a,i,r,o,s){var l=e.createClass({displayName:"UserResetPasswordController",submit:function(e){e.preventDefault(),$(".ui.form").addClass("loading");var a={email:t.get("email"),code:t.get("code"),password:this.refs.password.getValue(),password2:this.refs.password2.getValue()};return $.ajax({url:o.rooturl+"v1/users/resetpassword",type:"post",dataType:"json",data:a,error:function(e,t,a){n.notifyErrorAndForm(e,r),$(".ui.form").removeClass("loading")},success:function(e){$(".ui.form").removeClass("loading"),"success_password_change"==e&&($(".ui.form").hide(),$(".message.success").show())}}),!1},componentWillUnmount:function(){$("body").removeClass("body_cloud")},verticalAlign:function(){var e=$("#forgotpassdialog").height(),t=$(window).height(),n=(t-e-100)/2;0>n&&(n=30),$("#forgotpassdialog").css("marginTop",n)},componentWillMount:function(){},componentDidMount:function(){e.unmountComponentAtNode(document.getElementById("loginbox")),$(".ui.form").form({fields:{password:{identifier:"password",rules:[{type:"empty",prompt:r.t("error_password_required")},{type:"minLength[7]",prompt:r.t("error_password_to_short")}]},password2:{identifier:"password2",rules:[{type:"match[password]",prompt:r.t("error_password2_invalid")}]}},inline:!0,onSuccess:this.submit}),$("body").addClass("body_cloud"),this.verticalAlign(),$("#forgotpassdialog").transition("fade in"),e.findDOMNode(this.refs.password).focus()},render:function(){var t={forgotpassdialog:{position:"absolute",top:0,width:"100%",zIndex:1001,display:"none"},login:{paddingTop:"0.6em"}};return e.createElement("div",null,e.createElement("div",{id:"forgotpassdialog",style:t.forgotpassdialog},e.createElement("div",{className:"ui stackable four column grid"},e.createElement("div",{className:"column centered",id:"logininner"},e.createElement("h2",null,r.t("resetpassword_heading")),e.createElement("div",{className:"ui divider"}),e.createElement("div",{className:"ui hidden success message"},e.createElement("div",{className:"header"},r.t("success_resetpassword")),e.createElement("p",null,e.createElement("a",{href:"#user/login",className:"tiny"},"« ",r.t("login_in_success_form")))),e.createElement("form",{className:"ui form"},e.createElement(s,{label:r.t("password"),type:"password",required:"true",focus:"true",ref:"password",id:"password"}),e.createElement(s,{label:r.t("password2"),type:"password",required:"true",focus:"false",ref:"password2",id:"password2"}),e.createElement("button",{className:"ui button teal",type:"submit"},r.t("update")),e.createElement("a",{href:"#user/login",className:"ui floated right pull-right",style:t.login},r.t("login_heading")))))))}}),c=i.extend({run:function(){e.render(e.createElement(l,null),document.getElementById("forgotpassbox"))}});return c}),define("controllers/workschedule/add",["react","eventbus","basecontroller","components/employeepoint/add"],function(e,t,n,a){var i=n.extend({run:function(){t.trigger("pageheader:activemenu","checkin",!0),e.render(e.createElement(a,null),document.getElementById("container"))}});return i}),define("controllers/workschedule/detail",["react","eventbus","role","basecontroller","companymodule","pref","helper","querystring","phonegap","models/office","models/employee","models/user","collections/employee","components/workschedule/detail"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=a.extend({run:function(n){t.trigger("pageheader:activemenu","checkin",!0);var a=this;t.trigger("sidebar:toggle","hide"),i.has("workscheduling")?($("#body-loader").addClass("active"),(new m).fetch({data:{company_id:r.get("cid"),limit:1,page:1,is_not_deleted:1,ignore_group:1,user_id:r.get("uid"),status:(new d).STATUS_ENABLE},success:function(t){var n=t.toJSON();n=n[0],t.keyload=1,s.get("user_id")==n.user_id?e.render(e.createElement(p,{employeeData:n,key:a.getFragment()+moment().valueOf()}),document.getElementById("container")):Backbone.history.navigate("workschedule/detail/_s/user_id/"+r.get("uid"),{trigger:!0})}})):Backbone.history.navigate("employee",{trigger:!0})}});return h}),define("controllers/workschedule/edit",["react","eventbus","backbone","companymodule","querystring","basecontroller","components/workschedule/edit","models/office"],function(e,t,n,a,i,r,o,s){var l=r.extend({run:function(){if(t.trigger("pageheader:activemenu","checkin",!0),a.has("workscheduling")){$("#body-loader").addClass("active");
var r=i.get("id")||0;new s({id:r}).fetch({nocache:!0,success:function(t){e.render(e.createElement(o,{data:t.toJSON()}),document.getElementById("container"))},error:function(){n.history.navigate("workschedule",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})}else n.history.navigate("employee",{trigger:!0})}});return l}),define("controllers/workschedule/employee",["react","eventbus","basecontroller","pref","role","setting","helper","language/employeepoint","language/default","querystring","collections/employeepoint","collections/employeepointtopic","collections/employee","collections/office","models/employeepoint","models/employee","models/office","components/employeepoint/item","components/employeepoint/employee","components/mixin/listsearch","components/headingfull","components/filtersidebar","components/select/office"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p,h,f,g,_,v,y,E,b,N){var w=e.createClass({displayName:"EmployeePointEmployeeController",getInitialState:function(){return{models:[],office:[],datestarted:moment([]).subtract(44,"days").unix(),dateended:moment().unix(),length:0,total:0,roleid:264,currentpage:1}},mixins:[y],filters:{keyword:null,office_id:null,date_started:null,date_ended:null,sort_by:null,sort_type:null},formSidebarSubmit:function(){var e={keyword:this.refs.sidebar.getKeyword(),office_id:this.refs.filteroffice.val()},t=this.refs.sidebar.getDateStarted();t>0&&(e.date_started=t);var n=this.refs.sidebar.getDateEnded();n>0&&(e.date_ended=n),this.doFilters(e)},loadFilterQueryTagData:function(e){var n=null,a=this.filters[e];switch(e){case"office_id":new g({id:a}).fetch({nocache:!1,success:function(n){t.trigger("querytag:updatetext",{field:e,text:n.attributes.name})}})}null!=n&&c.requestFilterQueryTag(n,this.filters,e)},_loadData:function(){$(".ui.modal").modal();var e=this;$("#body-loader").addClass("active");var t="null";isNaN(parseInt(c.get("office_id")))||(t=parseInt(c.get("office_id")));var n=0;i.hasById(this.state.roleid)||(n=a.get("uid"));var r={company_id:a.get("cid"),limit:50,page:c.get("page")||1,keyword:c.get("keyword")||"",office_id:t,user_id:n,status:(new f).STATUS_ENABLE,ignore_group:1,is_not_deleted:1,is_not_deleted:1,sort_by:c.get("sort_by")||"id",sort_type:c.get("sort_type")||"DESC"};(new m).fetch({data:r,success:function(t){e.setState(t)},complete:function(){$("#body-loader").removeClass("active")}})},checkPermisson:function(){var t=this,n=i.hasById(this.state.roleid),a=["btnadd","btntopic"];a.length&&$.each(a,function(a,i){n||$(e.findDOMNode(t.refs[i])).hide()})},componentWillMount:function(){c.initFilter(this.filters)},componentDidUpdate:function(){this.checkPermisson()},componentDidMount:function(){this._loadData(),this.checkPermisson(),this.initSortable()},renderTableHeaderMobile:function(){},renderTableHeaderDesktop:function(){return e.createElement("tr",null,e.createElement("th",null,s.t("office")),e.createElement("th",null,e.createElement("a",{className:"sortable",href:"javascript:(void(0))","data-sortby":"user_id","data-nameorigin":s.t("employee")},s.t("employee"))),e.createElement("th",{style:{width:200}},s.t("totaltopic")),e.createElement("th",{className:"tcw50"},"Good"),e.createElement("th",{className:"tcw30"}),e.createElement("th",{className:"tcw50"},"Bad"),e.createElement("th",{className:"tcw30"}),e.createElement("th",null,"Good - Bad"),e.createElement("th",null))},render:function(){return e.createElement("div",{className:"ui segments"},e.createElement("div",{id:"page"},e.createElement("div",{id:"pageleft"},e.createElement(b,{heading:"Bộ lọc chấm điểm",ref:"sidebar",datepicker:!0,date_started:c.get("date_started"),date_ended:c.get("date_ended"),datepickerLabel:s.t("datecreated"),keyword:this.filters.keyword,onSubmit:this.formSidebarSubmit},e.createElement("div",{className:"field"},e.createElement("label",null,s.t("office")),e.createElement(N,{ref:"filteroffice",name:"office_id",value:this.filters.office_id,className:"fluid"})))),e.createElement("div",{id:"pageright"},e.createElement(E,{link:"#employeepoint/employee",text:s.t("heading"),filters:this.filters,lang:s,loadFilterQueryTagData:this.loadFilterQueryTagData,total:this.state.total,limit:this.state.limit,hidekeywordsearch:!0,currentpage:this.state.currentpage},e.createElement("a",{href:"#employeepoint"},e.createElement("i",{className:"icon tc-list"}),s.t("view_history")),e.createElement("a",{href:"#employeepoint/add",ref:"btnadd"},e.createElement("i",{className:"icon tc-plus"}),e.createElement("span",{className:"hideonsmall"},l.t("insert")))),e.createElement("div",{style:{paddingTop:0,paddingBottom:0},className:"ui segment tc-scrolled"},e.createElement("table",{className:o.tableclass()},e.createElement("thead",null,o.isMobileScreen()?this.renderTableHeaderMobile():this.renderTableHeaderDesktop()),e.createElement("tbody",{id:"employeelist"},this.state.models.map(function(t){return t=t.toJSON(),e.createElement(v,{ref:"employeelist",key:t.id+"_"+moment().unix(),data:t,datestarted:c.get("date_started"),dateended:c.get("date_ended")})})))))))}}),k=n.extend({run:function(){t.trigger("pageheader:activemenu","checkin",!0),e.render(e.createElement(w,{key:this.getFragment()}),document.getElementById("container"))}});return k}),define("controllers/workschedule/index",["react","eventbus","role","basecontroller","pref","helper","querystring","phonegap","models/office","models/employee","language/workschedule","collections/employee","components/workschedule/edit","components/workschedule/select-office"],function(e,t,n,a,i,r,o,s,l,c,d,u,m,p){var h=e.createClass({displayName:"ScheduleController",getInitialState:function(){return{office:{}}},selectOffice:function(e){Backbone.history.navigate("workschedule/_s/office_id/"+e,{trigger:!0})},getOffice:function(e){var t=this;$("#body-loader").addClass("active"),new l({id:e}).fetch({nocache:!0,success:function(e){t.setState({office:e.toJSON()})},error:function(){Backbone.history.navigate("workschedule",{trigger:!0})},complete:function(){$("#body-loader").removeClass("active")}})},getEmployee:function(){var e=this;(new u).fetch({data:{company_id:i.get("cid"),limit:1,page:1,is_not_deleted:1,ignore_group:1,user_id:i.get("uid"),status:(new c).STATUS_ENABLE},success:function(t){var a=t.toJSON();a=a[0];var s=!0;if(a.office_id>0){if(!n.hasById(n.WORKSCHEDULE_REVIEW))if(a.position_id==(new c).POSITION_MANAGER||a.position_id==(new c).POSITION_STORE_MANAGER){var l=parseInt(o.get("office_id"));l!=a.office_id&&(l=0),(0>=l||!$.isNumeric(l))&&(e.getOffice(a.office_id),Backbone.history.navigate("workschedule/_s/office_id/"+a.office_id,{trigger:!0}))}else s=!1;s||Backbone.history.navigate("workschedule/detail/_s/user_id/"+i.get("uid"),{trigger:!0})}else r.showError(d.t("office_empty")),$("#body-loader").addClass("active"),Backbone.history.navigate("employee",{trigger:!0})}})},checkpermisson:function(){},componentWillMount:function(){this.getEmployee()},componentWillUnmount:function(){s.destroyPullToRefresh()},componentDidUpdate:function(){},componentDidMount:function(){var e=o.get("office_id");e&&this.getOffice(e)},render:function(){return e.createElement("div",null,$.isEmptyObject(this.state.office)?e.createElement(p,{selectOffice:this.selectOffice}):e.createElement(m,{data:this.state.office}))}}),f=a.extend({run:function(){t.trigger("pageheader:activemenu","checkin",!0),e.render(e.createElement(h,{key:this.getFragment()}),document.getElementById("container"))}});return f}),define("controllers/workschedule/swaprange",["react","eventbus","basecontroller","pref","helper","phonegap","companymodule","role","setting","language/workschedule","language/default","components/workschedule/swaprange"],function(e,t,n,a,i,r,o,s,l,c,d,u){var m=n.extend({run:function(){t.trigger("pageheader:activemenu","checkin",!0),o.has("workscheduling")&&s.hasById(s.WORKSCHEDULE_CHANGE)?e.render(e.createElement(u,null),document.getElementById("container")):Backbone.history.navigate("employee",{trigger:!0})}});return m}),define("language/calendar",["baselanguage"],function(e){var t={vn:{Mon:"Thứ 2",Tue:"Thứ 3",Wed:"Thứ 4",Thu:"Thứ 5",Fri:"Thứ 6",Sat:"Thứ 7",Sun:"Chủ Nhật",Jan:"Tháng 1",Feb:"Tháng 2",Mar:"Tháng 3",Apr:"Tháng 4",May:"Tháng 5",Jun:"Tháng 6",Jul:"Tháng 7",Aug:"Tháng 8",Sep:"Tháng 9",Oct:"Tháng 10",Nov:"Tháng 11",Dec:"Tháng 12"},en:{Mon:"Thứ 2",Tue:"Thứ 3",Wed:"Thứ 4",Thu:"Thứ 5",Fri:"Thứ 6",Sat:"Thứ 7",Sun:"Chủ Nhật",Jan:"Tháng 1",Feb:"Tháng 2",Mar:"Tháng 3",Apr:"Tháng 4",May:"Tháng 5",Jun:"Tháng 6",Jul:"Tháng 7",Aug:"Tháng 8",Sep:"Tháng 9",Oct:"Tháng 10",Nov:"Tháng 11",Dec:"Tháng 12"}};return new e({lang:t})}),define("language/datepickercompare",["baselanguage"],function(e){var t={vn:{compareto:"So sánh với",compareto_placeholder:"Nhấn để chọn ngày hoặc so sánh",daterange:"Khoảng thời gian",apply:"Áp dụng",range_custom:"Tùy chọn",range_today:"Hôm nay",range_yesterday:"Hôm qua",range_lastweek:"Tuần trước",range_lastmonth:"Tháng trước",range_last7days:"7 ngày trước",range_last30days:"30 ngày trước",range_previousperiod:"Kỳ trước",range_previousyear:"Năm trước"},en:{compareto:"So sánh với",compareto_placeholder:"Nhấn để chọn ngày hoặc so sánh",daterange:"Khoảng thời gian",apply:"Áp dụng",range_custom:"Tùy chọn",range_today:"Hôm nay",range_yesterday:"Hôm qua",range_lastweek:"Tuần trước",range_lastmonth:"Tháng trước",range_last7days:"7 ngày trước",range_last30days:"30 ngày trước",range_previousperiod:"Kỳ trước",range_previousyear:"Năm trước"}};return new e({lang:t})}),define("language/projectissue",["baselanguage"],function(e){var t={vn:{heading:"Vấn đề",code:"Mã vấn đề",name:"Tên",description:"Mô tả",status:"Trạng thái",type:"Kiểu",priority:"Mức độ",assign:"Gán",assign_for:"Gán cho",date:"Ngày",attachment:"Đính kèm",comment_counter:"Số lượng bình luận",created:"Tạo",last_modified:"Cập nhật cuối",created_by:"Tạo bởi",sidebar_heading:"Bộ lọc vấn đề",filter_keyword:"Từ khóa",filter_assignee_type:"Gán cho",filter_type:"Kiểu",filter_priority:"Mức độ",filter_status:"Trạng thái",filter_issueid:"Mã vấn đề",sort_name:"Tên",sort_id:"Mã",sort_date_created:"Ngày tạo",all:"Tất cả",me:"Tôi",assigned_to_me:"Gán cho tôi",other:"Người khác",assigned_to_others:"Gán cho người khác",un_assigned:"Chưa được gán",add:"Tạo",add_and_close:"Tạo & đóng",add_issue:"Tạo vấn đề",edit:"Cập nhật",edit_issue:"Cập nhật vấn đề",who_working_on_this:"Ai đang theo vấn đề này?",commentplaceholder:"Viết bình luận...",likethis:"thích điều này",commentmore:"Xem bình luận trước đó",error_comment_too_short:"Nội dung bình luận quá ngắn. Tối thiểu 5 ký tự.",error_comment_too_long:"Nội dung bình luận quá dài. Tối đa 64.000 ký tự.",success_add:"Tạo vấn đề thành công!",success_edit:"Cập nhật vấn đề thành công!",success_delete:"Vấn đề {name} đã được xóa thành công!",error_add:"Tạo vấn đề thất bại. Vui lòng thử lại!",error_edit:"Cập nhật vấn đề thất bại. Vui lòng thử lại!",error_delete:"Xóa vấn đề {name} thất bại. Vui lòng thử lại!",error_not_found:"Không tìm thấy vấn đề!",typeBug:"Lỗi",typeFeature:"Tính năng",typeEnhancement:"Nâng cao",typeTask:"Công việc",typePatch:"Vá",typeQuestion:"Hỏi",priorityImmediate:"Khẩn cấp",priorityHigh:"Cao",priorityMedium:"Bình thường",priorityLow:"Thấp",statusNew:"Mới",statusReopen:"Mở lại",statusAssigned:"Đã gán",statusInProgress:"Đang xử lý",statusFeedback:"Chờ phản hồi",statusResolved:"Đã xử lý",statusTesting:"Đang chạy thử",statusDeployment:"Đang triển khai",statusClosed:"Đóng",statusRejected:"Từ chối"},en:{heading:"Vấn đề",code:"Mã vấn đề",name:"Tên",description:"Mô tả",status:"Trạng thái",type:"Kiểu",priority:"Mức độ",assign:"Gán",assign_for:"Gán cho",date:"Ngày",attachment:"Đính kèm",comment_counter:"Số lượng bình luận",created:"Tạo",last_modified:"Cập nhật cuối",created_by:"Tạo bởi",sidebar_heading:"Bộ lọc vấn đề",filter_keyword:"Từ khóa",filter_assignee_type:"Gán cho",filter_type:"Kiểu",filter_priority:"Mức độ",filter_status:"Trạng thái",filter_issueid:"Mã vấn đề",sort_name:"Tên",sort_id:"Mã",sort_date_created:"Ngày tạo",all:"Tất cả",me:"Tôi",assigned_to_me:"Gán cho tôi",other:"Người khác",assigned_to_others:"Gán cho người khác",un_assigned:"Chưa được gán",add:"Tạo",add_and_close:"Tạo & đóng",add_issue:"Tạo vấn đề",edit:"Cập nhật",edit_issue:"Cập nhật vấn đề",who_working_on_this:"Ai đang theo vấn đề này?",commentplaceholder:"Viết bình luận...",likethis:"thích điều này",commentmore:"Xem bình luận trước đó",error_comment_too_short:"Nội dung bình luận quá ngắn. Tối thiểu 5 ký tự.",error_comment_too_long:"Nội dung bình luận quá dài. Tối đa 64.000 ký tự.",success_add:"Tạo vấn đề thành công!",success_edit:"Cập nhật vấn đề thành công!",success_delete:"Vấn đề {name} đã được xóa thành công!",error_add:"Tạo vấn đề thất bại. Vui lòng thử lại!",error_edit:"Cập nhật vấn đề thất bại. Vui lòng thử lại!",error_delete:"Xóa vấn đề {name} thất bại. Vui lòng thử lại!",error_not_found:"Không tìm thấy vấn đề!",typeBug:"Lỗi",typeFeature:"Tính năng",typeEnhancement:"Nâng cao",typeTask:"Công việc",typePatch:"Vá",typeQuestion:"Hỏi",priorityImmediate:"Khẩn cấp",priorityHigh:"Cao",priorityMedium:"Bình thường",priorityLow:"Thấp",statusNew:"Mới",statusReopen:"Mở lại",statusAssigned:"Đã gán",statusInProgress:"Đang xử lý",statusFeedback:"Chờ phản hồi",statusResolved:"Đã xử lý",statusTesting:"Đang chạy thử",statusDeployment:"Đang triển khai",statusClosed:"Đóng",statusRejected:"Từ chối"}};return new e({lang:t})}),define("language/story",["baselanguage"],function(e){var t={vn:{statusPending:"Chờ xử lý",statusAssigned:"Đã giao việc",statusWorking:"Đang giải quyết",statusNeedForApproval:"Cần được duyệt",statusReviewing:"Đang duyệt",statusTesting:"Đang kiểm tra",statusCompletedWithBug:"Hoàn tất nhưng có lỗi",statusCompleted:"Hoàn tất",statusCancelled:"Hủy bỏ"},en:{statusPending:"Chờ xử lý",statusAssigned:"Đã giao việc",statusWorking:"Đang giải quyết",statusNeedForApproval:"Cần được duyệt",statusReviewing:"Đang duyệt",statusTesting:"Đang kiểm tra",statusCompletedWithBug:"Hoàn tất nhưng có lỗi",statusCompleted:"Hoàn tất",statusCancelled:"Hủy bỏ"}};return new e({lang:t})}),define("models/insight",["basemodel","helper","cacheddata","language/default"],function(e,t,n,a){var i=e.extend({urlRoot:"v1/bicenters",getMenu:function(e){var t=this.urlRoot+"/menu";$.ajax({url:t,type:"GET",data:e.query,success:e.success,error:e.error,complete:e.complete})},calculateChange:function(e,n,a){var i="";return a="undefined"!=typeof a?a:2,i=n>e?0==e?"&infin;":t.round(100*(n/e-1),a):e>n?"-"+t.round((e-n)/e*100,a):"0"},isMetricKey:function(e){return 0==e.indexOf("sum_")||(0==e.indexOf("count_")||(0==e.indexOf("avg_")||(0==e.indexOf("min_")||0==e.indexOf("max_"))))},flattenKey:function(e){var t=e.replace("(","_").replace(")","");return t},unflattenKey:function(e){var t=e;return this.isMetricKey(e)&&(t=t.replace("_","(")+")"),t},getSettingTooltip:function(e,t){var n={trigger:e,backgroundColor:"#fff",showDelay:0,hideDelay:50,transitionDuration:0,borderRadius:0,borderColor:"#555",borderWidth:1,textStyle:{color:"#000",decoration:"none",fontSize:11}};return $.extend(n,t)},getSettingXaxis:function(e){var n={};return n.splitLine={show:!1},n.axisLine={lineStyle:{color:"#333",width:1}},n.axisTick={show:!1},n.axisLabel={formatter:function(e,n){return!isNaN(e)&&e>=1e4&&(e=t.shortenNumber(e)),e}},$.extend(n,e)},getSettingYaxis:function(e){var n={};return n.splitLine={lineStyle:{color:["#eee"]}},n.splitNumber=2,n.axisLine={lineStyle:{color:"#fff"}},n.axisTick={show:!1},n.axisLabel={margin:5,textStyle:{fontSize:11},inside:!0,formatter:function(e,n){return 0>=e?"":"\n\n"+t.smartNumberFormat(e)}},$.extend(n,e)},getSettingGrid:function(e){var t={};return t.x=10,t.x2=10,t.y=10,t.y2=30,$.extend(t,e)},formatTimeSerieName:function(e,t){var n="";return n=t-e>=86400?moment.unix(e).format("DD/MM/YYYY")+" - "+moment.unix(t).format("DD/MM/YYYY"):moment.unix(e).format("DD/MM/YYYY")},getChartColors:function(){return["#0077cc","#ed7e17","#fbbd08","#b5cc18","#21ba45","#2185d0","#6435c9","#a333c8","#e03997","#a5673f","#767676"]},loadDimensionFromCache:function(e){var t=n.get(e),a=[];return void 0===t?console.log("Can not load from cache with cachedName",e):a=t().get(),a},getSidebarMenus:function(e,t){return t.forEach(function(t){t.active=!1,t.items.forEach(function(n){n.id==e?(n.active=!0,t.active=!0):n.active=!1})}),t}});return i}),define("models/story",["react","backbone","setting","language/story"],function(e,t,n,a){var i=t.Model.extend({urlRoot:n.endpoint_projectstory+"v1/story",getStatusName:function(e){var t="";switch(e){case this.STATUS_PENDING:t=a.t("statusPending");break;case this.STATUS_ASSIGNED:t=a.t("statusAssigned");break;case this.STATUS_WORKING:t=a.t("statusWorking");break;case this.STATUS_NEED_FOR_APPROVAL:t=a.t("statusNeedForApproval");break;case this.STATUS_REVIEWING:t=a.t("statusReviewing");break;case this.STATUS_TESTING:t=a.t("statusTesting");break;case this.STATUS_COMPLETED_WITH_BUG:t=a.t("statusCompletedWithBug");break;case this.STATUS_COMPLETED:t=a.t("statusCompleted");break;case this.STATUS_CANCELLED:t=a.t("statusCancelled")}return t},initialize:function(){},STATUS_PENDING:1,STATUS_ASSIGNED:3,STATUS_WORKING:5,STATUS_NEED_FOR_APPROVAL:6,STATUS_REVIEWING:7,STATUS_TESTING:8,STATUS_COMPLETED_WITH_BUG:9,STATUS_COMPLETED:11,STATUS_CANCELLED:13,PRIORITY_IMMEDIATE:1,PRIORITY_HIGH:3,PRIORITY_MEDIUM:5,PRIORITY_LOW:7});return i});